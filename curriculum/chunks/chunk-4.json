[
  {
    "id": "c0a1c00b-740e-4ca8-ad6e-eb034b19a51b",
    "startLine": 14000,
    "endLine": 14099,
    "processedDate": "2025-06-17T13:46:23.763Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_default_props_type_checking",
          "title": "React Component Default Props and Type Checking with PropTypes, Flow, and TypeScript",
          "content": "## Default Props\nIn React, `defaultProps` is a way to define default values for props if they are not explicitly passed to a component. This ensures that a component always has a default value for certain props, preventing `undefined` errors and making components more robust and predictable. `defaultProps` are evaluated before the props are passed to the component's `render` method or functional component body.\n\nEven when using static type checkers like Flow (or TypeScript), `defaultProps` continue to function as expected, providing default values for omitted properties. The type checker will correctly infer the type of the prop based on the default value if the prop is optional.\n\n## Runtime Type Checking with PropTypes\n`PropTypes` is a library provided by React (formerly part of the main React package, now a separate package `prop-types`) for runtime type checking of component props. It helps in validating the data type of props passed to a component, providing warnings in the development console if props don't match the expected types. This is particularly useful for catching errors early during development.\n\nWhile `PropTypes` performs checks at runtime (meaning errors are detected when the component renders), it does not prevent the application from compiling or running if there are type mismatches. It serves as a strong development-time tool for ensuring prop consistency.\n\n## Static Type Checking with Flow and TypeScript\nFlow and TypeScript are static type checkers. This means they analyze your code *before* it runs (at compile time or during development) to find type-related errors. They offer a more robust and comprehensive approach to type safety compared to `PropTypes`.\n\n**Flow** is a static type checker for JavaScript developed by Facebook. It focuses on finding type errors in JavaScript code. It requires specific configuration to integrate into a project.\n\n**TypeScript** is a superset of JavaScript that adds static types. It compiles down to plain JavaScript. TypeScript has gained widespread adoption due to its rich tooling, strong community support, and excellent IDE integration.\n\n### Comparing PropTypes vs. Flow/TypeScript\nThe choice between runtime type checking (like `PropTypes`) and static type checking (like Flow or TypeScript) depends on project requirements, team familiarity, and the desired level of type safety.\n\n| Feature           | PropTypes               | Flow / TypeScript               |\n|-------------------|-------------------------|---------------------------------|\n| Type checking     | Runtime                 | Static (compile time/build time) |\n| Setup complexity  | Simple, just import     | Requires configuration          |\n| Error detection   | Only when component renders | Before running code             |\n| Performance impact| Small runtime cost      | No runtime cost (in production) |\n| IDE integration   | Limited                 | Strong with proper setup        |\n| Learning curve    | Gentle                  | Steeper                         |\n| Type expressiveness| Good                    | Excellent                       |\n\nMany teams now opt for TypeScript due to its broader adoption, richer ecosystem, and superior tooling compared to Flow.",
          "examples": [
            {
              "id": "example_default_props_1",
              "title": "Basic Default Props Example",
              "code": "import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction UserProfile(props) {\n  return (\n    <div>\n      <h2>{props.name}</h2>\n      <p>Age: {props.age}</p>\n      <p>Email: {props.contactInfo.email}</p>\n      <p>Hobbies: {props.hobbies.join(', ')}</p>\n    </div>\n  );\n}\n\nUserProfile.defaultProps = {\n  age: 25,\n  hobbies: [],\n  contactInfo: { email: 'user@example.com' }\n};\n\nUserProfile.propTypes = {\n  name: PropTypes.string.isRequired,\n  age: PropTypes.number,\n  hobbies: PropTypes.arrayOf(PropTypes.string),\n  contactInfo: PropTypes.shape({\n    email: PropTypes.string.isRequired\n  })\n};\n\n// Usage example (name is required, others will use default props if not provided):\n// <UserProfile name=\"Alice\" /> \n//    -> Renders Alice, Age: 25, Email: user@example.com, Hobbies: \n// <UserProfile name=\"Bob\" age={30} />\n//    -> Renders Bob, Age: 30, Email: user@example.com, Hobbies: \n// <UserProfile name=\"Charlie\" hobbies={['reading', 'hiking']} />\n//    -> Renders Charlie, Age: 25, Email: user@example.com, Hobbies: reading, hiking\n",
              "explanation": "This example demonstrates how `defaultProps` are defined and used. If `age`, `hobbies`, or `contactInfo` are not provided when `UserProfile` is used, their default values from `UserProfile.defaultProps` will be applied. It also shows `PropTypes` for runtime validation, ensuring `name` is a required string and other props conform to their expected types.",
              "language": "javascript"
            },
            {
              "id": "example_flow_type_definition",
              "title": "Conceptual Flow Type Definition for Component Props",
              "code": "// @flow\nimport * as React from 'react';\n\ntype UserProfileProps = {\n  name: string,\n  age?: number, // Optional prop\n  hobbies?: Array<string>,\n  contactInfo?: { email: string }\n};\n\nfunction UserProfile(props: UserProfileProps): React.Node {\n  const { name, age, hobbies, contactInfo } = props;\n  const defaultAge = age === undefined ? 25 : age;\n  const defaultHobbies = hobbies === undefined ? [] : hobbies;\n  const defaultContactInfo = contactInfo === undefined ? { email: 'user@example.com' } : contactInfo;\n\n  return (\n    <div>\n      <h2>{name}</h2>\n      <p>Age: {defaultAge}</p>\n      <p>Email: {defaultContactInfo.email}</p>\n      <p>Hobbies: {defaultHobbies.join(', ')}</p>\n    </div>\n  );\n}\n\nexport default UserProfile;\n",
              "explanation": "This is a conceptual example showing how Flow types might be defined for component props, including optional properties. While `defaultProps` can still be used, with static type checkers like Flow (and more commonly TypeScript), you often define default values directly within the function signature using destructuring with default assignment, or by explicitly checking for `undefined` as shown here, making the types `?` (optional) to reflect that they might not be passed. This allows the type system to catch errors if a required prop is missing or if an incorrect type is passed.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_default_props_1",
            "question_default_props_2",
            "question_prop_types_flow_mcq_1",
            "question_prop_types_flow_open_1",
            "question_prop_types_flow_flashcard_1"
          ],
          "relatedTasks": [
            "task_default_props_prop_types_component",
            "task_migrate_prop_types_to_ts_discussion"
          ],
          "tags": [
            "React",
            "defaultProps",
            "PropTypes",
            "Flow",
            "TypeScript",
            "type checking",
            "static analysis",
            "runtime analysis",
            "frontend development"
          ],
          "technology": "React, JavaScript, Flow, TypeScript",
          "prerequisites": [
            "react_basics",
            "javascript_es6_features"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "robust_component_design",
            "large_scale_app_development",
            "team_collaboration"
          ]
        },
        {
          "id": "theory_react_animations",
          "title": "Popular Animation Packages in React: React Transition Group and React Motion",
          "content": "Animations play a crucial role in enhancing user experience by providing visual feedback, guiding user attention, and making interfaces feel more dynamic and engaging. In React, while you can certainly use plain CSS for animations, several libraries simplify the process and provide more powerful control over animation states and transitions.\n\nTwo popular choices for animations in React applications are `React Transition Group` and `React Motion`.\n\n### React Transition Group\n`React Transition Group` is not an animation library in itself, but rather a set of components that expose the stages of an element's entering and exiting the DOM. It helps manage the mounting and unmounting of components, allowing you to apply CSS transitions or animations at specific points in a component's lifecycle. It works by applying specific CSS classes to components at different stages of their transition, which you then define in your CSS stylesheet.\n\n**Key Components:**\n*   `Transition`: The base component that exposes the lifecycle of a component.\n*   `CSSTransition`: A helper component that applies a pair of CSS classes to children during their 'enter' and 'exit' states.\n*   `SwitchTransition`: Allows you to transition between two components. It waits for the outgoing component to exit before the incoming component enters.\n*   `TransitionGroup`: Manages a set of `Transition` components (typically `CSSTransition`s) in a list, making it easy to animate items entering or leaving a list.\n\n### React Motion\n`React Motion` is a more declarative, physics-based animation library. Instead of dealing with durations and easing curves, you define the 'stiffness' and 'damping' of a spring. The library then interpolates the values, creating natural, fluid animations. This approach can be very intuitive for complex, dynamic animations where you want to react to user input or data changes in a more organic way.\n\nWhile `React Motion` offers a unique approach to animations, `React Transition Group` remains a very common and effective choice for managing simple enter/exit transitions, especially when integrated with existing CSS animation frameworks.",
          "examples": [
            {
              "id": "example_react_transition_group_csstransition",
              "title": "React Transition Group CSSTransition Example",
              "code": "import React, { useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport './App.css'; // Assume this file contains the necessary CSS\n\n/* App.css content for this example:\n.my-node-enter {\n  opacity: 0;\n  transform: translateX(-100px);\n}\n\n.my-node-enter-active {\n  opacity: 1;\n  transform: translateX(0);\n  transition: opacity 200ms ease-in, transform 200ms ease-in;\n}\n\n.my-node-exit {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.my-node-exit-active {\n  opacity: 0;\n  transform: translateX(100px);\n  transition: opacity 200ms ease-out, transform 200ms ease-out;\n}\n*/\n\nfunction App() {\n  const [inProp, setInProp] = useState(false);\n  \n  return (\n    <div style={{ padding: '20px' }}>\n      <button onClick={() => setInProp(!inProp)}>\n        Toggle Message\n      </button>\n      <CSSTransition \n        in={inProp} \n        timeout={200} \n        classNames=\"my-node\"\n        unmountOnExit\n      >\n        <div style={{ marginTop: '20px', fontSize: '20px', fontWeight: 'bold' }}>\n          {\"I'll fade and slide in and out\"}\n        </div>\n      </CSSTransition>\n    </div>\n  );\n}\n\nexport default App;\n",
              "explanation": "This example demonstrates `CSSTransition` from `React Transition Group`. The `in` prop controls whether the component is 'entered' or 'exited'. `timeout` defines the duration of the transition, which should match the CSS transition duration. `classNames` specifies the base name for the CSS classes (`my-node-enter`, `my-node-enter-active`, `my-node-exit`, `my-node-exit-active`). When `inProp` changes, `CSSTransition` applies the appropriate classes, allowing CSS to handle the actual animation. `unmountOnExit` ensures the component is removed from the DOM after it finishes exiting.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_react_animations_mcq_1",
            "question_react_animations_open_1",
            "question_react_animations_flashcard_1",
            "question_react_animations_code_1"
          ],
          "relatedTasks": [
            "task_csstransition_toggle_animation",
            "task_list_item_animations"
          ],
          "tags": [
            "React",
            "animations",
            "React Transition Group",
            "CSSTransition",
            "React Motion",
            "UI/UX",
            "frontend development"
          ],
          "technology": "React, JavaScript, CSS",
          "prerequisites": [
            "react_component_lifecycle",
            "css_transitions_animations"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "interactive_uis",
            "performance_optimization",
            "user_experience"
          ]
        },
        {
          "id": "theory_error_boundaries",
          "title": "Error Boundaries in React",
          "content": "Error boundaries are React components that catch JavaScript errors anywhere in their child component tree, log those errors, and display a fallback UI instead of crashing the entire component tree. They were introduced in React 16 to prevent uncaught JavaScript errors from corrupting the entire UI and to provide a graceful degradation experience to the user.\n\n### How Error Boundaries Work\nAn error boundary is a class component that implements at least one of two specific lifecycle methods:\n\n1.  **`static getDerivedStateFromError(error)`**: This static method is called after an error has been thrown by a descendant component. It receives the error that was thrown as an argument. Its purpose is to update state so the next render will show a fallback UI. It should return an object to update the state.\n2.  **`componentDidCatch(error, errorInfo)`**: This method is called after an error has been thrown by a descendant component. It receives two arguments: `error` (the error that was thrown) and `errorInfo` (an object with a `componentStack` key containing information about which component threw the error). This method is typically used for side effects, such as logging the error information to an error reporting service.\n\nIf a class component defines either of these methods, it becomes an error boundary. You can then wrap problematic parts of your UI with this error boundary component. If an error occurs within the wrapped component tree, the error boundary will catch it, update its state via `getDerivedStateFromError`, and render its `fallback` UI defined in its `render` method.\n\n### Limitations of Error Boundaries\nError boundaries **do not** catch errors in:\n*   Event handlers (e.g., `onClick`, `onChange`). These errors occur outside of the `render` phase and typically need to be handled with `try-catch` blocks within the event handler itself.\n*   Asynchronous code (e.g., `setTimeout` or `requestAnimationFrame` callbacks).\n*   Server-side rendering.\n*   Errors thrown in the error boundary itself (if an error boundary's `render` method or `getDerivedStateFromError` throws an error, React will unmount the whole component tree).\n\nIt is good practice to place error boundaries around logical units of your application rather than wrapping the entire application. This way, if one part of the UI crashes, the rest of the application can remain functional.",
          "examples": [
            {
              "id": "example_error_boundary_class_implementation",
              "title": "Error Boundary Class Component Implementation and Usage",
              "code": "import React from 'react';\n\n// --- Error Boundary Component ---\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.error('Error caught by boundary:', error, errorInfo);\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n    // logErrorToMyService(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <div style={{ border: '2px solid red', padding: '20px', margin: '20px', backgroundColor: '#ffe6e6' }}>\n          <h1>Oops! Something went wrong.</h1>\n          <details style={{ whiteSpace: 'pre-wrap' }}>\n            {this.state.error && this.state.error.toString()}\n            <br />\n            {this.state.errorInfo && this.state.errorInfo.componentStack}\n          </details>\n          <p>Please try reloading the page or contact support.</p>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// --- Component That Might Error ---\nfunction MyComponentThatMightError({ shouldError }) {\n  if (shouldError) {\n    throw new Error('I crashed! This is a simulated error.');\n  }\n  return <h2>This component works perfectly!</h2>;\n}\n\n// --- Usage in Parent Component ---\nfunction App() {\n  const [triggerError, setTriggerError] = React.useState(false);\n\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif' }}>\n      <h1>My Application</h1>\n      <button onClick={() => setTriggerError(true)} style={{ marginBottom: '20px' }}>\n        Trigger Error in Child Component\n      </button>\n      \n      <ErrorBoundary>\n        <MyComponentThatMightError shouldError={triggerError} />\n      </ErrorBoundary>\n\n      <p>This part of the application is still working.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
              "explanation": "This example shows a complete implementation of an `ErrorBoundary` component. It uses `static getDerivedStateFromError` to update the state `hasError` to `true` when an error occurs, triggering a re-render to display the fallback UI. `componentDidCatch` is used for logging the error and its info. The `MyComponentThatMightError` component conditionally throws an error. When `MyComponentThatMightError` is wrapped by `ErrorBoundary` and `shouldError` is true, the error is caught, and the `ErrorBoundary`'s fallback UI is rendered, preventing the entire `App` from crashing.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_error_boundary_mcq_1",
            "question_error_boundary_open_1",
            "question_error_boundary_flashcard_1",
            "question_error_boundary_code_1"
          ],
          "relatedTasks": [
            "task_implement_generic_error_boundary",
            "task_test_error_boundary_with_nested_component"
          ],
          "tags": [
            "React",
            "error handling",
            "error boundaries",
            "class components",
            "lifecycle methods",
            "getDerivedStateFromError",
            "componentDidCatch",
            "frontend development",
            "robustness"
          ],
          "technology": "React, JavaScript",
          "prerequisites": [
            "react_class_components",
            "react_lifecycle",
            "state_management"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "production_grade_applications",
            "fault_tolerant_uis",
            "advanced_react_patterns"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_default_props_1",
          "topic": "React Default Props",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of `defaultProps` in a React component?",
          "answer": "To define default values for props that are not explicitly passed to a component, ensuring they are always available and preventing undefined errors.",
          "options": [],
          "analysisPoints": [
            "Understanding of `defaultProps` basic utility.",
            "Knowing when `defaultProps` are applied."
          ],
          "keyConcepts": [
            "defaultProps",
            "props",
            "React component"
          ],
          "evaluationCriteria": [
            "Direct recall",
            "Correct definition"
          ],
          "example": "",
          "tags": [
            "React",
            "defaultProps",
            "props"
          ],
          "prerequisites": [
            "react_props"
          ],
          "complexity": 2,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_default_props_2",
          "topic": "React Default Props",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following React component and its `defaultProps`:\n\n```jsx\nfunction MyButton({ label, onClick, theme }) {\n  return (\n    <button onClick={onClick} className={theme}>\n      {label}\n    </button>\n  );\n}\n\nMyButton.defaultProps = {\n  label: 'Click Me',\n  onClick: () => console.log('Button clicked!'),\n  theme: 'primary'\n};\n\n// In your App component:\n<MyButton />\n<MyButton label=\"Submit\" />\n<MyButton theme=\"secondary\" />\n```\nWhat will be the `label`, `onClick`, and `theme` props for the component rendered as `<MyButton label=\"Submit\" />`?",
          "answer": "`label`: 'Submit', `onClick`: default function, `theme`: 'primary'",
          "options": [
            "`label`: 'Click Me', `onClick`: default function, `theme`: 'primary'",
            "`label`: 'Submit', `onClick`: default function, `theme`: 'primary'",
            "`label`: 'Submit', `onClick`: undefined, `theme`: 'secondary'",
            "`label`: 'Submit', `onClick`: default function, `theme`: undefined"
          ],
          "analysisPoints": [
            "Understanding that defaultProps are used only when a prop is not explicitly provided.",
            "Ability to trace prop values through defaultProps and explicit assignments."
          ],
          "keyConcepts": [
            "defaultProps",
            "props",
            "component composition"
          ],
          "evaluationCriteria": [
            "Accurate application of `defaultProps` logic.",
            "Correct identification of prop resolution order."
          ],
          "example": "The component `<MyButton label=\"Submit\" />` explicitly provides the `label` prop, so its value will be 'Submit', overriding the default. However, `onClick` and `theme` are not provided, so they will fall back to their `defaultProps` values: the default `onClick` function and `theme: 'primary'`.",
          "tags": [
            "React",
            "defaultProps",
            "props"
          ],
          "prerequisites": [
            "react_props"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_prop_types_flow_mcq_1",
          "topic": "PropTypes vs. Flow/TypeScript",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following statements accurately describes a key difference between `PropTypes` and `Flow` (or TypeScript) for type checking in React applications?",
          "answer": "`PropTypes` performs runtime type checking, whereas Flow/TypeScript perform static (compile-time) type checking.",
          "options": [
            "`PropTypes` offers superior IDE integration compared to Flow/TypeScript.",
            "`PropTypes` has a steeper learning curve than Flow/TypeScript.",
            "`PropTypes` performs runtime type checking, whereas Flow/TypeScript perform static (compile-time) type checking.",
            "Flow/TypeScript introduce a significant runtime performance cost, unlike `PropTypes`."
          ],
          "analysisPoints": [
            "Distinguishing between runtime and static type checking.",
            "Understanding the performance implications of each approach.",
            "Recognizing differences in IDE support and learning curve."
          ],
          "keyConcepts": [
            "PropTypes",
            "Flow",
            "TypeScript",
            "runtime type checking",
            "static type checking",
            "performance",
            "IDE integration"
          ],
          "evaluationCriteria": [
            "Correctly identifies the core difference in checking time.",
            "Avoids common misconceptions about performance and tooling."
          ],
          "example": "The main distinction lies in *when* the type checks occur. `PropTypes` validates props when the component renders at runtime, leading to console warnings. Flow and TypeScript, being static analyzers, check types during development or build time, catching errors before the code even runs. Static type checkers typically have no runtime performance impact once compiled to plain JavaScript, and offer much richer IDE support.",
          "tags": [
            "React",
            "PropTypes",
            "Flow",
            "TypeScript",
            "type checking"
          ],
          "prerequisites": [
            "javascript_types"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_prop_types_flow_open_1",
          "topic": "PropTypes vs. Flow/TypeScript",
          "level": "hard",
          "type": "open",
          "question": "You are starting a new large-scale React project with a team of 10 developers. Given the choice between using `PropTypes` and TypeScript for type checking, which would you choose and why? Discuss the trade-offs involved.",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Ability to articulate the pros and cons of both `PropTypes` and TypeScript.",
            "Consideration of team size and collaboration in decision-making.",
            "Understanding of long-term maintainability and scalability benefits.",
            "Discussion of setup overhead vs. benefits."
          ],
          "keyConcepts": [
            "PropTypes",
            "TypeScript",
            "static type checking",
            "runtime type checking",
            "scalability",
            "maintainability",
            "developer experience",
            "tooling"
          ],
          "evaluationCriteria": [
            "Comprehensive comparison of trade-offs.",
            "Clear justification for the chosen technology.",
            "Demonstrates understanding of real-world project considerations."
          ],
          "example": "For a large-scale project with a team of 10 developers, I would strongly choose TypeScript over `PropTypes`. \n\n**Arguments for TypeScript:**\n*   **Static Error Detection:** TypeScript catches errors *before* runtime, significantly reducing bugs in production and speeding up development by providing immediate feedback. With a large team, this prevents many integration issues.\n*   **Improved Developer Experience & Productivity:** Strong IDE support (autocompletion, refactoring, navigate-to-definition) makes coding faster and safer. Developers can confidently refactor and understand complex codebases.\n*   **Better Code Maintainability & Readability:** Types serve as living documentation, making it easier for new team members to understand the codebase and for existing members to remember complex interfaces.\n*   **Scalability:** As the project grows, managing prop types with `PropTypes` becomes cumbersome, especially with deeply nested objects or complex data structures. TypeScript handles this elegantly.\n*   **Wider Adoption & Ecosystem:** TypeScript has a vast and active community, extensive learning resources, and excellent support from popular libraries and frameworks.\n\n**Trade-offs/Considerations for TypeScript:**\n*   **Steeper Learning Curve:** Developers new to TypeScript will need time to learn the type system.\n*   **Initial Setup & Configuration:** Setting up TypeScript with a React project involves configuring `tsconfig.json` and potentially build tools, which adds initial overhead.\n*   **Compilation Step:** TypeScript requires a compilation step, which can slightly increase build times, though modern build tools make this largely imperceptible for incremental builds.\n\n**Arguments against PropTypes (for this scenario):**\n*   **Runtime Only:** Errors are caught only when components render, leading to potential production bugs that are harder to debug.\n*   **Limited Tooling:** Less powerful IDE support compared to TypeScript.\n*   **Verbosity for Complex Types:** Defining complex shapes can be verbose and error-prone.\n\n**Conclusion:** While `PropTypes` is simpler to set up initially, the long-term benefits of TypeScript in terms of error prevention, developer productivity, code maintainability, and scalability for a large team and large project far outweigh the initial learning curve and setup overhead.",
          "tags": [
            "React",
            "TypeScript",
            "PropTypes",
            "project management",
            "architecture",
            "scalability"
          ],
          "prerequisites": [
            "react_fundamentals",
            "type_systems"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_prop_types_flow_flashcard_1",
          "topic": "PropTypes vs. Flow/TypeScript",
          "level": "easy",
          "type": "flashcard",
          "question": "Name two key advantages of using static type checkers like Flow or TypeScript over runtime type checkers like PropTypes.",
          "answer": "1. Error detection before runtime (at compile time/during development).\n2. Stronger IDE integration (autocompletion, refactoring support).",
          "options": [],
          "analysisPoints": [
            "Recall of basic comparative advantages.",
            "Understanding the practical benefits of static typing."
          ],
          "keyConcepts": [
            "static type checking",
            "runtime type checking",
            "IDE integration",
            "error detection"
          ],
          "evaluationCriteria": [
            "Direct recall",
            "Correct identification of benefits"
          ],
          "example": "",
          "tags": [
            "React",
            "PropTypes",
            "Flow",
            "TypeScript"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_https_cra_1",
          "topic": "Create React App HTTPS",
          "level": "easy",
          "type": "flashcard",
          "question": "How can you enable HTTPS for a Create React App development server?",
          "answer": "By setting the `HTTPS=true` environment variable before starting the development server (e.g., `HTTPS=true npm start` or `set HTTPS=true && npm start` on Windows).",
          "options": [],
          "analysisPoints": [
            "Knowledge of CRA environment variables.",
            "Understanding basic command-line usage for development."
          ],
          "keyConcepts": [
            "Create React App",
            "HTTPS",
            "environment variables",
            "development server"
          ],
          "evaluationCriteria": [
            "Direct recall",
            "Correct command"
          ],
          "example": "",
          "tags": [
            "React",
            "CRA",
            "HTTPS",
            "development"
          ],
          "prerequisites": [
            "node_npm_basics"
          ],
          "complexity": 2,
          "interviewFrequency": 5,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_animations_mcq_1",
          "topic": "React Animation Libraries",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following statements is true regarding `React Transition Group`?",
          "answer": "It helps manage the mounting and unmounting of components, allowing you to apply CSS transitions or animations.",
          "options": [
            "It is primarily a physics-based animation library that interpolates values based on stiffness and damping.",
            "It directly handles all CSS animation properties without needing external CSS.",
            "It helps manage the mounting and unmounting of components, allowing you to apply CSS transitions or animations.",
            "It is designed to animate only individual React elements, not groups or lists."
          ],
          "analysisPoints": [
            "Understanding the core function of `React Transition Group`.",
            "Differentiating it from physics-based libraries like `React Motion`.",
            "Knowing its reliance on external CSS."
          ],
          "keyConcepts": [
            "React Transition Group",
            "CSS animations",
            "component lifecycle",
            "mounting/unmounting"
          ],
          "evaluationCriteria": [
            "Correctly identifies the purpose and mechanism.",
            "Avoids confusion with other animation paradigms."
          ],
          "example": "React Transition Group provides components like `CSSTransition` that apply specific CSS classes (e.g., `my-node-enter`, `my-node-enter-active`) at different stages of a component's lifecycle (entering or exiting the DOM). You then define the actual animation rules in your CSS file using these classes. It doesn't handle the physics of animation itself.",
          "tags": [
            "React",
            "animations",
            "React Transition Group",
            "CSSTransition"
          ],
          "prerequisites": [
            "css_transitions_animations"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_animations_open_1",
          "topic": "React Animation Libraries",
          "level": "hard",
          "type": "open",
          "question": "You need to implement an animation where an element smoothly expands from a small circle to a large square, and then shrinks back to a circle, responding to user clicks. Which animation library, `React Transition Group` or `React Motion`, would be more suitable for this specific scenario and why?",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Understanding the strengths of `React Transition Group` (enter/exit, CSS-driven).",
            "Understanding the strengths of `React Motion` (physics-based, complex interpolations).",
            "Ability to choose the right tool for a specific animation complexity.",
            "Justification based on the nature of the animation (smooth, dynamic shape change)."
          ],
          "keyConcepts": [
            "React Transition Group",
            "React Motion",
            "animations",
            "physics-based animation",
            "CSS transitions",
            "dynamic styling"
          ],
          "evaluationCriteria": [
            "Correct library choice with strong justification.",
            "Demonstrates understanding of when each library shines."
          ],
          "example": "For an animation that involves smoothly expanding a circle into a square and then shrinking it back, responding to user clicks, `React Motion` would be more suitable than `React Transition Group`.\n\n**Why React Motion:**\n*   **Physics-Based:** `React Motion` excels at creating natural, fluid, and interruptible animations by interpolating values based on spring physics (stiffness and damping). This is perfect for dynamic transformations where you want a smooth, organic feel rather than fixed durations and easing curves.\n*   **Complex Property Interpolation:** Changing an element from a circle to a square involves animating multiple CSS properties simultaneously (e.g., `border-radius`, `width`, `height`, `background-color`). `React Motion` allows you to define the target values for these properties, and it handles the smooth interpolation between them. You can easily map state changes to a 'spring' and let the library handle the intermediate values.\n*   **Declarative for Dynamic Styles:** While `React Transition Group` manages mounting/unmounting and applies CSS classes at specific points, controlling a continuous, multi-property transformation like this with just CSS classes can become cumbersome and rigid. `React Motion` allows you to declare the 'end state' of your styles, and it calculates the 'in-between' states, making it more declarative for complex, state-driven visual changes.\n\n**Why React Transition Group is less suitable:**\n*   `React Transition Group` is excellent for managing *enter* and *exit* animations, typically by applying CSS classes to trigger predefined CSS transitions/animations. It's more about orchestrating the presence of components in the DOM and triggering static, pre-defined animations.\n*   While you could potentially define CSS classes for each stage of the circle-to-square transformation, managing the smooth, continuous, and potentially interruptible nature of the animation purely with CSS classes and `React Transition Group` would be significantly more complex and less flexible than using `React Motion`'s physics engine.",
          "tags": [
            "React",
            "animations",
            "React Motion",
            "React Transition Group",
            "UI/UX",
            "design patterns"
          ],
          "prerequisites": [
            "react_state_management",
            "css_animations"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_animations_flashcard_1",
          "topic": "React Animation Libraries",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary difference in approach between `React Transition Group` and `React Motion`?",
          "answer": "`React Transition Group` helps manage component mounting/unmounting to apply CSS transitions/animations, while `React Motion` uses a physics-based approach for smooth, fluid animations.",
          "options": [],
          "analysisPoints": [
            "Identifying the core mechanism of each library.",
            "Understanding their respective use cases."
          ],
          "keyConcepts": [
            "React Transition Group",
            "React Motion",
            "CSS animations",
            "physics-based animation"
          ],
          "evaluationCriteria": [
            "Direct recall",
            "Accurate differentiation"
          ],
          "example": "",
          "tags": [
            "React",
            "animations",
            "React Transition Group",
            "React Motion"
          ],
          "prerequisites": [],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_animations_code_1",
          "topic": "React Animation Libraries",
          "level": "medium",
          "type": "code",
          "question": "Implement a simple React component that uses `CSSTransition` to fade in and out a text message when a button is clicked. You need to provide the React component and the necessary CSS.",
          "answer": "```jsx\nimport React, { useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport './FadeMessage.css'; // Assuming this file exists\n\nfunction FadeMessage() {\n  const [isVisible, setIsVisible] = useState(false);\n\n  return (\n    <div>\n      <button onClick={() => setIsVisible(!isVisible)}>\n        Toggle Message\n      </button>\n      <CSSTransition\n        in={isVisible}\n        timeout={300} // Matches CSS transition duration\n        classNames=\"fade-message\"\n        unmountOnExit\n        appear\n      >\n        <p className=\"message-text\">Hello, React Animations!</p>\n      </CSSTransition>\n    </div>\n  );\n}\n\nexport default FadeMessage;\n\n```\n\n```css\n/* FadeMessage.css */\n.fade-message-enter {\n  opacity: 0;\n}\n\n.fade-message-enter-active {\n  opacity: 1;\n  transition: opacity 300ms ease-in;\n}\n\n.fade-message-exit {\n  opacity: 1;\n}\n\n.fade-message-exit-active {\n  opacity: 0;\n  transition: opacity 300ms ease-out;\n}\n\n.fade-message-appear {\n  opacity: 0;\n}\n\n.fade-message-appear-active {\n  opacity: 1;\n  transition: opacity 300ms ease-in;\n}\n```",
          "options": [],
          "analysisPoints": [
            "Correct usage of `useState` for toggling state.",
            "Proper integration of `CSSTransition` component.",
            "Understanding `in`, `timeout`, and `classNames` props.",
            "Correct definition of CSS classes for enter/exit transitions (e.g., `-enter`, `-enter-active`, `-exit`, `-exit-active`).",
            "Matching `timeout` with CSS transition duration.",
            "Optional: Use of `unmountOnExit` for performance/DOM cleanup.",
            "Optional: Use of `appear` for initial mount animation."
          ],
          "keyConcepts": [
            "React Transition Group",
            "CSSTransition",
            "useState",
            "CSS transitions",
            "component lifecycle"
          ],
          "evaluationCriteria": [
            "Functional animation implementation.",
            "Correct `CSSTransition` prop usage.",
            "Accurate CSS class definitions.",
            "Clean and readable code."
          ],
          "example": "",
          "tags": [
            "React",
            "animations",
            "CSSTransition",
            "coding challenge",
            "CSS"
          ],
          "prerequisites": [
            "react_hooks",
            "css_fundamentals"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_error_boundary_mcq_1",
          "topic": "React Error Boundaries",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following methods are essential for a React class component to function as an Error Boundary?",
          "answer": "Both `static getDerivedStateFromError(error)` and `componentDidCatch(error, errorInfo)` (at least one is required, but typically both are used).",
          "options": [
            "`componentDidMount()` and `componentWillUnmount()`",
            "`render()` and `setState()`",
            "`static getDerivedStateFromError(error)` only.",
            "Both `static getDerivedStateFromError(error)` and `componentDidCatch(error, errorInfo)` (at least one is required, but typically both are used)."
          ],
          "analysisPoints": [
            "Identifying the specific lifecycle methods for error boundaries.",
            "Understanding that `render` is for UI and `setState` is for state management, not error boundary definition.",
            "Knowing that at least one of the two dedicated methods is required."
          ],
          "keyConcepts": [
            "Error Boundary",
            "lifecycle methods",
            "getDerivedStateFromError",
            "componentDidCatch"
          ],
          "evaluationCriteria": [
            "Correct identification of error boundary methods.",
            "Distinguishing error boundary methods from general lifecycle methods."
          ],
          "example": "To be an error boundary, a class component needs to implement either `static getDerivedStateFromError(error)` to update its state (for fallback UI) or `componentDidCatch(error, errorInfo)` for side effects like logging, or both. While `render` is part of any component, it's not what *makes* it an error boundary.",
          "tags": [
            "React",
            "error boundaries",
            "lifecycle methods",
            "class components"
          ],
          "prerequisites": [
            "react_class_components",
            "react_lifecycle"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_error_boundary_open_1",
          "topic": "React Error Boundaries",
          "level": "hard",
          "type": "open",
          "question": "Explain the difference in purpose and usage between `static getDerivedStateFromError(error)` and `componentDidCatch(error, errorInfo)` within a React Error Boundary. Also, list two types of errors that React Error Boundaries do *not* catch.",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Clear distinction between the two lifecycle methods' roles.",
            "Understanding `getDerivedStateFromError` for state updates (fallback UI).",
            "Understanding `componentDidCatch` for side effects (logging).",
            "Recalling common limitations of error boundaries (event handlers, async code, SSR, self-errors)."
          ],
          "keyConcepts": [
            "Error Boundary",
            "getDerivedStateFromError",
            "componentDidCatch",
            "lifecycle methods",
            "error handling",
            "limitations"
          ],
          "evaluationCriteria": [
            "Accurate and comprehensive explanation of method purposes.",
            "Correct identification of error boundary limitations.",
            "Structured and clear answer."
          ],
          "example": "**`static getDerivedStateFromError(error)`:**\n*   **Purpose:** This is a static method used for updating the error boundary's state. When an error is thrown in a child component, this method is called, allowing the error boundary to update its state (e.g., `hasError: true`). This state change then triggers a re-render of the error boundary, displaying the fallback UI instead of the crashed child content.\n*   **Usage:** It must return an object to update the state, or `null` to indicate no state update. It's strictly for updating state derived from the error; no side effects should be performed here.\n\n**`componentDidCatch(error, errorInfo)`:**\n*   **Purpose:** This instance method is called after an error has been thrown by a descendant component. It's primarily used for performing side effects, such as logging the error to an external error tracking service (e.g., Sentry, Bugsnag) or a custom analytics system.\n*   **Usage:** It receives the error and an `errorInfo` object (which includes the component stack trace). You can perform any actions here that don't involve state updates that would trigger a re-render (since `getDerivedStateFromError` handles that).\n\n**Key Difference:** `getDerivedStateFromError` is for rendering a fallback UI by updating state, while `componentDidCatch` is for side effects like logging.\n\n**Two types of errors React Error Boundaries do NOT catch:**\n1.  **Errors inside event handlers:** Errors thrown inside `onClick`, `onChange`, etc., are not caught by error boundaries. These errors happen outside the render phase and require traditional `try-catch` blocks within the event handler itself.\n2.  **Asynchronous code:** Errors occurring in `setTimeout` callbacks, `requestAnimationFrame` callbacks, or `Promise.then()` callbacks (unless the Promise is explicitly rejected and caught by a `catch` block that re-throws) are not caught.\n\nOther types not caught include errors during server-side rendering and errors thrown within the error boundary component itself.",
          "tags": [
            "React",
            "error boundaries",
            "lifecycle methods",
            "error handling",
            "limitations"
          ],
          "prerequisites": [
            "react_lifecycle",
            "javascript_error_handling"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_error_boundary_flashcard_1",
          "topic": "React Error Boundaries",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the main benefit of using a React Error Boundary?",
          "answer": "To prevent a single JavaScript error in a component tree from crashing the entire application and to display a fallback UI.",
          "options": [],
          "analysisPoints": [
            "Understanding the core problem error boundaries solve.",
            "Identifying the user experience improvement."
          ],
          "keyConcepts": [
            "Error Boundary",
            "error handling",
            "fallback UI"
          ],
          "evaluationCriteria": [
            "Direct recall",
            "Correctly states primary benefit"
          ],
          "example": "",
          "tags": [
            "React",
            "error boundaries",
            "error handling"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_error_boundary_code_1",
          "topic": "React Error Boundaries",
          "level": "medium",
          "type": "code",
          "question": "Given the `MyComponentThatMightError` component below, wrap it with an `ErrorBoundary` component (which you should also implement) such that if `MyComponentThatMightError` throws an error, a message 'Component failed to load.' is displayed instead. Assume a basic React setup.\n\n```jsx\nfunction MyComponentThatMightError({ shouldThrow }) {\n  if (shouldThrow) {\n    throw new Error('Simulated crash!');\n  }\n  return <div>Successfully loaded content.</div>;\n}\n\n// Your task is to implement ErrorBoundary and use it like this:\n// function App() {\n//   return (\n//     <ErrorBoundary>\n//       <MyComponentThatMightError shouldThrow={true} />\n//     </ErrorBoundary>\n//   );\n// }\n```",
          "answer": "```jsx\nimport React from 'react';\n\n// Component that might throw an error\nfunction MyComponentThatMightError({ shouldThrow }) {\n  if (shouldThrow) {\n    throw new Error('Simulated crash!');\n  }\n  return <div>Successfully loaded content.</div>;\n}\n\n// Error Boundary Component implementation\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.error('Error caught by ErrorBoundary:', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Render any custom fallback UI\n      return <h1>Component failed to load.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\n// Usage in App component\nfunction App() {\n  return (\n    <div>\n      <h2>Application Header</h2>\n      <ErrorBoundary>\n        <MyComponentThatMightError shouldThrow={true} />\n      </ErrorBoundary>\n      <p>This part of the app is still working.</p>\n    </div>\n  );\n}\n\nexport default App;\n```",
          "options": [],
          "analysisPoints": [
            "Correctly defines `ErrorBoundary` as a class component.",
            "Implements `static getDerivedStateFromError` to update `hasError` state.",
            "Implements `componentDidCatch` for logging purposes (optional but good practice).",
            "Uses the `hasError` state in the `render` method to conditionally display the fallback UI.",
            "Wraps the potentially error-prone component with the `ErrorBoundary`.",
            "Ensures the `props.children` is rendered when no error occurs."
          ],
          "keyConcepts": [
            "Error Boundary",
            "class components",
            "lifecycle methods",
            "getDerivedStateFromError",
            "componentDidCatch",
            "error handling"
          ],
          "evaluationCriteria": [
            "Functional error boundary implementation.",
            "Correct use of required lifecycle methods.",
            "Appropriate fallback UI rendering.",
            "Clean and executable code."
          ],
          "example": "",
          "tags": [
            "React",
            "error boundaries",
            "coding challenge",
            "class components"
          ],
          "prerequisites": [
            "react_class_components",
            "react_lifecycle"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_default_props_prop_types_component",
          "title": "Build a `Card` Component with Default Props and PropTypes",
          "description": "\nCreate a `Card` React functional component that accepts the following props:\n\n1.  `title`: string (required)\n2.  `content`: string (required)\n3.  `imageUrl`: string (optional, default: 'https://via.placeholder.com/150')\n4.  `theme`: string (optional, default: 'light') - can be 'light' or 'dark'\n5.  `onClick`: function (optional, default: an empty function `() => {}`)\n\n**Requirements:**\n*   Use `defaultProps` to set default values for optional props.\n*   Use `PropTypes` to validate all props, ensuring `title` and `content` are required strings, `imageUrl` and `theme` are strings, and `onClick` is a function.\n*   The component should render the `title`, `content`, an `img` tag for `imageUrl`, and apply the `theme` as a CSS class to the main card div.\n*   Add a simple click handler to the card that calls the `onClick` prop.\n",
          "difficulty": "medium",
          "startingCode": "import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Card(props) {\n  // Destructure props here, ensuring defaults are applied if not provided.\n  const { title, content, imageUrl, theme, onClick } = props;\n\n  return (\n    <div className={`card ${theme}`} onClick={onClick} style={{ border: '1px solid #ccc', padding: '15px', margin: '10px', borderRadius: '8px', cursor: 'pointer', maxWidth: '300px' }}>\n      {/* TODO: Render image if imageUrl is provided/defaulted */}\n      {/* TODO: Render title */}\n      {/* TODO: Render content */}\n    </div>\n  );\n}\n\n// TODO: Add defaultProps here\n// TODO: Add propTypes here\n\nexport default Card;\n\n// --- Usage Example (for testing) ---\n/*\nfunction App() {\n  return (\n    <div>\n      <Card title=\"Default Card\" content=\"This is a card with all default optional props.\" />\n      <Card \n        title=\"Dark Card\"\n        content=\"This card has a dark theme.\"\n        theme=\"dark\"\n        onClick={() => alert('Dark card clicked!')}\n      />\n      <Card \n        title=\"Image Card\"\n        content=\"This card features a custom image.\"\n        imageUrl=\"https://via.placeholder.com/200/0000FF/FFFFFF?text=CustomImage\"\n      />\n    </div>\n  );\n}\n*/",
          "solutionCode": "import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Card(props) {\n  const { title, content, imageUrl, theme, onClick } = props;\n\n  const cardStyle = {\n    border: theme === 'dark' ? '1px solid #555' : '1px solid #ccc',\n    backgroundColor: theme === 'dark' ? '#333' : '#fff',\n    color: theme === 'dark' ? '#eee' : '#333',\n    padding: '15px',\n    margin: '10px',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    maxWidth: '300px',\n    boxShadow: '2px 2px 5px rgba(0,0,0,0.2)'\n  };\n\n  const imageStyle = {\n    width: '100%',\n    height: '150px',\n    objectFit: 'cover',\n    borderRadius: '4px',\n    marginBottom: '10px'\n  };\n\n  const titleStyle = {\n    fontSize: '1.5em',\n    marginBottom: '8px'\n  };\n\n  const contentStyle = {\n    fontSize: '0.9em',\n    lineHeight: '1.5'\n  };\n\n  return (\n    <div className={`card ${theme}`} onClick={onClick} style={cardStyle}>\n      {imageUrl && <img src={imageUrl} alt={title} style={imageStyle} />}\n      <h3 style={titleStyle}>{title}</h3>\n      <p style={contentStyle}>{content}</p>\n    </div>\n  );\n}\n\nCard.defaultProps = {\n  imageUrl: 'https://via.placeholder.com/150',\n  theme: 'light',\n  onClick: () => {}\n};\n\nCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  content: PropTypes.string.isRequired,\n  imageUrl: PropTypes.string,\n  theme: PropTypes.oneOf(['light', 'dark']),\n  onClick: PropTypes.func\n};\n\nexport default Card;\n\n// --- Usage Example (for testing) ---\n/*\n// In App.js or a similar file:\nimport React from 'react';\nimport Card from './Card'; // Adjust path as needed\n\nfunction App() {\n  return (\n    <div style={{ display: 'flex', flexWrap: 'wrap', justifyContent: 'center' }}>\n      <Card title=\"Default Card\" content=\"This is a card with all default optional props.\" />\n      <Card \n        title=\"Dark Themed Card\"\n        content=\"This card demonstrates the dark theme, and has a custom click handler.\"\n        theme=\"dark\"\n        onClick={() => alert('Dark card was clicked!')}\n      />\n      <Card \n        title=\"Custom Image Card\"\n        content=\"This card uses a specific image URL for its visual.\"\n        imageUrl=\"https://via.placeholder.com/200/FF5733/FFFFFF?text=CustomImg\"\n        onClick={() => console.log('Image card clicked.')}\n      />\n      <Card \n        title=\"Simple Card\"\n        content=\"Just title and content, all other props are default.\"\n      />\n      {/* Example of incorrect prop type (will cause console warning) *\\/\n      {/* <Card title=\"Invalid Prop Example\" content={123} /> *\\/ \n    </div>\n  );\n}\n\nexport default App;\n*/",
          "testCases": [
            "Render <Card title=\"Test\" content=\"Content\" />: Should display title, content, default image, light theme, and no console errors.",
            "Render <Card title=\"Dark\" content=\"Dark content\" theme=\"dark\" />: Should apply dark theme styles.",
            "Render <Card title=\"Image\" content=\"Image content\" imageUrl=\"https://via.placeholder.com/100\" />: Should display the specified image.",
            "Render <Card title=\"Clickable\" content=\"Click me\" onClick={() => alert('Clicked!')} />: Should execute the alert on click.",
            "Render <Card title=\"Invalid\" content={123} />: Should produce a PropTypes warning in the console for `content`."
          ],
          "hints": [
            "Remember that `defaultProps` apply if a prop is `undefined`, not just falsy.",
            "Use `PropTypes.oneOf` for the `theme` prop to restrict its values.",
            "Ensure `propTypes` is defined *after* the component definition, usually on the component function directly.",
            "For the `onClick` default, an empty arrow function `() => {}` is a common and safe practice."
          ],
          "tags": [
            "React",
            "defaultProps",
            "PropTypes",
            "component design",
            "frontend interview"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "react_functional_components",
            "prop_types_library"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "component_reusability",
            "prop_validation",
            "component_api"
          ]
        },
        {
          "id": "task_migrate_prop_types_to_ts_discussion",
          "title": "Architectural Discussion: Migrating from PropTypes to TypeScript",
          "description": "\nImagine you are working on a medium-sized React application that currently uses `PropTypes` extensively for prop validation. Your team has decided to migrate the entire codebase to TypeScript to improve maintainability, reduce runtime errors, and enhance developer experience.\n\n**Your task is to outline a detailed plan for this migration. Your plan should cover:**\n\n1.  **Preparation Steps:** What should be done before starting the actual code conversion?\n2.  **Migration Strategy:** A step-by-step approach for converting components (e.g., all at once, module by module, top-down, bottom-up).\n3.  **Key Code Changes:** How would `PropTypes` definitions be replaced with TypeScript interfaces/types?\n4.  **Handling Edge Cases/Challenges:** What potential issues might arise (e.g., third-party libraries, complex prop types, higher-order components) and how would you address them?\n5.  **Testing and Verification:** How would you ensure the migration is successful and doesn't introduce new bugs?\n6.  **Tooling and Linting:** What tools would you leverage?\n",
          "difficulty": "hard",
          "startingCode": "/*\nThis task is a theoretical design task, not a coding implementation. \nYour response should be a detailed markdown explanation in the solutionCode field.\n*/\n",
          "solutionCode": "## Detailed Plan for Migrating from PropTypes to TypeScript\n\n### 1. Preparation Steps\n\n*   **Educate the Team:** Provide training sessions on TypeScript fundamentals, common types, interfaces, and React-specific TypeScript patterns. Ensure everyone is comfortable with the new paradigm.\n*   **Create a `tsconfig.json`:** Set up the TypeScript configuration file. Start with a more permissive configuration (`noImplicitAny: false` initially) to get started, and then tighten it gradually. Essential options include `jsx: 'react-jsx'`, `esModuleInterop: true`, `strict: true` (eventually).\n*   **Install Dependencies:** Add `typescript`, `@types/react`, `@types/react-dom`, `@types/prop-types` (temporarily), and any other `@types` for third-party libraries used.\n*   **Update Build Tools:** Ensure your build system (Webpack, Rollup, Vite, Create React App) is configured to handle TypeScript files (e.g., use `ts-loader`, `@vitejs/plugin-react-ts`).\n*   **Linting Setup:** Configure ESLint with TypeScript support (`@typescript-eslint/parser`, `@typescript-eslint/eslint-plugin`). This helps enforce best practices and catches more errors early.\n*   **Version Control Branch:** Create a dedicated feature branch for the migration to isolate changes and allow for continuous integration.\n*   **Initial Type Audit:** Identify complex components, shared utility functions, and critical data structures that will require more attention during typing.\n\n### 2. Migration Strategy (Phased Approach)\n\nInstead of a 'big bang' migration, a phased approach is highly recommended for a medium-sized application.\n\n*   **Start with New Components/Features:** Any new code should be written directly in TypeScript from the start. This builds momentum and familiarizes the team.\n*   **Bottom-Up Component Conversion:** Begin with leaf components (components that don't render other components) and then move upwards to their parents. This ensures that when a parent component is converted, its children already have well-defined types, making the parent's conversion easier.\n*   **Module by Module:** Tackle specific feature modules or logical sections of the application one at a time. This keeps PRs manageable and reduces the scope of simultaneous changes.\n*   **Prioritize Critical Paths/Shared Utilities:** Convert core components, hooks, and utility functions first, as their correct typing will benefit many other parts of the application.\n*   **Gradual Type Strictness:** Start with `allowJs` and `noImplicitAny: false` to allow gradual typing. Once a section is converted, you can tighten the `tsconfig` rules for that area or for the entire project.\n*   **Remove PropTypes Gradually:** After a component is fully typed with TypeScript, its `PropTypes` definition can be removed. This ensures a period of overlap where both are present, providing a safety net.\n\n### 3. Key Code Changes\n\n*   **File Renaming:** Change `.js` / `.jsx` files to `.ts` / `.tsx`.\n*   **Replacing `PropTypes` with Interfaces/Types:**\n    *   Define `interface` or `type` for component props:\n        ```typescript\n        // Before PropTypes\n        // MyComponent.propTypes = {\n        //   name: PropTypes.string.isRequired,\n        //   age: PropTypes.number,\n        //   user: PropTypes.shape({\n        //     id: PropTypes.number,\n        //     email: PropTypes.string.isRequired\n        //   })\n        // };\n\n        // After TypeScript\n        interface User {\n          id?: number;\n          email: string;\n        }\n\n        interface MyComponentProps {\n          name: string;\n          age?: number; // Optional prop\n          user?: User;\n        }\n\n        const MyComponent: React.FC<MyComponentProps> = ({ name, age, user }) => { ... };\n        // Or for class components:\n        // class MyComponent extends React.Component<MyComponentProps> { ... }\n        ```\n    *   Use `?` for optional props.\n    *   Use `| undefined` for props that can be explicitly `undefined`.\n    *   For `defaultProps`, use destructuring with default values directly in the functional component signature:\n        ```typescript\n        interface MyButtonProps {\n          label?: string;\n          onClick?: () => void;\n        }\n\n        const MyButton: React.FC<MyButtonProps> = ({ \n          label = 'Default Button', \n          onClick = () => {} \n        }) => { ... };\n        ```\n*   **Typing State and Hooks:** Explicitly type `useState`, `useReducer`, `useRef`, `useContext`, etc.\n    ```typescript\n    const [count, setCount] = useState<number>(0);\n    const inputRef = useRef<HTMLInputElement>(null);\n    ```\n*   **Typing Event Handlers:** Use React's synthetic event types (`React.MouseEvent`, `React.ChangeEvent<HTMLInputElement>`).\n*   **Function Signatures:** Add types to function parameters and return values.\n\n### 4. Handling Edge Cases/Challenges\n\n*   **Third-Party Libraries:** Most popular libraries have `@types` packages (`npm install @types/library-name`). For libraries without types, you can create ambient declarations (`.d.ts` files) or use `declare module 'library-name'`. Use `any` as a last resort for complex/untyped parts, but add a `TODO` to type it later.\n*   **Higher-Order Components (HOCs) and Render Props:** These can be tricky to type. Leverage utility types like `React.ComponentProps`, `React.ComponentType`, and conditional types.\n*   **Legacy JavaScript:** For large, stable legacy parts, consider leaving them as `.js` files and using `allowJs` in `tsconfig.json`. You can then create definition files (`.d.ts`) for them as needed.\n*   **`any` Usage:** Resist the urge to overuse `any`. While it can quickly resolve type errors, it defeats the purpose of TypeScript. Use `unknown` or `T extends SomeType` for safer approaches.\n*   **Type Coercion:** Be explicit with type assertions (`as Type`) when you are certain about a type, but use them sparingly and with caution.\n\n### 5. Testing and Verification\n\n*   **Existing Test Suite:** Leverage your existing unit, integration, and end-to-end tests. A successful migration should not break any existing functionality.\n*   **TypeScript Compiler:** The primary 'test' is whether the TypeScript compiler runs without errors. Fix all reported type errors.\n*   **Linting:** Ensure ESLint (with TypeScript rules) passes cleanly.\n*   **Code Reviews:** Conduct thorough code reviews, specifically looking at type definitions and adherence to new TypeScript conventions.\n*   **Runtime Checks (Temporary):** Keep `PropTypes` in place for a transitional period after conversion of a component. This provides a safety net for any overlooked type issues that might manifest at runtime. Once confident, remove `PropTypes`.\n*   **Staging/QA Deployment:** Deploy the migrated codebase to a staging environment and conduct extensive QA testing to catch any runtime regressions not caught by static analysis or automated tests.\n\n### 6. Tooling and Linting\n\n*   **TypeScript Compiler (`tsc`):** The core tool for type checking.\n*   **ESLint with `@typescript-eslint`:** Essential for enforcing code style and catching more complex linting issues.\n*   **Prettier:** Integrate Prettier for consistent code formatting, which works well with TypeScript.\n*   **IDE Support:** Leverage powerful IDE features (VS Code is excellent) for type inference, autocompletion, refactoring, and error highlighting.\n*   **Type Coverage Tools:** Consider tools like `ts-prune` or `type-coverage` to track and improve the overall type coverage of the codebase.",
          "testCases": [
            "N/A - This is a theoretical discussion task."
          ],
          "hints": [
            "Think about a phased approach: what components would you convert first?",
            "Consider the role of the TypeScript compiler itself as a 'testing' tool.",
            "How would you ensure existing JavaScript code and third-party libraries integrate with the new TypeScript code?"
          ],
          "tags": [
            "TypeScript",
            "migration",
            "PropTypes",
            "architecture",
            "best practices",
            "frontend interview"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "typescript_fundamentals",
            "react_component_design",
            "software_architecture_principles"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "type_safety",
            "code_maintainability",
            "developer_experience",
            "refactoring"
          ]
        },
        {
          "id": "task_csstransition_toggle_animation",
          "title": "Animate a Toggling Section with CSSTransition",
          "description": "\nImplement a React functional component `AnimatedSection` that displays a hidden section (e.g., a div with text) when a button is clicked, and hides it again when the button is clicked a second time. The section should animate its appearance and disappearance using `CSSTransition` from `react-transition-group`.\n\n**Requirements:**\n1.  Use `useState` to manage the visibility state of the section.\n2.  Integrate `CSSTransition` to animate the section.\n3.  Define CSS classes (e.g., `section-enter`, `section-enter-active`, `section-exit`, `section-exit-active`) in an accompanying CSS file for a fade and slide animation.\n4.  Ensure the section unmounts from the DOM when it's hidden to improve performance and accessibility.\n5.  The animation duration should be 300ms.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport './AnimatedSection.css'; // You'll need to create this file\n\nfunction AnimatedSection() {\n  const [showSection, setShowSection] = useState(false);\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <button onClick={() => setShowSection(!showSection)}>\n        Toggle Section\n      </button>\n\n      {/* TODO: Implement CSSTransition here to wrap the section content */}\n      {/* Use 'section' as the base classNames prop value */}\n      {/* Ensure unmountOnExit is true */}\n      {/* Make sure timeout matches your CSS transition duration */}\n\n      {/* Section content to be animated */}\n      <div style={{ marginTop: '20px', padding: '15px', border: '1px solid #ddd', borderRadius: '5px' }}>\n        <h3>Welcome to the Animated Section!</h3>\n        <p>This content should smoothly fade and slide in and out.</p>\n      </div>\n    </div>\n  );\n}\n\nexport default AnimatedSection;\n\n/* Example CSS (to be put in AnimatedSection.css)\n.section-enter {\n  opacity: 0;\n  transform: translateY(-20px);\n}\n\n.section-enter-active {\n  opacity: 1;\n  transform: translateY(0);\n  transition: opacity 300ms ease-out, transform 300ms ease-out;\n}\n\n.section-exit {\n  opacity: 1;\n  transform: translateY(0);\n}\n\n.section-exit-active {\n  opacity: 0;\n  transform: translateY(20px);\n  transition: opacity 300ms ease-in, transform 300ms ease-in;\n}\n*/",
          "solutionCode": "import React, { useState } from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport './AnimatedSection.css';\n\nfunction AnimatedSection() {\n  const [showSection, setShowSection] = useState(false);\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '500px', margin: 'auto', textAlign: 'center' }}>\n      <button \n        onClick={() => setShowSection(!showSection)}\n        style={{\n          padding: '10px 20px',\n          fontSize: '1em',\n          cursor: 'pointer',\n          backgroundColor: '#007bff',\n          color: 'white',\n          border: 'none',\n          borderRadius: '5px'\n        }}\n      >\n        {showSection ? 'Hide Section' : 'Show Section'}\n      </button>\n\n      <CSSTransition\n        in={showSection}\n        timeout={300} \n        classNames=\"section\"\n        unmountOnExit\n      >\n        <div \n          style={{\n            marginTop: '20px',\n            padding: '15px',\n            border: '1px solid #ddd',\n            borderRadius: '5px',\n            backgroundColor: '#f9f9f9',\n            boxShadow: '0 2px 5px rgba(0,0,0,0.1)'\n          }}\n        >\n          <h3>Welcome to the Animated Section!</h3>\n          <p>This content should smoothly fade and slide in and out.</p>\n          <p>This text disappears completely when hidden (unmountOnExit).</p>\n        </div>\n      </CSSTransition>\n    </div>\n  );\n}\n\nexport default AnimatedSection;\n\n/* \n   Content for AnimatedSection.css:\n\n   .section-enter {\n     opacity: 0;\n     transform: translateY(-20px);\n   }\n\n   .section-enter-active {\n     opacity: 1;\n     transform: translateY(0);\n     transition: opacity 300ms ease-out, transform 300ms ease-out;\n   }\n\n   .section-exit {\n     opacity: 1;\n     transform: translateY(0);\n   }\n\n   .section-exit-active {\n     opacity: 0;\n     transform: translateY(20px);\n     transition: opacity 300ms ease-in, transform 300ms ease-in;\n   }\n*/",
          "testCases": [
            "Clicking the 'Toggle Section' button should make the section appear with a fade and slide animation.",
            "Clicking the 'Toggle Section' button again should make the section disappear with a fade and slide animation.",
            "After the section disappears, it should be removed from the DOM (verify using browser developer tools).",
            "Animations should be smooth and complete within approximately 300ms."
          ],
          "hints": [
            "Remember to import `CSSTransition` from `react-transition-group`.",
            "The `in` prop of `CSSTransition` controls whether the component is entering or exiting.",
            "The `timeout` prop must match the duration defined in your CSS `transition` property.",
            "`unmountOnExit` is crucial for removing the element from the DOM when it's not visible, otherwise it just becomes `display: none`.",
            "Make sure your CSS classes are correctly defined, e.g., `.section-enter`, `.section-enter-active`, `.section-exit`, `.section-exit-active`."
          ],
          "tags": [
            "React",
            "animations",
            "CSSTransition",
            "hooks",
            "UI/UX",
            "frontend interview"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "react_functional_components",
            "react_hooks_useState",
            "css_transitions_animations"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "component_state",
            "conditional_rendering",
            "user_interaction"
          ]
        },
        {
          "id": "task_list_item_animations",
          "title": "Animate List Item Addition/Removal with TransitionGroup",
          "description": "\nCreate a React component that manages a list of items (e.g., strings). Implement functionality to:\n\n1.  **Add a new item** to the list (e.g., via an input field and button).\n2.  **Remove an item** from the list (e.g., via a 'delete' button next to each item).\n\n**Requirements:**\n*   Use `TransitionGroup` and `CSSTransition` from `react-transition-group` to animate the addition and removal of list items.\n*   Each list item should have its own unique key.\n*   Implement CSS for a simple fade-in/fade-out animation for list items.\n*   The animation duration should be 500ms.\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState } from 'react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport './ListAnimator.css'; // Create this CSS file\n\nfunction ListAnimator() {\n  const [items, setItems] = useState(['Item 1', 'Item 2', 'Item 3']);\n  const [newItemText, setNewItemText] = useState('');\n\n  const handleAddItem = () => {\n    if (newItemText.trim() === '') return;\n    setItems(prevItems => [...prevItems, newItemText.trim()]);\n    setNewItemText('');\n  };\n\n  const handleRemoveItem = (itemToRemove) => {\n    setItems(prevItems => prevItems.filter(item => item !== itemToRemove));\n  };\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '400px', margin: 'auto' }}>\n      <h2>Animated List</h2>\n      <div style={{ marginBottom: '25px' }}>\n        <input \n          type=\"text\" \n          value={newItemText} \n          onChange={(e) => setNewItemText(e.target.value)}\n          placeholder=\"New list item\"\n          style={{ padding: '8px', marginRight: '10px', width: '200px' }}\n        />\n        <button \n          onClick={handleAddItem}\n          style={{ padding: '8px 15px', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\n        >\n          Add Item\n        </button>\n      </div>\n\n      {/* TODO: Wrap the list rendering with TransitionGroup and CSSTransition */}\n      <ul style={{ listStyleType: 'none', padding: 0 }}>\n        {items.map((item, index) => (\n          <li \n            key={item} // Consider a more robust key for production, like a unique ID\n            style={{\n              display: 'flex', \n              justifyContent: 'space-between', \n              alignItems: 'center',\n              padding: '10px',\n              border: '1px solid #eee',\n              marginBottom: '5px',\n              backgroundColor: '#f8f8f8',\n              borderRadius: '4px'\n            }}\n          >\n            {item}\n            <button \n              onClick={() => handleRemoveItem(item)}\n              style={{ padding: '5px 10px', backgroundColor: '#dc3545', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}\n            >\n              Remove\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport default ListAnimator;\n\n/* Example CSS (to be put in ListAnimator.css):\n.list-item-enter {\n  opacity: 0;\n  transform: translateX(-50px);\n}\n\n.list-item-enter-active {\n  opacity: 1;\n  transform: translateX(0);\n  transition: opacity 500ms ease-out, transform 500ms ease-out;\n}\n\n.list-item-exit {\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.list-item-exit-active {\n  opacity: 0;\n  transform: translateX(50px);\n  transition: opacity 500ms ease-in, transform 500ms ease-in;\n}\n*/",
          "solutionCode": "import React, { useState } from 'react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport './ListAnimator.css';\n\nfunction ListAnimator() {\n  const [items, setItems] = useState(['Item A', 'Item B', 'Item C'].map(text => ({ id: Math.random().toString(36).substring(7), text: text })));\n  const [newItemText, setNewItemText] = useState('');\n\n  const handleAddItem = () => {\n    if (newItemText.trim() === '') return;\n    const newItem = { id: Math.random().toString(36).substring(7), text: newItemText.trim() };\n    setItems(prevItems => [...prevItems, newItem]);\n    setNewItemText('');\n  };\n\n  const handleRemoveItem = (idToRemove) => {\n    setItems(prevItems => prevItems.filter(item => item.id !== idToRemove));\n  };\n\n  return (\n    <div style={{ padding: '20px', maxWidth: '400px', margin: 'auto', fontFamily: 'Arial, sans-serif' }}>\n      <h2 style={{ textAlign: 'center', color: '#333' }}>Animated List</h2>\n      <div style={{ marginBottom: '25px', display: 'flex', justifyContent: 'center' }}>\n        <input \n          type=\"text\" \n          value={newItemText} \n          onChange={(e) => setNewItemText(e.target.value)}\n          placeholder=\"New list item\"\n          style={{ \n            padding: '10px', \n            marginRight: '10px', \n            width: '200px', \n            border: '1px solid #ccc', \n            borderRadius: '4px',\n            fontSize: '1em'\n          }}\n        />\n        <button \n          onClick={handleAddItem}\n          style={{ \n            padding: '10px 15px', \n            backgroundColor: '#28a745', \n            color: 'white', \n            border: 'none', \n            borderRadius: '4px', \n            cursor: 'pointer',\n            fontSize: '1em'\n          }}\n        >\n          Add Item\n        </button>\n      </div>\n\n      <TransitionGroup component=\"ul\" style={{ listStyleType: 'none', padding: 0 }}>\n        {items.map((item) => (\n          <CSSTransition \n            key={item.id} \n            timeout={500} \n            classNames=\"list-item\"\n          >\n            <li \n              style={{\n                display: 'flex', \n                justifyContent: 'space-between', \n                alignItems: 'center',\n                padding: '12px',\n                border: '1px solid #eee',\n                marginBottom: '8px',\n                backgroundColor: '#f8f8f8',\n                borderRadius: '5px',\n                boxShadow: '0 1px 3px rgba(0,0,0,0.05)'\n              }}\n            >\n              {item.text}\n              <button \n                onClick={() => handleRemoveItem(item.id)}\n                style={{ \n                  padding: '6px 12px', \n                  backgroundColor: '#dc3545', \n                  color: 'white', \n                  border: 'none', \n                  borderRadius: '4px', \n                  cursor: 'pointer',\n                  fontSize: '0.9em'\n                }}\n              >\n                Remove\n              </button>\n            </li>\n          </CSSTransition>\n        ))}\n      </TransitionGroup>\n    </div>\n  );\n}\n\nexport default ListAnimator;\n\n/* \n   Content for ListAnimator.css:\n\n   .list-item-enter {\n     opacity: 0;\n     transform: translateX(-50px);\n   }\n\n   .list-item-enter-active {\n     opacity: 1;\n     transform: translateX(0);\n     transition: opacity 500ms ease-out, transform 500ms ease-out;\n   }\n\n   .list-item-exit {\n     opacity: 1;\n     transform: translateX(0);\n   }\n\n   .list-item-exit-active {\n     opacity: 0;\n     transform: translateX(50px);\n     transition: opacity 500ms ease-in, transform 500ms ease-in;\n   }\n*/",
          "testCases": [
            "Adding a new item should make it appear with a fade-in and slide animation.",
            "Removing an existing item should make it disappear with a fade-out and slide animation.",
            "Adding multiple items quickly should animate each one individually.",
            "Removing multiple items quickly should animate each one individually.",
            "Ensure unique keys are used for list items, especially when adding/removing, to prevent React warnings and ensure proper animations.",
            "The list should maintain correct order after additions/removals."
          ],
          "hints": [
            "Wrap the mapping of your list items with `<TransitionGroup>`. Remember that `TransitionGroup` itself does not apply animations, it just manages its children's transition state.",
            "Each direct child of `TransitionGroup` (in this case, each `CSSTransition` component) *must* have a unique `key` prop. This key is crucial for React to identify which items are entering, staying, or exiting.",
            "Inside `TransitionGroup`, each item you want to animate should be wrapped in a `CSSTransition` component.",
            "Set the `timeout` prop on `CSSTransition` to match your CSS transition duration.",
            "Use `Math.random().toString(36).substring(7)` or a similar method to generate unique IDs for new items if they don't already have one, as simply using the item text as a key can lead to issues if text duplicates."
          ],
          "tags": [
            "React",
            "animations",
            "TransitionGroup",
            "CSSTransition",
            "lists",
            "hooks",
            "UI/UX"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "react_hooks_useState",
            "react_lists_keys",
            "css_transitions_animations",
            "react_transition_group_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "dynamic_lists",
            "user_interaction",
            "component_lifecycle"
          ]
        },
        {
          "id": "task_implement_generic_error_boundary",
          "title": "Implement a Reusable React Error Boundary",
          "description": "\nCreate a generic `ErrorBoundary` class component that can be reused across different parts of a React application. This error boundary should:\n\n1.  Catch JavaScript errors anywhere in its child component tree.\n2.  Display a user-friendly fallback UI (e.g., 'Something went wrong, please try again.').\n3.  Log the error and error information to the console using `console.error`.\n4.  Optionally, accept a `fallbackComponent` prop, which if provided, should be rendered instead of the default fallback message.\n\n**Requirements:**\n*   Use `static getDerivedStateFromError(error)` to update the component's state to trigger the fallback UI.\n*   Use `componentDidCatch(error, errorInfo)` to log error details.\n*   Demonstrate its usage by wrapping a component that intentionally throws an error.\n",
          "difficulty": "medium",
          "startingCode": "import React from 'react';\n\n// Component that intentionally throws an error\nfunction BuggyComponent({ shouldThrow }) {\n  if (shouldThrow) {\n    throw new Error('I am a buggy component and I crashed!');\n  }\n  return <div>This is the perfectly working component content.</div>;\n}\n\n// TODO: Implement the ErrorBoundary class component here\nclass ErrorBoundary extends React.Component {\n  // constructor\n  // state: { hasError: false, error: null, errorInfo: null }\n  \n  // static getDerivedStateFromError\n\n  // componentDidCatch\n\n  // render\n}\n\n// Application entry point for demonstration\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px' }}>\n      <h1>My Application</h1>\n      \n      {/* TODO: Use the ErrorBoundary to wrap BuggyComponent */}\n      {/* Test with shouldThrow={true} and shouldThrow={false} */}\n      {/* Test with a custom fallbackComponent prop */}\n      <BuggyComponent shouldThrow={false} /> {/* No error here */}\n\n      <hr />\n      <p>This part of the application remains visible.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "solutionCode": "import React from 'react';\n\n// Component that intentionally throws an error\nfunction BuggyComponent({ shouldThrow }) {\n  if (shouldThrow) {\n    // Simulate an error that would crash part of the UI\n    throw new Error('I am a buggy component and I crashed!');\n  }\n  return <div style={{ border: '1px dashed lightgreen', padding: '10px', margin: '10px' }}>This is the perfectly working component content.</div>;\n}\n\n// ErrorBoundary class component implementation\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    // This method is called during the render phase, so it should only update state.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // This method is called during the commit phase (after render).\n    // Use it for side effects like logging errors to a service.\n    console.error('Caught by ErrorBoundary:', error, errorInfo);\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n    // Example: logErrorToMyService(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Check if a custom fallback component was provided\n      if (this.props.fallbackComponent) {\n        return this.props.fallbackComponent;\n      }\n      // Default fallback UI\n      return (\n        <div style={{ border: '2px solid red', padding: '15px', margin: '10px', backgroundColor: '#ffe6e6', borderRadius: '5px' }}>\n          <h2>Oops! Something went wrong.</h2>\n          <p>We're sorry for the inconvenience. Please try again later.</p>\n          {/* Optional: show error details in development */}\n          {process.env.NODE_ENV === 'development' && this.state.error && (\n            <details style={{ whiteSpace: 'pre-wrap', marginTop: '10px' }}>\n              <summary>Error Details</summary>\n              {this.state.error.toString()}\n              <br />\n              {this.state.errorInfo && this.state.errorInfo.componentStack}\n            </details>\n          )}\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Add PropTypes for better development-time validation (optional but good practice)\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  fallbackComponent: PropTypes.node // Can be a React element or component\n};\n\n// Custom fallback component example\nconst CustomFallback = () => (\n  <div style={{ border: '2px dashed blue', padding: '15px', margin: '10px', backgroundColor: '#e6f2ff', borderRadius: '5px' }}>\n    <h3>A specific section failed to load!</h3>\n    <p>Please contact support with this error code: XYZ123.</p>\n  </div>\n);\n\n// Application entry point for demonstration\nimport PropTypes from 'prop-types'; // Import PropTypes for the example\n\nfunction App() {\n  const [triggerErrorDefault, setTriggerErrorDefault] = React.useState(false);\n  const [triggerErrorCustom, setTriggerErrorCustom] = React.useState(false);\n\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px' }}>\n      <h1>My Application</h1>\n      \n      <hr />\n      <h2>Section 1: Default Error Boundary</h2>\n      <button onClick={() => setTriggerErrorDefault(true)} style={{ marginBottom: '15px' }}>\n        Trigger Default Error\n      </button>\n      <ErrorBoundary>\n        <BuggyComponent shouldThrow={triggerErrorDefault} />\n      </ErrorBoundary>\n\n      <hr />\n      <h2>Section 2: Custom Fallback Component</h2>\n      <button onClick={() => setTriggerErrorCustom(true)} style={{ marginBottom: '15px' }}>\n        Trigger Custom Fallback Error\n      </button>\n      <ErrorBoundary fallbackComponent={<CustomFallback />}>\n        <BuggyComponent shouldThrow={triggerErrorCustom} />\n      </ErrorBoundary>\n\n      <hr />\n      <p>This part of the application remains functional and visible.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "testCases": [
            "Wrap `BuggyComponent` with `shouldThrow={false}`: `ErrorBoundary` should render `BuggyComponent` normally.",
            "Wrap `BuggyComponent` with `shouldThrow={true}`: `ErrorBoundary` should catch the error and display its default fallback UI. Console should show the error logged by `componentDidCatch`.",
            "Wrap `BuggyComponent` with `shouldThrow={true}` and pass a custom `fallbackComponent` prop: `ErrorBoundary` should render the custom fallback component instead of its default UI.",
            "Verify that components outside the error boundary's scope continue to render and function normally even if an error is caught within the boundary."
          ],
          "hints": [
            "An `ErrorBoundary` must be a class component.",
            "`static getDerivedStateFromError` is a static method and should return an object to update state (e.g., `{ hasError: true }`). It does not have access to `this`.",
            "`componentDidCatch` is an instance method and can be used for side effects like logging. It also receives `errorInfo` which is useful for debugging.",
            "The `render` method of the `ErrorBoundary` will conditionally render `this.props.children` or the fallback UI based on `this.state.hasError`.",
            "To accept a custom `fallbackComponent`, you can check `this.props.fallbackComponent` in the `render` method and render it if it exists."
          ],
          "tags": [
            "React",
            "error boundaries",
            "class components",
            "error handling",
            "reusability",
            "frontend interview"
          ],
          "timeEstimate": 75,
          "prerequisites": [
            "react_class_components",
            "react_lifecycle_methods",
            "state_management"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "fault_tolerance",
            "user_experience",
            "component_design_patterns"
          ]
        },
        {
          "id": "task_test_error_boundary_with_nested_component",
          "title": "Test Error Boundary with Nested Component Structure",
          "description": "\nBuilding upon the reusable `ErrorBoundary` from the previous task, create a more complex component hierarchy to demonstrate its effectiveness. \n\n**Requirements:**\n1.  Create a `ParentComponent` that renders two `ChildComponent` instances.\n2.  One `ChildComponent` should always work fine.\n3.  The second `ChildComponent` should conditionally throw an error (e.g., based on a prop).\n4.  Wrap only the potentially buggy `ChildComponent` with an `ErrorBoundary`.\n5.  Demonstrate that when the error is triggered in the buggy child, only that specific part of the UI shows the fallback, while the rest of the `ParentComponent` and other `ChildComponent` instances remain fully functional and visible.\n\nThis task emphasizes the selective application of error boundaries to prevent full application crashes.\n",
          "difficulty": "medium",
          "startingCode": "import React from 'react';\n\n// Reusable ErrorBoundary (assume it's implemented correctly from previous task)\n// Paste your ErrorBoundary class component here for self-containment.\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Caught by ErrorBoundary:', error, errorInfo);\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallbackComponent) {\n        return this.props.fallbackComponent;\n      }\n      return (\n        <div style={{ border: '2px solid red', padding: '15px', margin: '10px', backgroundColor: '#ffe6e6', borderRadius: '5px' }}>\n          <h2>Oops! Something went wrong in this section.</h2>\n          <p>Please try again later.</p>\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n\n// Child component that might throw an error\nfunction ChildComponent({ id, shouldThrow }) {\n  if (shouldThrow) {\n    throw new Error(`Error in ChildComponent ${id}`);\n  }\n  return (\n    <div style={{ border: '1px solid lightblue', padding: '10px', margin: '5px' }}>\n      Child Component {id}: All good!\n    </div>\n  );\n}\n\n// Parent component to demonstrate error boundary scope\nfunction ParentComponent() {\n  const [triggerBuggyChild, setTriggerBuggyChild] = React.useState(false);\n\n  return (\n    <div style={{ border: '2px solid purple', padding: '20px', margin: '20px' }}>\n      <h3>Parent Component</h3>\n      <button onClick={() => setTriggerBuggyChild(true)} style={{ marginBottom: '15px' }}>\n        Trigger Error in Buggy Child\n      </button>\n      \n      {/* This child should always work */}\n      <ChildComponent id=\"A\" shouldThrow={false} />\n\n      {/* TODO: Wrap this buggy child with the ErrorBoundary */}\n      <ChildComponent id=\"B\" shouldThrow={triggerBuggyChild} />\n      \n      <p>Parent footer content.</p>\n    </div>\n  );\n}\n\n// App component to render the ParentComponent\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif' }}>\n      <h1>Application Root</h1>\n      <ParentComponent />\n      <p>Application footer.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "solutionCode": "import React from 'react';\nimport PropTypes from 'prop-types';\n\n// Reusable ErrorBoundary (from previous task, with PropTypes for robustness)\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error('Caught by ErrorBoundary:', error, errorInfo);\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallbackComponent) {\n        return this.props.fallbackComponent;\n      }\n      return (\n        <div style={{ border: '2px solid red', padding: '15px', margin: '10px', backgroundColor: '#ffe6e6', borderRadius: '5px' }}>\n          <h2>Oops! Something went wrong in this section.</h2>\n          <p>We're sorry for the inconvenience. Please try again later.</p>\n          {process.env.NODE_ENV === 'development' && this.state.error && (\n            <details style={{ whiteSpace: 'pre-wrap', marginTop: '10px' }}>\n              <summary>Error Details</summary>\n              {this.state.error.toString()}\n              <br />\n              {this.state.errorInfo && this.state.errorInfo.componentStack}\n            </details>\n          )}\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  fallbackComponent: PropTypes.node\n};\n\n// Child component that might throw an error\nfunction ChildComponent({ id, shouldThrow }) {\n  if (shouldThrow) {\n    throw new Error(`Error in ChildComponent ${id}`);\n  }\n  return (\n    <div style={{ border: '1px solid lightblue', padding: '10px', margin: '5px', backgroundColor: '#e0f7fa' }}>\n      Child Component {id}: All good!\n    </div>\n  );\n}\n\n// Parent component to demonstrate error boundary scope\nfunction ParentComponent() {\n  const [triggerBuggyChild, setTriggerBuggyChild] = React.useState(false);\n\n  return (\n    <div style={{ border: '2px solid purple', padding: '20px', margin: '20px', backgroundColor: '#f3e5f5' }}>\n      <h3 style={{ color: '#673ab7' }}>Parent Component</h3>\n      <button \n        onClick={() => setTriggerBuggyChild(true)}\n        style={{\n          padding: '8px 15px',\n          fontSize: '0.9em',\n          cursor: 'pointer',\n          backgroundColor: '#ff9800',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          marginBottom: '15px'\n        }}\n      >\n        Trigger Error in Buggy Child B\n      </button>\n      \n      {/* This child should always work, outside the boundary to show unaffected parts */}\n      <ChildComponent id=\"A\" shouldThrow={false} />\n\n      {/* Wrap this buggy child with the ErrorBoundary */}\n      <ErrorBoundary>\n        <ChildComponent id=\"B\" shouldThrow={triggerBuggyChild} />\n      </ErrorBoundary>\n      \n      <p style={{ marginTop: '15px', borderTop: '1px dashed #9c27b0', paddingTop: '10px' }}>\n        Parent footer content. This should always be visible.\n      </p>\n    </div>\n  );\n}\n\n// App component to render the ParentComponent\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px', backgroundColor: '#f0f0f0' }}>\n      <h1 style={{ color: '#333' }}>Application Root</h1>\n      <ParentComponent />\n      <p style={{ borderTop: '1px solid #bbb', paddingTop: '10px', marginTop: '20px' }}>\n        Application footer. This is also always visible.\n      </p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "testCases": [
            "Initial render: Both ChildComponent A and B should display their 'All good!' messages. No error boundary fallback should be visible.",
            "Click 'Trigger Error in Buggy Child B': ChildComponent A should remain visible and functional. ChildComponent B's content should be replaced by the ErrorBoundary's fallback UI. ParentComponent's header and footer should remain visible.",
            "Check console: `componentDidCatch` should log the error from ChildComponent B."
          ],
          "hints": [
            "The key to this task is correctly placing the `ErrorBoundary` **only** around the part of the UI you want to protect, not the entire application.",
            "Ensure `ChildComponent` takes a `shouldThrow` prop to easily simulate errors.",
            "Use console logs to verify which components render and which errors are caught."
          ],
          "tags": [
            "React",
            "error boundaries",
            "component hierarchy",
            "error handling",
            "scope",
            "frontend interview"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "task_implement_generic_error_boundary",
            "react_component_composition"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "application_resilience",
            "fault_tolerance",
            "component_isolation"
          ]
        }
      ]
    }
  },
  {
    "id": "5d100d10-74ee-45f1-b151-bccda1809f34",
    "startLine": 14100,
    "endLine": 14199,
    "processedDate": "2025-06-17T13:48:38.825Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_error_boundaries",
          "title": "React Error Boundaries",
          "content": "Error Boundaries are React components that catch JavaScript errors anywhere in their child component tree, log those errors, and display a fallback UI instead of the crashed component tree. They allow you to gracefully handle errors without unmounting the entire application.\n\n## Key Concepts\n*   **Purpose**: Catch errors in the component tree, log them, and display a fallback UI.\n*   **Mechanism**: Implemented as class components using `static getDerivedStateFromError()` and/or `componentDidCatch()` lifecycle methods.\n    *   `static getDerivedStateFromError(error)`: A static method called during the render phase. It receives the error that was thrown and should return a state object to update the component's state, causing it to re-render with the fallback UI.\n    *   `componentDidCatch(error, errorInfo)`: An instance method called during the commit phase. It receives the error and an object with `componentStack` (information about which component threw the error). This method is typically used for side effects like logging errors to an error reporting service.\n\n## Important Notes on Error Boundaries\n1.  Error boundaries **only catch errors in the components below them in the tree**. They do not catch errors within:\n    *   Event handlers (e.g., `onClick`, `onChange`).\n    *   Asynchronous code (e.g., `setTimeout` or `requestAnimationFrame` callbacks, `Promise` callbacks).\n    *   Server-side rendering (SSR).\n    *   Errors thrown in the error boundary itself.\n2.  As of React 16, errors that are *not* caught by any error boundary will result in the unmounting of the entire React component tree, leaving a blank page.\n3.  Error boundaries **must be class components**. There is no direct hook equivalent provided by React itself. However, third-party libraries offer functional alternatives.\n4.  You would typically place error boundaries at strategic locations in your app, such as route-level components or wrapping widgets that might fail independently, to isolate potential crashes.\n\n## Using a Third-Party Library (e.g., `react-error-boundary`)\nFor functional components, libraries like `react-error-boundary` provide a convenient way to implement error boundaries without writing a class component. They abstract the class component implementation behind a functional API.\n\nThe `ErrorBoundary` component from `react-error-boundary` typically accepts a `FallbackComponent` prop (a component to render when an error occurs), `onReset` (a function called when the `resetErrorBoundary` callback is invoked), and `resetKeys` (an array of keys that, when changed, will reset the error boundary's state, allowing a retry).\n\n",
          "examples": [
            {
              "id": "example_error_boundary_class_component",
              "title": "Basic Class Component Error Boundary",
              "code": "import React, { Component } from 'react';\n\nclass MyErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render shows the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.error(\"Caught an error:\", error, errorInfo);\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <div style={{ padding: '20px', border: '1px solid red', color: 'red' }}>\n          <h2>Something went wrong.</h2>\n          <details style={{ whiteSpace: 'pre-wrap' }}>\n            {this.state.error && this.state.error.toString()}\n            <br />\n            {this.state.errorInfo && this.state.errorInfo.componentStack}\n          </details>\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n\n// Usage example:\n// function App() {\n//   return (\n//     <MyErrorBoundary>\n//       <ComponentThatMightThrow />\n//     </MyErrorBoundary>\n//   );\n// }\n",
              "explanation": "This example demonstrates a fundamental class-based error boundary. `getDerivedStateFromError` is used to update the component's state to trigger a re-render with the fallback UI, while `componentDidCatch` is used for logging the error or performing other side effects. The `render` method conditionally displays the children or the fallback UI based on `hasError` state. This pattern isolates errors within a part of the UI, preventing the entire application from crashing.",
              "language": "typescript"
            },
            {
              "id": "example_error_boundary_third_party",
              "title": "Using `react-error-boundary` Library",
              "code": "import { ErrorBoundary } from 'react-error-boundary';\nimport React from 'react';\n\nfunction ErrorFallback({ error, resetErrorBoundary }) {\n  return (\n    <div role=\"alert\" style={{ padding: '20px', border: '1px solid orange', color: 'orange' }}>\n      <p>Something went wrong (via `react-error-boundary`):</p>\n      <pre>{error.message}</pre>\n      <button onClick={resetErrorBoundary}>Try again</button>\n    </div>\n  );\n}\n\nfunction ComponentThatMightThrow() {\n  // Simulate an error for demonstration\n  const [shouldThrow, setShouldThrow] = React.useState(false);\n  \n  if (shouldThrow) {\n    throw new Error('I crashed!');\n  }\n\n  return (\n    <div>\n      <p>This is a component that might throw an error.</p>\n      <button onClick={() => setShouldThrow(true)}>Trigger Error</button>\n    </div>\n  );\n}\n\nfunction AppWithErrorBoundary() {\n  return (\n    <ErrorBoundary \n      FallbackComponent={ErrorFallback}\n      onReset={() => {\n        // Reset the state of your app here, e.g., navigate home or clear data\n        console.log('Error boundary reset!');\n      }}\n      resetKeys={['someKey']} // Changing this key would reset the boundary\n    >\n      <ComponentThatMightThrow />\n    </ErrorBoundary>\n  );\n}\n\nexport default AppWithErrorBoundary;\n",
              "explanation": "This example shows how to use the popular `react-error-boundary` library. It provides a simple `ErrorBoundary` component that accepts a `FallbackComponent` (a functional component to render on error), `onReset` callback for recovery logic, and `resetKeys` to imperatively reset the error state. This abstracts away the need for a class component, making error handling more convenient in functional component heavy applications.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_error_boundary_mcq_1",
            "question_error_boundary_mcq_2",
            "question_error_boundary_open_1",
            "question_error_boundary_flashcard_1",
            "question_error_boundary_code_1"
          ],
          "relatedTasks": [
            "task_implement_class_error_boundary",
            "task_integrate_react_error_boundary"
          ],
          "tags": [
            "React",
            "Error Handling",
            "Error Boundaries",
            "Component Lifecycle",
            "Class Components",
            "Functional Components"
          ],
          "technology": "React",
          "prerequisites": [
            "React Components",
            "Class Components",
            "Functional Components",
            "State Management",
            "Lifecycle Methods"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Robust Applications",
            "Production Readiness"
          ]
        },
        {
          "id": "theory_form_handling_controlled_components",
          "title": "React Form Handling: Controlled Components",
          "content": "Form handling is a fundamental aspect of interactive web applications. React provides powerful ways to manage form state and user input. In React, form components can broadly be categorized into controlled or uncontrolled components.\n\n## Controlled Components\nIn controlled components, form data is entirely handled and managed by React state. This means that every input element's value is controlled by React through its `value` prop, and any changes to the input are reflected by updating the React state via an `onChange` event handler. This pattern establishes React state as the \"single source of truth\" for the form data.\n\n### How They Work\n1.  **State Management**: You declare a piece of state (e.g., using `useState` in functional components or `this.state` in class components) to hold the current value of the form input.\n2.  **`value` Prop**: The `value` prop of the input element is bound to this state variable. This makes the input a \"controlled\" component, as React now dictates its value.\n3.  **`onChange` Event Handler**: An `onChange` event handler is attached to the input. Whenever the user types or changes the input, this event fires.\n4.  **State Update**: Inside the `onChange` handler, you update the React state with the new input value (typically `e.target.value`). This update triggers a re-render of the component, causing the input's `value` prop to reflect the new state, and thus the input displays the updated value.\n\n### Advantages of Controlled Components\n*   **Instant Validation**: You can implement real-time input validation as the user types.\n*   **Conditional Inputs**: Easily enable/disable or show/hide inputs based on other form values.\n*   **Input Formatting**: Format input values on the fly (e.g., credit card numbers, phone numbers).\n*   **Predictable State**: The form's state is always in your React component's state, making debugging and data flow management straightforward.\n*   **Easy Submission**: All form data is readily available in your component's state when the form is submitted.\n\n",
          "examples": [
            {
              "id": "example_controlled_form",
              "title": "Basic Controlled Form in React",
              "code": "import React, { useState } from 'react';\n\nfunction ControlledForm() {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    message: ''\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Form submitted:', formData);\n    // In a real application, you would send formData to a server, etc.\n    alert(`Form Submitted!\\nName: ${formData.name}\\nEmail: ${formData.email}\\nMessage: ${formData.message}`);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ border: '1px solid #ccc', padding: '20px', borderRadius: '8px' }}>\n      <h2>Controlled Form Example</h2>\n      <div style={{ marginBottom: '10px' }}>\n        <label htmlFor=\"name\" style={{ display: 'block', marginBottom: '5px' }}>Name:</label>\n        <input\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          value={formData.name}\n          onChange={handleChange}\n          style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}\n        />\n      </div>\n      <div style={{ marginBottom: '10px' }}>\n        <label htmlFor=\"email\" style={{ display: 'block', marginBottom: '5px' }}>Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}\n        />\n      </div>\n      <div style={{ marginBottom: '10px' }}>\n        <label htmlFor=\"message\" style={{ display: 'block', marginBottom: '5px' }}>Message:</label>\n        <textarea\n          id=\"message\"\n          name=\"message\"\n          value={formData.message}\n          onChange={handleChange}\n          rows=\"4\"\n          style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}\n        />\n      </div>\n      <button type=\"submit\" style={{ padding: '10px 20px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\n        Submit\n      </button>\n    </form>\n  );\n}\n\nexport default ControlledForm;\n",
              "explanation": "This example illustrates a basic controlled form. The `formData` state object holds the values for all input fields. The `handleChange` function is generic, using the `name` attribute of the input to update the corresponding property in the `formData` state. The `value` prop of each input is bound to its respective state property, making the input 'controlled' by React state. The `handleSubmit` function prevents default form submission and logs the collected `formData`, demonstrating how to access the form's state.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_controlled_vs_uncontrolled_open_1",
            "question_controlled_component_mcq_1",
            "question_controlled_component_mcq_2",
            "question_controlled_component_flashcard_1",
            "question_controlled_component_code_1"
          ],
          "relatedTasks": [
            "task_build_controlled_feedback_form",
            "task_refactor_uncontrolled_to_controlled"
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "State Management",
            "useState",
            "Event Handling",
            "Input Management"
          ],
          "technology": "React",
          "prerequisites": [
            "React State",
            "Functional Components",
            "Event Handling in React",
            "ES6 Destructuring"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Interactive Applications",
            "Data Input Forms"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_error_boundary_mcq_1",
          "topic": "React Error Boundaries",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following types of errors are NOT caught by React Error Boundaries?",
          "answer": "Errors inside event handlers",
          "options": [
            "Errors during component rendering",
            "Errors inside lifecycle methods (e.g., componentDidMount)",
            "Errors inside constructors",
            "Errors inside event handlers"
          ],
          "analysisPoints": [
            "Error boundaries are designed to catch errors during the rendering phase (e.g., render method, constructors, lifecycle methods).",
            "Errors in event handlers occur outside the render tree, so React does not catch them automatically with error boundaries. They need traditional `try...catch` blocks or careful handling.",
            "Asynchronous code errors, server-side rendering errors, and errors within the error boundary itself are also not caught."
          ],
          "keyConcepts": [
            "Error Boundary limitations",
            "React render phase",
            "Event handling"
          ],
          "evaluationCriteria": [
            "Understanding of Error Boundary scope",
            "Distinguishing between synchronous and asynchronous contexts in React",
            "Knowledge of React's error handling mechanisms"
          ],
          "example": "Error boundaries are specifically designed to catch errors that occur during the component's rendering, lifecycle methods, and constructors. They do not catch errors originating from: \n- Event handlers (e.g., `onClick`, `onChange`)\n- Asynchronous code (`setTimeout`, `Promise.then`)\n- Server-side rendering\n- Errors thrown within the error boundary itself",
          "tags": [
            "React",
            "Error Boundaries",
            "Error Handling",
            "Limitations"
          ],
          "prerequisites": [
            "React Error Handling",
            "Event Handling"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_error_boundary_mcq_2",
          "topic": "React Error Boundaries",
          "level": "easy",
          "type": "mcq",
          "question": "As of React 16, what is the consequence if an error is thrown in a component and is NOT caught by any Error Boundary?",
          "answer": "The entire React component tree will unmount.",
          "options": [
            "Only the component that threw the error will unmount.",
            "React will display a default error message at the component's location.",
            "The entire React component tree will unmount.",
            "The application will pause and prompt the user to refresh."
          ],
          "analysisPoints": [
            "Before React 16, an uncaught error would corrupt React's internal state, leading to cryptic errors on subsequent renders.",
            "React 16 introduced the behavior of unmounting the entire component tree to prevent corrupted state and make errors more predictable, albeit at the cost of losing the entire UI.",
            "Error boundaries were introduced as the solution to prevent this full unmount."
          ],
          "keyConcepts": [
            "React 16 error handling",
            "Uncaught errors behavior",
            "Purpose of Error Boundaries"
          ],
          "evaluationCriteria": [
            "Knowledge of React's error handling evolution",
            "Understanding the severity of uncaught errors"
          ],
          "example": "Before React 16, uncaught errors could leave the UI in a broken state and lead to inconsistent behavior. With React 16, React implemented a more robust error handling strategy: if an error is not caught by an error boundary, it results in the unmounting of the entire React component tree to ensure consistency. This emphasizes the importance of implementing error boundaries.",
          "tags": [
            "React",
            "Error Boundaries",
            "React 16",
            "Error Handling"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_error_boundary_open_1",
          "topic": "React Error Boundaries",
          "level": "medium",
          "type": "open",
          "question": "Explain what React Error Boundaries are, how they are implemented, and list at least three types of errors they do not catch. Provide an example use case.",
          "answer": "React Error Boundaries are special React components that are designed to catch JavaScript errors in their child component tree, log those errors, and display a fallback UI instead of the component tree that crashed. This prevents the entire application from breaking due to an error in a single component.\n\n**Implementation:**\nError Boundaries are implemented as class components. They use one or both of the following lifecycle methods:\n1.  `static getDerivedStateFromError(error)`: This method is called after an error has been thrown by a descendant component. It should return a state update to display a fallback UI.\n2.  `componentDidCatch(error, errorInfo)`: This method is called after an error has been thrown. It's used for side effects, such as logging the error to an error reporting service.\n\n**Errors they do NOT catch:**\n1.  Errors inside event handlers (e.g., `onClick`, `onChange`).\n2.  Errors in asynchronous code (e.g., `setTimeout`, `Promise` callbacks).\n3.  Errors thrown in the error boundary component itself.\n4.  Errors during server-side rendering.\n\n**Example Use Case:**\nA common use case is to wrap a `Dashboard` component or a `Widget` component that fetches data and renders complex UI. If a `Chart` component inside the `Dashboard` fails to render due to invalid data, the Error Boundary around the `Chart` (or `Dashboard`) can catch the error and display a message like 'Chart failed to load' while the rest of the dashboard remains functional. Another common place is at the route level, ensuring that if a specific page (route) fails, only that page's content is replaced with a fallback, not the entire application.",
          "analysisPoints": [
            "Clear definition of Error Boundaries.",
            "Accurate description of `static getDerivedStateFromError` and `componentDidCatch`.",
            "Correct identification of error types not caught by boundaries.",
            "Practical and relevant example use case provided."
          ],
          "keyConcepts": [
            "Error Boundary definition",
            "Lifecycle methods for error handling",
            "Limitations of Error Boundaries",
            "Application of error handling"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of Error Boundary mechanics",
            "Ability to articulate core concepts and limitations",
            "Practical problem-solving skills through use case examples"
          ],
          "example": "See the detailed answer above for the explanation and example.",
          "tags": [
            "React",
            "Error Boundaries",
            "Interview Question",
            "Deep Dive"
          ],
          "prerequisites": [
            "React Component Lifecycle",
            "Error Handling"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_error_boundary_flashcard_1",
          "topic": "React Error Boundaries",
          "level": "easy",
          "type": "flashcard",
          "question": "What two lifecycle methods are primarily used to implement a React Error Boundary class component?",
          "answer": "`static getDerivedStateFromError` and `componentDidCatch`",
          "analysisPoints": [
            "Tests recall of the specific API for error boundaries."
          ],
          "keyConcepts": [
            "Error Boundary API",
            "React Lifecycle"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall"
          ],
          "example": "`static getDerivedStateFromError(error)` is used to update state for fallback UI, and `componentDidCatch(error, errorInfo)` is used for logging errors.",
          "tags": [
            "React",
            "Error Boundaries",
            "Flashcard",
            "Lifecycle Methods"
          ],
          "prerequisites": [
            "React Lifecycle"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_error_boundary_code_1",
          "topic": "React Error Boundaries",
          "level": "medium",
          "type": "code",
          "question": "Given the following functional component that might throw an error, complete the `App` component by wrapping `BrokenComponent` with an `ErrorBoundary` from the `react-error-boundary` library. Ensure a fallback UI is displayed and a reset mechanism is available.",
          "answer": "```typescript\nimport { ErrorBoundary } from 'react-error-boundary';\nimport React, { useState } from 'react';\n\nfunction BrokenComponent({ shouldError }) {\n  if (shouldError) {\n    throw new Error('This component unexpectedly crashed!');\n  }\n  return <div>I am a healthy component!</div>;\n}\n\nfunction ErrorFallback({ error, resetErrorBoundary }) {\n  return (\n    <div role=\"alert\" style={{ border: '1px solid red', padding: '10px' }}>\n      <p>Something went wrong:</p>\n      <pre style={{ color: 'red' }}>{error.message}</pre>\n      <button onClick={resetErrorBoundary}>Try again</button>\n    </div>\n  );\n}\n\nfunction App() {\n  const [triggerError, setTriggerError] = useState(false);\n\n  const handleReset = () => {\n    // This function will be called when 'Try again' button is clicked\n    console.log('Resetting error boundary...');\n    setTriggerError(false); // Reset the state that caused the error\n  };\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <h1>Error Boundary Demo</h1>\n      <button onClick={() => setTriggerError(true)} disabled={triggerError}>\n        Trigger Component Error\n      </button>\n      <hr />\n      <ErrorBoundary \n        FallbackComponent={ErrorFallback}\n        onReset={handleReset}\n      >\n        <BrokenComponent shouldError={triggerError} />\n      </ErrorBoundary>\n    </div>\n  );\n}\n\nexport default App;\n```",
          "options": [],
          "analysisPoints": [
            "Correct usage of `ErrorBoundary` component from `react-error-boundary`.",
            "Properly defining and passing `FallbackComponent`.",
            "Implementing `onReset` callback for recovery, demonstrating how to clear the error state.",
            "Understanding how to pass props (`error`, `resetErrorBoundary`) to the `FallbackComponent`."
          ],
          "keyConcepts": [
            "Third-party error boundary library usage",
            "Functional components error handling",
            "State management for error triggers"
          ],
          "evaluationCriteria": [
            "Ability to integrate external libraries for error handling",
            "Understanding of the `FallbackComponent` and `onReset` props",
            "Practical application of error recovery logic"
          ],
          "example": "```typescript\nimport React from 'react';\n\nfunction BrokenComponent({ shouldError }) {\n  if (shouldError) {\n    throw new Error('This component unexpectedly crashed!');\n  }\n  return <div>I am a healthy component!</div>;\n}\n\n// Your task is to complete the App component below\n// import { ErrorBoundary } from 'react-error-boundary';\n\nfunction App() {\n  const [triggerError, setTriggerError] = React.useState(false);\n\n  // You need to define ErrorFallback and integrate ErrorBoundary here\n  // ...\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <h1>Error Boundary Demo</h1>\n      <button onClick={() => setTriggerError(true)} disabled={triggerError}>\n        Trigger Component Error\n      </button>\n      <hr />\n      {/* Insert your ErrorBoundary here */}\n      <BrokenComponent shouldError={triggerError} />\n    </div>\n  );\n}\n\nexport default App;\n```",
          "tags": [
            "React",
            "Error Boundaries",
            "Coding Challenge",
            "react-error-boundary"
          ],
          "prerequisites": [
            "React Functional Components",
            "useState Hook",
            "Third-party libraries"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_vs_uncontrolled_open_1",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "medium",
          "type": "open",
          "question": "Compare and contrast controlled and uncontrolled components in React forms. Discuss their key differences, advantages, and when you would choose one over the other.",
          "answer": "**Controlled Components:**\n*   **Key Idea**: React state is the \"single source of truth\" for the form data. Every change to an input is directly managed by React state.\n*   **How it Works**: The input's `value` prop is bound to a state variable, and an `onChange` event handler updates that state with `e.target.value`.\n*   **Advantages**: Facilitates real-time input validation, conditional rendering based on input, input formatting, and easier handling of form submission as all data is in state.\n*   **When to Use**: Ideal for most form scenarios, especially when you need immediate feedback, complex validation, or dynamic interaction with form fields.\n\n**Uncontrolled Components:**\n*   **Key Idea**: Form data is handled by the DOM itself, similar to traditional HTML forms. React doesn't control the input's value directly.\n*   **How it Works**: You use a `ref` to get the DOM element and access its current value when needed (e.g., on form submission). You might use `defaultValue` for initial values.\n*   **Advantages**: Simpler to implement for very basic forms where you only need the value on submission. Can be slightly faster for very high-frequency updates if you don't need real-time validation.\n*   **When to Use**: Rarely recommended for complex applications. Might be used for a simple file input (which is typically uncontrolled by default) or for integrating with non-React DOM libraries.\n\n**Comparison:**\n| Feature           | Controlled Component                     | Uncontrolled Component                   |\n|-------------------|------------------------------------------|------------------------------------------|\n| **Data Source**   | React State                              | DOM                                      |\n| **Value Prop**    | Required (`value={stateVar}`)            | Not typically used (`defaultValue` instead)|\n| **Change Handling**| `onChange` event updates state           | Access value via `ref` on submission     |\n| **Validation**    | Real-time, easier to implement           | Typically on submission                  |\n| **Complexity**    | More boilerplate (state, onChange)       | Less boilerplate                         |\n| **Flexibility**   | Highly flexible, powerful                | Limited functionality                    |\n\n**Choice Criteria:**\nFor the vast majority of cases in modern React development, **controlled components are preferred** due to their predictability, power, and ease of integration with React's data flow. Uncontrolled components are a niche solution for very simple cases or specific integrations.",
          "analysisPoints": [
            "Clear and accurate definitions for both types.",
            "Detailed explanation of their operational mechanisms (`value` prop, `onChange` for controlled; `ref` for uncontrolled).",
            "Comprehensive list of advantages for each.",
            "Sensible recommendations on when to use each type, highlighting controlled components as the default choice.",
            "Structured comparison (e.g., table) to clearly show differences."
          ],
          "keyConcepts": [
            "Controlled components",
            "Uncontrolled components",
            "React forms",
            "State management",
            "DOM interaction",
            "Refs"
          ],
          "evaluationCriteria": [
            "In-depth understanding of React form patterns",
            "Ability to articulate trade-offs",
            "Knowledge of best practices in React form development"
          ],
          "example": "See the detailed answer above for the explanation.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Uncontrolled Components",
            "Interview Question",
            "Design Patterns"
          ],
          "prerequisites": [
            "React State",
            "React Refs",
            "Event Handling"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_component_mcq_1",
          "topic": "Controlled Components",
          "level": "easy",
          "type": "mcq",
          "question": "In a controlled React component, what is considered the 'single source of truth' for the form data?",
          "answer": "React state",
          "options": [
            "The DOM element's `value` attribute",
            "The browser's default form behavior",
            "React state",
            "A global Redux store"
          ],
          "analysisPoints": [
            "The core principle of controlled components is that React's component state always reflects the input's value.",
            "Changes to the input update the state, which in turn re-renders the input with the new `value` prop.",
            "While a global store like Redux *could* hold form data, for a single component, its local React state (via `useState` or `this.state`) is the immediate source of truth."
          ],
          "keyConcepts": [
            "Controlled components principle",
            "Single source of truth",
            "React state management"
          ],
          "evaluationCriteria": [
            "Understanding of controlled component fundamentals",
            "Knowledge of React state principles"
          ],
          "example": "In a controlled component, the input element's `value` is driven by React state. When the user types, an `onChange` handler updates the state, and the input then re-renders to reflect that state. This makes the React state the authoritative source for the input's current value.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "State Management"
          ],
          "prerequisites": [
            "React State"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_controlled_component_mcq_2",
          "topic": "Controlled Components",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following React functional component for a controlled input field. Which line of code correctly binds the input's value and handles its changes?",
          "answer": "`<input type=\"text\" value={inputValue} onChange={e => setInputValue(e.target.value)} />`",
          "options": [
            "`<input type=\"text\" defaultValue={inputValue} />`",
            "`<input type=\"text\" ref={inputRef} />`",
            "`<input type=\"text\" value={inputValue} />`",
            "`<input type=\"text\" value={inputValue} onChange={e => setInputValue(e.target.value)} />`"
          ],
          "analysisPoints": [
            "For a controlled component, both the `value` prop and an `onChange` handler are essential.",
            "The `value` prop makes the component 'controlled' by React state.",
            "The `onChange` handler is responsible for updating the state with the new input value, completing the data flow loop.",
            "`defaultValue` is for uncontrolled components, `ref` is for accessing the DOM directly (uncontrolled or imperative interactions), and `value` alone would make the input read-only without an `onChange` handler."
          ],
          "keyConcepts": [
            "Controlled components implementation",
            "`value` prop",
            "`onChange` event",
            "`useState` hook"
          ],
          "evaluationCriteria": [
            "Ability to identify correct syntax for controlled inputs",
            "Understanding of the two-way data binding concept in React controlled components"
          ],
          "example": "In React, a controlled input needs its `value` prop to be tied to a state variable (e.g., `inputValue`), and its `onChange` prop to a function that updates that state (e.g., `setInputValue(e.target.value)`). This ensures that React is always aware of and controls the input's current value.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Syntax",
            "useState"
          ],
          "prerequisites": [
            "React State",
            "Event Handling"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_component_flashcard_1",
          "topic": "Controlled Components",
          "level": "easy",
          "type": "flashcard",
          "question": "What two essential props/attributes are required on an HTML input element to make it a controlled component in React?",
          "answer": "`value` and `onChange`",
          "analysisPoints": [
            "Tests basic recall of controlled component essentials."
          ],
          "keyConcepts": [
            "Controlled components",
            "Input props"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall"
          ],
          "example": "The `value` prop explicitly sets the input's value from React state, and the `onChange` prop provides the mechanism to update that state when the user interacts with the input, thus closing the control loop.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Flashcard"
          ],
          "prerequisites": [
            "React Forms"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_controlled_component_code_1",
          "topic": "Controlled Components",
          "level": "medium",
          "type": "code",
          "question": "Convert the following uncontrolled React input into a controlled component. The input should display and update its value based on React state.",
          "answer": "```typescript\nimport React, { useState } from 'react';\n\nfunction ControlledInputConverter() {\n  const [text, setText] = useState('');\n\n  const handleInputChange = (event) => {\n    setText(event.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Controlled Input</h2>\n      <input\n        type=\"text\"\n        value={text} // Bind value to state\n        onChange={handleInputChange} // Update state on change\n        placeholder=\"Type something...\"\n      />\n      <p>Current input value: {text}</p>\n    </div>\n  );\n}\n\nexport default ControlledInputConverter;\n```",
          "options": [],
          "analysisPoints": [
            "Correct use of `useState` to declare state for the input's value.",
            "Binding the `value` prop of the input to the state variable.",
            "Implementing an `onChange` handler that updates the state with `event.target.value`."
          ],
          "keyConcepts": [
            "Controlled components implementation",
            "`useState` hook",
            "Event handling in forms",
            "Input value binding"
          ],
          "evaluationCriteria": [
            "Ability to transform uncontrolled to controlled components",
            "Correct application of `useState` and `onChange`",
            "Understanding of the data flow in controlled inputs"
          ],
          "example": "```typescript\nimport React from 'react';\n\nfunction UncontrolledInput() {\n  // This input is currently uncontrolled\n  // Your task: Make it controlled using React state\n  return (\n    <div>\n      <h2>Uncontrolled Input (to be converted)</h2>\n      <input type=\"text\" placeholder=\"Type something...\" />\n      <p>Current input value: (Not controlled yet)</p>\n    </div>\n  );\n}\n\nexport default UncontrolledInput;\n```",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Coding Challenge",
            "useState"
          ],
          "prerequisites": [
            "React State",
            "Functional Components"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_implement_class_error_boundary",
          "title": "Implement a Class Component Error Boundary",
          "description": "\nCreate a React class component that acts as an Error Boundary. This boundary should:\n\n1.  Catch JavaScript errors in its child component tree.\n2.  Display a fallback UI when an error occurs, indicating that something went wrong.\n3.  Log the error and its component stack information to the console.\n\nThen, create a simple `BuggyComponent` that conditionally throws an error, and demonstrate your `ErrorBoundary` by wrapping `BuggyComponent` with it.\n",
          "difficulty": "medium",
          "startingCode": "import React, { Component } from 'react';\n\nclass BuggyComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { throwError: false };\n  }\n\n  handleClick = () => {\n    this.setState({ throwError: true });\n  };\n\n  render() {\n    if (this.state.throwError) {\n      throw new Error('I crashed!');\n    }\n    return (\n      <div>\n        <p>This component will crash if you click the button.</p>\n        <button onClick={this.handleClick}>Cause Error</button>\n      </div>\n    );\n  }\n}\n\n// Your ErrorBoundary implementation goes here\nclass MyErrorBoundary extends Component {\n  // TODO: Implement constructor, static getDerivedStateFromError, componentDidCatch, and render\n  render() {\n    return this.props.children;\n  }\n}\n\n// How to use your ErrorBoundary\nfunction App() {\n  return (\n    <div>\n      <h1>Error Boundary Demo</h1>\n      <MyErrorBoundary>\n        <BuggyComponent />\n      </MyErrorBoundary>\n      <p>This text should still be visible even if the component above crashes.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "solutionCode": "import React, { Component } from 'react';\n\nclass BuggyComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { throwError: false };\n  }\n\n  handleClick = () => {\n    this.setState({ throwError: true });\n  };\n\n  render() {\n    if (this.state.throwError) {\n      throw new Error('I crashed!');\n    }\n    return (\n      <div style={{ border: '1px dashed grey', padding: '10px' }}>\n        <p>This component will crash if you click the button.</p>\n        <button onClick={this.handleClick}>Cause Error</button>\n      </div>\n    );\n  }\n}\n\nclass MyErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false, error: null, errorInfo: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render shows the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log error messages to an error reporting service here\n    console.error(\"Error caught by Error Boundary:\", error, errorInfo);\n    this.setState({\n      error: error,\n      errorInfo: errorInfo\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n        <div style={{ border: '2px solid red', padding: '20px', backgroundColor: '#fee', color: '#a00' }}>\n          <h2>Oops! Something went wrong in this section.</h2>\n          <p>Please try again or contact support.</p>\n          <details style={{ whiteSpace: 'pre-wrap', fontSize: '0.8em' }}>\n            {this.state.error && this.state.error.toString()}\n            <br />\n            {this.state.errorInfo && this.state.errorInfo.componentStack}\n          </details>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px' }}>\n      <h1>React Error Boundary Example</h1>\n      <p>This part of the app should remain functional even if a child component crashes.</p>\n      <MyErrorBoundary>\n        <BuggyComponent />\n      </MyErrorBoundary>\n      <p>This text is outside the error boundary and demonstrates that the rest of the application remains mounted.</p>\n      <hr/>\n      <h2>Another section (not handled by the first boundary)</h2>\n      <div>This content should always be visible.</div>\n    </div>\n  );\n}\n\nexport default App;\n",
          "testCases": [
            "Verify that clicking 'Cause Error' button in `BuggyComponent` triggers the error boundary.",
            "Confirm that the `Fallback UI` is displayed when an error occurs.",
            "Check the console for the error message and component stack logged by `componentDidCatch`.",
            "Ensure that components outside the `ErrorBoundary` (e.g., 'This text is outside the error boundary...') remain rendered and functional."
          ],
          "hints": [
            "Remember to initialize `hasError` state in the constructor.",
            "`static getDerivedStateFromError` is for updating state to render fallback UI.",
            "`componentDidCatch` is for logging errors or other side effects.",
            "The `render` method of the error boundary should conditionally render `this.props.children` or the fallback UI."
          ],
          "tags": [
            "React",
            "Error Handling",
            "Error Boundaries",
            "Class Components",
            "Lifecycle Methods",
            "Testing"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "React Class Components",
            "State Management",
            "Component Lifecycle"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "static getDerivedStateFromError",
            "componentDidCatch",
            "Error Propagation"
          ]
        },
        {
          "id": "task_integrate_react_error_boundary",
          "title": "Integrate `react-error-boundary` into a Functional Component Application",
          "description": "\nRefactor the `App` component to use the `ErrorBoundary` component from the `react-error-boundary` library. Your solution should:\n\n1.  Define a functional `ErrorFallback` component that receives `error` and `resetErrorBoundary` props and displays a user-friendly error message along with a 'Try again' button.\n2.  Wrap a potentially error-prone functional component (provided) with the `ErrorBoundary`.\n3.  Implement the `onReset` callback for the `ErrorBoundary` to clear any state that might have caused the error, allowing the user to 'Try again'.\n\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState } from 'react';\n// import { ErrorBoundary } from 'react-error-boundary'; // You'll need to import this\n\nfunction BuggyFunctionalComponent() {\n  const [count, setCount] = useState(0);\n\n  const handleClick = () => {\n    // Simulate an error if count reaches 3\n    if (count === 2) {\n      throw new Error('Crash! Count reached critical level.');\n    }\n    setCount(prevCount => prevCount + 1);\n  };\n\n  return (\n    <div style={{ border: '1px dashed lightblue', padding: '10px', marginBottom: '20px' }}>\n      <p>Current count: {count}</p>\n      <button onClick={handleClick}>Increment Count</button>\n      <p>Clicking 3 times will cause an error.</p>\n    </div>\n  );\n}\n\n// Your ErrorFallback component and ErrorBoundary integration goes here\nfunction App() {\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px' }}>\n      <h1>Using `react-error-boundary`</h1>\n      {/* TODO: Implement ErrorBoundary here */}\n      <BuggyFunctionalComponent />\n      <p>This text should always be visible.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "solutionCode": "import React, { useState } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\n\nfunction BuggyFunctionalComponent() {\n  const [count, setCount] = useState(0);\n\n  const handleClick = () => {\n    // Simulate an error if count reaches 3\n    if (count === 2) {\n      throw new Error('Crash! Count reached critical level.');\n    }\n    setCount(prevCount => prevCount + 1);\n  };\n\n  return (\n    <div style={{ border: '1px dashed lightblue', padding: '10px', marginBottom: '20px' }}>\n      <p>Current count: {count}</p>\n      <button onClick={handleClick}>Increment Count</button>\n      <p>Clicking 3 times will cause an error.</p>\n    </div>\n  );\n}\n\nfunction ErrorFallback({ error, resetErrorBoundary }) {\n  return (\n    <div role=\"alert\" style={{ border: '2px solid orange', padding: '20px', backgroundColor: '#ffe', color: '#b60' }}>\n      <h2>Something went wrong in this component:</h2>\n      <pre style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word', color: '#d9534f' }}>{error.message}</pre>\n      <button onClick={resetErrorBoundary} style={{ padding: '8px 15px', backgroundColor: '#f0ad4e', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', marginTop: '10px' }}>\n        Try again\n      </button>\n    </div>\n  );\n}\n\nfunction App() {\n  const [showBuggyComponent, setShowBuggyComponent] = useState(true);\n\n  const handleResetError = () => {\n    // This function is called when the 'Try again' button in ErrorFallback is clicked.\n    // Here, we reset the state that might have caused the error, or re-mount the component.\n    console.log('Error boundary reset initiated.');\n    setShowBuggyComponent(false); // Unmount current buggy component instance\n    setTimeout(() => setShowBuggyComponent(true), 0); // Re-mount a new instance\n  };\n\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px' }}>\n      <h1>Using `react-error-boundary`</h1>\n      <ErrorBoundary \n        FallbackComponent={ErrorFallback}\n        onReset={handleResetError}\n        // Adding resetKeys prop is another way to imperatively reset the boundary\n        // resetKeys={[showBuggyComponent]}\n      >\n        {showBuggyComponent ? <BuggyFunctionalComponent /> : null}\n      </ErrorBoundary>\n      <p>This text is outside the error boundary and demonstrates that the rest of the application remains mounted.</p>\n    </div>\n  );\n}\n\nexport default App;\n",
          "testCases": [
            "Verify that clicking 'Increment Count' button 3 times in `BuggyFunctionalComponent` causes an error.",
            "Confirm that `ErrorFallback` UI is displayed when the error occurs.",
            "Verify that clicking 'Try again' button in `ErrorFallback` resets the `BuggyFunctionalComponent` and allows it to be used again (e.g., starts count from 0).",
            "Ensure that other parts of the application outside the `ErrorBoundary` remain unaffected."
          ],
          "hints": [
            "Remember to import `ErrorBoundary` from `react-error-boundary`.",
            "The `FallbackComponent` prop should be a reference to your `ErrorFallback` function, not an invoked component.",
            "The `onReset` prop is a function that `react-error-boundary` calls when its `resetErrorBoundary` function is triggered from the fallback UI. Use this to reset any state that might lead to the error, or re-mount the child component (e.g., by changing a key prop or unmounting/re-mounting)."
          ],
          "tags": [
            "React",
            "Error Handling",
            "Error Boundaries",
            "Functional Components",
            "Third-Party Libraries",
            "react-error-boundary"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "React Functional Components",
            "useState Hook",
            "JSX"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Error Recovery",
            "Controlled vs. Uncontrolled Reset",
            "Component State Management"
          ]
        },
        {
          "id": "task_build_controlled_feedback_form",
          "title": "Build a Multi-Input Controlled Feedback Form with Basic Validation",
          "description": "\nCreate a React functional component for a feedback form that includes the following controlled input fields:\n\n1.  **Name**: Text input.\n2.  **Email**: Email input with basic client-side validation (must contain '@' and '.').\n3.  **Subject**: Dropdown (select) with at least three predefined options (e.g., 'General Inquiry', 'Feature Request', 'Bug Report').\n4.  **Message**: Textarea.\n\nAll fields should be controlled components. Implement a single `handleChange` function to manage updates for all input types. On form submission, log the collected `formData` object to the console and display a confirmation message. Implement simple validation for the email field (e.g., check for '@' and '.') and prevent submission if invalid, displaying an error message.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState } from 'react';\n\nfunction FeedbackForm() {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    subject: '', // Default or first option value\n    message: ''\n  });\n\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (e) => {\n    // TODO: Implement a single handleChange for all inputs\n  };\n\n  const validateForm = () => {\n    // TODO: Implement validation logic here\n    return {}; // Return errors object\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // TODO: Validate and submit form\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ padding: '20px', maxWidth: '500px', margin: '0 auto', border: '1px solid #ddd', borderRadius: '8px' }}>\n      <h2>Send Us Feedback</h2>\n      {/* TODO: Add input fields for name, email, subject, message */}\n      {/* Example for one field: */}\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" name=\"name\" value={formData.name} onChange={handleChange} />\n        {errors.name && <p style={{ color: 'red' }}>{errors.name}</p>}\n      </div>\n      \n      <button type=\"submit\">Submit Feedback</button>\n    </form>\n  );\n}\n\nexport default FeedbackForm;\n",
          "solutionCode": "import React, { useState } from 'react';\n\nfunction FeedbackForm() {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    subject: 'General Inquiry', // Set a default subject\n    message: ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [submissionMessage, setSubmissionMessage] = useState('');\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n\n    // Clear error for the field being changed\n    if (errors[name]) {\n      setErrors(prevErrors => {\n        const newErrors = { ...prevErrors };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n    if (!formData.name.trim()) {\n      newErrors.name = 'Name is required.';\n    }\n    if (!formData.email.trim()) {\n      newErrors.email = 'Email is required.';\n    } else if (!formData.email.includes('@') || !formData.email.includes('.')) {\n      newErrors.email = 'Invalid email format.';\n    }\n    if (!formData.message.trim()) {\n      newErrors.message = 'Message is required.';\n    }\n    return newErrors;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setSubmissionMessage(''); // Clear previous messages\n\n    const validationErrors = validateForm();\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n      setSubmissionMessage('Please correct the errors above.');\n      return;\n    }\n\n    console.log('Form submitted successfully:', formData);\n    setSubmissionMessage('Thank you for your feedback!');\n    // Optionally reset form after successful submission\n    setFormData({\n      name: '',\n      email: '',\n      subject: 'General Inquiry',\n      message: ''\n    });\n    setErrors({});\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ padding: '20px', maxWidth: '500px', margin: '0 auto', border: '1px solid #ddd', borderRadius: '8px', boxShadow: '2px 2px 8px rgba(0,0,0,0.1)' }}>\n      <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>Send Us Feedback</h2>\n      \n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"name\" style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>Name:</label>\n        <input type=\"text\" id=\"name\" name=\"name\" value={formData.name} onChange={handleChange} \n               style={{ width: '100%', padding: '10px', border: errors.name ? '1px solid red' : '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }} />\n        {errors.name && <p style={{ color: 'red', fontSize: '0.85em', marginTop: '5px' }}>{errors.name}</p>}\n      </div>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"email\" style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\" value={formData.email} onChange={handleChange}\n               style={{ width: '100%', padding: '10px', border: errors.email ? '1px solid red' : '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }} />\n        {errors.email && <p style={{ color: 'red', fontSize: '0.85em', marginTop: '5px' }}>{errors.email}</p>}\n      </div>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"subject\" style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>Subject:</label>\n        <select id=\"subject\" name=\"subject\" value={formData.subject} onChange={handleChange}\n                style={{ width: '100%', padding: '10px', border: errors.subject ? '1px solid red' : '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }}>\n          <option value=\"General Inquiry\">General Inquiry</option>\n          <option value=\"Feature Request\">Feature Request</option>\n          <option value=\"Bug Report\">Bug Report</option>\n          <option value=\"Other\">Other</option>\n        </select>\n        {errors.subject && <p style={{ color: 'red', fontSize: '0.85em', marginTop: '5px' }}>{errors.subject}</p>}\n      </div>\n\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"message\" style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>Message:</label>\n        <textarea id=\"message\" name=\"message\" value={formData.message} onChange={handleChange} rows=\"5\"\n                  style={{ width: '100%', padding: '10px', border: errors.message ? '1px solid red' : '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box', resize: 'vertical' }}></textarea>\n        {errors.message && <p style={{ color: 'red', fontSize: '0.85em', marginTop: '5px' }}>{errors.message}</p>}\n      </div>\n\n      <button type=\"submit\" style={{ width: '100%', padding: '12px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', fontSize: '1em', cursor: 'pointer', transition: 'background-color 0.3s ease' }}>\n        Submit Feedback\n      </button>\n      {submissionMessage && <p style={{ textAlign: 'center', marginTop: '15px', color: submissionMessage.includes('Thank') ? 'green' : 'red' }}>{submissionMessage}</p>}\n    </form>\n  );\n}\n\nexport default FeedbackForm;\n",
          "testCases": [
            "Submit form with all fields empty: Expect validation errors for all fields.",
            "Submit form with valid name and message, but invalid email (e.g., 'test@'): Expect email validation error.",
            "Submit form with valid name and message, but email missing '.': Expect email validation error.",
            "Submit form with all valid data: Expect console log of `formData` and a success message.",
            "Verify that `handleChange` correctly updates state for text, email, select, and textarea fields.",
            "Check that errors are cleared for a field once the user starts typing/changing that field."
          ],
          "hints": [
            "The `handleChange` function can use `e.target.name` and `e.target.value` to update the corresponding state property dynamically.",
            "For the `select` element, its `value` prop should be bound to the state, and `onChange` will handle updates just like text inputs.",
            "Validation logic can be extracted into a separate function that returns an errors object.",
            "Use `Object.keys(errors).length > 0` to check if there are any validation errors."
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Validation",
            "State Management",
            "Functional Components"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React Functional Components",
            "useState Hook",
            "Event Handling",
            "JavaScript Objects"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Form Validation Patterns",
            "Dynamic Input Handling",
            "User Experience"
          ]
        },
        {
          "id": "task_refactor_uncontrolled_to_controlled",
          "title": "Refactor an Uncontrolled Login Form to Controlled Components",
          "description": "\nGiven an uncontrolled login form, refactor it to use controlled components. The form should include:\n\n1.  **Username**: Text input.\n2.  **Password**: Password input.\n\nBoth inputs should be controlled by React state. On form submission, prevent the default browser behavior and log the username and password from the component's state to the console. Add a simple client-side validation that requires both fields to be non-empty before submission.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useRef } from 'react';\n\nfunction UncontrolledLoginForm() {\n  const usernameRef = useRef(null);\n  const passwordRef = useRef(null);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    // Currently accessing DOM directly (uncontrolled)\n    const username = usernameRef.current.value;\n    const password = passwordRef.current.value;\n    console.log('Uncontrolled Form Submit - Username:', username, 'Password:', password);\n    alert(`Username: ${username}, Password: ${password}`);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ padding: '20px', maxWidth: '400px', margin: '20px auto', border: '1px solid #ccc', borderRadius: '8px' }}>\n      <h2>Uncontrolled Login (Refactor Me!)</h2>\n      <div style={{ marginBottom: '10px' }}>\n        <label htmlFor=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" ref={usernameRef} style={{ width: '100%', padding: '8px' }} />\n      </div>\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" ref={passwordRef} style={{ width: '100%', padding: '8px' }} />\n      </div>\n      <button type=\"submit\" style={{ width: '100%', padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>Login</button>\n    </form>\n  );\n}\n\nexport default UncontrolledLoginForm;\n",
          "solutionCode": "import React, { useState } from 'react';\n\nfunction ControlledLoginForm() {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [loginMessage, setLoginMessage] = useState('');\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n    // Clear error for the field being changed\n    if (errors[name]) {\n      setErrors(prevErrors => {\n        const newErrors = { ...prevErrors };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n\n  const validate = () => {\n    const newErrors = {};\n    if (!formData.username.trim()) {\n      newErrors.username = 'Username is required.';\n    }\n    if (!formData.password.trim()) {\n      newErrors.password = 'Password is required.';\n    }\n    return newErrors;\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setLoginMessage('');\n\n    const validationErrors = validate();\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n      setLoginMessage('Please fill in all required fields.');\n      return;\n    }\n\n    console.log('Controlled Form Submit - Username:', formData.username, 'Password:', formData.password);\n    setLoginMessage('Logged in successfully!');\n    // In a real app, you'd send this to an authentication API\n    setFormData({ username: '', password: '' }); // Clear form\n    setErrors({});\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ padding: '20px', maxWidth: '400px', margin: '20px auto', border: '1px solid #ccc', borderRadius: '8px', boxShadow: '2px 2px 8px rgba(0,0,0,0.1)' }}>\n      <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>Controlled Login Form</h2>\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"username\" style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>Username:</label>\n        <input \n          type=\"text\" \n          id=\"username\" \n          name=\"username\" \n          value={formData.username} \n          onChange={handleChange} \n          style={{ width: '100%', padding: '10px', border: errors.username ? '1px solid red' : '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }} \n        />\n        {errors.username && <p style={{ color: 'red', fontSize: '0.85em', marginTop: '5px' }}>{errors.username}</p>}\n      </div>\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"password\" style={{ display: 'block', marginBottom: '5px', fontWeight: 'bold' }}>Password:</label>\n        <input \n          type=\"password\" \n          id=\"password\" \n          name=\"password\" \n          value={formData.password} \n          onChange={handleChange} \n          style={{ width: '100%', padding: '10px', border: errors.password ? '1px solid red' : '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }} \n        />\n        {errors.password && <p style={{ color: 'red', fontSize: '0.85em', marginTop: '5px' }}>{errors.password}</p>}\n      </div>\n      <button type=\"submit\" style={{ width: '100%', padding: '12px', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '4px', fontSize: '1em', cursor: 'pointer', transition: 'background-color 0.3s ease' }}>Login</button>\n      {loginMessage && <p style={{ textAlign: 'center', marginTop: '15px', color: loginMessage.includes('successful') ? 'green' : 'red' }}>{loginMessage}</p>}\n    </form>\n  );\n}\n\nexport default ControlledLoginForm;\n",
          "testCases": [
            "Submit form with both fields empty: Expect validation errors and no console log.",
            "Submit form with only username filled: Expect password validation error.",
            "Submit form with only password filled: Expect username validation error.",
            "Submit form with both fields filled: Expect username and password logged to console, and a success message.",
            "Verify that typing in input fields updates the component's state and reflects in the input."
          ],
          "hints": [
            "Replace `useRef` with `useState` for both username and password.",
            "Each input's `value` prop should be bound to its corresponding state variable.",
            "Implement a single `onChange` handler that updates the `formData` state object based on `e.target.name` and `e.target.value`.",
            "The `handleSubmit` function should now access data from `formData` state, not `ref.current.value`.",
            "Implement validation within `handleSubmit` or a separate `validate` function."
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Refactoring",
            "useState",
            "Validation"
          ],
          "timeEstimate": 75,
          "prerequisites": [
            "React State",
            "Functional Components",
            "Refs (to understand difference)"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Form Design",
            "User Input Handling",
            "Data Flow in React"
          ]
        }
      ]
    }
  },
  {
    "id": "ade35d3f-c53f-4798-b113-2d73e4c21b8c",
    "startLine": 14200,
    "endLine": 14299,
    "processedDate": "2025-06-17T13:52:17.968Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_controlled_components",
          "title": "Controlled Components in React",
          "content": "## Overview\nIn React, a 'controlled component' is a form input element whose value is controlled by React state. This means that instead of the DOM managing its own state, React's state is the single source of truth for the input's value. Every time the input's value changes (e.g., a user types), an `onChange` event handler is triggered. This handler updates the React state, and the input's `value` prop is then re-rendered with the new state value. This creates a data flow where the React state 'controls' the input.\n\n## Key Characteristics\n- **State as Source of Truth**: The input's current value is always derived from the component's state.\n- **`value` Prop**: The input element's `value` attribute is explicitly set to a state variable.\n- **`onChange` Handler**: An `onChange` event listener is required to update the state whenever the user interacts with the input. Without it, the input would be read-only as its `value` is tied to a static state.\n\n## Benefits\n- **Direct Control over Form Data**: React state provides immediate access to the current value of the input at any time.\n- **Immediate Validation and Feedback**: Since the value is in state, validation logic can run instantly as the user types, providing real-time feedback (e.g., showing error messages).\n- **Ability to Conditionally Disable Submit Button**: The state can be used to determine if the form is valid and enable/disable the submit button accordingly.\n- **Enforcing Input Format**: You can transform or restrict input values as they are typed (e.g., converting to uppercase, limiting characters, ensuring numeric input).\n- **Easier Dynamic Form Logic**: Building forms where one input affects others (e.g., showing/hiding fields based on selections) is straightforward due to centralized state management.\n\n## Drawbacks\n- **More Code Required**: Each input needs both a `value` prop tied to state and an `onChange` handler to update that state, leading to more boilerplate code, especially for large forms.\n- **Can Impact Performance on Very Large Forms**: Frequent state updates (on every keystroke) can lead to numerous re-renders of the component and potentially the entire form, which might cause performance issues in extremely large forms with many inputs, though React's reconciliation is generally efficient.",
          "examples": [
            {
              "id": "example_controlled_components_1",
              "title": "Basic Controlled Form",
              "code": "import React, { useState } from 'react';\n\nfunction ControlledForm() {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    message: ''\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prevFormData => ({\n      ...prevFormData,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Form submitted:', formData);\n    // Typically, you'd send formData to an API here\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        <input\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          value={formData.name}\n          onChange={handleChange}\n        />\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n        />\n      </div>\n      <div>\n        <label htmlFor=\"message\">Message:</label>\n        <textarea\n          id=\"message\"\n          name=\"message\"\n          value={formData.message}\n          onChange={handleChange}\n        />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}",
              "explanation": "This example demonstrates a basic controlled form. The `formData` state object holds the values for all inputs. The `handleChange` function is a generic handler that updates the correct field in `formData` based on the input's `name` attribute. Each input's `value` prop is bound to its corresponding state property, and `onChange` is set to `handleChange`, ensuring React state is always the source of truth.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_controlled_concept_1",
            "question_controlled_benefits_2",
            "question_controlled_drawbacks_3",
            "question_controlled_implementation_4",
            "question_controlled_validation_5",
            "question_form_types_mcq_1"
          ],
          "relatedTasks": [
            "task_controlled_form_validation",
            "task_controlled_dynamic_form"
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "State Management",
            "Frontend Development"
          ],
          "technology": "React",
          "prerequisites": [
            "React Basics",
            "useState Hook",
            "Event Handling"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Form Validation",
            "Dynamic Forms",
            "User Input Management"
          ]
        },
        {
          "id": "theory_uncontrolled_components",
          "title": "Uncontrolled Components in React",
          "content": "## Overview\nIn React, an 'uncontrolled component' is a form input element whose value is managed by the DOM itself, rather than by React state. These components behave more like traditional HTML form inputs. React uses 'refs' to access the DOM node directly and retrieve its current value when needed, typically during form submission. The component itself maintains its internal state without React explicitly controlling its value.\n\n## Key Characteristics\n- **DOM as Source of Truth**: The input's current value is managed internally by the DOM.\n- **`ref` Attribute**: Instead of a `value` prop, a `ref` attribute is used to get a direct reference to the DOM element.\n- **`defaultValue` (Optional)**: Can be used to set an initial value for the input, but subsequent changes are handled by the DOM, not React state.\n- **No `onChange` for State**: While `onChange` can still be used for other purposes (like triggering side effects), it's not used to update React state for the input's value.\n\n## Benefits\n- **Simpler Code for Basic Forms**: Requires less boilerplate code compared to controlled components as you don't need `useState` and `onChange` handlers for every input.\n- **Better Performance (Fewer Re-renders)**: Since React state is not being updated on every keystroke, there are fewer component re-renders, which can be a performance advantage for forms with a very large number of inputs or high-frequency updates.\n- **Can Integrate More Easily with Non-React Code**: Because they rely on the DOM for state management, uncontrolled components can be simpler to integrate with third-party libraries that directly manipulate the DOM (e.g., certain jQuery plugins, custom DOM-based input widgets).\n- **Good for One-Time Inputs Like File Uploads**: File inputs (`<input type=\"file\"/>`) are inherently uncontrolled because their value (the file path) is read-only for security reasons and cannot be programmatically set by JavaScript. Using `ref` is the standard way to access the selected file.\n\n## Drawbacks\n- **Less Control over Validation Timing**: Validation typically occurs only when the form is submitted, making it harder to provide real-time feedback to the user as they type.\n- **Cannot Enforce Input Constraints During Typing**: It's difficult to restrict or transform input on the fly since React isn't actively managing the value.\n- **More Difficult to Implement Dynamic Form Logic**: Logic that depends on the current value of an input (e.g., showing a password confirmation field only when the password field is filled) becomes more cumbersome to implement without the value being readily available in React state.\n- **Less 'React-like'**: It deviates from React's typical declarative approach where the UI reflects the state.",
          "examples": [
            {
              "id": "example_uncontrolled_components_1",
              "title": "Basic Uncontrolled Form with useRef",
              "code": "import React, { useRef } from 'react';\n\nfunction UncontrolledForm() {\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const messageRef = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const formData = {\n      name: nameRef.current ? nameRef.current.value : '',\n      email: emailRef.current ? emailRef.current.value : '',\n      message: messageRef.current ? messageRef.current.value : ''\n    };\n    \n    console.log('Form submitted:', formData);\n    // Submit to server, etc.\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        <input\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          ref={nameRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          ref={emailRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"message\">Message:</label>\n        <textarea\n          id=\"message\"\n          name=\"message\"\n          ref={messageRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}",
              "explanation": "This example shows an uncontrolled form using `useRef`. Each input has a `ref` attribute pointing to a mutable ref object created by `useRef`. When the form is submitted, the `handleSubmit` function accesses the current values of the inputs directly from the DOM nodes via `ref.current.value`. Note the `defaultValue` prop for initial values, as `value` would make it controlled.",
              "language": "typescript"
            },
            {
              "id": "example_uncontrolled_components_file_upload",
              "title": "Uncontrolled File Input",
              "code": "import React, { useRef } from 'react';\n\nfunction FileUploadForm() {\n  const fileInputRef = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (fileInputRef.current && fileInputRef.current.files.length > 0) {\n      const selectedFile = fileInputRef.current.files[0];\n      console.log('Selected file:', selectedFile.name);\n      // Typically, you'd upload the file here\n    } else {\n      console.log('No file selected.');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"fileUpload\">Upload File:</label>\n        <input\n          type=\"file\"\n          id=\"fileUpload\"\n          name=\"fileUpload\"\n          ref={fileInputRef}\n        />\n      </div>\n      <button type=\"submit\">Upload</button>\n    </form>\n  );\n}",
              "explanation": "This example demonstrates using an uncontrolled component for a file input. File inputs are inherently uncontrolled because their `value` property is read-only for security reasons. `useRef` is used to get a reference to the `<input type='file'>` DOM element, and `fileInputRef.current.files` provides access to the selected files.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_uncontrolled_concept_1",
            "question_uncontrolled_benefits_2",
            "question_uncontrolled_drawbacks_3",
            "question_uncontrolled_implementation_4",
            "question_form_types_mcq_1"
          ],
          "relatedTasks": [
            "task_uncontrolled_file_upload",
            "task_uncontrolled_basic_form"
          ],
          "tags": [
            "React",
            "Forms",
            "Uncontrolled Components",
            "Refs",
            "DOM Manipulation"
          ],
          "technology": "React",
          "prerequisites": [
            "React Basics",
            "useRef Hook",
            "DOM API"
          ],
          "complexity": 5,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "File Uploads",
            "Integrating with Legacy Code",
            "Performance Optimization"
          ]
        },
        {
          "id": "theory_comparison_form_components",
          "title": "Controlled vs. Uncontrolled Components: Comparison and Use Cases",
          "content": "## Comparison Overview\nChoosing between controlled and uncontrolled components depends on the specific requirements of your form. While controlled components are generally preferred in React for their explicit data flow and easier debugging, uncontrolled components have their place for simpler use cases or performance-critical scenarios.\n\n| Feature/Aspect      | Controlled Components                                      | Uncontrolled Components                                    |\n| :------------------ | :--------------------------------------------------------- | :--------------------------------------------------------- |\n| **Data Source**     | React state is the single source of truth                  | DOM manages its own internal state                         |\n| **Value Access**    | Read directly from `state` at any time                   | Accessed via `ref` at the time of form submission          |\n| **Updates**         | `onChange` handler updates React state on every change     | DOM handles updates; `onChange` not strictly needed for value |\n| **Validation**      | Real-time, as user types (immediate feedback)              | Typically on form submission                               |\n| **Dynamic Behavior**| Easy to implement (e.g., conditional fields)               | More difficult, requires direct DOM interaction            |\n| **Boilerplate**     | More code for `value` and `onChange` for each input        | Less code, simpler for basic inputs                        |\n| **Performance**     | Potential re-renders on every keystroke (can be an issue for very large forms) | Fewer re-renders, potentially better for very large forms |\n| **Integration**     | Best for React ecosystem                                   | Easier with non-React libraries or legacy DOM code         |\n| **Common Use Cases**| Most general forms, forms needing validation, complex forms, forms with interdependent inputs | Simple forms, file uploads, integration with external libraries |\n\n## When to Use Which\n- **Controlled Components (Recommended for most cases)**:\n    - When you need immediate input validation and feedback.\n    - When input needs to be programmatically manipulated (e.g., format enforcement, character limits).\n    - When you have dynamic forms where input values affect other parts of the UI or other form fields.\n    - For most standard forms in a typical React application due to the clear data flow and declarative nature.\n\n- **Uncontrolled Components (Specific use cases)**:\n    - For simple, isolated forms where you only need the value on submission and no real-time validation is required.\n    - When dealing with file inputs (`<input type=\"file\"/>`) as they are inherently uncontrolled.\n    - When integrating with non-React code or legacy DOM-based libraries that expect direct DOM access.\n    - For performance optimization in extremely large forms with hundreds of inputs where frequent re-renders might be a concern (though this is rare and often better addressed by memoization or form libraries).\n\nIn most modern React applications, controlled components are the default and preferred approach due to the benefits of a predictable data flow and easy state management. Uncontrolled components are reserved for specific edge cases.",
          "examples": [],
          "relatedQuestions": [
            "question_comparison_benefits_1",
            "question_form_types_mcq_1",
            "question_form_type_choice_open_2",
            "question_controlled_uncontrolled_diff_flashcard_1",
            "question_controlled_uncontrolled_usecase_flashcard_2"
          ],
          "relatedTasks": [
            "task_refactor_controlled_to_uncontrolled",
            "task_controlled_uncontrolled_mixed_form"
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Uncontrolled Components",
            "Design Patterns",
            "Performance",
            "Best Practices"
          ],
          "technology": "React",
          "prerequisites": [
            "React Basics",
            "State Management",
            "Refs",
            "Form Handling"
          ],
          "complexity": 7,
          "interviewRelevance": 10,
          "learningPath": "intermediate",
          "requiredFor": [
            "Advanced Form Handling",
            "Performance Optimization in React",
            "Architectural Decisions"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_form_types_mcq_1",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following statements accurately describes a key difference between controlled and uncontrolled components in React?",
          "answer": "Controlled components manage input values through React state, while uncontrolled components manage input values internally via the DOM.",
          "options": [
            "Controlled components manage input values through React state, while uncontrolled components manage input values internally via the DOM.",
            "Uncontrolled components always require the `onChange` event handler, whereas controlled components do not.",
            "Controlled components are primarily used for file uploads, while uncontrolled components are used for text inputs.",
            "Performance is generally better with controlled components due to fewer re-renders."
          ],
          "analysisPoints": [
            "Controlled components centralize form data in React state, making it the single source of truth. Changes propagate from input to state, then back to input.",
            "Uncontrolled components allow the DOM to manage its own state for input values. React typically accesses these values using refs at specific times (e.g., form submission).",
            "The `onChange` handler is crucial for controlled components to update React state; without it, the input would be read-only. For uncontrolled components, `onChange` is not used for value management.",
            "File uploads are a classic use case for uncontrolled components due to browser security restrictions on programmatically setting file input values.",
            "Uncontrolled components can sometimes offer better performance for very large forms due to fewer React re-renders triggered by state updates on every keystroke, although this is a niche scenario."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Uncontrolled Components",
            "React State",
            "DOM Management",
            "Refs",
            "onChange event",
            "Performance implications"
          ],
          "evaluationCriteria": [
            "Understanding of the core principle of state management in React forms.",
            "Ability to distinguish between explicit React control and DOM-native control.",
            "Knowledge of common use cases and performance characteristics."
          ],
          "example": "This question tests the fundamental definition and distinction between the two types of form components. The correct answer highlights the core difference in how input values are managed.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Uncontrolled Components",
            "Core Concepts"
          ],
          "prerequisites": [
            "React Basics",
            "State Management",
            "Refs"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_concept_1",
          "topic": "Controlled Components",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary mechanism by which a controlled component updates its value in React?",
          "answer": "Through a `value` prop bound to React state and an `onChange` handler that updates that state.",
          "analysisPoints": [
            "Controlled components require both a `value` prop (to display the state) and an `onChange` prop (to update the state)."
          ],
          "keyConcepts": [
            "Controlled Components",
            "React State",
            "onChange event",
            "value prop"
          ],
          "evaluationCriteria": [
            "Recall of fundamental controlled component principles."
          ],
          "example": "A fundamental question to check basic understanding of controlled components.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Flashcard"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_controlled_benefits_2",
          "topic": "Controlled Components",
          "level": "medium",
          "type": "open",
          "question": "Name three significant benefits of using controlled components in React forms and briefly explain each.",
          "answer": "1. **Direct Control over Form Data**: The component's state is the single source of truth, giving immediate access to the input's value for processing, display, or manipulation at any time.\n2. **Immediate Validation and Feedback**: Validation logic can run as the user types, allowing for real-time error messages or formatting corrections, improving user experience.\n3. **Enforcing Input Format/Dynamic Logic**: Values can be transformed (e.g., to uppercase, numeric-only) or conditionally rendered (e.g., showing/hiding fields based on other inputs) directly within the `onChange` handler before updating state, enabling complex form behavior.",
          "analysisPoints": [
            "The ability to access the input's value from state at any point.",
            "The advantage of real-time validation over post-submission validation.",
            "How `onChange` can be used not just for updating state, but also for transforming or conditional logic.",
            "Mentioning conditional disabling of the submit button or dynamic form fields as examples of dynamic logic."
          ],
          "keyConcepts": [
            "Controlled Components Benefits",
            "Real-time Validation",
            "Form Data Control",
            "Dynamic Forms",
            "User Experience"
          ],
          "evaluationCriteria": [
            "Ability to articulate core advantages of controlled components.",
            "Depth of explanation for each benefit.",
            "Understanding of practical applications."
          ],
          "example": "This question assesses the candidate's understanding of why controlled components are a powerful pattern in React.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Benefits",
            "Open-Ended"
          ],
          "prerequisites": [
            "Controlled Components Theory"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_drawbacks_3",
          "topic": "Controlled Components",
          "level": "medium",
          "type": "flashcard",
          "question": "What are two main drawbacks of using controlled components, especially for very large forms?",
          "answer": "1. **More Code Required**: Each input needs `value` and `onChange` props, leading to boilerplate. 2. **Potential Performance Impact**: Frequent re-renders on every keystroke can affect performance on extremely large forms.",
          "analysisPoints": [
            "Boilerplate code for `useState` and `handleChange` for multiple inputs.",
            "The concept of re-renders on every state change and its implications for performance in specific large-scale scenarios."
          ],
          "keyConcepts": [
            "Controlled Components Drawbacks",
            "Boilerplate",
            "Performance",
            "Re-renders"
          ],
          "evaluationCriteria": [
            "Recall of disadvantages and their context."
          ],
          "example": "This checks if the candidate understands the trade-offs of using controlled components.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Drawbacks",
            "Flashcard"
          ],
          "prerequisites": [
            "Controlled Components Theory"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_uncontrolled_concept_1",
          "topic": "Uncontrolled Components",
          "level": "easy",
          "type": "flashcard",
          "question": "How do you typically access the value of an uncontrolled input in React?",
          "answer": "Using a `ref` attached to the input element and accessing `ref.current.value`.",
          "analysisPoints": [
            "The `useRef` hook creates a mutable `ref` object.",
            "Attaching the `ref` object to the `ref` prop of a DOM element allows direct access to the DOM node.",
            "`ref.current` provides the direct DOM element, from which `value` can be read."
          ],
          "keyConcepts": [
            "Uncontrolled Components",
            "Refs",
            "useRef Hook",
            "DOM Access"
          ],
          "evaluationCriteria": [
            "Recall of how uncontrolled components work."
          ],
          "example": "A basic recall question about uncontrolled components.",
          "tags": [
            "React",
            "Forms",
            "Uncontrolled Components",
            "Flashcard"
          ],
          "prerequisites": [
            "React Basics",
            "useRef Hook"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_uncontrolled_benefits_2",
          "topic": "Uncontrolled Components",
          "level": "medium",
          "type": "open",
          "question": "When would you prefer to use an uncontrolled component over a controlled component? Provide at least two distinct scenarios.",
          "answer": "1. **File Uploads**: `<input type=\"file\"/>` is a classic example. Due to browser security, its value cannot be set programmatically, making it inherently uncontrolled. You must use a `ref` to access the `files` property.\n2. **Integrating with Non-React Libraries / Legacy Code**: If you're working with a third-party DOM-manipulating library (e.g., a jQuery plugin) or existing legacy JavaScript code that directly interacts with form elements, an uncontrolled component can be simpler as it lets the DOM manage its own state without React's intervention.\n3. **Very Simple Forms with No Real-time Validation**: For a form with only a few inputs where values are only needed upon submission and no immediate feedback or complex logic is required, uncontrolled components can reduce boilerplate.",
          "analysisPoints": [
            "The security restriction on file inputs making them uncontrolled by nature.",
            "The benefit of less friction when integrating with external, non-React DOM manipulation.",
            "The simplicity for basic forms where `useState` and `onChange` add unnecessary overhead.",
            "Mentioning performance benefits for extremely large forms could also be valid, but less common."
          ],
          "keyConcepts": [
            "Uncontrolled Components Use Cases",
            "File Inputs",
            "Third-party Libraries",
            "Legacy Code Integration",
            "Simplicity"
          ],
          "evaluationCriteria": [
            "Ability to identify appropriate use cases for uncontrolled components.",
            "Understanding of the limitations of controlled components in certain scenarios.",
            "Demonstrates practical decision-making."
          ],
          "example": "This question evaluates the candidate's understanding of the practical application and trade-offs of uncontrolled components.",
          "tags": [
            "React",
            "Forms",
            "Uncontrolled Components",
            "Use Cases",
            "Open-Ended"
          ],
          "prerequisites": [
            "Uncontrolled Components Theory",
            "Controlled Components Theory"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_implementation_4",
          "topic": "Controlled Components",
          "level": "medium",
          "type": "code",
          "question": "The following `UsernameInput` component is intended to be controlled, but it has a bug. Identify the bug and fix the code so that the input's value updates as the user types.",
          "answer": "The bug is that the `value` prop of the `input` is not connected to the `username` state. When a controlled component is defined, its `value` prop must always be tied to a state variable. The fix is to set `value={username}` on the input element.\n\n```typescript\nimport React, { useState } from 'react';\n\nfunction UsernameInput() {\n  const [username, setUsername] = useState('');\n\n  const handleChange = (event) => {\n    setUsername(event.target.value);\n  };\n\n  return (\n    <div>\n      <label htmlFor=\"username\">Username:</label>\n      <input\n        id=\"username\"\n        type=\"text\"\n        // FIX: Connect the value prop to the state variable\n        value={username}\n        onChange={handleChange}\n      />\n      <p>Current Username: {username}</p>\n    </div>\n  );\n}\n```",
          "options": [],
          "analysisPoints": [
            "Understanding that a controlled input must always have its `value` prop explicitly set by React state.",
            "Recognizing that without `value={stateVariable}`, the input becomes an uncontrolled input that React doesn't manage, even if an `onChange` handler is present.",
            "Correctly applying the `value` prop to establish the controlled component pattern."
          ],
          "keyConcepts": [
            "Controlled Components",
            "value prop",
            "onChange event",
            "React State",
            "Debugging Forms"
          ],
          "evaluationCriteria": [
            "Ability to identify a common error in controlled component implementation.",
            "Correctly apply the controlled component pattern.",
            "Debugging skills."
          ],
          "example": "```typescript\nimport React, { useState } from 'react';\n\nfunction UsernameInput() {\n  const [username, setUsername] = useState('');\n\n  const handleChange = (event) => {\n    setUsername(event.target.value);\n  };\n\n  return (\n    <div>\n      <label htmlFor=\"username\">Username:</label>\n      <input\n        id=\"username\"\n        type=\"text\"\n        // Missing value prop, this input is currently uncontrolled despite having onChange\n        onChange={handleChange}\n      />\n      <p>Current Username: {username}</p>\n    </div>\n  );\n}\n```",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Debugging",
            "Code Challenge"
          ],
          "prerequisites": [
            "Controlled Components Theory",
            "React Hooks"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_controlled_validation_5",
          "topic": "Controlled Components",
          "level": "hard",
          "type": "code",
          "question": "Implement a controlled `PasswordInput` component that meets the following requirements:\n1. It takes a `password` state and `setPassword` updater function as props.\n2. It enforces a minimum length of 6 characters.\n3. It displays an error message 'Password must be at least 6 characters.' *below* the input if the current password is less than 6 characters and the user has 'touched' (focused and then blurred) the input.\n4. The error message should disappear if the password length meets the requirement.\n\nProvide the `PasswordInput` component and demonstrate its usage within a parent component.",
          "answer": "```typescript\nimport React, { useState } from 'react';\n\ninterface PasswordInputProps {\n  password: string;\n  setPassword: (value: string) => void;\n}\n\nconst PasswordInput: React.FC<PasswordInputProps> = ({ password, setPassword }) => {\n  const [isTouched, setIsTouched] = useState(false);\n  const hasError = isTouched && password.length < 6;\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  };\n\n  const handleBlur = () => {\n    setIsTouched(true);\n  };\n\n  return (\n    <div>\n      <label htmlFor=\"password\">Password:</label>\n      <input\n        type=\"password\"\n        id=\"password\"\n        name=\"password\"\n        value={password}\n        onChange={handleChange}\n        onBlur={handleBlur} // Detect when the input is touched/blurred\n        style={{ borderColor: hasError ? 'red' : '' }}\n      />\n      {hasError && (\n        <p style={{ color: 'red', fontSize: '0.8em' }}>Password must be at least 6 characters.</p>\n      )}\n    </div>\n  );\n};\n\n// Parent component for demonstration\nfunction App() {\n  const [appPassword, setAppPassword] = useState('');\n  const [appEmail, setAppEmail] = useState('');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Form Submitted:', { appEmail, appPassword });\n    if (appPassword.length < 6) {\n      alert('Please fix password errors before submitting.');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '15px', maxWidth: '300px', margin: '20px auto', padding: '20px', border: '1px solid #ccc', borderRadius: '8px' }}>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          value={appEmail}\n          onChange={(e) => setAppEmail(e.target.value)}\n        />\n      </div>\n      <PasswordInput password={appPassword} setPassword={setAppPassword} />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\n// To render this in a typical React app:\n// ReactDOM.render(<App />, document.getElementById('root'));\n```",
          "options": [],
          "analysisPoints": [
            "Correct implementation of a controlled input using `value` and `onChange`.",
            "Managing validation state (`isTouched`, `hasError`) to control when error messages are shown (e.g., only after blur/touch, not on initial render).",
            "Conditional rendering of error messages based on validation rules and user interaction.",
            "Passing state and updater functions as props for modularity.",
            "Demonstrating proper usage within a parent component."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Form Validation",
            "Conditional Rendering",
            "State Management",
            "Event Handling (onChange, onBlur)",
            "Component Props"
          ],
          "evaluationCriteria": [
            "Ability to implement robust controlled components with validation logic.",
            "Understanding of user experience considerations for validation feedback.",
            "Proper use of state and event handlers.",
            "Component composition and reusability."
          ],
          "example": "This task requires combining state management, event handling, and conditional rendering to build a practical controlled input with validation.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Validation",
            "Code Challenge",
            "Advanced"
          ],
          "prerequisites": [
            "Controlled Components Theory",
            "React Hooks",
            "Conditional Rendering"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_uncontrolled_implementation_4",
          "topic": "Uncontrolled Components",
          "level": "medium",
          "type": "code",
          "question": "You need to create a simple `SearchForm` component where the user types a query and submits it. The search query is only needed when the form is submitted, and there's no need for real-time validation or state management. Implement this using an uncontrolled component pattern. The component should log the search query to the console upon submission.",
          "answer": "```typescript\nimport React, { useRef } from 'react';\n\nfunction SearchForm() {\n  const searchInputRef = useRef<HTMLInputElement>(null);\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault(); // Prevent default browser form submission\n    const searchQuery = searchInputRef.current ? searchInputRef.current.value : '';\n    console.log('Search Query Submitted:', searchQuery);\n    // In a real app, you'd trigger a search API call here\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', gap: '10px', maxWidth: '300px', margin: '20px auto', padding: '20px', border: '1px solid #ccc', borderRadius: '8px' }}>\n      <label htmlFor=\"search\">Search:</label>\n      <input\n        type=\"text\"\n        id=\"search\"\n        name=\"search\"\n        ref={searchInputRef} // Attach the ref to the input\n        placeholder=\"Enter search term\"\n      />\n      <button type=\"submit\">Search</button>\n    </form>\n  );\n}\n\n// To render this in a typical React app:\n// ReactDOM.render(<SearchForm />, document.getElementById('root'));\n```",
          "options": [],
          "analysisPoints": [
            "Correct use of `useRef` to create a ref object.",
            "Attaching the ref object to the `ref` prop of the input element.",
            "Accessing the input's value via `ref.current.value` inside the `handleSubmit` function.",
            "Preventing the default form submission behavior using `event.preventDefault()`.",
            "Understanding when an uncontrolled component is appropriate (simple, no real-time validation)."
          ],
          "keyConcepts": [
            "Uncontrolled Components",
            "useRef Hook",
            "Form Submission",
            "DOM Access",
            "Event Handling"
          ],
          "evaluationCriteria": [
            "Ability to implement a functional uncontrolled component.",
            "Correct application of the `useRef` hook for form inputs.",
            "Demonstrates understanding of event prevention."
          ],
          "example": "This task tests the basic implementation of an uncontrolled component, suitable for scenarios where real-time value tracking is not necessary.",
          "tags": [
            "React",
            "Forms",
            "Uncontrolled Components",
            "Code Challenge"
          ],
          "prerequisites": [
            "Uncontrolled Components Theory",
            "React Hooks"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_type_choice_open_2",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "hard",
          "type": "open",
          "question": "You are building a complex multi-step form that includes user registration, profile details, and preferences. Some steps require real-time validation and conditional rendering of fields based on previous inputs (e.g., 'other' text input appears if 'Other' is selected from a dropdown). One step also involves uploading a profile picture. Discuss your strategy for choosing between controlled and uncontrolled components for different parts of this form, justifying your choices with respect to benefits and drawbacks.",
          "answer": "For a complex multi-step form with real-time validation, conditional rendering, and inter-field dependencies, **controlled components would be the primary choice for almost all text inputs, selections, and checkboxes.**\n\n**Justification for Controlled Components:**\n- **Real-time Validation & Feedback**: User registration and profile details heavily benefit from immediate feedback on validity (e.g., email format, password strength, required fields). Controlled components allow validation logic to run `onChange`, providing a superior user experience.\n- **Conditional Rendering & Dynamic Logic**: The requirement for fields appearing based on previous inputs (like the 'other' text input) is natively supported and much easier to manage with controlled components. The state of one input directly influences the rendering logic of others.\n- **Centralized State Management**: With a multi-step form, managing the overall form data as a single, consistent state object is crucial for navigation between steps, saving progress, and final submission. Controlled components inherently support this by keeping all values in React state.\n- **Easier Debugging**: The clear data flow (UI -> Event -> State -> UI) makes it easier to trace where data comes from and how it changes.\n\n**Justification for Uncontrolled Components:**\n- **File Upload (Profile Picture)**: The `<input type=\"file\"/>` element is the canonical use case for an uncontrolled component. Due to security restrictions, its value cannot be programmatically set, making a controlled approach impossible. Using a `ref` to access the selected file at the time of submission is the only viable method.\n\n**Mixed Strategy:**\nI would primarily use controlled components for all textual inputs, number inputs, text areas, checkboxes, and radio buttons. For the profile picture upload, I would specifically use an uncontrolled component with a `useRef` hook. When the form is finally submitted, I would gather the data from the controlled state and the file(s) from the uncontrolled `ref` to form the complete payload.\n\n**Considerations:**\n- **Performance**: While large controlled forms can sometimes lead to performance concerns due to frequent re-renders, React's memoization techniques (e.g., `React.memo`, `useCallback`) can mitigate this. For a multi-step form, only the inputs on the *current* step would typically re-render frequently, making this less of a global issue.\n- **Form Libraries**: For such complexity, I would also consider using a form library like Formik or React Hook Form, which abstract away much of the boilerplate for controlled components and optimize performance, while still allowing for `ref` usage where necessary (like file inputs). These libraries often combine the best aspects of both patterns.",
          "analysisPoints": [
            "Identifying controlled components as the default for most interactive form elements due to validation and dynamic behavior needs.",
            "Recognizing file inputs as the primary and most significant use case for uncontrolled components.",
            "Explaining the 'why' behind each choice, relating it back to the benefits and drawbacks.",
            "Discussing the feasibility of a mixed approach and how data would be gathered.",
            "Considering performance implications and potential solutions (e.g., memoization, form libraries).",
            "Demonstrating a holistic understanding of form management in React."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Uncontrolled Components",
            "Form Design Patterns",
            "Validation",
            "Dynamic Forms",
            "File Uploads",
            "Performance Optimization",
            "Form Libraries",
            "Architectural Decisions"
          ],
          "evaluationCriteria": [
            "Depth of understanding of both component types.",
            "Ability to apply theoretical knowledge to a realistic, complex scenario.",
            "Strategic thinking and justification of design choices.",
            "Awareness of best practices and potential optimizations."
          ],
          "example": "This question challenges the candidate to demonstrate comprehensive knowledge of form handling in React by designing a strategy for a complex real-world application.",
          "tags": [
            "React",
            "Forms",
            "Architecture",
            "Design Patterns",
            "Controlled Components",
            "Uncontrolled Components",
            "Advanced",
            "Open-Ended"
          ],
          "prerequisites": [
            "Controlled Components Theory",
            "Uncontrolled Components Theory"
          ],
          "complexity": 9,
          "interviewFrequency": 10,
          "learningPath": "advanced"
        },
        {
          "id": "question_controlled_uncontrolled_diff_flashcard_1",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the key difference in how 'value' is managed for controlled vs. uncontrolled components?",
          "answer": "Controlled: Value is managed by React state (`value` prop). Uncontrolled: Value is managed by the DOM (`ref` to access DOM value).",
          "analysisPoints": [
            "Focus on the source of truth for the input's value."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Uncontrolled Components",
            "React State",
            "DOM",
            "Ref"
          ],
          "evaluationCriteria": [
            "Quick recall of fundamental distinction."
          ],
          "example": "A flashcard for rapid review of the core difference.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Uncontrolled Components",
            "Flashcard"
          ],
          "prerequisites": [
            "React Forms Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_controlled_uncontrolled_usecase_flashcard_2",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "easy",
          "type": "flashcard",
          "question": "Which type of component is generally preferred for real-time form validation and why?",
          "answer": "Controlled components, because their values are directly tied to React state, allowing validation logic to run immediately on `onChange`.",
          "analysisPoints": [
            "Connect real-time validation directly to the nature of controlled components."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Real-time Validation",
            "onChange"
          ],
          "evaluationCriteria": [
            "Recall of a key benefit/use case."
          ],
          "example": "Another flashcard focusing on a practical advantage.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Validation",
            "Flashcard"
          ],
          "prerequisites": [
            "Controlled Components Theory"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_comparison_benefits_1",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "medium",
          "type": "mcq",
          "question": "You are building a login form where the 'Submit' button should only be enabled when both the email and password fields are non-empty. Which component pattern is best suited for this requirement, and why?",
          "answer": "Controlled components, because their values are readily available in React state, allowing for immediate checks on input validity to enable/disable the button.",
          "options": [
            "Controlled components, because their values are readily available in React state, allowing for immediate checks on input validity to enable/disable the button.",
            "Uncontrolled components, because they offer better performance for forms with multiple inputs like login forms.",
            "Controlled components, but only if you use a third-party form library like Formik.",
            "Uncontrolled components, as `useRef` provides direct access to the button's DOM node for enabling/disabling."
          ],
          "analysisPoints": [
            "The core requirement is real-time interaction (enabling/disabling a button based on input state).",
            "Controlled components expose input values via React state as they are typed, making such real-time checks straightforward.",
            "Uncontrolled components' values are typically accessed only on submission, making real-time conditional logic much harder or impossible without introducing extra state management.",
            "Performance is less critical for a simple login form, and the benefits of controlled components outweigh potential minor performance overhead.",
            "Form libraries are built on controlled component principles to simplify this, but the underlying concept is still controlled components."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Conditional UI",
            "Form Validation",
            "React State",
            "Uncontrolled Components Limitations"
          ],
          "evaluationCriteria": [
            "Ability to choose the correct pattern based on a functional requirement.",
            "Understanding the underlying reason for the choice.",
            "Knowledge of component interactions."
          ],
          "example": "This MCQ tests the practical application of controlled components for dynamic UI behavior based on form input.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Conditional Rendering",
            "MCQ"
          ],
          "prerequisites": [
            "Controlled Components Theory"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_controlled_form_validation",
          "title": "Build a Controlled Registration Form with Basic Validation",
          "description": "\nImplement a `RegistrationForm` component using **controlled components** that includes the following fields:\n\n1.  **Username**: Text input, required.\n2.  **Email**: Email input, required, must be a valid email format.\n3.  **Password**: Password input, required, minimum 8 characters.\n4.  **Confirm Password**: Password input, required, must match the 'Password' field.\n\n**Requirements:**\n-   Each input's value must be managed by React state.\n-   Display validation error messages for each field *as the user types* (for format/length) and *after the input loses focus* (for required fields or matching passwords).\n-   The 'Register' button should only be enabled if all fields are valid.\n-   Upon successful submission (all fields valid), log the form data to the console.\n\n**Hint**: Consider using a separate state variable for `isTouched` or `isDirty` for each input to control when to show validation messages.",
          "difficulty": "medium",
          "startingCode": "import React, { useState } from 'react';\n\nfunction RegistrationForm() {\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  });\n\n  // State to track if fields have been touched/blurred\n  const [touched, setTouched] = useState({\n    username: false,\n    email: false,\n    password: false,\n    confirmPassword: false\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({ ...prevData, [name]: value }));\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name } = e.target;\n    setTouched(prevTouched => ({ ...prevTouched, [name]: true }));\n  };\n\n  // TODO: Implement validation logic here\n  const validate = () => {\n    const errors: Record<string, string> = {};\n    // Example: Username validation\n    if (!formData.username.trim()) {\n      errors.username = 'Username is required';\n    }\n    // Add more validation rules...\n    return errors;\n  };\n\n  const errors = validate();\n  const isFormValid = Object.keys(errors).length === 0;\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    // Only submit if form is valid\n    if (isFormValid) {\n      console.log('Registration Data:', formData);\n      alert('Registration Successful!');\n      // Reset form or navigate\n    } else {\n      // Mark all fields as touched to show all errors on submit attempt\n      setTouched({\n        username: true,\n        email: true,\n        password: true,\n        confirmPassword: true\n      });\n      alert('Please fix the errors in the form.');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '15px', maxWidth: '400px', margin: '40px auto', padding: '25px', border: '1px solid #ddd', borderRadius: '10px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>\n      <h2>Register</h2>\n      <div>\n        <label htmlFor=\"username\">Username:</label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          name=\"username\"\n          value={formData.username}\n          onChange={handleChange}\n          onBlur={handleBlur}\n        />\n        {(touched.username && errors.username) && <p style={{ color: 'red', fontSize: '0.8em' }}>{errors.username}</p>}\n      </div>\n      {/* TODO: Add Email, Password, Confirm Password fields with validation */}\n      \n      <button type=\"submit\" disabled={!isFormValid}>Register</button>\n    </form>\n  );\n  }\n",
          "solutionCode": "import React, { useState } from 'react';\n\nfunction RegistrationForm() {\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: ''\n  });\n\n  const [touched, setTouched] = useState({\n    username: false,\n    email: false,\n    password: false,\n    confirmPassword: false\n  });\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({ ...prevData, [name]: value }));\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const { name } = e.target;\n    setTouched(prevTouched => ({ ...prevTouched, [name]: true }));\n  };\n\n  const validate = () => {\n    const errors: Record<string, string> = {};\n\n    if (!formData.username.trim()) {\n      errors.username = 'Username is required.';\n    } else if (formData.username.length < 3) {\n      errors.username = 'Username must be at least 3 characters.';\n    }\n\n    if (!formData.email.trim()) {\n      errors.email = 'Email is required.';\n    } else if (!/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g.test(formData.email)) {\n      errors.email = 'Invalid email format.';\n    }\n\n    if (!formData.password) {\n      errors.password = 'Password is required.';\n    } else if (formData.password.length < 8) {\n      errors.password = 'Password must be at least 8 characters.';\n    }\n\n    if (!formData.confirmPassword) {\n      errors.confirmPassword = 'Confirm Password is required.';\n    } else if (formData.confirmPassword !== formData.password) {\n      errors.confirmPassword = 'Passwords do not match.';\n    }\n\n    return errors;\n  };\n\n  const errors = validate();\n  const isFormValid = Object.keys(errors).length === 0 &&\n                      Object.values(formData).every(value => value.trim() !== ''); // Ensure all fields are filled even if error obj is empty due to initial state\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Mark all fields as touched on submit attempt to show all errors\n    setTouched({\n      username: true,\n      email: true,\n      password: true,\n      confirmPassword: true\n    });\n\n    if (isFormValid) {\n      console.log('Registration Data:', formData);\n      alert('Registration Successful!');\n      setFormData({ username: '', email: '', password: '', confirmPassword: '' }); // Clear form\n      setTouched({ username: false, email: false, password: false, confirmPassword: false }); // Reset touched state\n    } else {\n      alert('Please fix the errors in the form.');\n    }\n  };\n\n  const getErrorMessage = (fieldName: keyof typeof formData) => {\n    return touched[fieldName] && errors[fieldName] ? (\n      <p style={{ color: 'red', fontSize: '0.8em', margin: '5px 0 0 0' }}>{errors[fieldName]}</p>\n    ) : null;\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '15px', maxWidth: '400px', margin: '40px auto', padding: '25px', border: '1px solid #ddd', borderRadius: '10px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>\n      <h2>Register</h2>\n      <div>\n        <label htmlFor=\"username\">Username:</label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          name=\"username\"\n          value={formData.username}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          style={{ borderColor: (touched.username && errors.username) ? 'red' : '' }}\n        />\n        {getErrorMessage('username')}\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          style={{ borderColor: (touched.email && errors.email) ? 'red' : '' }}\n        />\n        {getErrorMessage('email')}\n      </div>\n      <div>\n        <label htmlFor=\"password\">Password:</label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          name=\"password\"\n          value={formData.password}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          style={{ borderColor: (touched.password && errors.password) ? 'red' : '' }}\n        />\n        {getErrorMessage('password')}\n      </div>\n      <div>\n        <label htmlFor=\"confirmPassword\">Confirm Password:</label>\n        <input\n          type=\"password\"\n          id=\"confirmPassword\"\n          name=\"confirmPassword\"\n          value={formData.confirmPassword}\n          onChange={handleChange}\n          onBlur={handleBlur}\n          style={{ borderColor: (touched.confirmPassword && errors.confirmPassword) ? 'red' : '' }}\n        />\n        {getErrorMessage('confirmPassword')}\n      </div>\n      \n      <button type=\"submit\" disabled={!isFormValid}>Register</button>\n    </form>\n  );\n}\n",
          "testCases": [
            "Initial render: Button should be disabled, no errors shown.",
            "Typing valid username: Username input should update, no error.",
            "Typing invalid email (e.g., 'abc'): Email error should appear after blur.",
            "Typing short password: Password error should appear after blur.",
            "Typing non-matching confirm password: Confirm password error should appear after blur.",
            "Filling all fields correctly: Button should enable, no errors visible. Submission should log data.",
            "Attempting to submit with empty fields: All required field errors should appear.",
            "Clearing a valid field: Error should reappear and button disable."
          ],
          "hints": [
            "The `validate` function should return an object where keys are field names and values are error messages.",
            "Use the `touched` state to decide *when* to show an error message (e.g., `touched.username && errors.username`).",
            "The `isFormValid` check needs to consider both `Object.keys(errors).length === 0` AND ensure all fields have some content if they are required.",
            "Remember to use `onBlur` alongside `onChange` to control error display timing."
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Validation",
            "Frontend Interview",
            "State Management"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_controlled_components"
          ],
          "complexity": 8,
          "interviewRelevance": 10,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Form Validation Patterns",
            "Conditional Rendering",
            "React Hooks"
          ]
        },
        {
          "id": "task_uncontrolled_file_upload",
          "title": "Implement an Uncontrolled File Uploader",
          "description": "\nCreate a `FileUploadComponent` that allows a user to select a single file and simulate its upload upon form submission. This component **must** use the uncontrolled component pattern.\n\n**Requirements:**\n-   Use `useRef` to get access to the file input DOM element.\n-   The component should have an `<input type=\"file\"/>` and a 'Upload' button.\n-   When the 'Upload' button is clicked, prevent the default form submission.\n-   Access the selected file(s) using the `ref`.\n-   Log the name and size of the selected file to the console. If no file is selected, log an appropriate message.\n-   Do not use any React state (`useState`) to manage the file input's value.\n\n**Hint**: File input values are accessed via the `files` property of the input DOM element.",
          "difficulty": "easy",
          "startingCode": "import React, { useRef } from 'react';\n\nfunction FileUploadComponent() {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    // TODO: Access the selected file(s) using fileInputRef\n    // TODO: Log file details or 'no file selected' message\n\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '15px', maxWidth: '300px', margin: '40px auto', padding: '25px', border: '1px solid #ddd', borderRadius: '10px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>\n      <h2>Upload File</h2>\n      <div>\n        <label htmlFor=\"fileInput\">Choose file:</label>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          name=\"fileInput\"\n          ref={fileInputRef} // Attach the ref here\n        />\n      </div>\n      <button type=\"submit\">Upload</button>\n    </form>\n  );\n}\n",
          "solutionCode": "import React, { useRef } from 'react';\n\nfunction FileUploadComponent() {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (fileInputRef.current && fileInputRef.current.files && fileInputRef.current.files.length > 0) {\n      const selectedFile = fileInputRef.current.files[0];\n      console.log('File Selected:');\n      console.log('  Name:', selectedFile.name);\n      console.log('  Size:', selectedFile.size, 'bytes');\n      console.log('  Type:', selectedFile.type);\n      alert(`File '${selectedFile.name}' selected for upload.`);\n    } else {\n      console.log('No file selected.');\n      alert('Please select a file to upload.');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '15px', maxWidth: '300px', margin: '40px auto', padding: '25px', border: '1px solid #ddd', borderRadius: '10px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>\n      <h2>Upload File</h2>\n      <div>\n        <label htmlFor=\"fileInput\">Choose file:</label>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          name=\"fileInput\"\n          ref={fileInputRef}\n        />\n      </div>\n      <button type=\"submit\">Upload</button>\n    </form>\n  );\n}\n",
          "testCases": [
            "Submit without selecting a file: Should log 'No file selected.' and alert.",
            "Select a text file and submit: Should log file name, size, and type, and alert with file name.",
            "Select an image file and submit: Should log file name, size, and type, and alert with file name.",
            "Select multiple files (if input supports it, though task specifies single): Test behavior (should only get first file).",
            "Test `event.preventDefault()`: Ensure page does not reload on submission."
          ],
          "hints": [
            "The `ref.current` property will give you the actual DOM element.",
            "File inputs have a `files` property which is a `FileList` object.",
            "Remember to call `event.preventDefault()` in the `handleSubmit` function."
          ],
          "tags": [
            "React",
            "Forms",
            "Uncontrolled Components",
            "FileUpload",
            "useRef",
            "Frontend Interview"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "theory_uncontrolled_components"
          ],
          "complexity": 5,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "DOM Manipulation",
            "File API",
            "React Hooks"
          ]
        },
        {
          "id": "task_refactor_controlled_to_uncontrolled",
          "title": "Refactor a Controlled Form to Uncontrolled",
          "description": "\nGiven a simple React component that uses the **controlled component pattern** for a single text input, refactor it to use the **uncontrolled component pattern**.\n\n**Original Controlled Component:**\n```typescript\nimport React, { useState } from 'react';\n\nfunction ControlledTextInput() {\n  const [text, setText] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setText(e.target.value);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Submitted (Controlled):', text);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label htmlFor=\"myInput\">Controlled Input:</label>\n      <input\n        id=\"myInput\"\n        type=\"text\"\n        value={text}\n        onChange={handleChange}\n      />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```\n\n**Your task is to refactor `ControlledTextInput` into `UncontrolledTextInput` meeting the following requirements:**\n-   Remove `useState` for the input value.\n-   Use `useRef` to get a direct reference to the input element.\n-   Access the input's value via the `ref` during form submission.\n-   Log the value upon submission (e.g., `console.log('Submitted (Uncontrolled):', value)`).\n-   Optionally, set an initial value using `defaultValue`.",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useRef } from 'react';\n\n// Original Controlled Component (for reference, do not modify this part directly)\nfunction ControlledTextInput() {\n  const [text, setText] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setText(e.target.value);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Submitted (Controlled):', text);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label htmlFor=\"myInputControlled\">Controlled Input:</label>\n      <input\n        id=\"myInputControlled\"\n        type=\"text\"\n        value={text}\n        onChange={handleChange}\n      />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\n// TODO: Implement the UncontrolledTextInput component here\nfunction UncontrolledTextInput() {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    // TODO: Access value using ref and log it\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ marginTop: '20px' }}>\n      <label htmlFor=\"myInputUncontrolled\">Uncontrolled Input:</label>\n      <input\n        id=\"myInputUncontrolled\"\n        type=\"text\"\n        // TODO: Attach ref and set defaultValue\n      />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\n// Example usage for rendering both:\n// ReactDOM.render(\n//   <>\n//     <ControlledTextInput />\n//     <UncontrolledTextInput />\n//   </>,\n//   document.getElementById('root')\n// );\n",
          "solutionCode": "import React, { useState, useRef } from 'react';\n\n// Original Controlled Component (for reference)\nfunction ControlledTextInput() {\n  const [text, setText] = useState('');\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setText(e.target.value);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    console.log('Submitted (Controlled):', text);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label htmlFor=\"myInputControlled\">Controlled Input:</label>\n      <input\n        id=\"myInputControlled\"\n        type=\"text\"\n        value={text}\n        onChange={handleChange}\n      />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\n// Refactored UncontrolledTextInput component\nfunction UncontrolledTextInput() {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const value = inputRef.current ? inputRef.current.value : '';\n    console.log('Submitted (Uncontrolled):', value);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ marginTop: '20px' }}>\n      <label htmlFor=\"myInputUncontrolled\">Uncontrolled Input:</label>\n      <input\n        id=\"myInputUncontrolled\"\n        type=\"text\"\n        ref={inputRef} // Attach the ref here\n        defaultValue=\"Initial Uncontrolled Value\" // Optional: set an initial value\n      />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n",
          "testCases": [
            "Type text into ControlledTextInput and submit: Should log the current typed text.",
            "Type text into UncontrolledTextInput and submit: Should log the current typed text.",
            "Verify `useState` is removed from `UncontrolledTextInput`.",
            "Verify `useRef` is properly used in `UncontrolledTextInput`.",
            "Verify `value` prop is removed and `defaultValue` is used (if chosen) in `UncontrolledTextInput`."
          ],
          "hints": [
            "Remember that `useRef` returns a mutable ref object, and the actual DOM element is available via `ref.current`.",
            "For uncontrolled components, the `value` prop is typically not used. If you want to set an initial value, use `defaultValue`.",
            "You'll need to remove the `onChange` handler from the uncontrolled input, as it's not needed for value management."
          ],
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "Uncontrolled Components",
            "Refactoring",
            "useRef",
            "Frontend Interview"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_controlled_components",
            "theory_uncontrolled_components"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "React Hooks",
            "DOM Interaction"
          ]
        }
      ]
    }
  },
  {
    "id": "dd44c0ce-fc65-4f0e-ac33-66cd780b10aa",
    "startLine": 14300,
    "endLine": 14399,
    "processedDate": "2025-06-17T13:55:19.292Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_basic_react_forms_useref",
          "title": "Basic React Forms with useRef Hook",
          "content": "In React, handling forms can be approached in various ways. For simpler forms or when direct DOM manipulation is required, the `useRef` hook provides a way to access DOM elements or React components directly. This approach is often referred to as managing 'uncontrolled components' because the form data is handled by the DOM itself rather than by React state.\n\n## Key Concepts\n- **`useRef` Hook**: A React Hook that lets you reference a value that’s not needed for rendering. It can be used to hold a mutable value in its `.current` property, which persists across renders, making it ideal for direct DOM interactions, such as managing form input values.\n- **Uncontrolled Components**: Form elements whose values are handled by the DOM. You use a ref to get their current value when you need it (e.g., on form submission).\n- **`defaultValue` Prop**: Used for initial values in uncontrolled form inputs. Unlike `value` (which is used for controlled components), `defaultValue` sets the initial value, but subsequent changes are managed by the DOM.\n\n## Implementation Details\nTo use `useRef` for form inputs:\n1.  **Initialize `useRef`**: Call `const inputRef = useRef(null);` at the top level of your component.\n2.  **Attach to Input**: Pass the `ref` prop to the desired DOM element (e.g., `<input ref={inputRef} />`).\n3.  **Access Value**: On form submission, access the current value using `inputRef.current.value`.\n\nThis method is lightweight and avoids re-renders on every keystroke, which can be beneficial for very simple forms or specific use cases where you don't need real-time validation or complex state management.",
          "examples": [
            {
              "id": "example_useref_form_1",
              "title": "Basic Contact Form with useRef",
              "code": "import React, { useRef } from 'react';\n\nfunction BasicForm() {\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const messageRef = useRef(null);\n\n  const handleSubmit = (event) => {\n    event.preventDefault(); // Prevent default form submission behavior\n    const name = nameRef.current.value;\n    const email = emailRef.current.value;\n    const message = messageRef.current.value;\n    \n    console.log('Form Submitted:', {\n      name,\n      email,\n      message,\n    });\n    \n    // Optionally clear form fields after submission\n    nameRef.current.value = '';\n    emailRef.current.value = '';\n    messageRef.current.value = '';\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        <input\n          id=\"name\"\n          name=\"name\"\n          type=\"text\"\n          ref={nameRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          id=\"email\"\n          name=\"email\"\n          type=\"email\"\n          ref={emailRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"message\">Message:</label>\n        <textarea\n          id=\"message\"\n          name=\"message\"\n          ref={messageRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}",
              "explanation": "This example demonstrates a basic form where input values are managed using `useRef`. Each input element (`input`, `textarea`) is assigned a ref. On form submission, `handleSubmit` is called, which prevents the default browser behavior (`event.preventDefault()`). The current values are then accessed via `ref.current.value` and logged to the console. Finally, the fields are manually cleared.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_useref_form_purpose_1",
            "question_useref_form_comparison_mcq_2",
            "question_useref_form_clear_open_3",
            "question_useref_form_validation_mcq_4",
            "question_useref_form_refactor_code_1",
            "question_useref_form_flashcard_1",
            "question_useref_form_flashcard_2"
          ],
          "relatedTasks": [
            "task_basic_contact_form_useref"
          ],
          "tags": [
            "React",
            "Forms",
            "Hooks",
            "useRef",
            "Uncontrolled Components",
            "DOM Manipulation"
          ],
          "technology": "React",
          "prerequisites": [
            "react_functional_components",
            "react_hooks_basics",
            "html_forms_basics"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "controlled_components",
            "form_libraries_understanding"
          ]
        },
        {
          "id": "theory_formik_library",
          "title": "Form Management with Formik",
          "content": "Formik is a popular open-source library designed to simplify form handling in React applications. It addresses many common challenges associated with forms, such as managing form state, handling submission, validation, and error messages, reducing boilerplate code significantly. Formik makes it easier to build robust and scalable forms by abstracting away much of the complexity.\n\n## Key Concepts\n- **`Formik` Component**: The main wrapper component that provides context for your form. It takes `initialValues`, `validationSchema` (or `validate` prop), and an `onSubmit` handler as props.\n- **`Form` Component**: A small wrapper around an HTML `<form>` element that automatically hooks into Formik's context, making it unnecessary to manually call `handleSubmit` or `handleReset`.\n- **`Field` Component**: A wrapper for standard HTML input elements (`<input>`, `<select>`, `<textarea>`). It automatically handles value, `onChange`, `onBlur`, and `name` props, connecting the input to Formik's state.\n  - `as` prop: Allows specifying the component type (e.g., `<Field as=\"textarea\" />`).\n- **`ErrorMessage` Component**: Renders an error message for a specific field if that field has been touched and has an error. It takes a `name` prop (corresponding to the field's name) and can optionally take a `component` prop to render the error message with a specific HTML element (e.g., `div`).\n- **`Yup` for Validation**: Formik often integrates seamlessly with Yup, a JavaScript schema validation library. Yup allows you to define validation rules for your form fields in a concise and declarative way. The `validationSchema` prop of the `Formik` component accepts a Yup schema.\n- **`isSubmitting` Prop**: A boolean value passed to the render prop of `Formik` (or accessible via `useFormik` hook) that indicates whether the form is currently in the process of being submitted. Useful for disabling the submit button to prevent multiple submissions.\n\n## How Formik Simplifies Forms\nFormik centralizes form logic, handling:\n- **Getting values in and out of form state**: Automatically binds input values to Formik's internal state.\n- **Validation and error messages**: Integrates with Yup or custom validation functions to display errors.\n- **Handling form submission**: Provides a robust `onSubmit` handler with utilities like `setSubmitting`.\n- **Tracking field status**: Keeps track of whether fields have been 'touched' (visited) or are 'dirty' (modified), useful for displaying errors at the right time.",
          "examples": [
            {
              "id": "example_formik_basic_1",
              "title": "Formik Form with Yup Validation",
              "code": "import React from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\n// Validation schema using Yup\nconst validationSchema = Yup.object({\n  name: Yup.string().required('Name is required'),\n  email: Yup.string().email('Invalid email address').required('Email is required'),\n  message: Yup.string().required('Message is required')\n});\n\nfunction FormikForm() {\n  return (\n    <Formik\n      initialValues={{ name: '', email: '', message: '' }}\n      validationSchema={validationSchema}\n      onSubmit={(values, { setSubmitting, resetForm }) => {\n        setTimeout(() => {\n          console.log('Form submitted:', values);\n          setSubmitting(false); // Re-enable the submit button\n          resetForm(); // Optionally reset the form fields\n        }, 400);\n      }}\n    >\n      {({ isSubmitting }) => ( // isSubmitting is provided by Formik's render prop\n        <Form>\n          <div>\n            <label htmlFor=\"name\">Name:</label>\n            <Field type=\"text\" name=\"name\" id=\"name\" />\n            <ErrorMessage name=\"name\" component=\"div\" className=\"error\" />\n          </div>\n\n          <div>\n            <label htmlFor=\"email\">Email:</label>\n            <Field type=\"email\" name=\"email\" id=\"email\" />\n            <ErrorMessage name=\"email\" component=\"div\" className=\"error\" />\n          </div>\n\n          <div>\n            <label htmlFor=\"message\">Message:</label>\n            <Field as=\"textarea\" name=\"message\" id=\"message\" />\n            <ErrorMessage name=\"message\" component=\"div\" className=\"error\" />\n          </div>\n\n          <button type=\"submit\" disabled={isSubmitting}>\n            {isSubmitting ? 'Submitting...' : 'Submit'}\n          </button>\n        </Form>\n      )}\n    </Formik>\n  );\n}",
              "explanation": "This example showcases a Formik form with integrated Yup validation. The `Formik` component defines initial values, a validation schema, and an `onSubmit` handler. `Field` components are used for inputs, automatically binding to Formik's state. `ErrorMessage` components display validation feedback. The submit button's `disabled` state is controlled by `isSubmitting`, preventing multiple submissions during asynchronous operations. After submission, `setSubmitting(false)` re-enables the button and `resetForm()` clears the fields.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_formik_purpose_open_1",
            "question_formik_components_mcq_1",
            "question_formik_yup_mcq_3",
            "question_formik_isSubmitting_mcq_5",
            "question_formik_field_as_mcq_6",
            "question_formik_add_field_code_2",
            "question_formik_workflow_open_4",
            "question_formik_flashcard_3",
            "question_formik_flashcard_4"
          ],
          "relatedTasks": [
            "task_enhanced_formik_registration"
          ],
          "tags": [
            "React",
            "Forms",
            "Form Libraries",
            "Formik",
            "Validation",
            "Yup",
            "Controlled Components"
          ],
          "technology": "React",
          "prerequisites": [
            "react_functional_components",
            "react_props_state",
            "javascript_objects",
            "npm_package_management"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "complex_form_management",
            "frontend_application_development"
          ]
        },
        {
          "id": "theory_formik_vs_redux_form",
          "title": "Formik vs. Redux Form: A Comparative Analysis",
          "content": "When choosing a form management library for React, Formik and Redux Form are two prominent options. While both aim to simplify form handling, they differ significantly in their architecture, performance characteristics, and integration patterns, especially concerning state management.\n\n## Key Differences\n\n| Feature         | Redux Form                                | Formik                                          |\n| :-------------- | :---------------------------------------- | :---------------------------------------------- |\n| **State Storage** | Stores form state in the Redux store      | Keeps form state locally within the component   |\n| **Performance** | Calls the entire Redux reducer on every keystroke, which can impact performance in large applications | Handles state changes locally, resulting in better performance as it avoids unnecessary Redux store updates |\n| **Bundle Size** | Larger (approx. 22.5 kB minified gzipped) | Smaller (approx. 12.7 kB minified gzipped)      |\n| **Complexity**  | More complex due to deep Redux integration, requiring more boilerplate and understanding of Redux principles | Simpler API with less boilerplate, designed specifically for forms without external state management dependencies |\n| **Use Case**    | Better for applications already using Redux extensively and where form state needs to be globally accessible or integrated with other Redux-managed data. | Ideal for most React applications, especially when a lightweight, performant, and simple solution for local form state is preferred. |\n\n## Reasons to Choose Formik Over Redux Form\nFormik generally emerges as the preferred choice for most modern React applications due to several compelling reasons:\n\n1.  **Local State Management for Forms**: Form state is typically short-lived and local to a component. Storing it in a global Redux store is often unnecessary and can lead to over-engineering.\n2.  **Superior Performance**: Redux Form's pattern of dispatching actions and updating the entire Redux reducer on every keystroke (e.g., for every character typed in an input) can introduce significant input latency and performance bottlenecks in large applications with many fields or frequent updates. Formik's local state management avoids these global store updates, leading to a much smoother user experience.\n3.  **Smaller Bundle Size**: A smaller library size means faster loading times for your application, which is crucial for web performance.\n4.  **Simpler API and Less Boilerplate**: Formik's API is more intuitive and requires less setup and code to get a form working. This reduces development time and makes the code easier to read and maintain.\n\nWhile Redux Form might still be considered if an application is already heavily invested in Redux and there's a strong architectural reason to keep form state within Redux (e.g., integrating form data with other global state immediately), Formik's advantages in performance, simplicity, and bundle size make it the default recommendation for most new and existing React projects.",
          "examples": [],
          "relatedQuestions": [
            "question_formik_redux_performance_mcq_7",
            "question_formik_redux_state_mcq_8",
            "question_formik_redux_bundle_mcq_9",
            "question_formik_redux_choice_open_5",
            "question_formik_redux_tradeoffs_open_6",
            "question_formik_redux_flashcard_5",
            "question_formik_redux_flashcard_6"
          ],
          "relatedTasks": [
            "task_form_library_choice_analysis"
          ],
          "tags": [
            "React",
            "Forms",
            "Form Libraries",
            "Formik",
            "Redux Form",
            "State Management",
            "Performance Comparison",
            "Bundle Size",
            "Architecture"
          ],
          "technology": "React",
          "prerequisites": [
            "redux_basics",
            "react_forms",
            "form_libraries_understanding"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "requiredFor": [
            "frontend_architecture_decisions",
            "performance_optimization"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_useref_form_purpose_1",
          "topic": "Basic React Forms with useRef Hook",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of `useRef` when handling form inputs in React?",
          "answer": "`useRef` is used to directly access and interact with DOM elements (like input fields) in React, allowing you to get their current value without making the component re-render on every input change.",
          "options": [],
          "analysisPoints": [
            "Identifies the core function of `useRef` for DOM access.",
            "Distinguishes `useRef` from state management for re-renders.",
            "Relates `useRef` to uncontrolled components."
          ],
          "keyConcepts": [
            "useRef",
            "Uncontrolled Components",
            "DOM Access"
          ],
          "evaluationCriteria": [
            "Understanding of `useRef` fundamentals",
            "Knowledge of uncontrolled components"
          ],
          "example": "",
          "tags": [
            "React",
            "useRef",
            "Forms",
            "Hooks"
          ],
          "prerequisites": [
            "react_functional_components",
            "react_hooks_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_useref_form_comparison_mcq_2",
          "topic": "Basic React Forms with useRef Hook",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following React form implementation:\n\n```jsx\nimport React, { useRef } from 'react';\n\nfunction MyForm() {\n  const inputRef = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(inputRef.current.value);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type=\"text\" ref={inputRef} />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```\n\nWhich of the following statements is TRUE about how the `input` field's value is handled in this `MyForm` component?",
          "answer": "The input's value is managed by the DOM, and React accesses it only when needed via `inputRef.current.value`.",
          "options": [
            "The input's value is stored in React state and updates on every keystroke.",
            "The input's value is managed by the DOM, and React accesses it only when needed via `inputRef.current.value`.",
            "The input's value is directly controlled by the `defaultValue` prop, which changes dynamically.",
            "The input element is a controlled component because `useRef` is used."
          ],
          "analysisPoints": [
            "Tests understanding of `useRef`'s role in forms.",
            "Distinguishes between controlled and uncontrolled components.",
            "Clarifies that `useRef` does not manage state or cause re-renders on input changes.",
            "Highlights the nature of DOM-managed input values with `useRef`."
          ],
          "keyConcepts": [
            "useRef",
            "Uncontrolled Components",
            "DOM Management",
            "Form Handling"
          ],
          "evaluationCriteria": [
            "Ability to differentiate controlled vs. uncontrolled components",
            "Understanding of `useRef`'s behavior"
          ],
          "example": "The example demonstrates an uncontrolled component. The `inputRef` is attached to the DOM `input` element. React doesn't directly manage the `input`'s value through state; instead, the browser handles it. The value is only read when `inputRef.current.value` is accessed, typically during form submission. This contrasts with controlled components where `value` and `onChange` props are used with `useState` to keep React state synchronized with the input.",
          "tags": [
            "React",
            "useRef",
            "Forms",
            "Uncontrolled Components",
            "MCQ"
          ],
          "prerequisites": [
            "react_forms_basics",
            "react_hooks_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_useref_form_clear_open_3",
          "topic": "Basic React Forms with useRef Hook",
          "level": "medium",
          "type": "open",
          "question": "After a successful form submission using `useRef` to manage inputs, how would you programmatically clear all the input fields, and why is this approach necessary compared to using React state?",
          "answer": "To clear input fields after a successful submission when using `useRef`, you would directly access the `.current` property of each ref and set its `value` to an empty string. For example, `nameRef.current.value = '';` for a name input.\n\nThis direct DOM manipulation is necessary because `useRef` creates uncontrolled components. Unlike controlled components (where input values are bound to React state and updates to state automatically re-render the component and update the input's value), uncontrolled components' values are managed by the DOM. React doesn't re-render them based on state changes in the same way. Therefore, to change their displayed value, you must imperatively modify the DOM element's `value` property via the ref.",
          "options": [],
          "analysisPoints": [
            "Demonstrates practical application of `useRef` for form manipulation.",
            "Explains the underlying reason for direct DOM manipulation with uncontrolled components.",
            "Contrasts the behavior with controlled components and state management.",
            "Assesses understanding of component control types."
          ],
          "keyConcepts": [
            "useRef",
            "Uncontrolled Components",
            "DOM Manipulation",
            "Form Reset",
            "Controlled vs Uncontrolled"
          ],
          "evaluationCriteria": [
            "Practical problem-solving with `useRef`",
            "Conceptual understanding of controlled vs. uncontrolled components"
          ],
          "example": "```typescript\nimport React, { useRef } from 'react';\n\nfunction MyForm() {\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log('Name:', nameRef.current.value);\n    console.log('Email:', emailRef.current.value);\n\n    // Clear fields:\n    nameRef.current.value = '';\n    emailRef.current.value = '';\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>Name: <input type=\"text\" ref={nameRef} defaultValue=\"\" /></label><br/>\n      <label>Email: <input type=\"email\" ref={emailRef} defaultValue=\"\" /></label><br/>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```",
          "tags": [
            "React",
            "useRef",
            "Forms",
            "Uncontrolled Components",
            "Open-Ended"
          ],
          "prerequisites": [
            "react_hooks_basics",
            "react_forms_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_useref_form_validation_mcq_4",
          "topic": "Basic React Forms with useRef Hook",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following is a common challenge when implementing form validation using `useRef` for inputs in React?",
          "answer": "Displaying validation messages in real-time as the user types.",
          "options": [
            "Displaying validation messages in real-time as the user types.",
            "Accessing the input values on form submission.",
            "Preventing the default browser form submission.",
            "Setting initial values for the form fields."
          ],
          "analysisPoints": [
            "Highlights a limitation of `useRef` for real-time interactivity.",
            "Confirms what `useRef` handles well (submission, initial values).",
            "Reinforces the concept that `useRef` doesn't trigger re-renders."
          ],
          "keyConcepts": [
            "useRef",
            "Form Validation",
            "Real-time Updates",
            "Uncontrolled Components"
          ],
          "evaluationCriteria": [
            "Understanding of `useRef` limitations",
            "Knowledge of form validation patterns"
          ],
          "example": "When using `useRef`, React doesn't re-render the component when the input's value changes. This means if you want to validate an input and show an error message *as the user types*, you'd have to manually attach `onChange` handlers to the input, manage state for validation errors, and potentially trigger re-renders yourself. This adds complexity that libraries like Formik handle automatically by making inputs 'controlled' components.",
          "tags": [
            "React",
            "useRef",
            "Forms",
            "Validation",
            "MCQ"
          ],
          "prerequisites": [
            "react_forms_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_useref_form_refactor_code_1",
          "topic": "Basic React Forms with useRef Hook",
          "level": "medium",
          "type": "code",
          "question": "Refactor the following form component to use `useRef` instead of `useState` for managing the input value. Ensure the value is logged to the console on submit.\n\n```jsx\nimport React, { useState } from 'react';\n\nfunction ControlledForm() {\n  const [inputValue, setInputValue] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Submitted Value:', inputValue);\n    setInputValue(''); // Clear field\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Input:\n        <input\n          type=\"text\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n      </label>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Correctly replaces `useState` with `useRef`.",
            "Removes `value` and `onChange` props from `input` when using `useRef`.",
            "Accesses input value via `ref.current.value` on submission.",
            "Implements programmatic clearing of the input field."
          ],
          "keyConcepts": [
            "useRef",
            "useState",
            "Controlled vs Uncontrolled Components",
            "Form Handling"
          ],
          "evaluationCriteria": [
            "Code transformation skills",
            "Understanding of `useRef` usage",
            "Correct handling of input properties"
          ],
          "example": "",
          "tags": [
            "React",
            "useRef",
            "useState",
            "Forms",
            "Code Challenge"
          ],
          "prerequisites": [
            "react_hooks_basics",
            "react_forms_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate",
          "startingCode": "import React, { useState } from 'react';\n\nfunction ControlledForm() {\n  const [inputValue, setInputValue] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Submitted Value:', inputValue);\n    setInputValue(''); // Clear field\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Input:\n        <input\n          type=\"text\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n        />\n      </label>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n",
          "solutionCode": "import React, { useRef } from 'react';\n\nfunction UncontrolledForm() {\n  const inputRef = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Submitted Value:', inputRef.current.value);\n    inputRef.current.value = ''; // Clear field using ref\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Input:\n        <input\n          type=\"text\"\n          ref={inputRef}\n          defaultValue=\"\"\n        />\n      </label>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n"
        },
        {
          "id": "question_useref_form_flashcard_1",
          "topic": "Basic React Forms with useRef Hook",
          "level": "easy",
          "type": "flashcard",
          "question": "True or False: Using `useRef` for a form input makes it a controlled component.",
          "answer": "False. Using `useRef` makes the input an uncontrolled component, as its value is managed by the DOM, not React state.",
          "options": [],
          "analysisPoints": [
            "Tests knowledge of controlled vs. uncontrolled components.",
            "Confirms understanding of `useRef`'s role."
          ],
          "keyConcepts": [
            "useRef",
            "Controlled Components",
            "Uncontrolled Components"
          ],
          "evaluationCriteria": [
            "Accurate definition recall"
          ],
          "example": "",
          "tags": [
            "React",
            "useRef",
            "Forms",
            "Flashcard"
          ],
          "prerequisites": [
            "react_forms_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_useref_form_flashcard_2",
          "topic": "Basic React Forms with useRef Hook",
          "level": "easy",
          "type": "flashcard",
          "question": "What property of a ref is used to access the DOM element itself?",
          "answer": "The `.current` property (e.g., `myRef.current`).",
          "options": [],
          "analysisPoints": [
            "Tests basic syntax recall for `useRef`."
          ],
          "keyConcepts": [
            "useRef",
            "current property",
            "DOM Access"
          ],
          "evaluationCriteria": [
            "Syntax knowledge"
          ],
          "example": "",
          "tags": [
            "React",
            "useRef",
            "Hooks",
            "Flashcard"
          ],
          "prerequisites": [
            "react_hooks_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_formik_purpose_open_1",
          "topic": "Form Management with Formik",
          "level": "medium",
          "type": "open",
          "question": "Explain the main problems Formik aims to solve in React application development and how it addresses them.",
          "answer": "Formik aims to solve several common problems associated with building forms in React:\n\n1.  **Managing Form State**: Manually managing input values, `onChange` handlers, and `onBlur` handlers for multiple fields using `useState` can lead to a lot of repetitive boilerplate code. Formik's `Field` component abstracts this away by automatically binding to form state based on the `name` prop.\n2.  **Handling Form Submission**: Coordinating `onSubmit` logic, preventing default browser behavior, and handling `isSubmitting` states can be complex. Formik provides a central `onSubmit` prop on the `Formik` component and manages the `isSubmitting` flag automatically.\n3.  **Validation and Error Messages**: Implementing real-time or on-blur validation, displaying specific error messages for each field, and knowing when to show them (e.g., only after touch) can be cumbersome. Formik integrates seamlessly with validation libraries like Yup (`validationSchema` prop) or custom `validate` functions. Its `ErrorMessage` component simplifies error display, ensuring errors appear only when appropriate (e.g., after a field is touched and invalid).\n\nBy centralizing these concerns, Formik significantly reduces boilerplate, improves code readability, and helps developers build robust forms more efficiently.",
          "options": [],
          "analysisPoints": [
            "Identifies key pain points in React forms (state, submission, validation).",
            "Explains how Formik's features (Field, onSubmit, ErrorMessage, validationSchema) address these problems.",
            "Demonstrates understanding of Formik's value proposition.",
            "Uses correct terminology."
          ],
          "keyConcepts": [
            "Formik",
            "Form State Management",
            "Form Validation",
            "Boilerplate Reduction",
            "Form Submission"
          ],
          "evaluationCriteria": [
            "Comprehensive explanation of Formik's purpose",
            "Ability to link features to problems solved"
          ],
          "example": "",
          "tags": [
            "React",
            "Formik",
            "Forms",
            "Open-Ended"
          ],
          "prerequisites": [
            "react_forms_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_components_mcq_1",
          "topic": "Form Management with Formik",
          "level": "easy",
          "type": "mcq",
          "question": "Which Formik component is responsible for automatically connecting an HTML input element to Formik's state and handling `value`, `onChange`, and `onBlur`?",
          "answer": "`Field`",
          "options": [
            "`Formik`",
            "`Form`",
            "`Field`",
            "`ErrorMessage`"
          ],
          "analysisPoints": [
            "Tests knowledge of core Formik component responsibilities.",
            "Distinguishes `Field` from other wrapper components."
          ],
          "keyConcepts": [
            "Formik Components",
            "Field Component",
            "Controlled Inputs"
          ],
          "evaluationCriteria": [
            "Recall of Formik API",
            "Understanding of component roles"
          ],
          "example": "The `Field` component is a higher-order component that renders a standard HTML input (or other form element) and automatically wires it up to Formik's internal state. This means you don't need to manually set `value={formik.values.myField}` or `onChange={formik.handleChange}`.",
          "tags": [
            "React",
            "Formik",
            "Forms",
            "MCQ"
          ],
          "prerequisites": [
            "formik_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_yup_mcq_3",
          "topic": "Form Management with Formik",
          "level": "medium",
          "type": "mcq",
          "question": "You are using Formik for a registration form. You need to ensure the `password` field is required, has a minimum length of 8 characters, and includes at least one uppercase letter, one lowercase letter, and one number. Which of the following `Yup` schemas correctly defines this validation?\n\n```typescript\nimport * as Yup from 'yup';\n\nconst schema = Yup.object({\n  password: Yup.string()\n    // ...validation rules here\n});\n```",
          "answer": "```typescript\npassword: Yup.string()\n  .required('Password is required')\n  .min(8, 'Password must be at least 8 characters')\n  .matches(/[A-Z]/, 'Password must contain at least one uppercase letter')\n  .matches(/[a-z]/, 'Password must contain at least one lowercase letter')\n  .matches(/\\d/, 'Password must contain at least one number')\n```",
          "options": [
            "```typescript\npassword: Yup.string().required().min(8).regex(/[A-Z]/).regex(/[a-z]/).regex(/\\d/)\n```",
            "```typescript\npassword: Yup.string()\n  .required('Password is required')\n  .min(8, 'Password must be at least 8 characters')\n  .matches(/[A-Z]/, 'Password must contain at least one uppercase letter')\n  .matches(/[a-z]/, 'Password must contain at least one lowercase letter')\n  .matches(/\\d/, 'Password must contain at least one number')\n```",
            "```typescript\npassword: Yup.string()\n  .required('Required')\n  .length(8, 'Min length 8')\n  .pattern(/[A-Za-z0-9]/)\n```",
            "```typescript\npassword: Yup.string()\n  .required()\n  .atLeast(8)\n  .containsUppercase()\n  .containsLowercase()\n  .containsNumber()\n```"
          ],
          "analysisPoints": [
            "Tests knowledge of common Yup validation methods (`required`, `min`, `matches`).",
            "Assesses understanding of regular expressions for password complexity.",
            "Checks for correct syntax and chaining of Yup methods.",
            "Ensures correct error messages are associated."
          ],
          "keyConcepts": [
            "Formik Validation",
            "Yup",
            "Schema Validation",
            "Regular Expressions"
          ],
          "evaluationCriteria": [
            "Accuracy of Yup schema definition",
            "Correct use of `matches` for regex",
            "Clarity of error messages"
          ],
          "example": "The correct option uses `required()` for mandatory, `min(8, ...)` for minimum length, and `matches()` with specific regular expressions to enforce the presence of uppercase, lowercase, and numeric characters. Each rule is chained, and custom error messages are provided for better user feedback.",
          "tags": [
            "Formik",
            "Yup",
            "Validation",
            "MCQ",
            "Code"
          ],
          "prerequisites": [
            "javascript_regex",
            "formik_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_isSubmitting_mcq_5",
          "topic": "Form Management with Formik",
          "level": "medium",
          "type": "mcq",
          "question": "In Formik, what is the primary purpose of the `isSubmitting` boolean prop passed to the render function or accessible via `useFormik`?",
          "answer": "To indicate whether the form's `onSubmit` handler is currently executing.",
          "options": [
            "To indicate if the form has any validation errors.",
            "To check if any form field has been touched by the user.",
            "To indicate whether the form's `onSubmit` handler is currently executing.",
            "To determine if the form's `initialValues` have changed."
          ],
          "analysisPoints": [
            "Tests understanding of `isSubmitting`'s specific role.",
            "Distinguishes it from validation or dirty state.",
            "Relates it to preventing multiple submissions."
          ],
          "keyConcepts": [
            "Formik",
            "Form Submission",
            "isSubmitting",
            "UI/UX"
          ],
          "evaluationCriteria": [
            "Accurate definition of `isSubmitting`",
            "Knowledge of form submission flow"
          ],
          "example": "The `isSubmitting` prop is true from the moment `onSubmit` is called until `setSubmitting(false)` is invoked within the `onSubmit` handler. It's commonly used to disable the submit button and show a loading indicator, preventing users from submitting the form multiple times while an asynchronous operation (like an API call) is in progress.\n\n```jsx\n// ... inside Formik render prop\n{({ isSubmitting }) => (\n  <Form>\n    {/* ... fields */}\n    <button type=\"submit\" disabled={isSubmitting}>\n      {isSubmitting ? 'Sending...' : 'Submit'}\n    </button>\n  </Form>\n)}\n```",
          "tags": [
            "Formik",
            "Forms",
            "State Management",
            "MCQ"
          ],
          "prerequisites": [
            "formik_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_field_as_mcq_6",
          "topic": "Form Management with Formik",
          "level": "medium",
          "type": "mcq",
          "question": "When using Formik's `Field` component, what is the purpose of the `as` prop?",
          "answer": "To specify which HTML element or React component the `Field` should render.",
          "options": [
            "To define the HTML `id` attribute for the input.",
            "To specify which HTML element or React component the `Field` should render.",
            "To provide an initial value for the field.",
            "To define the validation schema for that specific field."
          ],
          "analysisPoints": [
            "Tests understanding of `Field` component's versatility.",
            "Clarifies its role in rendering different input types (e.g., `textarea`, `select`)."
          ],
          "keyConcepts": [
            "Formik",
            "Field Component",
            "HTML Elements",
            "Custom Components"
          ],
          "evaluationCriteria": [
            "Knowledge of `Field` component props",
            "Understanding of component rendering"
          ],
          "example": "The `as` prop allows you to render `Field` as something other than a default `<input type='text'>`. For example, `<Field as=\"textarea\" name=\"message\" />` will render a `<textarea>` element, and `<Field as=\"select\" name=\"country\" />` will render a `<select>` element. You can also pass a custom React component to `as`.",
          "tags": [
            "Formik",
            "Forms",
            "Components",
            "MCQ"
          ],
          "prerequisites": [
            "formik_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_add_field_code_2",
          "topic": "Form Management with Formik",
          "level": "medium",
          "type": "code",
          "question": "Extend the given Formik form to include a new `age` field. The `age` field should be required and must be a number greater than or equal to 18. Display its error message if validation fails.\n\n```jsx\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst validationSchema = Yup.object({\n  name: Yup.string().required('Required'),\n});\n\nfunction MyFormikForm() {\n  return (\n    <Formik\n      initialValues={{ name: '' }}\n      validationSchema={validationSchema}\n      onSubmit={(values) => {\n        console.log(values);\n      }}\n    >\n      {() => (\n        <Form>\n          <div>\n            <label htmlFor=\"name\">Name:</label>\n            <Field type=\"text\" name=\"name\" />\n            <ErrorMessage name=\"name\" component=\"div\" className=\"error\" />\n          </div>\n          <button type=\"submit\">Submit</button>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n```",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Correctly adds a new field to `initialValues`.",
            "Extends `validationSchema` with `number()` and `min()` for age validation.",
            "Adds a new `Field` and `ErrorMessage` component to the JSX.",
            "Ensures correct error messages for `age`."
          ],
          "keyConcepts": [
            "Formik",
            "Yup",
            "Form Fields",
            "Validation",
            "Code Extension"
          ],
          "evaluationCriteria": [
            "Ability to modify existing Formik setup",
            "Correct Yup number validation",
            "Proper integration of new field in JSX"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Yup",
            "Forms",
            "Code Challenge"
          ],
          "prerequisites": [
            "formik_basics",
            "yup_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate",
          "startingCode": "import { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst validationSchema = Yup.object({\n  name: Yup.string().required('Required'),\n});\n\nfunction MyFormikForm() {\n  return (\n    <Formik\n      initialValues={{ name: '' }}\n      validationSchema={validationSchema}\n      onSubmit={(values) => {\n        console.log(values);\n      }}\n    >\n      {() => (\n        <Form>\n          <div>\n            <label htmlFor=\"name\">Name:</label>\n            <Field type=\"text\" name=\"name\" />\n            <ErrorMessage name=\"name\" component=\"div\" className=\"error\" />\n          </div>\n          <button type=\"submit\">Submit</button>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n",
          "solutionCode": "import { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst validationSchema = Yup.object({\n  name: Yup.string().required('Name is required'),\n  age: Yup.number()\n    .required('Age is required')\n    .min(18, 'Must be at least 18 years old')\n    .integer('Age must be an integer')\n    .typeError('Age must be a number'), // Handle non-numeric input\n});\n\nfunction MyFormikForm() {\n  return (\n    <Formik\n      initialValues={{ name: '', age: '' }} // Add 'age' to initialValues\n      validationSchema={validationSchema}\n      onSubmit={(values) => {\n        console.log('Form submitted:', values);\n      }}\n    >\n      {() => (\n        <Form>\n          <div>\n            <label htmlFor=\"name\">Name:</label>\n            <Field type=\"text\" name=\"name\" id=\"name\" />\n            <ErrorMessage name=\"name\" component=\"div\" className=\"error\" />\n          </div>\n\n          <div>\n            <label htmlFor=\"age\">Age:</label>\n            <Field type=\"number\" name=\"age\" id=\"age\" /> {/* Use type=\"number\" */}\n            <ErrorMessage name=\"age\" component=\"div\" className=\"error\" />\n          </div>\n\n          <button type=\"submit\">Submit</button>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n"
        },
        {
          "id": "question_formik_workflow_open_4",
          "topic": "Form Management with Formik",
          "level": "hard",
          "type": "open",
          "question": "Describe the typical workflow of a form built with Formik, from user interaction (typing in a field) to successful submission, highlighting how Formik handles validation and state changes throughout the process.",
          "answer": "The typical workflow of a Formik form is as follows:\n\n1.  **Initialization**: When the component mounts, Formik initializes its internal state with `initialValues` and sets up the validation schema provided by `validationSchema` (or `validate` function). All fields are initially considered untouched and not dirty.\n2.  **User Interaction (Typing)**:\n    *   When a user types in a `Field` component, Formik's internal `handleChange` (automatically bound by `Field`) updates the corresponding field's value in Formik's state.\n    *   Formik then re-runs validation based on its configured strategy (e.g., on change, on blur, on submit). If `validationSchema` is provided, Yup will validate the updated field (and potentially other related fields).\n    *   If there are validation errors, Formik updates its internal `errors` object. It also marks the field as 'dirty' (value changed) and 'touched' (user interacted).\n3.  **Displaying Errors**: `ErrorMessage` components listen for changes in the `errors` and `touched` objects. An `ErrorMessage` for a field (`name`) will only display its content if `errors[name]` exists AND `touched[name]` is `true`, preventing errors from showing before the user has interacted with the field.\n4.  **User Interaction (Blurring)**:\n    *   When a user leaves a `Field`, Formik's internal `handleBlur` (automatically bound by `Field`) marks the field as `touched`.\n    *   Validation may be re-triggered on blur, similar to `onChange`, leading to error messages appearing if the field is invalid.\n5.  **Submission Attempt**: When the user clicks the submit button (within a `Form` component or explicitly calling `handleSubmit()`):\n    *   Formik first runs a full form validation against all fields.\n    *   If there are any errors, `onSubmit` is *not* called. Instead, Formik updates its `errors` object and marks all fields as `touched` (so all applicable error messages appear).\n    *   If the form is valid (no errors), Formik sets `isSubmitting` to `true` and then calls the `onSubmit` handler provided to the `Formik` component.\n6.  **`onSubmit` Execution**: Inside the `onSubmit` handler, you typically perform side effects like sending data to an API. This function receives `values` (the current form data) and a `formikBag` object (containing utilities like `setSubmitting`, `resetForm`, etc.).\n7.  **Post-Submission**: After your asynchronous `onSubmit` logic completes (e.g., an API call returns), you typically call `setSubmitting(false)` from the `formikBag` to re-enable the submit button. You might also call `resetForm()` to clear the form fields for another submission.",
          "options": [],
          "analysisPoints": [
            "Provides a step-by-step breakdown of the form lifecycle.",
            "Details how Formik manages state, validation, and error display throughout.",
            "Explains the role of `isSubmitting`, `touched`, `dirty`, `errors` objects.",
            "Demonstrates a deep understanding of Formik's internal mechanisms."
          ],
          "keyConcepts": [
            "Formik Workflow",
            "Form State",
            "Validation Lifecycle",
            "Yup Integration",
            "Form Submission Flow",
            "Touched/Dirty State"
          ],
          "evaluationCriteria": [
            "Comprehensive and accurate description",
            "Logical flow of events",
            "Correct use of Formik terminology"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Forms",
            "Workflow",
            "Validation",
            "State Management",
            "Open-Ended"
          ],
          "prerequisites": [
            "formik_basics",
            "yup_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_formik_flashcard_3",
          "topic": "Form Management with Formik",
          "level": "easy",
          "type": "flashcard",
          "question": "What validation library is commonly used with Formik?",
          "answer": "Yup",
          "options": [],
          "analysisPoints": [
            "Tests recall of common Formik ecosystem tools."
          ],
          "keyConcepts": [
            "Formik",
            "Validation",
            "Yup"
          ],
          "evaluationCriteria": [
            "Direct recall"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Validation",
            "Yup",
            "Flashcard"
          ],
          "prerequisites": [
            "formik_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_formik_flashcard_4",
          "topic": "Form Management with Formik",
          "level": "easy",
          "type": "flashcard",
          "question": "Which prop of the `Formik` component defines the initial values for the form fields?",
          "answer": "`initialValues`",
          "options": [],
          "analysisPoints": [
            "Tests recall of basic Formik component props."
          ],
          "keyConcepts": [
            "Formik",
            "initialValues",
            "Form State"
          ],
          "evaluationCriteria": [
            "Direct recall"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Forms",
            "Flashcard"
          ],
          "prerequisites": [
            "formik_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_formik_redux_performance_mcq_7",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "medium",
          "type": "mcq",
          "question": "Regarding performance in large applications with many form fields, which of the following statements accurately describes the difference between Formik and Redux Form?",
          "answer": "Formik generally offers better performance because it handles form state locally within the component, avoiding global Redux store updates on every keystroke.",
          "options": [
            "Redux Form performs better as it leverages the optimized Redux store for state changes.",
            "Formik generally offers better performance because it handles form state locally within the component, avoiding global Redux store updates on every keystroke.",
            "Both libraries have similar performance profiles, as they both use React's reconciliation process efficiently.",
            "Performance heavily depends on the validation library used, not the form library itself."
          ],
          "analysisPoints": [
            "Correctly identifies the performance advantage of Formik.",
            "Explains the underlying reason: local vs. global state management.",
            "Highlights the impact of Redux Form's architecture (calling reducer on every keystroke).",
            "Refutes common misconceptions about performance."
          ],
          "keyConcepts": [
            "Formik",
            "Redux Form",
            "Performance",
            "State Management",
            "Redux"
          ],
          "evaluationCriteria": [
            "Understanding of architectural trade-offs",
            "Knowledge of performance implications"
          ],
          "example": "Redux Form, by design, stores form state in the Redux store. This means every input change triggers a Redux action dispatch, which then updates the Redux store, causing the entire Redux reducer tree to be re-evaluated. For large applications with many active forms or frequent input, this can lead to noticeable input latency and performance degradation. Formik, conversely, keeps its form state within the component's local state, avoiding these global Redux updates and resulting in smoother, faster interactions.",
          "tags": [
            "Formik",
            "Redux Form",
            "Performance",
            "State Management",
            "MCQ"
          ],
          "prerequisites": [
            "redux_basics",
            "react_forms"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_formik_redux_state_mcq_8",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "easy",
          "type": "mcq",
          "question": "Where does Formik primarily store its form state?",
          "answer": "Locally within the component where it's used.",
          "options": [
            "In the Redux store.",
            "In the browser's local storage.",
            "Locally within the component where it's used.",
            "In a global context API provider."
          ],
          "analysisPoints": [
            "Tests fundamental knowledge of Formik's state management approach.",
            "Distinguishes it from Redux Form's approach."
          ],
          "keyConcepts": [
            "Formik",
            "State Storage",
            "Local State",
            "Redux Form"
          ],
          "evaluationCriteria": [
            "Recall of state management strategy"
          ],
          "example": "Formik manages form state internally using React's own state mechanisms (like `useState` or a reducer pattern internally) within the `Formik` component, rather than dispatching actions to a global store like Redux. This keeps form data encapsulated and prevents unnecessary global re-renders.",
          "tags": [
            "Formik",
            "State Management",
            "Forms",
            "MCQ"
          ],
          "prerequisites": [
            "formik_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_redux_bundle_mcq_9",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "easy",
          "type": "mcq",
          "question": "Which form library, Formik or Redux Form, typically has a smaller bundle size, and why is this a relevant consideration?",
          "answer": "Formik has a smaller bundle size because it has a simpler API and fewer dependencies, making the application load faster.",
          "options": [
            "Redux Form has a smaller bundle size because it relies on Redux's core libraries.",
            "Formik has a smaller bundle size because it has a simpler API and fewer dependencies, making the application load faster.",
            "Both libraries have negligible bundle size differences, so it's not a relevant consideration.",
            "Bundle size is only relevant for server-side rendering, not client-side applications."
          ],
          "analysisPoints": [
            "Correctly identifies Formik's smaller bundle size.",
            "Explains why bundle size is important (loading speed).",
            "Compares the complexity/dependencies of the two libraries."
          ],
          "keyConcepts": [
            "Formik",
            "Redux Form",
            "Bundle Size",
            "Performance Optimization",
            "Web Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of library characteristics",
            "Understanding of web performance factors"
          ],
          "example": "Formik's minified gzipped size is approximately 12.7 kB, while Redux Form is around 22.5 kB. A smaller bundle size means less data needs to be downloaded by the user's browser, leading to faster initial page loads and better user experience, especially on slower networks or mobile devices.",
          "tags": [
            "Formik",
            "Redux Form",
            "Bundle Size",
            "Performance",
            "MCQ"
          ],
          "prerequisites": [
            "web_performance_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_redux_choice_open_5",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "hard",
          "type": "open",
          "question": "You are leading the development of a new React application. The team is deciding between Formik and Redux Form for handling forms. The application is a single-page application (SPA) with moderate complexity, and state management for core application data is being handled by a custom Context API implementation, NOT Redux. Which library would you recommend and why, focusing on the trade-offs?",
          "answer": "In this scenario, I would strongly recommend **Formik**.\n\n**Reasons for Formik:**\n1.  **Alignment with Existing State Management**: The application uses a custom Context API, not Redux. Formik's design philosophy aligns better here as it manages form state locally within components, avoiding the overhead and integration complexity of introducing Redux just for forms.\n2.  **Performance**: Formik handles state changes locally, meaning form updates (like keystrokes) do not trigger global state updates or reducer calls. This leads to superior performance, especially for forms with many fields or high interaction frequency, as it avoids unnecessary re-renders associated with a global store.\n3.  **Simplicity and Bundle Size**: Formik has a simpler API and significantly less boilerplate compared to Redux Form. Its smaller bundle size (approx. 12.7 kB gzipped) contributes to faster application loading times. This simplicity translates to quicker development, easier maintenance, and a gentler learning curve for new team members.\n4.  **Purpose-Built**: Formik is purpose-built for form logic, providing abstractions for validation, submission, and error display without dictating a specific global state management solution.\n\n**Why NOT Redux Form:**\n1.  **Unnecessary Redux Dependency**: Introducing Redux Form would mean bringing in Redux and its ecosystem (actions, reducers, store configuration) purely for forms, even though the application already uses Context API for global state. This adds significant complexity and a larger bundle size without leveraging an existing Redux setup.\n2.  **Performance Overhead**: As discussed, Redux Form updates the Redux store on every keystroke, which can lead to performance issues in large forms or frequently used forms due to global reducer calls, even if the main application state is not in Redux.\n3.  **Increased Boilerplate**: Redux Form requires more boilerplate code to set up forms due to its Redux integration, making the codebase more verbose for what is often a local concern.\n\n**Trade-offs Considered:**\n*   **Formik**: The main 'trade-off' is that if, in the future, there's a strong *architectural* need to expose form data globally *during* the filling process (which is rare for typical forms), it would require manually lifting state or using Context API for that specific data. However, for most form-related data, it's submitted once, and then the final data is processed, not the intermediate state.\n*   **Redux Form**: The trade-off is sacrificing simplicity, performance, and bundle size for a tight integration with Redux, which is not present in this application's current architecture. The benefits of Redux Form are mainly realized when Redux is *already* the primary state management solution and forms need to deeply interact with that global state in real-time before submission.\n\n**Conclusion:** Given the existing Context API usage and the general advantages of Formik (performance, simplicity, smaller size), it is the superior choice for this new application.",
          "options": [],
          "analysisPoints": [
            "Recommends Formik with strong, justified arguments.",
            "Compares both libraries based on state management, performance, bundle size, and complexity.",
            "Specifically addresses the context of a Context API-based application.",
            "Demonstrates critical thinking about architectural choices and trade-offs.",
            "Explains why Redux Form would be a poor fit in this specific scenario."
          ],
          "keyConcepts": [
            "Formik",
            "Redux Form",
            "Architectural Decisions",
            "State Management",
            "Performance",
            "Bundle Size",
            "Context API"
          ],
          "evaluationCriteria": [
            "Sound reasoning and justification",
            "Comprehensive comparison",
            "Ability to apply knowledge to a scenario"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Redux Form",
            "Architecture",
            "Decision Making",
            "Open-Ended"
          ],
          "prerequisites": [
            "redux_basics",
            "formik_basics",
            "react_context_api"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "expert"
        },
        {
          "id": "question_formik_redux_tradeoffs_open_6",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "hard",
          "type": "open",
          "question": "While Formik is generally preferred, describe a specific scenario or set of requirements where Redux Form might still be a more justifiable choice over Formik.",
          "answer": "While Formik excels in most scenarios due to its performance, simplicity, and smaller footprint, Redux Form might be a more justifiable choice in specific situations:\n\n1.  **Existing, Deeply Integrated Redux Ecosystem**: If the application is already heavily invested in Redux for global state management, and there's a strong architectural requirement to integrate form state directly into the Redux store (e.g., to share form values across different, disconnected parts of the application *before submission*, or to persist form state globally on navigation).\n2.  **Server-Side Rendering (SSR) with Hydration of Form State**: In complex SSR applications where initial form values might be pre-filled from the server and the intermediate form state needs to be serialized/deserialized efficiently as part of the overall Redux state hydration process.\n3.  **Complex Cross-Form / Cross-Component State Dependencies**: If the logic dictates that the form's intermediate values need to influence or be influenced by other non-form-related global application state *in real-time*, and this interaction is naturally handled through Redux's centralized store and selectors. For example, if a selection in one form field needs to immediately update a dashboard component elsewhere on the page, and that dashboard component already consumes data from Redux.\n4.  **Team Familiarity/Expertise**: If the development team has deep, established expertise and a strong preference for Redux Form, and the overheads (bundle size, performance for simple forms) are deemed acceptable given the team's efficiency and existing tooling around Redux. (This is less an architectural advantage and more a pragmatic, short-term project consideration).\n\nIn essence, Redux Form's primary strength lies in its tight integration with Redux. If an application's existing architecture and complex real-time global state needs genuinely benefit from forms being part of the global Redux state tree, then Redux Form could be considered. However, even in these cases, developers often find ways to manage form state locally with Formik and only dispatch the final form values to Redux upon successful submission, thus avoiding the performance penalties of Redux Form.",
          "options": [],
          "analysisPoints": [
            "Identifies specific, nuanced scenarios where Redux Form's strengths might apply.",
            "Focuses on Redux integration and global state needs.",
            "Acknowledges the general preference for Formik while providing counter-examples.",
            "Demonstrates an advanced understanding of state management patterns."
          ],
          "keyConcepts": [
            "Redux Form",
            "Formik",
            "Redux Integration",
            "Global State Management",
            "SSR",
            "Architectural Patterns"
          ],
          "evaluationCriteria": [
            "Ability to identify niche use cases",
            "Deep understanding of Redux architecture",
            "Balanced perspective on library choice"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Redux Form",
            "Architecture",
            "Decision Making",
            "Open-Ended"
          ],
          "prerequisites": [
            "redux_advanced",
            "form_libraries_comparison"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "expert"
        },
        {
          "id": "question_formik_redux_flashcard_5",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "easy",
          "type": "flashcard",
          "question": "Which form library, Formik or Redux Form, typically causes more re-renders by calling the entire Redux reducer on every keystroke?",
          "answer": "Redux Form",
          "options": [],
          "analysisPoints": [
            "Tests recall of performance characteristics."
          ],
          "keyConcepts": [
            "Formik",
            "Redux Form",
            "Performance",
            "Re-renders"
          ],
          "evaluationCriteria": [
            "Direct recall of comparative performance"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Redux Form",
            "Performance",
            "Flashcard"
          ],
          "prerequisites": [
            "redux_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_formik_redux_flashcard_6",
          "topic": "Formik vs. Redux Form Comparison",
          "level": "easy",
          "type": "flashcard",
          "question": "True or False: Formik is generally recommended for applications already using Redux extensively.",
          "answer": "False. Formik is generally recommended for most React applications because it manages state locally and has better performance/smaller bundle size. Redux Form is only potentially preferred if an application is *already* using Redux extensively AND requires forms to be deeply integrated into the Redux store for global state management.",
          "options": [],
          "analysisPoints": [
            "Tests understanding of use cases and recommendations.",
            "Clarifies the nuances of library choice based on existing architecture."
          ],
          "keyConcepts": [
            "Formik",
            "Redux Form",
            "Use Cases",
            "Redux Integration"
          ],
          "evaluationCriteria": [
            "Accurate understanding of library suitability"
          ],
          "example": "",
          "tags": [
            "Formik",
            "Redux Form",
            "Use Cases",
            "Flashcard"
          ],
          "prerequisites": [
            "redux_basics",
            "form_libraries_comparison"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_basic_contact_form_useref",
          "title": "Build a Basic Contact Form with useRef",
          "description": "\nImplement a simple contact form in React using the `useRef` hook to manage input values. The form should include fields for 'Name', 'Email', and 'Message'. On submission, log the current values of these fields to the console and then clear the input fields.\n\n**Requirements:**\n1.  Create a React functional component `ContactFormRef`.\n2.  Render three input fields: a text input for Name, an email input for Email, and a textarea for Message.\n3.  Use `useRef` to create a separate ref for each input field.\n4.  Attach the respective refs to their corresponding input elements using the `ref` prop.\n5.  Implement a `handleSubmit` function that:\n    *   Prevents the default form submission behavior.\n    *   Accesses the current value of each input using its ref (e.g., `nameRef.current.value`).\n    *   Logs an object containing all three values to the console.\n    *   Clears each input field by setting its `current.value` to an empty string.\n6.  Ensure the submit button's type is `\"submit\"`.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useRef } from 'react';\n\nfunction ContactFormRef() {\n  // TODO: Create refs here\n\n  const handleSubmit = (event) => {\n    // TODO: Implement submission logic\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        {/* TODO: Add input for name with ref */}\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        {/* TODO: Add input for email with ref */}\n      </div>\n      <div>\n        <label htmlFor=\"message\">Message:</label>\n        {/* TODO: Add textarea for message with ref */}\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\nexport default ContactFormRef;\n",
          "solutionCode": "import React, { useRef } from 'react';\n\nfunction ContactFormRef() {\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const messageRef = useRef(null);\n\n  const handleSubmit = (event) => {\n    event.preventDefault(); // Prevent default form submission\n\n    const name = nameRef.current.value;\n    const email = emailRef.current.value;\n    const message = messageRef.current.value;\n\n    console.log('Form Submitted:', {\n      name,\n      email,\n      message,\n    });\n\n    // Clear input fields\n    nameRef.current.value = '';\n    emailRef.current.value = '';\n    messageRef.current.value = '';\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        <input\n          id=\"name\"\n          name=\"name\"\n          type=\"text\"\n          ref={nameRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          id=\"email\"\n          name=\"email\"\n          type=\"email\"\n          ref={emailRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <div>\n        <label htmlFor=\"message\">Message:</label>\n        <textarea\n          id=\"message\"\n          name=\"message\"\n          ref={messageRef}\n          defaultValue=\"\"\n        />\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\nexport default ContactFormRef;\n",
          "testCases": [
            "**Test Case 1: Valid Submission**\n\n**Input:**\n- Name: \"John Doe\"\n- Email: \"john.doe@example.com\"\n- Message: \"Hello, this is a test message.\"\n\n**Expected Output (console.log):**\n```\nForm Submitted: { name: \"John Doe\", email: \"john.doe@example.com\", message: \"Hello, this is a test message.\" }\n```\n\n**Post-submission State:**\n- Name input field should be empty.\n- Email input field should be empty.\n- Message textarea should be empty.\n\n**Test Case 2: Empty Submission**\n\n**Input:**\n- All fields left empty.\n\n**Expected Output (console.log):**\n```\nForm Submitted: { name: \"\", email: \"\", message: \"\" }\n```\n\n**Post-submission State:**\n- All input fields should remain empty.",
            "**Test Case 3: Submission with Partial Data**\n\n**Input:**\n- Name: \"Jane Smith\"\n- Email: \"\"\n- Message: \"Partial data test.\"\n\n**Expected Output (console.log):**\n```\nForm Submitted: { name: \"Jane Smith\", email: \"\", message: \"Partial data test.\" }\n```\n\n**Post-submission State:**\n- Name input field should be empty.\n- Email input field should be empty.\n- Message textarea should be empty."
          ],
          "hints": [
            "Remember to call `event.preventDefault()` in your `handleSubmit` function.",
            "To clear the input fields, directly modify the `value` property of the `current` DOM element, e.g., `myRef.current.value = '';`",
            "Consider using `defaultValue=\"\"` for your inputs for consistency, though it's not strictly necessary for clearing."
          ],
          "tags": [
            "React",
            "Forms",
            "useRef",
            "Uncontrolled Components",
            "DOM Manipulation"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "react_functional_components",
            "react_hooks_basics",
            "html_forms_basics"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "theory_basic_react_forms_useref"
          ]
        },
        {
          "id": "task_enhanced_formik_registration",
          "title": "Implement an Enhanced Formik Registration Form with Yup Validation",
          "description": "\nBuild a user registration form using Formik and Yup for robust validation. The form should include a username, password, and confirm password fields with specific validation rules. Display error messages and disable the submit button appropriately.\n\n**Requirements:**\n1.  Create a React functional component `RegistrationFormFormik`.\n2.  Set up `Formik` with the following `initialValues`:\n    *   `username: ''`\n    *   `password: ''`\n    *   `confirmPassword: ''`\n3.  Define a `validationSchema` using `Yup.object()` with the following rules:\n    *   **Username**: Required, minimum 4 characters.\n    *   **Password**: Required, minimum 6 characters, must contain at least one uppercase letter, one lowercase letter, and one number.\n    *   **Confirm Password**: Required, must match the `password` field.\n4.  Render the form using Formik's `Form`, `Field`, and `ErrorMessage` components.\n5.  For each field, display its `ErrorMessage` when validation fails and the field has been touched.\n6.  In the `onSubmit` handler, simulate an asynchronous submission (e.g., with `setTimeout`) and log the form values. Ensure `setSubmitting(false)` is called after the async operation.\n7.  Disable the submit button while `isSubmitting` is true or if the form is invalid (using `isValid` and `dirty` or `isSubmitting`).\n",
          "difficulty": "hard",
          "startingCode": "import React from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst validationSchema = Yup.object({\n  // TODO: Define validation rules for username, password, confirmPassword\n});\n\nfunction RegistrationFormFormik() {\n  return (\n    <Formik\n      initialValues={{ /* TODO: Add initial values */ }}\n      validationSchema={validationSchema}\n      onSubmit={(values, { setSubmitting, resetForm }) => {\n        // TODO: Implement submission logic\n      }}\n    >\n      {({ isSubmitting, isValid, dirty }) => (\n        <Form>\n          {/* TODO: Add username, password, confirmPassword fields with labels and ErrorMessages */}\n\n          <button type=\"submit\" disabled={isSubmitting || !isValid || !dirty}> {/* Example disable condition */}\n            {isSubmitting ? 'Registering...' : 'Register'}\n          </button>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n\nexport default RegistrationFormFormik;\n",
          "solutionCode": "import React from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst validationSchema = Yup.object({\n  username: Yup.string()\n    .required('Username is required')\n    .min(4, 'Username must be at least 4 characters long'),\n  password: Yup.string()\n    .required('Password is required')\n    .min(6, 'Password must be at least 6 characters long')\n    .matches(/[A-Z]/, 'Password must contain at least one uppercase letter')\n    .matches(/[a-z]/, 'Password must contain at least one lowercase letter')\n    .matches(/\\d/, 'Password must contain at least one number'),\n  confirmPassword: Yup.string()\n    .required('Confirm Password is required')\n    .oneOf([Yup.ref('password'), null], 'Passwords must match')\n});\n\nfunction RegistrationFormFormik() {\n  return (\n    <Formik\n      initialValues={{ username: '', password: '', confirmPassword: '' }}\n      validationSchema={validationSchema}\n      onSubmit={(values, { setSubmitting, resetForm }) => {\n        setTimeout(() => {\n          console.log('Registration submitted:', values);\n          setSubmitting(false);\n          resetForm(); // Clear form after successful submission\n        }, 1000); // Simulate API call\n      }}\n    >\n      {({ isSubmitting, isValid, dirty }) => (\n        <Form>\n          <div>\n            <label htmlFor=\"username\">Username:</label>\n            <Field type=\"text\" name=\"username\" id=\"username\" />\n            <ErrorMessage name=\"username\" component=\"div\" className=\"error\" />\n          </div>\n\n          <div>\n            <label htmlFor=\"password\">Password:</label>\n            <Field type=\"password\" name=\"password\" id=\"password\" />\n            <ErrorMessage name=\"password\" component=\"div\" className=\"error\" />\n          </div>\n\n          <div>\n            <label htmlFor=\"confirmPassword\">Confirm Password:</label>\n            <Field type=\"password\" name=\"confirmPassword\" id=\"confirmPassword\" />\n            <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"error\" />\n          </div>\n\n          <button type=\"submit\" disabled={isSubmitting || !isValid || !dirty}> \n            {isSubmitting ? 'Registering...' : 'Register'}\n          </button>\n        </Form>\n      )}\n    </Formik>\n  );\n}\n\nexport default RegistrationFormFormik;\n",
          "testCases": [
            "**Test Case 1: All Fields Valid**\n\n**Input:**\n- Username: \"TestUser\"\n- Password: \"Passw0rd1\"\n- Confirm Password: \"Passw0rd1\"\n\n**Expected Behavior:**\n- Submit button enabled.\n- On submit, `console.log` shows the values.\n- Submit button shows \"Registering...\" then reverts to \"Register\" and form clears.\n\n**Test Case 2: Missing Required Field (Username)**\n\n**Input:**\n- Username: \"\"\n- Password: \"Passw0rd1\"\n- Confirm Password: \"Passw0rd1\"\n\n**Expected Behavior:**\n- \"Username is required\" error message appears under Username field.\n- Submit button remains disabled.\n\n**Test Case 3: Password Too Short**\n\n**Input:**\n- Username: \"TestUser\"\n- Password: \"Pass1\"\n- Confirm Password: \"Pass1\"\n\n**Expected Behavior:**\n- \"Password must be at least 6 characters long\" error message appears.\n- Submit button disabled.\n\n**Test Case 4: Password Complexity Failure (Missing Uppercase)**\n\n**Input:**\n- Username: \"TestUser\"\n- Password: \"password1\"\n- Confirm Password: \"password1\"\n\n**Expected Behavior:**\n- \"Password must contain at least one uppercase letter\" error message appears.\n- Submit button disabled.\n\n**Test Case 5: Passwords Do Not Match**\n\n**Input:**\n- Username: \"TestUser\"\n- Password: \"Passw0rd1\"\n- Confirm Password: \"Passw0rd2\"\n\n**Expected Behavior:**\n- \"Passwords must match\" error message appears under Confirm Password field.\n- Submit button disabled.",
            "**Test Case 6: Form Invalid on Load**\n\n**Input:**\n- No user interaction, form initially rendered.\n\n**Expected Behavior:**\n- No error messages should be visible (as fields are not touched).\n- Submit button should be disabled (due to `!isValid || !dirty`).\n\n**Test Case 7: Subsequent Valid Submission**\n\n**Precondition:** User submitted an invalid form, fixed errors, and submitted successfully.\n\n**Expected Behavior:**\n- Form clears, allowing for a new submission.",
            "**Test Case 8: Field Type Mismatch (e.g., trying to use type=\"text\" for password for visual debug)**\n\n**Note**: The solution uses `type=\"password\"`, but if one were to try `type=\"text\"` for a password field for debugging, ensure the validation still works correctly even if the visual masking is removed.\n\n**Input:**\n- Username: \"TestUser\"\n- Password: \"P1\"\n- Confirm Password: \"P1\"\n\n**Expected Behavior:**\n- \"Password must be at least 6 characters long\" error appears."
          ],
          "hints": [
            "For matching passwords, Yup provides `Yup.ref('fieldName')` and `oneOf()` method.",
            "Remember to include `id` attributes for your `Field` components and ensure `htmlFor` on labels matches for accessibility.",
            "The `disabled` prop on the button should consider `isSubmitting` AND `!isValid` (form is not valid) AND `!dirty` (form hasn't been changed from initial state yet, preventing submission of an empty form that is technically 'valid' if all fields are optional). `isSubmitting || !isValid || !dirty` is a robust condition.",
            "Use `setTimeout` in the `onSubmit` to simulate an asynchronous API call, and remember to call `setSubmitting(false)` after your simulated call completes."
          ],
          "tags": [
            "React",
            "Formik",
            "Yup",
            "Forms",
            "Validation",
            "User Registration"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "formik_basics",
            "yup_basics",
            "javascript_async_patterns"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_formik_library"
          ]
        },
        {
          "id": "task_form_library_choice_analysis",
          "title": "Analyze and Justify Form Library Choice for a Given Scenario",
          "description": "\nYou are a senior frontend architect. A new project requires building several complex forms. The backend will be a REST API, and the frontend will be a React SPA. The team is currently evaluating different libraries for form management.\n\n**Scenario:** The application is a new dashboard for managing large datasets. It will have several forms:\n1.  A \"Create New Record\" form with 15-20 fields, including nested objects and arrays.\n2.  A \"Filter Data\" form used frequently on a dashboard, with 5-10 fields, where real-time input responsiveness is critical for filtering results.\n3.  The application **does not** use Redux for its global state management; instead, it relies on a combination of React Context API and `useReducer` for global state.\n\nBased on this scenario, analyze the suitability of **Formik** and **Redux Form**. Your analysis should culminate in a recommendation for one library, thoroughly justifying your choice by comparing features relevant to the scenario.\n\n**Requirements:**\n1.  **Comparison Points**: Discuss how each library handles:\n    *   State Management (local vs. global)\n    *   Performance (especially for high-interaction forms)\n    *   Bundle Size\n    *   Integration with existing (non-Redux) state management solutions\n    *   Complexity/Developer Experience\n2.  **Scenario Application**: Relate each comparison point directly to the given scenario (e.g., how a 15-20 field form impacts performance).\n3.  **Recommendation and Justification**: Clearly state which library you recommend and provide a detailed justification, weighing the pros and cons of each in the context of the scenario.\n",
          "difficulty": "hard",
          "startingCode": "/* \nThis is a theoretical task; no executable code is required. \nProvide your answer in a detailed markdown comment block or a string. \n*/\n\nconst analysisAndRecommendation = `\n## Form Library Analysis and Recommendation\n\n### Scenario Overview:\n- New dashboard React SPA\n- REST API backend\n- Global state: React Context API + useReducer (NOT Redux)\n- Forms:\n  - \"Create New Record\": 15-20 fields (nested objects/arrays)\n  - \"Filter Data\": 5-10 fields, real-time responsiveness critical\n\n### Analysis of Formik:\n\n### Analysis of Redux Form:\n\n### Recommendation and Justification:\n\n`;\n\n// console.log(analysisAndRecommendation);\n",
          "solutionCode": "/* \nThis is a theoretical task; no executable code is required. \nProvide your answer in a detailed markdown comment block or a string. \n*/\n\nconst analysisAndRecommendation = `\n## Form Library Analysis and Recommendation\n\n### Scenario Overview:\n- New dashboard React SPA for managing large datasets.\n- Backend: REST API.\n- Global state: React Context API + useReducer (NOT Redux).\n- Forms:\n  - \"Create New Record\" (15-20 fields, nested objects/arrays).\n  - \"Filter Data\" (5-10 fields, real-time input responsiveness critical).\n\n### Analysis of Formik:\n\n**1. State Management (local vs. global):**\n   Formik manages form state locally within the component tree. This aligns well with React's component-level state and also with the existing Context API + useReducer pattern, where specific domains of state are managed without a single, monolithic global store.\n\n**2. Performance (especially for high-interaction forms):**\n   Formik's local state management is a significant advantage. For the \"Filter Data\" form (5-10 fields, critical real-time responsiveness), Formik will perform much better because input changes only trigger re-renders of the Formik-managed component and its children, not the entire application's state tree. For the \"Create New Record\" form (15-20 fields), this also means less overhead on keystrokes, leading to a smoother user experience.\n\n**3. Bundle Size:**\n   Formik has a smaller bundle size (approx. 12.7 kB minified gzipped) compared to Redux Form. In a new SPA, keeping the initial bundle size small is crucial for faster load times, especially for a dashboard application that might be accessed frequently.\n\n**4. Integration with existing (non-Redux) state management solutions:**\n   Formik is agnostic to the global state management solution. It will integrate seamlessly with the existing Context API and useReducer setup. Final form data can be easily dispatched to the Context/Reducer once the form is submitted, without forcing the intermediate form state into the global store.\n\n**5. Complexity/Developer Experience:**\n   Formik offers a simpler, more intuitive API with less boilerplate. This will result in a faster development cycle and easier onboarding for new developers, which is valuable for a new project.\n\n### Analysis of Redux Form:\n\n**1. State Management (local vs. global):**\n   Redux Form stores form state within the Redux store. While this offers centralized state, it introduces a global dependency for what is often a local concern. It would necessitate adding Redux to the project's dependency tree and architectural setup, even though it's explicitly stated that Redux is *not* used for global state.\n\n**2. Performance (especially for high-interaction forms):**\n   This is Redux Form's biggest drawback in this scenario. Every keystroke would trigger a Redux action dispatch, causing the entire Redux reducer tree to be re-evaluated. For a 15-20 field form or the critical \"Filter Data\" form, this could lead to noticeable input latency and performance bottlenecks, directly contradicting the requirement for real-time responsiveness.\n\n**3. Bundle Size:**\n   Redux Form has a larger bundle size (approx. 22.5 kB minified gzipped). This additional size would contribute to slower initial page loads, which is undesirable for any SPA, especially one focused on data interaction.\n\n**4. Integration with existing (non-Redux) state management solutions:**\n   Integrating Redux Form without an existing Redux setup is counter-intuitive and adds unnecessary architectural complexity. It would mean introducing a separate Redux store solely for forms, which complicates debugging and state flow for the team already managing state with Context/useReducer.\n\n**5. Complexity/Developer Experience:**\n   Redux Form comes with more boilerplate and requires a deeper understanding of Redux principles (actions, reducers, selectors) for form management, increasing the learning curve and potentially slowing down development for a team not already steeped in Redux.\n\n### Recommendation and Justification:\n\nI strongly recommend **Formik** for this new dashboard application.\n\n**Justification:**\n\n1.  **Architectural Alignment**: The project explicitly uses React Context API and `useReducer` for global state. Formik's local state management approach for forms fits seamlessly into this architecture, avoiding the introduction of an unnecessary Redux dependency that would add significant complexity and a larger surface area for state management without commensurate benefits.\n2.  **Superior Performance**: The \"Filter Data\" form's critical need for real-time responsiveness, and the potential performance hit of a 15-20 field form, makes Formik the clear winner. Its local state handling prevents the global Redux store updates on every keystroke that would plague Redux Form, ensuring a smooth and responsive user experience.\n3.  **Efficiency and Simplicity**: Formik's smaller bundle size and simpler API mean faster loading times, quicker development cycles, and a better developer experience. This is crucial for a new project aiming for efficiency and maintainability.\n4.  **Focused Solution**: Formik is designed specifically to solve form-related problems efficiently. It provides all the necessary features (validation, submission, error handling) without dictating the broader application's state management paradigm.\n\nWhile Redux Form is powerful when deeply integrated into an existing Redux application where form state needs truly global accessibility *before* submission, it is an overkill and a detrimental choice for a project that doesn't use Redux and prioritizes performance and simplicity for its forms.\n\n`;\n\n// To view the analysis, uncomment the line below:\n// console.log(analysisAndRecommendation);\n",
          "testCases": [
            "**Test Case 1: Overall Justification**\n\n**Criteria:** Does the recommendation clearly state a choice and provide a comprehensive, well-reasoned justification covering all comparison points (state, performance, bundle size, integration, complexity)?\n\n**Expected Outcome:** The justification should convincingly argue for Formik by highlighting its benefits (local state, performance, small size, easy integration with Context/useReducer) and explain why Redux Form's downsides (global Redux dependency, performance penalty, complexity) make it unsuitable for this specific scenario.",
            "**Test Case 2: Performance Argument Depth**\n\n**Criteria:** Does the analysis specifically address the performance impact of each library, particularly for the \"Filter Data\" form and the 15-20 field form, and explain the underlying technical reasons (local state vs. global reducer calls)?\n\n**Expected Outcome:** The response should clearly link Formik's local state to better responsiveness and Redux Form's global updates to potential latency issues for both form types.",
            "**Test Case 3: State Management Integration**\n\n**Criteria:** How well does the analysis discuss the integration of each form library with the existing Context API/useReducer global state setup?\n\n**Expected Outcome:** The analysis should emphasize Formik's seamless integration due to its agnosticism to global state, and highlight the architectural friction of introducing Redux Form into a non-Redux ecosystem."
          ],
          "hints": [
            "Think about the core architectural principle of each library: where do they prefer to store form data (local component state vs. global Redux store)?",
            "Consider the frequency of updates in form fields (especially the 'Filter Data' form) and how each library's state management approach impacts re-renders and performance.",
            "Evaluate the 'cost' of introducing a new major dependency (like Redux, if not already used) purely for forms.",
            "Focus on how each library aligns (or clashes) with the existing `Context API + useReducer` global state strategy."
          ],
          "tags": [
            "Formik",
            "Redux Form",
            "Architecture",
            "Decision Making",
            "State Management",
            "Performance",
            "Frontend Interview"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_formik_vs_redux_form",
            "react_context_api",
            "redux_basics"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "expert",
          "relatedConcepts": [
            "theory_formik_vs_redux_form"
          ]
        }
      ]
    }
  },
  {
    "id": "6b5c7815-567c-47b5-812c-60fe268133e2",
    "startLine": 14400,
    "endLine": 14499,
    "processedDate": "2025-06-17T13:57:21.199Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_redux_form_reinitialize",
          "title": "Redux-Form: Dynamic Initialization and Reinitialization",
          "content": "Redux-Form is a popular higher-order component (HOC) based library for managing form state in a Redux store. It handles form state, validation, submission, and more, integrating deeply with Redux.\n\n## `enableReinitialize: true`\n\nOne crucial configuration option for `redux-form` is `enableReinitialize`. When set to `true`, this flag tells `redux-form` to automatically update the form's `initialValues` whenever the `initialValues` prop provided to the `reduxForm` HOC changes. This ensures that your form fields reflect the latest data, even if it changes asynchronously after the form component has mounted.\n\n### How it Works:\n\n1.  **`initialValues` Prop:** The `initialValues` prop is typically supplied to the `reduxForm` HOC via `mapStateToProps`. It's an object where keys correspond to your form field names and values are the initial data for those fields.\n2.  **`enableReinitialize: true`:** When this option is active, `redux-form` observes changes to the `initialValues` prop. If the incoming `initialValues` are different from the current ones, the form's internal state is updated to reflect these new values.\n3.  **Use Cases:**\n    *   **Editing Existing Records:** When you load an existing user or product for editing, the `initialValues` would come from an API call. If the user navigates between different records, `enableReinitialize: true` ensures the form updates with the new record's data.\n    *   **Asynchronous Data Loading:** If form data is fetched asynchronously (e.g., after component mount), `enableReinitialize` will ensure the form fields are populated once the data arrives.\n    *   **Dynamic Form Generation:** Forms whose initial data changes based on user selection or other dynamic factors.\n\n### Key Redux-Form Props:\n\n*   **`handleSubmit`**: A function provided by `redux-form` that wraps your `onSubmit` handler. It prevents default browser submission, runs validation, and then calls your provided `onSubmit` function with the form data if validation passes.\n*   **`pristine`**: A boolean indicating if the form values are currently identical to their `initialValues`. `true` means no changes have been made.\n*   **`reset`**: A function to reset the form's values back to their `initialValues`.\n*   **`submitting`**: A boolean indicating if the form is currently in the process of submitting (e.g., after `handleSubmit` is called and before the `onSubmit` promise resolves).\n*   **`Field`**: A component provided by `redux-form` that connects an input to the Redux store. It manages the input's value, `onChange`, `onBlur`, and error states. You specify which component to render using the `component` prop (e.g., 'input', 'select', or a custom React component).",
          "examples": [
            {
              "id": "example_redux_form_reinitialize_1",
              "title": "Basic Redux-Form with enableReinitialize",
              "code": "import React from 'react';\nimport { connect } from 'react-redux';\nimport { reduxForm, Field } from 'redux-form';\n\n// A simple presentational form component\nclass UserEditFormComponent extends React.Component {\n  render() {\n    const { handleSubmit, pristine, reset, submitting } = this.props;\n    return (\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>First Name</label>\n          <div>\n            <Field name=\"firstName\" component=\"input\" type=\"text\" placeholder=\"First Name\" />\n          </div>\n        </div>\n        <div>\n          <label>Last Name</label>\n          <div>\n            <Field name=\"lastName\" component=\"input\" type=\"text\" placeholder=\"Last Name\" />\n          </div>\n        </div>\n        <div>\n          <button type=\"submit\" disabled={pristine || submitting}>Submit</button>\n          <button type=\"button\" disabled={pristine || submitting} onClick={reset}>Clear Values</button>\n        </div>\n      </form>\n    );\n  }\n}\n\n// mapStateToProps provides initialValues from Redux state\nconst mapStateToProps = (state) => ({\n  initialValues: state.user.data // Pre-populate form with this data\n});\n\n// Apply reduxForm HOC with enableReinitialize set to true\nconst UserEditFormConnected = reduxForm({\n  form: 'userEdit',\n  enableReinitialize: true // This is the key setting\n})(UserEditFormComponent);\n\n// Connect to Redux store to get user data for initialValues\nexport default connect(mapStateToProps)(UserEditFormConnected);",
              "explanation": "This example demonstrates how to set up `redux-form` with `enableReinitialize: true`. The `initialValues` prop is sourced from the Redux store via `mapStateToProps`. If `state.user.data` changes (e.g., a new user record is loaded), the form fields will automatically update to reflect the new `initialValues`. The `handleSubmit`, `pristine`, `reset`, and `submitting` props are destructured and used to manage form submission and button states.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_redux_form_reinitialize_1",
            "question_redux_form_reinitialize_2",
            "question_redux_form_reinitialize_3",
            "question_redux_form_reinitialize_4",
            "question_redux_form_reinitialize_5",
            "question_redux_form_reinitialize_6"
          ],
          "relatedTasks": [
            "task_redux_form_dynamic_reinitialize"
          ],
          "tags": [
            "Redux-Form",
            "Forms",
            "State Management",
            "React",
            "Reinitialization"
          ],
          "technology": "React, Redux, Redux-Form",
          "prerequisites": [
            "Redux Basics",
            "React Components",
            "Higher-Order Components"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "Complex Forms",
            "Dynamic Forms",
            "Data Editing Interfaces"
          ]
        },
        {
          "id": "theory_react_hook_form",
          "title": "React Hook Form: Performance-Oriented Form Management",
          "content": "React Hook Form is a lightweight and performant form library for React. It focuses on reducing re-renders and providing a simple API using React Hooks. Unlike `redux-form` which uses a Redux store for form state, `React Hook Form` uses uncontrolled components and refs to manage input states, minimizing re-renders and improving performance.\n\n## Key Concepts:\n\n*   **Uncontrolled Components:** By default, `React Hook Form` leverages uncontrolled components, which means it doesn't control the value of the input elements directly through React state. Instead, it registers refs to input elements.\n*   **Reduced Re-renders:** Because it relies on refs rather than controlled components, `React Hook Form` generally causes fewer re-renders of your component compared to libraries that manage all input state in React state or Redux.\n*   **Validation:** It has built-in support for native HTML form validation, but it also integrates seamlessly with schema validation libraries like `Yup`, `Zod`, and `Joi` via resolvers.\n\n## Core Hooks and Functions:\n\n*   **`useForm()`:** The primary hook that initializes the form and provides methods and state for form management.\n    *   **`register` function:** A function returned by `useForm` that you spread onto your input elements (`{...register('fieldName')}`). It registers the input with `React Hook Form`, allowing it to track its value, validation rules, and other properties.\n    *   **`handleSubmit` function:** A function that takes your `onSubmit` callback as an argument (`onSubmit={handleSubmit(yourSubmitHandler)}`). It handles form submission, triggers validation, and then calls your provided callback with the form data if validation passes.\n    *   **`formState` object:** Contains various states of the form, including:\n        *   **`errors`**: An object containing validation errors, where keys are field names and values are error objects (e.g., `{ message: 'Error message' }`).\n        *   **`isSubmitting`**: A boolean indicating if the form is currently being submitted.\n        *   **`isValid`**: A boolean indicating if the form is currently valid.\n        *   **`dirtyFields`**: An object indicating which fields have been touched by the user.\n\n*   **Resolvers (e.g., `yupResolver`):** These are adapters that allow `React Hook Form` to work with external schema validation libraries. You pass your validation schema to the resolver, and the resolver then translates the validation results into a format `React Hook Form` understands.\n\n## Validation with Yup:\n\n`Yup` is a schema builder for value parsing and validation. You define a schema that specifies the validation rules for each field. `yupResolver` then connects this schema to `useForm`.",
          "examples": [
            {
              "id": "example_react_hook_form_1",
              "title": "Basic React Hook Form with Yup Validation",
              "code": "import { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\n// Define the validation schema using Yup\nconst schema = yup.object({\n  name: yup.string().required('Name is required'),\n  email: yup.string().email('Invalid email').required('Email is required'),\n  message: yup.string().required('Message is required')\n}).required(); // .required() at the end ensures the whole schema is required (often for object schemas)\n\nfunction HookFormBasic() {\n  // Initialize useForm, passing the resolver for Yup validation\n  const { register, handleSubmit, formState: { errors, isSubmitting } } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  // Define the onSubmit handler\n  const onSubmit = (data) => {\n    console.log('Form submitted:', data);\n    // In a real app, you would send 'data' to a server\n    // Simulate API call\n    return new Promise(resolve => setTimeout(() => {\n      alert(JSON.stringify(data, null, 2));\n      resolve();\n    }, 1000));\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <div>\n        <label htmlFor=\"name\">Name:</label>\n        <input id=\"name\" {...register('name')} />\n        {errors.name && <p className=\"error\" style={{color: 'red'}}>{errors.name.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input id=\"email\" type=\"email\" {...register('email')} />\n        {errors.email && <p className=\"error\" style={{color: 'red'}}>{errors.email.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"message\">Message:</label>\n        <textarea id=\"message\" {...register('message')} />\n        {errors.message && <p className=\"error\" style={{color: 'red'}}>{errors.message.message}</p>}\n      </div>\n\n      <button type=\"submit\" disabled={isSubmitting}>\n        {isSubmitting ? 'Submitting...' : 'Submit'}\n      </button>\n    </form>\n  );\n}\n\nexport default HookFormBasic;",
              "explanation": "This example demonstrates a basic form using `React Hook Form` integrated with `Yup` for schema validation. The `useForm` hook is initialized with `yupResolver(schema)`, which connects our validation rules. Input fields are registered using the `register` function. The `handleSubmit` function is used to wrap our `onSubmit` callback, ensuring validation runs before the data is processed. Validation errors are accessed via `formState.errors` and displayed next to their respective fields. The `isSubmitting` flag is used to disable the submit button during form submission.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_react_hook_form_1",
            "question_react_hook_form_2",
            "question_react_hook_form_3",
            "question_react_hook_form_4",
            "question_react_hook_form_5",
            "question_react_hook_form_6",
            "question_react_hook_form_7",
            "question_react_hook_form_8",
            "question_react_hook_form_9"
          ],
          "relatedTasks": [
            "task_react_hook_form_advanced_validation",
            "task_custom_input_react_hook_form"
          ],
          "tags": [
            "React Hook Form",
            "Forms",
            "Hooks",
            "Performance",
            "Validation",
            "Yup"
          ],
          "technology": "React, React Hooks, Yup",
          "prerequisites": [
            "React Hooks",
            "Basic JavaScript Forms"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Modern React Forms",
            "High-Performance Forms",
            "Client-Side Validation"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_redux_form_reinitialize_1",
          "topic": "Redux-Form: enableReinitialize",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of setting `enableReinitialize: true` in `redux-form`?",
          "answer": "To allow the form to update its `initialValues` whenever the `initialValues` prop changes.",
          "analysisPoints": [
            "Tests basic understanding of `enableReinitialize`."
          ],
          "keyConcepts": [
            "Redux-Form",
            "enableReinitialize",
            "initialValues"
          ],
          "evaluationCriteria": [
            "Direct recall of feature purpose."
          ],
          "example": "Setting `enableReinitialize: true` ensures that if you fetch user data asynchronously and then update the `initialValues` prop with this data, the form fields will reflect the fetched data.",
          "tags": [
            "Redux-Form",
            "Reinitialization",
            "Forms"
          ],
          "prerequisites": [
            "Redux-Form Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_redux_form_reinitialize_2",
          "topic": "Redux-Form: enableReinitialize Scenario",
          "level": "medium",
          "type": "open",
          "question": "Describe a practical scenario where `enableReinitialize: true` in `redux-form` would be crucial for a good user experience. Explain why it's crucial in that scenario.",
          "answer": "A crucial scenario is an 'Edit Profile' form where a user can edit details of different profiles (e.g., in an admin panel). When the user navigates from editing 'User A' to 'User B' without leaving the form component, the `initialValues` prop will change to reflect 'User B's data. If `enableReinitialize` is `false`, the form would still display 'User A's data. With `enableReinitialize: true`, the form automatically repopulates with 'User B's data, providing a seamless and correct editing experience.",
          "analysisPoints": [
            "Ability to apply concept to real-world use cases.",
            "Understanding of the problem `enableReinitialize` solves."
          ],
          "keyConcepts": [
            "Redux-Form",
            "enableReinitialize",
            "initialValues",
            "User Experience"
          ],
          "evaluationCriteria": [
            "Clarity of scenario description.",
            "Logical reasoning for its importance.",
            "Demonstrates practical application."
          ],
          "example": "```jsx\n// Imagine this component receives a 'userId' prop that changes\nconst mapStateToProps = (state, props) => ({\n  initialValues: state.users.data[props.userId] // This data changes based on props.userId\n});\n\nconst UserEditFormConnected = reduxForm({\n  form: 'userEdit',\n  enableReinitialize: true // Essential for updating when userId changes\n})(UserEditForm);\n```",
          "tags": [
            "Redux-Form",
            "Reinitialization",
            "Forms",
            "UX"
          ],
          "prerequisites": [
            "Redux-Form Basics",
            "React Component Lifecycle"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_redux_form_reinitialize_3",
          "topic": "Redux-Form: Field Component",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the role of the `Field` component in `redux-form`?",
          "answer": "The `Field` component connects an input element (or a custom component) to the Redux store, managing its value, `onChange`, `onBlur`, and validation state.",
          "analysisPoints": [
            "Tests knowledge of `redux-form` core components."
          ],
          "keyConcepts": [
            "Redux-Form",
            "Field",
            "Input Management"
          ],
          "evaluationCriteria": [
            "Direct recall of component functionality."
          ],
          "example": "```jsx\n<Field name=\"firstName\" component=\"input\" type=\"text\" placeholder=\"First Name\" />\n```",
          "tags": [
            "Redux-Form",
            "Field Component"
          ],
          "prerequisites": [
            "Redux-Form Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_redux_form_reinitialize_4",
          "topic": "Redux-Form: Props",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following `redux-form` props is used to reset the form's values back to their `initialValues`?",
          "answer": "`reset`",
          "options": [
            "`pristine`",
            "`submitting`",
            "`reset`",
            "`clear`"
          ],
          "analysisPoints": [
            "Tests knowledge of `redux-form` provided props.",
            "Distinguishes between similar-sounding props."
          ],
          "keyConcepts": [
            "Redux-Form",
            "Form Props",
            "reset"
          ],
          "evaluationCriteria": [
            "Correct identification of function.",
            "Exclusion of distractors."
          ],
          "example": "```jsx\n// In your form component's render method\nconst { reset } = this.props;\n<button type=\"button\" onClick={reset}>Clear Form</button>\n```\nThe `reset` prop is a function provided by `redux-form` that when called, reverts all form fields to their `initialValues`. `pristine` is a boolean flag indicating if the form has been modified from its initial state, and `submitting` is a boolean indicating if the form is currently being submitted.",
          "tags": [
            "Redux-Form",
            "Form Props"
          ],
          "prerequisites": [
            "Redux-Form Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_redux_form_reinitialize_5",
          "topic": "Redux-Form vs. React Hook Form (Re-renders)",
          "level": "medium",
          "type": "open",
          "question": "From a performance perspective, how does `redux-form` typically handle re-renders compared to `React Hook Form`, especially concerning input changes? Consider their underlying mechanisms.",
          "answer": "`Redux-form` often causes more re-renders than `React Hook Form` because it stores the entire form state in the Redux store. Every time an input value changes, a Redux action is dispatched, updating the store, which then triggers a re-render of the connected `redux-form` component (and potentially its children). In contrast, `React Hook Form` uses uncontrolled components by default, relying on refs to directly access DOM input values. This approach minimizes re-renders of the React component tree as input changes do not necessarily trigger state updates that flow down the component hierarchy.",
          "analysisPoints": [
            "Compares fundamental architectural differences.",
            "Explains the impact on performance (re-renders).",
            "Connects to concepts of controlled vs. uncontrolled components/refs."
          ],
          "keyConcepts": [
            "Redux-Form",
            "React Hook Form",
            "Re-renders",
            "Performance",
            "Controlled Components",
            "Uncontrolled Components",
            "Refs",
            "Redux State"
          ],
          "evaluationCriteria": [
            "Accurate comparison of re-rendering mechanisms.",
            "Understanding of the underlying principles of each library.",
            "Clarity in explaining performance implications."
          ],
          "example": "While `redux-form` provides robust state management with Redux, its tight coupling with the Redux store for every input change can lead to more frequent component updates. `React Hook Form`'s philosophy of 'uncontrolled inputs' avoids this by primarily interacting directly with the DOM for value retrieval, thereby reducing the need for React component updates on every keystroke.",
          "tags": [
            "Redux-Form",
            "React Hook Form",
            "Performance",
            "Re-renders",
            "Architecture"
          ],
          "prerequisites": [
            "React Controlled/Uncontrolled Components",
            "Redux Basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_redux_form_reinitialize_6",
          "topic": "Redux-Form: initialValues Priority",
          "level": "hard",
          "type": "mcq",
          "question": "Consider a `redux-form` setup where `enableReinitialize: true`. If the `initialValues` prop changes, and concurrently, a user has typed some data into a field, which value takes precedence for that field upon reinitialization?",
          "answer": "The new `initialValues` will overwrite the user-typed data.",
          "options": [
            "The user-typed data will always persist.",
            "The new `initialValues` will overwrite the user-typed data.",
            "It depends on whether the field is `pristine` or `dirty`.",
            "The form will throw an error due to a conflict."
          ],
          "analysisPoints": [
            "Tests understanding of reinitialization behavior with user interaction.",
            "Highlights a potential data loss scenario if not handled carefully.",
            "Distinguishes from `keepDirtyOnReinitialize` (which is not mentioned but a common related concept)."
          ],
          "keyConcepts": [
            "Redux-Form",
            "enableReinitialize",
            "initialValues",
            "User Input",
            "Data Precedence"
          ],
          "evaluationCriteria": [
            "Correct understanding of `enableReinitialize`'s default overwrite behavior.",
            "Identification of potential side effects."
          ],
          "example": "When `enableReinitialize: true` is set, `redux-form` prioritizes the `initialValues` prop. If the `initialValues` prop changes, the form will reset to these new values, overwriting any unsaved user input. If you need to preserve user changes while still allowing reinitialization for other fields, you might consider the `keepDirtyOnReinitialize` option (though not discussed in the provided text, it's a relevant advanced topic).",
          "tags": [
            "Redux-Form",
            "Reinitialization",
            "Edge Cases",
            "Data Handling"
          ],
          "prerequisites": [
            "Redux-Form Advanced Configuration"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_hook_form_1",
          "topic": "React Hook Form: Core Benefit",
          "level": "easy",
          "type": "flashcard",
          "question": "What is a primary performance benefit of `React Hook Form` compared to other form libraries?",
          "answer": "It reduces re-renders by utilizing uncontrolled components and refs, directly interacting with the DOM.",
          "analysisPoints": [
            "Tests understanding of the library's core philosophy."
          ],
          "keyConcepts": [
            "React Hook Form",
            "Performance",
            "Re-renders",
            "Uncontrolled Components"
          ],
          "evaluationCriteria": [
            "Direct recall of key advantage."
          ],
          "example": "```javascript\n// React Hook Form minimizes re-renders on input change because it doesn't\n// manage the input's value via React state directly on every keystroke.\nconst { register } = useForm();\n<input {...register('name')} />\n```",
          "tags": [
            "React Hook Form",
            "Performance"
          ],
          "prerequisites": [
            "React Hooks Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_hook_form_2",
          "topic": "React Hook Form: Input Registration",
          "level": "easy",
          "type": "mcq",
          "question": "Which function from `useForm` is used to connect an HTML input element to `React Hook Form`'s internal state?",
          "answer": "`register`",
          "options": [
            "`connect`",
            "`bind`",
            "`register`",
            "`link`"
          ],
          "analysisPoints": [
            "Tests knowledge of `React Hook Form`'s API.",
            "Identifies the correct function for input management."
          ],
          "keyConcepts": [
            "React Hook Form",
            "register",
            "Input Management"
          ],
          "evaluationCriteria": [
            "Correct identification of the API method.",
            "Familiarity with hook-based form libraries."
          ],
          "example": "```jsx\nconst { register } = useForm();\n<input type=\"text\" {...register('username')} />\n```\nThe `register` function is spread onto input elements, allowing `React Hook Form` to track their values and apply validation rules. This is central to how the library manages form fields.",
          "tags": [
            "React Hook Form",
            "register",
            "API"
          ],
          "prerequisites": [
            "React Hooks"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_hook_form_3",
          "topic": "React Hook Form: Validation Errors",
          "level": "medium",
          "type": "flashcard",
          "question": "How do you access validation errors for a specific field (e.g., 'email') when using `React Hook Form`?",
          "answer": "Errors are accessed through the `errors` object within `formState`, like `formState.errors.email.message`.",
          "analysisPoints": [
            "Tests knowledge of error access pattern.",
            "Familiarity with `formState` object."
          ],
          "keyConcepts": [
            "React Hook Form",
            "formState",
            "errors",
            "Validation"
          ],
          "evaluationCriteria": [
            "Correct path to error messages."
          ],
          "example": "```jsx\nconst { formState: { errors } } = useForm();\n{errors.email && <p>{errors.email.message}</p>}\n```",
          "tags": [
            "React Hook Form",
            "Validation",
            "Errors"
          ],
          "prerequisites": [
            "React Hook Form Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_hook_form_4",
          "topic": "React Hook Form: `handleSubmit`",
          "level": "medium",
          "type": "open",
          "question": "Explain the role of the `handleSubmit` function in `React Hook Form` and how it's used in practice.",
          "answer": "The `handleSubmit` function is returned by the `useForm` hook. Its primary role is to wrap your custom `onSubmit` callback function. When the form is submitted (e.g., by clicking a submit button), `handleSubmit` first triggers the form's internal validation process. If validation passes, it then calls your `onSubmit` callback, passing the validated form data as an argument. If validation fails, it prevents the `onSubmit` callback from being executed and populates the `formState.errors` object. In practice, you typically attach it to the form's `onSubmit` attribute: `<form onSubmit={handleSubmit(yourSubmitFunction)}>`.",
          "analysisPoints": [
            "Understanding of submission flow.",
            "Role in validation triggering.",
            "Practical application syntax."
          ],
          "keyConcepts": [
            "React Hook Form",
            "handleSubmit",
            "Form Submission",
            "Validation"
          ],
          "evaluationCriteria": [
            "Clear explanation of `handleSubmit`'s purpose.",
            "Correct usage example.",
            "Understanding of its role in the form lifecycle."
          ],
          "example": "```jsx\nconst { handleSubmit } = useForm();\nconst mySubmitFunction = (data) => {\n  console.log('Form data:', data);\n};\n\n<form onSubmit={handleSubmit(mySubmitFunction)}>\n  {/* ... inputs ... */}\n  <button type=\"submit\">Submit</button>\n</form>\n```",
          "tags": [
            "React Hook Form",
            "Form Submission",
            "API"
          ],
          "prerequisites": [
            "React Hooks"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_hook_form_5",
          "topic": "React Hook Form: `yupResolver`",
          "level": "medium",
          "type": "flashcard",
          "question": "What is the purpose of `yupResolver` when using `React Hook Form`?",
          "answer": "`yupResolver` is an adapter that integrates `Yup` validation schemas with `React Hook Form`, allowing the form to use `Yup`'s schema validation for its fields.",
          "analysisPoints": [
            "Tests knowledge of validation integration."
          ],
          "keyConcepts": [
            "React Hook Form",
            "Yup",
            "yupResolver",
            "Validation Schema"
          ],
          "evaluationCriteria": [
            "Correct definition of resolver's role."
          ],
          "example": "```typescript\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\nconst schema = yup.object({\n  name: yup.string().required()\n});\n\nconst { register } = useForm({\n  resolver: yupResolver(schema)\n});\n```",
          "tags": [
            "React Hook Form",
            "Yup",
            "Validation"
          ],
          "prerequisites": [
            "React Hook Form Basics",
            "Yup Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_hook_form_6",
          "topic": "React Hook Form: `isSubmitting`",
          "level": "easy",
          "type": "mcq",
          "question": "You want to disable the submit button while the form data is being sent to the server using `React Hook Form`. Which `formState` property should you use?",
          "answer": "`isSubmitting`",
          "options": [
            "`isValid`",
            "`isDirty`",
            "`isSubmitted`",
            "`isSubmitting`"
          ],
          "analysisPoints": [
            "Tests practical application of `formState` properties.",
            "Distinguishes between submission states."
          ],
          "keyConcepts": [
            "React Hook Form",
            "formState",
            "isSubmitting",
            "UI/UX"
          ],
          "evaluationCriteria": [
            "Correct identification of the relevant property.",
            "Understanding of loading state management."
          ],
          "example": "```jsx\nconst { formState: { isSubmitting } } = useForm();\n<button type=\"submit\" disabled={isSubmitting}>\n  {isSubmitting ? 'Sending...' : 'Submit'}\n</button>\n```\nThe `isSubmitting` property becomes `true` when `handleSubmit` is called and its `onSubmit` callback is executing (especially if it returns a Promise), and `false` once the process completes. This is ideal for managing UI states during asynchronous operations.",
          "tags": [
            "React Hook Form",
            "Form State",
            "UI",
            "Loading State"
          ],
          "prerequisites": [
            "React Hook Form Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_hook_form_7",
          "topic": "React Hook Form: `mode` option",
          "level": "hard",
          "type": "open",
          "question": "While not explicitly mentioned, `React Hook Form` has a `mode` option for `useForm`. Explain its purpose and how different `mode` values (e.g., 'onBlur', 'onChange', 'onSubmit') affect validation triggering.",
          "answer": "The `mode` option in `useForm` dictates *when* validation is triggered. This can significantly impact user experience:\n\n*   **`'onSubmit'` (Default):** Validation is triggered only when the form is submitted (i.e., when `handleSubmit` is invoked). Errors are shown only after an attempted submission.\n*   **`'onBlur'`:** Validation is triggered on `blur` events for each input field. This means as soon as a user moves out of a field, its validation rules are checked. This provides earlier feedback than `'onSubmit'` but avoids validating on every keystroke.\n*   **`'onChange'`:** Validation is triggered on every `change` event (i.e., every keystroke) for each input field. This provides the most immediate feedback but can be performance-intensive for complex forms or validation rules, and potentially annoying for users if errors appear too quickly.\n*   **`'onTouched'`:** Validation is triggered when a field is touched (i.e., receives a `blur` event after being focused). Only fields that have been 'touched' will show errors.\n\nThe `mode` allows developers to fine-tune the user experience by deciding how aggressively validation feedback is provided.",
          "analysisPoints": [
            "Tests knowledge beyond the provided text, implying deeper library understanding.",
            "Explains impact on UX and performance.",
            "Covers multiple `mode` values and their behavior."
          ],
          "keyConcepts": [
            "React Hook Form",
            "Validation Modes",
            "UX",
            "Performance",
            "onBlur",
            "onChange",
            "onSubmit",
            "onTouched"
          ],
          "evaluationCriteria": [
            "Comprehensive explanation of `mode`.",
            "Accurate description of each mode's behavior.",
            "Understanding of trade-offs (UX vs. performance)."
          ],
          "example": "```typescript\nconst { register, handleSubmit, formState: { errors } } = useForm({\n  mode: 'onBlur', // Validate on blur\n  resolver: yupResolver(schema)\n});\n```\nUsing `mode: 'onBlur'` can strike a good balance, providing feedback without being overly aggressive like `'onChange'`, which might show 'required' errors even before the user starts typing.",
          "tags": [
            "React Hook Form",
            "Validation",
            "Configuration",
            "Advanced",
            "UX"
          ],
          "prerequisites": [
            "React Hook Form Basics"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_hook_form_8",
          "topic": "React Hook Form: `watch` vs. `getValues`",
          "level": "hard",
          "type": "open",
          "question": "In `React Hook Form`, explain the difference between `watch` and `getValues` when attempting to retrieve form field values. When would you prefer one over the other?",
          "answer": "`watch` and `getValues` both retrieve form values, but they differ in how they interact with React's rendering cycle:\n\n*   **`watch()`:** This function is a hook (`useWatch` or directly `watch` from `useForm`). It subscribes your component to changes in the specified fields. When a watched field's value changes, the component that called `watch` will re-render. You would use `watch` when you need to dynamically display a value (e.g., a character counter for a textarea) or conditionally render parts of your form based on a field's value, as it ensures your UI stays synchronized with the latest input.\n*   **`getValues()`:** This function directly returns the current form values without subscribing the component to updates. It does *not* cause a re-render when the form values change. You would use `getValues` when you need to retrieve the current form state at a specific point in time (e.g., inside an `onClick` handler for a button that isn't the submit button, or within `useEffect` hooks that don't need to re-run on every field change) and don't need the component to re-render. It's useful for accessing values without incurring performance overhead of re-renders.\n\n**Preference:**\n*   Use `watch` for reactive updates that affect the UI, requiring re-renders.\n*   Use `getValues` for imperatively accessing values without causing re-renders, typically in event handlers or effects where you only need the snapshot of the current state.",
          "analysisPoints": [
            "Tests nuanced understanding of `React Hook Form` API.",
            "Explains the re-rendering implications of each method.",
            "Provides clear use-case distinctions."
          ],
          "keyConcepts": [
            "React Hook Form",
            "watch",
            "getValues",
            "Re-renders",
            "Form State",
            "Performance"
          ],
          "evaluationCriteria": [
            "Accurate distinction between reactive vs. imperative value retrieval.",
            "Clear explanation of re-rendering behavior.",
            "Sound advice on when to use each method."
          ],
          "example": "```typescript\n// Example using watch for conditional rendering\nfunction MyForm() {\n  const { register, watch } = useForm();\n  const showExtraField = watch('optionSelected');\n  return (\n    <form>\n      <input type=\"checkbox\" {...register('optionSelected')} />\n      {showExtraField && <input type=\"text\" {...register('extraData')} />}\n    </form>\n  );\n}\n\n// Example using getValues for an external button click\nfunction MyOtherForm() {\n  const { register, getValues } = useForm();\n  const handleLogData = () => {\n    console.log(getValues()); // Gets current form data without re-rendering\n  };\n  return (\n    <form>\n      <input {...register('field1')} />\n      <button type=\"button\" onClick={handleLogData}>Log Data</button>\n    </form>\n  );\n}\n```",
          "tags": [
            "React Hook Form",
            "API",
            "Advanced",
            "Performance"
          ],
          "prerequisites": [
            "React Hook Form Basics",
            "React Component Lifecycle"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_hook_form_9",
          "topic": "React Hook Form: Default Values",
          "level": "medium",
          "type": "mcq",
          "question": "How do you provide default values to inputs in `React Hook Form` when initializing `useForm`?",
          "answer": "By passing an object to the `defaultValues` option of `useForm`.",
          "options": [
            "By setting the `value` prop directly on each input.",
            "By passing an object to the `initialValues` option of `useForm`.",
            "By passing an object to the `defaultValues` option of `useForm`.",
            "By using the `setValue` method for each field in a `useEffect` hook."
          ],
          "analysisPoints": [
            "Tests knowledge of how to set initial/default values.",
            "Differentiates from `redux-form`'s `initialValues`.",
            "Identifies the most straightforward and idiomatic approach."
          ],
          "keyConcepts": [
            "React Hook Form",
            "defaultValues",
            "useForm",
            "Initialization"
          ],
          "evaluationCriteria": [
            "Correct identification of the `useForm` option.",
            "Understanding of the recommended way to set defaults."
          ],
          "example": "```typescript\nimport { useForm } from 'react-hook-form';\n\nfunction MyFormWithDefaults() {\n  const { register, handleSubmit } = useForm({\n    defaultValues: {\n      name: 'John Doe',\n      email: 'john.doe@example.com'\n    }\n  });\n\n  const onSubmit = (data) => console.log(data);\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <input {...register('name')} />\n      <input type=\"email\" {...register('email')} />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```\nThe `defaultValues` option is the canonical way to set initial values for your form fields in `React Hook Form`. This ensures that fields are populated correctly upon component mount without needing to manually manage their `value` props.",
          "tags": [
            "React Hook Form",
            "Default Values",
            "Form Initialization"
          ],
          "prerequisites": [
            "React Hook Form Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_redux_form_dynamic_reinitialize",
          "title": "Build a User Profile Editor with Dynamic Reinitialization (Redux-Form)",
          "description": "\nImplement a user profile editing form using `redux-form`. The form should be capable of loading different user profiles from a simulated API and reinitializing its fields whenever the `initialValues` (representing the currently selected user's data) change.\n\n**Requirements:**\n\n1.  Set up a basic `redux-form` for `firstName` and `lastName`.\n2.  Simulate fetching user data asynchronously (e.g., using `setTimeout` or a mock API call).\n3.  Use `mapStateToProps` to provide `initialValues` to `reduxForm`.\n4.  Crucially, configure `redux-form` to reinitialize when the `initialValues` prop changes.\n5.  Include a button to 'Load User A' and 'Load User B' to demonstrate reinitialization.\n6.  Display `pristine`, `submitting` status, and enable/disable submit/reset buttons accordingly.\n7.  Implement a simple `onSubmit` handler to log form data.\n\n**Considerations:**\n*   How will you manage the `userId` that dictates which user's data is fetched and passed as `initialValues`?\n*   How to handle the initial load of user data?\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect } from 'react';\nimport { createStore, combineReducers } from 'redux';\nimport { Provider } from 'react-redux';\nimport { reduxForm, Field, reducer as formReducer } from 'redux-form';\nimport { connect } from 'react-redux';\n\n// Mock Redux store setup\nconst initialUserState = {\n  data: { firstName: '', lastName: '' }\n};\n\nfunction userReducer(state = initialUserState, action) {\n  switch (action.type) {\n    case 'SET_USER_DATA':\n      return { ...state, data: action.payload };\n    default:\n      return state;\n  }\n}\n\nconst rootReducer = combineReducers({\n  form: formReducer,\n  user: userReducer,\n});\n\nconst store = createStore(rootReducer);\n\n// --- Your Redux-Form Component will go here ---\n\n// Define a presentational component for the form\nclass UserProfileForm extends React.Component {\n  render() {\n    const { handleSubmit, pristine, reset, submitting } = this.props;\n    return (\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>First Name</label>\n          <div>\n            <Field name=\"firstName\" component=\"input\" type=\"text\" />\n          </div>\n        </div>\n        <div>\n          <label>Last Name</label>\n          <div>\n            <Field name=\"lastName\" component=\"input\" type=\"text\" />\n          </div>\n        </div>\n        <div>\n          <button type=\"submit\" disabled={pristine || submitting}>Submit</button>\n          <button type=\"button\" disabled={pristine || submitting} onClick={reset}>Reset</button>\n        </div>\n      </form>\n    );\n  }\n}\n\n// TODO: Implement mapStateToProps to get initialValues\nconst mapStateToProps = (state) => ({});\n\n// TODO: Apply reduxForm HOC with enableReinitialize\nconst UserProfileFormConnected = reduxForm({\n  form: 'userProfileEdit',\n  // TODO: Add enableReinitialize here\n})(UserProfileForm);\n\n// TODO: Connect the form to Redux\nconst FinalUserProfileForm = connect(mapStateToProps)(UserProfileFormConnected);\n\n// Main App Component to demonstrate loading users\nfunction App() {\n  const [currentUserId, setCurrentUserId] = useState(null);\n\n  useEffect(() => {\n    // Simulate initial data load for a default user\n    fetchUserData('user1'); // Load a default user on mount\n  }, []);\n\n  const fetchUserData = (userId) => {\n    // Simulate API call\n    const userData = {\n      'user1': { firstName: 'Alice', lastName: 'Smith' },\n      'user2': { firstName: 'Bob', lastName: 'Johnson' }\n    };\n    setTimeout(() => {\n      store.dispatch({ type: 'SET_USER_DATA', payload: userData[userId] });\n      setCurrentUserId(userId);\n    }, 500);\n  };\n\n  const onSubmit = (values) => {\n    console.log('Form submitted:', values);\n    alert(JSON.stringify(values, null, 2));\n    // Simulate API submission\n    return new Promise(resolve => setTimeout(resolve, 1000));\n  };\n\n  return (\n    <Provider store={store}>\n      <h1>Redux-Form Dynamic Reinitialization</h1>\n      <button onClick={() => fetchUserData('user1')}>Load User A</button>\n      <button onClick={() => fetchUserData('user2')} style={{marginLeft: '10px'}}>Load User B</button>\n      <hr />\n      {currentUserId && <FinalUserProfileForm onSubmit={onSubmit} />}\n      {!currentUserId && <p>Loading user data...</p>}\n    </Provider>\n  );\n}\n\nexport default App;\n",
          "solutionCode": "import React, { useState, useEffect } from 'react';\nimport { createStore, combineReducers } from 'redux';\nimport { Provider } from 'react-redux';\nimport { reduxForm, Field, reducer as formReducer } from 'redux-form';\nimport { connect } from 'react-redux';\n\n// Mock Redux store setup\nconst initialUserState = {\n  data: { firstName: '', lastName: '' }\n};\n\nfunction userReducer(state = initialUserState, action) {\n  switch (action.type) {\n    case 'SET_USER_DATA':\n      return { ...state, data: action.payload };\n    default:\n      return state;\n  }\n}\n\nconst rootReducer = combineReducers({\n  form: formReducer,\n  user: userReducer,\n});\n\nconst store = createStore(rootReducer);\n\n// --- Your Redux-Form Component will go here ---\n\n// Define a presentational component for the form\nclass UserProfileForm extends React.Component {\n  render() {\n    const { handleSubmit, pristine, reset, submitting } = this.props;\n    return (\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>First Name</label>\n          <div>\n            <Field name=\"firstName\" component=\"input\" type=\"text\" />\n          </div>\n        </div>\n        <div>\n          <label>Last Name</label>\n          <div>\n            <Field name=\"lastName\" component=\"input\" type=\"text\" />\n          </div>\n        </div>\n        <div>\n          <button type=\"submit\" disabled={pristine || submitting}>Submit</button>\n          <button type=\"button\" disabled={pristine || submitting} onClick={reset}>Reset</button>\n        </div>\n        <p>Pristine: {pristine ? 'Yes' : 'No'}</p>\n        <p>Submitting: {submitting ? 'Yes' : 'No'}</p>\n      </form>\n    );\n  }\n}\n\n// Implement mapStateToProps to get initialValues from Redux state\nconst mapStateToProps = (state) => ({\n  initialValues: state.user.data // This prop will trigger reinitialization if it changes\n});\n\n// Apply reduxForm HOC with enableReinitialize\nconst UserProfileFormConnected = reduxForm({\n  form: 'userProfileEdit',\n  enableReinitialize: true, // Crucial for dynamic initialValues\n  keepDirtyOnReinitialize: false // Default behavior, but good to be aware of\n})(UserProfileForm);\n\n// Connect the form to Redux to get access to initialValues\nconst FinalUserProfileForm = connect(mapStateToProps)(UserProfileFormConnected);\n\n// Main App Component to demonstrate loading users\nfunction App() {\n  const [currentUserId, setCurrentUserId] = useState(null);\n\n  useEffect(() => {\n    // Simulate initial data load for a default user\n    fetchUserData('user1'); // Load a default user on mount\n  }, []);\n\n  const fetchUserData = (userId) => {\n    // Simulate API call\n    const userData = {\n      'user1': { firstName: 'Alice', lastName: 'Smith' },\n      'user2': { firstName: 'Bob', lastName: 'Johnson' },\n      'user3': { firstName: 'Charlie', lastName: 'Brown' }\n    };\n    setTimeout(() => {\n      store.dispatch({ type: 'SET_USER_DATA', payload: userData[userId] });\n      setCurrentUserId(userId);\n    }, 500);\n  };\n\n  const onSubmit = async (values) => {\n    console.log('Form submitted:', values);\n    alert(JSON.stringify(values, null, 2));\n    // Simulate API submission\n    return new Promise(resolve => setTimeout(resolve, 1000));\n  };\n\n  return (\n    <Provider store={store}>\n      <h1>Redux-Form Dynamic Reinitialization</h1>\n      <button onClick={() => fetchUserData('user1')}>Load User A (Alice)</button>\n      <button onClick={() => fetchUserData('user2')} style={{marginLeft: '10px'}}>Load User B (Bob)</button>\n      <button onClick={() => fetchUserData('user3')} style={{marginLeft: '10px'}}>Load User C (Charlie)</button>\n      <hr />\n      {currentUserId ? <FinalUserProfileForm onSubmit={onSubmit} /> : <p>Loading user data...</p>}\n    </Provider>\n  );\n}\n\nexport default App;\n",
          "testCases": [
            "**Initial Load:** Form should display 'Alice Smith' after initial load.",
            "**Load User B:** Click 'Load User B'. Form fields should update to 'Bob Johnson'.",
            "**Type and Reload:** Type something into 'First Name' (e.g., 'EditedAlice'), then click 'Load User B'. The form should correctly reinitialize to 'Bob Johnson', overwriting the typed 'EditedAlice'.",
            "**Submit and Reset:** Fill out the form, submit, then reset. Verify it returns to the currently loaded user's `initialValues`.",
            "**Pristine State:** After loading a user, edit a field. `Pristine` status should change from 'Yes' to 'No'. Resetting should make it 'Yes' again."
          ],
          "hints": [
            "Remember that `enableReinitialize: true` must be part of the configuration object passed to `reduxForm`.",
            "The `initialValues` prop is typically provided by `mapStateToProps` in a `redux-form` setup.",
            "Ensure your Redux state properly updates the `user.data` slice to trigger the `initialValues` change."
          ],
          "tags": [
            "Redux-Form",
            "Reinitialization",
            "Dynamic Forms",
            "Redux",
            "Forms"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "Redux-Form",
            "Redux Basics",
            "React Class Components"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "mapStateToProps",
            "Higher-Order Components",
            "Form State Management"
          ]
        },
        {
          "id": "task_react_hook_form_advanced_validation",
          "title": "Build a Robust User Registration Form (React Hook Form + Yup)",
          "description": "\nCreate a user registration form using `React Hook Form` and `Yup` for comprehensive client-side validation. The form should include standard fields and demonstrate advanced validation concepts.\n\n**Requirements:**\n\n1.  **Basic Fields:** `username` (string), `email` (email format), `password` (string), `confirmPassword` (string).\n2.  **Required Fields:** All fields must be required.\n3.  **Email Validation:** `email` must be a valid email format.\n4.  **Password Strength:** `password` must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character.\n5.  **Confirm Password:** `confirmPassword` must match `password`.\n6.  **Conditional Field:** Add a checkbox 'Are you a student?' (`isStudent`). If checked, a new input field `studentId` should appear, which is required only when `isStudent` is true.\n7.  **Error Display:** Display validation error messages clearly below each input.\n8.  **Loading State:** Disable the submit button and show 'Submitting...' when the form is being submitted.\n9.  Implement a simple `onSubmit` handler to log the validated data (simulate API call with `setTimeout`).\n\n**Considerations:**\n*   How to define complex regex-based validation in Yup?\n*   How to handle conditional validation based on other field values?\n*   How to conditionally render fields in React Hook Form?\n",
          "difficulty": "hard",
          "startingCode": "import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\n// TODO: Define the Yup validation schema here\nconst schema = yup.object({\n  username: yup.string().required('Username is required'),\n  email: yup.string().email('Invalid email format').required('Email is required'),\n  password: yup.string().required('Password is required'),\n  confirmPassword: yup.string().required('Confirm Password is required'),\n  // TODO: Add conditional field and its validation\n}).required();\n\nfunction RegistrationForm() {\n  const { register, handleSubmit, formState: { errors, isSubmitting } } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const onSubmit = async (data) => {\n    console.log('Form data:', data);\n    // Simulate API call\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    alert('Registration successful! Check console for data.');\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <h2>Register Account</h2>\n\n      <div>\n        <label htmlFor=\"username\">Username:</label>\n        <input id=\"username\" {...register('username')} />\n        {errors.username && <p style={{color: 'red'}}>{errors.username.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input id=\"email\" type=\"email\" {...register('email')} />\n        {errors.email && <p style={{color: 'red'}}>{errors.email.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"password\">Password:</label>\n        <input id=\"password\" type=\"password\" {...register('password')} />\n        {errors.password && <p style={{color: 'red'}}>{errors.password.message}</p>}\n      </div>\n\n      <div>\n        <label htmlFor=\"confirmPassword\">Confirm Password:</label>\n        <input id=\"confirmPassword\" type=\"password\" {...register('confirmPassword')} />\n        {errors.confirmPassword && <p style={{color: 'red'}}>{errors.confirmPassword.message}</p>}\n      </div>\n\n      {/* TODO: Add conditional student field here */}\n\n      <button type=\"submit\" disabled={isSubmitting}>\n        {isSubmitting ? 'Registering...' : 'Register'}\n      </button>\n    </form>\n  );\n}\n\nexport default RegistrationForm;\n",
          "solutionCode": "import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\n\n// Define the Yup validation schema\nconst schema = yup.object({\n  username: yup.string()\n    .required('Username is required')\n    .min(3, 'Username must be at least 3 characters')\n    .max(20, 'Username cannot exceed 20 characters'),\n  email: yup.string()\n    .email('Invalid email format')\n    .required('Email is required'),\n  password: yup.string()\n    .required('Password is required')\n    .min(8, 'Password must be at least 8 characters long')\n    .matches(/[A-Z]/, 'Password must contain at least one uppercase letter')\n    .matches(/[a-z]/, 'Password must contain at least one lowercase letter')\n    .matches(/\\d/, 'Password must contain at least one number')\n    .matches(/[^A-Za-z0-9]/, 'Password must contain at least one special character'),\n  confirmPassword: yup.string()\n    .required('Confirm Password is required')\n    .oneOf([yup.ref('password'), null], 'Passwords must match'), // Matches 'password' field\n  isStudent: yup.boolean(),\n  studentId: yup.string().when('isStudent', {\n    is: true,\n    then: (schema) => schema.required('Student ID is required for students'),\n    otherwise: (schema) => schema.notRequired(), // Not required if isStudent is false/undefined\n  }),\n}).required();\n\nfunction RegistrationForm() {\n  const { register, handleSubmit, watch, formState: { errors, isSubmitting } } = useForm({\n    resolver: yupResolver(schema),\n    mode: 'onBlur' // Validate on blur for better UX\n  });\n\n  // Watch the 'isStudent' field to conditionally render 'studentId'\n  const isStudent = watch('isStudent', false);\n\n  const onSubmit = async (data) => {\n    console.log('Form data:', data);\n    // Simulate API call\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    alert('Registration successful! Check console for data.');\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)} style={{ maxWidth: '400px', margin: '20px auto', padding: '20px', border: '1px solid #ccc', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n      <h2>Register Account</h2>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"username\" style={{ display: 'block', marginBottom: '5px' }}>Username:</label>\n        <input id=\"username\" {...register('username')} style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}/>\n        {errors.username && <p style={{color: 'red', fontSize: '0.8em', marginTop: '5px'}}>{errors.username.message}</p>}\n      </div>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"email\" style={{ display: 'block', marginBottom: '5px' }}>Email:</label>\n        <input id=\"email\" type=\"email\" {...register('email')} style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}/>\n        {errors.email && <p style={{color: 'red', fontSize: '0.8em', marginTop: '5px'}}>{errors.email.message}</p>}\n      </div>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"password\" style={{ display: 'block', marginBottom: '5px' }}>Password:</label>\n        <input id=\"password\" type=\"password\" {...register('password')} style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}/>\n        {errors.password && <p style={{color: 'red', fontSize: '0.8em', marginTop: '5px'}}>{errors.password.message}</p>}\n      </div>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label htmlFor=\"confirmPassword\" style={{ display: 'block', marginBottom: '5px' }}>Confirm Password:</label>\n        <input id=\"confirmPassword\" type=\"password\" {...register('confirmPassword')} style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}/>\n        {errors.confirmPassword && <p style={{color: 'red', fontSize: '0.8em', marginTop: '5px'}}>{errors.confirmPassword.message}</p>}\n      </div>\n\n      <div style={{ marginBottom: '15px' }}>\n        <label style={{ display: 'flex', alignItems: 'center' }}>\n          <input type=\"checkbox\" {...register('isStudent')} style={{ marginRight: '5px' }}/>\n          Are you a student?\n        </label>\n      </div>\n\n      {isStudent && (\n        <div style={{ marginBottom: '15px' }}>\n          <label htmlFor=\"studentId\" style={{ display: 'block', marginBottom: '5px' }}>Student ID:</label>\n          <input id=\"studentId\" {...register('studentId')} style={{ width: '100%', padding: '8px', boxSizing: 'border-box' }}/>\n          {errors.studentId && <p style={{color: 'red', fontSize: '0.8em', marginTop: '5px'}}>{errors.studentId.message}</p>}\n        </div>\n      )}\n\n      <button type=\"submit\" disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '5px', cursor: 'pointer' }}>\n        {isSubmitting ? 'Registering...' : 'Register'}\n      </button>\n    </form>\n  );\n}\n\nexport default RegistrationForm;\n",
          "testCases": [
            "**Empty Submission:** Submit the form with all fields empty. Verify all 'required' error messages appear.",
            "**Invalid Email:** Enter 'test' in email. Verify 'Invalid email format' error.",
            "**Short Password:** Enter 'pass123' in password. Verify 'at least 8 characters' error.",
            "**Weak Password:** Enter 'password123' in password. Verify errors for missing uppercase, special characters.",
            "**Mismatched Passwords:** Enter 'Pass123!A' in password and 'Pass123!B' in confirm password. Verify 'Passwords must match' error.",
            "**Student Field Not Visible/Required:** Ensure `studentId` is not visible or required when 'Are you a student?' is unchecked.",
            "**Student Field Visible/Required:** Check 'Are you a student?', then leave `studentId` empty. Verify `studentId` field appears and shows 'Student ID is required' error.",
            "**Successful Submission:** Fill all fields correctly (including `studentId` if `isStudent` is checked). Verify console log and alert of successful submission, and submit button disables/enables correctly."
          ],
          "hints": [
            "For password complexity, Yup's `.matches()` method with regular expressions is very powerful.",
            "To make one field's validation dependent on another (like `confirmPassword` matching `password` or `studentId` being required conditionally), use `yup.ref()` or `yup.string().when()`.",
            "To conditionally render `studentId` based on `isStudent`'s value, use `watch('isStudent')` to get its live value.",
            "Consider setting `mode: 'onBlur'` or `mode: 'onChange'` in `useForm` for immediate validation feedback.",
            "Remember to `import * as yup from 'yup';` and use `yup.object().required()` for the root schema."
          ],
          "tags": [
            "React Hook Form",
            "Yup",
            "Validation",
            "Conditional Logic",
            "Forms",
            "UI/UX"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React Hooks",
            "Yup Library",
            "Basic HTML Forms"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Schema Validation",
            "Conditional Rendering",
            "RegEx",
            "Form Submission"
          ]
        }
      ]
    }
  },
  {
    "id": "11b51687-0a07-43c6-a331-9ab5f08e5839",
    "startLine": 14500,
    "endLine": 14599,
    "processedDate": "2025-06-17T13:59:40.410Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_form_best_practices",
          "title": "Form Submission Best Practices in React",
          "content": "Form handling is a crucial part of web development, and implementing forms correctly ensures a good user experience, data integrity, and security. In React, several best practices emerge for managing form state, validation, and accessibility.\n\n## Key Concepts\n\n### 1. Client-side and Server-side Validation\n\n**Client-side validation** provides immediate feedback to the user, improving user experience by preventing unnecessary server requests and guiding the user to correct errors quickly. It checks input formats, required fields, and basic constraints.\n\n**Server-side validation** is absolutely essential for security and data integrity. Client-side validation can be bypassed, so all data submitted to the server *must* be re-validated on the server. This prevents malicious data injection, ensures business logic is adhered to, and guards against corrupted data.\n\n### 2. Controlled Components\n\nIn React, a 'controlled component' is a form element (like `<input>`, `<textarea>`, or `<select>`) whose value is controlled by React state. The state is the single source of truth. When the user types into a controlled input, an `onChange` event handler updates the component's state, and the input's `value` prop is then re-rendered with the new state. This provides a clear, reactive way to manage form data.\n\n### 3. Form Libraries for Complex Forms\n\nFor forms with many fields, complex validation rules, or multi-step flows, managing state and logic manually can become cumbersome. Libraries like Formik, React Hook Form, or Redux Form abstract away much of the boilerplate, providing:\n-   Simplified state management for form values, errors, and touched fields.\n-   Declarative validation schemas (e.g., using Yup or Zod).\n-   Performance optimizations (e.g., preventing unnecessary re-renders).\n-   Helpers for submission, resetting, and field-level interactions.\n\n### 4. Proper Error Handling\n\nClear and timely error messages are vital for user experience. Errors should be displayed inline, close to the problematic input field, and clearly explain what went wrong and how to fix it. This includes:\n-   **Validation errors**: Informing the user about incorrect input format or missing fields.\n-   **Submission errors**: Handling network issues, server-side validation failures, or other backend problems.\n\n### 5. ARIA Attributes for Accessibility\n\nARIA (Accessible Rich Internet Applications) attributes provide semantic meaning to elements, making web content and applications more accessible to people with disabilities, especially those using screen readers. For forms, common ARIA attributes include:\n-   `aria-labelledby` / `aria-describedby`: Linking labels/descriptions to form controls.\n-   `aria-required`: Indicating a required field.\n-   `aria-invalid`: Indicating an invalid input field.\n-   `aria-live`: For dynamic content updates, such as submission messages or real-time validation feedback.\n\n### 6. Visual Feedback During Submission\n\nWhen a user submits a form, especially if it involves an asynchronous operation (like an API call), it's important to provide visual feedback. This prevents the user from submitting the form multiple times, assures them that the action is being processed, and improves perceived performance. Examples include:\n-   Disabling the submit button.\n-   Displaying a loading spinner or progress bar.\n-   Changing the button text (e.g., \"Submitting...\").\n\n### 7. User Experience (UX) for Multi-step Forms\n\nMulti-step forms break down complex data collection into smaller, manageable sections. Good UX for these forms includes:\n-   **Progress indicators**: Clearly showing the user which step they are on and how many steps remain.\n-   **Clear navigation**: Obvious \"Next\" and \"Back\" buttons.\n-   **Data persistence**: Allowing users to navigate back and forth without losing previously entered data.\n-   **Error summaries**: Consolidating errors across steps before final submission.\n",
          "examples": [
            {
              "id": "example_form_best_practices_1",
              "title": "Basic Controlled Component with Client-Side Validation",
              "code": "import React, { useState } from 'react';\n\nfunction LoginForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const validateForm = () => {\n    let isValid = true;\n    setEmailError('');\n    setPasswordError('');\n\n    if (!email) {\n      setEmailError('Email is required.');\n      isValid = false;\n    } else if (!/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/.test(email)) {\n      setEmailError('Invalid email format.');\n      isValid = false;\n    }\n\n    if (!password) {\n      setPasswordError('Password is required.');\n      isValid = false;\n    } else if (password.length < 6) {\n      setPasswordError('Password must be at least 6 characters.');\n      isValid = false;\n    }\n\n    return isValid;\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    if (validateForm()) {\n      setIsSubmitting(true);\n      // Simulate API call\n      try {\n        await new Promise(resolve => setTimeout(resolve, 1500));\n        console.log('Form submitted successfully:', { email, password });\n        alert('Login successful!');\n        // Clear form or redirect\n      } catch (error) {\n        console.error('Submission error:', error);\n        alert('Login failed. Please try again.');\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '10px', maxWidth: '300px', margin: '20px auto', padding: '20px', border: '1px solid #ccc', borderRadius: '5px' }}>\n      <h2>Login</h2>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          aria-required=\"true\"\n          aria-invalid={!!emailError}\n          aria-describedby=\"email-error\"\n          disabled={isSubmitting}\n        />\n        {emailError && <div id=\"email-error\" style={{ color: 'red', fontSize: '0.8em' }}>{emailError}</div>}\n      </div>\n      <div>\n        <label htmlFor=\"password\">Password:</label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          aria-required=\"true\"\n          aria-invalid={!!passwordError}\n          aria-describedby=\"password-error\"\n          disabled={isSubmitting}\n        />\n        {passwordError && <div id=\"password-error\" style={{ color: 'red', fontSize: '0.8em' }}>{passwordError}</div>}\n      </div>\n      <button type=\"submit\" disabled={isSubmitting} style={{ padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n        {isSubmitting ? 'Logging in...' : 'Login'}\n      </button>\n    </form>\n  );\n}\n\nexport default LoginForm;\n",
              "explanation": "This example demonstrates a basic login form using React's `useState` hook to manage form input values, validation errors, and submission state. It showcases:\n-   **Controlled Components**: `email` and `password` inputs are bound to state variables.\n-   **Client-side Validation**: The `validateForm` function checks for required fields and basic format, providing immediate feedback.\n-   **Error Handling**: Error messages are displayed below the relevant input field.\n-   **Visual Feedback**: The submit button is disabled and its text changes during submission (`isSubmitting` state).\n-   **ARIA Attributes**: `aria-required`, `aria-invalid`, and `aria-describedby` are used to improve accessibility.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_form_best_practices_1",
            "question_form_best_practices_2",
            "question_form_best_practices_3",
            "question_form_best_practices_4",
            "question_form_best_practices_5",
            "question_form_best_practices_6",
            "question_form_best_practices_7",
            "question_form_best_practices_8",
            "question_form_best_practices_9"
          ],
          "relatedTasks": [
            "task_complex_registration_form"
          ],
          "tags": [
            "Forms",
            "React",
            "Validation",
            "Accessibility",
            "UX",
            "Controlled Components"
          ],
          "technology": "React",
          "prerequisites": [
            "React State Management",
            "Event Handling in React",
            "HTML Forms"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Complex Form Development",
            "User Input Handling",
            "Accessibility Best Practices"
          ]
        },
        {
          "id": "theory_focus_input_on_load",
          "title": "Focusing Input Elements on Page Load in React",
          "content": "A common UX requirement is to automatically focus an input field when a component mounts, such as a search bar on a search results page or the first field in a login form. In React, directly manipulating the DOM (like calling `.focus()`) should be done carefully, typically within lifecycle methods for class components or `useEffect` hooks for functional components.\n\n## Key Concepts\n\n### 1. Using Refs in React\n\nRefs provide a way to access DOM nodes or React elements created in the `render` method. They are primarily used for:\n-   Managing focus, text selection, or media playback.\n-   Triggering imperative animations.\n-   Integrating with third-party DOM libraries.\n\n### 2. Focusing in Class Components\n\nIn class components, you can use a ref callback or `React.createRef()` to get a reference to the DOM element. The `.focus()` method should then be called within `componentDidMount()`. This lifecycle method runs after the component has been rendered to the DOM, ensuring that the input element exists and can be focused.\n\n**Ref Callback**: A function passed to the `ref` prop. React calls this function with the DOM element when the component mounts, and `null` when it unmounts. This allows you to store a reference to the DOM node directly.\n\n### 3. Focusing in Functional Components with Hooks\n\nFunctional components utilize the `useRef` hook to create mutable ref objects and the `useEffect` hook to perform side effects after rendering. `useRef` returns a ref object whose `.current` property can be set to the DOM element. `useEffect` with an empty dependency array (`[]`) ensures that the effect runs only once after the initial render, mimicking `componentDidMount`.\n\n**`useRef`**: Returns a mutable ref object. The `current` property is initialized to the passed argument (`null` by default). This object will persist for the full lifetime of the component.\n\n**`useEffect`**: The function passed to `useEffect` runs after every render. With an empty dependency array `[]`, it runs only once after the initial render. This is the perfect place to perform DOM manipulations like focusing an input, as the DOM is guaranteed to be available.\n",
          "examples": [
            {
              "id": "example_focus_input_1",
              "title": "Focusing Input in a Class Component",
              "code": "import React from 'react';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.nameInput = null; // Initialize ref\n  }\n\n  componentDidMount() {\n    // Ensure the ref is set before calling focus\n    if (this.nameInput) {\n      this.nameInput.focus();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <p>Input below should automatically focus on page load.</p>\n        <input\n          ref={(input) => { this.nameInput = input; }} // Assign DOM node to ref property\n          defaultValue=\"Will focus\"\n          aria-label=\"Name input\"\n        />\n        <br/>\n        <input\n          defaultValue=\"Won't focus\"\n          aria-label=\"Another input\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n",
              "explanation": "This example shows how to use a ref callback in a class component. The `ref` prop of the `<input>` element is set to a function that assigns the DOM node to `this.nameInput`. In `componentDidMount`, which runs after the component is mounted to the DOM, `this.nameInput.focus()` is called to set the focus on the input field. A check `if (this.nameInput)` is added for robustness, although in `componentDidMount`, the ref should already be set.",
              "language": "typescript"
            },
            {
              "id": "example_focus_input_2",
              "title": "Focusing Input in a Functional Component with Hooks",
              "code": "import React, { useRef, useEffect } from 'react';\n\nfunction App() {\n  const inputRef = useRef(null); // Create a ref object\n\n  useEffect(() => {\n    // Access the DOM node via .current property\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []); // Empty dependency array ensures this runs only once on mount\n\n  return (\n    <div>\n      <p>Input below should automatically focus on page load.</p>\n      <input ref={inputRef} aria-label=\"Auto-focused input\" />\n    </div>\n  );\n}\n\nexport default App;\n",
              "explanation": "This example uses React Hooks to achieve the same functionality in a functional component. `useRef(null)` creates a mutable ref object `inputRef`. This `inputRef` object is then passed to the `ref` prop of the `<input>` element, causing React to assign the DOM element to `inputRef.current` when the component mounts. The `useEffect` hook, with an empty dependency array `[]`, ensures that the effect (calling `inputRef.current.focus()`) runs only once after the initial render, when the DOM node is guaranteed to be available.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_focus_input_1",
            "question_focus_input_2",
            "question_focus_input_3",
            "question_focus_input_4",
            "question_focus_input_5",
            "question_focus_input_6"
          ],
          "relatedTasks": [
            "task_autofocus_search_component"
          ],
          "tags": [
            "React",
            "Refs",
            "Hooks",
            "useEffect",
            "useRef",
            "DOM Manipulation",
            "UX"
          ],
          "technology": "React",
          "prerequisites": [
            "React Components",
            "React Lifecycle Methods",
            "React Hooks Basics"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Custom Hooks",
            "Imperative DOM Operations",
            "Accessibility Features"
          ]
        },
        {
          "id": "theory_rerender_on_resize",
          "title": "Re-rendering React Components on Browser Resize",
          "content": "React components often need to adapt their layout or display based on the browser window's dimensions. To achieve this, you can listen to the global `resize` event and update the component's state, triggering a re-render with the new dimensions. Proper event listener management is crucial to prevent memory leaks and optimize performance.\n\n## Key Concepts\n\n### 1. The `resize` Event\n\nThe `window.resize` event fires when the document view (window) has been resized. It's a standard DOM event that can be listened to directly.\n\n### 2. Managing Event Listeners in Class Components\n\n-   **Adding Listener (`componentDidMount`)**: Event listeners should be added in `componentDidMount()`. This ensures the component has mounted and the `window` object is available. It runs only once after the initial render.\n-   **Removing Listener (`componentWillUnmount`)**: It's critical to remove event listeners in `componentWillUnmount()`. This lifecycle method runs just before the component is unmounted and destroyed. Failing to remove listeners can lead to memory leaks (the listener function holds a reference to the unmounted component, preventing garbage collection) and unexpected behavior (listeners trying to update state on non-existent components).\n\n### 3. Managing Event Listeners in Functional Components with Hooks\n\n-   **`useEffect` for Subscriptions**: The `useEffect` hook is used for side effects, including setting up subscriptions like event listeners. The function passed to `useEffect` can return a cleanup function. This cleanup function runs when the component unmounts or before the effect re-runs (if dependencies change).\n-   **Cleanup Function**: By returning a function from `useEffect`, you tell React to run this cleanup when the component unmounts. For event listeners, this is where you call `window.removeEventListener()`.\n-   **Dependency Array**: An empty dependency array (`[]`) for `useEffect` means the effect runs once after the initial render and its cleanup runs only when the component unmounts. This behavior perfectly mimics `componentDidMount` and `componentWillUnmount` for this use case.\n\n### 4. Performance Optimization: Debouncing and Throttling\n\nThe `resize` event can fire very rapidly, potentially leading to a large number of state updates and re-renders, which can degrade performance. To mitigate this, **debouncing** or **throttling** the event handler is highly recommended.\n-   **Debouncing**: Delays the execution of the function until a certain amount of time has passed without any further events. Only the *last* call in a series of rapid calls executes.\n-   **Throttling**: Limits the rate at which a function can be called. The function will execute at most once per a given time period.\n\nFor `resize` events, debouncing is often preferred as you typically only care about the final window dimensions after the user has finished resizing.\n",
          "examples": [
            {
              "id": "example_rerender_on_resize_1",
              "title": "Re-rendering on Resize in a Class Component",
              "code": "import React from 'react';\n\nclass WindowDimensions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { width: 0, height: 0 };\n    this.updateDimensions = this.updateDimensions.bind(this); // Bind 'this' to the handler\n  }\n\n  componentDidMount() {\n    this.updateDimensions(); // Set initial dimensions\n    window.addEventListener('resize', this.updateDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.updateDimensions);\n  }\n\n  updateDimensions() {\n    this.setState({ \n      width: window.innerWidth,\n      height: window.innerHeight \n    });\n  }\n\n  render() {\n    return (\n      <div style={{ padding: '20px', border: '1px solid #ccc', margin: '20px', display: 'inline-block' }}>\n        <h2>Window Dimensions (Class Component)</h2>\n        <p>Width: {this.state.width}px</p>\n        <p>Height: {this.state.height}px</p>\n      </div>\n    );\n  }\n}\n\nexport default WindowDimensions;\n",
              "explanation": "This class component example demonstrates how to track window dimensions. `componentDidMount` adds the `resize` event listener and calls `updateDimensions` once to set the initial state. The `updateDimensions` method updates the component's state with `window.innerWidth` and `window.innerHeight`, triggering a re-render. Crucially, `componentWillUnmount` removes the event listener to prevent memory leaks when the component is no longer in the DOM. The `updateDimensions` method is also bound to `this` in the constructor to ensure `this` refers to the component instance inside the event handler.",
              "language": "typescript"
            },
            {
              "id": "example_rerender_on_resize_2",
              "title": "Re-rendering on Resize in a Functional Component with Hooks (and Debounce)",
              "code": "import React, { useState, useEffect, useCallback } from 'react';\n\n// Helper for debouncing a function\nconst debounce = (func, delay) => {\n  let timeoutId;\n  return (...args) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      func.apply(this, args);\n    }, delay);\n  };\n};\n\nfunction WindowDimensionsHooks() {\n  const [dimensions, setDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  // Using useCallback to memoize the debounced function, preventing re-creation on every render\n  const handleResize = useCallback(\n    debounce(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, 200), // Debounce by 200ms\n    [] // Dependency array for useCallback ensures the debounced function is created only once\n  );\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize);\n\n    // Cleanup function: runs when component unmounts or before effect re-runs\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [handleResize]); // Dependency array: re-run effect if handleResize changes (which it won't due to useCallback([]))\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ccc', margin: '20px', display: 'inline-block' }}>\n      <h2>Window Dimensions (Functional Component)</h2>\n      <p>Width: {dimensions.width}px</p>\n      <p>Height: {dimensions.height}px</p>\n    </div>\n  );\n}\n\nexport default WindowDimensionsHooks;\n",
              "explanation": "This example uses React Hooks (`useState`, `useEffect`, `useCallback`) and demonstrates a more robust approach with debouncing.\n-   `useState` manages the `dimensions` state.\n-   `debounce` is a helper function that returns a debounced version of `setDimensions` logic.\n-   `useCallback` is used to memoize `handleResize`. This is important because without it, `debounce` would be called on every render, creating a new `handleResize` function each time. This new function would cause `useEffect` to re-run unnecessarily, potentially re-attaching the listener.\n-   `useEffect` adds the event listener. Its cleanup function (returned by the effect) removes the listener. The empty dependency array ensures the effect runs only once on mount and cleans up on unmount. The `[handleResize]` dependency array for `useEffect` ensures the listener is correctly managed if `handleResize` itself were to change (which it won't here due to `useCallback([])`).\n-   The `debounce` function ensures that `setDimensions` is only called after the user has stopped resizing the window for 200 milliseconds, preventing excessive re-renders and improving performance.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_rerender_on_resize_1",
            "question_rerender_on_resize_2",
            "question_rerender_on_resize_3",
            "question_rerender_on_resize_4",
            "question_rerender_on_resize_5",
            "question_rerender_on_resize_6",
            "question_rerender_on_resize_7"
          ],
          "relatedTasks": [
            "task_responsive_header"
          ],
          "tags": [
            "React",
            "Lifecycle Methods",
            "Hooks",
            "useEffect",
            "Event Listeners",
            "Performance",
            "Debounce",
            "Throttling"
          ],
          "technology": "React",
          "prerequisites": [
            "React State Management",
            "React Lifecycle Methods",
            "React Hooks Basics",
            "JavaScript Event Handling"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Responsive Design",
            "Performance Optimization",
            "Custom Hooks Development"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_form_best_practices_1",
          "topic": "Form Submission Validation",
          "level": "easy",
          "type": "mcq",
          "question": "Why is it considered a best practice to validate form data on both the client-side and the server-side?",
          "answer": "Client-side validation enhances user experience and performance, while server-side validation is crucial for security and data integrity.",
          "options": [
            "Client-side validation ensures security, and server-side validation ensures performance.",
            "Server-side validation is for UX, and client-side validation is for data integrity.",
            "Client-side validation enhances user experience and performance, while server-side validation is crucial for security and data integrity.",
            "Both client and server-side validation are only for performance optimization."
          ],
          "analysisPoints": [
            "Client-side validation provides immediate feedback, improving UX and reducing server load by catching simple errors early.",
            "Server-side validation is paramount for security because client-side checks can be easily bypassed by malicious users or faulty clients.",
            "Server-side validation ensures that data conforms to business rules and maintains database integrity, regardless of the client's behavior.",
            "Neglecting server-side validation can lead to security vulnerabilities, corrupted data, and application malfunctions."
          ],
          "keyConcepts": [
            "Client-side validation",
            "Server-side validation",
            "User Experience (UX)",
            "Security",
            "Data Integrity",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental purpose of each validation type.",
            "Ability to differentiate between UX/performance benefits and security/integrity benefits.",
            "Recognition of the critical role of server-side validation."
          ],
          "example": "Client-side validation offers instant feedback (e.g., 'Email format is invalid'), saving a round trip to the server. Server-side validation catches sophisticated attacks (e.g., SQL injection attempts) or ensures data consistency (e.g., uniqueness checks for usernames) even if the client-side script is tampered with.",
          "tags": [
            "Forms",
            "Validation",
            "Security",
            "UX",
            "Performance"
          ],
          "prerequisites": [
            "HTML Forms",
            "Basic Web Security"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_best_practices_2",
          "topic": "Controlled Components in React",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following best describes a 'controlled component' in React?",
          "answer": "A form element whose value is managed by React state and updated via an `onChange` handler.",
          "options": [
            "A form element that manages its own internal state.",
            "A form element whose value is set once and never changes.",
            "A form element whose value is managed by React state and updated via an `onChange` handler.",
            "Any HTML form element used within a React component."
          ],
          "analysisPoints": [
            "Controlled components mean that React component state is the 'single source of truth' for the input's value.",
            "The `value` prop is explicitly set by the component's state, making the component responsible for rendering the input's value.",
            "An `onChange` event handler is necessary to update the component's state whenever the input value changes, thereby triggering a re-render and updating the input's displayed value.",
            "This pattern allows for easy implementation of validation, formatting, and conditional enabling/disabling of inputs."
          ],
          "keyConcepts": [
            "Controlled Components",
            "React State",
            "`onChange` Event",
            "Single Source of Truth",
            "Form Management"
          ],
          "evaluationCriteria": [
            "Accurate definition of a controlled component.",
            "Understanding the role of React state and event handlers.",
            "Distinguishing from uncontrolled components."
          ],
          "example": "```jsx\nimport React, { useState } from 'react';\n\nfunction MyControlledInput() {\n  const [inputValue, setInputValue] = useState('');\n\n  const handleChange = (event) => {\n    setInputValue(event.target.value);\n  };\n\n  return (\n    <input type=\"text\" value={inputValue} onChange={handleChange} />\n  );\n}\n```\nIn this example, `inputValue` from `useState` controls the `value` prop of the input. Any change to the input triggers `handleChange`, which updates `inputValue`, and React then re-renders the input with the new value. The state `inputValue` is the single source of truth.",
          "tags": [
            "React",
            "Forms",
            "State Management",
            "Controlled Components"
          ],
          "prerequisites": [
            "React State",
            "Event Handling in React"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_best_practices_3",
          "topic": "Form Libraries",
          "level": "easy",
          "type": "flashcard",
          "question": "Name two popular React form libraries that simplify complex form management.",
          "answer": "Formik and React Hook Form.",
          "analysisPoints": [
            "These libraries provide abstractions for common form challenges.",
            "They typically handle state management, validation, submission, and accessibility concerns.",
            "Other notable libraries include Redux Form."
          ],
          "keyConcepts": [
            "Form Libraries",
            "Formik",
            "React Hook Form",
            "Form Management"
          ],
          "evaluationCriteria": [
            "Recall of prominent React form libraries."
          ],
          "example": "Formik simplifies form setup with `handleChange`, `handleBlur`, `handleSubmit` props, and integrated validation. React Hook Form focuses on performance by using uncontrolled components and native browser validation.",
          "tags": [
            "Forms",
            "Libraries",
            "React"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_form_best_practices_4",
          "topic": "Accessibility in Forms",
          "level": "medium",
          "type": "open",
          "question": "Explain the importance of ARIA attributes in form development and provide examples of how they are used.",
          "answer": "ARIA (Accessible Rich Internet Applications) attributes are crucial for making web forms accessible to users with disabilities, particularly those who rely on assistive technologies like screen readers. HTML alone often lacks the semantic information needed for complex UI components or dynamic updates. ARIA attributes bridge this gap by providing additional semantic meaning and conveying component states and properties to assistive technologies.\n\n**Importance:**\n1.  **Semantic Clarity**: They clarify the purpose and state of interactive elements for screen readers (e.g., is a field required, is it invalid, what is its description?).\n2.  **Navigation**: They can improve navigation for keyboard users and screen reader users by providing labels and descriptions where native HTML falls short.\n3.  **Dynamic Updates**: For real-time validation feedback or submission messages, ARIA live regions (`aria-live`) ensure that dynamic content changes are announced to the user without requiring them to manually refresh or navigate.\n\n**Examples:**\n*   `aria-required=\"true\"`: Indicates that a form field is mandatory. Screen readers will announce this to the user.\n    ```html\n    <label for=\"username\">Username</label>\n    <input type=\"text\" id=\"username\" aria-required=\"true\">\n    ```\n*   `aria-invalid=\"true\"` and `aria-describedby`: When a field has a validation error, `aria-invalid=\"true\"` informs assistive technologies that the input's value is not valid. `aria-describedby` links the input to an element that provides a description or error message.\n    ```html\n    <label for=\"email\">Email</label>\n    <input\n      type=\"email\"\n      id=\"email\"\n      aria-required=\"true\"\n      aria-invalid=\"true\" \n      aria-describedby=\"email-error-message\"\n    />\n    <div id=\"email-error-message\" style=\"color: red;\">Please enter a valid email address.</div>\n    ```\n*   `role=\"alert\"` with `aria-live=\"assertive\"`: For critical, time-sensitive error messages or success notifications that appear dynamically, `aria-live` ensures they are immediately announced.\n    ```html\n    <div role=\"alert\" aria-live=\"assertive\" style=\"color: green;\">\n      Form submitted successfully!\n    </div>\n    ```\nUsing these attributes ensures that all users, regardless of their abilities, can understand, interact with, and successfully complete forms.",
          "analysisPoints": [
            "Defining ARIA attributes and their purpose.",
            "Explaining the benefits for accessibility (screen readers, keyboard navigation).",
            "Providing concrete, correct examples of common ARIA attributes in form context.",
            "Understanding how ARIA contributes to semantic meaning and dynamic content announcements."
          ],
          "keyConcepts": [
            "ARIA Attributes",
            "Accessibility",
            "Screen Readers",
            "Semantic HTML",
            "User Experience (UX)",
            "Inclusive Design"
          ],
          "evaluationCriteria": [
            "Thorough understanding of ARIA's role.",
            "Ability to cite specific ARIA attributes and their application.",
            "Clear explanation of why they are important."
          ],
          "example": null,
          "tags": [
            "Accessibility",
            "ARIA",
            "Forms",
            "UX",
            "HTML"
          ],
          "prerequisites": [
            "HTML Forms",
            "Web Accessibility Basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_form_best_practices_5",
          "topic": "Visual Feedback on Form Submission",
          "level": "medium",
          "type": "flashcard",
          "question": "What kind of visual feedback should be provided to users during form submission, and why?",
          "answer": "During form submission, provide visual feedback like disabling the submit button, showing a loading spinner/progress bar, or changing button text (e.g., 'Submitting...'). This prevents multiple submissions, assures the user the action is processing, and improves perceived performance.",
          "analysisPoints": [
            "Identifying common visual feedback elements.",
            "Explaining the user experience benefits (preventing double clicks, reassuring user, perceived performance).",
            "Relating feedback to asynchronous operations."
          ],
          "keyConcepts": [
            "Visual Feedback",
            "Form Submission",
            "User Experience (UX)",
            "Asynchronous Operations",
            "Loading States"
          ],
          "evaluationCriteria": [
            "Knowledge of UX best practices for forms.",
            "Understanding the 'why' behind the feedback."
          ],
          "example": "```jsx\n// Example of disabling button and changing text\n<button type=\"submit\" disabled={isSubmitting}>\n  {isSubmitting ? 'Sending...' : 'Submit'}\n</button>\n\n// Example of showing a spinner\n{isSubmitting && <div className=\"spinner\"></div>}\n```",
          "tags": [
            "Forms",
            "UX",
            "Visual Feedback",
            "Loading State"
          ],
          "prerequisites": [
            "React State",
            "Conditional Rendering"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_best_practices_6",
          "topic": "Multi-Step Forms UX",
          "level": "easy",
          "type": "flashcard",
          "question": "What are two key UX considerations for designing multi-step forms?",
          "answer": "Progress indicators to show current step and total steps, and clear navigation (e.g., 'Next' and 'Back' buttons) that preserves previously entered data.",
          "analysisPoints": [
            "Focus on guiding the user through the process.",
            "Ensuring data is not lost.",
            "Indicating progress and allowing flexible navigation."
          ],
          "keyConcepts": [
            "Multi-step Forms",
            "User Experience (UX)",
            "Progress Indicators",
            "Form Navigation",
            "Data Persistence"
          ],
          "evaluationCriteria": [
            "Understanding of common multi-step form challenges.",
            "Ability to suggest relevant UX solutions."
          ],
          "example": null,
          "tags": [
            "Forms",
            "UX",
            "Multi-step"
          ],
          "prerequisites": [
            "UI/UX Principles"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_best_practices_7",
          "topic": "Uncontrolled Components",
          "level": "medium",
          "type": "open",
          "question": "What is an 'uncontrolled component' in React, and when might you use one?",
          "answer": "An 'uncontrolled component' in React is a form element where the form data is handled by the DOM itself, rather than by React state. In an uncontrolled component, you access the form's data directly from the DOM using a ref, typically after a submission event, instead of managing its value with state and `onChange` handlers.\n\n**When to use an uncontrolled component:**\n1.  **Simple Forms**: For very basic forms where you only need to get the value once (e.g., on submission) and don't require instant validation or complex state synchronization.\n2.  **Performance Optimization**: For forms with a large number of inputs where updating React state on every keystroke (`onChange`) might introduce performance overhead. However, this is less of an issue with modern React and optimized controlled component patterns (e.g., React Hook Form's approach which leverages uncontrolled inputs for performance).\n3.  **Integrating with Non-React Code**: When working with traditional HTML form elements or a third-party DOM library that expects to manage its own internal state.\n4.  **File Inputs**: The `input type=\"file\"` is always an uncontrolled component because its value is read-only and can only be set by a user interaction, not programmatically.",
          "analysisPoints": [
            "Clear definition of an uncontrolled component (DOM-managed state).",
            "Correct mechanism for accessing values (refs).",
            "Appropriate use cases (simplicity, performance, integration, file inputs).",
            "Contrast with controlled components without explicitly mentioning the term 'controlled' if the question doesn't ask for it directly."
          ],
          "keyConcepts": [
            "Uncontrolled Components",
            "React Refs",
            "DOM Manipulation",
            "Form Data Access",
            "Performance",
            "File Input"
          ],
          "evaluationCriteria": [
            "Accurate definition and understanding of how data is managed.",
            "Ability to identify valid use cases.",
            "Awareness of when it might be preferred or necessary."
          ],
          "example": "```jsx\nimport React, { useRef } from 'react';\n\nfunction MyUncontrolledInput() {\n  const inputRef = useRef(null);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    alert(`Submitted value: ${inputRef.current.value}`);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <label>\n        Name:\n        <input type=\"text\" ref={inputRef} defaultValue=\"Initial Value\" />\n      </label>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```\nIn this example, the input's value is not controlled by React state. Instead, `useRef` is used to get a direct reference to the DOM input element, and its value is accessed from `inputRef.current.value` only when the form is submitted.",
          "tags": [
            "React",
            "Forms",
            "Refs",
            "Uncontrolled Components"
          ],
          "prerequisites": [
            "React State",
            "React Refs"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_best_practices_8",
          "topic": "Form Best Practices - Code Implementation",
          "level": "medium",
          "type": "code",
          "question": "Refactor the following component to use a controlled input, display a client-side validation error if the email is empty or invalid, and disable the submit button during a simulated submission.",
          "answer": "```jsx\nimport React, { useState } from 'react';\n\nfunction UserRegistrationForm() {\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const validateEmail = (inputEmail) => {\n    if (!inputEmail.trim()) {\n      return 'Email cannot be empty.';\n    }\n    if (!/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/.test(inputEmail)) {\n      return 'Please enter a valid email address.';\n    }\n    return ''; // No error\n  };\n\n  const handleChange = (e) => {\n    const newEmail = e.target.value;\n    setEmail(newEmail);\n    setEmailError(validateEmail(newEmail)); // Validate on change\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const validationMessage = validateEmail(email);\n    if (validationMessage) {\n      setEmailError(validationMessage);\n      return;\n    }\n\n    setIsSubmitting(true);\n    console.log('Submitting email:', email);\n\n    // Simulate API call\n    try {\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      alert('Registration successful for: ' + email);\n      setEmail(''); // Clear form on success\n      setEmailError('');\n    } catch (error) {\n      console.error('Submission failed:', error);\n      setEmailError('Submission failed. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} style={{ display: 'flex', flexDirection: 'column', gap: '10px', maxWidth: '300px', margin: '20px auto', padding: '20px', border: '1px solid #ccc', borderRadius: '5px' }}>\n      <h2>Register</h2>\n      <div>\n        <label htmlFor=\"emailInput\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"emailInput\"\n          value={email}\n          onChange={handleChange}\n          aria-required=\"true\"\n          aria-invalid={!!emailError}\n          aria-describedby=\"email-error-message\"\n          disabled={isSubmitting}\n        />\n        {emailError && <div id=\"email-error-message\" style={{ color: 'red', fontSize: '0.8em' }}>{emailError}</div>}\n      </div>\n      <button type=\"submit\" disabled={isSubmitting}>\n        {isSubmitting ? 'Registering...' : 'Register'}\n      </button>\n    </form>\n  );\n}\n\nexport default UserRegistrationForm;\n```",
          "options": [],
          "analysisPoints": [
            "Correct usage of `useState` for `email`, `emailError`, and `isSubmitting` states.",
            "Input's `value` prop is controlled by the `email` state.",
            "`onChange` handler updates the `email` state and triggers validation.",
            "A separate `validateEmail` function encapsulates validation logic.",
            "Error message is conditionally rendered next to the input.",
            "Submit button's `disabled` prop is tied to `isSubmitting` state.",
            "Simulated asynchronous submission demonstrates `isSubmitting` state transition.",
            "Form submission `preventDefault()` is used.",
            "Proper ARIA attributes (`aria-required`, `aria-invalid`, `aria-describedby`) are applied."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Client-side Validation",
            "State Management",
            "Event Handling",
            "Conditional Rendering",
            "Asynchronous Operations",
            "Form Submission",
            "Accessibility (ARIA)"
          ],
          "evaluationCriteria": [
            "Ability to implement controlled components correctly.",
            "Proficiency in client-side validation logic.",
            "Correct handling of loading states for UI feedback.",
            "Application of basic accessibility features.",
            "Clean code structure and separation of concerns."
          ],
          "example": null,
          "tags": [
            "React",
            "Forms",
            "Validation",
            "Controlled Components",
            "State Management",
            "Code Challenge"
          ],
          "prerequisites": [
            "React State",
            "Event Handling",
            "JavaScript Async/Await"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_best_practices_9",
          "topic": "Form Performance",
          "level": "hard",
          "type": "open",
          "question": "Discuss potential performance considerations when dealing with large or frequently updating forms in React, and how form libraries like React Hook Form address some of these issues.",
          "answer": "When dealing with large forms (many fields) or forms that update frequently (e.g., real-time validation on every keystroke), performance can become a concern due to excessive re-renders. Every state update in a controlled component causes the component (and potentially its children) to re-render. With many inputs, this can lead to noticeable lag.\n\n**Potential Performance Considerations:**\n1.  **Excessive Re-renders**: Each `onChange` event in a controlled component triggers a state update, which leads to a re-render. In a form with 50 inputs, 50 re-renders can occur with very little user interaction.\n2.  **Re-running Validation Logic**: If validation logic is complex or runs on every keystroke, it can be computationally expensive and contribute to performance bottlenecks.\n3.  **Context Re-renders**: If form state is managed via React Context, updates can trigger re-renders for all consumers of that context, leading to widespread unnecessary re-renders across the component tree.\n\n**How React Hook Form Addresses These Issues:**\nReact Hook Form (RHF) is designed with performance in mind, primarily by:\n1.  **Leveraging Uncontrolled Components (by default)**: RHF uses refs to access input values directly from the DOM, rather than binding them to React state. This means `onChange` handlers typically don't trigger re-renders of the component until submission or when specific events (like `onBlur` or explicit validation triggers) occur. This significantly reduces the number of re-renders during user input.\n2.  **Optimized Re-renders**: RHF's `useForm` hook only re-renders the component when form state that *you subscribe to* (e.g., `errors`, `isSubmitting`, `isValid`) changes, not on every input value change. It uses internal mechanisms to track input values efficiently without triggering a React re-render of the entire form component for every keystroke.\n3.  **Separation of Concerns**: It separates form state from component state. The input values are held by the native DOM inputs, and RHF only interacts with them when needed (e.g., to get values for submission or run validation).\n4.  **Batching Updates**: RHF often batches internal state updates, reducing the overall number of re-renders.\n5.  **Schema-based Validation**: It integrates seamlessly with schema validation libraries like Zod or Yup, allowing for efficient, optimized validation that can be triggered precisely when needed (e.g., `onBlur`, `onSubmit`).\n\nBy minimizing re-renders and optimizing how form state changes trigger React updates, RHF helps maintain a smooth user experience even with very complex forms.",
          "analysisPoints": [
            "Identify the core performance problem (excessive re-renders due to controlled component pattern).",
            "Mention specific areas of concern (state updates, validation re-runs, context re-renders).",
            "Explain RHF's fundamental approach (uncontrolled inputs with refs).",
            "Describe how RHF minimizes re-renders (only re-render on subscribed state changes, not input value changes).",
            "Highlight other RHF benefits (validation integration, batching).",
            "Compare implicitely with traditional controlled components."
          ],
          "keyConcepts": [
            "Form Performance",
            "Controlled vs. Uncontrolled Components",
            "React Hook Form",
            "Re-renders",
            "Optimization",
            "Validation",
            "React Context"
          ],
          "evaluationCriteria": [
            "Deep understanding of React rendering mechanisms in forms.",
            "Knowledge of performance bottlenecks specific to forms.",
            "Ability to explain how a modern library like RHF addresses these issues at a technical level.",
            "Clear and structured explanation."
          ],
          "example": null,
          "tags": [
            "React",
            "Forms",
            "Performance",
            "Optimization",
            "React Hook Form",
            "Advanced"
          ],
          "prerequisites": [
            "React Rendering",
            "Controlled/Uncontrolled Components",
            "React Hooks"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_focus_input_1",
          "topic": "Focusing Input - Class Components",
          "level": "easy",
          "type": "flashcard",
          "question": "Which React class component lifecycle method is best suited for focusing an input element on initial page load?",
          "answer": "`componentDidMount()`",
          "analysisPoints": [
            "`componentDidMount` runs after the component has been rendered to the DOM.",
            "This ensures the DOM element (the input) is available for direct manipulation like calling `.focus()`."
          ],
          "keyConcepts": [
            "React Lifecycle Methods",
            "`componentDidMount`",
            "DOM Manipulation",
            "Refs"
          ],
          "evaluationCriteria": [
            "Recall of appropriate lifecycle method for DOM interaction."
          ],
          "example": null,
          "tags": [
            "React",
            "Class Components",
            "Lifecycle Methods",
            "Refs"
          ],
          "prerequisites": [
            "React Lifecycle"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_focus_input_2",
          "topic": "Focusing Input - Functional Components",
          "level": "easy",
          "type": "flashcard",
          "question": "Which React Hooks are used to focus an input element on initial page load in a functional component?",
          "answer": "`useRef` to get a reference to the DOM element and `useEffect` with an empty dependency array (`[]`) to perform the focus operation after mount.",
          "analysisPoints": [
            "`useRef` creates a mutable object that persists across renders and holds a reference to the DOM node in its `.current` property.",
            "`useEffect` with `[]` mimics `componentDidMount`, executing its callback once after the initial render when the DOM is ready."
          ],
          "keyConcepts": [
            "React Hooks",
            "`useRef`",
            "`useEffect`",
            "DOM Manipulation",
            "Functional Components"
          ],
          "evaluationCriteria": [
            "Recall of appropriate hooks for DOM interaction.",
            "Understanding of `useEffect` dependency array."
          ],
          "example": null,
          "tags": [
            "React",
            "Hooks",
            "useRef",
            "useEffect"
          ],
          "prerequisites": [
            "React Hooks Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_focus_input_3",
          "topic": "React Refs",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following React class component. What will be the outcome regarding input focus on initial render?",
          "answer": "Only the input with `ref={(input) => { this.myInput = input; }}` will receive focus.",
          "options": [
            "Both inputs will receive focus.",
            "Neither input will receive focus.",
            "Only the input with `defaultValue=\"Won't focus\"` will receive focus.",
            "Only the input with `ref={(input) => { this.myInput = input; }}` will receive focus."
          ],
          "analysisPoints": [
            "The `ref` attribute is used to gain direct access to the DOM element.",
            "Only the input explicitly assigned to `this.myInput` via the `ref` callback can be targeted by `this.myInput.focus()`.",
            "`defaultValue` only sets the initial value of an uncontrolled input and has no bearing on focus behavior.",
            "`componentDidMount` is the correct place to perform DOM manipulations after the component is rendered."
          ],
          "keyConcepts": [
            "React Refs",
            "Class Components",
            "DOM Manipulation",
            "Lifecycle Methods",
            "`componentDidMount`"
          ],
          "evaluationCriteria": [
            "Understanding of how `ref` callbacks work.",
            "Knowledge of `componentDidMount`'s execution timing.",
            "Ability to interpret code related to DOM interaction."
          ],
          "example": "```jsx\nclass MyComponent extends React.Component {\n  componentDidMount() {\n    if (this.myInput) {\n      this.myInput.focus();\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <input defaultValue=\"Won't focus\" />\n        <input\n          ref={(input) => { this.myInput = input; }}\n          defaultValue=\"Will focus\"\n        />\n      </div>\n    );\n  }\n}\n```",
          "tags": [
            "React",
            "Refs",
            "Class Components",
            "Focus",
            "DOM"
          ],
          "prerequisites": [
            "React Refs",
            "React Lifecycle"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_focus_input_4",
          "topic": "React Refs vs. State for Input Values",
          "level": "medium",
          "type": "open",
          "question": "When would you choose to use `useRef` to interact with an input element, as opposed to managing its value with `useState` and making it a controlled component? Provide examples.",
          "answer": "You would typically choose `useRef` to interact with an input element for imperative DOM manipulations that do not directly involve the input's value or where managing the value through React state is unnecessary or cumbersome. This is in contrast to `useState`, which creates a 'controlled component' where React state is the single source of truth for the input's value.\n\n**Reasons to use `useRef` (for imperative actions):**\n1.  **Managing Focus, Selection, or Media Playback**: Directly calling `.focus()`, `.select()`, or interacting with `<video>`/`<audio>` elements. This is the most common use case for `useRef` with inputs.\n    *   **Example**: Auto-focusing an input on component mount or providing a button to re-focus a specific input.\n        ```jsx\n        function SearchBar() {\n          const inputRef = useRef(null);\n          useEffect(() => {\n            inputRef.current.focus(); // Auto-focus on mount\n          }, []);\n          return <input ref={inputRef} placeholder=\"Search...\" />;\n        }\n        ```\n2.  **Integrating with Third-Party DOM Libraries**: When a library expects to manage its own DOM elements or needs direct access to them (e.g., a charting library, a complex date picker).\n    *   **Example**: Initializing a non-React charting library on a `<div>` or `<canvas>` element.\n        ```jsx\n        function ChartComponent() {\n          const canvasRef = useRef(null);\n          useEffect(() => {\n            const chart = new ThirdPartyChart(canvasRef.current);\n            // ... setup chart\n          }, []);\n          return <canvas ref={canvasRef} />;\n        }\n        ```\n3.  **Uncontrolled Components**: When you want to retrieve the value of an input only at the time of form submission, and you don't need to control its value or react to every keystroke via state.\n    *   **Example**: A simple form where you get the value only on submit, without needing real-time validation or intermediate state updates.\n        ```jsx\n        function LoginForm() {\n          const usernameRef = useRef(null);\n          const handleSubmit = (event) => {\n            event.preventDefault();\n            alert('Username: ' + usernameRef.current.value);\n          };\n          return (\n            <form onSubmit={handleSubmit}>\n              <input type=\"text\" ref={usernameRef} defaultValue=\"guest\" />\n              <button type=\"submit\">Login</button>\n            </form>\n          );\n        }\n        ```\n\n**When to use `useState` (for controlled components):**\n-   When you need to react to every change in the input (e.g., real-time validation, formatting, conditional UI updates based on input value).\n-   When the input's value needs to be part of the component's state or passed down to other components.\n-   This is the more common and recommended approach for most form inputs in React, as it provides a predictable and reactive data flow.",
          "analysisPoints": [
            "Clearly differentiate between `useRef`'s imperative nature and `useState`'s declarative state management for inputs.",
            "Provide specific, common use cases for `useRef` (focus, media, third-party libraries, uncontrolled components).",
            "Give clear code examples for each `useRef` scenario.",
            "Briefly explain when `useState` is preferred for context and comparison.",
            "Demonstrate understanding of React's philosophy regarding DOM manipulation."
          ],
          "keyConcepts": [
            "React Refs",
            "useRef Hook",
            "useState Hook",
            "Controlled Components",
            "Uncontrolled Components",
            "DOM Manipulation",
            "Imperative vs. Declarative"
          ],
          "evaluationCriteria": [
            "Deep understanding of `useRef` and `useState` functionalities.",
            "Ability to identify appropriate use cases for each.",
            "Clear and concise explanations with relevant examples.",
            "Demonstration of knowledge about React's philosophy on direct DOM access."
          ],
          "example": null,
          "tags": [
            "React",
            "Hooks",
            "useRef",
            "useState",
            "Controlled Components",
            "Uncontrolled Components",
            "DOM"
          ],
          "prerequisites": [
            "React Hooks",
            "Controlled/Uncontrolled Components"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_focus_input_5",
          "topic": "useEffect Dependency Array for Focus",
          "level": "medium",
          "type": "mcq",
          "question": "In a functional component, what is the purpose of passing an empty array `[]` as the second argument to `useEffect` when auto-focusing an input?",
          "answer": "It ensures the effect runs only once after the initial render, similar to `componentDidMount` in class components.",
          "options": [
            "It tells React to re-run the effect on every render.",
            "It prevents the effect from ever running.",
            "It ensures the effect runs only once after the initial render, similar to `componentDidMount` in class components.",
            "It makes the effect run whenever the input's value changes."
          ],
          "analysisPoints": [
            "The `useEffect` hook's second argument (dependency array) controls when the effect re-runs.",
            "An empty array `[]` means the effect has no dependencies that will change during the component's lifecycle after the first render.",
            "This behavior precisely matches `componentDidMount` (runs once after mount) and `componentWillUnmount` (cleanup runs once before unmount).",
            "This is crucial for side effects that should only happen once, like initial DOM manipulations or setting up subscriptions."
          ],
          "keyConcepts": [
            "React Hooks",
            "`useEffect`",
            "Dependency Array",
            "Lifecycle Methods",
            "`componentDidMount`",
            "DOM Manipulation"
          ],
          "evaluationCriteria": [
            "Correct understanding of `useEffect` dependency array's function.",
            "Ability to relate `useEffect` with `[]` to class component lifecycle.",
            "Understanding its importance for one-time effects."
          ],
          "example": "```jsx\nfunction MyAutoFocusComponent() {\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    // This will run only once after the first render\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []); // Empty array ensures this effect runs only on mount\n\n  return <input ref={inputRef} />;\n}\n```",
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Dependency Array",
            "Focus"
          ],
          "prerequisites": [
            "React Hooks Basics"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_focus_input_6",
          "topic": "Re-focusing Input",
          "level": "medium",
          "type": "code",
          "question": "Implement a functional React component that contains an input field. The input should automatically focus when the component mounts. Additionally, add a button that, when clicked, re-focuses the input field.",
          "answer": "```jsx\nimport React, { useRef, useEffect } from 'react';\n\nfunction AutoFocusAndRefocusInput() {\n  const inputRef = useRef(null);\n\n  // Effect to auto-focus on mount\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []); // Empty dependency array ensures this runs only once on mount\n\n  // Handler for the re-focus button\n  const handleRefocusClick = () => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ccc', margin: '20px auto', maxWidth: '400px', display: 'flex', flexDirection: 'column', gap: '15px' }}>\n      <h2>Auto-Focus & Re-Focus Input</h2>\n      <p>This input will focus automatically on load. Click the button to re-focus it.</p>\n      <input\n        ref={inputRef}\n        type=\"text\"\n        placeholder=\"Type something...\"\n        style={{ padding: '8px', fontSize: '1em' }}\n        aria-label=\"Focused input\"\n      />\n      <button onClick={handleRefocusClick} style={{ padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\n        Re-Focus Input\n      </button>\n    </div>\n  );\n}\n\nexport default AutoFocusAndRefocusInput;\n```",
          "options": [],
          "analysisPoints": [
            "Correct use of `useRef` to create a mutable ref object for the input element.",
            "Correct use of `useEffect` with an empty dependency array (`[]`) for initial auto-focus on mount.",
            "Correct implementation of an `onClick` handler on the button to imperatively call `inputRef.current.focus()`.",
            "Ensuring `inputRef.current` is checked for null before calling `.focus()` for robustness.",
            "Clear and functional component structure."
          ],
          "keyConcepts": [
            "React Hooks",
            "`useRef`",
            "`useEffect`",
            "DOM Manipulation",
            "Event Handling",
            "Imperative Programming"
          ],
          "evaluationCriteria": [
            "Ability to combine `useRef` and `useEffect` for DOM interaction.",
            "Competence in handling user events to trigger imperative actions.",
            "Code correctness and clarity."
          ],
          "example": null,
          "tags": [
            "React",
            "Hooks",
            "useRef",
            "useEffect",
            "DOM Manipulation",
            "Code Challenge"
          ],
          "prerequisites": [
            "React Hooks Basics",
            "Event Handling"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_rerender_on_resize_1",
          "topic": "Browser Resize Event - Class Components",
          "level": "easy",
          "type": "flashcard",
          "question": "In a React class component, where should you add and remove a `window.resize` event listener to avoid memory leaks?",
          "answer": "Add the listener in `componentDidMount()` and remove it in `componentWillUnmount()`.",
          "analysisPoints": [
            "`componentDidMount` ensures the component is in the DOM and the `window` object is available.",
            "`componentWillUnmount` ensures cleanup happens before the component is destroyed, preventing the listener from holding a reference to a non-existent component."
          ],
          "keyConcepts": [
            "React Lifecycle Methods",
            "`componentDidMount`",
            "`componentWillUnmount`",
            "Event Listeners",
            "Memory Leaks",
            "Cleanup"
          ],
          "evaluationCriteria": [
            "Recall of correct lifecycle methods for subscription management.",
            "Understanding the importance of cleanup."
          ],
          "example": null,
          "tags": [
            "React",
            "Class Components",
            "Lifecycle",
            "Event Listeners",
            "Memory Leaks"
          ],
          "prerequisites": [
            "React Lifecycle"
          ],
          "complexity": 3,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_rerender_on_resize_2",
          "topic": "Browser Resize Event - Functional Components",
          "level": "medium",
          "type": "mcq",
          "question": "Which `useEffect` setup is correct for listening to the `window.resize` event in a functional React component, ensuring proper cleanup?",
          "answer": "```jsx\nuseEffect(() => {\n  const handleResize = () => { /* ... */ };\n  window.addEventListener('resize', handleResize);\n  return () => window.removeEventListener('resize', handleResize);\n}, []);\n```",
          "options": [
            "```jsx\nuseEffect(() => {\n  window.addEventListener('resize', () => { /* ... */ });\n});\n```",
            "```jsx\nuseEffect(() => {\n  window.addEventListener('resize', () => { /* ... */ });\n});\nreturn () => window.removeEventListener('resize', () => { /* ... */ });\n```",
            "```jsx\nuseEffect(() => {\n  const handleResize = () => { /* ... */ };\n  window.addEventListener('resize', handleResize);\n  return () => window.removeEventListener('resize', handleResize);\n}, []);\n```",
            "```jsx\nuseEffect(() => {\n  window.addEventListener('resize', () => { /* ... */ });\n}, [window.innerWidth]);\n```"
          ],
          "analysisPoints": [
            "The effect function should return a cleanup function.",
            "The cleanup function must remove the *exact same* listener function that was added.",
            "An empty dependency array `[]` ensures the listener is added once on mount and removed once on unmount.",
            "Option A has no cleanup and will re-add listener on every render.",
            "Option B tries to return cleanup outside `useEffect`'s return.",
            "Option D creates a new anonymous function every time `window.innerWidth` changes, and attempts to re-add/remove it, which is inefficient and potentially problematic if `window.innerWidth` changes frequently without proper cleanup of the *previous* listener."
          ],
          "keyConcepts": [
            "React Hooks",
            "`useEffect`",
            "Dependency Array",
            "Cleanup Function",
            "Event Listeners",
            "Memory Leaks"
          ],
          "evaluationCriteria": [
            "Understanding of `useEffect`'s cleanup mechanism.",
            "Ability to correctly manage event listeners with hooks.",
            "Recognition of common pitfalls (no cleanup, incorrect dependency array)."
          ],
          "example": null,
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Event Listeners",
            "Cleanup",
            "Memory Leaks"
          ],
          "prerequisites": [
            "React Hooks Basics"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_rerender_on_resize_3",
          "topic": "Debouncing vs. Throttling for Resize Events",
          "level": "hard",
          "type": "open",
          "question": "Why is it important to debounce or throttle the `window.resize` event listener when updating component state in React? Explain the difference between debouncing and throttling and which is generally preferred for resize events.",
          "answer": "It is crucial to debounce or throttle the `window.resize` event listener because the `resize` event can fire **very rapidly and continuously** while a user is resizing the browser window. If an event handler updates component state on every single `resize` event, it can lead to:\n1.  **Excessive Re-renders**: Triggering numerous re-renders of the React component, which can be computationally expensive, especially if the component's render logic is complex or involves many DOM manipulations.\n2.  **Performance Degradation**: Janky animations, slow UI responses, or even browser crashes due to the high frequency of updates and layout recalculations.\n\n**Debouncing:**\n*   **Definition**: Debouncing ensures that a function is executed only *after* a specified period of inactivity (no further calls) has passed. If the function is called again within that period, the timer is reset, and the function is not executed until the new timer expires.\n*   **Analogy**: Waiting for an elevator. It only closes and leaves after no one has pressed the button for a few seconds.\n*   **Preferred for `resize`**: Debouncing is generally preferred for `window.resize` events because you typically only care about the *final* dimensions of the window once the user has finished resizing, not the intermediate dimensions during the resizing process. It reduces the number of state updates to just one after the user has settled on a window size.\n\n**Throttling:**\n*   **Definition**: Throttling limits the rate at which a function can be called. It ensures that a function executes at most once within a specified time window.\n*   **Analogy**: A security guard checking IDs every 5 minutes. No matter how many people try to pass, only one check happens every 5 minutes.\n*   **When to use**: Throttling is useful for events that need to be handled periodically but not excessively, like `scroll` events or rapid button clicks where you want a continuous, but rate-limited, response.",
          "analysisPoints": [
            "Clearly explain the problem: rapid firing of `resize` event leading to performance issues (excessive re-renders).",
            "Define debouncing: execution after inactivity, timer reset on new call.",
            "Define throttling: execution at most once per time window.",
            "Explain *why* debouncing is generally preferred for `resize` (only final state matters).",
            "Provide clear analogies or use cases for each to demonstrate understanding."
          ],
          "keyConcepts": [
            "Debouncing",
            "Throttling",
            "Window Resize Event",
            "Performance Optimization",
            "Event Handling",
            "React Re-renders",
            "User Experience (UX)"
          ],
          "evaluationCriteria": [
            "Deep understanding of performance issues with high-frequency events.",
            "Accurate definitions and distinctions between debouncing and throttling.",
            "Correct reasoning for preferred technique for `resize` events.",
            "Ability to explain the benefits to application performance and UX."
          ],
          "example": "```javascript\n// Debounce example\nconst debouncedResizeHandler = debounce(() => {\n  console.log('Window resized (debounced)');\n}, 300); // Wait 300ms after last resize event\n\nwindow.addEventListener('resize', debouncedResizeHandler);\n\n// Throttle example\nconst throttledScrollHandler = throttle(() => {\n  console.log('Scrolled (throttled)');\n}, 100); // At most once every 100ms\n\nwindow.addEventListener('scroll', throttledScrollHandler);\n```",
          "tags": [
            "JavaScript",
            "Performance",
            "Optimization",
            "Debounce",
            "Throttling",
            "Events"
          ],
          "prerequisites": [
            "JavaScript Event Loop",
            "Performance Concepts"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_rerender_on_resize_4",
          "topic": "Memory Leaks with Event Listeners",
          "level": "medium",
          "type": "mcq",
          "question": "What is the primary reason for removing event listeners (like `resize`) when a React component unmounts?",
          "answer": "To prevent memory leaks by ensuring the listener does not hold a reference to the unmounted component.",
          "options": [
            "To improve initial rendering performance.",
            "To allow the browser to automatically re-attach them on next mount.",
            "To prevent memory leaks by ensuring the listener does not hold a reference to the unmounted component.",
            "To avoid conflicts with other components listening to the same event."
          ],
          "analysisPoints": [
            "When a component unmounts, its associated DOM elements and event handlers should no longer be active.",
            "If an event listener is not removed, it might still try to execute its callback function when the event fires.",
            "If the callback references the unmounted component's state or props, it can lead to errors (e.g., 'Can't perform a React state update on an unmounted component').",
            "More importantly, the listener function (and the closure it creates) might prevent the garbage collector from reclaiming the memory used by the unmounted component, leading to a memory leak.",
            "While avoiding conflicts and performance are tangential benefits, the primary reason is memory management."
          ],
          "keyConcepts": [
            "Memory Leaks",
            "Event Listeners",
            "Component Unmount",
            "Garbage Collection",
            "Cleanup",
            "Lifecycle Methods"
          ],
          "evaluationCriteria": [
            "Understanding of memory management in JavaScript/React.",
            "Correct identification of memory leaks as the primary issue.",
            "Knowledge of component lifecycle and its implications for external subscriptions."
          ],
          "example": null,
          "tags": [
            "React",
            "Memory Leaks",
            "Event Listeners",
            "Cleanup",
            "Performance"
          ],
          "prerequisites": [
            "JavaScript Memory Management",
            "React Lifecycle"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_rerender_on_resize_5",
          "topic": "Custom Hooks for Window Dimensions",
          "level": "medium",
          "type": "code",
          "question": "Create a custom React Hook `useWindowDimensions` that provides the current `width` and `height` of the browser window. The hook should update these dimensions on window resize and include proper cleanup. Incorporate debouncing into the resize handling.",
          "answer": "```jsx\nimport { useState, useEffect, useCallback } from 'react';\n\n// Helper for debouncing a function\nconst debounce = (func, delay) => {\n  let timeoutId;\n  return (...args) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      func.apply(this, args);\n    }, delay);\n  };\n};\n\nfunction useWindowDimensions(debounceDelay = 200) {\n  const [dimensions, setDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  // Using useCallback to memoize the debounced function, ensuring it's stable across renders\n  const handleResize = useCallback(\n    debounce(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, debounceDelay), // Use the passed debounceDelay\n    [debounceDelay] // Recalculate handleResize if debounceDelay changes\n  );\n\n  useEffect(() => {\n    // Add event listener\n    window.addEventListener('resize', handleResize);\n\n    // Initial dimensions in case they changed before first resize event\n    // (though useState already initializes with current innerWidth/Height)\n    // handleResize(); // Can optionally call here to ensure initial value reflects debounced logic\n\n    // Cleanup function: remove event listener when component unmounts\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [handleResize]); // Dependency array: Re-run effect if handleResize function changes (only if debounceDelay changes)\n\n  return dimensions;\n}\n\nexport default useWindowDimensions;\n\n/* Example Usage:\nimport React from 'react';\nimport useWindowDimensions from './useWindowDimensions'; // Assuming the hook is in this file\n\nfunction MyResponsiveComponent() {\n  const { width, height } = useWindowDimensions(300);\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid blue', margin: '20px' }}>\n      <h3>Responsive Box</h3>\n      <p>Window Width: {width}px</p>\n      <p>Window Height: {height}px</p>\n      {width < 768 ? <p>Small Screen Layout</p> : <p>Large Screen Layout</p>}\n    </div>\n  );\n}\n\nexport default MyResponsiveComponent;\n*/\n```",
          "options": [],
          "analysisPoints": [
            "Correct use of `useState` to manage `width` and `height`.",
            "Correct use of `useEffect` to add and remove the `resize` event listener.",
            "Proper cleanup function returned by `useEffect` to prevent memory leaks.",
            "Implementation of a `debounce` utility function.",
            "Integration of `debounce` with `useCallback` to ensure the `handleResize` function is stable and doesn't cause `useEffect` to re-run unnecessarily.",
            "The hook accepts a `debounceDelay` parameter for flexibility.",
            "Initial state is set to current window dimensions."
          ],
          "keyConcepts": [
            "React Custom Hooks",
            "`useState`",
            "`useEffect`",
            "`useCallback`",
            "Debouncing",
            "Event Listeners",
            "Performance Optimization",
            "Cleanup"
          ],
          "evaluationCriteria": [
            "Ability to create a functional custom hook.",
            "Proficiency in `useEffect` with cleanup and dependency arrays.",
            "Correct implementation of debouncing logic.",
            "Understanding of `useCallback` for memoizing event handlers.",
            "Code quality, readability, and reusability."
          ],
          "example": null,
          "tags": [
            "React",
            "Hooks",
            "Custom Hooks",
            "Performance",
            "Debounce",
            "Code Challenge"
          ],
          "prerequisites": [
            "React Hooks Advanced",
            "JavaScript Closures"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_rerender_on_resize_6",
          "topic": "Window Dimensions Initialization",
          "level": "easy",
          "type": "flashcard",
          "question": "When initializing state for window dimensions in a component that listens to `resize`, what values should you use for the initial `width` and `height`?",
          "answer": "`window.innerWidth` and `window.innerHeight`.",
          "analysisPoints": [
            "These properties provide the current dimensions of the browser window's viewport.",
            "Initializing with them ensures the component displays correct dimensions immediately on mount, before the first `resize` event occurs."
          ],
          "keyConcepts": [
            "Window Object",
            "`innerWidth`",
            "`innerHeight`",
            "React State Initialization",
            "Client-side Dimensions"
          ],
          "evaluationCriteria": [
            "Knowledge of how to get current window dimensions.",
            "Understanding of initial state setup."
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Browser API",
            "React State"
          ],
          "prerequisites": [
            "JavaScript DOM Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_rerender_on_resize_7",
          "topic": "React.Fragment and Re-renders",
          "level": "medium",
          "type": "mcq",
          "question": "You have a component that displays window dimensions. It contains two `<span>` elements wrapped in a `<div>`. If the component re-renders due to a window resize, what parts of the DOM will React update?",
          "answer": "Only the text content of the `<span>` elements will be updated, as their `children` prop (the dimensions) has changed.",
          "options": [
            "The entire `<div>` and its `<span>` children will be re-created in the DOM.",
            "Only the `<div>` element will be updated, but not its children.",
            "Only the text content of the `<span>` elements will be updated, as their `children` prop (the dimensions) has changed.",
            "React will re-mount the entire component, including the `<div>` and `<span>` elements."
          ],
          "analysisPoints": [
            "React's reconciliation algorithm (Diffing) efficiently updates the DOM.",
            "It compares the new virtual DOM tree with the old one.",
            "If only text content changes within an element, React will update only that text node in the actual DOM, not re-create the entire element or its parents.",
            "The `div` element itself is not affected by the change in the children's text content, so it won't be re-created unless its own props or type change.",
            "Re-mounting the entire component happens only if the component's key changes or its type changes."
          ],
          "keyConcepts": [
            "React Reconciliation",
            "Virtual DOM",
            "DOM Updates",
            "Re-rendering",
            "Diffing Algorithm",
            "Performance"
          ],
          "evaluationCriteria": [
            "Understanding of React's reconciliation process.",
            "Knowledge of how React optimizes DOM updates.",
            "Ability to predict specific DOM changes based on component updates."
          ],
          "example": "```jsx\nfunction WindowDimensions({ width, height }) {\n  return (\n    <div>\n      <span>Width: {width}</span>\n      <span>Height: {height}</span>\n    </div>\n  );\n}\n// If width changes from 800 to 801, React will only update the text node '800' to '801'.\n```",
          "tags": [
            "React",
            "Performance",
            "Reconciliation",
            "Virtual DOM",
            "Rendering"
          ],
          "prerequisites": [
            "React Rendering",
            "Virtual DOM"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_complex_registration_form",
          "title": "Build a Multi-Step User Registration Form with Validation and Accessibility",
          "description": "\nImplement a two-step user registration form in React. Each step should have its own set of fields and validation. The form must incorporate best practices discussed in the theory.\n\n**Requirements:**\n\n1.  **Step 1: Personal Information**\n    *   Fields: `Name` (text, required), `Email` (email, required, valid format).\n    *   Client-side validation for both fields.\n    *   A 'Next' button to proceed to Step 2.\n2.  **Step 2: Account Details**\n    *   Fields: `Password` (password, required, min 8 chars), `Confirm Password` (password, required, must match password).\n    *   Client-side validation for both fields.\n    *   'Back' button to return to Step 1 (should preserve Step 1 data).\n    *   'Register' button to submit the form.\n3.  **Controlled Components**: All form inputs must be controlled components.\n4.  **Error Handling**: Display clear, inline validation error messages for each field.\n5.  **Visual Feedback**: Disable navigation buttons and show a 'Submitting...' message on the 'Register' button during a simulated API call (e.g., `setTimeout`).\n6.  **Accessibility (ARIA)**: Use appropriate ARIA attributes for required fields, invalid fields, and error messages.\n7.  **Progress Indicator**: Display a simple progress indicator (e.g., 'Step 1 of 2' / 'Step 2 of 2').\n8.  **Form Reset**: After successful submission, the form should reset to its initial state.\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState } from 'react';\n\nfunction RegistrationForm() {\n  const [step, setStep] = useState(1); // Current step\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const validateStep1 = () => {\n    const newErrors = {};\n    if (!formData.name.trim()) newErrors.name = 'Name is required.';\n    if (!formData.email.trim()) newErrors.email = 'Email is required.';\n    else if (!/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/.test(formData.email)) {\n      newErrors.email = 'Invalid email format.';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateStep2 = () => {\n    const newErrors = {};\n    if (!formData.password) newErrors.password = 'Password is required.';\n    else if (formData.password.length < 8) newErrors.password = 'Password must be at least 8 characters.';\n    if (formData.password !== formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match.';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Optional: live validation here\n  };\n\n  const handleNext = () => {\n    if (validateStep1()) {\n      setStep(2);\n      setErrors({}); // Clear errors when moving to next step\n    }\n  };\n\n  const handleBack = () => {\n    setStep(1);\n    setErrors({}); // Clear errors when going back\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (validateStep2()) {\n      setIsSubmitting(true);\n      // Simulate API call\n      try {\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        console.log('Registration Data:', formData);\n        alert('User registered successfully!');\n        // Reset form after successful submission\n        setFormData({ name: '', email: '', password: '', confirmPassword: '' });\n        setErrors({});\n        setStep(1);\n      } catch (error) {\n        console.error('Registration failed:', error);\n        // Set a general error or specific field error\n        setErrors(prev => ({ ...prev, general: 'Registration failed. Please try again.' }));\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: '500px', margin: '40px auto', padding: '30px', border: '1px solid #ddd', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n      <h2>User Registration - Step {step} of 2</h2>\n\n      {step === 1 && (\n        <div>\n          <h3>Personal Information</h3>\n          <div style={{ marginBottom: '15px' }}>\n            <label htmlFor=\"name\">Name:</label>\n            <input\n              type=\"text\"\n              id=\"name\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              aria-required=\"true\"\n              aria-invalid={!!errors.name}\n              aria-describedby={errors.name ? 'name-error' : undefined}\n              disabled={isSubmitting}\n            />\n            {errors.name && <div id=\"name-error\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.name}</div>}\n          </div>\n          <div style={{ marginBottom: '15px' }}>\n            <label htmlFor=\"email\">Email:</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              aria-required=\"true\"\n              aria-invalid={!!errors.email}\n              aria-describedby={errors.email ? 'email-error' : undefined}\n              disabled={isSubmitting}\n            />\n            {errors.email && <div id=\"email-error\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.email}</div>}\n          </div>\n          <button onClick={handleNext} disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n            Next\n          </button>\n        </div>\n      )}\n\n      {step === 2 && (\n        <div>\n          <h3>Account Details</h3>\n          <div style={{ marginBottom: '15px' }}>\n            <label htmlFor=\"password\">Password:</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              aria-required=\"true\"\n              aria-invalid={!!errors.password}\n              aria-describedby={errors.password ? 'password-error' : undefined}\n              disabled={isSubmitting}\n            />\n            {errors.password && <div id=\"password-error\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.password}</div>}\n          </div>\n          <div style={{ marginBottom: '15px' }}>\n            <label htmlFor=\"confirmPassword\">Confirm Password:</label>\n            <input\n              type=\"password\"\n              id=\"confirmPassword\"\n              name=\"confirmPassword\"\n              value={formData.confirmPassword}\n              onChange={handleChange}\n              aria-required=\"true\"\n              aria-invalid={!!errors.confirmPassword}\n              aria-describedby={errors.confirmPassword ? 'confirm-password-error' : undefined}\n              disabled={isSubmitting}\n            />\n            {errors.confirmPassword && <div id=\"confirm-password-error\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.confirmPassword}</div>}\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <button onClick={handleBack} disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#6c757d', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n              Back\n            </button>\n            <button type=\"submit\" onClick={handleSubmit} disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n              {isSubmitting ? 'Registering...' : 'Register'}\n            </button>\n          </div>\n        </div>\n      )}\n      {errors.general && <div style={{ color: 'red', marginTop: '15px' }}>{errors.general}</div>}\n    </div>\n  );\n}\n\nexport default RegistrationForm;\n",
          "solutionCode": "import React, { useState } from 'react';\n\nfunction RegistrationForm() {\n  const [step, setStep] = useState(1); // Current step\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Validation function for Step 1 fields\n  const validateStep1 = () => {\n    let newErrors = {};\n    if (!formData.name.trim()) {\n      newErrors.name = 'Name is required.';\n    }\n    if (!formData.email.trim()) {\n      newErrors.email = 'Email is required.';\n    } else if (!/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/.test(formData.email)) {\n      newErrors.email = 'Invalid email format.';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Validation function for Step 2 fields\n  const validateStep2 = () => {\n    let newErrors = {};\n    if (!formData.password) {\n      newErrors.password = 'Password is required.';\n    } else if (formData.password.length < 8) {\n      newErrors.password = 'Password must be at least 8 characters long.';\n    }\n    if (formData.password !== formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match.';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  // Generic change handler for all inputs\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n\n    // Optional: Real-time validation as user types\n    let currentErrors = { ...errors };\n    if (name === 'name') {\n        currentErrors.name = value.trim() ? '' : 'Name is required.';\n    } else if (name === 'email') {\n        currentErrors.email = value.trim() ? (/^[\\w-]+(\\.[\\w-]+)*@([a-z0-9-]+(\\.[a-z0-9-]+)*?\\.[a-z]{2,6}|(\\d{1,3}\\.){3}\\d{1,3})(:\\d{4})?$/.test(value) ? '' : 'Invalid email format.') : 'Email is required.';\n    } else if (name === 'password') {\n        currentErrors.password = value ? (value.length < 8 ? 'Password must be at least 8 characters long.' : '') : 'Password is required.';\n    } else if (name === 'confirmPassword') {\n        currentErrors.confirmPassword = value ? (value !== formData.password ? 'Passwords do not match.' : '') : 'Confirm password is required.';\n    }\n    setErrors(currentErrors);\n  };\n\n  // Handle 'Next' button click\n  const handleNext = () => {\n    if (validateStep1()) {\n      setStep(2);\n      // Clear step-specific errors after successful step transition\n      setErrors(prevErrors => { \n        const { name, email, ...rest } = prevErrors; \n        return rest; \n      });\n    }\n  };\n\n  // Handle 'Back' button click\n  const handleBack = () => {\n    setStep(1);\n    // Clear step-specific errors when going back\n    setErrors(prevErrors => {\n        const { password, confirmPassword, ...rest } = prevErrors;\n        return rest;\n    });\n  };\n\n  // Handle final form submission\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (validateStep2()) {\n      setIsSubmitting(true);\n      console.log('Submitting registration data:', formData);\n      // Simulate API call\n      try {\n        await new Promise(resolve => setTimeout(resolve, 2000));\n        alert('User registered successfully!');\n        // Reset form after successful submission\n        setFormData({ name: '', email: '', password: '', confirmPassword: '' });\n        setErrors({});\n        setStep(1);\n      } catch (error) {\n        console.error('Registration failed:', error);\n        setErrors(prev => ({ ...prev, general: 'Registration failed. Please try again.' }));\n      } finally {\n        setIsSubmitting(false);\n      }\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: '500px', margin: '40px auto', padding: '30px', border: '1px solid #ddd', borderRadius: '8px', boxShadow: '0 2px 4px rgba(0,0,0,0.1)' }}>\n      <h2>User Registration</h2>\n      <p style={{ textAlign: 'center', marginBottom: '20px', fontWeight: 'bold' }}>Step {step} of 2</p>\n\n      <form onSubmit={e => e.preventDefault()}> {/* Prevent default form submission on parent form */}\n        {step === 1 && (\n          <div>\n            <h3>Personal Information</h3>\n            <div style={{ marginBottom: '15px' }}>\n              <label htmlFor=\"name\">Name:</label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                aria-required=\"true\"\n                aria-invalid={!!errors.name}\n                aria-describedby={errors.name ? 'name-error' : undefined}\n                disabled={isSubmitting}\n                style={{ width: '100%', padding: '8px', boxSizing: 'border-box', marginTop: '5px' }}\n              />\n              {errors.name && <div id=\"name-error\" role=\"alert\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.name}</div>}\n            </div>\n            <div style={{ marginBottom: '15px' }}>\n              <label htmlFor=\"email\">Email:</label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleChange}\n                aria-required=\"true\"\n                aria-invalid={!!errors.email}\n                aria-describedby={errors.email ? 'email-error' : undefined}\n                disabled={isSubmitting}\n                style={{ width: '100%', padding: '8px', boxSizing: 'border-box', marginTop: '5px' }}\n              />\n              {errors.email && <div id=\"email-error\" role=\"alert\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.email}</div>}\n            </div>\n            <button onClick={handleNext} disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#28a745', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n              Next\n            </button>\n          </div>\n        )}\n\n        {step === 2 && (\n          <div>\n            <h3>Account Details</h3>\n            <div style={{ marginBottom: '15px' }}>\n              <label htmlFor=\"password\">Password:</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleChange}\n                aria-required=\"true\"\n                aria-invalid={!!errors.password}\n                aria-describedby={errors.password ? 'password-error' : undefined}\n                disabled={isSubmitting}\n                style={{ width: '100%', padding: '8px', boxSizing: 'border-box', marginTop: '5px' }}\n              />\n              {errors.password && <div id=\"password-error\" role=\"alert\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.password}</div>}\n            </div>\n            <div style={{ marginBottom: '15px' }}>\n              <label htmlFor=\"confirmPassword\">Confirm Password:</label>\n              <input\n                type=\"password\"\n                id=\"confirmPassword\"\n                name=\"confirmPassword\"\n                value={formData.confirmPassword}\n                onChange={handleChange}\n                aria-required=\"true\"\n                aria-invalid={!!errors.confirmPassword}\n                aria-describedby={errors.confirmPassword ? 'confirm-password-error' : undefined}\n                disabled={isSubmitting}\n                style={{ width: '100%', padding: '8px', boxSizing: 'border-box', marginTop: '5px' }}\n              />\n              {errors.confirmPassword && <div id=\"confirm-password-error\" role=\"alert\" style={{ color: 'red', fontSize: '0.8em' }}>{errors.confirmPassword}</div>}\n            </div>\n            <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '20px' }}>\n              <button onClick={handleBack} disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#6c757d', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n                Back\n              </button>\n              <button type=\"button\" onClick={handleSubmit} disabled={isSubmitting} style={{ padding: '10px 20px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: isSubmitting ? 'not-allowed' : 'pointer' }}>\n                {isSubmitting ? 'Registering...' : 'Register'}\n              </button>\n            </div>\n          </div>\n        )}\n      </form>\n      {errors.general && <div role=\"alert\" aria-live=\"assertive\" style={{ color: 'red', marginTop: '15px' }}>{errors.general}</div>}\n    </div>\n  );\n}\n\nexport default RegistrationForm;\n",
          "testCases": [
            "**Initial Load**: Form should display Step 1 with empty fields.",
            "**Step 1 Validation**: Clicking 'Next' with empty 'Name' or invalid 'Email' should show inline errors. 'Next' button should be disabled.",
            "**Successful Step 1**: Entering valid data for Step 1 and clicking 'Next' should transition to Step 2, clearing Step 1 errors.",
            "**Step 2 Validation**: Clicking 'Register' with empty 'Password' or 'Confirm Password' or mismatching passwords should show inline errors. 'Register' button should be disabled.",
            "**Back Button**: Clicking 'Back' from Step 2 should return to Step 1, preserving entered data in Step 1 fields and clearing Step 2 errors.",
            "**Submission Process**: Clicking 'Register' with valid Step 2 data should disable both 'Back' and 'Register' buttons, show 'Registering...' on the button, simulate a 2-second delay, and then show a success alert.",
            "**Form Reset**: After successful submission, the form should reset to Step 1, all fields cleared.",
            "**Accessibility**: Verify ARIA attributes are correctly applied to inputs and error messages (check dev tools accessibility tree).",
            "**Edge Case - Invalid Email on Change**: Typing an invalid email should show an error dynamically.",
            "**Edge Case - Password Mismatch on Change**: Typing a password and a mismatching confirm password should show an error dynamically (if real-time validation is implemented).",
            "**Visual Feedback**: Ensure buttons are disabled during submission and button text changes correctly."
          ],
          "hints": [
            "Manage form data and errors using a single `useState` object for `formData` and another for `errors`.",
            "Use conditional rendering (`{step === 1 && ...}`) to display different steps.",
            "Ensure `event.preventDefault()` is called for form submission and navigation handlers to prevent page reload.",
            "For ARIA, remember to link error messages to their respective inputs using `aria-describedby` and give the error `role='alert'` and `aria-live='assertive'` if they appear dynamically.",
            "Consider placing validation logic in separate helper functions for reusability and clarity."
          ],
          "tags": [
            "Forms",
            "React",
            "Validation",
            "Multi-step",
            "Controlled Components",
            "Accessibility",
            "UX"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React State Management",
            "Event Handling",
            "Conditional Rendering",
            "JavaScript Async/Await"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Client-side validation",
            "Server-side validation (simulated)",
            "Controlled components",
            "ARIA attributes",
            "Visual feedback",
            "Multi-step forms UX"
          ]
        },
        {
          "id": "task_autofocus_search_component",
          "title": "Build an Auto-Focusing Search Input Component with Refocus Button",
          "description": "\nCreate a functional React component that implements an auto-focusing search input field and a button to manually re-focus it. This task demonstrates proper use of `useRef` and `useEffect` for imperative DOM interactions.\n\n**Requirements:**\n\n1.  **Auto-Focus on Mount**: The search input field should automatically receive focus when the `SearchInputComponent` mounts for the first time.\n2.  **Manual Re-Focus**: Add a button labeled 'Re-focus Search' that, when clicked, sets the focus back to the search input field.\n3.  **Controlled Input (Optional but Recommended)**: The search input should be a controlled component, managing its value via React state.\n4.  **Accessibility**: Ensure the input has an appropriate `aria-label` or is associated with a `<label>` element.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useRef, useEffect, useState } from 'react';\n\nfunction SearchInputComponent() {\n  const inputRef = useRef(null);\n  const [searchText, setSearchText] = useState('');\n\n  // TODO: Implement auto-focus on mount\n\n  // TODO: Implement refocus handler for button\n\n  const handleChange = (e) => {\n    setSearchText(e.target.value);\n  };\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ccc', margin: '20px auto', maxWidth: '400px', display: 'flex', flexDirection: 'column', gap: '15px' }}>\n      <h2>Search Bar</h2>\n      <label htmlFor=\"search-input\" style={{ fontWeight: 'bold' }}>Search Query:</label>\n      <input\n        id=\"search-input\"\n        type=\"text\"\n        value={searchText}\n        onChange={handleChange}\n        placeholder=\"Enter your search term...\"\n        style={{ padding: '8px', fontSize: '1em' }}\n        aria-label=\"Search input field\"\n      />\n      <p>Current Search: {searchText}</p>\n      <button /* TODO: Add onClick for refocus */ style={{ padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\n        Re-focus Search\n      </button>\n    </div>\n  );\n}\n\nexport default SearchInputComponent;\n",
          "solutionCode": "import React, { useRef, useEffect, useState } from 'react';\n\nfunction SearchInputComponent() {\n  const inputRef = useRef(null);\n  const [searchText, setSearchText] = useState('');\n\n  // 1. Auto-focus on mount using useEffect with an empty dependency array\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []); // The empty array ensures this effect runs only once after the initial render\n\n  // 2. Handler for the refocus button\n  const handleRefocusClick = () => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  const handleChange = (e) => {\n    setSearchText(e.target.value);\n  };\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ccc', margin: '20px auto', maxWidth: '400px', display: 'flex', flexDirection: 'column', gap: '15px' }}>\n      <h2>Search Bar</h2>\n      <label htmlFor=\"search-input\" style={{ fontWeight: 'bold' }}>Search Query:</label>\n      <input\n        id=\"search-input\"\n        ref={inputRef} // Attach the ref to the input element\n        type=\"text\"\n        value={searchText}\n        onChange={handleChange}\n        placeholder=\"Enter your search term...\"\n        style={{ padding: '8px', fontSize: '1em' }}\n        aria-label=\"Search input field\"\n      />\n      <p>Current Search: {searchText}</p>\n      <button onClick={handleRefocusClick} style={{ padding: '10px', backgroundColor: '#007bff', color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer' }}>\n        Re-focus Search\n      </button>\n    </div>\n  );\n}\n\nexport default SearchInputComponent;\n",
          "testCases": [
            "**Initial Render**: The search input field should automatically receive keyboard focus as soon as the component is rendered.",
            "**Typing Input**: Verify that typing in the input updates the `Current Search` display (if controlled component is implemented).",
            "**Re-focus Button**: Click the 'Re-focus Search' button. If focus is currently on another element or lost, it should return to the search input.",
            "**Multiple Renders**: Ensure auto-focus only happens on the *initial* mount, not on subsequent re-renders (e.g., when `searchText` changes).",
            "**Accessibility**: Verify the `aria-label` or `<label>` correctly associates with the input (check browser's accessibility tree)."
          ],
          "hints": [
            "Use `useRef` to create a reference to the DOM input element.",
            "Place the `focus()` call inside `useEffect`.",
            "Remember to pass an empty dependency array (`[]`) to `useEffect` to ensure the auto-focus only happens once on mount.",
            "Attach the `ref` object returned by `useRef` to the `ref` prop of your `<input>` element.",
            "Ensure `inputRef.current` is not null before attempting to call `.focus()` on it."
          ],
          "tags": [
            "React",
            "Hooks",
            "useRef",
            "useEffect",
            "DOM Manipulation",
            "UX",
            "Accessibility"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "React Hooks Basics",
            "JavaScript DOM Basics"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Refs in React",
            "Imperative programming",
            "Functional components",
            "Lifecycle of functional components"
          ]
        },
        {
          "id": "task_responsive_header",
          "title": "Implement a Responsive Header with Dynamic Layout based on Window Size",
          "description": "\nCreate a React functional component for a header that changes its layout based on the window's width. Specifically, it should display a full navigation menu on large screens and collapse into a hamburger menu icon on small screens. You must implement a custom hook `useWindowSize` (or similar) to track window dimensions.\n\n**Requirements:**\n\n1.  **Custom Hook**: Create a `useWindowSize` custom hook that returns the current `width` and `height` of the browser window. This hook must:\n    *   Listen to the `window.resize` event.\n    *   Initialize with current window dimensions.\n    *   Include proper cleanup to remove the event listener when the component (or hook consumer) unmounts.\n    *   **Implement debouncing** for the resize event handler to optimize performance (e.g., 200ms debounce delay).\n2.  **Header Component (`ResponsiveHeader`)**:\n    *   Use the `useWindowSize` hook to get current dimensions.\n    *   **Conditional Rendering**: If the `width` is greater than or equal to a breakpoint (e.g., 768px), display a `LargeScreenNav` component. Otherwise, display a `HamburgerMenu` component.\n    *   The `HamburgerMenu` should toggle its visibility on click.\n\n**Component Structure:**\n\n```\n├── App.js (renders ResponsiveHeader)\n├── hooks\n│   └── useWindowSize.js\n└── components\n    ├── ResponsiveHeader.js\n    ├── LargeScreenNav.js\n    └── HamburgerMenu.js\n```\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState, useEffect, useCallback } from 'react';\n\n// --- hooks/useWindowSize.js --- START\nconst debounce = (func, delay) => {\n  let timeoutId;\n  return (...args) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      func.apply(this, args);\n    }, delay);\n  };\n};\n\nfunction useWindowSize(debounceDelay = 200) {\n  const [dimensions, setDimensions] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  const handleResize = useCallback(\n    debounce(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, debounceDelay),\n    [debounceDelay]\n  );\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return; // Handle SSR\n    window.addEventListener('resize', handleResize);\n    // Call once initially if not already set by useState initial value\n    // handleResize(); // Uncomment if you want debounced initial call, but useState is fine for current value\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [handleResize]);\n\n  return dimensions;\n}\n// --- hooks/useWindowSize.js --- END\n\n// --- components/LargeScreenNav.js --- START\nfunction LargeScreenNav() {\n  return (\n    <nav style={{ display: 'flex', gap: '20px' }}>\n      <a href=\"#home\">Home</a>\n      <a href=\"#about\">About</a>\n      <a href=\"#services\">Services</a>\n      <a href=\"#contact\">Contact</a>\n    </nav>\n  );\n}\n// --- components/LargeScreenNav.js --- END\n\n// --- components/HamburgerMenu.js --- START\nfunction HamburgerMenu() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const toggleMenu = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div style={{ position: 'relative' }}>\n      <button onClick={toggleMenu} style={{ background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer' }}>\n        ☰\n      </button>\n      {isOpen && (\n        <nav style={{\n          position: 'absolute', right: '0', top: '40px', background: '#f0f0f0', border: '1px solid #ccc', padding: '10px',\n          display: 'flex', flexDirection: 'column', gap: '10px', minWidth: '150px', zIndex: 100\n        }}>\n          <a href=\"#home\">Home</a>\n          <a href=\"#about\">About</a>\n          <a href=\"#services\">Services</a>\n          <a href=\"#contact\">Contact</a>\n        </nav>\n      )}\n    </div>\n  );\n}\n// --- components/HamburgerMenu.js --- END\n\n// --- components/ResponsiveHeader.js --- START\nfunction ResponsiveHeader() {\n  const { width } = useWindowSize();\n  const breakpoint = 768; // Define your breakpoint\n\n  return (\n    <header style={{\n      display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n      padding: '15px 20px', background: '#333', color: 'white'\n    }}>\n      <h1>MyBrand</h1>\n      {/* TODO: Conditional rendering based on width */}\n      {/* Example: width >= breakpoint ? <LargeScreenNav /> : <HamburgerMenu /> */}\n    </header>\n  );\n}\n// --- components/ResponsiveHeader.js --- END\n\n// --- App.js --- START\nexport default function App() {\n  return (\n    <div>\n      <ResponsiveHeader />\n      <main style={{ padding: '20px' }}>\n        <p>Resize your browser window to see the header adapt!</p>\n      </main>\n    </div>\n  );\n}\n// --- App.js --- END\n",
          "solutionCode": "import React, { useState, useEffect, useCallback } from 'react';\n\n// --- hooks/useWindowSize.js --- START\nconst debounce = (func, delay) => {\n  let timeoutId;\n  return (...args) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      func.apply(this, args);\n    }, delay);\n  };\n};\n\nfunction useWindowSize(debounceDelay = 200) {\n  const [dimensions, setDimensions] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  const handleResize = useCallback(\n    debounce(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, debounceDelay),\n    [debounceDelay] // `handleResize` function itself will only change if `debounceDelay` changes\n  );\n\n  useEffect(() => {\n    // Guard against SSR environments where `window` might not be defined\n    if (typeof window === 'undefined') return;\n\n    // Add event listener\n    window.addEventListener('resize', handleResize);\n\n    // Cleanup function: remove event listener when component unmounts\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [handleResize]); // Effect re-runs only if `handleResize` changes (i.e., `debounceDelay` changes)\n\n  return dimensions;\n}\n// --- hooks/useWindowSize.js --- END\n\n// --- components/LargeScreenNav.js --- START\nfunction LargeScreenNav() {\n  return (\n    <nav style={{ display: 'flex', gap: '20px' }}>\n      <a href=\"#home\" style={{ color: 'white', textDecoration: 'none' }}>Home</a>\n      <a href=\"#about\" style={{ color: 'white', textDecoration: 'none' }}>About</a>\n      <a href=\"#services\" style={{ color: 'white', textDecoration: 'none' }}>Services</a>\n      <a href=\"#contact\" style={{ color: 'white', textDecoration: 'none' }}>Contact</a>\n    </nav>\n  );\n}\n// --- components/LargeScreenNav.js --- END\n\n// --- components/HamburgerMenu.js --- START\nfunction HamburgerMenu() {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const toggleMenu = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div style={{ position: 'relative' }}>\n      <button onClick={toggleMenu} style={{ background: 'none', border: 'none', fontSize: '24px', cursor: 'pointer', color: 'white' }} aria-expanded={isOpen} aria-controls=\"mobile-menu\" aria-label=\"Toggle navigation\">\n        ☰\n      </button>\n      {isOpen && (\n        <nav id=\"mobile-menu\" style={{\n          position: 'absolute', right: '0', top: '40px', background: '#444', border: '1px solid #555', padding: '10px',\n          display: 'flex', flexDirection: 'column', gap: '10px', minWidth: '150px', zIndex: 100, borderRadius: '4px'\n        }}>\n          <a href=\"#home\" style={{ color: 'white', textDecoration: 'none' }} onClick={() => setIsOpen(false)}>Home</a>\n          <a href=\"#about\" style={{ color: 'white', textDecoration: 'none' }} onClick={() => setIsOpen(false)}>About</a>\n          <a href=\"#services\" style={{ color: 'white', textDecoration: 'none' }} onClick={() => setIsOpen(false)}>Services</a>\n          <a href=\"#contact\" style={{ color: 'white', textDecoration: 'none' }} onClick={() => setIsOpen(false)}>Contact</a>\n        </nav>\n      )}\n    </div>\n  );\n}\n// --- components/HamburgerMenu.js --- END\n\n// --- components/ResponsiveHeader.js --- START\nfunction ResponsiveHeader() {\n  const { width } = useWindowSize();\n  const breakpoint = 768; // Example breakpoint in pixels\n\n  return (\n    <header style={{\n      display: 'flex', justifyContent: 'space-between', alignItems: 'center',\n      padding: '15px 20px', background: '#333', color: 'white'\n    }}>\n      <h1 style={{ margin: 0, fontSize: '1.5em' }}>MyBrand</h1>\n      {width >= breakpoint ? <LargeScreenNav /> : <HamburgerMenu />}\n    </header>\n  );\n}\n// --- components/ResponsiveHeader.js --- END\n\n// --- App.js --- START\nexport default function App() {\n  return (\n    <div style={{ fontFamily: 'Arial, sans-serif' }}>\n      <ResponsiveHeader />\n      <main style={{ padding: '20px' }}>\n        <h2>Welcome!</h2>\n        <p>Resize your browser window to see the header navigation change.</p>\n        <p>Below {768}px, the full navigation will be replaced by a hamburger menu icon.</p>\n        <p>Current window width (from hook): {useWindowSize().width}px</p>\n        <div style={{ height: '1000px', background: '#f5f5f5', marginTop: '20px', padding: '20px' }}>\n          Scrollable content to fill space\n        </div>\n      </main>\n    </div>\n  );\n}\n// --- App.js --- END\n",
          "testCases": [
            "**Initial Render**: The header should display the `LargeScreenNav` if the initial window width is >= 768px, or `HamburgerMenu` if < 768px.",
            "**Resize Larger**: Drag the browser window to be larger than 768px. The header should smoothly transition to show the `LargeScreenNav`.",
            "**Resize Smaller**: Drag the browser window to be smaller than 768px. The header should smoothly transition to show the `HamburgerMenu` icon.",
            "**Hamburger Menu Toggle**: When the `HamburgerMenu` is visible, clicking the '☰' icon should toggle the menu's visibility (open/close). Ensure menu items close the menu when clicked.",
            "**Debounce Functionality**: Rapidly resize the window. Observe that the `useWindowSize` hook's returned dimensions only update *after* a brief pause in resizing, not on every pixel change (indicating debouncing is working).",
            "**Component Unmount (Mental Check)**: If `ResponsiveHeader` were to be unmounted (e.g., navigating to another page in an SPA), the `useWindowSize` hook should correctly remove its event listener, preventing memory leaks.",
            "**Accessibility**: Ensure the hamburger menu button has appropriate ARIA attributes (`aria-expanded`, `aria-controls`, `aria-label`)."
          ],
          "hints": [
            "The `debounce` utility function from the theory block is very useful here. Make sure it's stable and memoized for `useCallback`'s dependency.",
            "The `useWindowSize` hook will combine `useState` for dimensions and `useEffect` with cleanup for the event listener.",
            "For the `useEffect` in `useWindowSize`, remember that the `handleResize` function itself should be stable (memoized with `useCallback`) to avoid unnecessarily re-attaching the event listener.",
            "Use conditional rendering `width >= breakpoint ? <ComponentA /> : <ComponentB />` in the `ResponsiveHeader`.",
            "For the `HamburgerMenu`, you'll need local state (`useState`) to manage its open/closed state."
          ],
          "tags": [
            "React",
            "Hooks",
            "Custom Hooks",
            "Responsive Design",
            "Performance",
            "Debounce",
            "Conditional Rendering",
            "UI/UX"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React Hooks Advanced",
            "JavaScript Event Handling",
            "Debounce/Throttling Concepts"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Custom hooks",
            "Window resize event",
            "Performance optimization",
            "Conditional rendering",
            "Component lifecycle (hooks equivalent)",
            "Mobile-first design"
          ]
        }
      ]
    }
  },
  {
    "id": "552ca4b8-c6b9-40db-97e1-f286fbeaeb06",
    "startLine": 14600,
    "endLine": 14699,
    "processedDate": "2025-06-17T14:02:06.497Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_hooks_window_dimensions",
          "title": "React Hooks: Managing Window Dimensions with useState and useEffect",
          "content": "This section covers the fundamental React hooks `useState` and `useEffect` by demonstrating their use in a practical scenario: tracking and displaying browser window dimensions.\n\n## `useState` Hook\n`useState` is a React Hook that lets you add state variables to your components. It returns a pair: the current state value and a function that lets you update it.\n\n-   **State Variable**: Holds the current value (e.g., `dimensions`).\n-   **Setter Function**: A function (e.g., `setDimensions`) used to update the state. When called, it causes the component to re-render with the new state.\n\n```typescript\nconst [stateVariable, setStateVariable] = useState(initialValue);\n```\n\n## `useEffect` Hook\n`useEffect` is a React Hook that lets you perform side effects in function components. Side effects are operations that interact with the outside world, such as data fetching, subscriptions, or manually changing the DOM. It runs after every render of the component.\n\n-   **Effect Function**: The first argument to `useEffect` is a function where you put your side-effect logic.\n-   **Dependency Array**: The second, optional argument is an array of dependencies. `useEffect` will re-run the effect only if any value in this array has changed between renders.\n    -   `[]` (empty array): The effect runs only once after the initial render, similar to `componentDidMount` in class components. This is ideal for setting up event listeners or fetching data that doesn't change.\n    -   No dependency array: The effect runs after every render, including the initial one. This can lead to performance issues if not handled carefully.\n    -   `[prop1, state2]`: The effect runs on initial render and whenever `prop1` or `state2` changes.\n-   **Cleanup Function**: The effect function can optionally return another function. This returned function is the cleanup function. It runs before the component unmounts (similar to `componentWillUnmount`) and before the effect re-runs due to a dependency change. It's crucial for cleaning up subscriptions, timers, or event listeners to prevent memory leaks.\n\n## Window Object and Event Listeners\n-   `window.innerWidth` and `window.innerHeight`: These properties return the interior width and height of the browser window (viewport) in pixels.\n-   `window.addEventListener('event', handler)`: Registers an event handler function to be called when the specified event (e.g., `'resize'`) occurs on the `window` object.\n-   `window.removeEventListener('event', handler)`: Removes an event listener previously registered with `addEventListener`. This is essential for cleanup to avoid memory leaks, especially when the component unmounts or the effect re-runs.\n\n## Example Analysis: `WindowDimensions` Component\n\nThe provided `WindowDimensions` component uses `useState` to manage the `width` and `height` dimensions and `useEffect` to subscribe to and clean up the `'resize'` event.\n\n1.  **State Initialization**: `const [dimensions, setDimensions] = useState({ width: 0, height: 0 });` initializes the state for dimensions.\n2.  **Effect Setup**: The `useEffect` hook is used to manage the `'resize'` event listener.\n    -   `updateDimensions` function is defined to capture the current `window.innerWidth` and `window.innerHeight` and update the state.\n    -   `updateDimensions()` is called once immediately to get the initial dimensions.\n    -   `window.addEventListener('resize', updateDimensions)` registers the listener.\n3.  **Cleanup**: `return () => window.removeEventListener('resize', updateDimensions);` is the cleanup function. It ensures that the event listener is removed when the component unmounts, preventing memory leaks and unnecessary updates.\n4.  **Dependency Array**: The empty `[]` dependency array ensures the effect runs only once on mount and cleans up only on unmount.\n5.  **Rendering**: The component renders the current `dimensions.width` and `dimensions.height` values.\n",
          "examples": [
            {
              "id": "example_window_dimensions_1",
              "title": "Basic Window Dimensions Component",
              "code": "import React, { useState, useEffect } from 'react';\n\nfunction WindowDimensions() {\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n\n  useEffect(() => {\n    const updateDimensions = () => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    \n    // Set initial dimensions\n    updateDimensions();\n    \n    // Add event listener\n    window.addEventListener('resize', updateDimensions);\n    \n    // Clean up event listener on component unmount\n    return () => window.removeEventListener('resize', updateDimensions);\n  }, []); // Empty dependency array means this effect runs once on mount and cleans up on unmount\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ccc' }}>\n      <h2>Window Dimensions</h2>\n      <p>Width: {dimensions.width}px</p>\n      <p>Height: {dimensions.height}px</p>\n    </div>\n  );\n}\n\n// Usage in a parent component (e.g., App.js)\n// function App() {\n//   return <WindowDimensions />;\n// }\n",
              "explanation": "This example directly demonstrates the `WindowDimensions` component provided in the markdown. It showcases the use of `useState` to hold the current `width` and `height`, and `useEffect` to set up and tear down a `resize` event listener. The `updateDimensions` function captures the current `window.innerWidth` and `window.innerHeight` and updates the state, causing a re-render. The empty dependency array `[]` ensures the effect runs only once after the initial render, and the returned cleanup function `return () => window.removeEventListener(...)` is crucial for preventing memory leaks by removing the event listener when the component unmounts.",
              "language": "typescript"
            },
            {
              "id": "example_use_throttle_hook",
              "title": "Custom Hook with Throttling for Window Dimensions",
              "code": "import React, { useState, useEffect, useCallback } from 'react';\n\n// Helper for throttling function calls\nconst throttle = (func, delay) => {\n  let timeoutId = null;\n  let lastArgs = null;\n  let lastThis = null;\n\n  return function(...args) {\n    lastArgs = args;\n    lastThis = this;\n\n    if (!timeoutId) {\n      timeoutId = setTimeout(() => {\n        func.apply(lastThis, lastArgs);\n        timeoutId = null;\n        lastArgs = null;\n        lastThis = null;\n      }, delay);\n    }\n  };\n};\n\n// Custom hook to get throttled window dimensions\nfunction useThrottledWindowDimensions(delay = 200) {\n  const [dimensions, setDimensions] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  const updateDimensions = useCallback(\n    throttle(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, delay),\n    [delay] // Recalculate throttled function if delay changes\n  );\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    window.addEventListener('resize', updateDimensions);\n    updateDimensions(); // Set initial dimensions\n\n    return () => {\n      window.removeEventListener('resize', updateDimensions);\n    };\n  }, [updateDimensions]); // Dependency on updateDimensions ensures effect re-runs if throttled function changes\n\n  return dimensions;\n}\n\n// Component using the custom hook\nfunction ThrottledWindowDimensionsDisplay() {\n  const { width, height } = useThrottledWindowDimensions(100);\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ccc' }}>\n      <h2>Throttled Window Dimensions</h2>\n      <p>Width: {width}px</p>\n      <p>Height: {height}px</p>\n      <p>Updates throttled to 100ms</p>\n    </div>\n  );\n}\n",
              "explanation": "This advanced example demonstrates creating a reusable custom hook `useThrottledWindowDimensions` that incorporates throttling to optimize performance during rapid resize events. Throttling limits how often a function can run. The `throttle` helper function ensures `updateDimensions` is not called excessively. `useCallback` is used to memoize the throttled function, preventing unnecessary re-creations. The `useEffect` hook now depends on `updateDimensions` (which itself depends on `delay`) to ensure the correct throttled function is always used. This pattern is common for performance-critical DOM event handling in React.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_react_use_effect_dependency_array_mcq",
            "question_react_use_effect_cleanup_flashcard",
            "question_react_custom_hook_open",
            "question_react_use_state_behavior_mcq"
          ],
          "relatedTasks": [
            "task_react_debounce_resize_hook"
          ],
          "tags": [
            "React",
            "Hooks",
            "useState",
            "useEffect",
            "Lifecycle",
            "Event Handling",
            "Performance",
            "Custom Hooks"
          ],
          "technology": "React",
          "prerequisites": [
            "JavaScript_Functions",
            "DOM_Events",
            "React_Basics_Components"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "React_Performance_Optimization",
            "Custom_React_Hooks",
            "Advanced_State_Management"
          ]
        },
        {
          "id": "theory_css_vertical_alignment_overview",
          "title": "CSS Vertical Alignment Techniques: An Overview",
          "content": "Vertical alignment is a perennially challenging aspect of CSS layout, primarily because content flows horizontally by default, and elements behave differently depending on their `display` property. Achieving perfect vertical centering or alignment requires choosing the right technique based on the specific layout context, such as whether you're aligning a single line of text, block-level elements, or complex components within a container of a defined height. This section introduces various effective methods.\n\nWhile there are many ways to achieve vertical alignment, modern CSS features like Flexbox and CSS Grid provide the most robust and flexible solutions for contemporary layouts. Older methods might still be useful for specific legacy cases or very simple scenarios.\n\nKey considerations when choosing a method include:\n-   **Container Height**: Does the parent container have a defined height?\n-   **Number of Items**: Are you aligning a single item or multiple items?\n-   **Content Type**: Is it text, images, or block-level elements?\n-   **Responsiveness**: How does the method adapt to different screen sizes?\n-   **Browser Support**: Is the method widely supported by target browsers?\n",
          "examples": [],
          "relatedQuestions": [
            "question_css_vertical_alignment_challenges_open",
            "question_css_alignment_best_practices_mcq"
          ],
          "relatedTasks": [],
          "tags": [
            "CSS",
            "Layout",
            "Alignment",
            "Flexbox",
            "Grid",
            "Positioning",
            "Interview Prep"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Display_Property",
            "CSS_Box_Model"
          ],
          "complexity": 5,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Responsive_Design",
            "Complex_UI_Layouts"
          ]
        },
        {
          "id": "theory_css_vertical_alignment_flexbox",
          "title": "CSS Vertical Alignment: Flexbox Method",
          "content": "The Flexbox layout module is one of the most powerful and versatile methods for achieving vertical (and horizontal) alignment, especially for elements within a single dimension (row or column). It's widely supported and highly recommended for modern web development.\n\n## Key Properties:\n-   `display: flex`: Applied to the parent container, this makes it a flex container and its direct children become flex items.\n-   `align-items`: Applied to the flex container, this property controls how flex items are aligned along the cross axis (perpendicular to the main axis). For vertical alignment when `flex-direction` is `row` (default), `align-items` handles vertical alignment.\n    -   `center`: Centers items vertically.\n    -   `flex-start`: Aligns items to the start of the cross axis.\n    -   `flex-end`: Aligns items to the end of the cross axis.\n    -   `stretch`: (Default) Stretches items to fill the container (requires `height: auto` on items).\n    -   `baseline`: Aligns items along their baselines.\n-   `justify-content`: (For horizontal alignment in a row, or vertical in a column) Aligns items along the main axis.\n-   `height`: The parent container must have a defined height for vertical alignment to be effective, as `align-items` distributes space within that height.\n\n## Use Cases:\nFlexbox is excellent for:\n-   Centering a single item within a container.\n-   Distributing multiple items evenly along an axis.\n-   Creating responsive navigation bars or component layouts.\n-   Aligning items with different heights within a row.",
          "examples": [
            {
              "id": "example_flexbox_align_center",
              "title": "Flexbox Vertical and Horizontal Centering",
              "code": "<div class=\"parent-flexbox\">\n  <div class=\"child-flexbox\">I'm centered!</div>\n</div>\n\n<style>\n  .parent-flexbox {\n    display: flex;\n    align-items: center;    /* Vertically center */\n    justify-content: center; /* Horizontally center */\n    height: 300px;\n    border: 2px dashed #3498db;\n    background-color: #ecf0f1;\n    font-family: sans-serif;\n  }\n  .child-flexbox {\n    background-color: #e74c3c;\n    color: white;\n    padding: 20px;\n    border-radius: 5px;\n  }\n</style>",
              "explanation": "This example demonstrates how to use Flexbox to center a child element both vertically and horizontally within a parent container. By setting `display: flex` on the parent, its direct children become flex items. `align-items: center` aligns the child along the cross-axis (vertically, by default for `flex-direction: row`), and `justify-content: center` aligns it along the main-axis (horizontally). The `height` property on the parent is crucial for `align-items` to have space to distribute.",
              "language": "html"
            },
            {
              "id": "example_flexbox_multiple_items_different_heights",
              "title": "Flexbox for Multiple Items with Different Heights",
              "code": "<div class=\"parent-flexbox-multi\">\n  <div class=\"child-flexbox-multi\" style=\"height: 50px;\">Short Item</div>\n  <div class=\"child-flexbox-multi\" style=\"height: 120px;\">Tall Item</div>\n  <div class=\"child-flexbox-multi\" style=\"height: 80px;\">Medium Item</div>\n</div>\n\n<style>\n  .parent-flexbox-multi {\n    display: flex;\n    align-items: center; /* Vertically centers all items relative to the tallest item's line */\n    height: 200px;\n    border: 2px solid #27ae60;\n    background-color: #f0f8f0;\n    font-family: sans-serif;\n    padding: 10px;\n    gap: 10px; /* Space between items */\n  }\n  .child-flexbox-multi {\n    background-color: #2ecc71;\n    color: white;\n    padding: 10px;\n    border-radius: 3px;\n    display: flex; /* Make children flex containers themselves if you want to center their content */\n    align-items: center;\n    justify-content: center;\n  }\n</style>",
              "explanation": "This example illustrates `align-items: center` in a Flexbox container with multiple child items of varying heights. All items are centered vertically relative to the common line created by the flex container. `align-items: center` effectively distributes the remaining space above and below each item. The `gap` property provides spacing between the flex items. If you want the text *inside* each child to be centered, you can also make the children `display: flex` and apply `align-items: center` and `justify-content: center` to them.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_css_flexbox_properties_flashcard",
            "question_flexbox_vs_grid_mcq",
            "question_flexbox_alignment_scenario_open"
          ],
          "relatedTasks": [
            "task_css_sticky_footer"
          ],
          "tags": [
            "CSS",
            "Flexbox",
            "Alignment",
            "Layout",
            "Responsive Design"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Display_Property"
          ],
          "complexity": 5,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Modern_Layouts",
            "Component_Styling"
          ]
        },
        {
          "id": "theory_css_vertical_alignment_grid",
          "title": "CSS Vertical Alignment: CSS Grid Method",
          "content": "CSS Grid Layout is a two-dimensional layout system that allows for precise control over both rows and columns. It's an excellent choice for full-page layouts and complex component structures. For centering, Grid provides extremely concise options.\n\n## Key Properties:\n-   `display: grid`: Applied to the parent container, this makes it a grid container.\n-   `place-items`: This is a shorthand property that sets both `align-items` (for vertical alignment along the block/column axis) and `justify-items` (for horizontal alignment along the inline/row axis) simultaneously.\n    -   `center`: Centers grid items both vertically and horizontally within their grid area.\n-   `align-items`: (explicit vertical alignment) Controls how items are aligned along the block (column) axis within their grid area.\n-   `justify-items`: (explicit horizontal alignment) Controls how items are aligned along the inline (row) axis within their grid area.\n-   `height`: Similar to Flexbox, the parent grid container usually needs a defined height for vertical alignment to be effective.\n\n## Use Cases:\nCSS Grid is ideal for:\n-   Centering a single item in the middle of a specific grid cell or the entire grid.\n-   Creating complex, structured layouts where content needs to align across rows and columns.\n-   Achieving precise alignment within a well-defined grid system.",
          "examples": [
            {
              "id": "example_grid_place_items",
              "title": "CSS Grid Vertical and Horizontal Centering",
              "code": "<div class=\"parent-grid\">\n  <div class=\"child-grid\">Grid Centered</div>\n</div>\n\n<style>\n  .parent-grid {\n    display: grid;\n    place-items: center; /* Shorthand for align-items: center and justify-items: center */\n    height: 300px;\n    border: 2px dashed #9b59b6;\n    background-color: #f4ecf7;\n    font-family: sans-serif;\n  }\n  .child-grid {\n    background-color: #8e44ad;\n    color: white;\n    padding: 20px;\n    border-radius: 5px;\n  }\n</style>",
              "explanation": "This example uses CSS Grid to center a child element. Setting `display: grid` on the parent makes it a grid container. The `place-items: center` property is a powerful shorthand that simultaneously sets `align-items: center` (for vertical alignment) and `justify-items: center` (for horizontal alignment) on all direct children within their respective grid areas. This makes it a very concise way to achieve perfect centering. A defined `height` on the parent is necessary for vertical alignment to work.",
              "language": "html"
            },
            {
              "id": "example_grid_explicit_alignment",
              "title": "CSS Grid Explicit Alignment for Multiple Items",
              "code": "<div class=\"parent-grid-explicit\">\n  <div class=\"child-grid-explicit\">Item 1</div>\n  <div class=\"child-grid-explicit\">Item 2</div>\n  <div class=\"child-grid-explicit\">Item 3</div>\n</div>\n\n<style>\n  .parent-grid-explicit {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr); /* 3 equal columns */\n    gap: 10px;\n    height: 250px;\n    border: 2px solid #e67e22;\n    background-color: #fdf3e7;\n    font-family: sans-serif;\n    padding: 10px;\n    \n    /* Align items within their grid cells */\n    align-items: center; /* Vertically center each item */\n    justify-items: center; /* Horizontally center each item */\n  }\n  .child-grid-explicit {\n    background-color: #d35400;\n    color: white;\n    padding: 15px;\n    border-radius: 3px;\n    text-align: center;\n  }\n</style>",
              "explanation": "This example demonstrates explicit `align-items` and `justify-items` with CSS Grid for multiple items. The `grid-template-columns` property defines three equal columns. `align-items: center` vertically centers each grid item within its respective grid cell, and `justify-items: center` horizontally centers them. This offers precise control over item placement within a structured grid.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_css_grid_place_items_flashcard",
            "question_flexbox_vs_grid_mcq",
            "question_css_grid_layout_advantages_open"
          ],
          "relatedTasks": [
            "task_css_generic_centered_container"
          ],
          "tags": [
            "CSS",
            "Grid",
            "Alignment",
            "Layout",
            "Responsive Design"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Display_Property",
            "CSS_Grid_Basics"
          ],
          "complexity": 5,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Complex_Layouts",
            "Two_Dimensional_Layouts"
          ]
        },
        {
          "id": "theory_css_vertical_alignment_absolute_transform",
          "title": "CSS Vertical Alignment: Absolute Positioning with Transform",
          "content": "This is a classic technique for centering an element within a relatively positioned parent. It's particularly useful when you need to center an element precisely without affecting the surrounding layout flow.\n\n## Key Properties:\n-   **Parent (`.parent`)**: Requires `position: relative`. This establishes a positioning context for its absolutely positioned children.\n-   **Child (`.child`)**: Requires `position: absolute`. This takes the element out of the normal document flow.\n    -   `top: 50%`: Positions the top edge of the child at the vertical center of the parent.\n    -   `left: 50%`: Positions the left edge of the child at the horizontal center of the parent.\n    -   `transform: translate(-50%, -50%)`: This is the crucial part. Without it, the top-left corner of the child would be at the center of the parent. `translate(-50%, -50%)` moves the element back by half its *own* width and half its *own* height, effectively centering its exact middle point.\n-   `height`: The parent container must have a defined height for vertical alignment to be effective.\n\n## Use Cases:\n-   Overlaying elements (e.g., modals, tooltips).\n-   Centering icons or small elements within larger containers.\n-   When precise pixel-perfect centering is required regardless of content size (as `transform` uses the element's own dimensions for calculations).\n\n## Considerations:\n-   Takes the child out of normal flow, which can affect surrounding elements.\n-   Less flexible for multiple items compared to Flexbox or Grid.\n-   Can be more verbose than `place-items: center`.\n",
          "examples": [
            {
              "id": "example_absolute_positioning_transform",
              "title": "Absolute Positioning with Transform Centering",
              "code": "<div class=\"parent-absolute\">\n  <div class=\"child-absolute\">Absolutely Centered</div>\n</div>\n\n<style>\n  .parent-absolute {\n    position: relative; /* Establish positioning context */\n    height: 300px;\n    border: 2px dashed #1abc9c;\n    background-color: #e8f8f5;\n    font-family: sans-serif;\n  }\n  .child-absolute {\n    position: absolute; /* Take out of normal flow */\n    top: 50%;             /* Start at vertical middle */\n    left: 50%;            /* Start at horizontal middle */\n    transform: translate(-50%, -50%); /* Shift back by half own width/height */\n    background-color: #16a085;\n    color: white;\n    padding: 20px;\n    border-radius: 5px;\n  }\n</style>",
              "explanation": "This example demonstrates the absolute positioning and transform technique for centering. The parent (`.parent-absolute`) is set to `position: relative` to define the coordinate system for its absolutely positioned child. The child (`.child-absolute`) is taken out of the normal document flow with `position: absolute`. Setting `top: 50%` and `left: 50%` positions the child's top-left corner at the exact center of the parent. The crucial `transform: translate(-50%, -50%)` then shifts the child back by precisely half its own width and height, effectively centering it perfectly.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_css_absolute_positioning_mcq",
            "question_css_transform_properties_flashcard",
            "question_css_absolute_vs_relative_open"
          ],
          "relatedTasks": [
            "task_css_generic_centered_container"
          ],
          "tags": [
            "CSS",
            "Positioning",
            "Transform",
            "Alignment",
            "Layout"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Position_Property",
            "CSS_Transforms"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "Overlay_Components",
            "Precise_Element_Placement"
          ]
        },
        {
          "id": "theory_css_vertical_alignment_table_cell",
          "title": "CSS Vertical Alignment: Table Cell Method",
          "content": "This method leverages the `vertical-align` property, which primarily works on inline-level elements and table cells. By making a parent element behave like a table cell, its content can be vertically aligned.\n\n## Key Properties:\n-   `display: table-cell`: Applied to the parent container, this makes it behave like a `<td>` element in an HTML table.\n-   `vertical-align: middle`: Applied to the element with `display: table-cell`, this property will vertically align its content to the middle of the cell.\n-   `height`: The parent container must have a defined height.\n-   `width`: For `display: table-cell` to distribute space properly, a `width` might also need to be explicitly defined, especially if there are multiple 'cells' or if the content is small.\n\n## Use Cases:\n-   Can be a simple solution for a single line of text or a single block element inside a container.\n-   Might be seen in older or legacy codebases.\n\n## Considerations:\n-   Semantically less meaningful than Flexbox or Grid for general layout.\n-   Can be tricky to manage responsive behavior.\n-   `vertical-align` property's behavior is complex and context-dependent.\n",
          "examples": [
            {
              "id": "example_table_cell_method",
              "title": "Table Cell Vertical Alignment",
              "code": "<div class=\"parent-table-cell\">\n  <div class=\"child-table-cell\">Table Cell Aligned</div>\n</div>\n\n<style>\n  .parent-table-cell {\n    display: table-cell;   /* Treat as a table cell */\n    vertical-align: middle; /* Vertically align content */\n    height: 300px;\n    width: 300px; /* Often needed for proper layout */\n    border: 2px dashed #f1c40f;\n    background-color: #fcf8e3;\n    font-family: sans-serif;\n    text-align: center; /* For horizontal centering */\n  }\n  .child-table-cell {\n    background-color: #f39c12;\n    color: white;\n    padding: 20px;\n    border-radius: 5px;\n    display: inline-block; /* Or block, depending on desired child behavior */\n  }\n</style>",
              "explanation": "This example demonstrates vertical alignment using the `display: table-cell` method. The parent element is made to behave like a table cell, allowing the `vertical-align: middle` property to be applied to it, which then centers its child content vertically. A defined `height` is necessary. Often, a `width` is also beneficial to ensure proper rendering, as table cells inherently manage space based on their column. `text-align: center` is added to the parent for horizontal centering, as `vertical-align` only affects the vertical axis.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_css_vertical_align_property_mcq",
            "question_css_table_cell_limitations_open"
          ],
          "relatedTasks": [],
          "tags": [
            "CSS",
            "Alignment",
            "Layout",
            "Legacy",
            "Table Display"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Display_Property"
          ],
          "complexity": 4,
          "interviewRelevance": 5,
          "learningPath": "beginner",
          "requiredFor": []
        },
        {
          "id": "theory_css_vertical_alignment_line_height",
          "title": "CSS Vertical Alignment: Line-height Method (for Single-line Text)",
          "content": "This method is simple and effective, but strictly limited to aligning single lines of text. It relies on the fact that `line-height` affects the vertical spacing of text within its containing box.\n\n## Key Properties:\n-   `line-height`: When set to the exact same value as the element's `height`, it effectively centers a single line of text vertically within that element. The extra height added by `line-height` is evenly distributed above and below the text baseline.\n-   `height`: The container element must have a fixed height.\n\n## Use Cases:\n-   Vertically centering text within buttons, small navigation items, or fixed-height input fields.\n-   Simple text labels or headings within a defined box.\n\n## Considerations:\n-   **Only for single lines of text**: If the text wraps to multiple lines, this method will not work as intended.\n-   **Fixed height required**: The container must have a specific `height` for this to work effectively.\n-   Does not work for block-level elements or elements with variable content.",
          "examples": [
            {
              "id": "example_line_height_method",
              "title": "Line-height Vertical Alignment for Text",
              "code": "<div class=\"text-container-line-height\">\n  Single Line Text\n</div>\n\n<style>\n  .text-container-line-height {\n    height: 100px;           /* Define the container height */\n    line-height: 100px;      /* Set line-height equal to height */\n    border: 2px dashed #34495e;\n    background-color: #ebf5fb;\n    font-family: sans-serif;\n    text-align: center;      /* For horizontal centering */\n    font-size: 20px;\n  }\n</style>",
              "explanation": "This example demonstrates how to vertically center a single line of text using the `line-height` method. By setting the `line-height` property to the exact same value as the `height` of the container, the text content is automatically centered vertically within that height. This is because the extra space from `line-height` is distributed evenly above and below the text. Note that this method only works reliably for single lines of text; for multiple lines, the layout will break. `text-align: center` is added for horizontal centering.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_css_line_height_limitations_mcq",
            "question_css_line_height_purpose_flashcard"
          ],
          "relatedTasks": [],
          "tags": [
            "CSS",
            "Typography",
            "Alignment",
            "Text Styling"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Text_Properties"
          ],
          "complexity": 3,
          "interviewRelevance": 6,
          "learningPath": "beginner",
          "requiredFor": []
        },
        {
          "id": "theory_css_vertical_alignment_padding",
          "title": "CSS Vertical Alignment: Padding Method",
          "content": "The padding method involves manually adjusting the top and bottom padding of an element to push its content towards the vertical center. This is a very straightforward but often inflexible approach.\n\n## Key Properties:\n-   `padding-top` and `padding-bottom`: By setting equal `padding-top` and `padding-bottom` values on a container, the content inside will appear vertically centered, provided the container has enough vertical space.\n\n## Use Cases:\n-   Simple cases where a fixed amount of vertical spacing is desired.\n-   When precise control over the exact spacing is needed.\n\n## Considerations:\n-   **Not truly dynamic**: Requires manual calculation if content height changes or parent height is dynamic.\n-   **Requires fixed height or manual adjustment**: If the container's height is not fixed, or if the content changes, the padding might need constant recalculation.\n-   Doesn't work well for variable content or responsive designs where precise vertical centering is required across different screen sizes without media queries.\n-   Adds to the element's total height (due to box model), which might be an issue in some layouts.\n",
          "examples": [
            {
              "id": "example_padding_method",
              "title": "Padding Vertical Alignment",
              "code": "<div class=\"parent-padding\">\n  <div class=\"child-padding\">Padded Content</div>\n</div>\n\n<style>\n  .parent-padding {\n    height: 200px; /* Example fixed height */\n    padding-top: 50px;   /* Adjust these values */\n    padding-bottom: 50px;\n    border: 2px dashed #95a5a6;\n    background-color: #f2f4f4;\n    font-family: sans-serif;\n    box-sizing: border-box; /* Important if height is fixed and padding is added */\n    display: flex; /* Can combine with flex for centering child within the padded space */\n    justify-content: center;\n    align-items: center; /* Only centers if display is flex and no content within child */\n  }\n  .child-padding {\n    background-color: #7f8c8d;\n    color: white;\n    padding: 10px;\n    border-radius: 3px;\n  }\n</style>",
              "explanation": "This example demonstrates vertical alignment using symmetric padding. By applying `padding-top` and `padding-bottom` to the parent container, the content inside is pushed towards the vertical center. This method is simple but less dynamic, as the padding values need to be manually adjusted if the container's height or the child's content size changes significantly. Using `box-sizing: border-box` is recommended if you have a fixed `height` on the parent, so padding is included within that height rather than increasing it. For actual centering, you'd typically combine this with Flexbox or Grid on the child content if it's dynamic, or for text, rely on line-height.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_css_padding_vs_margin_flashcard",
            "question_css_padding_limitations_open"
          ],
          "relatedTasks": [],
          "tags": [
            "CSS",
            "Box Model",
            "Alignment"
          ],
          "technology": "CSS",
          "prerequisites": [
            "CSS_Box_Model"
          ],
          "complexity": 3,
          "interviewRelevance": 4,
          "learningPath": "beginner",
          "requiredFor": []
        }
      ],
      "questions": [
        {
          "id": "question_react_use_effect_dependency_array_mcq",
          "topic": "React useEffect Hook",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following `useEffect` implementation in a React component:\n\n```javascript\nfunction MyComponent({ propA }) {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    console.log('Effect ran');\n    // Side effect logic here\n    return () => {\n      console.log('Cleanup ran');\n    };\n  }, []); // Dependency array\n\n  return <button onClick={() => setCount(c => c + 1)}>Increment Count: {count}</button>;\n}\n```\n\nHow many times will 'Effect ran' and 'Cleanup ran' be logged if `MyComponent` is rendered, then its `propA` changes, and then the component unmounts?",
          "answer": "Effect ran: 1, Cleanup ran: 1",
          "options": [
            "Effect ran: 1, Cleanup ran: 0",
            "Effect ran: 2, Cleanup ran: 1",
            "Effect ran: 1, Cleanup ran: 1",
            "Effect ran: 2, Cleanup ran: 2"
          ],
          "analysisPoints": [
            "Understanding of `useEffect` with an empty dependency array (`[]`).",
            "Knowledge that an empty dependency array causes the effect to run only once on mount.",
            "Understanding that the cleanup function runs only once on unmount when the dependency array is empty.",
            "Recognition that changes to props or state *not* in the dependency array do not trigger re-runs of the effect."
          ],
          "keyConcepts": [
            "React useEffect hook",
            "Dependency array in useEffect",
            "Effect cleanup function",
            "Component lifecycle (mount, unmount)"
          ],
          "evaluationCriteria": [
            "Correctly identifies the behavior of `useEffect` with an empty dependency array.",
            "Distinguishes between effect execution and cleanup execution.",
            "Understands when dependencies trigger re-runs."
          ],
          "example": "With an empty dependency array `[]`, the `useEffect` hook behaves like `componentDidMount` and `componentWillUnmount` combined. The effect function runs only once after the initial render. The cleanup function runs only once when the component unmounts. Changes to `propA` or `count` (which are not in the empty dependency array) will cause re-renders of the component but will *not* trigger the `useEffect` to re-run. Therefore, 'Effect ran' is logged once on mount, and 'Cleanup ran' is logged once on unmount.",
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Lifecycle",
            "State"
          ],
          "prerequisites": [
            "React_Basics_Components",
            "JavaScript_Closures"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_use_state_behavior_mcq",
          "topic": "React useState Hook",
          "level": "easy",
          "type": "mcq",
          "question": "Consider the following React component:\n\n```javascript\nimport React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  const handleClick = () => {\n    setCount(count + 1);\n    setCount(count + 1);\n  };\n\n  return (\n    <button onClick={handleClick}>Count: {count}</button>\n  );\n}\n```\n\nIf the button is clicked when `count` is 0, what will be the value of `count` displayed after the click?",
          "answer": "1",
          "options": [
            "0",
            "1",
            "2",
            "undefined"
          ],
          "analysisPoints": [
            "Understanding of React's batching of state updates.",
            "Knowledge that `setCount(value)` uses the *stale* value of `count` from the render where the event handler was created.",
            "Ability to distinguish between direct value updates and functional updates (`setCount(prevCount => prevCount + 1)`)."
          ],
          "keyConcepts": [
            "React useState hook",
            "State update batching",
            "Asynchronous state updates"
          ],
          "evaluationCriteria": [
            "Correctly identifies the result of batched state updates.",
            "Understands how React queues state changes."
          ],
          "example": "React batches multiple state updates within the same event loop tick for performance. When `handleClick` is called, `count` is `0`. Both `setCount(count + 1)` calls will see `count` as `0`, so they both try to set the state to `0 + 1 = 1`. React will process these updates and ultimately set `count` to `1`. If you wanted it to increment twice, you'd use the functional update form: `setCount(prev => prev + 1); setCount(prev => prev + 1);`",
          "tags": [
            "React",
            "Hooks",
            "useState",
            "State Management"
          ],
          "prerequisites": [
            "React_Basics_Components"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_custom_hook_open",
          "topic": "React Custom Hooks",
          "level": "hard",
          "type": "open",
          "question": "You are tasked with creating a reusable feature in a React application: displaying a 'scroll to top' button that only appears when the user has scrolled down a certain distance (e.g., 200px). Design a custom React Hook `useScrollPosition` that provides the current scroll Y position, and explain how you would use it to implement the 'scroll to top' button. Discuss the importance of cleanup and potential performance considerations.",
          "answer": "A custom hook `useScrollPosition` can be implemented using `useState` to store the scroll position and `useEffect` to add and remove a scroll event listener. The event listener will update the state with `window.scrollY`. The `useEffect` should have an empty dependency array to ensure the listener is added only once on mount and removed only once on unmount, preventing memory leaks.\n\n```typescript\nimport { useState, useEffect, useCallback } from 'react';\n\nfunction useScrollPosition() {\n  const [scrollY, setScrollY] = useState(0);\n\n  const handleScroll = useCallback(() => {\n    setScrollY(window.scrollY);\n  }, []); // No dependencies, function identity is stable\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [handleScroll]); // Dependency on handleScroll to ensure it's up-to-date\n\n  return scrollY;\n}\n\n// Component using the hook\nfunction ScrollToTopButton() {\n  const scrollY = useScrollPosition();\n  const threshold = 200;\n\n  const scrollToTop = () => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  return (\n    <button \n      onClick={scrollToTop}\n      style={{\n        position: 'fixed',\n        bottom: '20px',\n        right: '20px',\n        display: scrollY > threshold ? 'block' : 'none',\n        padding: '10px 15px',\n        backgroundColor: '#007bff',\n        color: 'white',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        zIndex: 1000\n      }}\n    >\n      Scroll to Top\n    </button>\n  );\n}\n```\n\n**Explanation and Considerations:**\n\n*   **`useScrollPosition` Hook**: This hook encapsulates the logic for tracking scroll position. It uses `useState` for `scrollY` and `useEffect` to manage the `scroll` event listener on the `window` object.\n*   **`useCallback` for `handleScroll`**: The `handleScroll` function is wrapped in `useCallback` with an empty dependency array. This memoizes the function, ensuring its identity is stable across re-renders. This is important because `handleScroll` is a dependency of the `useEffect` hook, and if it were to change on every render, the `useEffect` would unnecessarily re-add/remove the event listener.\n*   **`useEffect` Dependencies and Cleanup**: The `useEffect` depends on `handleScroll`. The cleanup function `return () => { window.removeEventListener('scroll', handleScroll); }` is critical to prevent memory leaks. Without it, the event listener would persist even after the component (or any component using the hook) unmounts, leading to unnecessary function calls and potential errors.\n*   **Performance Considerations (Throttling/Debouncing)**: `scroll` events fire very rapidly. Direct `setScrollY(window.scrollY)` on every scroll event can lead to excessive re-renders and potential performance issues, especially on older devices or complex UIs. To mitigate this, `handleScroll` should ideally be debounced or throttled. For example, using a `throttle` utility function within `useCallback` (as shown in the `useThrottledWindowDimensions` example) would limit the frequency of state updates and thus re-renders.\n*   **Usage in `ScrollToTopButton`**: The `ScrollToTopButton` component simply consumes the `scrollY` value from `useScrollPosition`. It then uses a conditional `display` style to show or hide the button based on whether `scrollY` exceeds the `threshold` (200px).\n*   **`passive: true`**: Adding `{ passive: true }` to the `addEventListener` call tells the browser that the event handler will not call `preventDefault()`. This allows the browser to perform default scrolling behavior without waiting for the handler, potentially improving scroll performance.",
          "analysisPoints": [
            "Ability to design and implement a custom React hook.",
            "Correct application of `useState` and `useEffect` for DOM events.",
            "Understanding of `useEffect` cleanup and its importance for preventing memory leaks.",
            "Awareness of performance implications of frequent DOM events and solutions like throttling/debouncing.",
            "Proper use of `useCallback` for memoizing event handlers.",
            "Ability to integrate a custom hook into a functional component.",
            "Knowledge of `window.scrollY` and `window.scrollTo`."
          ],
          "keyConcepts": [
            "React Custom Hooks",
            "useState",
            "useEffect",
            "Event Listeners",
            "Cleanup Functions",
            "Performance Optimization (Throttling/Debouncing)",
            "useCallback",
            "DOM Manipulation"
          ],
          "evaluationCriteria": [
            "Completeness and correctness of the custom hook implementation.",
            "Clear explanation of cleanup and its necessity.",
            "Identification and discussion of performance issues and solutions.",
            "Proper integration of the hook into a UI component.",
            "Demonstration of `useCallback` where appropriate."
          ],
          "example": "The provided code and explanation illustrate a robust solution for a `useScrollPosition` hook, including best practices like `useCallback` and discussion of throttling for performance.",
          "tags": [
            "React",
            "Hooks",
            "Custom Hooks",
            "Performance",
            "Event Handling",
            "useEffect",
            "useState"
          ],
          "prerequisites": [
            "React_Hooks_Basics",
            "JavaScript_Functions",
            "DOM_Events"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_use_effect_cleanup_flashcard",
          "topic": "React useEffect Hook Cleanup",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of the return function within a `useEffect` hook?",
          "answer": "The primary purpose of the return function (cleanup function) within a `useEffect` hook is to perform any necessary cleanup operations before the component unmounts or before the effect re-runs (if dependencies change). This prevents memory leaks and ensures resources like event listeners, timers, and subscriptions are properly disposed of.",
          "analysisPoints": [
            "Defines the cleanup function's role.",
            "Identifies scenarios when cleanup runs (unmount, re-run).",
            "Lists common examples of cleanup (event listeners, timers, subscriptions)."
          ],
          "keyConcepts": [
            "useEffect hook",
            "Cleanup function",
            "Memory leaks",
            "Component unmounting",
            "Side effects"
          ],
          "evaluationCriteria": [
            "Provides a concise and accurate definition.",
            "Demonstrates understanding of `useEffect` lifecycle."
          ],
          "example": null,
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Cleanup",
            "Flashcard"
          ],
          "prerequisites": [
            "React_useEffect_Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_css_vertical_alignment_challenges_open",
          "topic": "CSS Vertical Alignment",
          "level": "medium",
          "type": "open",
          "question": "Explain why vertical alignment has historically been a significant challenge in CSS compared to horizontal alignment. Describe at least three distinct methods for achieving vertical alignment in modern CSS, highlighting their advantages and disadvantages.",
          "answer": "Historically, vertical alignment has been challenging in CSS primarily because the default document flow is horizontal (block elements stack vertically, inline elements flow horizontally). Properties like `text-align` or `margin: auto` are designed for horizontal centering. `vertical-align` itself behaves differently based on context (inline vs. table-cell).\n\nHere are three distinct methods for vertical alignment in modern CSS:\n\n1.  **Flexbox Method:**\n    *   **Description**: Apply `display: flex` to the parent container. Use `align-items: center` to vertically center direct children along the cross-axis. If the `flex-direction` is `column`, then `justify-content: center` would handle vertical centering.\n    *   **Advantages**: Very flexible and powerful for both single and multiple items. Excellent for responsive design. Intuitive property names (`align-items`). Works well with varying child heights.\n    *   **Disadvantages**: Requires the parent to be a flex container. May require explicit `height` on the parent for vertical alignment to be effective. Learning curve for new developers.\n\n2.  **CSS Grid Method:**\n    *   **Description**: Apply `display: grid` to the parent container. Use `place-items: center` (shorthand for `align-items: center` and `justify-items: center`) to center items within their grid cells. Or, explicitly use `align-items: center` for vertical centering.\n    *   **Advantages**: Designed for 2D layouts, making complex grid structures easy. `place-items` is very concise for perfect centering. Handles multiple items well. Responsive capabilities.\n    *   **Disadvantages**: May be overkill for simple single-item centering if a grid structure isn't otherwise needed. Requires a defined `height` on the parent for vertical alignment.\n\n3.  **Absolute Positioning with Transform:**\n    *   **Description**: Set `position: relative` on the parent. Set `position: absolute`, `top: 50%`, `left: 50%` on the child. Finally, apply `transform: translate(-50%, -50%)` to the child. The `top` and `left` properties position the top-left corner of the child at the parent's center, and `translate` then shifts the element back by half its *own* dimensions, thus centering it perfectly.\n    *   **Advantages**: Works reliably regardless of child content size (as `transform` uses percentages of the element itself). Takes the element out of the normal flow, useful for overlays or precise placement without affecting siblings.\n    *   **Disadvantages**: Removes the child from the document flow, which can affect surrounding elements. Less suitable for aligning multiple items dynamically. More verbose than Flexbox/Grid for simple centering.",
          "analysisPoints": [
            "Explains the fundamental reason for vertical alignment challenges (default horizontal flow).",
            "Accurately describes at least three distinct methods.",
            "Highlights key CSS properties for each method.",
            "Articulates clear advantages and disadvantages for each method, demonstrating critical thinking and understanding of their trade-offs.",
            "Focuses on modern CSS techniques predominantly."
          ],
          "keyConcepts": [
            "CSS Layout",
            "Vertical Alignment",
            "Flexbox",
            "CSS Grid",
            "Absolute Positioning",
            "CSS Transform",
            "Document Flow"
          ],
          "evaluationCriteria": [
            "Depth of explanation for the 'why' behind the challenge.",
            "Accuracy and completeness of method descriptions.",
            "Quality of pros/cons analysis.",
            "Clarity and organization of the response."
          ],
          "example": null,
          "tags": [
            "CSS",
            "Layout",
            "Alignment",
            "Interview",
            "Open-ended"
          ],
          "prerequisites": [
            "CSS_Display_Property",
            "CSS_Position_Property"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_css_flexbox_properties_flashcard",
          "topic": "CSS Flexbox",
          "level": "easy",
          "type": "flashcard",
          "question": "Which Flexbox property is primarily used for vertical alignment when `flex-direction` is `row`?",
          "answer": "`align-items`",
          "analysisPoints": [
            "Recalls the specific Flexbox property.",
            "Understands `align-items` role on the cross-axis.",
            "Connects `flex-direction: row` to vertical alignment via cross-axis."
          ],
          "keyConcepts": [
            "Flexbox",
            "align-items",
            "flex-direction",
            "Cross-axis"
          ],
          "evaluationCriteria": [
            "Correctly identifies the property.",
            "Demonstrates basic Flexbox terminology."
          ],
          "example": null,
          "tags": [
            "CSS",
            "Flexbox",
            "Alignment",
            "Flashcard"
          ],
          "prerequisites": [
            "CSS_Flexbox_Basics"
          ],
          "complexity": 2,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_css_grid_place_items_flashcard",
          "topic": "CSS Grid",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the shorthand CSS Grid property used to center items both vertically and horizontally within their grid area?",
          "answer": "`place-items: center`",
          "analysisPoints": [
            "Recalls the shorthand property.",
            "Understands its dual centering function."
          ],
          "keyConcepts": [
            "CSS Grid",
            "place-items",
            "Centering"
          ],
          "evaluationCriteria": [
            "Correctly identifies the property.",
            "Demonstrates knowledge of Grid shorthands."
          ],
          "example": null,
          "tags": [
            "CSS",
            "Grid",
            "Alignment",
            "Flashcard"
          ],
          "prerequisites": [
            "CSS_Grid_Basics"
          ],
          "complexity": 2,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_css_absolute_positioning_mcq",
          "topic": "CSS Absolute Positioning",
          "level": "medium",
          "type": "mcq",
          "question": "When using absolute positioning with `transform` to center an element, why is `transform: translate(-50%, -50%)` necessary after setting `top: 50%` and `left: 50%`?\n\n```css\n.parent {\n  position: relative;\n}\n.child {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%); /* Why is this line needed? */\n}\n```",
          "answer": "Because `top: 50%` and `left: 50%` position the top-left corner of the element at the parent's center, and `transform: translate(-50%, -50%)` shifts the element back by half its own width and height.",
          "options": [
            "Because `top: 50%` and `left: 50%` are only hints and `transform` enforces the actual centering.",
            "Because `transform: translate()` centers the element relative to the viewport, not the parent.",
            "Because `top: 50%` and `left: 50%` position the top-left corner of the element at the parent's center, and `transform: translate(-50%, -50%)` shifts the element back by half its own width and height.",
            "Because `transform: translate(-50%, -50%)` ensures the element retains its original dimensions despite absolute positioning."
          ],
          "analysisPoints": [
            "Understanding that `top/left` properties relate to the element's top-left corner.",
            "Knowledge that `transform: translate` percentages are relative to the *element itself*.",
            "Ability to explain how these two properties combine to achieve true centering.",
            "Distinguishing between parent-relative and self-relative positioning."
          ],
          "keyConcepts": [
            "CSS Positioning",
            "Absolute Positioning",
            "CSS Transforms",
            "Centering techniques"
          ],
          "evaluationCriteria": [
            "Correctly explains the combined effect of `top/left` and `transform: translate`.",
            "Demonstrates understanding of percentage-based `transform` values.",
            "Avoids common misconceptions about `transform`."
          ],
          "example": "Without `transform: translate(-50%, -50%)`, the top-left corner of the `.child` element would be positioned at the exact center of the `.parent`. This means the child element would appear to be shifted down and to the right by half its own size. The `transform` property is then used to 'pull' the element back by 50% of its own width and 50% of its own height, making its actual center point align with the parent's center point.",
          "tags": [
            "CSS",
            "Positioning",
            "Transform",
            "Alignment"
          ],
          "prerequisites": [
            "CSS_Position_Property",
            "CSS_Transforms"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_css_line_height_limitations_mcq",
          "topic": "CSS Line-height Method",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following is a significant limitation of using the `line-height` property for vertical alignment in CSS?\n\n```css\n.text-element {\n  line-height: 100px;\n  height: 100px;\n}\n```",
          "answer": "It only works reliably for single lines of text.",
          "options": [
            "It only works in modern browsers.",
            "It only works reliably for single lines of text.",
            "It requires `display: flex` on the parent.",
            "It affects the horizontal alignment as well."
          ],
          "analysisPoints": [
            "Understands the specific use case of the `line-height` method.",
            "Identifies its primary drawback (multi-line text).",
            "Distinguishes `line-height` from other centering methods."
          ],
          "keyConcepts": [
            "CSS Line-height",
            "Vertical Alignment",
            "Text Styling"
          ],
          "evaluationCriteria": [
            "Correctly identifies the main limitation.",
            "Shows awareness of the method's scope."
          ],
          "example": "The `line-height` method works by distributing the extra vertical space (difference between `line-height` and `font-size`) evenly above and below a single line of text. If the text wraps to multiple lines, the `line-height` property applies to each line individually, and the text will no longer be vertically centered within the element's total height.",
          "tags": [
            "CSS",
            "Alignment",
            "Typography"
          ],
          "prerequisites": [
            "CSS_Text_Properties"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_css_alignment_best_practices_mcq",
          "topic": "CSS Vertical Alignment Best Practices",
          "level": "medium",
          "type": "mcq",
          "question": "For modern web development, which CSS layout method is generally recommended as the most versatile and robust approach for both vertical and horizontal alignment of elements within a container, especially for complex and responsive layouts?",
          "answer": "Flexbox and CSS Grid",
          "options": [
            "Table Cell Method",
            "Absolute Positioning with Transform",
            "Line-height Method",
            "Flexbox and CSS Grid"
          ],
          "analysisPoints": [
            "Identifies modern, preferred layout techniques.",
            "Understands the versatility and robustness of Flexbox/Grid.",
            "Distinguishes these from older/more limited methods."
          ],
          "keyConcepts": [
            "CSS Layout",
            "Best Practices",
            "Flexbox",
            "CSS Grid",
            "Responsive Design"
          ],
          "evaluationCriteria": [
            "Selects the most appropriate modern methods.",
            "Demonstrates awareness of current CSS trends."
          ],
          "example": "Flexbox and CSS Grid are specifically designed for layout and alignment. Flexbox excels at one-dimensional alignment (either row or column), while CSS Grid is powerful for two-dimensional layouts (rows and columns simultaneously). Both offer straightforward and highly flexible properties like `align-items`, `justify-content`, and `place-items`, making them superior for responsive and complex modern web UIs compared to older, less flexible methods.",
          "tags": [
            "CSS",
            "Layout",
            "Alignment",
            "Best Practices",
            "Flexbox",
            "Grid"
          ],
          "prerequisites": [
            "CSS_Display_Property"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_css_absolute_vs_relative_open",
          "topic": "CSS Positioning",
          "level": "medium",
          "type": "open",
          "question": "Differentiate between `position: relative` and `position: absolute` in CSS. When would you typically use one over the other, especially in the context of element placement and layering?",
          "answer": "`position: relative` and `position: absolute` both allow you to control the exact placement of an element using `top`, `right`, `bottom`, and `left` properties, but they define their positioning context differently.\n\n**`position: relative`:**\n*   **Behavior**: An element with `position: relative` remains in the normal document flow. The `top`, `right`, `bottom`, `left` properties offset the element *from its normal position*. The space that the element would normally occupy in the layout is preserved, meaning it does not affect the positioning of its siblings or its parent's size in terms of flow.\n*   **Primary Use**: Its most common use is to establish a **positioning context** for its absolutely positioned children. An absolutely positioned child will position itself relative to its closest ancestor with a `position` value other than `static` (which is the default). If no such ancestor exists, it will position itself relative to the initial containing block (usually the `<html>` element).\n*   **Example**: Moving an icon slightly from its original spot without affecting surrounding text.\n\n**`position: absolute`:**\n*   **Behavior**: An element with `position: absolute` is removed from the normal document flow. It no longer takes up space in the layout, and other elements will behave as if it's not there. It is positioned relative to its *closest positioned ancestor* (an ancestor with `position: relative`, `absolute`, `fixed`, or `sticky`). If no such ancestor exists, it positions itself relative to the initial containing block (`<html>`).\n*   **Primary Use**: Ideal for overlays, modals, tooltips, dropdowns, pop-ups, or any element that needs to be precisely placed over other content without disturbing the surrounding layout flow. It's crucial for layering elements using `z-index`.\n*   **Example**: Placing a 'New!' badge on a product image, or centering a modal dialog on the screen.\n\n**When to use one over the other:**\n*   Use `position: relative` on a parent when you need to constrain the positioning of `position: absolute` children *within that parent*. This creates a contained system for absolute positioning.\n*   Use `position: absolute` on a child when you need to overlay it on top of other content, position it precisely within a containing element, or take it out of the normal document flow so it doesn't affect the layout of its siblings. It's often combined with `position: relative` on the parent for predictable behavior. For example, to center an element using the `top: 50%; left: 50%; transform: translate(-50%, -50%);` technique, the parent must be `position: relative` to act as the reference point for `top` and `left` percentages.",
          "analysisPoints": [
            "Clearly defines the behavior of both `position: relative` (in-flow, offsets from self) and `position: absolute` (out-of-flow, relative to positioned ancestor).",
            "Explains the concept of 'positioning context' established by `position: relative`.",
            "Provides clear use cases for each property.",
            "Demonstrates understanding of how they are used together for common patterns like overlays or precise placement.",
            "Mentions the impact on document flow for both."
          ],
          "keyConcepts": [
            "CSS Positioning",
            "Document Flow",
            "Positioning Context",
            "Layering (z-index implicit)",
            "Layout"
          ],
          "evaluationCriteria": [
            "Accuracy and completeness of definitions.",
            "Clear distinction between the two properties.",
            "Relevant and practical use cases.",
            "Understanding of their interplay."
          ],
          "example": null,
          "tags": [
            "CSS",
            "Positioning",
            "Layout",
            "Interview",
            "Open-ended"
          ],
          "prerequisites": [
            "CSS_Box_Model"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_css_vertical_align_property_mcq",
          "topic": "CSS Vertical Alignment Property",
          "level": "medium",
          "type": "mcq",
          "question": "The `vertical-align` CSS property is primarily used to align:\n\n1.  Block-level elements within their parent.\n2.  Inline-level and table-cell elements vertically.\n3.  Elements within a Flexbox container.\n4.  Elements within a CSS Grid container.",
          "answer": "Inline-level and table-cell elements vertically.",
          "options": [
            "1 only",
            "2 only",
            "3 only",
            "1 and 4"
          ],
          "analysisPoints": [
            "Understands the specific contexts where `vertical-align` is effective.",
            "Distinguishes its use from modern layout systems (Flexbox/Grid).",
            "Recognizes that it does not apply to block-level elements in the same way."
          ],
          "keyConcepts": [
            "CSS Vertical Alignment",
            "vertical-align property",
            "Inline-level elements",
            "Table cells",
            "Display property"
          ],
          "evaluationCriteria": [
            "Correctly identifies the primary use case of `vertical-align`.",
            "Avoids common misconceptions about its applicability."
          ],
          "example": "The `vertical-align` property is designed to align inline-level content (like `<span>`, `<img>`, `<a>`) or table-cell content (`<td>`, or elements with `display: table-cell`). It does not work directly on block-level elements like `<div>` to vertically align them within their parent, nor is it the primary alignment tool in Flexbox or Grid layouts. In those contexts, properties like `align-items` or `place-items` are used.",
          "tags": [
            "CSS",
            "Alignment",
            "Legacy",
            "Display Property"
          ],
          "prerequisites": [
            "CSS_Display_Property"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_react_debounce_resize_hook",
          "title": "Implement a Debounced Window Resize Hook in React",
          "description": "\nCreate a custom React hook `useDebouncedWindowDimensions` that tracks the browser's `innerWidth` and `innerHeight`. The hook should update its state only after the user stops resizing the window for a specified `delay` period (e.g., 200ms). This is crucial for performance optimization in applications that react to window resizing.\n\n**Requirements:**\n1.  The hook should return an object `{ width: number, height: number }`.\n2.  It must get the initial dimensions on mount.\n3.  It must use `useEffect` to subscribe to the `resize` event.\n4.  It must correctly debounce the `resize` event handler.\n5.  It must include proper cleanup to remove the event listener when the component using the hook unmounts.\n6.  Consider edge cases like server-side rendering (SSR) where `window` might not be defined.\n7.  Demonstrate its usage in a simple React component.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect, useCallback } from 'react';\n\n// TODO: Implement a debounce utility function here (optional, can be inlined or imported)\n\n// TODO: Implement the useDebouncedWindowDimensions custom hook\nfunction useDebouncedWindowDimensions(delay = 200) {\n  // Initial dimensions for SSR safety\n  const [dimensions, setDimensions] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  // TODO: Define the debounced updateDimensions function\n  const updateDimensions = useCallback(() => {\n    // This function should update dimensions state after debounce\n    // Remember to use window.innerWidth and window.innerHeight\n  }, [delay]); // Why does this depend on delay?\n\n  useEffect(() => {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    // TODO: Add event listener\n    // TODO: Call updateDimensions once initially\n\n    return () => {\n      // TODO: Remove event listener\n    };\n  }, [updateDimensions]); // Why does this effect depend on updateDimensions?\n\n  return dimensions;\n}\n\n// Component to demonstrate the hook\nfunction DebouncedWindowDisplay() {\n  const { width, height } = useDebouncedWindowDimensions(500);\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ddd', margin: '20px' }}>\n      <h2>Debounced Window Dimensions</h2>\n      <p>Width: {width}px</p>\n      <p>Height: {height}px</p>\n      <p>Updates only after 500ms of no resizing.</p>\n    </div>\n  );\n}\n\n// Export for usage (e.g., in App.js)\n// export default DebouncedWindowDisplay;\n",
          "solutionCode": "import React, { useState, useEffect, useCallback } from 'react';\n\n// Debounce utility function\nconst debounce = (func, delay) => {\n  let timeoutId;\n  return function(...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func.apply(this, args), delay);\n  };\n};\n\n// Custom hook to get debounced window dimensions\nfunction useDebouncedWindowDimensions(delay = 200) {\n  const [dimensions, setDimensions] = useState({\n    width: typeof window !== 'undefined' ? window.innerWidth : 0,\n    height: typeof window !== 'undefined' ? window.innerHeight : 0,\n  });\n\n  const updateDimensions = useCallback(\n    debounce(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }, delay),\n    [delay] // Recalculate debounced function if delay changes\n  );\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    // Set initial dimensions immediately on mount\n    updateDimensions(); \n\n    // Add event listener with debounced function\n    window.addEventListener('resize', updateDimensions);\n\n    // Cleanup: remove event listener on unmount\n    return () => {\n      window.removeEventListener('resize', updateDimensions);\n    };\n  }, [updateDimensions]); // Dependency on updateDimensions ensures effect re-runs if debounced function changes (e.g., if delay prop changes)\n\n  return dimensions;\n}\n\n// Component to demonstrate the hook\nfunction DebouncedWindowDisplay() {\n  const { width, height } = useDebouncedWindowDimensions(500);\n\n  return (\n    <div style={{ padding: '20px', border: '1px solid #ddd', margin: '20px' }}>\n      <h2>Debounced Window Dimensions</h2>\n      <p>Width: {width}px</p>\n      <p>Height: {height}px</p>\n      <p>Updates only after 500ms of no resizing.</p>\n    </div>\n  );\n}\n",
          "testCases": [
            "On initial mount, dimensions should reflect current window size.",
            "Rapidly resizing the window should only trigger state updates *after* the resizing stops for the specified delay.",
            "Verify that `updateDimensions` is called only once per 'resize session' after the debounce delay.",
            "Ensure no memory leaks by checking that the event listener is removed when the `DebouncedWindowDisplay` component is unmounted from the DOM.",
            "Test with different `delay` values passed to `useDebouncedWindowDimensions` (e.g., 100ms, 1000ms)."
          ],
          "hints": [
            "Start by implementing a generic `debounce` helper function that takes a function and a delay.",
            "Use `clearTimeout` and `setTimeout` within your debounce function.",
            "Remember to wrap your debounced function with `useCallback` to prevent unnecessary re-creations, especially if `delay` can change.",
            "The `useEffect` dependency array should include the debounced function, as its identity might change if `delay` changes.",
            "Think about where `typeof window !== 'undefined'` checks are necessary for universal component behavior."
          ],
          "tags": [
            "React",
            "Hooks",
            "Custom Hooks",
            "Performance",
            "Debounce",
            "Event Handling",
            "useEffect",
            "useState"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_react_hooks_window_dimensions",
            "JavaScript_Functions",
            "JavaScript_Closures",
            "DOM_Events"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Throttling",
            "Functional Programming",
            "Higher-Order Functions"
          ]
        },
        {
          "id": "task_css_generic_centered_container",
          "title": "Build a Flexible Centered Container Component (CSS Focus)",
          "description": "\nCreate a React component `CenteredContainer` that can horizontally and vertically center its children. The component should accept a prop `method` that allows selecting the CSS technique to be used for centering (e.g., 'flexbox', 'grid', 'absolute').\n\n**Requirements:**\n1.  The `CenteredContainer` component should accept `children` to be centered.\n2.  It should accept a `method` prop (string: 'flexbox' | 'grid' | 'absolute') to determine the centering technique.\n3.  Implement CSS for each specified method to achieve perfect horizontal and vertical centering for a single child.\n4.  The container should have a visible fixed height and width for demonstration purposes.\n5.  Provide examples of usage for each method.\n6.  Ensure clean, readable CSS and component structure.\n",
          "difficulty": "medium",
          "startingCode": "import React from 'react';\nimport './CenteredContainer.css'; // Assume CSS will be in this file\n\nfunction CenteredContainer({ children, method }) {\n  const containerClass = `centered-container centered-container--${method}`;\n\n  return (\n    <div className={containerClass}>\n      {children}\n    </div>\n  );\n}\n\n// Example Usage:\n/*\nfunction App() {\n  return (\n    <div>\n      <h3>Flexbox Centering:</h3>\n      <CenteredContainer method=\"flexbox\">\n        <div style={{ padding: '20px', background: '#e74c3c', color: 'white' }}>Centered with Flexbox</div>\n      </CenteredContainer>\n\n      <h3>Grid Centering:</h3>\n      <CenteredContainer method=\"grid\">\n        <div style={{ padding: '20px', background: '#8e44ad', color: 'white' }}>Centered with Grid</div>\n      </CenteredContainer>\n\n      <h3>Absolute Positioning Centering:</h3>\n      <CenteredContainer method=\"absolute\">\n        <div style={{ padding: '20px', background: '#16a085', color: 'white' }}>Centered with Absolute</div>\n      </CenteredContainer>\n    </div>\n  );\n}\n*/\n\n// --- CenteredContainer.css ---\n/*\n.centered-container {\n  width: 300px;\n  height: 200px;\n  border: 2px dashed #333;\n  margin: 20px;\n  display: flex; /* Default or fallback */\n  justify-content: center;\n  align-items: center;\n  font-family: sans-serif;\n}\n\n.centered-container--flexbox {\n  /* TODO: Add flexbox specific properties */\n}\n\n.centered-container--grid {\n  /* TODO: Add grid specific properties */\n}\n\n.centered-container--absolute {\n  /* TODO: Add absolute positioning specific properties */\n}\n\n.centered-container--absolute > div {\n  /* TODO: Add child specific properties for absolute method */\n}\n*/\n",
          "solutionCode": "import React from 'react';\nimport './CenteredContainer.css';\n\nfunction CenteredContainer({ children, method }) {\n  const containerClass = `centered-container centered-container--${method}`;\n\n  return (\n    <div className={containerClass}>\n      {children}\n    </div>\n  );\n}\n\n// --- CenteredContainer.css ---\n/*\nNote: For simplicity, this CSS assumes a single child for the 'absolute' method to directly target.\nFor other methods, it will center all direct children.\n*/\n.centered-container {\n  width: 300px;\n  height: 200px;\n  border: 2px dashed #333;\n  margin: 20px;\n  font-family: sans-serif;\n  display: block; /* Reset display for method-specific overrides */\n}\n\n/* Flexbox Method */\n.centered-container--flexbox {\n  display: flex;\n  justify-content: center; /* Horizontal */\n  align-items: center;    /* Vertical */\n}\n\n/* CSS Grid Method */\n.centered-container--grid {\n  display: grid;\n  place-items: center; /* Horizontal and Vertical shorthand */\n}\n\n/* Absolute Positioning Method */\n.centered-container--absolute {\n  position: relative; /* Establish positioning context */\n}\n\n.centered-container--absolute > div {\n  /* Assuming a single direct child for absolute centering */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n",
          "testCases": [
            "Render `CenteredContainer` with `method=\"flexbox\"` and verify the child is perfectly centered.",
            "Render `CenteredContainer` with `method=\"grid\"` and verify the child is perfectly centered.",
            "Render `CenteredContainer` with `method=\"absolute\"` and verify the child is perfectly centered.",
            "Test with children of different sizes (text, images, larger divs) to ensure centering remains consistent.",
            "Verify that changing the `method` prop dynamically updates the centering style correctly.",
            "Ensure that the fixed `width` and `height` of the container are respected."
          ],
          "hints": [
            "For Flexbox, remember the parent needs `display: flex`, and then `justify-content` and `align-items` for centering.",
            "For Grid, `display: grid` on the parent, and `place-items: center` is a very concise shorthand.",
            "For Absolute Positioning, the parent needs `position: relative`, and the child needs `position: absolute`, `top: 50%`, `left: 50%`, and crucially `transform: translate(-50%, -50%)`.",
            "Ensure your CSS selectors are specific enough to target the correct container based on the `method` prop."
          ],
          "tags": [
            "CSS",
            "React",
            "Component",
            "Layout",
            "Centering",
            "Flexbox",
            "Grid",
            "Absolute Positioning"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_css_vertical_alignment_flexbox",
            "theory_css_vertical_alignment_grid",
            "theory_css_vertical_alignment_absolute_transform",
            "React_Basics_Props_Children"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Responsive Design",
            "CSS Modularity",
            "Component Reusability"
          ]
        }
      ]
    }
  },
  {
    "id": "eb4903ef-5790-4609-af3d-5c019ef392e9",
    "startLine": 14700,
    "endLine": 14799,
    "processedDate": "2025-06-17T14:04:00.317Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_css_flex_alignment",
          "title": "CSS Flexbox for Layout and Alignment",
          "content": "Flexbox (Flexible Box Layout module) is a one-dimensional layout method for arranging items in rows or columns. It offers an efficient way to lay out, align, and distribute space among items in a container, even when their size is unknown or dynamic. It's particularly useful for aligning items along a single axis.\n\n## Key Concepts\n- **Flex Container**: The element on which `display: flex` is applied. This makes its direct children flex items.\n- **Flex Items**: The direct children of a flex container.\n- **Main Axis**: The primary axis along which flex items are laid out. Determined by `flex-direction`.\n- **Cross Axis**: The axis perpendicular to the main axis.\n- `flex-direction`: Defines the direction of the main axis (e.g., `row`, `column`, `row-reverse`, `column-reverse`).\n- `align-items`: Aligns flex items along the cross axis. Common values include `flex-start`, `flex-end`, `center`, `baseline`, `stretch`.\n- `justify-content`: Aligns flex items along the main axis. Common values include `flex-start`, `flex-end`, `center`, `space-between`, `space-around`, `space-evenly`.\n\n## Vertical Alignment with Flexbox\nTo vertically align items in a row (when `flex-direction: row`), you use the `align-items` property on the flex container. Setting `align-items: center` will vertically center the flex items along the cross-axis, regardless of their individual heights.",
          "examples": [
            {
              "id": "example_flex_alignment_1",
              "title": "Basic Vertical Alignment with Flexbox",
              "code": "/* HTML Structure */\n/* <div class=\"container\">\n  <div class=\"item\">Item 1 (Short)</div>\n  <div class=\"item\">Item 2 (Tall Tall Tall Tall)</div>\n  <div class=\"item\">Item 3</div>\n</div> */\n\n/* CSS */\n.container {\n  display: flex;\n  flex-direction: row;\n  align-items: center; /* Aligns items vertically in the center */\n  border: 2px solid blue;\n  min-height: 150px; /* To make the alignment visible */\n  padding: 10px;\n}\n\n.item {\n  padding: 15px;\n  margin: 5px;\n  background-color: lightblue;\n  border: 1px solid steelblue;\n  /* Items can have different heights and still be vertically aligned */\n}",
              "explanation": "This example demonstrates how to use `display: flex` on a container and `flex-direction: row` to arrange items horizontally. The crucial part for vertical alignment is `align-items: center`, which ensures all flex items are centered along the cross-axis (vertically, in this row-based layout). Even with varying item heights, they will all align their midpoints.",
              "language": "css"
            }
          ],
          "relatedQuestions": [
            "question_flex_align_1",
            "question_flex_align_2",
            "question_flex_align_3",
            "question_flex_align_4"
          ],
          "relatedTasks": [
            "task_flex_header_layout"
          ],
          "tags": [
            "CSS",
            "Flexbox",
            "Layout",
            "Alignment",
            "Frontend Basics"
          ],
          "technology": "CSS",
          "prerequisites": [
            "html_basics",
            "css_box_model"
          ],
          "complexity": 5,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "responsive_design",
            "component_layout"
          ]
        },
        {
          "id": "theory_css_subgrid",
          "title": "CSS Subgrid for Nested Grid Alignment",
          "content": "CSS Grid Layout is a two-dimensional layout system that allows designers to control the layout of elements in columns and rows. While standard CSS Grid is powerful, it has a limitation: nested grid items cannot inherit or share the grid tracks of their parent grid. This means if you have a grid item that itself is a grid container, its internal grid lines are independent of the parent's grid lines, making precise alignment across nested structures challenging.\n\n**CSS Subgrid** is a modern feature designed to overcome this limitation. When `grid-template-columns` or `grid-template-rows` is set to `subgrid` on a nested grid container, that nested grid container adopts the grid tracks (columns or rows) from its parent grid for that specific dimension. This enables true, intrinsic alignment of content within nested grid items with the parent grid, facilitating more complex and consistent layouts.\n\n## How it Works\n- Apply `display: grid` to the parent container.\n- Define grid tracks (rows/columns) on the parent using `grid-template-rows` and/or `grid-template-columns`.\n- For a child item that needs to participate in the parent's grid tracks, make it a grid container itself (`display: grid`).\n- Then, for the dimension you want to inherit, set `grid-template-rows: subgrid` or `grid-template-columns: subgrid`.\n- The subgridded item must span one or more parent grid tracks (e.g., `grid-column: 1 / span 3`). Its own direct children will then be placed according to the inherited tracks.\n\n## Use Cases\n- Aligning content inside cards that are themselves grid items, so their internal elements (e.g., button, title) align perfectly with elements in other cards, respecting the parent grid's columns.\n- Complex dashboard layouts where widgets need internal alignment based on a global grid.\n\n## Browser Compatibility\nSubgrid is a relatively newer CSS feature. It's crucial to check current browser support before using it in production. As of early 2023, Firefox had robust support, while Chrome and Edge were in development or recent implementation. Always refer to resources like Can I use... (`caniuse.com`) for up-to-date information.",
          "examples": [
            {
              "id": "example_subgrid_1",
              "title": "Basic CSS Subgrid Usage",
              "code": "/* HTML Structure */\n/* <div class=\"grid\">\n  <header>Header</header>\n  <div class=\"nested\">\n    <div class=\"nested-item\">Item A</div>\n    <div class=\"nested-item\">Item B</div>\n    <div class=\"nested-item\">Item C</div>\n  </div>\n  <footer>Footer</footer>\n</div> */\n\n/* CSS */\n.grid {\n  display: grid;\n  grid-template-rows: auto 1fr auto; /* Defines 3 rows for the parent grid */\n  height: 100vh;\n  border: 2px solid green;\n}\n\n.nested {\n  display: grid;\n  grid-row: 2; /* Occupies the second row of the parent grid */\n  grid-template-rows: subgrid; /* Makes this nested grid use the parent's row tracks */\n  align-items: center; /* Aligns content within this nested grid vertically */\n  border: 2px solid purple;\n}\n\n.nested-item {\n  border: 1px solid orange;\n  padding: 10px;\n  background-color: lightyellow;\n}",
              "explanation": "This example shows a parent grid with three rows. The `.nested` element is placed in the second row of the parent grid. By setting `grid-template-rows: subgrid`, the `.nested` element's internal grid system now aligns its rows directly with the parent's row tracks. This allows for precise alignment of `.nested-item` elements relative to the parent's overall grid structure, which would be challenging with standard nested grids. `align-items: center` is then used within the subgridded item for its own children's vertical alignment.",
              "language": "css"
            }
          ],
          "relatedQuestions": [
            "question_subgrid_1",
            "question_subgrid_2",
            "question_subgrid_3",
            "question_subgrid_4"
          ],
          "relatedTasks": [
            "task_complex_card_grid"
          ],
          "tags": [
            "CSS",
            "Grid",
            "Subgrid",
            "Layout",
            "Advanced CSS",
            "Browser Compatibility"
          ],
          "technology": "CSS",
          "prerequisites": [
            "css_grid_basics",
            "css_layout_principles"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "requiredFor": [
            "complex_ui_layouts",
            "design_system_implementation"
          ]
        },
        {
          "id": "theory_cra_https",
          "title": "Enabling HTTPS in Create-React-App Development",
          "content": "Using HTTPS (Hypertext Transfer Protocol Secure) in development ensures that your local application mirrors a production environment more closely, preventing mixed content warnings and allowing testing of features that require a secure context (e.g., geolocation, service workers, certain Web APIs). `create-react-app` (CRA) provides built-in support for enabling HTTPS during development.\n\n## How to Enable HTTPS\nTo activate HTTPS, you need to set the `HTTPS` environment variable to `true` before starting the development server. CRA will then automatically generate and use a self-signed SSL certificate.\n\n### 1. Command Line\nThis is a temporary way to enable HTTPS for a single session.\n- **macOS/Linux:** `HTTPS=true npm start`\n- **Windows CMD:** `set HTTPS=true&&npm start`\n- **Windows PowerShell:** `($env:HTTPS = \"true\") -and (npm start)`\n\n### 2. Using a `.env` file\nThis is the recommended and persistent way to enable HTTPS. Create a file named `.env` in the root of your project (where `package.json` is located) and add the following line:\n```\nHTTPS=true\n```\nWhen `npm start` is run, CRA will automatically pick up this environment variable.\n\n## Using Custom SSL Certificates\nFor more advanced scenarios or to avoid browser warnings about self-signed certificates, you can specify your own SSL certificate and key files. You'll need `cert.crt` (certificate) and `cert.key` (private key) files.\n```bash\nHttps=true SSL_CRT_FILE=./path/to/your/cert.crt SSL_KEY_FILE=./path/to/your/cert.key npm start\n```\nReplace `./path/to/your/` with the actual path to your certificate files. These paths are relative to your project root.\n\n## HTTPS in Production\nFor production deployments, handling HTTPS is generally managed by your hosting provider or server configuration.\n- **Managed Hosting (Netlify, Vercel, Heroku, etc.):** These services typically provide automatic SSL certificate provisioning and management (e.g., via Let's Encrypt), so you don't need to configure it within your CRA build.\n- **Self-Managed Servers:** If you're deploying to your own server, you'll need to configure a web server (like Nginx or Apache) to serve your application over HTTPS. Services like **Let's Encrypt** offer free, automated, and open certificates that are widely trusted by browsers.",
          "examples": [
            {
              "id": "example_cra_https_env",
              "title": "Enabling HTTPS using .env file",
              "code": "// .env file content\nHTTPS=true",
              "explanation": "This demonstrates the simplest and most common method for enabling HTTPS in a Create-React-App development environment. By placing `HTTPS=true` in a `.env` file in the project root, CRA will automatically start the development server with HTTPS enabled every time `npm start` is run.",
              "language": "plaintext"
            },
            {
              "id": "example_cra_https_custom_cert",
              "title": "Using Custom SSL Certificates",
              "code": "HTTPS=true SSL_CRT_FILE=./ssl/local.crt SSL_KEY_FILE=./ssl/local.key npm start",
              "explanation": "This command shows how to start the CRA development server with a custom SSL certificate. `SSL_CRT_FILE` points to the certificate file and `SSL_KEY_FILE` points to the private key file. This is useful for more professional local development setups where browser warnings for self-signed certificates are undesirable, or when integrating with APIs that require specific certificate trust.",
              "language": "bash"
            }
          ],
          "relatedQuestions": [
            "question_cra_https_1",
            "question_cra_https_2",
            "question_cra_https_3",
            "question_cra_https_4"
          ],
          "relatedTasks": [
            "task_cra_https_setup"
          ],
          "tags": [
            "React",
            "Create-React-App",
            "HTTPS",
            "Development Environment",
            "Security",
            "Deployment"
          ],
          "technology": "React",
          "prerequisites": [
            "npm_basics",
            "react_project_setup"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "web_security_understanding",
            "production_deployment"
          ]
        },
        {
          "id": "theory_frontend_resources",
          "title": "Essential Frontend Learning Resources",
          "content": "Continuous learning is vital in the fast-paced frontend development landscape. Accessing high-quality, up-to-date resources is key to mastering JavaScript, React, and other related technologies.\n\n## Key Learning Resources\n\n### JavaScript\n- **MDN Web Docs (Mozilla Developer Network)**: An authoritative and comprehensive resource for web technologies, including JavaScript. It provides detailed documentation, tutorials, and references for almost every web API and language feature. Essential for understanding core concepts and syntax.\n  - [MDN Web Docs - JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript)\n- **JavaScript.info**: A modern JavaScript tutorial from basics to advanced topics. It's known for its clear explanations, examples, and interactive exercises, making it a great resource for structured learning.\n  - [JavaScript.info](https://javascript.info/)\n- **Eloquent JavaScript**: A book by Marijn Haverbeke that covers JavaScript programming from the ground up, with a focus on core language features, functional programming, and practical applications. It's more conceptual and challenging but highly rewarding.\n  - [Eloquent JavaScript](https://eloquentjavascript.net/)\n- **You Don't Know JS (YDKJS)**: A series of books by Kyle Simpson that deep dives into the core mechanisms of the JavaScript language. It's aimed at developers who want a profound understanding of how JavaScript truly works, often challenging common misconceptions.\n  - [You Don't Know JS](https://github.com/getify/You-Dont-Know-JS)\n\n### React\n- **React Documentation**: The official documentation is the most reliable and up-to-date source for learning React. It covers fundamental concepts, advanced patterns, and provides comprehensive API references. It's continuously updated by the React team.\n  - [React Documentation](https://reactjs.org/docs/getting-started.html)\n- **React Hooks Documentation**: A dedicated section within the official React documentation focusing specifically on React Hooks, which are fundamental for modern React development. It explains their rules, common use cases, and benefits.\n  - [React Hooks Documentation](https://reactjs.org/docs/hooks-intro.html)\n\nThese resources provide a strong foundation and continued learning path for any frontend developer.",
          "examples": [],
          "relatedQuestions": [
            "question_frontend_resources_1",
            "question_frontend_resources_2",
            "question_frontend_resources_3"
          ],
          "relatedTasks": [],
          "tags": [
            "Learning",
            "Resources",
            "JavaScript",
            "React",
            "Frontend",
            "Career Development"
          ],
          "technology": "General Frontend",
          "prerequisites": [],
          "complexity": 3,
          "interviewRelevance": 6,
          "learningPath": "beginner",
          "requiredFor": [
            "continuous_learning",
            "knowledge_expansion"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_flex_align_1",
          "topic": "Flexbox Alignment",
          "level": "easy",
          "type": "mcq",
          "question": "Which CSS property is used on a flex container to vertically center its items when `flex-direction` is set to `row`?",
          "answer": "align-items: center;",
          "options": [
            "justify-content: center;",
            "align-items: center;",
            "flex-align: center;",
            "vertical-align: middle;"
          ],
          "analysisPoints": [
            "`align-items` controls alignment along the cross-axis.",
            "When `flex-direction` is `row`, the cross-axis is vertical.",
            "`justify-content` controls alignment along the main-axis (horizontal for `row`).",
            "`vertical-align` is for inline/table-cell elements, not flex items."
          ],
          "keyConcepts": [
            "Flexbox container and items",
            "Main and Cross axis",
            "`align-items` property",
            "`flex-direction` property"
          ],
          "evaluationCriteria": [
            "Understanding of `align-items` function",
            "Distinguishing between `align-items` and `justify-content`",
            "Knowledge of flexbox axis definitions"
          ],
          "example": "```css\n.container {\n  display: flex;\n  flex-direction: row;\n  align-items: center; /* This centers items vertically */\n}\n```",
          "tags": [
            "CSS",
            "Flexbox",
            "Alignment",
            "MCQ"
          ],
          "prerequisites": [
            "theory_css_flex_alignment"
          ],
          "complexity": 4,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_flex_align_2",
          "topic": "Flexbox vs. Block Layout",
          "level": "medium",
          "type": "open",
          "question": "Explain the primary difference between using `display: flex` and traditional block-level elements for layout purposes, specifically concerning item alignment and spacing. Provide a scenario where Flexbox is clearly advantageous.",
          "answer": "Flexbox is a one-dimensional layout system, meaning it deals with laying out items in a single row or a single column at a time. Traditional block-level elements (`display: block`) stack vertically by default, and horizontal alignment often requires properties like `margin: auto` or floats, which can be less intuitive and lead to issues (e.g., clearing floats).\n\nThe key advantage of Flexbox lies in its powerful alignment and distribution capabilities. Properties like `justify-content` (for the main axis) and `align-items` (for the cross axis) make it trivial to center, distribute space, or align items regardless of their content size. For example, `align-items: center` provides effortless vertical centering within a row-based layout, which is notoriously difficult and often hacky with block-level elements (requiring techniques like absolute positioning with transforms, or table-cell display).\n\n**Scenario Advantage:** A typical scenario where Flexbox is clearly advantageous is building a navigation bar. You have a logo on the left and a list of navigation links on the right. With Flexbox, you can easily create a container with `display: flex` and `justify-content: space-between` to push the logo and navigation to opposite ends. Furthermore, `align-items: center` ensures that both the logo and the navigation links are perfectly vertically aligned within the navigation bar, regardless of their individual heights, without resorting to complex calculations or positioning.",
          "analysisPoints": [
            "Flexbox is 1D (row or column), block is stacking.",
            "Flexbox has dedicated properties for alignment and space distribution (`justify-content`, `align-items`).",
            "Traditional block layout often requires workarounds for centering/distribution.",
            "Provides a clear and common use case demonstrating Flexbox's benefits."
          ],
          "keyConcepts": [
            "Flexbox advantages",
            "Block-level elements",
            "Layout dimensions (1D vs 2D)",
            "Alignment techniques in CSS"
          ],
          "evaluationCriteria": [
            "Clarity of explanation on dimensional differences.",
            "Accuracy in describing alignment challenges without Flexbox.",
            "Ability to provide a relevant and practical use case.",
            "Understanding of core Flexbox properties."
          ],
          "example": "",
          "tags": [
            "CSS",
            "Flexbox",
            "Layout",
            "Comparison",
            "Open-ended"
          ],
          "prerequisites": [
            "theory_css_flex_alignment"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_flex_align_3",
          "topic": "Flexbox Property Recall",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of `flex-direction` in Flexbox?",
          "answer": "It defines the main axis along which flex items are laid out, determining if they stack horizontally (`row`) or vertically (`column`).",
          "analysisPoints": [
            "Recall of `flex-direction`'s primary function.",
            "Understanding of its impact on the main axis.",
            "Knowledge of common values like `row` and `column`."
          ],
          "keyConcepts": [
            "Flexbox properties",
            "Main axis",
            "`flex-direction`"
          ],
          "evaluationCriteria": [
            "Direct recall of property purpose."
          ],
          "example": "",
          "tags": [
            "CSS",
            "Flexbox",
            "Flashcard",
            "Core Concepts"
          ],
          "prerequisites": [
            "theory_css_flex_alignment"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_flex_align_4",
          "topic": "Flexbox Code Snippet Analysis",
          "level": "medium",
          "type": "code",
          "question": "Consider the following CSS. Describe the expected layout and alignment of the items inside `.parent-container`.\n```css\n.parent-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: stretch;\n  height: 200px;\n}\n.child-item {\n  width: 50px;\n  padding: 10px;\n  background-color: lightcoral;\n}\n```\nWhat would change if `align-items` was set to `center` instead of `stretch`?",
          "answer": "Original layout:\nThe `parent-container` is a flex container with its items arranged in a column (`flex-direction: column`). This means the main axis is vertical and the cross axis is horizontal.\n- `justify-content: flex-end;`: Items will be aligned at the end of the main axis, i.e., at the bottom of the container.\n- `align-items: stretch;`: Items will stretch to fill the available space along the cross-axis, i.e., horizontally. Since `child-item` has a `width: 50px`, this `width` will be overridden by `stretch` unless `min-width` is set, or if the `width` is on a direct flex item that doesn't have an intrinsic size to stretch. In this case, assuming the child is a block, it will stretch to the full width of the container. If the item has a fixed width, `stretch` would typically ignore it, but standard block behavior combined with `stretch` often means it fills the available width.\n\nChange with `align-items: center`:\nIf `align-items` was set to `center`, the `child-item` elements would no longer stretch horizontally. Instead, they would be centered along the cross-axis (horizontally), respecting their `width: 50px`. Each `child-item` would be 50px wide and centered within the `parent-container`'s horizontal space, while still being pushed to the bottom due to `justify-content: flex-end;`.",
          "analysisPoints": [
            "Correctly identifies main and cross axes based on `flex-direction`.",
            "Understands the effect of `justify-content` on the main axis.",
            "Understands the effect of `align-items` on the cross axis, particularly `stretch` vs `center`.",
            "Explains how `width` interacts with `align-items: stretch`."
          ],
          "keyConcepts": [
            "Flexbox axes",
            "`flex-direction`",
            "`justify-content`",
            "`align-items`",
            "Flex item sizing"
          ],
          "evaluationCriteria": [
            "Accuracy of layout prediction.",
            "Completeness of explanation for property interactions.",
            "Correctly identifies the impact of changing `align-items` value."
          ],
          "example": "```html\n<div class=\"parent-container\">\n  <div class=\"child-item\">1</div>\n  <div class=\"child-item\">2</div>\n</div>\n```",
          "tags": [
            "CSS",
            "Flexbox",
            "Code Analysis",
            "Layout",
            "Hard"
          ],
          "prerequisites": [
            "theory_css_flex_alignment"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_subgrid_1",
          "topic": "CSS Subgrid Purpose",
          "level": "medium",
          "type": "mcq",
          "question": "What is the primary problem that CSS Subgrid aims to solve?",
          "answer": "It allows nested grid items to inherit or share the grid tracks of their parent grid.",
          "options": [
            "It simplifies the creation of responsive layouts using only a single grid declaration.",
            "It enables arbitrary positioning of elements without defining grid tracks.",
            "It allows nested grid items to inherit or share the grid tracks of their parent grid.",
            "It automatically distributes space evenly between grid items without explicit track definitions."
          ],
          "analysisPoints": [
            "Subgrid is specifically for nested grid alignment.",
            "It addresses the issue of independent grid tracks in nested grids.",
            "It's not about simplifying general responsive layouts or arbitrary positioning."
          ],
          "keyConcepts": [
            "CSS Grid limitations",
            "Subgrid functionality",
            "Nested grid alignment"
          ],
          "evaluationCriteria": [
            "Understanding of Subgrid's core purpose.",
            "Ability to differentiate Subgrid from other CSS Grid features."
          ],
          "example": "```css\n.parent-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n}\n.nested-grid-item {\n  display: grid;\n  grid-column: 1 / span 2; /* Spans 2 columns of parent */\n  grid-template-columns: subgrid; /* Inherits parent's column tracks */\n}\n```",
          "tags": [
            "CSS",
            "Grid",
            "Subgrid",
            "Layout",
            "MCQ"
          ],
          "prerequisites": [
            "theory_css_subgrid"
          ],
          "complexity": 6,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_subgrid_2",
          "topic": "CSS Subgrid vs. Regular Nested Grid",
          "level": "hard",
          "type": "open",
          "question": "Describe a real-world scenario where `subgrid` would be significantly more effective than a traditional nested grid (where the inner grid defines its own independent tracks). Explain why `subgrid` is the preferred solution in that context.",
          "answer": "A common real-world scenario is a `Card Grid Layout` where each card needs to align specific internal elements (e.g., a title, a brief description, and a call-to-action button) perfectly across all cards, despite varying content lengths or even slight design differences.\n\n**Scenario:** Imagine a portfolio page displaying multiple project cards. Each card is a grid item within a main `grid` layout. Inside each card, you have:\n1.  Project Title\n2.  Short Description\n3.  List of Technologies Used (tags)\n4.  'View Project' Button\n\n**Problem with Traditional Nested Grid:** If each card (`.card`) is a standard `display: grid` container, it defines its *own* independent rows and columns. This means that while you can align elements *within* a single card, ensuring that *all* project titles across different cards align horizontally, or all 'View Project' buttons align at the very bottom of their respective cards (when the card itself is flexible in height), becomes extremely difficult or impossible without complex JavaScript or fixed height hacks. The internal grid lines of `.card1` don't know about the internal grid lines of `.card2`.\n\n**Solution with `subgrid`:**\n1.  The `main-grid` defines the overall columns and rows, including a row for titles, a row for descriptions, etc., that each card will occupy.\n    ```css\n    .main-grid {\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n      grid-template-rows: auto auto 1fr auto; /* Example: Title, Description, Content, Button rows */\n    }\n    .card {\n      display: grid;\n      grid-row: span 4; /* Card spans these conceptual rows in the parent */\n      grid-template-rows: subgrid; /* THIS IS THE KEY: Card uses parent's row tracks */\n      /* ... other card styling ... */\n    }\n    .card-title { grid-row: 1; }\n    .card-description { grid-row: 2; }\n    .card-tags { grid-row: 3; }\n    .card-button { grid-row: 4; align-self: end; /* Aligns button to the bottom of its subgrid row */}\n    ```\n\n**Why `subgrid` is preferred:**\n-   **Intrinsic Alignment:** With `subgrid`, the `.card` (as a nested grid container) *inherits* the row tracks (or column tracks) from its `.main-grid` parent. This means `card-title` will always align with `card-title` in other cards, and `card-button` with `card-button` across all cards, because they are all referencing the *same* underlying grid lines defined by the parent.\n-   **Content-Driven Layouts:** It allows for more robust layouts where content drives the sizing, but alignment remains pixel-perfect across otherwise independent components.\n-   **Reduced Complexity:** Avoids the need for complex JavaScript to calculate heights and apply alignment, or brittle CSS hacks like `position: absolute` on buttons combined with `bottom: 0` which might not work well with dynamic content.",
          "analysisPoints": [
            "Identifies a specific and relevant real-world problem (e.g., card alignment).",
            "Clearly explains the limitations of traditional nested grids in that scenario.",
            "Demonstrates how `subgrid` directly solves the problem by sharing tracks.",
            "Highlights advantages like intrinsic alignment and reduced complexity."
          ],
          "keyConcepts": [
            "Subgrid use cases",
            "Nested grid limitations",
            "Cross-component alignment",
            "Grid track inheritance"
          ],
          "evaluationCriteria": [
            "Ability to articulate complex layout challenges.",
            "Deep understanding of `subgrid`'s mechanism.",
            "Providing a convincing and detailed comparison.",
            "Clarity and structure of the explanation."
          ],
          "example": "",
          "tags": [
            "CSS",
            "Grid",
            "Subgrid",
            "Layout",
            "Advanced CSS",
            "Open-ended"
          ],
          "prerequisites": [
            "theory_css_subgrid"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_subgrid_3",
          "topic": "CSS Subgrid Compatibility",
          "level": "easy",
          "type": "flashcard",
          "question": "What is a critical consideration before using CSS Subgrid in a production environment?",
          "answer": "Browser compatibility. Subgrid is a newer CSS feature, and its support varies across browsers. Always check resources like caniuse.com.",
          "analysisPoints": [
            "Highlights the importance of browser compatibility for new features.",
            "Mentions a common tool for checking compatibility."
          ],
          "keyConcepts": [
            "Subgrid limitations",
            "Browser support",
            "Progressive enhancement"
          ],
          "evaluationCriteria": [
            "Direct recall of a key practical consideration."
          ],
          "example": "",
          "tags": [
            "CSS",
            "Grid",
            "Subgrid",
            "Flashcard",
            "Best Practices"
          ],
          "prerequisites": [
            "theory_css_subgrid"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_subgrid_4",
          "topic": "Subgrid Property Usage",
          "level": "medium",
          "type": "code",
          "question": "Given a parent grid container with `grid-template-columns: 1fr 2fr 1fr;`. If a child element within this grid is a nested grid and needs to align its own children with the parent's *first two* column tracks, what CSS would you apply to the child element? Provide the CSS for the child and explain.",
          "answer": "To achieve this, the child element needs to be set as a grid container itself, span the desired parent columns, and then use `subgrid` for its column tracks:\n\n```css\n.child-element {\n  display: grid;\n  grid-column: 1 / span 2; /* Or grid-column: 1 / 3; to span the first two parent columns */\n  grid-template-columns: subgrid; /* Inherits the column tracks from the parent */\n  /* If you also wanted to inherit rows, you'd add: grid-template-rows: subgrid; */\n}\n```\n\n**Explanation:**\n1.  `display: grid;`: This makes the `.child-element` a grid container, allowing it to have its own grid items.\n2.  `grid-column: 1 / span 2;` (or `grid-column: 1 / 3;`): This property places the `.child-element` itself within the parent grid, making it occupy the first two columns of the parent. This is crucial because a subgridded item must span the tracks it intends to inherit.\n3.  `grid-template-columns: subgrid;`: This is the core `subgrid` declaration. Instead of defining new column tracks for the `.child-element`, it tells the browser to use the column tracks that the `.child-element` spans from its parent grid. So, the content inside `.child-element` can now align directly with the first two column tracks of the `.parent-grid`.",
          "analysisPoints": [
            "Correctly identifies `display: grid` for the child.",
            "Applies `grid-column` to define which parent tracks the child occupies.",
            "Correctly uses `grid-template-columns: subgrid` to inherit tracks.",
            "Provides a clear explanation of each property's role."
          ],
          "keyConcepts": [
            "Subgrid property application",
            "Parent-child grid interaction",
            "Track spanning (`grid-column`/`grid-row`)"
          ],
          "evaluationCriteria": [
            "Correctness of CSS syntax and property usage.",
            "Accuracy of explanation for each CSS rule.",
            "Demonstrates understanding of `subgrid` prerequisites (spanning parent tracks)."
          ],
          "example": "",
          "tags": [
            "CSS",
            "Grid",
            "Subgrid",
            "Code Challenge",
            "Hard"
          ],
          "prerequisites": [
            "theory_css_subgrid"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_cra_https_1",
          "topic": "CRA HTTPS Environment Variables",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following methods is the most persistent and recommended way to enable HTTPS for development in a Create-React-App project?",
          "answer": "Adding `HTTPS=true` to a `.env` file in the project root.",
          "options": [
            "Running `HTTPS=true npm start` directly in the terminal for each session.",
            "Modifying the `start` script in `package.json` to include `HTTPS=true`.",
            "Adding `HTTPS=true` to a `.env` file in the project root.",
            "Using a custom `webpack.config.js` to enable HTTPS."
          ],
          "analysisPoints": [
            "`.env` file provides persistence without modifying scripts or global env.",
            "Command-line is temporary.",
            "Modifying `package.json` scripts is less flexible for individual settings.",
            "CRA abstracts Webpack configuration, so direct `webpack.config.js` modification is not the standard approach."
          ],
          "keyConcepts": [
            "Create-React-App environment variables",
            ".env file usage",
            "HTTPS in development"
          ],
          "evaluationCriteria": [
            "Understanding of CRA configuration mechanisms.",
            "Knowledge of best practices for environment variables."
          ],
          "example": "```plaintext\n// .env\nHTTPS=true\n```",
          "tags": [
            "React",
            "Create-React-App",
            "HTTPS",
            "Environment Variables",
            "MCQ"
          ],
          "prerequisites": [
            "theory_cra_https"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_cra_https_2",
          "topic": "CRA HTTPS Production",
          "level": "medium",
          "type": "open",
          "question": "When deploying a Create-React-App application to production, how is HTTPS typically handled, and what are the main differences compared to enabling it in a development environment? Discuss two common approaches for production HTTPS.",
          "answer": "In production, HTTPS for a Create-React-App application is typically handled by the **hosting provider** or the **web server** serving the static build files, rather than within the CRA application itself or its build process.\n\n**Main Differences from Development:**\n-   **Development:** CRA uses a self-signed certificate (or a custom one you provide) to enable HTTPS on the local development server (e.g., `localhost:3000`). This is for local testing and does not involve a publicly trusted Certificate Authority (CA).\n-   **Production:** Production HTTPS requires a publicly trusted SSL/TLS certificate issued by a CA. This certificate is installed and managed by the server/service hosting your application, ensuring secure communication with end-users and browser trust.\n\n**Two Common Production Approaches:**\n1.  **Managed Hosting Platforms (e.g., Netlify, Vercel, AWS Amplify, Firebase Hosting):**\n    *   **How it works:** These platforms abstract away certificate management entirely. When you deploy your application, they automatically provision and renew SSL certificates (often leveraging services like Let's Encrypt) for your custom domains. They handle the server-side configuration to serve your site over HTTPS, redirecting HTTP traffic, and managing certificate renewals.\n    *   **Advantages:** Extremely simple, zero configuration required from the developer, fully automated, reliable, and cost-effective (often free).\n    *   **Disadvantages:** Less control over specific server configurations or certificate types.\n\n2.  **Self-Managed Web Servers (e.g., Nginx, Apache):**\n    *   **How it works:** If you host your CRA build (the `build` folder) on your own server (e.g., a VPS), you need to configure a web server (like Nginx or Apache) to serve the static files and handle HTTPS. This involves:\n        *   Obtaining an SSL certificate from a Certificate Authority (e.g., paid certs from DigiCert, or free ones from Let's Encrypt using Certbot).\n        *   Proconfiguring your web server to listen on port 443 (HTTPS), point to your certificate and private key files, and enforce HTTPS redirects (HTTP to HTTPS).\n    *   **Advantages:** Full control over server configuration, certificate choice, and security policies.\n    *   **Disadvantages:** Requires more manual setup, ongoing maintenance (e.g., certificate renewal), and deeper server administration knowledge.",
          "analysisPoints": [
            "Clearly contrasts dev vs. prod HTTPS handling.",
            "Explains the need for trusted certificates in production.",
            "Details two distinct and common production approaches (managed vs. self-managed).",
            "Lists advantages and disadvantages for each approach."
          ],
          "keyConcepts": [
            "HTTPS in production",
            "SSL certificates",
            "Certificate Authorities (CA)",
            "Managed hosting vs. self-hosting",
            "Let's Encrypt",
            "Nginx/Apache configuration"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of production HTTPS workflows.",
            "Ability to compare different deployment strategies.",
            "Accuracy of technical details regarding certificate types and server roles."
          ],
          "example": "",
          "tags": [
            "React",
            "Create-React-App",
            "HTTPS",
            "Deployment",
            "Security",
            "Open-ended"
          ],
          "prerequisites": [
            "theory_cra_https"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_cra_https_3",
          "topic": "CRA HTTPS Custom Certificates",
          "level": "medium",
          "type": "flashcard",
          "question": "What environment variables are used in Create-React-App to specify paths to custom SSL certificate and key files?",
          "answer": "`SSL_CRT_FILE` for the certificate file and `SSL_KEY_FILE` for the private key file.",
          "analysisPoints": [
            "Direct recall of specific environment variable names.",
            "Understanding the purpose of each file (cert vs. key)."
          ],
          "keyConcepts": [
            "Create-React-App customization",
            "SSL certificates",
            "Environment variables"
          ],
          "evaluationCriteria": [
            "Accuracy of variable names."
          ],
          "example": "",
          "tags": [
            "React",
            "Create-React-App",
            "HTTPS",
            "Flashcard",
            "Configuration"
          ],
          "prerequisites": [
            "theory_cra_https"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_cra_https_4",
          "topic": "CRA HTTPS OS Commands",
          "level": "easy",
          "type": "code",
          "question": "Provide the command-line syntax for enabling HTTPS in a Create-React-App development environment for both a macOS/Linux system and a Windows PowerShell environment. Assume you want to start the development server using `npm start`.",
          "answer": "For macOS/Linux:\n```bash\nHTTPS=true npm start\n```\n\nFor Windows PowerShell:\n```powershell\n($env:HTTPS = \"true\") -and (npm start)\n```\n",
          "analysisPoints": [
            "Correct syntax for setting environment variables on different OS.",
            "Correctly integrates with `npm start` command.",
            "Distinguishes between Unix-like shells and PowerShell."
          ],
          "keyConcepts": [
            "Environment variable syntax",
            "Cross-platform commands",
            "Create-React-App startup"
          ],
          "evaluationCriteria": [
            "Syntax accuracy.",
            "Coverage of specified operating systems."
          ],
          "example": "",
          "tags": [
            "React",
            "Create-React-App",
            "HTTPS",
            "Command Line",
            "Code Challenge"
          ],
          "prerequisites": [
            "theory_cra_https"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_frontend_resources_1",
          "topic": "Choosing Learning Resources",
          "level": "medium",
          "type": "open",
          "question": "You are mentoring a junior developer who is just starting with frontend development. They ask for advice on how to choose good learning resources and avoid outdated or misleading information. What guidance would you give them, and which specific resource(s) from the provided list would you recommend for their initial JavaScript and React learning?",
          "answer": "Guidance on choosing learning resources:\n1.  **Prioritize Official Documentation:** Always start with the official documentation for libraries and frameworks (e.g., React Docs). They are the most accurate, up-to-date, and authoritative source.\n2.  **Check Publication/Last Updated Dates:** Look for resources that have been recently updated or are known to be actively maintained. Frontend technologies evolve rapidly.\n3.  **Cross-Reference Information:** If a concept seems unclear or contradictory, cross-reference it with another reputable source (e.g., MDN Web Docs for JavaScript).\n4.  **Community Reputation:** Ask experienced developers or check community reviews (e.g., on Reddit, Stack Overflow, Twitter) for highly recommended books, courses, or websites.\n5.  **Understand Learning Style:** Some people prefer interactive tutorials, others prefer deep-dive books, and some learn best by building projects. Recommend resources that align with their learning style.\n6.  **Focus on Fundamentals First:** Before diving into complex frameworks, ensure a solid grasp of core JavaScript, HTML, and CSS.\n\n**Specific Recommendations from the List:**\n\nFor **initial JavaScript learning**:\n-   **MDN Web Docs**: Essential for quick lookups, detailed explanations of core concepts, and comprehensive API references. It's the most reliable source for factual information.\n-   **JavaScript.info**: This resource is excellent for beginners due to its structured approach, clear explanations, and interactive examples, covering a wide range of topics from basics to advanced. It's often praised for its readability.\n\nFor **initial React learning**:\n-   **React Documentation**: This is the absolute best starting point. The official docs are designed to teach React effectively, cover fundamentals thoroughly, and are always up-to-date with best practices, including Hooks. The 'Getting Started' and 'Hooks Intro' sections are invaluable.",
          "analysisPoints": [
            "Provides general advice on resource selection (official docs, dates, cross-referencing, community).",
            "Tailors recommendations to a junior developer's needs.",
            "Justifies why specific resources (MDN, JavaScript.info, React Docs) are suitable for initial learning.",
            "Emphasizes foundational knowledge."
          ],
          "keyConcepts": [
            "Learning strategies",
            "Resource evaluation",
            "Frontend ecosystem",
            "Official documentation importance"
          ],
          "evaluationCriteria": [
            "Quality and relevance of advice.",
            "Accuracy of resource recommendations.",
            "Clarity and completeness of reasoning."
          ],
          "example": "",
          "tags": [
            "Learning",
            "Career Development",
            "Mentoring",
            "Frontend Resources",
            "Open-ended"
          ],
          "prerequisites": [
            "theory_frontend_resources"
          ],
          "complexity": 6,
          "interviewFrequency": 5,
          "learningPath": "beginner"
        },
        {
          "id": "question_frontend_resources_2",
          "topic": "Advanced JavaScript Learning",
          "level": "hard",
          "type": "flashcard",
          "question": "Which two JavaScript resources from the list are generally recommended for developers seeking a *deep dive* into JavaScript's internal mechanisms and advanced concepts, challenging common misconceptions?",
          "answer": "Eloquent JavaScript and You Don't Know JS (YDKJS).",
          "analysisPoints": [
            "Identifies resources for advanced, conceptual understanding.",
            "Distinguishes them from introductory materials."
          ],
          "keyConcepts": [
            "Advanced JavaScript",
            "Conceptual understanding",
            "Learning paths"
          ],
          "evaluationCriteria": [
            "Correctly identifies advanced resources."
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "Learning",
            "Advanced",
            "Flashcard"
          ],
          "prerequisites": [
            "theory_frontend_resources"
          ],
          "complexity": 5,
          "interviewFrequency": 4,
          "learningPath": "advanced"
        },
        {
          "id": "question_frontend_resources_3",
          "topic": "Official Documentation Importance",
          "level": "easy",
          "type": "mcq",
          "question": "Why are official documentation sources like MDN Web Docs for JavaScript and the official React Documentation generally considered the most reliable learning resources?",
          "answer": "They are maintained by the creators or standards bodies, ensuring accuracy, completeness, and up-to-date information.",
          "options": [
            "They are usually the most engaging and interactive.",
            "They are maintained by the creators or standards bodies, ensuring accuracy, completeness, and up-to-date information.",
            "They always include practical, real-world project examples.",
            "They are typically the shortest path to learning a new technology."
          ],
          "analysisPoints": [
            "Highlights authority and accuracy as primary reasons.",
            "Dismisses entertainment or brevity as main criteria for reliability.",
            "Emphasizes 'up-to-date' aspect in a fast-changing field."
          ],
          "keyConcepts": [
            "Reliable resources",
            "Official documentation",
            "Accuracy",
            "Maintainers"
          ],
          "evaluationCriteria": [
            "Understanding the value proposition of official docs.",
            "Ability to discern core reasons for reliability."
          ],
          "example": "",
          "tags": [
            "Learning",
            "Best Practices",
            "Documentation",
            "MCQ"
          ],
          "prerequisites": [
            "theory_frontend_resources"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        }
      ],
      "tasks": [
        {
          "id": "task_flex_header_layout",
          "title": "Responsive Header with Vertical Alignment",
          "description": "\nImplement a responsive header component using Flexbox. The header should contain:\n\n1.  A logo on the far left.\n2.  A navigation menu (list of links) on the far right.\n3.  Both the logo and the navigation links should be perfectly vertically centered within the header, regardless of their individual content heights.\n4.  The header should have a fixed height of `80px`.\n5.  Ensure basic responsiveness: on smaller screens, the navigation links should still align correctly.\n\nYour solution should demonstrate understanding of key Flexbox properties for alignment and distribution.",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<div class=\"header\">\n  <div class=\"logo\">MyLogo</div>\n  <nav class=\"main-nav\">\n    <ul>\n      <li><a href=\"#\">Home</a></li>\n      <li><a href=\"#\">About</a></li>\n      <li><a href=\"#\">Services</a></li>\n      <li><a href=\"#\">Contact</a></li>\n    </ul>\n  </nav>\n</div>\n\n/* style.css */\n.header {\n  /* Your CSS here */\n}\n\n.logo {\n  /* Your CSS here */\n}\n\n.main-nav ul {\n  /* Your CSS here */\n}\n\n.main-nav li {\n  /* Your CSS here */\n}\n",
          "solutionCode": "/* style.css */\n.header {\n  display: flex;\n  justify-content: space-between; /* Pushes logo to left, nav to right */\n  align-items: center; /* Vertically centers items */\n  height: 80px;\n  background-color: #333;\n  color: white;\n  padding: 0 20px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n}\n\n.logo {\n  font-size: 24px;\n  font-weight: bold;\n}\n\n.main-nav ul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: flex; /* Make nav links flex items for horizontal arrangement */\n  gap: 20px; /* Space between links */\n}\n\n.main-nav li a {\n  text-decoration: none;\n  color: white;\n  font-size: 16px;\n  padding: 5px 0;\n  transition: color 0.3s ease;\n}\n\n.main-nav li a:hover {\n  color: #a3a3a3;\n}\n\n/* Basic Responsiveness Example (optional, could be more complex with media queries) */\n/* For very small screens, you might stack them or use a hamburger menu, \n   but for this task, just ensuring continued horizontal alignment is fine */\n@media (max-width: 600px) {\n  .header {\n    padding: 0 10px;\n  }\n  .main-nav ul {\n    gap: 10px;\n  }\n}",
          "testCases": [
            "Header should have a fixed height of 80px.",
            "Logo should be on the far left.",
            "Navigation menu should be on the far right.",
            "Both logo and nav items should be vertically centered.",
            "Adding an image as a logo (taller than text) should still result in vertical centering.",
            "The horizontal spacing between nav links should be consistent."
          ],
          "hints": [
            "Remember to apply `display: flex` to the container element.",
            "Consider `justify-content` for horizontal distribution and `align-items` for vertical alignment.",
            "The navigation `ul` itself might need `display: flex` to arrange its `li` children horizontally."
          ],
          "tags": [
            "CSS",
            "Flexbox",
            "Layout",
            "Responsive Design",
            "Frontend Basics"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_css_flex_alignment"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "flexbox_properties",
            "responsive_web_design"
          ]
        },
        {
          "id": "task_complex_card_grid",
          "title": "Aligned Card Grid with Subgrid",
          "description": "\nCreate a layout of multiple 'product cards' using CSS Grid. Each card should have:\n\n1.  An image at the top.\n2.  A product title.\n3.  A short description (can vary in length).\n4.  A price.\n5.  An 'Add to Cart' button at the very bottom of the card.\n\nThe challenge is to ensure that across *all* cards in the grid:\n-   All product titles align horizontally.\n-   All prices align horizontally.\n-   All 'Add to Cart' buttons align horizontally at the bottom of their respective cards, even if descriptions above them have different heights.\n\nYou *must* use CSS Subgrid to achieve this precise vertical alignment across cards. Provide HTML for multiple cards and the necessary CSS.",
          "difficulty": "hard",
          "startingCode": "<!-- index.html -->\n<div class=\"product-grid\">\n  <div class=\"product-card\">\n    <img src=\"https://via.placeholder.com/150\" alt=\"Product Image 1\">\n    <h3>Product Title One</h3>\n    <p>A short description.</p>\n    <div class=\"price\">$19.99</div>\n    <button>Add to Cart</button>\n  </div>\n  <div class=\"product-card\">\n    <img src=\"https://via.placeholder.com/150\" alt=\"Product Image 2\">\n    <h3>Product Title Two - A Bit Longer</h3>\n    <p>This is a slightly longer description that will push the content down. It needs to accommodate more text.</p>\n    <div class=\"price\">$29.50</div>\n    <button>Add to Cart</button>\n  </div>\n  <div class=\"product-card\">\n    <img src=\"https://via.placeholder.com/150\" alt=\"Product Image 3\">\n    <h3>Product Title Three</h3>\n    <p>Short description again.</p>\n    <div class=\"price\">$12.00</div>\n    <button>Add to Cart</button>\n  </div>\n</div>\n\n/* style.css */\n.product-grid {\n  display: grid;\n  /* Define parent grid columns and rows that subgrid will utilize */\n}\n\n.product-card {\n  /* Make this a subgrid container */\n}\n\n.product-card img {\n  /* Basic styling */\n}\n\n.product-card h3 {\n  /* Styling */\n}\n\n.product-card p {\n  /* Styling */\n}\n\n.product-card .price {\n  /* Styling */\n}\n\n.product-card button {\n  /* Styling */\n}\n",
          "solutionCode": "/* style.css */\n.product-grid {\n  display: grid;\n  /* Define columns for the main grid */\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  /* Define conceptual rows for the content within each card */\n  /* Image | Title | Description | Price | Button */\n  grid-template-rows: auto auto 1fr auto auto; /* image, title, description (flexible), price, button */\n  gap: 20px;\n  padding: 20px;\n  align-items: start; /* Ensure cards align at the top of their grid areas */\n}\n\n.product-card {\n  display: grid;\n  /* A card spans all 5 conceptual rows of the parent grid */\n  grid-row: span 5; \n  /* Crucial: Make the card a subgrid for its rows */\n  grid-template-rows: subgrid;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n  background-color: white;\n}\n\n.product-card img {\n  width: 100%;\n  height: 150px; /* Fixed height for image */\n  object-fit: cover;\n  border-radius: 4px;\n  margin-bottom: 10px;\n  grid-row: 1; /* Aligns with the first (image) row of the subgrid */\n}\n\n.product-card h3 {\n  font-size: 1.2em;\n  margin-top: 0;\n  margin-bottom: 5px;\n  grid-row: 2; /* Aligns with the second (title) row of the subgrid */\n}\n\n.product-card p {\n  font-size: 0.9em;\n  color: #666;\n  margin-bottom: 10px;\n  grid-row: 3; /* Aligns with the third (description) row of the subgrid */\n}\n\n.product-card .price {\n  font-size: 1.1em;\n  font-weight: bold;\n  color: #333;\n  margin-top: auto; /* Pushes price to the bottom of its implicit cell, if not using specific row for it */\n  margin-bottom: 10px;\n  grid-row: 4; /* Aligns with the fourth (price) row of the subgrid */\n}\n\n.product-card button {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 5px;\n  cursor: pointer;\n  font-size: 1em;\n  width: 100%;\n  grid-row: 5; /* Aligns with the fifth (button) row of the subgrid */\n  align-self: end; /* Ensures the button is at the very bottom of its row if the row has extra space */\n  margin-top: auto; /* Important: Pushes the button to the bottom of the card's available space if .price also uses auto margin or flexible grid */\n}\n\n.product-card button:hover {\n  background-color: #0056b3;\n}",
          "testCases": [
            "All product titles across different cards must align horizontally.",
            "All prices across different cards must align horizontally.",
            "All 'Add to Cart' buttons must align horizontally at the bottom of their cards.",
            "Cards with longer descriptions should not affect the alignment of titles, prices, or buttons in other cards.",
            "The layout should be a responsive grid (e.g., automatically adjust columns)."
          ],
          "hints": [
            "The parent grid needs to define the conceptual rows that each card's internal elements will occupy (e.g., one row for titles, one for descriptions, one for buttons).",
            "Each `.product-card` must be a `display: grid` and use `grid-template-rows: subgrid;`.",
            "Ensure each item *within* the `product-card` is assigned to the correct `grid-row` based on the parent's conceptual rows.",
            "You might need `align-self: end;` on the button to push it to the very bottom of its subgridded row, especially if the row is flexible (`1fr`)."
          ],
          "tags": [
            "CSS",
            "Grid",
            "Subgrid",
            "Layout",
            "Advanced CSS",
            "Frontend Interview"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_css_subgrid",
            "css_grid_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "grid_layout",
            "responsive_grid",
            "align_self"
          ]
        },
        {
          "id": "task_cra_https_setup",
          "title": "Configure Create-React-App with HTTPS and Custom Certificate",
          "description": "\nSet up a new Create-React-App project and configure it to run with HTTPS using a custom, self-signed SSL certificate. You'll need to:\n\n1.  Create a new React project.\n2.  Generate a self-signed SSL certificate and a private key (you can use `mkcert` or OpenSSL for this).\n3.  Configure your Create-React-App development server to use these custom certificate files.\n4.  Verify that the application runs locally over HTTPS (`https://localhost:3000` or similar) and uses your custom certificate.\n\nProvide the commands/steps for generating the certificate (with a brief explanation) and the exact command/`.env` setup for CRA.",
          "difficulty": "medium",
          "startingCode": "```bash\n# Step 1: Create a new React project\nnpx create-react-app my-https-app\ncd my-https-app\n\n# Step 2: Generate self-signed certificate (choose your preferred tool)\n# Placeholder for mkcert or OpenSSL commands\n\n# Step 3 & 4: Configure CRA to use custom certs and run\n# Your solution goes here\n```\n",
          "solutionCode": "```bash\n# Step 1: Create a new React project\nnpx create-react-app my-https-app\ncd my-https-app\n\n# Step 2: Generate self-signed certificate using mkcert\n# First, install mkcert if you haven't already:\n# For macOS: brew install mkcert\n# For Linux: sudo apt install mkcert\n# For Windows: choco install mkcert\n# Install local CA (only needs to be done once per machine):\nmkcert -install\n\n# Generate a certificate for localhost and 127.0.0.1\nmkcert localhost 127.0.0.1\n# This will generate 'localhost+1.pem' (certificate) and 'localhost+1-key.pem' (key) in your current directory.\n# Rename them for clarity (optional, but good practice for CRA): \nmv localhost+1.pem local.crt\nmv localhost+1-key.pem local.key\n# It's good practice to put these in a dedicated 'ssl' folder\nmkdir ssl\nmv local.crt ssl/local.crt\nmv local.key ssl/local.key\n\n# Step 3 & 4: Configure CRA to use custom certs and run\n# Option A: Using environment variables in the command line (for one-off execution)\nHTTPS=true SSL_CRT_FILE=./ssl/local.crt SSL_KEY_FILE=./ssl/local.key npm start\n\n# Option B: Using a .env file (recommended for persistence)\n# Create a .env file in the project root: touch .env\n# Add the following lines to .env:\n# HTTPS=true\n# SSL_CRT_FILE=./ssl/local.crt\n# SSL_KEY_FILE=./ssl/local.key\n\n# Then, simply run:\nnpm start\n```\n\n**Verification:**\nAfter running `npm start` (or the command line variant), your browser should open `https://localhost:3000` (or `https://127.0.0.1:3000`). If you used `mkcert`, the certificate should be trusted by your browser, and you should see a secure lock icon without warnings. You can inspect the certificate details in your browser's developer tools to confirm it's the one you generated.",
          "testCases": [
            "The React development server starts successfully.",
            "The application is accessible via HTTPS (e.g., `https://localhost:3000`).",
            "The browser indicates a secure connection (green lock icon, no certificate warnings - especially if `mkcert` was used correctly).",
            "The application correctly loads and functions over HTTPS.",
            "The configuration works using both command-line environment variables and a `.env` file."
          ],
          "hints": [
            "For generating self-signed certificates, `mkcert` is a very user-friendly tool. Install it globally first (`brew install mkcert` on macOS, `choco install mkcert` on Windows, or follow Linux instructions).",
            "Remember that `SSL_CRT_FILE` and `SSL_KEY_FILE` paths are relative to your project's root directory.",
            "Check your terminal output for any errors during `npm start`.",
            "If you encounter browser warnings, ensure your `mkcert -install` step was successful and your certificate common name matches `localhost` or `127.0.0.1`."
          ],
          "tags": [
            "React",
            "Create-React-App",
            "HTTPS",
            "Security",
            "Development Setup",
            "Command Line"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_cra_https",
            "npm_basics"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "ssl_certificates",
            "environment_variables",
            "web_security_basics"
          ]
        }
      ]
    }
  },
  {
    "id": "4e67808c-4909-4910-9cd5-348c12fc637a",
    "startLine": 14900,
    "endLine": 14999,
    "processedDate": "2025-06-17T14:22:43.614Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_js_fundamentals_datatypes_and_scope",
          "title": "JavaScript Fundamentals: Data Types, Variables, and Scope",
          "content": "JavaScript features several built-in data types, broadly categorized into **primitive types** and **object types**.\n\n## Primitive Data Types\nThese are immutable values and include:\n*   `String`: Textual data.\n*   `Number`: Numeric data (integers and floating-point numbers).\n*   `BigInt`: Arbitrary-precision integers.\n*   `Boolean`: Logical entity (true/false).\n*   `Undefined`: A variable that has been declared but not yet assigned a value.\n*   `Symbol`: Unique and immutable values, often used as object property keys.\n*   `Null`: Represents the intentional absence of any object value. It's often referred to as a primitive type, although `typeof null` returns 'object' (a long-standing bug).\n\n## Object Data Type\nThis is the complex type, serving as the base for more structured data. Everything that is not a primitive type is an object. This includes plain objects (`{}`), arrays (`[]`), functions, Dates, RegExps, etc. Objects are mutable and are passed by reference.\n\n## Variable Declaration and Temporal Dead Zone (TDZ)\nJavaScript has different ways to declare variables: `var`, `let`, and `const`.\n*   `var`: Function-scoped or global-scoped. Hoisted to the top of their scope and initialized with `undefined`. Accessing them before declaration doesn't throw an error, but results in `undefined`.\n*   `let` and `const`: Block-scoped. Also hoisted, but they are not initialized. Instead, they enter a 'temporal dead zone' (TDZ) from the start of their block until their declaration is processed. Attempting to access a `let` or `const` variable within its TDZ will result in a `ReferenceError`.\n\n### Temporal Dead Zone Explained\nThe TDZ ensures that variables are only accessible after their declaration and initialization, preventing potential bugs caused by premature access. This makes `let` and `const` more predictable and safer to use than `var`.\n\n## Value vs. Reference Assignment\n*   **Primitive values** are assigned by value. When a primitive variable is assigned to another, a copy of the value is made.\n*   **Object values** are assigned by reference. When an object variable is assigned to another, both variables point to the *same* underlying object in memory. Changes made through one variable will be reflected in the other.\n\n",
          "examples": [
            {
              "id": "example_js_fundamentals_1",
              "title": "Primitive vs. Object Assignment",
              "code": "let num1 = 10;\nlet num2 = num1;\nnum1 = 20;\nconsole.log(num2); // Output: 10 (num2 holds a copy of the original value)\n\nlet obj1 = { name: 'Hello' };\nlet obj2 = obj1;\nobj1 = { name: 'Bye' }; // obj1 now points to a NEW object\nconsole.log(obj2.name); // Output: Hello (obj2 still points to the ORIGINAL object)\n\nlet arr1 = [1, 2, 3];\nlet arr2 = arr1;\narr1.push(4); // Modifies the object arr1 points to\nconsole.log(arr2); // Output: [1, 2, 3, 4] (arr2 sees the change because it's the same object)\n\nlet obj3 = { value: 100 };\nlet obj4 = obj3;\nobj3.value = 200; // Modifies the object obj3 points to\nconsole.log(obj4.value); // Output: 200 (obj4 sees the change)\n",
              "explanation": "This example clearly demonstrates the difference between value assignment for primitives and reference assignment for objects. When `obj1` is reassigned to a *new* object, `obj2` continues to point to the *original* object. However, if `obj1`'s *properties* were modified (e.g., `obj1.name = 'Bye';`) instead of reassigning `obj1` entirely, `obj2` would reflect that change because both would still refer to the same object.",
              "language": "javascript"
            },
            {
              "id": "example_js_fundamentals_tdz",
              "title": "Temporal Dead Zone Demonstration",
              "code": "// console.log(aVar); // No error, 'undefined' (var is hoisted and initialized)\nvar aVar = 10;\n\n// console.log(bLet); // ReferenceError: Cannot access 'bLet' before initialization (TDZ)\nlet bLet = 20;\n\n// console.log(cConst); // ReferenceError: Cannot access 'cConst' before initialization (TDZ)\nconst cConst = 30;\n\nfunction scopeExample() {\n  // console.log(scopedVar); // ReferenceError (TDZ applies to function scope as well for let/const)\n  let scopedVar = 'I am scoped';\n  console.log(scopedVar);\n}\n\n// TDZ with function parameters\nfunction greet(name = defaultName) {\n  // console.log(defaultName); // ReferenceError if defaultName is declared AFTER this line in the scope\n  const defaultName = 'Guest'; \n  console.log(`Hello, ${name}`);\n}\n\n// console.log(myFunc()); // ReferenceError: Cannot access 'myFunc' before initialization\nconst myFunc = () => { return 'Hello'; };\n",
              "explanation": "This example illustrates the Temporal Dead Zone for `let` and `const`. Any attempt to access these variables before their declaration within their scope leads to a `ReferenceError`. In contrast, `var` variables, though hoisted, are initialized with `undefined`, so accessing them before assignment doesn't throw an error. The TDZ concept also applies to default parameters in functions and function expressions declared with `let`/`const`.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_js_datatypes_1",
            "question_js_datatypes_mcq_1",
            "question_js_datatypes_open_1",
            "question_js_tdz_1",
            "question_js_tdz_mcq_1",
            "question_js_tdz_flashcard_1"
          ],
          "relatedTasks": [
            "task_reference_vs_value",
            "task_variable_scoping_challenge"
          ],
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Data Types",
            "Variables",
            "Scope",
            "Temporal Dead Zone",
            "Primitives",
            "Objects"
          ],
          "technology": "JavaScript",
          "prerequisites": [],
          "complexity": 5,
          "interviewRelevance": 9,
          "learningPath": "beginner",
          "requiredFor": [
            "closure",
            "hoisting",
            "execution_context",
            "object_oriented_js"
          ]
        },
        {
          "id": "theory_js_object_properties_and_coercion",
          "title": "JavaScript: Object Property Access, Boxing, and Type Coercion",
          "content": "Understanding how JavaScript handles properties on objects and performs type conversions is crucial for writing robust code.\n\n## Property Checking: `in` Operator vs. `hasOwnProperty()`\n\n*   **`in` operator**: Checks if a specified property exists in an object or anywhere in its prototype chain. It returns `true` for both own and inherited enumerable properties.\n*   **`Object.prototype.hasOwnProperty()` method**: Checks if an object has a specified property as its *own direct property*, meaning it was not inherited from its prototype chain. It returns `true` only for direct properties.\n\nUsing `hasOwnProperty()` is generally preferred when you want to avoid issues with inherited properties (e.g., when iterating over an object's properties).\n\n## Boxing and Unboxing of Primitive Values\n\nJavaScript automatically converts primitive values (`string`, `number`, `boolean`, `symbol`, `bigint`) into their corresponding object wrappers (`String`, `Number`, `Boolean`, `Symbol`, `BigInt`) when you try to access properties or methods on them. This process is called **boxing**.\n\nAfter the property/method access, the wrapper object is typically discarded. The reverse process, retrieving the primitive value from a wrapper object, is **unboxing**.\n\n### Why avoid `new String()`, `new Number()`, `new Boolean()`?\n\nUsing these constructors explicitly creates wrapper *objects* around primitive values. This can lead to unexpected behaviors:\n*   `typeof new String('foo')` is `'object'`, not `'string'`. Similarly for `Number` and `Boolean`.\n*   Wrapper objects are always truthy in a boolean context, even `new Boolean(false)`. This is a common source of bugs.\n*   Strict equality (`===`) will treat primitive values and their wrapper objects as different types.\n\nIt is almost always better to use primitive literals directly (e.g., `'foo'`, `123`, `true`).\n\n## Type Coercion (Conversion)\n\nType coercion is the automatic or explicit conversion of a value from one data type to another. JavaScript, being a dynamically typed language, performs coercion frequently.\n\n### Explicit Coercion\nThis is when you *deliberately* convert a type using functions like `String()`, `Number()`, `Boolean()`, `parseInt()`, `parseFloat()`, or unary operators like `+` for number conversion.\n\n### Implicit Coercion\nThis occurs automatically by JavaScript in certain contexts, such as:\n*   **Arithmetic operations**: `+` operator (string concatenation if one operand is a string, otherwise numeric addition), `-`, `*`, `/`, `%` (always numeric).\n*   **Comparison operations**: `==` (loose equality, performs coercion before comparison), `>`, `<`, etc.\n*   **Logical operations**: `&&`, `||`, `!` (values are coerced to booleans).\n*   **String interpolation/templating literals**: Values are coerced to strings.\n*   **Concatenation with empty string**: `'' + value` coerces `value` to a string.\n*   **Unary `+`**: Converts operand to a number (e.g., `+'5'` results in `5`).\n\nImplicit coercion can sometimes lead to surprising results and is a common source of confusion in JavaScript. It's often recommended to use strict equality (`===`) and explicit conversions to make code more predictable.",
          "examples": [
            {
              "id": "example_js_properties_1",
              "title": "hasOwnProperty vs. in operator",
              "code": "const myObject = { ownProp: 1 };\nObject.prototype.inheritedProp = 2;\n\nconsole.log('ownProp' in myObject);         // true (exists on object itself)\nconsole.log(myObject.hasOwnProperty('ownProp')); // true (is an own property)\n\nconsole.log('inheritedProp' in myObject);    // true (exists in prototype chain)\nconsole.log(myObject.hasOwnProperty('inheritedProp')); // false (not an own property)\n\nconst objWithNullProto = Object.create(null);\nobjWithNullProto.customProp = 'value';\nconsole.log('customProp' in objWithNullProto); // true\nconsole.log(objWithNullProto.hasOwnProperty('customProp')); // true\nconsole.log('toString' in objWithNullProto); // false (no prototype chain)\n",
              "explanation": "This example highlights the key difference: `in` checks the entire prototype chain, while `hasOwnProperty` only checks the object's direct properties. This is crucial for avoiding unexpected behavior when iterating or checking for specific properties.",
              "language": "javascript"
            },
            {
              "id": "example_js_boxing_1",
              "title": "Boxing/Unboxing and Constructor Pitfalls",
              "code": "const strPrimitive = \"hello\";\nconsole.log(strPrimitive.toUpperCase()); // \"HELLO\" (strPrimitive is boxed to a String object temporarily)\nconsole.log(typeof strPrimitive); // \"string\" (original primitive type remains)\n\nconst numPrimitive = 123;\nconsole.log(numPrimitive.toFixed(2)); // \"123.00\" (numPrimitive is boxed to a Number object temporarily)\n\nconst boolPrimitive = false;\nconsole.log(boolPrimitive.valueOf()); // false (boolPrimitive is boxed to a Boolean object temporarily)\n\nconst stringObject = new String(\"world\");\nconsole.log(typeof stringObject); // \"object\" - Pitfall!\nconsole.log(stringObject == \"world\"); // true (== performs coercion)\nconsole.log(stringObject === \"world\"); // false (=== checks type and value)\n\nconst booleanObject = new Boolean(false);\nconsole.log(booleanObject); // [Boolean: false]\nif (booleanObject) { // Pitfall! Object is always truthy\n  console.log(\"This will always execute, even if it wraps 'false'!\");\n}\n\nconst numberObject = new Number(0);\nconsole.log(numberObject); // [Number: 0]\nif (numberObject) { // Pitfall! Object is always truthy\n  console.log(\"This will also always execute, even if it wraps '0'!\");\n}\n",
              "explanation": "This example shows automatic boxing when accessing methods on primitives and the problematic nature of using `new String()`, `new Number()`, `new Boolean()`. These constructors create objects which behave differently than their primitive counterparts in `typeof` checks and boolean contexts, leading to potential bugs.",
              "language": "javascript"
            },
            {
              "id": "example_js_coercion_1",
              "title": "Implicit and Explicit Type Coercion Examples",
              "code": "// Explicit Coercion\nconsole.log(String(123));        // \"123\"\nconsole.log(Number(\"456\"));      // 456\nconsole.log(Boolean(0));         // false\nconsole.log(Boolean(\"hello\"));   // true\nconsole.log(Boolean(null));      // false\nconsole.log(parseInt(\"10.5px\")); // 10\n\n// Implicit Coercion\nconsole.log(\"5\" + 1);         // \"51\" (number 1 coerced to string \"1\")\nconsole.log(\"5\" - 1);         // 4 (string \"5\" coerced to number 5)\nconsole.log(5 * \"2\");         // 10 (string \"2\" coerced to number 2)\nconsole.log(10 / \"2\");        // 5 (string \"2\" coerced to number 2)\nconsole.log(true + true);     // 2 (true coerced to 1)\nconsole.log(false - true);    // -1 (false coerced to 0, true to 1)\nconsole.log('10' == 10);      // true (string '10' coerced to number 10)\nconsole.log('10' === 10);     // false (no coercion, types are different)\nconsole.log(!\"hello\");       // false (\"hello\" coerced to true, then negated)\nconsole.log(!!\"world\");      // true (double negation to convert to boolean explicitly)\nconsole.log([] + {});        // \"[object Object]\" (empty array coerced to \"\", object to \"[object Object]\")\nconsole.log({} + []);        // 0 or \"[object Object]\" depending on context (complex, often seen as { } treated as a block, then + [] which is 0)\n                              // In browser console, {}+[] is 0, in Node.js, it's [object Object]\n                              // This is because { } at the start of a line can be parsed as a block scope, not an object literal.\n                              // When parsed as expression: ({} + []) is [object Object]\nconsole.log({}+[]+{}+[1]);   // This is a tricky one, will be detailed in a question.\n",
              "explanation": "This example demonstrates various scenarios of both explicit and implicit type coercion. Pay close attention to how JavaScript handles the `+` operator (which can be concatenation or addition) and how loose equality (`==`) differs from strict equality (`===`). The behavior of `{}+[]` is particularly nuanced due to parsing rules.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_js_prop_check_1",
            "question_js_prop_check_mcq_1",
            "question_js_prop_check_flashcard_1",
            "question_js_boxing_1",
            "question_js_boxing_mcq_1",
            "question_js_boxing_flashcard_1",
            "question_js_coercion_1",
            "question_js_coercion_open_1",
            "question_js_coercion_mcq_1",
            "question_js_coercion_flashcard_1",
            "question_js_coercion_complex_example"
          ],
          "relatedTasks": [
            "task_object_property_analyzer",
            "task_safe_type_converter",
            "task_predict_coercion_output"
          ],
          "tags": [
            "JavaScript",
            "Objects",
            "Properties",
            "Inheritance",
            "Boxing",
            "Unboxing",
            "Type Coercion",
            "Implicit Conversion",
            "Explicit Conversion",
            "`in` operator",
            "`hasOwnProperty`"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "prototypal_inheritance",
            "js_performance_optimization",
            "debugging_js"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_js_datatypes_1",
          "topic": "JavaScript Data Types and Reference Assignment",
          "level": "medium",
          "type": "open",
          "question": "What data types are there in JavaScript? What will be the result of executing the following code? Explain your reasoning.\n```javascript\nlet firstObj = { name: 'Hello' };\nlet secondObj = firstObj;\nfirstObj = { name: 'Bye' };\nconsole.log(secondObj.name);\n```",
          "answer": "JavaScript has primitive data types (String, Number, BigInt, Boolean, Undefined, Symbol, Null) and one complex type: Object (which includes arrays, functions, etc.).\n\nIn the provided code:\n1.  `let firstObj = { name: 'Hello' };` creates an object `{ name: 'Hello' }` in memory and `firstObj` points to its reference.\n2.  `let secondObj = firstObj;` assigns the *reference* that `firstObj` holds to `secondObj`. Now, both `firstObj` and `secondObj` point to the *same* object `{ name: 'Hello' }`.\n3.  `firstObj = { name: 'Bye' };` reassigns `firstObj` to point to a *new*, different object `{ name: 'Bye' }`.\n4.  `secondObj` *still points to the original object* `{ name: 'Hello' }` because its reference was not changed when `firstObj` was reassigned.\n\nTherefore, `console.log(secondObj.name)` will output `'Hello'`.",
          "options": [],
          "analysisPoints": [
            "Identification of all JavaScript data types.",
            "Understanding of primitive vs. object types.",
            "Correctly explaining value vs. reference assignment.",
            "Ability to trace object references through reassignment."
          ],
          "keyConcepts": [
            "JavaScript Data Types",
            "Primitive vs Object",
            "Pass by Reference",
            "Variable Reassignment"
          ],
          "evaluationCriteria": [
            "Accuracy of data type list.",
            "Clarity of explanation for reference assignment.",
            "Correct prediction of code output."
          ],
          "example": "```javascript\nlet firstObj = { name: 'Hello' };\nlet secondObj = firstObj;\nfirstObj = { name: 'Bye' };\nconsole.log(secondObj.name); // Outputs: Hello\n```",
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Data Types",
            "Reference",
            "Object",
            "Variable Scope"
          ],
          "prerequisites": [],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_datatypes_mcq_1",
          "topic": "JavaScript Data Types and Reference Assignment",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following JavaScript data types are considered primitive?",
          "answer": "String, Number, Boolean, Undefined, Symbol, BigInt, Null",
          "options": [
            "String, Number, Object, Boolean",
            "String, Number, Boolean, Array, Null",
            "String, Number, Boolean, Undefined, Symbol, BigInt, Null",
            "Object, Array, Function, String"
          ],
          "analysisPoints": [
            "Distinguish between primitive and complex data types.",
            "Recall all primitive data types."
          ],
          "keyConcepts": [
            "JavaScript Data Types",
            "Primitive Data Types",
            "Object Data Type"
          ],
          "evaluationCriteria": [
            "Accurate classification of data types."
          ],
          "example": "Primitive data types hold simple, immutable values directly. Objects hold more complex, mutable collections of data and are referenced.",
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Data Types",
            "Primitive"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_js_datatypes_open_1",
          "topic": "JavaScript Data Types and Mutability",
          "level": "medium",
          "type": "open",
          "question": "Explain the concept of mutability and immutability in JavaScript data types. Provide an example for both a mutable and an immutable operation.",
          "answer": "In JavaScript, **immutability** means that once a value is created, it cannot be changed. Primitive data types (String, Number, Boolean, Null, Undefined, Symbol, BigInt) are immutable. Operations on primitive values always return new values rather than modifying the original.\n\n**Mutability** means that a value can be changed after it's created. Objects (including arrays and functions) are mutable. When you modify an object, you are changing the underlying data structure in memory.\n\n**Example of Immutable Operation (String):**\n```javascript\nlet originalString = \"hello\";\nlet newString = originalString.toUpperCase(); // .toUpperCase() returns a NEW string\nconsole.log(originalString); // \"hello\" (original remains unchanged)\nconsole.log(newString);      // \"HELLO\"\n```\n\n**Example of Mutable Operation (Array/Object):**\n```javascript\nlet originalArray = [1, 2, 3];\noriginalArray.push(4); // .push() modifies the original array\nconsole.log(originalArray); // [1, 2, 3, 4] (original array is changed)\n\nlet originalObject = { a: 1 };\noriginalObject.b = 2; // Adding a new property modifies the original object\nconsole.log(originalObject); // { a: 1, b: 2 }\n```",
          "options": [],
          "analysisPoints": [
            "Clear definition of mutability and immutability.",
            "Correct identification of which data types are mutable/immutable.",
            "Relevant and accurate code examples for both concepts.",
            "Explanation of why the examples demonstrate mutability/immutability."
          ],
          "keyConcepts": [
            "Mutability",
            "Immutability",
            "Primitive Data Types",
            "Object Data Type",
            "Side Effects"
          ],
          "evaluationCriteria": [
            "Conceptual understanding and clarity.",
            "Correctness of examples.",
            "Ability to differentiate operations that modify vs. create new values."
          ],
          "example": "```javascript\n// Immutable example: String\nlet str1 = \"abc\";\nstr1.concat(\"def\"); // Returns new string, str1 is unchanged\nconsole.log(str1); // \"abc\"\n\n// Mutable example: Array\nlet arr1 = [1, 2];\narr1.push(3); // Modifies arr1 in place\nconsole.log(arr1); // [1, 2, 3]\n```",
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Mutability",
            "Immutability",
            "Data Types"
          ],
          "prerequisites": [
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_tdz_1",
          "topic": "Temporal Dead Zone",
          "level": "medium",
          "type": "open",
          "question": "What is the Temporal Dead Zone (TDZ) in JavaScript? Provide an example demonstrating the TDZ and explain why it occurs.",
          "answer": "The Temporal Dead Zone (TDZ) is a behavior in JavaScript for variables declared with `let` and `const`. It refers to the period from the start of the block (or scope) until the variable's declaration is processed and initialized. During this period, accessing the variable will result in a `ReferenceError`.\n\n**Example:**\n```javascript\nfunction exampleTDZ() {\n  // console.log(myLetVar); // ReferenceError: Cannot access 'myLetVar' before initialization\n  // This line is within the TDZ of myLetVar\n\n  let myLetVar = 10;\n  console.log(myLetVar); // Output: 10 (outside TDZ)\n\n  // console.log(myConstVar); // ReferenceError: Cannot access 'myConstVar' before initialization\n  // This line is within the TDZ of myConstVar\n\n  const myConstVar = 20;\n  console.log(myConstVar); // Output: 20 (outside TDZ)\n}\nexampleTDZ();\n\n// Compare with var (no TDZ effect, but hoisting to undefined)\nfunction exampleVarHoisting() {\n  console.log(myVar); // Output: undefined\n  var myVar = 30;\n  console.log(myVar); // Output: 30\n}\nexampleVarHoisting();\n```\n\n**Why it occurs:**\n`let` and `const` variables are hoisted to the top of their block scope, but unlike `var`, they are *not* initialized. Instead, they remain in an uninitialized state within the TDZ. This design choice was made to prevent common bugs associated with `var`'s hoisting behavior (where a variable might be accessed before it's assigned a meaningful value, leading to `undefined`). The TDZ enforces stricter variable access rules, making code more predictable and easier to debug by requiring declarations before use.",
          "options": [],
          "analysisPoints": [
            "Accurate definition of TDZ.",
            "Correctly identifies `let` and `const` as affected variables.",
            "Provides a clear and runnable example demonstrating a `ReferenceError` due to TDZ.",
            "Explains the underlying reason for TDZ (hoisting without initialization, prevention of `var` related bugs)."
          ],
          "keyConcepts": [
            "Temporal Dead Zone",
            "Hoisting",
            "let",
            "const",
            "ReferenceError",
            "Block Scope"
          ],
          "evaluationCriteria": [
            "Clarity and completeness of TDZ explanation.",
            "Correctness of example.",
            "Insight into the purpose and benefits of TDZ."
          ],
          "example": "```javascript\n// TDZ in action\nfunction testTDZ() {\n  // console.log(x); // ReferenceError\n  let x = 10;\n  console.log(x); // 10\n}\ntestTDZ();\n```",
          "tags": [
            "JavaScript",
            "Scope",
            "Temporal Dead Zone",
            "Hoisting",
            "ES6"
          ],
          "prerequisites": [],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_tdz_mcq_1",
          "topic": "Temporal Dead Zone",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following JavaScript code snippet:\n```javascript\nfunction checkTDZ() {\n  console.log(a);\n  let a = 5;\n}\ncheckTDZ();\n```\nWhat will be the output when `checkTDZ()` is called?",
          "answer": "A ReferenceError",
          "options": [
            "5",
            "undefined",
            "A ReferenceError",
            "A TypeError"
          ],
          "analysisPoints": [
            "Understanding of `let` variable hoisting.",
            "Knowledge of the Temporal Dead Zone concept.",
            "Ability to distinguish between `undefined` from `var` hoisting and `ReferenceError` from `let`/`const` TDZ."
          ],
          "keyConcepts": [
            "Temporal Dead Zone",
            "let",
            "ReferenceError",
            "Hoisting"
          ],
          "evaluationCriteria": [
            "Correct identification of the error type.",
            "Demonstrates understanding of TDZ vs. `var` hoisting."
          ],
          "example": "The variable `a` declared with `let` is in its Temporal Dead Zone from the beginning of the `checkTDZ` function's scope until its declaration `let a = 5;`. Any access to `a` before this declaration results in a `ReferenceError`, indicating that the variable cannot be accessed before initialization.",
          "tags": [
            "JavaScript",
            "Scope",
            "Temporal Dead Zone",
            "let"
          ],
          "prerequisites": [
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_tdz_flashcard_1",
          "topic": "Temporal Dead Zone",
          "level": "easy",
          "type": "flashcard",
          "question": "What kind of error occurs when accessing a `let` or `const` variable within its Temporal Dead Zone?",
          "answer": "`ReferenceError`",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Temporal Dead Zone",
            "let",
            "const",
            "ReferenceError"
          ],
          "evaluationCriteria": [],
          "example": "Trying to use a variable declared with `let` or `const` before its declaration in the code will trigger a `ReferenceError` because it's in the TDZ.",
          "tags": [
            "JavaScript",
            "TDZ",
            "Error Handling"
          ],
          "prerequisites": [
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_js_boxing_1",
          "topic": "Boxing/Unboxing in JavaScript",
          "level": "medium",
          "type": "open",
          "question": "How does boxing/unboxing work in JavaScript? Provide an example of boxing and explain why `new String('foo')` behaves differently from `'foo'`.",
          "answer": "Boxing is the process where JavaScript automatically wraps a primitive value (like a string, number, or boolean) into its corresponding object wrapper (`String`, `Number`, `Boolean`) when a property or method is accessed on it. This temporary object allows the primitive to behave like an object (e.g., calling `toUpperCase()` on a string). After the operation, the wrapper object is typically discarded. Unboxing is the reverse process, implicitly converting an object wrapper back to its primitive value, often done when the primitive value is needed (e.g., in arithmetic operations).\n\n**Example of Boxing:**\n```javascript\nconst strPrimitive = \"hello\";\nconsole.log(strPrimitive.toUpperCase()); // \"HELLO\"\n// Behind the scenes, JavaScript performs: new String(strPrimitive).toUpperCase();\n// The String object is then discarded.\n\nconst numPrimitive = 123;\nconsole.log(numPrimitive.toFixed(2)); // \"123.00\"\n// Behind the scenes: new Number(numPrimitive).toFixed(2);\n```\n\n**Difference between `'foo'` and `new String('foo')`:**\n*   `'foo'` is a **primitive string literal**. Its `typeof` is `'string'`. It's immutable and directly holds the string value.\n*   `new String('foo')` creates a **String object wrapper**. Its `typeof` is `'object'`. It's a mutable object that *contains* the primitive string `'foo'` as its internal value.\n\nThis difference leads to key behavioral discrepancies:\n*   **Type check**: `typeof 'foo'` is `'string'`, `typeof new String('foo')` is `'object'`.\n*   **Equality**: `'foo' === new String('foo')` is `false` because they are of different types (primitive vs. object). `'foo' == new String('foo')` is `true` because `==` performs type coercion, unboxing the `String` object to its primitive value before comparison.\n*   **Boolean context**: `if (new Boolean(false))` will evaluate to `true` because any object (even a wrapper around `false` or `0` or `''`) is considered truthy. `if (false)` evaluates to `false`.",
          "options": [],
          "analysisPoints": [
            "Clear definition of boxing and unboxing.",
            "Provides a concrete example of automatic boxing.",
            "Explains the `typeof` difference between primitives and wrapper objects.",
            "Discusses equality (`==` vs `===`) and truthiness for wrapper objects.",
            "Justifies why `new String()` etc. should be avoided."
          ],
          "keyConcepts": [
            "Boxing",
            "Unboxing",
            "Primitive Data Types",
            "Object Wrappers",
            "`typeof` operator",
            "Type Coercion",
            "Truthiness"
          ],
          "evaluationCriteria": [
            "Accuracy of definitions.",
            "Relevance and clarity of examples.",
            "Demonstrates understanding of common pitfalls with wrapper objects."
          ],
          "example": "```javascript\nconst s1 = \"hello\";\nconst s2 = new String(\"hello\");\n\nconsole.log(typeof s1); // \"string\"\nconsole.log(typeof s2); // \"object\"\n\nconsole.log(s1 === s2); // false\nconsole.log(s1 == s2);  // true\n```",
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Boxing",
            "Unboxing",
            "Type Coercion",
            "Primitives",
            "Objects"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion",
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_boxing_mcq_1",
          "topic": "Boxing in JavaScript",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following statements about JavaScript's boxing mechanism is TRUE?\n\n```javascript\nlet value = 'JavaScript';\nlet result = value.slice(0, 4);\n```",
          "answer": "The primitive string 'JavaScript' is temporarily wrapped in a `String` object to allow access to the `slice` method.",
          "options": [
            "The `slice` method can be called directly on primitive strings without any wrapping.",
            "The primitive string 'JavaScript' is permanently converted into a `String` object by calling `slice`.",
            "The primitive string 'JavaScript' is temporarily wrapped in a `String` object to allow access to the `slice` method.",
            "Calling `slice` on a primitive string will result in a `TypeError` because primitives do not have methods."
          ],
          "analysisPoints": [
            "Understanding of how primitive methods are accessed.",
            "Knowledge of the temporary nature of boxing.",
            "Distinguishing between primitive types and object wrappers."
          ],
          "keyConcepts": [
            "Boxing",
            "Primitive Data Types",
            "Object Wrappers",
            "String methods"
          ],
          "evaluationCriteria": [
            "Correct explanation of boxing.",
            "Avoiding misconceptions about permanent conversion or type errors."
          ],
          "example": "When a method like `slice()` is called on a primitive string, JavaScript internally performs an operation similar to `new String('JavaScript').slice(0, 4)`. This creates a temporary `String` object, calls the method, and then discards the object, leaving the original primitive string unchanged.",
          "tags": [
            "JavaScript",
            "Boxing",
            "Primitives",
            "Methods"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_boxing_flashcard_1",
          "topic": "Boxing",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the process called when JavaScript automatically converts a primitive value to its corresponding object wrapper to allow method access?",
          "answer": "Boxing",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Boxing",
            "Primitive Data Types",
            "Object Wrappers"
          ],
          "evaluationCriteria": [],
          "example": "When you call `\"hello\".toUpperCase()`, the string primitive is 'boxed' into a `String` object to allow the method call.",
          "tags": [
            "JavaScript",
            "Boxing",
            "Primitives"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_js_prop_check_1",
          "topic": "Property Checking: `in` vs `hasOwnProperty`",
          "level": "medium",
          "type": "open",
          "question": "What is the difference between the `in` operator and the `hasOwnProperty` method in JavaScript? Provide code examples to illustrate their distinct behaviors.",
          "answer": "The `in` operator and the `hasOwnProperty()` method are both used to check for the existence of a property on an object, but they differ in how they consider the object's prototype chain.\n\n*   **`in` operator**: This operator returns `true` if the specified property is found directly on the object *or* anywhere in its prototype chain (i.e., it's an own property or an inherited property).\n*   **`Object.prototype.hasOwnProperty()` method**: This method returns `true` only if the specified property is a direct, *own property* of the object itself, and not an inherited property from its prototype chain.\n\n**Code Examples:**\n```javascript\nconst myObject = { \n  a: 1,\n  myMethod: function() {}\n};\n\n// Add a property to the prototype chain of Object\nObject.prototype.inheritedProp = 100;\n\n// --- Checking 'a' (own property) ---\nconsole.log('a' in myObject);         // true (exists on object itself)\nconsole.log(myObject.hasOwnProperty('a')); // true (is an own property)\n\n// --- Checking 'myMethod' (own property) ---\nconsole.log('myMethod' in myObject);         // true\nconsole.log(myObject.hasOwnProperty('myMethod')); // true\n\n// --- Checking 'inheritedProp' (inherited property) ---\nconsole.log('inheritedProp' in myObject);    // true (exists in prototype chain)\nconsole.log(myObject.hasOwnProperty('inheritedProp')); // false (NOT an own property)\n\n// --- Checking 'toString' (inherited property from Object.prototype) ---\nconsole.log('toString' in myObject);         // true\nconsole.log(myObject.hasOwnProperty('toString')); // false\n\n// --- Edge case: property with value undefined (still an own property) ---\nconst obj2 = { b: undefined };\nconsole.log('b' in obj2);         // true\nconsole.log(obj2.hasOwnProperty('b')); // true\n\n// --- Using Object.create(null) for objects without prototype chain ---\nconst objWithoutProto = Object.create(null);\nobjWithoutProto.customProp = 'value';\nconsole.log('customProp' in objWithoutProto); // true\nconsole.log(objWithoutProto.hasOwnProperty('customProp')); // true\nconsole.log('toString' in objWithoutProto); // false (no prototype chain)\n```",
          "options": [],
          "analysisPoints": [
            "Clear definition of `in` operator's behavior.",
            "Clear definition of `hasOwnProperty` method's behavior.",
            "Examples that demonstrate both own and inherited properties.",
            "Explanation of the output for each example.",
            "Mention of `Object.create(null)` as an edge case."
          ],
          "keyConcepts": [
            "`in` operator",
            "`hasOwnProperty`",
            "Prototype Chain",
            "Inherited Properties",
            "Own Properties",
            "Object.prototype"
          ],
          "evaluationCriteria": [
            "Accuracy of conceptual differentiation.",
            "Correctness and clarity of code examples.",
            "Ability to explain the practical implications (e.g., for iteration)."
          ],
          "example": "```javascript\nconst car = { brand: 'Toyota' };\nconst toyotaPrius = Object.create(car);\ntoyotaPrius.model = 'Prius';\n\nconsole.log('model' in toyotaPrius);          // true\nconsole.log(toyotaPrius.hasOwnProperty('model')); // true\n\nconsole.log('brand' in toyotaPrius);          // true (inherited)\nconsole.log(toyotaPrius.hasOwnProperty('brand')); // false\n```",
          "tags": [
            "JavaScript",
            "Objects",
            "Properties",
            "Inheritance",
            "Prototype Chain"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_prop_check_mcq_1",
          "topic": "Property Checking: `in` vs `hasOwnProperty`",
          "level": "easy",
          "type": "mcq",
          "question": "Given the following JavaScript code:\n```javascript\nconst person = { name: 'Alice' };\nObject.prototype.age = 30;\n\nconsole.log('name' in person);\nconsole.log(person.hasOwnProperty('name'));\nconsole.log('age' in person);\nconsole.log(person.hasOwnProperty('age'));\n```\nWhat will be the output of these `console.log` statements, in order?",
          "answer": "true, true, true, false",
          "options": [
            "true, true, true, true",
            "true, false, true, false",
            "true, true, true, false",
            "false, true, false, true"
          ],
          "analysisPoints": [
            "Understanding of own vs. inherited properties.",
            "Correct application of `in` operator.",
            "Correct application of `hasOwnProperty` method."
          ],
          "keyConcepts": [
            "`in` operator",
            "`hasOwnProperty`",
            "Prototype Chain"
          ],
          "evaluationCriteria": [
            "Correct prediction of all outputs based on the rules."
          ],
          "example": "The 'name' property is directly on the `person` object, so both `in` and `hasOwnProperty` return `true`. The 'age' property is inherited from `Object.prototype`. The `in` operator finds it in the prototype chain and returns `true`, but `hasOwnProperty` only checks direct properties, so it returns `false`.",
          "tags": [
            "JavaScript",
            "Objects",
            "Properties",
            "Inheritance"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_prop_check_flashcard_1",
          "topic": "Property Checking",
          "level": "easy",
          "type": "flashcard",
          "question": "Which method should you use to check if an object has a property *directly* (not inherited from its prototype chain)?",
          "answer": "`Object.prototype.hasOwnProperty()`",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "`hasOwnProperty`",
            "Own Properties",
            "Prototype Chain"
          ],
          "evaluationCriteria": [],
          "example": "```javascript\nconst obj = { a: 1 };\nconsole.log(obj.hasOwnProperty('a')); // true\nconsole.log(obj.hasOwnProperty('toString')); // false\n```",
          "tags": [
            "JavaScript",
            "Objects",
            "Properties"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_js_coercion_1",
          "topic": "Type Coercion",
          "level": "medium",
          "type": "open",
          "question": "What is type coercion (conversion) in JavaScript? Differentiate between explicit and implicit type coercion, providing a code example for each.",
          "answer": "Type coercion, or type conversion, is the process of converting a value from one data type to another. JavaScript is a dynamically typed language, and it performs type coercion both automatically (implicitly) and when explicitly requested.\n\n**Explicit Type Coercion:**\nThis occurs when a developer intentionally converts a value from one type to another using specific functions, methods, or operators.\n\n*   **Example:**\n    ```javascript\n    // Convert to String\n    let num = 123;\n    let strNum = String(num); // or num.toString()\n    console.log(strNum, typeof strNum); // \"123\" \"string\"\n\n    // Convert to Number\n    let str = \"456\";\n    let numStr = Number(str); // or +str, or parseInt(str)\n    console.log(numStr, typeof numStr); // 456 \"number\"\n\n    // Convert to Boolean\n    let val = 0;\n    let boolVal = Boolean(val); // or !!val\n    console.log(boolVal, typeof boolVal); // false \"boolean\"\n    ```\n\n**Implicit Type Coercion:**\nThis happens automatically behind the scenes by the JavaScript engine when an operation involves values of different types. JavaScript attempts to make sense of the operation by converting one or both operands to a compatible type.\n\n*   **Example:**\n    ```javascript\n    // Numeric context (string to number)\n    console.log(\"10\" - 5);    // Output: 5 (string \"10\" implicitly converted to number 10)\n    console.log(\"5\" * \"2\");   // Output: 10 (both strings implicitly converted to numbers)\n\n    // String concatenation context (number to string)\n    console.log(\"Hello \" + 123); // Output: \"Hello 123\" (number 123 implicitly converted to string \"123\")\n\n    // Boolean context (various values to boolean)\n    if (\" \") { // Non-empty string is truthy\n      console.log(\"Space is truthy\"); // Output: \"Space is truthy\"\n    }\n    console.log(1 == '1');    // Output: true (string '1' implicitly converted to number 1)\n    ```",
          "options": [],
          "analysisPoints": [
            "Clear definition of type coercion.",
            "Accurate distinction between explicit and implicit coercion.",
            "Relevant code examples for both types of coercion.",
            "Explanation of how coercion happens in each example."
          ],
          "keyConcepts": [
            "Type Coercion",
            "Explicit Coercion",
            "Implicit Coercion",
            "Data Types",
            "Operators"
          ],
          "evaluationCriteria": [
            "Conceptual understanding.",
            "Correctness and variety of examples.",
            "Ability to explain the 'why' behind coercion behavior."
          ],
          "example": "```javascript\n// Explicit\nconst num = 10;\nconst strNum = String(num);\nconsole.log(strNum); // \"10\"\n\n// Implicit\nconst a = \"20\";\nconst b = 5;\nconsole.log(a / b); // 4 (a is implicitly converted to a number)\n```",
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Type Coercion",
            "Type Conversion",
            "Explicit",
            "Implicit"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_coercion_mcq_1",
          "topic": "Implicit Type Coercion",
          "level": "medium",
          "type": "mcq",
          "question": "What is the output of the following JavaScript code snippet?\n```javascript\nconsole.log(5 + '5' - 3);\n```",
          "answer": "52",
          "options": [
            "7",
            "NaN",
            "52",
            "Error"
          ],
          "analysisPoints": [
            "Understanding of operator precedence.",
            "Knowledge of how `+` operator behaves with mixed types (string concatenation vs. numeric addition).",
            "Knowledge of how `-` operator behaves with strings (always numeric subtraction after coercion)."
          ],
          "keyConcepts": [
            "Implicit Type Coercion",
            "Operator Precedence",
            "String Concatenation",
            "Numeric Operations"
          ],
          "evaluationCriteria": [
            "Correct prediction of chain of operations.",
            "Accurate application of coercion rules."
          ],
          "example": "The expression `5 + '5' - 3` is evaluated from left to right:\n1.  `5 + '5'`: The `+` operator, when one operand is a string, performs string concatenation. `5` is coerced to `'5'`, resulting in `'55'`.\n2.  `'55' - 3`: The `-` operator always attempts to perform numeric subtraction. `'55'` is coerced to the number `55`. `55 - 3` results in `52`.",
          "tags": [
            "JavaScript",
            "Type Coercion",
            "Operators",
            "Implicit"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_coercion_flashcard_1",
          "topic": "Type Coercion",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the result of `\"10\" - 5` in JavaScript?",
          "answer": "`5` (Number)",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Implicit Type Coercion",
            "Numeric Operators"
          ],
          "evaluationCriteria": [],
          "example": "The `-` operator forces its operands to be numbers. So, the string `\"10\"` is implicitly converted to the number `10`, and `10 - 5` equals `5`.",
          "tags": [
            "JavaScript",
            "Type Coercion",
            "Implicit"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_js_coercion_complex_example",
          "topic": "Advanced Type Coercion",
          "level": "hard",
          "type": "open",
          "question": "How does type conversion occur in the following JavaScript example? Explain the step-by-step evaluation of the expression and the final result:\n```javascript\nconsole.log({} + [] + {} + [1]);\n```",
          "answer": "This expression is tricky due to how JavaScript parses `{}`, especially at the beginning of a statement, and the behavior of the `+` operator. The outcome can also vary slightly between environments (e.g., Node.js vs. browser console).\n\nLet's analyze assuming it's part of an expression (e.g., inside `console.log()`):\n\n1.  **`{}`**: When `({})` is used as an expression, it is an empty object literal.\n2.  **`{}` + `[]`**: The `+` operator tries to convert both operands to primitive values first. The `valueOf()` method is called for objects. If that doesn't return a primitive, `toString()` is called.\n    *   `{}.toString()` returns `\"[object Object]\"`.\n    *   `[].toString()` returns `\"\"` (an empty string).\n    *   So, `\"[object Object]\" + \"\"` results in `\"[object Object]\"` (string concatenation).\n\n3.  **`\"[object Object]\" + {}`**: Again, string concatenation because the left operand is a string.\n    *   `{}.toString()` returns `\"[object Object]\"`.\n    *   So, `\"[object Object]\" + \"[object Object]\"` results in `\"[object Object][object Object]\"`.\n\n4.  **`\"[object Object][object Object]\" + [1]`**: String concatenation.\n    *   `[1].toString()` returns `\"1\"`.\n    *   So, `\"[object Object][object Object]\" + \"1\"` results in `\"[object Object][object Object]1\"`.\n\n**Final Result:** `\"[object Object][object Object]1\"`\n\n**Important Note on `{}` at the start of a statement:**\nIf `{}` appears at the very beginning of a statement (not inside parentheses or as part of an expression), it might be interpreted as an empty *block statement* rather than an empty object literal. In such a scenario:\n```javascript\n{} + []\n// This is parsed as: an empty block { } followed by a unary + on an empty array []\n// Unary + on [] results in Number([]) which is 0.\n// So, if parsed this way, the first part would be 0. (e.g., console.log({} + [])) might be 0 in some contexts)\n```\nHowever, within `console.log({} + [] + {} + [1]);`, the entire expression is parsed as a single unit, and `{} `is unambiguously treated as an object literal. The consistent result across environments for the full expression is `\"[object Object][object Object]1\"`.",
          "options": [],
          "analysisPoints": [
            "Detailed step-by-step breakdown of coercion.",
            "Understanding of how `+` operator behaves with mixed types.",
            "Knowledge of `toString()` and `valueOf()` methods for objects/arrays.",
            "Awareness of parsing nuances for `{}` (block vs. object literal).",
            "Correct final output."
          ],
          "keyConcepts": [
            "Type Coercion",
            "Implicit Coercion",
            "Object to Primitive Conversion",
            "`toString()`",
            "`valueOf()`",
            "Operator Precedence",
            "JavaScript Parsing"
          ],
          "evaluationCriteria": [
            "Thoroughness of explanation.",
            "Accuracy of each coercion step.",
            "Ability to explain environment-specific nuances (if any).",
            "Correct final result."
          ],
          "example": "```javascript\n// Step 1: {} + []\n// {}.toString() -> \"[object Object]\"\n// [].toString() -> \"\"\n// \"[object Object]\" + \"\" -> \"[object Object]\"\n\n// Step 2: \"[object Object]\" + {}\n// {}.toString() -> \"[object Object]\"\n// \"[object Object]\" + \"[object Object]\" -> \"[object Object][object Object]\"\n\n// Step 3: \"[object Object][object Object]\" + [1]\n// [1].toString() -> \"1\"\n// \"[object Object][object Object]\" + \"1\" -> \"[object Object][object Object]1\"\n\nconsole.log({} + [] + {} + [1]); // \"[object Object][object Object]1\"\n```",
          "tags": [
            "JavaScript",
            "Type Coercion",
            "Advanced",
            "Implicit",
            "Edge Cases"
          ],
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 9,
          "interviewFrequency": 5,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_reference_vs_value",
          "title": "Tracing Variable References and Values",
          "description": "\nImplement a function `analyzeVariables` that takes no arguments. Inside this function, declare variables of different JavaScript data types (primitive and object) and perform assignments that demonstrate both pass-by-value and pass-by-reference behaviors.\n\nYour task is to:\n1.  Declare a `number` primitive, assign it to a new variable, and then modify the original number.\n2.  Declare an `object` literal, assign it to a new variable, and then modify a property of the *original* object.\n3.  Declare another `object` literal, assign it to a new variable, and then *reassign* the *original* object variable to a completely new object.\n4.  After each step, log the values of all relevant variables to the console and provide comments explaining what is expected and why.\n\nThis task aims to solidify your understanding of how JavaScript handles primitive vs. object assignments.\n",
          "difficulty": "medium",
          "startingCode": "function analyzeVariables() {\n  // 1. Number primitive (pass-by-value)\n  let numA = 10;\n  let numB = numA;\n  console.log(`Initial: numA = ${numA}, numB = ${numB}`);\n  numA = 20;\n  console.log(`After numA = 20: numA = ${numA}, numB = ${numB}`); // What will numB be?\n\n  // 2. Object literal (pass-by-reference - modifying content)\n  let objX = { value: 100 };\n  let objY = objX;\n  console.log(`Initial: objX.value = ${objX.value}, objY.value = ${objY.value}`);\n  objX.value = 200;\n  console.log(`After objX.value = 200: objX.value = ${objX.value}, objY.value = ${objY.value}`); // What will objY.value be?\n\n  // 3. Object literal (pass-by-reference - reassigning reference)\n  let objP = { data: 'Alpha' };\n  let objQ = objP;\n  console.log(`Initial: objP.data = ${objP.data}, objQ.data = ${objQ.data}`);\n  objP = { data: 'Beta' }; // Reassign objP to a NEW object\n  console.log(`After objP = { data: 'Beta' }: objP.data = ${objP.data}, objQ.data = ${objQ.data}`); // What will objQ.data be?\n}\n\nanalyzeVariables();\n",
          "solutionCode": "function analyzeVariables() {\n  // 1. Number primitive (pass-by-value)\n  let numA = 10;\n  let numB = numA;\n  console.log(`Initial: numA = ${numA}, numB = ${numB}`);\n  numA = 20;\n  // Expected: numB will remain 10 because numA holds a copy of the value; changing numA doesn't affect numB.\n  console.log(`After numA = 20: numA = ${numA}, numB = ${numB}`); // Output: numA = 20, numB = 10\n\n  // 2. Object literal (pass-by-reference - modifying content)\n  let objX = { value: 100 };\n  let objY = objX;\n  console.log(`Initial: objX.value = ${objX.value}, objY.value = ${objY.value}`);\n  objX.value = 200;\n  // Expected: objY.value will also be 200 because objX and objY both point to the SAME object in memory.\n  console.log(`After objX.value = 200: objX.value = ${objX.value}, objY.value = ${objY.value}`); // Output: objX.value = 200, objY.value = 200\n\n  // 3. Object literal (pass-by-reference - reassigning reference)\n  let objP = { data: 'Alpha' };\n  let objQ = objP;\n  console.log(`Initial: objP.data = ${objP.data}, objQ.data = ${objQ.data}`);\n  objP = { data: 'Beta' }; // Reassign objP to a NEW object\n  // Expected: objQ.data will remain 'Alpha' because objP was reassigned to a new object, but objQ still points to the ORIGINAL object.\n  console.log(`After objP = { data: 'Beta' }: objP.data = ${objP.data}, objQ.data = ${objQ.data}`); // Output: objP.data = Beta, objQ.data = Alpha\n\n  // Additional check with an array\n  let arr1 = [1, 2];\n  let arr2 = arr1;\n  console.log(`Initial: arr1 = ${arr1}, arr2 = ${arr2}`);\n  arr1.push(3);\n  console.log(`After arr1.push(3): arr1 = ${arr1}, arr2 = ${arr2}`); // Expected: arr2 also has 3\n\n  arr1 = [4, 5]; // Reassign arr1 to a new array\n  console.log(`After arr1 = [4, 5]: arr1 = ${arr1}, arr2 = ${arr2}`); // Expected: arr2 remains [1,2,3]\n}\n\nanalyzeVariables();\n",
          "testCases": [
            "Verify `numB` remains `10` after `numA` reassignment.",
            "Verify `objY.value` changes to `200` after `objX.value` modification.",
            "Verify `objQ.data` remains `'Alpha'` after `objP` reassignment.",
            "Verify changes to array elements through one variable are reflected in another referencing the same array.",
            "Verify array reassignment to a new array behaves like object reassignment, not affecting other variables referencing the original array."
          ],
          "hints": [
            "Remember that primitive values are copied, while objects are referenced.",
            "Reassigning a variable holding an object reference makes that variable point to a *new* object, but doesn't change what other variables might be pointing to.",
            "Modifying a property of an object through one reference will be visible through all other references to that same object."
          ],
          "tags": [
            "JavaScript",
            "Fundamentals",
            "Data Types",
            "Reference vs Value",
            "Object",
            "Primitive"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "pass_by_value",
            "pass_by_reference",
            "mutability",
            "immutability"
          ]
        },
        {
          "id": "task_variable_scoping_challenge",
          "title": "Debug Temporal Dead Zone Errors",
          "description": "\nGiven a series of JavaScript code snippets, identify which lines will throw a `ReferenceError` due to the Temporal Dead Zone (TDZ). Your task is to:\n\n1.  For each `console.log` statement, determine if it will execute successfully or throw a `ReferenceError`.\n2.  If it throws an error, explain why it's in the TDZ.\n3.  If it executes, state its output.\n4.  Modify the code to fix any TDZ errors while preserving the intended variable usage (i.e., keep `let`/`const` where appropriate).\n\nThis task will test your understanding of `let`, `const`, `var`, and the Temporal Dead Zone.\n",
          "difficulty": "medium",
          "startingCode": "function analyzeTDZ() {\n  // Snippet 1\n  // console.log(a);\n  let a = 10;\n  console.log(a);\n\n  // Snippet 2\n  {\n    // console.log(b);\n    const b = 20;\n    console.log(b);\n  }\n\n  // Snippet 3\n  // console.log(c);\n  var c = 30;\n  console.log(c);\n\n  // Snippet 4: Function expression with TDZ\n  // sayHello();\n  const sayHello = () => {\n    console.log('Hello!');\n  };\n  sayHello();\n\n  // Snippet 5: Nested scope with TDZ\n  let outerVar = 'I am outer';\n  if (true) {\n    // console.log(outerVar); // Potential TDZ? No, it's declared above.\n    // console.log(innerVar); // Is this in TDZ?\n    let innerVar = 'I am inner';\n    console.log(innerVar);\n  }\n  // console.log(innerVar); // Is this accessible?\n}\n\nanalyzeTDZ();\n",
          "solutionCode": "function analyzeTDZ() {\n  // Snippet 1\n  // console.log(a); // Line 1: ReferenceError - 'a' is in TDZ. 'let a' has been hoisted but not initialized.\n  let a = 10;\n  console.log(a); // Output: 10 (outside TDZ)\n\n  // Snippet 2\n  {\n    // console.log(b); // Line 2: ReferenceError - 'b' is in block-scoped TDZ.\n    const b = 20;\n    console.log(b); // Output: 20 (outside TDZ)\n  }\n\n  // Snippet 3\n  console.log(c); // Output: undefined. 'var c' is hoisted and initialized to undefined. No TDZ.\n  var c = 30;\n  console.log(c); // Output: 30\n\n  // Snippet 4: Function expression with TDZ\n  // sayHello(); // Line 3: ReferenceError - 'sayHello' is in TDZ because it's a const-declared function expression.\n  const sayHello = () => {\n    console.log('Hello!');\n  };\n  sayHello(); // Output: 'Hello!' (outside TDZ)\n\n  // Snippet 5: Nested scope with TDZ\n  let outerVar = 'I am outer';\n  if (true) {\n    console.log(outerVar); // Output: 'I am outer'. outerVar is accessible from parent scope.\n    // console.log(innerVar); // Line 4: ReferenceError - 'innerVar' is in its block-scoped TDZ.\n    let innerVar = 'I am inner';\n    console.log(innerVar); // Output: 'I am inner'\n  }\n  // console.log(innerVar); // Line 5: ReferenceError - innerVar is block-scoped, not accessible outside its 'if' block.\n}\n\nanalyzeTDZ();\n",
          "testCases": [
            "Verify `let` variable access before declaration throws `ReferenceError`.",
            "Verify `const` variable access before declaration throws `ReferenceError`.",
            "Verify `var` variable access before declaration results in `undefined`.",
            "Verify function expressions declared with `const` are subject to TDZ.",
            "Verify variables are accessible from parent scope if not in TDZ.",
            "Verify block-scoped variables are not accessible outside their block."
          ],
          "hints": [
            "Focus on the declaration keyword (`var`, `let`, `const`) and the variable's position relative to its usage.",
            "Remember that `var` variables are initialized to `undefined` during hoisting, unlike `let` and `const`.",
            "Pay attention to block scopes (`{}`) for `let` and `const`."
          ],
          "tags": [
            "JavaScript",
            "Scope",
            "Temporal Dead Zone",
            "Hoisting",
            "let",
            "const",
            "var",
            "Debugging"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_js_fundamentals_datatypes_and_scope"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "hoisting",
            "block_scope",
            "function_scope"
          ]
        },
        {
          "id": "task_object_property_analyzer",
          "title": "Object Property Checker Utility",
          "description": "\nCreate a function `analyzeObjectProperties(obj, propertyName)` that determines the presence and origin of a property on a given object. The function should return an object with the following boolean properties:\n\n*   `existsInObject`: `true` if the property exists directly on `obj` or in its prototype chain (using the `in` operator).\n*   `isOwnProperty`: `true` if the property exists directly on `obj` (using `hasOwnProperty`).\n*   `isEnumerable`: `true` if the property is enumerable (using `propertyIsEnumerable`).\n*   `isInherited`: `true` if the property exists but is not an own property (i.e., it's from the prototype chain).\n\nHandle edge cases such as `null` or `undefined` for `obj` gracefully (return an object indicating no properties found, e.g., all `false`).\n\n",
          "difficulty": "medium",
          "startingCode": "function analyzeObjectProperties(obj, propertyName) {\n  if (obj === null || typeof obj !== 'object' && typeof obj !== 'function') {\n    // Handle non-object types or null/undefined obj gracefully\n    return {\n      existsInObject: false,\n      isOwnProperty: false,\n      isEnumerable: false,\n      isInherited: false\n    };\n  }\n\n  const exists = propertyName in obj;\n  const isOwn = obj.hasOwnProperty(propertyName);\n  const isEnum = obj.propertyIsEnumerable(propertyName);\n  \n  // Determine if inherited\n  const isInherited = exists && !isOwn;\n\n  return {\n    existsInObject: exists,\n    isOwnProperty: isOwn,\n    isEnumerable: isEnum,\n    isInherited: isInherited\n  };\n}\n\n// Test Cases:\n// console.log(analyzeObjectProperties({ a: 1, b: 2 }, 'a'));\n// console.log(analyzeObjectProperties({ c: 3 }, 'd'));\n// console.log(analyzeObjectProperties(Object.create({ p: 10 }), 'p'));\n// console.log(analyzeObjectProperties(Object.prototype, 'toString'));\n// console.log(analyzeObjectProperties(null, 'test'));\n",
          "solutionCode": "function analyzeObjectProperties(obj, propertyName) {\n  if (obj === null || (typeof obj !== 'object' && typeof obj !== 'function')) {\n    return {\n      existsInObject: false,\n      isOwnProperty: false,\n      isEnumerable: false,\n      isInherited: false\n    };\n  }\n\n  const existsInObject = propertyName in obj;\n  const isOwnProperty = Object.prototype.hasOwnProperty.call(obj, propertyName);\n  // Note: Using Object.prototype.hasOwnProperty.call for robustness against objects \n  // that might shadow hasOwnProperty (though rare).\n\n  let isEnumerable = false;\n  try {\n    isEnumerable = obj.propertyIsEnumerable(propertyName);\n  } catch (e) {\n    // Some objects (like primitives temporarily boxed) might not have this method directly\n    // Or it might throw if obj is a primitive that cannot be coerced to object context\n    // For this task, we assume obj is a valid object-like structure.\n  }\n  \n  const isInherited = existsInObject && !isOwnProperty;\n\n  return {\n    existsInObject,\n    isOwnProperty,\n    isEnumerable,\n    isInherited\n  };\n}\n\n// Test Cases:\nconst obj1 = { a: 1, b: 2 };\nconsole.log('--- Test Case 1: Own, enumerable property ---');\nconsole.log(analyzeObjectProperties(obj1, 'a')); \n// Expected: { existsInObject: true, isOwnProperty: true, isEnumerable: true, isInherited: false }\n\nconst obj2 = { c: 3 };\nconsole.log('\\n--- Test Case 2: Non-existent property ---');\nconsole.log(analyzeObjectProperties(obj2, 'd')); \n// Expected: { existsInObject: false, isOwnProperty: false, isEnumerable: false, isInherited: false }\n\nconst protoObj = { p: 10, q: 20 };\nconst obj3 = Object.create(protoObj);\nobj3.myProp = 'test';\nconsole.log('\\n--- Test Case 3: Inherited property ---');\nconsole.log(analyzeObjectProperties(obj3, 'p')); \n// Expected: { existsInObject: true, isOwnProperty: false, isEnumerable: true, isInherited: true }\n\nconsole.log('\\n--- Test Case 4: Property from Object.prototype ---');\nconsole.log(analyzeObjectProperties({}, 'toString')); \n// Expected: { existsInObject: true, isOwnProperty: false, isEnumerable: false, isInherited: true }\n\nconsole.log('\\n--- Test Case 5: Null object ---');\nconsole.log(analyzeObjectProperties(null, 'test'));\n// Expected: { existsInObject: false, isOwnProperty: false, isEnumerable: false, isInherited: false }\n\nconsole.log('\\n--- Test Case 6: Undefined property (own) ---');\nconst obj4 = { x: undefined };\nconsole.log(analyzeObjectProperties(obj4, 'x'));\n// Expected: { existsInObject: true, isOwnProperty: true, isEnumerable: true, isInherited: false }\n\nconsole.log('\\n--- Test Case 7: Non-enumerable own property ---');\nconst obj5 = {};\nObject.defineProperty(obj5, 'hidden', { value: 1, enumerable: false });\nconsole.log(analyzeObjectProperties(obj5, 'hidden'));\n// Expected: { existsInObject: true, isOwnProperty: true, isEnumerable: false, isInherited: false }\n",
          "testCases": [
            "Test with an object having an own, enumerable property.",
            "Test with an object and a non-existent property.",
            "Test with an object inheriting a property from its prototype.",
            "Test with a property from `Object.prototype` (e.g., `toString`).",
            "Test with `null` as the object argument.",
            "Test with `undefined` as the object argument.",
            "Test with a property that exists but its value is `undefined`.",
            "Test with a non-enumerable own property (e.g., defined with `Object.defineProperty`)."
          ],
          "hints": [
            "Remember that `hasOwnProperty` and `propertyIsEnumerable` are methods of `Object.prototype`. Consider using `call` for robustness.",
            "The `in` operator checks both own and inherited properties.",
            "`isInherited` can be derived from `existsInObject` and `isOwnProperty`."
          ],
          "tags": [
            "JavaScript",
            "Objects",
            "Properties",
            "Prototype Chain",
            "`hasOwnProperty`",
            "`in` operator",
            "Utility Function"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Object.defineProperty",
            "Object.create",
            "enumerable_properties"
          ]
        },
        {
          "id": "task_predict_coercion_output",
          "title": "Predict JavaScript Coercion Outputs",
          "description": "\nImplement a function `predictCoercionResults()` that demonstrates various scenarios of JavaScript's implicit type coercion. For each given expression, you need to:\n\n1.  Add a `console.log()` statement with the expression.\n2.  Add a comment next to each `console.log()` predicting its output.\n3.  For challenging cases, add a brief explanation of the coercion steps.\n\nYour task is to correctly predict the outputs of the following expressions and explain the logic:\n\n*   `'10' + 5`\n*   `'10' - 5`\n*   `true + false`\n*   `'hello' && 0`\n*   `!\"\"`\n*   `[] + {}`\n*   `{} + []` (Pay close attention to parsing context)\n*   `null == undefined`\n*   `null === undefined`\n*   `NaN == NaN`\n*   `5 / 'foo'`\n\nThis task aims to thoroughly test your understanding of implicit type coercion rules in JavaScript.\n",
          "difficulty": "hard",
          "startingCode": "function predictCoercionResults() {\n  console.log('10' + 5);      // Prediction: \n  console.log('10' - 5);      // Prediction: \n  console.log(true + false);  // Prediction: \n  console.log('hello' && 0);  // Prediction: \n  console.log(!\"\");           // Prediction: \n  console.log([] + {});       // Prediction: \n  console.log({} + []);       // Prediction: \n  console.log(null == undefined); // Prediction: \n  console.log(null === undefined); // Prediction: \n  console.log(NaN == NaN);    // Prediction: \n  console.log(5 / 'foo');     // Prediction: \n}\n\npredictCoercionResults();\n",
          "solutionCode": "function predictCoercionResults() {\n  // 1. String Concatenation\n  console.log('10' + 5);      // Prediction: \"105\" (5 is coerced to '5', then concatenation)\n\n  // 2. Numeric Subtraction\n  console.log('10' - 5);      // Prediction: 5 ('10' is coerced to 10, then subtraction)\n\n  // 3. Boolean to Number Coercion (true=1, false=0)\n  console.log(true + false);  // Prediction: 1 (true is 1, false is 0, 1 + 0 = 1)\n\n  // 4. Logical AND (evaluates to last truthy operand, or first falsy)\n  console.log('hello' && 0);  // Prediction: 0 ('hello' is truthy, so it proceeds to 0. 0 is falsy, so 0 is returned)\n\n  // 5. Logical NOT (negates boolean coercion)\n  console.log(!\"\");           // Prediction: true (empty string \"\" is falsy, !falsy is true)\n\n  // 6. Object to Primitive Coercion for '+' operator\n  console.log([] + {});       // Prediction: \"[object Object]\" ([] converts to \"\", {} converts to \"[object Object]\", then concatenation)\n\n  // 7. Context-dependent parsing for {} and '+'\n  // This is tricky: if {} is at the start of a line, it can be parsed as a block.\n  // If it's part of an expression (like in console.log()), it's an object literal.\n  // ({} + []) is parsed as an expression.\n  console.log({} + []);       // Prediction: \"[object Object]\" when parsed as expression. If parsed as statement, {}+[] -> 0. \n                                // In this specific console.log() context, it's typically \"[object Object]\" in modern JS engines/browsers, \n                                // but some environments (like browser console for just `{}+[]`) might show 0.\n                                // The correct explanation focuses on the expression parsing: {}.toString() -> \"[object Object]\", [].toString() -> \"\". \"[object Object]\" + \"\" = \"[object Object]\".\n\n  // 8. Loose Equality (null and undefined are loosely equal to each other only)\n  console.log(null == undefined); // Prediction: true\n\n  // 9. Strict Equality (checks type and value)\n  console.log(null === undefined); // Prediction: false\n\n  // 10. NaN behavior (NaN is never equal to itself)\n  console.log(NaN == NaN);    // Prediction: false\n\n  // 11. Division resulting in NaN (string cannot be coerced to a valid number for division)\n  console.log(5 / 'foo');     // Prediction: NaN ('foo' is coerced to NaN when attempting number conversion for division)\n}\n\npredictCoercionResults();\n",
          "testCases": [
            "Verify `String + Number` concatenation.",
            "Verify `String - Number` arithmetic.",
            "Verify `Boolean + Boolean` arithmetic.",
            "Verify logical operator short-circuiting and truthiness.",
            "Verify logical NOT behavior.",
            "Verify `Array + Object` coercion with `toString()`.",
            "Verify `Object + Array` coercion, explaining parsing nuances.",
            "Verify `null == undefined`.",
            "Verify `null === undefined`.",
            "Verify `NaN == NaN`.",
            "Verify division by non-numeric string results in `NaN`."
          ],
          "hints": [
            "The `+` operator is overloaded: it performs string concatenation if *either* operand is a string, otherwise it performs numeric addition.",
            "Other arithmetic operators (`-`, `*`, `/`, `%`) always attempt numeric conversion.",
            "For loose equality (`==`), recall the specific rules for `null`, `undefined`, `NaN`, and objects.",
            "Remember that `NaN` is unique and does not equal itself (`NaN === NaN` is `false`).",
            "Consider how `toString()` and `valueOf()` methods are used in object-to-primitive conversions."
          ],
          "tags": [
            "JavaScript",
            "Type Coercion",
            "Implicit Conversion",
            "Operators",
            "Edge Cases",
            "Debugging"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_js_object_properties_and_coercion"
          ],
          "complexity": 9,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "truthiness",
            "falsiness",
            "operator_precedence",
            "NaN",
            "Object.prototype.toString"
          ]
        }
      ]
    }
  },
  {
    "id": "06754615-bba5-4907-9d23-b466fdbe02bd",
    "startLine": 15100,
    "endLine": 15199,
    "processedDate": "2025-06-17T14:41:32.504Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_array_prototype_extension_flatten",
          "title": "Array Prototype Extension and Deep Flattening",
          "content": "## Extending Array Prototype\nJavaScript allows extending built-in object prototypes, such as `Array.prototype`. This enables adding new methods directly to array instances, making them available on all arrays. A common pattern is to check `if (!Array.prototype.methodName)` before defining a polyfill, ensuring that the method is only added if it doesn't already exist natively.\n\n## Array Flattening\nArray flattening is the process of converting a multi-dimensional array into a one-dimensional array. This can be shallow (only flattening one level deep) or deep (flattening all nested arrays recursively).\n\n### Recursive Flattening Implementation\nA common approach for deep flattening is recursion. The function iterates through the array; if an element is an array, it recursively calls itself on that element and concatenates the results. Otherwise, it adds the element directly to the result.\n\nNative JavaScript provides `Array.prototype.flat()` and `Array.prototype.flatMap()` for flattening arrays, which are more performant and robust than custom polyfills for production use. `flat()` takes an optional `depth` argument (defaulting to 1) to control how many levels to flatten. `Infinity` can be passed to flatten all levels.\n\n## Example Code (Polyfill for `flatten`)\n```javascript\n/**\n * Recursively flattens a nested array into a single-dimensional array.\n * @param {Array} array The array to flatten.\n * @returns {Array} The flattened array.\n */\nfunction flatten(array) {\n  let result = [];\n  for (let i = 0; i < array.length; i++) {\n    if (Array.isArray(array[i])) {\n      result = result.concat(flatten(array[i])); // Recursively flatten nested arrays\n    } else {\n      result.push(array[i]); // Add non-array elements directly\n    }\n  }\n  return result;\n}\n\n// Polyfill check to add `flatten` method to Array.prototype if it doesn't exist\nif (!Array.prototype.flatten) {\n  Array.prototype.flatten = function() {\n    // 'this' refers to the array instance on which 'flatten' is called\n    return flatten(this);\n  };\n}\n```\n\n",
          "examples": [
            {
              "id": "example_array_flatten_1",
              "title": "Using the Custom Flatten Polyfill",
              "code": "let arr = [1, 2, [3, 4, [5, 6, [7, [8, 9, 10]]]]];\nconsole.log(arr.flatten()); // Expected: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]",
              "explanation": "This example demonstrates how the `flatten` method, added to `Array.prototype`, can be called directly on an array instance to deeply flatten its contents, producing a single-dimensional array from a deeply nested structure.",
              "language": "javascript"
            },
            {
              "id": "example_array_flatten_2",
              "title": "Native `Array.prototype.flat()` vs. Custom",
              "code": "const nestedArray = [1, [2, 3], [4, [5]]];\n\n// Using custom flatten (if polyfill is present)\n// console.log(nestedArray.flatten()); // [1, 2, 3, 4, 5]\n\n// Using native flat() for shallow flatten\nconsole.log(nestedArray.flat()); // [1, 2, 3, 4, [5]]\n\n// Using native flat() for deep flatten\nconsole.log(nestedArray.flat(Infinity)); // [1, 2, 3, 4, 5]",
              "explanation": "This example contrasts the behavior of a custom deep flatten function with the native `Array.prototype.flat()` method. It shows that `flat()` by default performs a shallow flatten (depth 1), and requires `Infinity` to achieve full deep flattening, similar to the custom implementation.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_array_flatten_1",
            "question_array_flatten_2",
            "question_array_flatten_3",
            "question_array_flatten_4",
            "question_array_flatten_5"
          ],
          "relatedTasks": [
            "task_implement_deep_flatten"
          ],
          "tags": [
            "Array",
            "Prototype",
            "Polyfill",
            "Recursion",
            "Data Structures",
            "Functional Programming"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "functions",
            "array_methods"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "advanced_array_manipulation",
            "custom_utilities"
          ]
        },
        {
          "id": "theory_higher_order_functions_filtering",
          "title": "Higher-Order Functions and Array Filtering",
          "content": "## Higher-Order Functions (HOFs)\nHigher-Order Functions are functions that either take one or more functions as arguments or return a function as their result. They are a fundamental concept in functional programming and enable powerful abstractions and code reusability in JavaScript.\n\n### `Array.prototype.filter()`\n`Array.prototype.filter()` is a built-in array method that creates a new array with all elements that pass the test implemented by the provided callback function. The callback function is executed for each element in the array and should return a boolean value (true to keep the element, false to discard it).\n\n### Closures and HOFs for Filtering\nWhen a higher-order function returns another function, the returned function often forms a closure. A closure is the combination of a function and the lexical environment within which that function was declared. This environment consists of any local variables that were in-scope at the time the closure was created.\n\nIn the context of filtering, a HOF can take parameters (e.g., `start`, `end` for a range) and return a filter callback. This callback 'remembers' the `start` and `end` values from its lexical environment, allowing it to perform the specific filtering logic based on those parameters for each element in the array.\n\n## Example Code (between function)\n```javascript\n/**\n * Creates a filter callback function that checks if a value is within a specified range.\n * This is a higher-order function because it returns another function.\n * @param {number} start The lower bound of the range (exclusive).\n * @param {number} end The upper bound of the range (exclusive).\n * @returns {function(number, number): boolean} A callback function for Array.prototype.filter.\n */\nfunction between(start, end) {\n  // This inner function forms a closure over 'start' and 'end'\n  return function(value, index) {\n    return value > start && value < end;\n  };\n}\n```",
          "examples": [
            {
              "id": "example_hof_filter_1",
              "title": "Using `between` for Numeric Filtering",
              "code": "const list = [1, 2, 3, 4, 5, 6, 7, 8];\nconst filteredArray = list.filter(between(3, 6)); // [4, 5]\nconsole.log(filteredArray);",
              "explanation": "This example demonstrates how the `between` higher-order function is used with `Array.prototype.filter`. `between(3, 6)` returns a new function that acts as the predicate for `filter`. This predicate function checks if each number is greater than 3 and less than 6, effectively filtering out numbers outside this range.",
              "language": "javascript"
            },
            {
              "id": "example_hof_filter_2",
              "title": "Generic Higher-Order Filter",
              "code": "function createLengthFilter(minLength) {\n  return function(str) {\n    return str.length >= minLength;\n  };\n}\n\nconst words = ['apple', 'banana', 'cat', 'dog', 'elephant'];\nconst longWords = words.filter(createLengthFilter(5));\nconsole.log(longWords); // ['apple', 'banana', 'elephant']",
              "explanation": "This example illustrates a more generic higher-order function `createLengthFilter` that takes a `minLength` and returns a function to filter strings by their length. This highlights the reusability and abstraction power of HOFs.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_hof_filter_1",
            "question_hof_filter_2",
            "question_hof_filter_3",
            "question_hof_filter_4"
          ],
          "relatedTasks": [
            "task_implement_flexible_filter_hof"
          ],
          "tags": [
            "Higher-Order Functions",
            "Closures",
            "Array Methods",
            "Filter",
            "Functional Programming",
            "JavaScript"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_functions",
            "array_basics",
            "scope_and_closure"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "react_hooks",
            "state_management",
            "utility_libraries"
          ]
        },
        {
          "id": "theory_custom_promise_implementation",
          "title": "Asynchronous JavaScript and Custom Promise Implementation",
          "content": "## Asynchronous Operations in JavaScript\nJavaScript is single-threaded, meaning it executes one operation at a time. However, to handle long-running operations (like network requests, file I/O, timers) without blocking the main thread, it uses asynchronous mechanisms. Traditionally, this was managed with callbacks, which could lead to 'callback hell' (deeply nested, hard-to-read code).\n\n## Introduction to Promises\nPromises were introduced to provide a more manageable way to handle asynchronous operations. A `Promise` is an object representing the eventual completion (or failure) of an asynchronous operation and its resulting value. A Promise can be in one of three states:\n\n*   **Pending**: Initial state, neither fulfilled nor rejected.\n*   **Fulfilled (Resolved)**: Meaning that the operation completed successfully.\n*   **Rejected**: Meaning that the operation failed.\n\nOnce a promise is fulfilled or rejected, it is `settled` and its state cannot change. `then()` and `catch()` methods are used to attach handlers to a promise that will be called when the promise settles.\n\n### Core Mechanics of a Basic Custom Promise\nThe provided `CustomPromise` implementation demonstrates the fundamental concepts:\n\n1.  **Constructor**: Takes an `executor` function as an argument. The `executor` is immediately executed and receives `resolver` (for success) and `reject` (for failure) functions as arguments.\n2.  **State Management**: It maintains an internal `state` (PENDING, RESOLVED, REJECTED) and `value` (the result or error).\n3.  **Callback Queues**: `thenCallbacks` and `errorCallbacks` arrays store functions registered via `.then()` and `.catch()`.\n4.  **`resolver(value)`**: When called, it changes the promise's state to `RESOLVED`, sets its `value`, and iterates through `thenCallbacks` to execute them with the `value`.\n5.  **`reject(value)`**: When called, it changes the promise's state to `REJECTED`, sets its `value`, and iterates through `errorCallbacks` to execute them with the `value`.\n6.  **`then(callback)`**: Adds `callback` to `thenCallbacks`. Crucially, in a real Promise, `.then()` *always* returns a new Promise, allowing for chaining.\n7.  **`catch(callback)`**: A syntactic sugar for `then(null, callback)`, adding `callback` to `errorCallbacks`.\n\n**Limitations of this Basic Implementation**: This custom implementation is simplified. A full Promise implementation handles microtask queues, ensures `then` handlers are always called asynchronously even if the promise is already settled, allows `then` calls to be chained (where each `then` returns a *new* promise), propagates return values/errors in chains, and includes static methods like `Promise.resolve()`, `Promise.reject()`, `Promise.all()`, `Promise.race()`, etc.\n\n## Example Code (CustomPromise)\n```javascript\nclass CustomPromise {\n  constructor(action) {\n    this.state = \"PENDING\"; // Initial state\n    this.value = undefined; // Stores resolved value or rejected error\n    this.thenCallbacks = []; // Callbacks for successful resolution\n    this.errorCallbacks = []; // Callbacks for rejection\n    \n    // The executor function is called immediately\n    // Bind resolver and reject to 'this' to ensure correct context\n    try {\n      action(this.resolver.bind(this), this.reject.bind(this));\n    } catch (e) {\n      this.reject(e); // Catch synchronous errors in the executor\n    }\n  }\n\n  resolver(value) {\n    // Only transition if currently PENDING\n    if (this.state === \"PENDING\") {\n      this.state = \"RESOLVED\";\n      this.value = value;\n      // Asynchronously call callbacks (simulating microtask queue)\n      setTimeout(() => {\n        this.thenCallbacks.forEach((callback) => {\n          callback(this.value);\n        });\n      }, 0);\n    }\n  }\n\n  reject(value) {\n    // Only transition if currently PENDING\n    if (this.state === \"PENDING\") {\n      this.state = \"REJECTED\";\n      this.value = value;\n      // Asynchronously call callbacks\n      setTimeout(() => {\n        this.errorCallbacks.forEach((callback) => {\n          callback(this.value);\n        });\n      }, 0);\n    }\n  }\n\n  then(callback) {\n    // If already resolved, call callback asynchronously\n    if (this.state === \"RESOLVED\") {\n      setTimeout(() => callback(this.value), 0);\n    } else {\n      this.thenCallbacks.push(callback);\n    }\n    return this; // Basic chaining, though not returning a new promise like native\n  }\n\n  catch(callback) {\n    // If already rejected, call callback asynchronously\n    if (this.state === \"REJECTED\") {\n      setTimeout(() => callback(this.value), 0);\n    } else {\n      this.errorCallbacks.push(callback);\n    }\n    return this; // Basic chaining\n  }\n}\n```",
          "examples": [
            {
              "id": "example_custom_promise_1",
              "title": "Basic Usage of CustomPromise",
              "code": "let promise = new CustomPromise((resolver, reject) => {\n  setTimeout(() => {\n    const success = Math.random() > 0.5;\n    if (success) {\n      resolver(\"Operation successful!\");\n    } else {\n      reject(\"Operation failed!\");\n    }\n  }, 1000);\n});\n\npromise\n  .then(function(response) {\n    console.log(\"Success:\", response);\n  })\n  .catch(function(error) {\n    console.error(\"Error:\", error);\n  });\n\nconsole.log(\"Promise initiated, waiting...\");",
              "explanation": "This example demonstrates the basic asynchronous behavior of the `CustomPromise`. The executor function simulates an async operation (using `setTimeout`). Based on a random condition, it either calls `resolver` or `reject`. The `.then()` and `.catch()` handlers are registered to receive the outcome.",
              "language": "javascript"
            },
            {
              "id": "example_custom_promise_2",
              "title": "Synchronous Executor Error Handling (Improved CustomPromise)",
              "code": "let syncErrorPromise = new CustomPromise((resolve, reject) => {\n  throw new Error(\"Synchronous error in executor!\");\n});\n\nsyncErrorPromise.catch(error => {\n  console.error(\"Caught synchronous error:\", error.message);\n});\n\n// A promise that resolves immediately\nlet instantPromise = new CustomPromise((resolve) => {\n  resolve(\"Immediately resolved!\");\n});\n\ninstantPromise.then(response => {\n  console.log(\"Resolved immediately:\", response);\n});",
              "explanation": "This example shows two cases: first, how the `try-catch` block in the `CustomPromise` constructor handles synchronous errors thrown within the executor function, leading to an immediate rejection. Second, it shows how `then` is called asynchronously even if the promise is resolved immediately, mimicking native Promise behavior for consistent async execution.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_promise_1",
            "question_promise_2",
            "question_promise_3",
            "question_promise_4",
            "question_promise_5"
          ],
          "relatedTasks": [
            "task_extend_custom_promise_chaining"
          ],
          "tags": [
            "Promises",
            "Asynchronous JavaScript",
            "OOP",
            "Concurrency",
            "Event Loop",
            "JavaScript"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "callbacks",
            "event_loop_basics",
            "classes"
          ],
          "complexity": 8,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "requiredFor": [
            "api_integration",
            "react_hooks_async",
            "node_js_backend"
          ]
        },
        {
          "id": "theory_array_manipulation_filtering_sorting",
          "title": "Advanced Array Manipulation: Filtering, Sorting, and Mapping",
          "content": "## Core Array Transformation Methods\nModern JavaScript provides powerful array methods that facilitate functional programming paradigms for transforming and manipulating data collections.\n\n### `Array.prototype.filter()`\nAs discussed, `filter()` creates a new array containing only elements for which the provided callback function returns `true`. It's ideal for selecting a subset of data based on specific criteria.\n\n### `Array.prototype.map()`\n`map()` creates a new array by calling a provided callback function on every element in the calling array. It's used to transform each element of an array into a new value, resulting in an array of the same length but with potentially different elements.\n\n### `Array.prototype.sort()`\n`sort()` sorts the elements of an array *in place* and returns the reference to the same array, now sorted. By default, `sort()` converts elements to strings and compares them based on their UTF-16 code units, which often leads to incorrect results for numbers or complex objects. To sort numerically or by custom criteria, a `compareFunction` must be provided.\n\n**`compareFunction(a, b)` rules:**\n*   If `compareFunction(a, b)` returns `a value < 0`, `a` comes before `b`.\n*   If `compareFunction(a, b)` returns `a value > 0`, `b` comes before `a`.\n*   If `compareFunction(a, b)` returns `0`, `a` and `b` maintain their relative order (though some engines might reorder them).\n\n### Chaining Array Methods\nThese methods are often chained together to perform complex data transformations in a clean, readable, and declarative way. Since `filter()` and `map()` return new arrays (and `sort()` returns the modified original array, which can then be used in a chain), you can call these methods one after another.\n\n**Example Scenario: Filtering, Mapping, and Sorting a Movie List**\nConsider a list of movie objects, each with properties like `title`, `averageRating`, `genres`, etc. A common task might be to find movies with a certain rating, then sort them by title. This involves:\n1.  **Filtering**: Selecting movies that meet rating criteria.\n2.  **Sorting**: Ordering the filtered movies by title (alphabetically).\n\nOptionally, **Mapping**: You might also want to transform the filtered and sorted list into a simpler format (e.g., just an array of titles) using `map()`.\n\n## Example Code (Movie List Manipulation)\n```javascript\nconst movies = [\n  { id: 1, title: 'The Great Adventure', averageRating: 4.5, genre: 'Action' },\n  { id: 2, title: 'Epic Drama', averageRating: 3.8, genre: 'Drama' },\n  { id: 3, title: 'Comedy Night', averageRating: 4.1, genre: 'Comedy' },\n  { id: 4, title: 'Sci-Fi Odyssey', averageRating: 4.7, genre: 'Sci-Fi' },\n  { id: 5, title: 'Romantic Getaway', averageRating: 3.5, genre: 'Romance' },\n  { id: 6, title: 'Action Thriller', averageRating: 4.5, genre: 'Action' },\n];\n\n/**\n * Filters a movie list by minimum rating and sorts by title.\n * @param {Array<Object>} movieList The list of movie objects.\n * @param {number} minRating The minimum average rating.\n * @returns {Array<Object>} The filtered and sorted list of movies.\n */\nfunction filterAndSortMovies(movieList, minRating) {\n  return movieList\n    .filter(movie => movie.averageRating >= minRating) // Filter by rating\n    .sort((a, b) => a.title.localeCompare(b.title)); // Sort alphabetically by title\n}\n\nconst highRatedMovies = filterAndSortMovies(movies, 4.0);\nconsole.log(highRatedMovies);\n/*\nOutput:\n[\n  { id: 6, title: 'Action Thriller', averageRating: 4.5, genre: 'Action' },\n  { id: 3, title: 'Comedy Night', averageRating: 4.1, genre: 'Comedy' },\n  { id: 4, title: 'Sci-Fi Odyssey', averageRating: 4.7, genre: 'Sci-Fi' },\n  { id: 1, title: 'The Great Adventure', averageRating: 4.5, genre: 'Action' }\n]\n*/\n\n// Example with map as well\nconst highRatedMovieTitles = movies\n  .filter(movie => movie.averageRating >= 4.0)\n  .sort((a, b) => a.title.localeCompare(b.title))\n  .map(movie => movie.title);\n\nconsole.log(highRatedMovieTitles);\n// Output: ['Action Thriller', 'Comedy Night', 'Sci-Fi Odyssey', 'The Great Adventure']\n\n```",
          "examples": [
            {
              "id": "example_array_manipulation_1",
              "title": "Filtering and Sorting Numbers",
              "code": "const numbers = [20, 5, 15, 10, 25];\n\nconst filteredAndSorted = numbers\n  .filter(num => num > 10) // [20, 15, 25]\n  .sort((a, b) => a - b); // [15, 20, 25]\n\nconsole.log(filteredAndSorted);",
              "explanation": "This example shows a simple chain of `filter` and `sort` on an array of numbers. It first filters out numbers less than or equal to 10, then sorts the remaining numbers in ascending order using a numeric comparator.",
              "language": "javascript"
            },
            {
              "id": "example_array_manipulation_2",
              "title": "Sorting Objects by Multiple Criteria",
              "code": "const users = [\n  { name: 'Alice', age: 30 },\n  { name: 'Bob', age: 25 },\n  { name: 'Charlie', age: 30 }\n];\n\n// Sort primarily by age (ascending), secondarily by name (alphabetical)\nusers.sort((a, b) => {\n  if (a.age !== b.age) {\n    return a.age - b.age;\n  } else {\n    return a.name.localeCompare(b.name);\n  }\n});\n\nconsole.log(users);\n/*\nOutput:\n[\n  { name: 'Bob', age: 25 },\n  { name: 'Alice', age: 30 },\n  { name: 'Charlie', age: 30 }\n]\n*/",
              "explanation": "This example demonstrates how to sort an array of objects based on multiple criteria. It first compares `age` and if they are equal, it then uses `localeCompare` to sort by `name`, ensuring a consistent and expected order.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_array_manipulation_1",
            "question_array_manipulation_2",
            "question_array_manipulation_3",
            "question_array_manipulation_4"
          ],
          "relatedTasks": [
            "task_movie_list_management"
          ],
          "tags": [
            "Array Methods",
            "Filter",
            "Sort",
            "Map",
            "Data Transformation",
            "Functional Programming",
            "Chaining"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "array_methods",
            "object_manipulation"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "data_processing",
            "frontend_development",
            "component_data_handling"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_array_flatten_1",
          "topic": "Array Prototype and Flattening",
          "level": "medium",
          "type": "mcq",
          "question": "Given the following JavaScript code snippet, what will be the output of `console.log(arr.flatten())` if the `flatten` function is implemented recursively to handle arbitrary nesting?\n\n```javascript\nif (!Array.prototype.flatten) {\n  Array.prototype.flatten = function() {\n    // Assume a correct recursive flatten function is defined globally\n    // function flatten(arr) { ... implementation ... }\n    return flatten(this);\n  }\n}\n\nlet arr = [1, 2, [3, 4, [5, 6, [7, [8, 9, 10]]]]];\n```",
          "answer": "[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]",
          "options": [
            "[1, 2, [3, 4, [5, 6, [7, [8, 9, 10]]]]]",
            "[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]",
            "[1, 2, 3, 4, 5, 6, 7, [8, 9, 10]]",
            "Error: flatten is not defined"
          ],
          "analysisPoints": [
            "Tests understanding of deep array flattening.",
            "Checks knowledge of how `Array.prototype` methods are invoked (using `this`).",
            "Assumes the `flatten` helper function is correctly implemented and accessible."
          ],
          "keyConcepts": [
            "Array.prototype",
            "Deep Flattening",
            "Recursion",
            "Polyfill"
          ],
          "evaluationCriteria": [
            "Ability to trace recursive operations on nested data structures.",
            "Understanding of array methods and prototype extensions."
          ],
          "example": "The provided `flatten` polyfill for `Array.prototype` is designed to recursively process all nested arrays. When called on `arr`, it will traverse all levels, extracting individual numbers and combining them into a single-dimensional array, regardless of how deep the nesting goes. The `flatten` function (as described in the theory block) concatenates results of recursive calls, ensuring all elements are brought to the top level.",
          "tags": [
            "Array",
            "Recursion",
            "Prototype",
            "Polyfill",
            "Easy"
          ],
          "prerequisites": [
            "javascript_basics",
            "array_methods"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_array_flatten_2",
          "topic": "Array Flattening",
          "level": "medium",
          "type": "open",
          "question": "Describe the difference between shallow and deep array flattening. Provide a brief conceptual example for each.",
          "answer": "Shallow flattening only flattens the first level of nested arrays. If there are arrays nested within arrays that are themselves nested at the first level, those inner arrays will remain intact. For example, `[1, [2, 3], [4, [5]]]` shallow flattened would become `[1, 2, 3, 4, [5]]`.\n\nDeep flattening, on the other hand, recursively flattens all levels of nested arrays until there are no more arrays within arrays, resulting in a single-dimensional array containing only non-array elements. For example, `[1, [2, 3], [4, [5]]]` deep flattened would become `[1, 2, 3, 4, 5]`.",
          "analysisPoints": [
            "Defines shallow vs. deep flattening.",
            "Provides clear conceptual examples for each type.",
            "Demonstrates understanding of multi-dimensional array structures."
          ],
          "keyConcepts": [
            "Array Flattening",
            "Shallow Flatten",
            "Deep Flatten",
            "Recursion"
          ],
          "evaluationCriteria": [
            "Clarity and accuracy of definitions.",
            "Effectiveness of examples in illustrating concepts."
          ],
          "example": "N/A",
          "tags": [
            "Array",
            "Data Structures",
            "Conceptual",
            "Medium"
          ],
          "prerequisites": [
            "array_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_flatten_3",
          "topic": "Array.prototype.flat()",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the native JavaScript method for flattening arrays, and how do you use it for deep flattening?",
          "answer": "`Array.prototype.flat()` is the native method. To deep flatten, you pass `Infinity` as the depth argument: `arr.flat(Infinity)`.",
          "analysisPoints": [
            "Recalls the native method name.",
            "Remembers the correct argument for deep flattening."
          ],
          "keyConcepts": [
            "Array.prototype.flat",
            "Native Array Methods",
            "Deep Flattening"
          ],
          "evaluationCriteria": [
            "Quick recall of syntax and purpose."
          ],
          "example": "N/A",
          "tags": [
            "Array",
            "Native Methods",
            "Flashcard",
            "Easy"
          ],
          "prerequisites": [
            "array_methods"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_array_flatten_4",
          "topic": "Array Polyfilling",
          "level": "medium",
          "type": "mcq",
          "question": "Why is the `if (!Array.prototype.flatten)` check important when polyfilling `Array.prototype.flatten`?\n\n```javascript\nif (!Array.prototype.flatten) {\n  Array.prototype.flatten = function() { /* ... */ };\n}\n```",
          "answer": "To prevent overwriting the native `Array.prototype.flat()` method (or other existing `flatten` implementations) if it already exists in the environment.",
          "options": [
            "To make the `flatten` method available as a global function.",
            "To prevent infinite recursion when `flatten` is called.",
            "To improve performance by avoiding redundant function declarations.",
            "To prevent overwriting the native `Array.prototype.flat()` method (or other existing `flatten` implementations) if it already exists in the environment."
          ],
          "analysisPoints": [
            "Tests understanding of polyfilling best practices.",
            "Highlights the importance of defensive programming when extending built-in prototypes.",
            "Relates to browser compatibility and future-proofing."
          ],
          "keyConcepts": [
            "Polyfill",
            "Array.prototype",
            "Browser Compatibility",
            "Defensive Programming"
          ],
          "evaluationCriteria": [
            "Understanding of polyfill purpose.",
            "Knowledge of potential conflicts with native implementations."
          ],
          "example": "The `if (!Array.prototype.flatten)` check ensures that your custom `flatten` implementation is only added to the `Array.prototype` if a method with that name doesn't already exist. This is crucial because modern browsers have a native `Array.prototype.flat()` method. If you were to add your `flatten` method unconditionally, it would override the native `flat()` (if you named it `flat`) or your custom `flatten` might conflict with a future native `flatten` method or another library's polyfill. This check helps maintain compatibility and avoids unexpected behavior.",
          "tags": [
            "Array",
            "Polyfill",
            "Best Practices",
            "Compatibility",
            "Medium"
          ],
          "prerequisites": [
            "javascript_prototypes",
            "browser_environments"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_flatten_5",
          "topic": "Array Flattening Complexity",
          "level": "hard",
          "type": "code",
          "question": "Write an iterative (non-recursive) function to deeply flatten a nested array. The function should handle arrays of numbers and other arrays.\n\nExample:\n`flattenIterative([1, [2, [3, 4]], 5])` should return `[1, 2, 3, 4, 5]`.",
          "answer": "```javascript\nfunction flattenIterative(arr) {\n  const stack = [...arr]; // Use a stack, initialize with array elements\n  const result = [];\n\n  while (stack.length > 0) {\n    const element = stack.shift(); // Take elements from the front of the stack (mimicking queue for order)\n\n    if (Array.isArray(element)) {\n      // If it's an array, unshift its elements back to the stack (at the beginning to maintain order)\n      // Using unshift + reverse or push + reverse at the end for stack behavior\n      // For maintaining original order like recursion, we process from right to left if pushing to end\n      // Or process from left to right if pushing to beginning of stack (unshift)\n      // Let's use unshift to simulate recursive call order for depth-first traversal with a queue-like processing:\n      // stack = [..., element_n-1, element_n, ...] -> process element_n, if array, unshift its children in reverse\n      // to get correct order when shifted.\n      // A simpler approach for iterative flatten to maintain order is to use a while loop with splice/concat for results\n      // or use a stack with push/pop and reverse when pushing children.\n      \n      // Correct iterative flatten using a stack for DFS, maintaining order:\n      // stack operations: push/pop. Push children in reverse order to process them correctly.\n      const innerElements = element.reverse(); // Reverse so that when popped, they are in original order\n      for (let i = 0; i < innerElements.length; i++) {\n        stack.unshift(innerElements[i]); // Add to the beginning to process next\n      }\n    } else {\n      result.push(element);\n    }\n  }\n\n  return result;\n}\n\n// A more common and often simpler iterative flatten that maintains order:\nfunction flattenIterativeQueue(arr) {\n    const result = [];\n    const queue = [...arr]; // Initialize a queue with the array elements\n\n    while (queue.length > 0) {\n        const current = queue.shift(); // Get the first element\n\n        if (Array.isArray(current)) {\n            // If it's an array, add its elements to the end of the queue\n            // This correctly maintains order from left to right\n            queue.push(...current);\n        } else {\n            result.push(current);\n        }\n    }\n    return result;\n}\n\n// Test cases:\nconsole.log(flattenIterativeQueue([1, 2, [3, 4, [5, 6, [7, [8, 9, 10]]]]])); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nconsole.log(flattenIterativeQueue([1, [2, [3, 4]], 5])); // [1, 2, 3, 4, 5]\nconsole.log(flattenIterativeQueue([])); // []\nconsole.log(flattenIterativeQueue([1, [null, [undefined]], 3])); // [1, null, undefined, 3]\n```",
          "analysisPoints": [
            "Tests ability to convert recursive logic to iterative.",
            "Requires understanding of stack/queue data structures.",
            "Assesses ability to manage array elements and order during flattening.",
            "Highlights the use of `Array.isArray` for type checking."
          ],
          "keyConcepts": [
            "Iterative Algorithm",
            "Stack/Queue",
            "Array Flattening",
            "DFS/BFS (conceptual)"
          ],
          "evaluationCriteria": [
            "Correctness of the iterative implementation.",
            "Efficiency and handling of edge cases (empty array, non-number elements).",
            "Understanding of array manipulation methods like `push`, `shift`, `unshift`, `splice`, `concat`."
          ],
          "example": "The iterative approach for deep flattening typically uses a stack (or queue) to keep track of elements to process. When an array element is encountered, its contents are added to the stack/queue. Non-array elements are pushed to the result array. The `flattenIterativeQueue` implementation uses a queue-like approach (FIFO for processing elements, pushing new array elements to the end) which naturally preserves the order of elements from left to right.",
          "tags": [
            "Array",
            "Algorithm",
            "Iterative",
            "Data Structures",
            "Hard",
            "Coding Challenge"
          ],
          "prerequisites": [
            "recursion",
            "array_methods",
            "data_structures_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_hof_filter_1",
          "topic": "Higher-Order Functions and Closures",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `between` function provided:\n\n```javascript\nfunction between(start, end) {\n  return function(value, index) {\n    return value > start && value < end;\n  };\n}\n```\n\nWhat JavaScript concept allows the inner function to access `start` and `end` even after the `between` function has finished executing?",
          "answer": "Closure",
          "options": [
            "Scope Chaining",
            "Hoisting",
            "Closure",
            "This binding"
          ],
          "analysisPoints": [
            "Tests fundamental understanding of closures.",
            "Distinguishes closure from related scope concepts."
          ],
          "keyConcepts": [
            "Closure",
            "Lexical Environment",
            "Higher-Order Functions",
            "Scope"
          ],
          "evaluationCriteria": [
            "Correct identification of the concept.",
            "Understanding of how inner functions retain access to outer scope variables."
          ],
          "example": "A closure is formed when an inner function 'remembers' the environment (including local variables) in which it was created, even after the outer function has finished executing. In the `between` example, the anonymous inner function returned by `between` closes over the `start` and `end` parameters from its parent scope. This allows the filter callback to use these `start` and `end` values when it's later invoked by `Array.prototype.filter`.",
          "tags": [
            "Higher-Order Functions",
            "Closures",
            "Scope",
            "JavaScript",
            "Medium"
          ],
          "prerequisites": [
            "javascript_functions",
            "scope_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_hof_filter_2",
          "topic": "Array.prototype.filter()",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of `Array.prototype.filter()`?",
          "answer": "`Array.prototype.filter()` creates a new array containing only elements that pass a provided test function (i.e., for which the callback returns `true`).",
          "analysisPoints": [
            "Recalls the main function of `filter`.",
            "Highlights that it returns a new array."
          ],
          "keyConcepts": [
            "Array.prototype.filter",
            "Immutability",
            "Filtering"
          ],
          "evaluationCriteria": [
            "Quick recall of method purpose."
          ],
          "example": "N/A",
          "tags": [
            "Array Methods",
            "Filter",
            "Flashcard",
            "Easy"
          ],
          "prerequisites": [
            "array_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_hof_filter_3",
          "topic": "Higher-Order Functions",
          "level": "medium",
          "type": "open",
          "question": "Explain why using a higher-order function like `between` is more flexible and reusable than writing a direct filter callback for each range, e.g., `list.filter(value => value > 3 && value < 6)`.",
          "answer": "Using a higher-order function like `between` enhances flexibility and reusability because it allows you to dynamically create filter predicates with different parameters without rewriting the core filtering logic. Instead of hardcoding `start` and `end` values directly into the `filter` callback for each use case (`value => value > 3 && value < 6`), `between(start, end)` abstracts this logic. You can easily generate `between(1, 5)`, `between(10, 20)`, etc., making your code more modular, cleaner, and easier to maintain. It adheres to the DRY (Don't Repeat Yourself) principle.",
          "analysisPoints": [
            "Emphasizes reusability and flexibility.",
            "Contrasts HOF approach with direct callback.",
            "Connects to principles like DRY and modularity."
          ],
          "keyConcepts": [
            "Higher-Order Functions",
            "Reusability",
            "Flexibility",
            "DRY Principle",
            "Functional Programming"
          ],
          "evaluationCriteria": [
            "Articulates benefits of HOFs.",
            "Compares different coding styles effectively."
          ],
          "example": "N/A",
          "tags": [
            "Higher-Order Functions",
            "Functional Programming",
            "Best Practices",
            "Medium"
          ],
          "prerequisites": [
            "javascript_functions",
            "functional_programming_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_hof_filter_4",
          "topic": "Custom Filter Predicate",
          "level": "medium",
          "type": "code",
          "question": "Implement a higher-order function `getPropertyChecker(propertyName, expectedValue)` that returns a callback function. This callback should be suitable for `Array.prototype.filter()` and will return `true` if an object in the array has a property named `propertyName` with a value equal to `expectedValue`. Otherwise, it should return `false`.",
          "answer": "```javascript\nfunction getPropertyChecker(propertyName, expectedValue) {\n  return function(obj) {\n    // Ensure obj is an object and has the property before checking value\n    return typeof obj === 'object' && obj !== null && obj.hasOwnProperty(propertyName) && obj[propertyName] === expectedValue;\n  };\n}\n\n// Example usage:\nconst products = [\n  { name: 'Laptop', category: 'Electronics', price: 1200 },\n  { name: 'Desk Chair', category: 'Furniture', price: 300 },\n  { name: 'Smartphone', category: 'Electronics', price: 800 },\n  { name: 'Lamp', category: 'Furniture', price: 50 }\n];\n\nconst electronicProducts = products.filter(getPropertyChecker('category', 'Electronics'));\nconsole.log(electronicProducts); \n/*\n[\n  { name: 'Laptop', category: 'Electronics', price: 1200 },\n  { name: 'Smartphone', category: 'Electronics', price: 800 }\n]\n*/\n\nconst affordableChairs = products.filter(getPropertyChecker('price', 300));\nconsole.log(affordableChairs);\n/*\n[\n  { name: 'Desk Chair', category: 'Furniture', price: 300 }\n]\n*/\n\nconst nonExistentProducts = products.filter(getPropertyChecker('color', 'red'));\nconsole.log(nonExistentProducts); // []\n```",
          "analysisPoints": [
            "Tests ability to write a higher-order function.",
            "Checks understanding of filtering arrays of objects.",
            "Evaluates proper handling of object property access and existence (`hasOwnProperty`).",
            "Demonstrates practical application of HOFs for reusable filtering logic."
          ],
          "keyConcepts": [
            "Higher-Order Functions",
            "Array.prototype.filter",
            "Object Properties",
            "Closures",
            "Type Checking"
          ],
          "evaluationCriteria": [
            "Correct implementation of the HOF and its returned callback.",
            "Robustness in handling different object structures and property existence.",
            "Clarity and conciseness of code."
          ],
          "example": "The `getPropertyChecker` function creates a reusable filter predicate. When called with a `propertyName` and `expectedValue`, it returns a new function. This inner function then operates on each `obj` passed by `filter()`, checking if `obj` has the specified property and if its value matches the `expectedValue`. This pattern is very useful for creating dynamic filters.",
          "tags": [
            "Higher-Order Functions",
            "Array Methods",
            "Filtering",
            "Coding Challenge",
            "Medium"
          ],
          "prerequisites": [
            "javascript_objects",
            "array_methods",
            "closures"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_promise_1",
          "topic": "Promise Lifecycle",
          "level": "easy",
          "type": "flashcard",
          "question": "What are the three states of a JavaScript Promise, and which states are considered 'settled'?",
          "answer": "The three states are: `Pending`, `Fulfilled` (or `Resolved`), and `Rejected`. The `Fulfilled` and `Rejected` states are considered 'settled'.",
          "analysisPoints": [
            "Recalls the basic states of a Promise.",
            "Identifies which states are terminal."
          ],
          "keyConcepts": [
            "Promises",
            "Asynchronous JavaScript",
            "Promise States"
          ],
          "evaluationCriteria": [
            "Quick and accurate recall of Promise lifecycle."
          ],
          "example": "N/A",
          "tags": [
            "Promises",
            "Asynchronous",
            "Flashcard",
            "Easy"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_promise_2",
          "topic": "Custom Promise Executor",
          "level": "medium",
          "type": "mcq",
          "question": "In the `CustomPromise` implementation, what is the purpose of the `action` (executor) function passed to the constructor?\n\n```javascript\nclass CustomPromise {\n  constructor(action) {\n    // ...\n    action(this.resolver.bind(this), this.reject.bind(this));\n  }\n  // ...\n}\n```",
          "answer": "It contains the asynchronous operation logic and invokes `resolver` or `reject` to change the promise's state.",
          "options": [
            "It defines the initial state of the promise.",
            "It is a callback that runs when the promise is settled.",
            "It registers `then` and `catch` handlers for the promise.",
            "It contains the asynchronous operation logic and invokes `resolver` or `reject` to change the promise's state."
          ],
          "analysisPoints": [
            "Tests understanding of the Promise constructor's executor function.",
            "Clarifies the role of `resolver` and `reject` within the executor.",
            "Distinguishes executor from `then`/`catch` handlers."
          ],
          "keyConcepts": [
            "Promises",
            "Executor Function",
            "Asynchronous Operations",
            "Promise Lifecycle"
          ],
          "evaluationCriteria": [
            "Correctly identifies the executor's responsibility.",
            "Understands how it initiates the async process."
          ],
          "example": "The `action` (or `executor`) function is the core logic that defines what the promise actually *does* asynchronously. It's given two functions, `resolve` and `reject`, which it calls when the asynchronous work completes successfully or fails, respectively. This is where you would place your `setTimeout`, `fetch` call, or any other async operation.",
          "tags": [
            "Promises",
            "Asynchronous",
            "Constructor",
            "Medium"
          ],
          "prerequisites": [
            "callbacks",
            "javascript_classes"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_promise_3",
          "topic": "Promise Chaining",
          "level": "hard",
          "type": "open",
          "question": "The provided `CustomPromise` implementation's `then` method simply returns `this`. Explain why this behavior differs significantly from native JavaScript Promises regarding chaining, and what fundamental change is needed to support true chaining (i.e., `promise.then(...).then(...)` where each `.then()` operates on the result of the previous one).",
          "answer": "Native JavaScript Promises achieve true chaining because each call to `then()` (or `catch()`) *returns a new Promise*. This new Promise is then resolved or rejected based on the return value or thrown error of the handler function from the *previous* `then()` or `catch()`.\n\nThe provided `CustomPromise`'s `then` method, by simply returning `this`, allows for sequential registration of callbacks on the *same* promise instance. This means all `.then()` calls will receive the result of the *original* promise, and there's no mechanism to pass the transformed result from one handler to the next handler in a chain, nor to handle asynchronous operations *within* a `then` handler and wait for them.\n\nTo support true chaining, the `then` method would need to:\n1.  Create and return a *new* `CustomPromise` instance.\n2.  Inside this new promise's executor, call the original `then` callback (the one passed to `then`).\n3.  If the original callback returns a value, resolve the new promise with that value.\n4.  If the original callback returns *another promise*, wait for that promise to settle and then resolve/reject the new promise with its outcome (this is called 'promise resolution procedure').\n5.  If the original callback throws an error, reject the new promise with that error.",
          "analysisPoints": [
            "Identifies the key difference in `then` return behavior.",
            "Explains the impact on chaining functionality.",
            "Outlines the necessary steps to implement true promise chaining.",
            "Demonstrates deep understanding of Promise resolution procedure."
          ],
          "keyConcepts": [
            "Promise Chaining",
            "Promise Resolution Procedure",
            "Asynchronous Flow Control",
            "Return Values in Promises"
          ],
          "evaluationCriteria": [
            "Thorough explanation of `then` behavior differences.",
            "Accurate description of how chaining works natively.",
            "Clear articulation of the implementation requirements for chaining."
          ],
          "example": "N/A",
          "tags": [
            "Promises",
            "Asynchronous",
            "Chaining",
            "Architecture",
            "Hard"
          ],
          "prerequisites": [
            "custom_promise_implementation",
            "promise_lifecycle",
            "call_stack_event_loop"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_promise_4",
          "topic": "Promise Error Handling",
          "level": "medium",
          "type": "code",
          "question": "Modify the `CustomPromise`'s `constructor`, `resolver`, and `reject` methods to ensure that callbacks (both `thenCallbacks` and `errorCallbacks`) are always executed asynchronously, even if the promise is resolved or rejected synchronously inside the executor. Provide a brief explanation of why this is important for consistent behavior.",
          "answer": "```javascript\nclass CustomPromise {\n  constructor(action) {\n    this.state = \"PENDING\";\n    this.value = undefined;\n    this.thenCallbacks = [];\n    this.errorCallbacks = [];\n    \n    const resolve = (value) => {\n      // Ensure resolver is called asynchronously to match native promise behavior\n      setTimeout(() => this._resolve(value), 0);\n    };\n    const reject = (value) => {\n      // Ensure reject is called asynchronously\n      setTimeout(() => this._reject(value), 0);\n    };\n\n    try {\n      action(resolve, reject);\n    } catch (e) {\n      reject(e); // Catch sync errors in executor, and reject asynchronously\n    }\n  }\n\n  _resolve(value) { // Renamed to private to signify internal use\n    if (this.state === \"PENDING\") {\n      this.state = \"RESOLVED\";\n      this.value = value;\n      this.thenCallbacks.forEach((callback) => {\n        callback(this.value);\n      });\n      this.thenCallbacks = []; // Clear callbacks once executed\n      this.errorCallbacks = []; // No longer needed for resolved promise\n    }\n  }\n\n  _reject(value) { // Renamed to private\n    if (this.state === \"PENDING\") {\n      this.state = \"REJECTED\";\n      this.value = value;\n      this.errorCallbacks.forEach((callback) => {\n        callback(this.value);\n      });\n      this.thenCallbacks = []; // No longer needed for rejected promise\n      this.errorCallbacks = []; // Clear callbacks once executed\n    }\n  }\n\n  then(callback) {\n    if (this.state === \"RESOLVED\") {\n      setTimeout(() => callback(this.value), 0);\n    } else if (this.state === \"PENDING\") {\n      this.thenCallbacks.push(callback);\n    }\n    return this; \n  }\n\n  catch(callback) {\n    if (this.state === \"REJECTED\") {\n      setTimeout(() => callback(this.value), 0);\n    } else if (this.state === \"PENDING\") {\n      this.errorCallbacks.push(callback);\n    }\n    return this;\n  }\n}\n\n// Usage demonstration:\nconsole.log(\"Start\");\nlet syncPromise = new CustomPromise((resolve) => {\n  resolve(\"Sync resolved\");\n});\nsyncPromise.then(val => console.log(val));\nconsole.log(\"End\");\n// Expected Output: Start, End, Sync resolved (showing 'Sync resolved' is async)\n\nlet syncErrorPromise = new CustomPromise((_, reject) => {\n  reject(\"Sync rejected\");\n});\nsyncErrorPromise.catch(err => console.error(err));\n```\n\n**Explanation:**\nIt's crucial for `resolver` and `reject` (and the `then`/`catch` handlers themselves) to always execute asynchronously (e.g., by wrapping their calls in `setTimeout(..., 0)` or `queueMicrotask`) for consistency. If a promise resolves synchronously, and its `then` handlers also execute synchronously, it can lead to unexpected execution order (e.g., `console.log` statements after the promise creation might execute *after* the `then` handler, even if they logically appear to execute before). Native Promises always put their handlers into the microtask queue, ensuring they run after the current script execution stack has cleared, providing a predictable asynchronous execution model.",
          "analysisPoints": [
            "Tests understanding of synchronous vs. asynchronous execution in Promises.",
            "Highlights the role of `setTimeout(0)` (or microtasks) in Promise behavior.",
            "Assesses ability to modify existing code for specific asynchronous guarantees.",
            "Explains the importance of consistent async execution for predictability."
          ],
          "keyConcepts": [
            "Promises",
            "Asynchronous Execution",
            "Event Loop",
            "Microtask Queue",
            "setTimeout(0)"
          ],
          "evaluationCriteria": [
            "Correct implementation of asynchronous execution for handlers.",
            "Clear explanation of why this behavior is necessary.",
            "Understanding of the JavaScript event loop and task queues."
          ],
          "example": "This modification ensures that even if `resolve` or `reject` is called immediately within the executor, the corresponding `then` or `catch` callbacks are deferred to the next tick of the event loop. This guarantees that synchronous code following the promise creation always executes before any promise handlers, mimicking the behavior of native Promises and preventing race conditions or unpredictable side effects.",
          "tags": [
            "Promises",
            "Asynchronous",
            "Event Loop",
            "Coding Challenge",
            "Medium"
          ],
          "prerequisites": [
            "custom_promise_implementation",
            "event_loop_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_promise_5",
          "topic": "Async/Await vs. Promises",
          "level": "hard",
          "type": "open",
          "question": "How do `async/await` syntax sugar build on top of Promises, and what are their primary advantages for handling complex asynchronous flows compared to raw `.then()` chaining?",
          "answer": "`async/await` is syntactic sugar built on top of Promises, meaning that `async` functions always return a Promise, and `await` expressions are essentially a more readable way to wait for a Promise to settle. Behind the scenes, the JavaScript engine desugars `async/await` into Promise-based code with `.then()` and `.catch()` calls.\n\n**Primary advantages for handling complex asynchronous flows:**\n1.  **Readability and Simplicity**: `async/await` makes asynchronous code look and behave like synchronous code. This significantly improves readability, especially in complex sequences where multiple asynchronous operations depend on each other, reducing the 'pyramid of doom' or callback hell associated with deeply nested `.then()` calls.\n2.  **Error Handling**: Error handling becomes much simpler with `try...catch` blocks, similar to synchronous error handling. This is often more intuitive than chaining `.catch()` blocks, especially for multiple `await` calls within a single `async` function.\n3.  **Debugging**: Stepping through `async/await` code in a debugger is typically easier, as the execution flow appears more linear compared to jumping between different `.then()` callbacks.\n4.  **Conditional Logic and Loops**: Writing conditional asynchronous logic or loops (`if/else`, `for`, `while`) that involve waiting for promises is much more straightforward and natural with `await`, as you can use standard synchronous control flow constructs.\n5.  **Less Indentation**: It avoids the increasing indentation levels that can occur with `.then()` chains, leading to flatter and more maintainable code.\n\nWhile `async/await` offers these significant benefits, it's important to remember that it doesn't replace the underlying Promise API. For concurrent operations (like `Promise.all` or `Promise.race`), or when you need to attach multiple callbacks to a single promise, raw Promise methods are still directly relevant.",
          "analysisPoints": [
            "Defines `async/await` as syntactic sugar over Promises.",
            "Lists and explains multiple advantages of `async/await`.",
            "Compares `async/await` with traditional `.then()` chaining.",
            "Acknowledges scenarios where raw Promise methods are still useful."
          ],
          "keyConcepts": [
            "Async/Await",
            "Promises",
            "Asynchronous Programming",
            "Error Handling",
            "Code Readability",
            "Syntactic Sugar"
          ],
          "evaluationCriteria": [
            "Comprehensive explanation of the relationship between `async/await` and Promises.",
            "Clear articulation of the benefits with supporting reasons.",
            "Demonstrates advanced understanding of asynchronous patterns."
          ],
          "example": "N/A",
          "tags": [
            "Promises",
            "Async/Await",
            "Asynchronous",
            "Best Practices",
            "Hard"
          ],
          "prerequisites": [
            "promises_introduction",
            "event_loop_advanced"
          ],
          "complexity": 9,
          "interviewFrequency": 10,
          "learningPath": "advanced"
        },
        {
          "id": "question_array_manipulation_1",
          "topic": "Array.prototype.sort()",
          "level": "medium",
          "type": "mcq",
          "question": "Given the following array:\n\n```javascript\nconst items = [ { name: 'Banana', price: 1.5 }, { name: 'Apple', price: 1.0 }, { name: 'Cherry', price: 2.0 } ];\n```\n\nWhich `sort` comparator function would correctly sort the `items` array by `price` in **descending** order?",
          "answer": "`items.sort((a, b) => b.price - a.price);`",
          "options": [
            "`items.sort((a, b) => a.price - b.price);`",
            "`items.sort((a, b) => a.name.localeCompare(b.name));`",
            "`items.sort((a, b) => b.price - a.price);`",
            "`items.sort((a, b) => a.price > b.price);`"
          ],
          "analysisPoints": [
            "Tests knowledge of `Array.prototype.sort()` with objects.",
            "Verifies understanding of numeric comparison logic (`a - b` vs `b - a`) for ascending/descending order.",
            "Distinguishes numeric sorting from string sorting (`localeCompare`)."
          ],
          "keyConcepts": [
            "Array.prototype.sort",
            "Comparator Function",
            "Descending Order",
            "Object Sorting"
          ],
          "evaluationCriteria": [
            "Correct application of sort comparator logic.",
            "Understanding of numeric comparison for sorting."
          ],
          "example": "The `sort` method's `compareFunction(a, b)` expects a negative number if `a` should come before `b`, a positive number if `b` should come before `a`, and zero if their order doesn't matter. For descending order of `price`, if `b.price` is greater than `a.price`, `b` should come before `a`, so `b.price - a.price` would be positive, correctly placing `b` before `a`.",
          "tags": [
            "Array Methods",
            "Sort",
            "Objects",
            "Medium"
          ],
          "prerequisites": [
            "array_basics",
            "object_properties"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_manipulation_2",
          "topic": "Array Method Chaining",
          "level": "medium",
          "type": "open",
          "question": "When chaining `filter()`, `map()`, and `sort()` on a large array of objects, what are the potential performance considerations and in what order should these methods generally be chained to optimize performance, and why?",
          "answer": "When chaining `filter()`, `map()`, and `sort()` on a large array:\n\n**Potential Performance Considerations:**\n*   **Intermediate Arrays**: Both `filter()` and `map()` create new arrays. If operations are not ordered optimally, this can lead to creating large intermediate arrays that consume more memory and CPU cycles for garbage collection.\n*   **Number of Iterations**: Each chained method iterates over its input array. The size of these intermediate arrays directly impacts the total number of operations performed.\n*   **Sorting Cost**: `sort()` generally has a time complexity of O(N log N) (or worse, O(N^2) for some implementations/cases), making it the most expensive operation among the three, especially for large N.\n\n**Optimal Chaining Order:**\nGenerally, the optimal order is:\n1.  **`filter()`**: Apply `filter()` first. This is crucial because it immediately reduces the number of elements in the array that subsequent operations (`map`, `sort`) need to process. By reducing the size of the array as early as possible, you minimize the work (and memory footprint) for later, more expensive operations.\n2.  **`sort()`**: Apply `sort()` next. While `sort()` is expensive, it operates on a (now potentially smaller) filtered array. If you map before sorting, and the mapping changes the sort key, you might be sorting unnecessary data or using values that are no longer relevant for the sort.\n3.  **`map()`**: Apply `map()` last. `map()` transforms each element. By performing it last, you ensure that you are only transforming the data that is actually needed (i.e., the filtered and sorted elements), avoiding unnecessary transformations on elements that would have been filtered out anyway.\n\n**Why this order?**\nThis order (`filter` -> `sort` -> `map`) prioritizes reducing the data set size as early as possible (`filter`), then performing the most computationally expensive operation (`sort`) on the minimized set, and finally transforming only the necessary data (`map`). This minimizes memory overhead and the total number of operations, leading to better performance, especially with large datasets.",
          "analysisPoints": [
            "Identifies resource consumption (memory, CPU) as key performance factors.",
            "Correctly identifies the optimal chaining order.",
            "Provides clear reasoning for the chosen order based on method behavior and complexity.",
            "Demonstrates an understanding of practical optimization for data processing."
          ],
          "keyConcepts": [
            "Array Method Chaining",
            "Performance Optimization",
            "Filter",
            "Sort",
            "Map",
            "Intermediate Arrays",
            "Time Complexity"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of performance implications.",
            "Logical and accurate explanation of optimal chaining order.",
            "Ability to apply theoretical knowledge to practical scenarios."
          ],
          "example": "N/A",
          "tags": [
            "Array Methods",
            "Performance",
            "Optimization",
            "Functional Programming",
            "Hard"
          ],
          "prerequisites": [
            "array_methods",
            "algorithm_complexity_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_array_manipulation_3",
          "topic": "Array.prototype.map()",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary difference between `Array.prototype.forEach()` and `Array.prototype.map()`?",
          "answer": "`forEach()` iterates over array elements and executes a callback for each, but it does not return a new array. `map()` also iterates, but it *returns a new array* containing the results of calling a provided callback function on every element.",
          "analysisPoints": [
            "Highlights the key difference: `map` returns a new array, `forEach` does not.",
            "Clarifies their respective purposes."
          ],
          "keyConcepts": [
            "Array.prototype.map",
            "Array.prototype.forEach",
            "Immutability",
            "Transformation"
          ],
          "evaluationCriteria": [
            "Quick recall of method differences."
          ],
          "example": "N/A",
          "tags": [
            "Array Methods",
            "Map",
            "ForEach",
            "Flashcard",
            "Easy"
          ],
          "prerequisites": [
            "array_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_array_manipulation_4",
          "topic": "Data Filtering and Mapping",
          "level": "medium",
          "type": "code",
          "question": "You are given an array of user objects. Each user has `id`, `name`, and `isActive` properties. Write a JavaScript function `getActiveUserNames(users)` that takes this array, filters for users where `isActive` is `true`, and then maps them to an array containing only their `name` property. The function should return this new array of active user names.",
          "answer": "```javascript\nconst users = [\n  { id: 1, name: 'Alice', isActive: true },\n  { id: 2, name: 'Bob', isActive: false },\n  { id: 3, name: 'Charlie', isActive: true },\n  { id: 4, name: 'David', isActive: false }\n];\n\n/**\n * Filters active users and returns an array of their names.\n * @param {Array<Object>} users The array of user objects.\n * @returns {Array<string>} An array of active user names.\n */\nfunction getActiveUserNames(users) {\n  if (!Array.isArray(users)) {\n    return []; // Handle non-array input gracefully\n  }\n  return users\n    .filter(user => user.isActive === true) // Filter for active users\n    .map(user => user.name); // Map to an array of names\n}\n\n// Test cases\nconsole.log(getActiveUserNames(users)); // Expected: ['Alice', 'Charlie']\n\nconst emptyUsers = [];\nconsole.log(getActiveUserNames(emptyUsers)); // Expected: []\n\nconst mixedUsers = [\n  { id: 5, name: 'Eve', isActive: true },\n  { id: 6, name: 'Frank', isActive: false },\n  null, // Test with null/undefined elements\n  { id: 7, name: 'Grace', isActive: true },\n  undefined\n];\nconsole.log(getActiveUserNames(mixedUsers)); // Expected: ['Eve', 'Grace'] (handles null/undefined gracefully due to property access failing or returning falsy, which is okay for this filter)\n\nconsole.log(getActiveUserNames(null)); // Expected: []\nconsole.log(getActiveUserNames(\"not an array\")); // Expected: []\n```",
          "analysisPoints": [
            "Tests chaining of `filter` and `map` methods.",
            "Requires correct use of arrow functions for succinct callbacks.",
            "Assesses ability to extract specific properties from objects.",
            "Checks for basic input validation (optional but good practice)."
          ],
          "keyConcepts": [
            "Array.prototype.filter",
            "Array.prototype.map",
            "Method Chaining",
            "Object Properties",
            "Data Transformation"
          ],
          "evaluationCriteria": [
            "Correct implementation of filtering and mapping logic.",
            "Efficiency and conciseness of the solution.",
            "Handling of edge cases like empty arrays or invalid input."
          ],
          "example": "This function first uses `filter` to create a new array containing only the user objects where `isActive` is true. Then, it chains `map` to this filtered array, transforming each user object into just its `name` string. The result is a clean array of strings representing the names of active users.",
          "tags": [
            "Array Methods",
            "Filter",
            "Map",
            "Chaining",
            "Coding Challenge",
            "Medium"
          ],
          "prerequisites": [
            "array_methods",
            "javascript_objects"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_implement_deep_flatten",
          "title": "Implement a Generic Deep Flatten Function",
          "description": "\nImplement a JavaScript function named `deepFlatten(arr)` that takes an array, potentially containing nested arrays of any depth, and returns a new one-dimensional array with all elements flattened. You should not use the native `Array.prototype.flat()` method.\n\n**Requirements:**\n1.  The function should be named `deepFlatten`.\n2.  It must take a single argument, `arr`, which is an array.\n3.  It should handle arbitrarily deep nesting of arrays.\n4.  The function should return a *new* array, not modify the original.\n5.  Consider edge cases like empty arrays, arrays with `null` or `undefined` elements, and arrays with non-array, non-primitive elements (e.g., objects).\n\nYour solution can be recursive or iterative, but aim for clarity and correctness.\n",
          "difficulty": "medium",
          "startingCode": "/**\n * Recursively flattens a nested array into a single-dimensional array.\n * @param {Array} arr The array to flatten.\n * @returns {Array} The flattened array.\n */\nfunction deepFlatten(arr) {\n  // TODO: Implement the deep flattening logic here\n  // Hint: You'll need to check if an element is an array.\n  // Consider using Array.isArray() or instanceof Array.\n  // Use Array.prototype.concat() or spread operator (...) for combining arrays.\n  \n  return []; // Replace with your implementation\n}\n",
          "solutionCode": "/**\n * Recursively flattens a nested array into a single-dimensional array.\n * @param {Array} arr The array to flatten.\n * @returns {Array} The flattened array.\n */\nfunction deepFlatten(arr) {\n  let result = [];\n  for (let i = 0; i < arr.length; i++) {\n    if (Array.isArray(arr[i])) {\n      // If the current element is an array, recursively flatten it\n      // and concatenate the results.\n      result = result.concat(deepFlatten(arr[i]));\n    } else {\n      // If it's not an array, add it directly to the result.\n      result.push(arr[i]);\n    }\n  }\n  return result;\n}\n\n// Iterative solution using a stack (alternative)\n/*\nfunction deepFlattenIterative(arr) {\n  const result = [];\n  const stack = [...arr]; // Initialize stack with elements from the input array\n\n  while (stack.length > 0) {\n    const element = stack.shift(); // Get the first element (BFS-like processing order)\n\n    if (Array.isArray(element)) {\n      // If it's an array, add its elements to the end of the stack\n      // This ensures elements are processed in their original order.\n      stack.push(...element);\n    } else {\n      result.push(element);\n    }\n  }\n  return result;\n}\n*/\n",
          "testCases": [
            "deepFlatten([1, 2, [3, 4]]) should return [1, 2, 3, 4]",
            "deepFlatten([1, [2, [3, 4, [5]]], 6]) should return [1, 2, 3, 4, 5, 6]",
            "deepFlatten([]) should return []",
            "deepFlatten([1, [null, undefined], [{}, [true]]]) should return [1, null, undefined, {}, true]",
            "deepFlatten([1, 2, 3]) should return [1, 2, 3]"
          ],
          "hints": [
            "The base case for recursion is when an element is not an array.",
            "Remember that `Array.isArray()` is the most reliable way to check if something is an array.",
            "Consider using a `for...of` loop or `forEach` for iterating, or a traditional `for` loop.",
            "For an iterative approach, think about using a stack or a queue to manage nested arrays."
          ],
          "tags": [
            "Array",
            "Recursion",
            "Algorithm",
            "Data Structures",
            "Flatten"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "javascript_functions",
            "array_methods",
            "recursion"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "theory_array_prototype_extension_flatten",
            "question_array_flatten_2",
            "question_array_flatten_5"
          ]
        },
        {
          "id": "task_implement_flexible_filter_hof",
          "title": "Create a Flexible Object Filter Higher-Order Function",
          "description": "\nDesign and implement a higher-order function `createFilter(criteria)` that takes an object `criteria` as an argument. The `criteria` object will have key-value pairs (e.g., `{ category: 'Electronics', inStock: true }`).\n\nThe `createFilter` function should return a new function (a predicate) suitable for `Array.prototype.filter()`. This returned predicate function should take an object `item` and return `true` if `item` matches *all* the key-value pairs specified in `criteria`, and `false` otherwise.\n\n**Requirements:**\n1.  The function should be named `createFilter` and accept one argument `criteria` (an object).\n2.  It should return a function `(item) => boolean`.\n3.  The returned function should iterate through all `criteria` properties.\n4.  For each property in `criteria`, check if `item` has that property and if its value strictly matches (`===`) the value in `criteria`.\n5.  If `item` fails to match any single criterion, the returned function should immediately return `false`.\n6.  If `item` matches all criteria, it should return `true`.\n7.  Handle cases where `criteria` is empty (should match all items).\n8.  Handle cases where `item` might be `null` or `undefined` gracefully (should return `false`).\n",
          "difficulty": "medium",
          "startingCode": "/**\n * Creates a higher-order filter function based on specified criteria.\n * @param {Object} criteria An object with key-value pairs to match.\n * @returns {function(Object): boolean} A predicate function for Array.prototype.filter.\n */\nfunction createFilter(criteria) {\n  // TODO: Implement the logic to return the predicate function.\n  // Hint: You'll need to iterate over the keys of the criteria object.\n  // Use Object.keys() or a for...in loop.\n  // Remember to check for own properties if using for...in.\n\n  return function(item) {\n    // Replace this with actual filtering logic\n    return false; \n  };\n}\n\n// Example Data\nconst products = [\n  { id: 1, name: 'Laptop', category: 'Electronics', price: 1200, inStock: true },\n  { id: 2, name: 'Desk Chair', category: 'Furniture', price: 300, inStock: false },\n  { id: 3, name: 'Smartphone', category: 'Electronics', price: 800, inStock: true },\n  { id: 4, name: 'Coffee Table', category: 'Furniture', price: 150, inStock: true }\n];\n",
          "solutionCode": "/**\n * Creates a higher-order filter function based on specified criteria.\n * @param {Object} criteria An object with key-value pairs to match.\n * @returns {function(Object): boolean} A predicate function for Array.prototype.filter.\n */\nfunction createFilter(criteria) {\n  const criteriaKeys = Object.keys(criteria);\n  \n  return function(item) {\n    // Handle null/undefined items gracefully\n    if (item === null || typeof item !== 'object') {\n      return false;\n    }\n\n    // If no criteria are provided, all items match\n    if (criteriaKeys.length === 0) {\n      return true;\n    }\n\n    // Check if the item matches all criteria\n    for (const key of criteriaKeys) {\n      // If item doesn't have the property, or its value doesn't match, return false\n      if (!item.hasOwnProperty(key) || item[key] !== criteria[key]) {\n        return false;\n      }\n    }\n    // If all criteria are matched, return true\n    return true;\n  };\n}\n\n// Example Data\nconst products = [\n  { id: 1, name: 'Laptop', category: 'Electronics', price: 1200, inStock: true },\n  { id: 2, name: 'Desk Chair', category: 'Furniture', price: 300, inStock: false },\n  { id: 3, name: 'Smartphone', category: 'Electronics', price: 800, inStock: true },\n  { id: 4, name: 'Coffee Table', category: 'Furniture', price: 150, inStock: true }\n];\n\n// Test Cases:\nconst electronicsFilter = createFilter({ category: 'Electronics' });\nconsole.log('Electronics:', products.filter(electronicsFilter));\n/*\nOutput:\n[\n  { id: 1, name: 'Laptop', category: 'Electronics', price: 1200, inStock: true },\n  { id: 3, name: 'Smartphone', category: 'Electronics', price: 800, inStock: true }\n]\n*/\n\nconst inStockFurnitureFilter = createFilter({ category: 'Furniture', inStock: true });\nconsole.log('In-Stock Furniture:', products.filter(inStockFurnitureFilter));\n/*\nOutput:\n[\n  { id: 4, name: 'Coffee Table', category: 'Furniture', price: 150, inStock: true }\n]\n*/\n\nconst allProductsFilter = createFilter({});\nconsole.log('All Products (empty criteria):', products.filter(allProductsFilter));\n// Should return all products\n\nconst noMatchFilter = createFilter({ price: 10000 });\nconsole.log('No Match:', products.filter(noMatchFilter));\n// Should return an empty array\n\nconst invalidItems = [\n  { id: 5, name: 'Valid', category: 'Test' },\n  null,\n  undefined,\n  'string_item'\n];\nconst testFilter = createFilter({ category: 'Test' });\nconsole.log('Invalid items test:', invalidItems.filter(testFilter));\n// Expected: [{ id: 5, name: 'Valid', category: 'Test' }] (null/undefined/string filtered out)\n",
          "testCases": [
            "products.filter(createFilter({ category: 'Electronics' })) should return only electronic products.",
            "products.filter(createFilter({ category: 'Furniture', inStock: true })) should return only in-stock furniture.",
            "products.filter(createFilter({})) should return all products.",
            "products.filter(createFilter({ price: 9999 })) should return an empty array.",
            "createFilter({ key: 'value' })(null) should return false.",
            "createFilter({ key: 'value' })(undefined) should return false.",
            "createFilter({ key: 'value' })({ otherKey: 'otherValue' }) should return false."
          ],
          "hints": [
            "Inside the returned function, iterate over the keys of the `criteria` object.",
            "Use `item.hasOwnProperty(key)` to check if the item actually has the property, and then compare its value.",
            "Remember to return `false` immediately if any criterion is not met (`early exit`).",
            "Consider how `Object.keys()` can help you get the criteria properties efficiently."
          ],
          "tags": [
            "Higher-Order Functions",
            "Closures",
            "Array Methods",
            "Filtering",
            "Objects",
            "Utility"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "javascript_objects",
            "array_methods",
            "closures"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "theory_higher_order_functions_filtering",
            "question_hof_filter_3",
            "question_hof_filter_4"
          ]
        },
        {
          "id": "task_extend_custom_promise_chaining",
          "title": "Extend CustomPromise for Basic Chaining",
          "description": "\nExtend the provided `CustomPromise` class to support a more fundamental aspect of native Promise chaining: `then()` should return a *new* `CustomPromise` instance. This new promise should then resolve or reject based on the return value or thrown error of the callback executed by the *previous* promise.\n\n**Requirements:**\n1.  Modify the `then` method of `CustomPromise`.\n2.  `then` must now return a `new CustomPromise`.\n3.  The `executor` of this new promise should connect to the outcome of the original promise's callback:\n    *   If the original promise resolves and its `then` callback is executed, the return value of that callback should resolve the *new* promise.\n    *   If the original promise resolves and its `then` callback throws an error, the *new* promise should be rejected with that error.\n    *   If the original promise rejects and no `catch` is explicitly chained to it, the *new* promise should also reject with the original error (error propagation).\n4.  All promise resolutions/rejections and callback executions should remain asynchronous (using `setTimeout(0)` or similar).\n\n**Note**: This is a simplified chaining; a full implementation would also handle a handler returning another promise.\n",
          "difficulty": "hard",
          "startingCode": "class CustomPromise {\n  constructor(action) {\n    this.state = \"PENDING\";\n    this.value = undefined;\n    this.thenCallbacks = [];\n    this.errorCallbacks = [];\n\n    const resolve = (value) => {\n      setTimeout(() => this._resolve(value), 0);\n    };\n    const reject = (value) => {\n      setTimeout(() => this._reject(value), 0);\n    };\n\n    try {\n      action(resolve, reject);\n    } catch (e) {\n      reject(e);\n    }\n  }\n\n  _resolve(value) {\n    if (this.state === \"PENDING\") {\n      this.state = \"RESOLVED\";\n      this.value = value;\n      this.thenCallbacks.forEach(callback => callback(this.value));\n      this.thenCallbacks = [];\n      this.errorCallbacks = [];\n    }\n  }\n\n  _reject(value) {\n    if (this.state === \"PENDING\") {\n      this.state = \"REJECTED\";\n      this.value = value;\n      this.errorCallbacks.forEach(callback => callback(this.value));\n      this.thenCallbacks = [];\n      this.errorCallbacks = [];\n    }\n  }\n\n  then(onFulfilled) {\n    // TODO: Modify this method to return a new CustomPromise\n    // This is the core part to implement for chaining.\n    if (this.state === \"RESOLVED\") {\n      setTimeout(() => onFulfilled(this.value), 0);\n    } else if (this.state === \"PENDING\") {\n      this.thenCallbacks.push(onFulfilled);\n    }\n    return this; // This needs to change!\n  }\n\n  catch(onRejected) {\n    if (this.state === \"REJECTED\") {\n      setTimeout(() => onRejected(this.value), 0);\n    } else if (this.state === \"PENDING\") {\n      this.errorCallbacks.push(onRejected);\n    }\n    return this; \n  }\n}\n",
          "solutionCode": "class CustomPromise {\n  constructor(action) {\n    this.state = \"PENDING\";\n    this.value = undefined;\n    this.thenCallbacks = [];\n    this.errorCallbacks = [];\n\n    const resolve = (value) => {\n      setTimeout(() => this._resolve(value), 0);\n    };\n    const reject = (value) => {\n      setTimeout(() => this._reject(value), 0);\n    };\n\n    try {\n      action(resolve, reject);\n    } catch (e) {\n      reject(e);\n    }\n  }\n\n  _resolve(value) {\n    if (this.state === \"PENDING\") {\n      this.state = \"RESOLVED\";\n      this.value = value;\n      // Execute all registered thenCallbacks asynchronously\n      this.thenCallbacks.forEach(callback => callback(this.value));\n      this.thenCallbacks = [];\n      this.errorCallbacks = [];\n    }\n  }\n\n  _reject(value) {\n    if (this.state === \"PENDING\") {\n      this.state = \"REJECTED\";\n      this.value = value;\n      // Execute all registered errorCallbacks asynchronously\n      this.errorCallbacks.forEach(callback => callback(this.value));\n      this.thenCallbacks = [];\n      this.errorCallbacks = [];\n    }\n  }\n\n  then(onFulfilled, onRejected) {\n    // Return a new promise for chaining\n    return new CustomPromise((newResolve, newReject) => {\n      const handleFulfilled = (value) => {\n        try {\n          const result = onFulfilled ? onFulfilled(value) : value;\n          newResolve(result);\n        } catch (error) {\n          newReject(error);\n        }\n      };\n\n      const handleRejected = (reason) => {\n        try {\n          if (onRejected) {\n            const result = onRejected(reason);\n            newResolve(result); // If onRejected handles error, new promise resolves\n          } else {\n            newReject(reason); // Error propagation\n          }\n        } catch (error) {\n          newReject(error);\n        }\n      };\n\n      if (this.state === \"RESOLVED\") {\n        setTimeout(() => handleFulfilled(this.value), 0);\n      } else if (this.state === \"REJECTED\") {\n        setTimeout(() => handleRejected(this.value), 0);\n      } else { // PENDING\n        this.thenCallbacks.push(handleFulfilled);\n        this.errorCallbacks.push(handleRejected);\n      }\n    });\n  }\n\n  catch(onRejected) {\n    return this.then(null, onRejected);\n  }\n}\n\n// Usage for testing chaining:\nconsole.log(\"Start of script\");\n\nlet promise1 = new CustomPromise(resolve => {\n  setTimeout(() => resolve(10), 100);\n});\n\npromise1\n  .then(value => {\n    console.log(`First then: ${value}`); // 10\n    return value * 2;\n  })\n  .then(newValue => {\n    console.log(`Second then: ${newValue}`); // 20\n    return new CustomPromise(resolve => setTimeout(() => resolve(newValue + 5), 50)); // Simplified: doesn't truly wait like native\n  })\n  .then(finalValue => {\n    console.log(`Third then: ${finalValue}`); // 25\n    if (finalValue > 20) throw new Error(\"Value too high!\");\n    return finalValue;\n  })\n  .catch(error => {\n    console.error(\"Caught error in chain:\", error.message);\n  })\n  .then(() => console.log(\"This runs after catch or successful chain\"));\n\nlet errorPromise = new CustomPromise((_, reject) => {\n  setTimeout(() => reject(\"Error occurred!\"), 200);\n});\n\nerrorPromise\n  .then(val => console.log(\"Should not run:\", val))\n  .catch(err => {\n    console.error(\"Caught error in error chain:\", err);\n    return \"Error handled\"; // Returning a value from catch resolves next then\n  })\n  .then(msg => console.log(\"Next after handling error:\", msg)); // \"Error handled\"\n\nconsole.log(\"End of script\");\n",
          "testCases": [
            "A chain like `promise.then(v => v + 1).then(v => v * 2)` should correctly pass the transformed value.",
            "A `then` callback throwing an error should be caught by a subsequent `catch`.",
            "A rejected promise with no `onRejected` in `then` should propagate the error to the next `catch`.",
            "A `catch` handler that returns a value should resolve the subsequent `then` with that value.",
            "Ensure all handlers are called asynchronously even for already resolved/rejected promises."
          ],
          "hints": [
            "The `then` method must create and return `new CustomPromise(...)`.",
            "The executor of this new promise needs to be resolved/rejected based on the outcome of the `onFulfilled` or `onRejected` callback from the *previous* promise.",
            "Remember to wrap the execution of `onFulfilled` and `onRejected` in a `try...catch` block to handle synchronous errors thrown by the user's callback.",
            "If `onFulfilled` or `onRejected` is not provided, the value or reason should simply be passed through to the next promise in the chain."
          ],
          "tags": [
            "Promises",
            "Asynchronous",
            "Chaining",
            "OOP",
            "Design Patterns",
            "Advanced"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_custom_promise_implementation",
            "question_promise_3",
            "question_promise_4"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Promise.prototype.then",
            "Promise Resolution Procedure",
            "Error Propagation"
          ]
        },
        {
          "id": "task_movie_list_management",
          "title": "Movie List Filtering, Sorting, and Mapping",
          "description": "\nYou are tasked with creating a robust function to manage a list of movie objects. Each movie object has at least `title` (string), `genre` (string), and `averageRating` (number) properties.\n\nImplement a JavaScript function `processMovies(movieList, options)` that filters, sorts, and optionally maps the movies based on a given `options` object.\n\n**Requirements:**\n1.  The function `processMovies` should accept two arguments: `movieList` (an array of movie objects) and `options` (an object).\n2.  The `options` object can have the following properties (all optional):\n    *   `minRating` (number): Filters movies with `averageRating` greater than or equal to this value. Default to 0.\n    *   `genre` (string): Filters movies that exactly match this `genre`. Default to `null` (no genre filtering).\n    *   `sortBy` (string): Sorts the results. Can be `'titleAsc'`, `'titleDesc'`, `'ratingAsc'`, `'ratingDesc'`. Default to no specific sort (maintain original order or engine-dependent order).\n    *   `outputFormat` (string): If `'titlesOnly'`, return an array of just movie titles. Otherwise (default), return the full movie objects.\n3.  The processing order should be: **Filter** -> **Sort** -> **Map**.\n4.  The function must return a *new* array and not modify the original `movieList`.\n5.  Handle invalid inputs (e.g., non-array `movieList`, non-object `options`).\n\nExample Movie Object Structure:\n```javascript\n{\n  title: 'Movie Title',\n  genre: 'Action',\n  averageRating: 4.2\n}\n```\n",
          "difficulty": "medium",
          "startingCode": "const moviesData = [\n  { title: 'The Great Adventure', genre: 'Action', averageRating: 4.5 },\n  { title: 'Epic Drama', genre: 'Drama', averageRating: 3.8 },\n  { title: 'Comedy Night', genre: 'Comedy', averageRating: 4.1 },\n  { title: 'Sci-Fi Odyssey', genre: 'Sci-Fi', averageRating: 4.7 },\n  { title: 'Romantic Getaway', genre: 'Romance', averageRating: 3.5 },\n  { title: 'Action Thriller', genre: 'Action', averageRating: 4.5 },\n  { title: 'Another Drama', genre: 'Drama', averageRating: 3.9 }\n];\n\n/**\n * Processes a list of movie objects based on filtering, sorting, and mapping options.\n * @param {Array<Object>} movieList The list of movie objects.\n * @param {Object} options The processing options (minRating, genre, sortBy, outputFormat).\n * @returns {Array<Object>|Array<string>} The processed list of movies or movie titles.\n */\nfunction processMovies(movieList, options = {}) {\n  // TODO: Implement filtering, sorting, and mapping logic.\n  // Remember to return a new array.\n  // Use Array.prototype.filter, sort, map.\n  \n  if (!Array.isArray(movieList)) {\n    return [];\n  }\n\n  let result = [...movieList]; // Start with a shallow copy to avoid modifying original\n\n  // 1. Filtering\n\n\n  // 2. Sorting\n\n\n  // 3. Mapping\n\n\n  return result;\n}\n",
          "solutionCode": "const moviesData = [\n  { title: 'The Great Adventure', genre: 'Action', averageRating: 4.5 },\n  { title: 'Epic Drama', genre: 'Drama', averageRating: 3.8 },\n  { title: 'Comedy Night', genre: 'Comedy', averageRating: 4.1 },\n  { title: 'Sci-Fi Odyssey', genre: 'Sci-Fi', averageRating: 4.7 },\n  { title: 'Romantic Getaway', genre: 'Romance', averageRating: 3.5 },\n  { title: 'Action Thriller', genre: 'Action', averageRating: 4.5 },\n  { title: 'Another Drama', genre: 'Drama', averageRating: 3.9 }\n];\n\n/**\n * Processes a list of movie objects based on filtering, sorting, and mapping options.\n * @param {Array<Object>} movieList The list of movie objects.\n * @param {Object} options The processing options (minRating, genre, sortBy, outputFormat).\n * @returns {Array<Object>|Array<string>} The processed list of movies or movie titles.\n */\nfunction processMovies(movieList, options = {}) {\n  if (!Array.isArray(movieList)) {\n    return [];\n  }\n\n  let result = [...movieList]; // Start with a shallow copy\n\n  const { minRating = 0, genre = null, sortBy = null, outputFormat = null } = options;\n\n  // 1. Filtering\n  result = result.filter(movie => {\n    let passesFilter = true;\n\n    if (movie.averageRating < minRating) {\n      passesFilter = false;\n    }\n\n    if (genre !== null && movie.genre !== genre) {\n      passesFilter = false;\n    }\n    \n    // Handle potentially malformed movie objects\n    if (typeof movie.averageRating !== 'number' || typeof movie.title !== 'string' || typeof movie.genre !== 'string') {\n        passesFilter = false;\n    }\n\n    return passesFilter;\n  });\n\n  // 2. Sorting\n  if (sortBy) {\n    result.sort((a, b) => {\n      switch (sortBy) {\n        case 'titleAsc':\n          return a.title.localeCompare(b.title);\n        case 'titleDesc':\n          return b.title.localeCompare(a.title);\n        case 'ratingAsc':\n          return a.averageRating - b.averageRating;\n        case 'ratingDesc':\n          return b.averageRating - a.averageRating;\n        default:\n          return 0; // No specific sort\n      }\n    });\n  }\n\n  // 3. Mapping\n  if (outputFormat === 'titlesOnly') {\n    result = result.map(movie => movie.title);\n  }\n\n  return result;\n}\n\n// Test Cases:\nconsole.log(\"--- Test Case 1: High Rated Action Movies ---\");\nconst highRatedActionMovies = processMovies(moviesData, { minRating: 4.0, genre: 'Action', sortBy: 'titleAsc' });\nconsole.log(highRatedActionMovies);\n/* Expected:\n[\n  { title: 'Action Thriller', genre: 'Action', averageRating: 4.5 },\n  { title: 'The Great Adventure', genre: 'Action', averageRating: 4.5 }\n]\n*/\n\nconsole.log(\"--- Test Case 2: All Drama Movies (Titles Only) ---\");\nconst dramaTitles = processMovies(moviesData, { genre: 'Drama', outputFormat: 'titlesOnly', sortBy: 'ratingDesc' });\nconsole.log(dramaTitles);\n/* Expected (order matters for sort, then map):\n[\n  'Epic Drama',\n  'Another Drama'\n]\n*/\n\nconsole.log(\"--- Test Case 3: All Movies Sorted by Rating Desc ---\");\nconst allSortedByRating = processMovies(moviesData, { sortBy: 'ratingDesc' });\nconsole.log(allSortedByRating.map(m => m.title + ' (' + m.averageRating + ')'));\n/* Expected:\n[\n  'Sci-Fi Odyssey (4.7)',\n  'The Great Adventure (4.5)',\n  'Action Thriller (4.5)',\n  'Comedy Night (4.1)',\n  'Another Drama (3.9)',\n  'Epic Drama (3.8)',\n  'Romantic Getaway (3.5)'\n]\n*/\n\nconsole.log(\"--- Test Case 4: No Filter, No Sort, No Map ---\");\nconst noOps = processMovies(moviesData, {});\nconsole.log(noOps.length === moviesData.length); // Should be true\n\nconsole.log(\"--- Test Case 5: Empty Input Array ---\");\nconsole.log(processMovies([], {})); // Expected: []\n\nconsole.log(\"--- Test Case 6: Invalid Input Data ---\");\nconst malformedMovies = [\n  { title: 'Good Movie', genre: 'Action', averageRating: 4.0 },\n  { title: 'Bad Movie', averageRating: 'not a number' }, // Bad rating\n  { genre: 'Missing Title', averageRating: 3.0 } // Missing title\n];\nconst goodMovies = processMovies(malformedMovies, {});\nconsole.log(\"Malformed movies (filtered out bad data):\");\nconsole.log(goodMovies);\n/* Expected:\n[\n  { title: 'Good Movie', genre: 'Action', averageRating: 4 }\n]\n*/\n",
          "testCases": [
            "processMovies(moviesData, { minRating: 4.5, genre: 'Action', sortBy: 'titleAsc' }) should return specific high-rated action movies sorted by title.",
            "processMovies(moviesData, { genre: 'Drama', outputFormat: 'titlesOnly', sortBy: 'ratingDesc' }) should return only drama titles, sorted descending by rating.",
            "processMovies(moviesData, { sortBy: 'ratingDesc' }) should return all movies sorted by rating in descending order.",
            "processMovies(moviesData, {}) should return a shallow copy of the original array, in original order.",
            "processMovies([], {}) should return an empty array.",
            "processMovies(null, {}) should return an empty array.",
            "processMovies(moviesData, { sortBy: 'nonexistentSort' }) should return filtered movies without specific sorting.",
            "processMovies(moviesData, { minRating: 5.0 }) should return an empty array if no movies meet the rating."
          ],
          "hints": [
            "Start by creating a shallow copy of `movieList` (`[...movieList]`) to ensure immutability.",
            "Use conditional logic inside your `filter` callback to apply `minRating` and `genre` filters only if they are provided in `options`.",
            "For `sort`, use a `switch` statement or a series of `if/else if` to handle different `sortBy` values. Remember to use `localeCompare` for string sorting and simple subtraction for numeric sorting (`a.value - b.value` for ascending, `b.value - a.value` for descending).",
            "Apply `map` only if `outputFormat` is `'titlesOnly'`."
          ],
          "tags": [
            "Array Methods",
            "Filter",
            "Sort",
            "Map",
            "Data Transformation",
            "Objects",
            "Frontend",
            "Practice"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "theory_array_manipulation_filtering_sorting",
            "array_methods",
            "javascript_objects"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "question_array_manipulation_2",
            "question_array_manipulation_4"
          ]
        }
      ]
    }
  },
  {
    "id": "f6f06285-929d-4e61-9a70-9efbcfa470d0",
    "startLine": 15200,
    "endLine": 15299,
    "processedDate": "2025-06-17T14:43:37.314Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_data_manipulation",
          "title": "Data Manipulation: Filtering, Sorting, and Aggregation in JavaScript",
          "content": "This section covers fundamental JavaScript array methods (`filter`, `map`, `sort`, `reduce`) used for efficient data processing, transformation, and aggregation. These methods are crucial for handling lists of data in modern web applications.\n\n## Key Concepts\n\n### `Array.prototype.filter()`\nThe `filter()` method creates a new array with all elements that pass the test implemented by the provided function. It's used for selecting a subset of elements from an array based on a condition.\n\n### `Array.prototype.map()`\nThe `map()` method creates a new array populated with the results of calling a provided function on every element in the calling array. It's used for transforming elements without altering the original array's length or structure, but changing the content or adding new properties.\n\n### `Array.prototype.sort()`\nThe `sort()` method sorts the elements of an array *in place* and returns the sorted array. The default sort order is ascending, built upon converting the elements into strings, then comparing their sequences of UTF-16 code units. For numeric or complex object sorting, a comparison function must be provided. This function takes two arguments (`a`, `b`) and should return:\n- A negative value if `a` should come before `b`.\n- A positive value if `a` should come after `b`.\n- `0` if `a` and `b` are considered equal.\n\n### `Array.prototype.reduce()`\nThe `reduce()` method executes a user-supplied 'reducer' callback function on each element of the array, in order, passing in the return value from the calculation on the preceding element. The final result of running the reducer across all elements is a single value. It's highly versatile and can be used for summing values, flattening arrays, counting occurrences, or calculating averages.\n\n### Helper Functions for Modularity\nComplex data manipulation often benefits from breaking down logic into smaller, reusable helper functions. This improves readability, maintainability, and testability. Examples include functions for case conversion (`toLower`), substring checks (`isSubString`), or aggregate calculations (`getAvgRating`).\n\n### Combining Operations\nReal-world scenarios often require a sequence of these operations: first filtering data, then transforming it, and finally sorting it. The order of operations is crucial as it affects the intermediate and final results.",
          "examples": [
            {
              "id": "example_data_manipulation_1",
              "title": "Basic Array Method Usage",
              "code": "const numbers = [1, 2, 3, 4, 5];\n\n// filter: get even numbers\nconst evenNumbers = numbers.filter(num => num % 2 === 0);\n// evenNumbers is [2, 4]\n\n// map: double each number\nconst doubledNumbers = numbers.map(num => num * 2);\n// doubledNumbers is [2, 4, 6, 8, 10]\n\n// reduce: sum all numbers\nconst sum = numbers.reduce((acc, num) => acc + num, 0);\n// sum is 15\n\n// sort: descending order\nconst sortedNumbers = [...numbers].sort((a, b) => b - a);\n// sortedNumbers is [5, 4, 3, 2, 1]",
              "explanation": "This example demonstrates the basic usage of `filter`, `map`, `reduce`, and `sort` for common array manipulations. Note the use of `[...numbers]` before `sort` to avoid modifying the original array in place.",
              "language": "typescript"
            },
            {
              "id": "example_data_manipulation_2",
              "title": "Calculating Average Rating (`getAvgRating`)",
              "code": "const moviesWithRatings = [\n  { id: 1, movie_id: 101, rating: 8 },\n  { id: 2, movie_id: 102, rating: 7 },\n  { id: 3, movie_id: 101, rating: 9 },\n  { id: 4, movie_id: 103, rating: 6 }\n];\n\nconst getAvgRating = (movie, allRatings) => {\n  let count = 0;\n  const totalRating = allRatings.reduce((acc, value) => {\n    if (movie.id === value.movie_id) {\n      acc += value.rating;\n      count++;\n    }\n    return acc;\n  }, 0);\n  return count > 0 ? totalRating / count : 0;\n};\n\nconst movie101 = { id: 101, name: \"Movie A\" };\nconst avgRatingMovieA = getAvgRating(movie101, moviesWithRatings);\n// avgRatingMovieA is (8 + 9) / 2 = 8.5",
              "explanation": "This helper function calculates the average rating for a given movie by iterating through all available ratings using `reduce`. It accumulates the sum of ratings and counts the number of relevant ratings to compute the average.",
              "language": "typescript"
            },
            {
              "id": "example_data_manipulation_3",
              "title": "Substring Check (`isSubString`)",
              "code": "const toLower = str => str.toLowerCase();\n\nconst isSubString = (str1, str2) => {\n  // Normalize strings by converting to lower case and removing spaces\n  str1 = toLower(str1.split(\" \").join(\"\"));\n  str2 = toLower(str2.split(\" \").join(\"\"));\n  \n  // Check if one string starts with the other, regardless of length\n  if (str1.length > str2.length) {\n    return str1.startsWith(str2);\n  } else {\n    return str2.startsWith(str1);\n  }\n};\n\nconsole.log(isSubString(\"The Dark Knight\", \"dark\")); // true\nconsole.log(isSubString(\"Avengers\", \"The Avengers\")); // true\nconsole.log(isSubString(\"Hello World\", \"world hello\")); // false",
              "explanation": "The `isSubString` function checks if one string is a substring of another after normalizing them (converting to lowercase and removing spaces). It intelligently handles cases where `str1` is longer than `str2` or vice-versa by using `startsWith` on the longer string with the shorter one.",
              "language": "typescript"
            },
            {
              "id": "example_data_manipulation_4",
              "title": "Dynamic Sorting Logic",
              "code": "const movies = [\n  { name: 'Movie C', year: 2000 },\n  { name: 'Movie A', year: 2010 },\n  { name: 'Movie B', year: 1995 }\n];\n\n// Sort by 'year' ascending\nlet sortedByYearAsc = [...movies].sort((a, b) => a['year'] - b['year']);\n// [{ name: 'Movie B', year: 1995 }, { name: 'Movie C', year: 2000 }, { name: 'Movie A', year: 2010 }]\n\n// Sort by 'name' descending\nlet sortedByNameDesc = [...movies].sort((a, b) => {\n  const value1 = a['name'];\n  const value2 = b['name'];\n  return value1 > value2 ? -1 : (value1 < value2 ? 1 : 0);\n});\n// [{ name: 'Movie C', year: 2000 }, { name: 'Movie B', year: 1995 }, { name: 'Movie A', year: 2010 }]\n\n// Example of how `queryMovies` handles sort parameter:\n// sort: \"-year\" for descending, \"name\" for ascending\nconst applySort = (arr, sortParam) => {\n    const isDescending = sortParam[0] === '-';\n    let sortField = isDescending ? sortParam.slice(1) : sortParam;\n\n    return [...arr].sort((a, b) => {\n        const value1 = a[sortField];\n        const value2 = b[sortField];\n        \n        if (typeof value1 === 'string') {\n            return isDescending ? value2.localeCompare(value1) : value1.localeCompare(value2);\n        } else {\n            return isDescending ? value2 - value1 : value1 - value2;\n        }\n    });\n};\n\nconst moviesSortedByYearDesc = applySort(movies, '-year');\nconst moviesSortedByNameAsc = applySort(movies, 'name');",
              "explanation": "This example illustrates how sorting logic can be made dynamic based on a `sort` parameter. It extracts the sort field and direction (ascending/descending) from the parameter and applies the appropriate comparison logic. It differentiates between string and number comparison for robustness.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_filter_map_sort_reduce_mcq_1",
            "question_sort_complexity_open_1",
            "question_getAvgRating_complexity_open_1",
            "question_queryMovies_refactor_code_1",
            "question_sort_stability_flashcard_1",
            "question_array_methods_flashcard_1"
          ],
          "relatedTasks": [
            "task_product_catalog_filter_sort"
          ],
          "tags": [
            "JavaScript",
            "Array Methods",
            "Data Manipulation",
            "Filtering",
            "Sorting",
            "Aggregation",
            "Functional Programming"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "basic_javascript_syntax",
            "functions",
            "arrays"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "advanced_data_structures",
            "front_end_framework_development"
          ]
        },
        {
          "id": "theory_async_data_correlation",
          "title": "Asynchronous Data Handling: `fetch` API and `Promise.all` for Data Correlation",
          "content": "In modern frontend development, applications frequently interact with multiple backend API endpoints to fetch related data. Handling these asynchronous operations efficiently and then combining the results into a meaningful structure is a common challenge.\n\n## Key Concepts\n\n### The `fetch` API\nThe `fetch` API provides a modern, promise-based interface for making network requests. It's a powerful and flexible way to retrieve resources across the network. A `fetch()` call returns a `Promise` that resolves to a `Response` object. To get the actual data (e.g., JSON), you typically call `.json()` on the `Response` object, which also returns a Promise.\n\n### `Promise.all()`\n`Promise.all()` is a static method that takes an iterable of promises as input and returns a single `Promise`. This returned promise fulfills when all of the input promises have fulfilled, returning an array of their fulfilled values in the same order as the input promises. It rejects immediately upon the first promise's rejection. This is ideal for scenarios where you need to fetch multiple independent resources concurrently and wait for all of them to complete before proceeding.\n\n### Data Correlation Strategies\nOnce multiple related datasets are fetched, they often need to be 'joined' or correlated. Common strategies include:\n1.  **Iterating and Mapping (e.g., `reduce` or `forEach` with a `Map`):** For each item in a 'parent' dataset (e.g., posts), find its corresponding 'child' items (e.g., comments) from another dataset and attach them. Using a `Map` for the child data (keyed by `parentId`) can significantly improve lookup performance (O(1) average time complexity) compared to repeatedly iterating through the child array (O(n) time complexity) for each parent item.\n2.  **Database-like Joins:** While not directly available in JavaScript arrays, the concept of joining data based on a common key is applied. This involves iterating through one dataset and looking up related records in another.",
          "examples": [
            {
              "id": "example_async_data_correlation_1",
              "title": "Basic `fetch` API Usage",
              "code": "const fetchData = async (url) => {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n    throw error; // Re-throw to propagate the error\n  }\n};\n\nfetchData('https://jsonplaceholder.typicode.com/posts/1')\n  .then(post => console.log('Fetched Post:', post))\n  .catch(error => console.error('Failed to fetch post:', error));",
              "explanation": "This example demonstrates how to use the `fetch` API to retrieve data from a URL. It shows handling the `Response` object, parsing JSON, and basic error handling using `async/await` and `try/catch` for cleaner asynchronous code.",
              "language": "typescript"
            },
            {
              "id": "example_async_data_correlation_2",
              "title": "Concurrent Fetching with `Promise.all`",
              "code": "// Service functions (as in original content)\nconst POSTS_URL = `https://jsonplaceholder.typicode.com/posts`;\nconst COMMENTS_URL = `https://jsonplaceholder.typicode.com/comments`;\n\nconst fetchAllPosts = () => {\n  return fetch(POSTS_URL).then(res => res.json());\n};\n\nconst fetchAllComments = () => {\n  return fetch(COMMENTS_URL).then(res => res.json());\n};\n\n// Combining them with Promise.all\nPromise.all([fetchAllPosts(), fetchAllComments()])\n  .then(([posts, comments]) => {\n    console.log('All posts fetched:', posts.length);\n    console.log('All comments fetched:', comments.length);\n    // Now you have both datasets to correlate\n  })\n  .catch(error => {\n    console.error('One of the fetches failed:', error);\n  });",
              "explanation": "This demonstrates using `Promise.all` to concurrently fetch posts and comments. It waits for both promises to resolve, then provides an array containing their resolved values (`[posts, comments]`) in the `.then()` block.",
              "language": "typescript"
            },
            {
              "id": "example_async_data_correlation_3",
              "title": "Correlating Data (`comments` to `posts`) using `Map`",
              "code": "const correlatePostsAndComments = (posts, comments) => {\n  const commentsByPostId = new Map();\n  \n  // Group comments by postId for efficient lookup\n  comments.forEach(comment => {\n    if (!commentsByPostId.has(comment.postId)) {\n      commentsByPostId.set(comment.postId, []);\n    }\n    commentsByPostId.get(comment.postId).push(comment);\n  });\n\n  // Map comments to their respective posts\n  const postsWithComments = posts.map(post => ({\n    ...post,\n    comments: commentsByPostId.get(post.id) || [] // Attach comments, or empty array if none\n  }));\n\n  return postsWithComments;\n};\n\n// Example usage after fetching data:\n// Promise.all([fetchAllPosts(), fetchAllComments()])\n//   .then(([posts, comments]) => {\n//     const postsWithComments = correlatePostsAndComments(posts, comments);\n//     console.log('Posts with comments:', postsWithComments[0]); // Check the first post\n//   })",
              "explanation": "This `correlatePostsAndComments` function efficiently maps comments to their respective posts. It first creates a `Map` where keys are `postId` and values are arrays of comments, allowing for O(1) average time complexity lookups. Then, it iterates through posts and attaches the relevant comments.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_promise_all_mcq_1",
            "question_fetch_api_flashcard_1",
            "question_promise_all_behavior_open_1",
            "question_data_correlation_strategies_open_1",
            "question_implement_post_comments_correlation_code_1"
          ],
          "relatedTasks": [
            "task_fetch_user_photos"
          ],
          "tags": [
            "JavaScript",
            "Asynchronous",
            "Promises",
            "Fetch API",
            "Promise.all",
            "Data Correlation",
            "API Integration"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "basic_javascript_syntax",
            "callbacks",
            "promises_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 10,
          "learningPath": "intermediate",
          "requiredFor": [
            "api_integration",
            "single_page_applications"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_filter_map_sort_reduce_mcq_1",
          "topic": "Array Methods: `filter`, `map`, `sort`, `reduce`",
          "level": "medium",
          "type": "mcq",
          "question": "Given the `moviesList` and `moviesWithRatings` from the provided context, which of the following best describes the purpose of `filteredMovies = filteredMovies.map(movie => ({ ...movie, avgRating: getAvgRating(movie, moviesWithRatings) }));`?",
          "answer": "To create a new array where each movie object includes its calculated average rating, without mutating existing properties.",
          "options": [
            "To filter out movies that do not have an average rating.",
            "To sort the movies based on their average rating.",
            "To create a new array where each movie object includes its calculated average rating, without mutating existing properties.",
            "To reduce the movie list to a single object containing total average rating."
          ],
          "analysisPoints": [
            "Understanding of `map()` method's core functionality: transformation and creation of a new array.",
            "Recognition of the spread syntax (`...movie`) for creating a new object and adding/overwriting properties.",
            "Distinguishing `map()` from `filter()`, `sort()`, and `reduce()`."
          ],
          "keyConcepts": [
            "Array.prototype.map",
            "Object Spread Syntax",
            "Immutability in JavaScript"
          ],
          "evaluationCriteria": [
            "Ability to distinguish between similar concepts",
            "Understanding of fundamental principles"
          ],
          "example": "The `map` method is used to transform each element of an array. In this case, for each `movie` object, it creates a *new* object (`{ ...movie, avgRating: ... }`) that includes all original properties of the `movie` plus a new `avgRating` property. This is a common pattern for enriching data objects.",
          "tags": [
            "JavaScript",
            "Array Methods",
            "map",
            "Data Transformation"
          ],
          "prerequisites": [
            "array_map",
            "object_spread_syntax"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_sort_complexity_open_1",
          "topic": "Array Sorting",
          "level": "medium",
          "type": "open",
          "question": "The provided `queryMovies` function uses `Array.prototype.sort()` to sort movies. What are the potential performance implications and side effects of `sort()` compared to methods like `filter()` or `map()`?",
          "answer": "The `sort()` method sorts the elements of an array *in place*, meaning it directly modifies the original array. This is a side effect that can lead to unexpected behavior if the original array is still needed elsewhere or if immutability is desired. In contrast, `filter()` and `map()` return *new* arrays, leaving the original array untouched.\n\nFrom a performance perspective, `sort()`'s time complexity typically varies. For example, Chrome's V8 engine uses Timsort for arrays with more than 10 elements, which has an average and worst-case time complexity of O(n log n), where n is the number of elements. `filter()` and `map()` typically iterate through the array once, resulting in O(n) time complexity. Therefore, for large datasets, `sort()` can be computationally more expensive than `filter()` or `map()`.\n\nAdditionally, the comparison function within `sort()` can impact performance. If the comparison logic is complex or involves expensive operations (like re-calculating `avgRating` repeatedly if it wasn't pre-calculated), it can significantly slow down the sorting process.",
          "analysisPoints": [
            "Understanding of in-place vs. new array creation.",
            "Knowledge of time complexity for common array methods (O(n log n) for sort, O(n) for filter/map).",
            "Awareness of potential performance bottlenecks in custom comparison functions.",
            "Concept of immutability in programming."
          ],
          "keyConcepts": [
            "Array.prototype.sort",
            "In-place Mutation",
            "Time Complexity",
            "Immutability",
            "Side Effects"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental principles",
            "Recognition of edge cases",
            "Application of best practices"
          ],
          "example": "```javascript\nconst originalArray = [3, 1, 2];\n\n// sort modifies in-place\nconst sortedArray = originalArray.sort((a, b) => a - b);\nconsole.log(originalArray); // Output: [1, 2, 3] (original array is modified)\nconsole.log(sortedArray);   // Output: [1, 2, 3]\n\n// filter creates new array\nconst filteredArray = originalArray.filter(num => num > 1);\nconsole.log(originalArray); // Output: [1, 2, 3] (original array untouched)\nconsole.log(filteredArray); // Output: [2, 3]\n```",
          "tags": [
            "JavaScript",
            "Array Methods",
            "Sorting",
            "Performance",
            "Immutability"
          ],
          "prerequisites": [
            "array_sort",
            "javascript_performance"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_getAvgRating_complexity_open_1",
          "topic": "Algorithm Efficiency: `reduce` and `getAvgRating`",
          "level": "hard",
          "type": "open",
          "question": "Analyze the time complexity of the `getAvgRating` helper function as implemented in the provided code. Suggest an alternative approach to calculate and store average ratings that could improve the overall efficiency of the `queryMovies` function, especially if `getMovies()` and `getRatings()` return large datasets.",
          "answer": "### Time Complexity Analysis of `getAvgRating`\nThe `getAvgRating` function takes a `movie` object and `moviesWithRatings` (which is effectively all ratings). Inside, it uses `reduce` to iterate over `moviesWithRatings`. For each `movie` object passed to `getAvgRating`, it performs a full scan of the `moviesWithRatings` array.\n\nIf there are `M` movies and `R` total ratings, and `queryMovies` calls `getAvgRating` for *each* movie in the `moviesList` (which happens twice: once for the initial `filter` and once for the final `map`): \n- The time complexity of `getAvgRating` itself is O(R).\n- Since `queryMovies` calls `getAvgRating` for each of `M` movies, the overall complexity related to rating calculation becomes O(M * R).\n\nThis can be inefficient if both `M` and `R` are large.\n\n### Alternative Approach for Efficiency\nTo improve efficiency, especially with large datasets, the average ratings should be pre-calculated once and then cached or attached to the movie objects.\n\n**Suggested Approach: Pre-calculate and Store Average Ratings**\n1.  **Group Ratings by Movie ID:** Before iterating through movies, transform `moviesWithRatings` into a `Map` or an object where keys are `movie_id` and values are an array of ratings for that movie.\n    *   Example: `Map<movieId, [rating1, rating2, ...]>`.\n    *   This step takes O(R) time.\n2.  **Calculate Average for Each Movie:** Iterate through the grouped ratings map. For each movie ID, calculate its average rating once.\n    *   This step also takes O(R) time (summing ratings within each group, and the number of groups is at most `M`).\n3.  **Store/Attach:** Store these pre-calculated average ratings in a separate `Map<movieId, avgRating>` or directly attach them to the `moviesList` objects when they are initially loaded.\n\nThis approach would reduce the overall complexity of rating calculation in `queryMovies` from O(M * R) to O(M + R) (or O(R) if only `moviesWithRatings` is large), as each movie's average rating is computed only once and then accessed in O(1) average time.\n\n**Example Transformation:**\n```javascript\n// In queryMovies, after fetching moviesList and moviesWithRatings:\n\nconst movieAvgRatings = new Map();\nconst ratingsGroupedByMovie = new Map();\n\n// Group ratings by movie_id (O(R))\nmoviesWithRatings.forEach(rating => {\n  if (!ratingsGroupedByMovie.has(rating.movie_id)) {\n    ratingsGroupedByMovie.set(rating.movie_id, []);\n  }\n  ratingsGroupedByMovie.get(rating.movie_id).push(rating.rating);\n});\n\n// Calculate average for each movie (O(R) overall)\nratingsGroupedByMovie.forEach((ratingsArray, movieId) => {\n  const sum = ratingsArray.reduce((acc, r) => acc + r, 0);\n  movieAvgRatings.set(movieId, sum / ratingsArray.length);\n});\n\n// Now, when filtering/mapping movies, access avgRating from movieAvgRatings map (O(1) lookup)\nlet filteredMovies = moviesList.filter(movie => \n  (movieAvgRatings.get(movie.id) || 0) >= minAvgRating\n);\n\n// ... and later in map:\nfilteredMovies = filteredMovies.map(movie => ({\n  ...movie,\n  avgRating: movieAvgRatings.get(movie.id) || 0\n}));\n```",
          "analysisPoints": [
            "Ability to identify algorithmic inefficiencies (nested loops, repeated calculations).",
            "Knowledge of time complexity analysis (O(n), O(n log n), O(n*m)).",
            "Understanding of data structures like `Map` for optimized lookups.",
            "Skill in proposing and explaining performance optimization strategies (pre-calculation, caching)."
          ],
          "keyConcepts": [
            "Time Complexity",
            "Algorithmic Efficiency",
            "Data Preprocessing",
            "Caching",
            "Map Data Structure",
            "Optimization"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental principles",
            "Ability to identify performance bottlenecks",
            "Skill in proposing optimized solutions",
            "Application of best practices"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Algorithm",
            "Performance",
            "Optimization",
            "Data Structure",
            "reduce"
          ],
          "prerequisites": [
            "time_complexity",
            "array_reduce",
            "map_object"
          ],
          "complexity": 9,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_queryMovies_refactor_code_1",
          "topic": "Code Refactoring and Modularity",
          "level": "medium",
          "type": "code",
          "question": "The `queryMovies` function combines filtering, sorting, and mapping logic. Refactor this function to improve its readability and maintainability by separating concerns. Specifically, create dedicated helper functions for:\n1.  `applyMinAvgRatingFilter(movies, ratings, minAvgRating)`\n2.  `applySearchFilter(movies, searchTerm)`\n3.  `applySort(movies, sortParam)`\n4.  `addAvgRatingToMovies(movies, ratings)`\n\nEnsure these new functions are pure (do not modify their input arrays directly where possible) and the `queryMovies` orchestrates them.",
          "answer": "```typescript\n// Assuming getMovies(), getRatings(), getAvgRating(), toLower(), isSubString() are available\n\n// Helper for filtering by average rating\nconst applyMinAvgRatingFilter = (movies, allRatings, minAvgRating) => {\n  if (minAvgRating === undefined || minAvgRating === null) return movies; // No filter if not specified\n  return movies.filter(movie => \n    getAvgRating(movie, allRatings) >= minAvgRating\n  );\n};\n\n// Helper for filtering by search term\nconst applySearchFilter = (movies, search) => {\n  if (!search) return movies;\n  return movies.filter(movie => \n    isSubString(movie.name, search)\n  );\n};\n\n// Helper for sorting movies\nconst applySort = (movies, sortParam) => {\n  if (!sortParam) return [...movies]; // Return a shallow copy if no sort needed\n\n  const isDescending = sortParam[0] === '-';\n  let sortField = isDescending ? sortParam.slice(1) : sortParam;\n  \n  return [...movies].sort((a, b) => {\n    const value1 = a[sortField];\n    const value2 = b[sortField];\n    \n    // Handle string comparison for robustness\n    if (typeof value1 === 'string' && typeof value2 === 'string') {\n      const comparison = value1.localeCompare(value2);\n      return isDescending ? -comparison : comparison;\n    } else {\n      // Assume numeric or comparable non-string values\n      return isDescending ? (value2 - value1) : (value1 - value2);\n    }\n  });\n};\n\n// Helper for adding average rating to each movie\nconst addAvgRatingToMovies = (movies, allRatings) => {\n  // Pre-calculate all average ratings once for efficiency\n  const movieAvgRatings = new Map();\n  const ratingsGroupedByMovie = new Map();\n  allRatings.forEach(rating => {\n    if (!ratingsGroupedByMovie.has(rating.movie_id)) {\n      ratingsGroupedByMovie.set(rating.movie_id, []);\n    }\n    ratingsGroupedByMovie.get(rating.movie_id).push(rating.rating);\n  });\n\n  ratingsGroupedByMovie.forEach((ratingsArray, movieId) => {\n    const sum = ratingsArray.reduce((acc, r) => acc + r, 0);\n    movieAvgRatings.set(movieId, sum / ratingsArray.length);\n  });\n\n  return movies.map(movie => ({\n    ...movie,\n    avgRating: movieAvgRatings.get(movie.id) || 0 // Use pre-calculated value\n  }));\n};\n\n// Main filter function (refactored)\nfunction queryMoviesRefactored({ search, sort, minAvgRating }) {\n  const moviesList = getMovies();\n  const moviesWithRatings = getRatings();\n  \n  // Apply filters sequentially\n  let processedMovies = applyMinAvgRatingFilter(moviesList, moviesWithRatings, minAvgRating);\n  processedMovies = applySearchFilter(processedMovies, search);\n  \n  // Apply sorting\n  processedMovies = applySort(processedMovies, sort);\n  \n  // Add average rating to each movie\n  processedMovies = addAvgRatingToMovies(processedMovies, moviesWithRatings);\n  \n  return processedMovies;\n}\n\n// Example usage:\n// const result = queryMoviesRefactored({ search: \"dark\", sort: \"-year\", minAvgRating: 7 });\n// console.log(result);\n```",
          "analysisPoints": [
            "Demonstrates understanding of Single Responsibility Principle.",
            "Applies functional programming concepts (pure functions, immutability).",
            "Improves readability by breaking down complex logic.",
            "Addresses potential performance issue in `getAvgRating` by pre-calculating ratings once.",
            "Handles edge cases like `sortParam` or `search` being undefined gracefully."
          ],
          "keyConcepts": [
            "Code Refactoring",
            "Modularity",
            "Single Responsibility Principle",
            "Pure Functions",
            "Immutability",
            "Functional Programming",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Adherence to refactoring requirements",
            "Correctness of implementation",
            "Clarity and readability of code",
            "Demonstrates understanding of software design principles"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Code Design",
            "Refactoring",
            "Functional Programming",
            "Modularity"
          ],
          "prerequisites": [
            "array_methods",
            "functions_basics",
            "object_spread_syntax"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_sort_stability_flashcard_1",
          "topic": "Array Sorting",
          "level": "easy",
          "type": "flashcard",
          "question": "What does it mean for a sorting algorithm to be 'stable'?",
          "answer": "A sorting algorithm is stable if it preserves the relative order of equal elements. If two elements compare as equal, their original order in the input array is maintained in the sorted output.",
          "analysisPoints": [
            "Understanding of sorting algorithm properties."
          ],
          "keyConcepts": [
            "Sorting Algorithms",
            "Stable Sort"
          ],
          "evaluationCriteria": [
            "Quick recall of definition"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Sorting",
            "Algorithm"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 5,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_methods_flashcard_1",
          "topic": "Array Methods",
          "level": "easy",
          "type": "flashcard",
          "question": "Which JavaScript array method is best suited for transforming each element of an array into a new value, resulting in a new array of the same length?",
          "answer": "`Array.prototype.map()`",
          "analysisPoints": [
            "Recall of specific array method functions."
          ],
          "keyConcepts": [
            "Array.prototype.map",
            "Functional Programming"
          ],
          "evaluationCriteria": [
            "Quick recall of definition"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Array Methods"
          ],
          "prerequisites": [],
          "complexity": 2,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_promise_all_mcq_1",
          "topic": "Asynchronous JavaScript: `Promise.all`",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following JavaScript code snippet:\n```javascript\nconst promise1 = Promise.resolve(3);\nconst promise2 = 42;\nconst promise3 = new Promise((resolve, reject) => {\n  setTimeout(resolve, 100, 'foo');\n});\nconst promise4 = new Promise((resolve, reject) => {\n  setTimeout(reject, 50, 'bar');\n});\n\nPromise.all([promise1, promise2, promise3, promise4])\n  .then(values => {\n    console.log(values);\n  })\n  .catch(error => {\n    console.error(error);\n  });\n```\nWhat will be logged to the console by this code?",
          "answer": "bar",
          "options": [
            "[3, 42, 'foo']",
            "['foo', 42, 3]",
            "bar",
            "An array containing 3, 42, and 'foo', followed by 'bar' as a separate error."
          ],
          "analysisPoints": [
            "Understanding of `Promise.all`'s short-circuiting behavior on rejection.",
            "Knowledge that `Promise.all` rejects as soon as *any* of the input promises reject.",
            "Ability to identify which promise will reject first based on `setTimeout` delays."
          ],
          "keyConcepts": [
            "Promise.all",
            "Promise Rejection",
            "Asynchronous Execution",
            "setTimeout"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental principles",
            "Recognition of edge cases"
          ],
          "example": "The `promise4` will reject after 50ms, which is faster than `promise3` resolves (100ms). `Promise.all` will immediately reject with the reason of the first rejected promise. Therefore, 'bar' will be logged by the `.catch` block.",
          "tags": [
            "JavaScript",
            "Promises",
            "Promise.all",
            "Asynchronous"
          ],
          "prerequisites": [
            "promises_basics",
            "settimeout"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_fetch_api_flashcard_1",
          "topic": "Asynchronous JavaScript: `fetch` API",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of the `fetch` API in JavaScript?",
          "answer": "The `fetch` API provides a modern, promise-based interface for making network requests (e.g., HTTP requests) to retrieve resources from a server.",
          "analysisPoints": [
            "Basic understanding of `fetch`."
          ],
          "keyConcepts": [
            "Fetch API",
            "Promises",
            "HTTP Requests"
          ],
          "evaluationCriteria": [
            "Quick recall of definition"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Fetch API",
            "Asynchronous"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_promise_all_behavior_open_1",
          "topic": "Asynchronous JavaScript: `Promise.all` Error Handling",
          "level": "hard",
          "type": "open",
          "question": "Describe the error handling behavior of `Promise.all()`. If you need to ensure that all promises in an iterable complete (either resolve or reject) before processing results, and collect all outcomes, what alternative `Promise` method would you use, and why?",
          "answer": "### `Promise.all()` Error Handling Behavior\n`Promise.all()` rejects as soon as *any* of the promises in the input iterable rejects. It 'short-circuits'. This means that if you have 10 promises in `Promise.all` and the third one rejects, the `Promise.all` will immediately reject with the reason of that third promise, and it will not wait for the remaining 7 promises to settle (even if they would have resolved successfully). The results of any promises that resolved *before* the first rejection are discarded.\n\n### Alternative for Collecting All Outcomes\nIf the requirement is to ensure that *all* promises complete (regardless of whether they resolve or reject) and to collect all their individual outcomes, you should use `Promise.allSettled()`.\n\n`Promise.allSettled()` waits for all promises in the input iterable to settle (i.e., either fulfill or reject). It then returns a single promise that resolves to an array of objects, each describing the outcome of an individual promise. Each object has a `status` property (either `'fulfilled'` or `'rejected'`) and either a `value` (for fulfilled promises) or a `reason` (for rejected promises).\n\n**Why `Promise.allSettled()`?**\n-   **Robustness:** It allows you to process partial successes and failures gracefully, without one failure stopping the entire operation.\n-   **Comprehensive Results:** You get a full report of every promise's fate, which is invaluable for logging, auditing, or displaying detailed status to the user.",
          "analysisPoints": [
            "Deep understanding of `Promise.all`'s success and failure behavior.",
            "Knowledge of `Promise.allSettled()` and its use cases.",
            "Ability to compare and contrast asynchronous utility methods.",
            "Understanding of error handling strategies in concurrent operations."
          ],
          "keyConcepts": [
            "Promise.all",
            "Promise.allSettled",
            "Error Handling",
            "Asynchronous Programming",
            "Concurrency",
            "Promise States"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of promise methods",
            "Ability to explain nuances and alternatives",
            "Problem-solving for complex async scenarios"
          ],
          "example": "```javascript\nconst p1 = Promise.resolve(1);\nconst p2 = new Promise((resolve, reject) => setTimeout(() => reject('Error from P2'), 50));\nconst p3 = Promise.resolve(3);\n\n// Using Promise.all\nPromise.all([p1, p2, p3])\n  .then(values => console.log('All resolved:', values))\n  .catch(error => console.error('Promise.all rejected:', error));\n// Output: Promise.all rejected: Error from P2 (p1 and p3 results are discarded)\n\n// Using Promise.allSettled\nPromise.allSettled([p1, p2, p3])\n  .then(results => {\n    console.log('All settled:', results);\n    // Output: All settled: [\n    //   { status: 'fulfilled', value: 1 },\n    //   { status: 'rejected', reason: 'Error from P2' },\n    //   { status: 'fulfilled', value: 3 }\n    // ]\n  });\n```",
          "tags": [
            "JavaScript",
            "Promises",
            "Promise.all",
            "Promise.allSettled",
            "Error Handling",
            "Asynchronous"
          ],
          "prerequisites": [
            "promises_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_data_correlation_strategies_open_1",
          "topic": "Data Correlation",
          "level": "medium",
          "type": "open",
          "question": "The provided solution for mapping comments to posts uses `Promise.all` and then `reduce` to create the mapping. Discuss the advantages and disadvantages of using `reduce` for this data correlation task, and propose an alternative strategy that might be more efficient for very large datasets.",
          "answer": "### Advantages of using `reduce` for data correlation:\n*   **Conciseness:** For smaller datasets, `reduce` can be a compact way to transform an array into a new structure.\n*   **Flexibility:** `reduce` is very versatile and can handle various aggregation and transformation needs.\n\n### Disadvantages of using `reduce` for data correlation (as implied by the original Q&A):\n*   **Inefficiency for Lookups:** The original Q&A implies that you would `reduce` the *posts* array and for each post, iterate through the *comments* array to find relevant comments. This would lead to a nested loop structure, resulting in O(N*M) time complexity (where N is posts, M is comments) for correlation if comments aren't pre-indexed. Even if the `reduce` is on `comments` to group by `postId` *first* (as in `correlatePostsAndComments` example), the direct approach of iterating posts and then filtering comments for each post is inefficient.\n*   **Readability:** For complex correlation logic, `reduce` can sometimes become less readable than explicit loops or a combination of `forEach` and `map`.\n\n### Alternative Strategy for Very Large Datasets: Using a `Map` (Hash Map)\nFor optimal efficiency when correlating large datasets, especially when you need to match items from one array to many items in another, using a `Map` (or a plain object as a hash map) for pre-indexing is highly recommended.\n\n**Strategy:**\n1.  **Index the 'child' data:** Iterate through the `comments` array once and create a `Map` where the keys are `postId` and the values are arrays of comments associated with that `postId`. This step has a time complexity of O(M) (where M is the number of comments).\n2.  **Iterate and Attach:** Iterate through the `posts` array. For each `post`, look up its associated comments in the `Map` created in step 1 using `post.id` as the key. Attach the retrieved comments to the `post` object.\n    This step has a time complexity of O(N) (where N is the number of posts) because `Map` lookups are O(1) on average.\n\n**Overall Time Complexity:** O(M + N). This is significantly more efficient than O(N*M) for large datasets.\n\n**Example (as seen in theory block):**\n```javascript\nconst correlatePostsAndComments = (posts, comments) => {\n  const commentsByPostId = new Map();\n  \n  // Step 1: Group comments by postId (O(M))\n  comments.forEach(comment => {\n    if (!commentsByPostId.has(comment.postId)) {\n      commentsByPostId.set(comment.postId, []);\n    }\n    commentsByPostId.get(comment.postId).push(comment);\n  });\n\n  // Step 2: Map comments to their respective posts (O(N))\n  const postsWithComments = posts.map(post => ({\n    ...post,\n    comments: commentsByPostId.get(post.id) || [] \n  }));\n\n  return postsWithComments;\n};\n```",
          "analysisPoints": [
            "Understanding of common data correlation patterns.",
            "Analysis of time complexity for different approaches (nested loops vs. hash map lookups).",
            "Knowledge of `Map` data structure for efficiency.",
            "Ability to articulate pros and cons of different solutions."
          ],
          "keyConcepts": [
            "Data Correlation",
            "Time Complexity",
            "Map Data Structure",
            "Hash Map",
            "Algorithmic Efficiency",
            "Reduce Method"
          ],
          "evaluationCriteria": [
            "Depth of technical explanation",
            "Ability to propose and justify optimized solutions",
            "Understanding of fundamental data structures"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Data Structures",
            "Algorithm",
            "Performance",
            "Map",
            "reduce"
          ],
          "prerequisites": [
            "time_complexity",
            "map_object",
            "array_reduce"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_implement_post_comments_correlation_code_1",
          "topic": "Asynchronous Data Correlation",
          "level": "medium",
          "type": "code",
          "question": "Implement a function `getPostsWithComments()` that fetches all posts and all comments from the provided `POSTS_URL` and `COMMENTS_URL` respectively. The function should use `Promise.all` to fetch the data concurrently. After fetching, it should correlate the comments with their corresponding posts, adding a `comments` array to each post object. Each comment object should be attached to the post whose `id` matches the comment's `postId`. Return the array of posts with their attached comments.",
          "answer": "```typescript\nconst POSTS_URL = `https://jsonplaceholder.typicode.com/posts`;\nconst COMMENTS_URL = `https://jsonplaceholder.typicode.com/comments`;\n\nconst fetchAllPosts = () => {\n  return fetch(POSTS_URL).then(res => {\n    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n    return res.json();\n  });\n};\n\nconst fetchAllComments = () => {\n  return fetch(COMMENTS_URL).then(res => {\n    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);\n    return res.json();\n  });\n};\n\nasync function getPostsWithComments() {\n  try {\n    const [posts, comments] = await Promise.all([\n      fetchAllPosts(),\n      fetchAllComments()\n    ]);\n\n    const commentsByPostId = new Map();\n    comments.forEach(comment => {\n      if (!commentsByPostId.has(comment.postId)) {\n        commentsByPostId.set(comment.postId, []);\n      }\n      commentsByPostId.get(comment.postId).push(comment);\n    });\n\n    const postsWithComments = posts.map(post => ({\n      ...post,\n      comments: commentsByPostId.get(post.id) || []\n    }));\n\n    return postsWithComments;\n\n  } catch (error) {\n    console.error(\"Error fetching or correlating data:\", error);\n    throw error; // Re-throw to propagate the error\n  }\n}\n\n// Example usage:\n// getPostsWithComments()\n//   .then(data => {\n//     console.log('First post with comments:', data[0]);\n//     console.log('Number of comments for first post:', data[0]?.comments?.length);\n//     console.log('Total posts with comments:', data.length);\n//   })\n//   .catch(err => console.error('Failed to get posts with comments:', err));\n```",
          "analysisPoints": [
            "Correct use of `Promise.all` for concurrent fetching.",
            "Effective use of `async/await` for cleaner asynchronous code.",
            "Efficient data correlation logic using `Map` to group comments by `postId`.",
            "Proper use of `map` to transform post objects and attach comments.",
            "Basic error handling for network requests."
          ],
          "keyConcepts": [
            "Promise.all",
            "Fetch API",
            "Async/Await",
            "Data Correlation",
            "Map Data Structure",
            "Error Handling"
          ],
          "evaluationCriteria": [
            "Correctness of asynchronous implementation",
            "Efficiency of data correlation",
            "Adherence to requirements",
            "Robustness (error handling)"
          ],
          "example": null,
          "tags": [
            "JavaScript",
            "Asynchronous",
            "Promises",
            "Fetch API",
            "Data Manipulation",
            "Code Challenge"
          ],
          "prerequisites": [
            "promises_basics",
            "fetch_api",
            "map_object"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_product_catalog_filter_sort",
          "title": "Build a Dynamic Product Catalog Filter and Sort Utility",
          "description": "\nImplement a JavaScript function `queryProducts({ search, sort, minPrice, maxPrice })` that simulates filtering and sorting a product catalog. Your function should:\n\n1.  **Retrieve Data:** Use the provided mock `getProducts()` function (assume it returns `[{ id, name, price, category }]`).\n2.  **Filter by Price Range:** Filter products to include only those within `minPrice` and `maxPrice` (inclusive). If `minPrice` or `maxPrice` is not provided, do not apply that specific bound.\n3.  **Filter by Search Term:** Filter products by `search` term. A product matches if its `name` (case-insensitive, spaces removed) contains the search term (also case-insensitive, spaces removed). Use a helper function similar to `isSubString` from the theory.\n4.  **Sort Products:** Sort the remaining products based on the `sort` parameter. The `sort` parameter can be `name`, `-name` (descending), `price`, or `-price` (descending). If no `sort` parameter is provided, return products in their original order.\n5.  **Return:** The final filtered and sorted list of products.\n\nYour solution should use modern JavaScript array methods (`filter`, `sort`). Focus on clear, maintainable code.\n",
          "difficulty": "medium",
          "startingCode": "function getProducts() {\n  return [\n    { id: 1, name: 'Laptop Pro 15', price: 1200, category: 'Electronics' },\n    { id: 2, name: 'Mechanical Keyboard', price: 150, category: 'Accessories' },\n    { id: 3, name: 'Wireless Mouse', price: 75, category: 'Accessories' },\n    { id: 4, name: 'External SSD 1TB', price: 180, category: 'Storage' },\n    { id: 5, name: 'Gaming Monitor 27', price: 450, category: 'Electronics' },\n    { id: 6, name: 'Webcam HD', price: 50, category: 'Peripherals' },\n    { id: 7, name: 'USB-C Hub', price: 40, category: 'Accessories' },\n    { id: 8, name: 'Laptop Stand', price: 60, category: 'Accessories' },\n  ];\n}\n\n// Helper for normalizing strings for search\nconst normalizeString = str => str.toLowerCase().replace(/\\s/g, '');\n\n// Helper for checking if one string contains another (case & space insensitive)\nconst containsNormalized = (source, query) => {\n  const normalizedSource = normalizeString(source);\n  const normalizedQuery = normalizeString(query);\n  return normalizedSource.includes(normalizedQuery);\n};\n\nfunction queryProducts({ search, sort, minPrice, maxPrice }) {\n  let products = getProducts();\n\n  // TODO: Implement filtering by price range\n\n  // TODO: Implement filtering by search term\n\n  // TODO: Implement sorting\n\n  return products;\n}\n\n// Example Usage:\n// console.log('All products:', queryProducts({}));\n// console.log('Filtered by price:', queryProducts({ minPrice: 100, maxPrice: 200 }));\n// console.log('Filtered by search:', queryProducts({ search: 'laptop' }));\n// console.log('Sorted by name desc:', queryProducts({ sort: '-name' }));\n// console.log('Combined filters and sort:', queryProducts({ search: 'Mouse', minPrice: 50, sort: 'price' }));\n",
          "solutionCode": "function getProducts() {\n  return [\n    { id: 1, name: 'Laptop Pro 15', price: 1200, category: 'Electronics' },\n    { id: 2, name: 'Mechanical Keyboard', price: 150, category: 'Accessories' },\n    { id: 3, name: 'Wireless Mouse', price: 75, category: 'Accessories' },\n    { id: 4, name: 'External SSD 1TB', price: 180, category: 'Storage' },\n    { id: 5, name: 'Gaming Monitor 27', price: 450, category: 'Electronics' },\n    { id: 6, name: 'Webcam HD', price: 50, category: 'Peripherals' },\n    { id: 7, name: 'USB-C Hub', price: 40, category: 'Accessories' },\n    { id: 8, name: 'Laptop Stand', price: 60, category: 'Accessories' },\n  ];\n}\n\n// Helper for normalizing strings for search\nconst normalizeString = str => str.toLowerCase().replace(/\\s/g, '');\n\n// Helper for checking if one string contains another (case & space insensitive)\nconst containsNormalized = (source, query) => {\n  const normalizedSource = normalizeString(source);\n  const normalizedQuery = normalizeString(query);\n  return normalizedSource.includes(normalizedQuery);\n};\n\nfunction queryProducts({ search, sort, minPrice, maxPrice }) {\n  let products = getProducts();\n\n  // 1. Filter by price range\n  products = products.filter(product => {\n    const passesMin = minPrice === undefined || product.price >= minPrice;\n    const passesMax = maxPrice === undefined || product.price <= maxPrice;\n    return passesMin && passesMax;\n  });\n\n  // 2. Filter by search term\n  if (search) {\n    products = products.filter(product => \n      containsNormalized(product.name, search)\n    );\n  }\n\n  // 3. Sort products\n  if (sort) {\n    const isDescending = sort[0] === '-';\n    const sortField = isDescending ? sort.slice(1) : sort;\n\n    products = [...products].sort((a, b) => {\n      const valueA = a[sortField];\n      const valueB = b[sortField];\n\n      if (typeof valueA === 'string' && typeof valueB === 'string') {\n        const comparison = valueA.localeCompare(valueB);\n        return isDescending ? -comparison : comparison;\n      } else {\n        // Assume numeric or comparable non-string values\n        return isDescending ? (valueB - valueA) : (valueA - valueB);\n      }\n    });\n  }\n\n  return products;\n}\n",
          "testCases": [
            "queryProducts({}) should return all 8 products in original order.",
            "queryProducts({ minPrice: 100, maxPrice: 200 }) should return products with price between 100 and 200 (Mechanical Keyboard, External SSD).",
            "queryProducts({ search: 'mouse' }) should return Wireless Mouse.",
            "queryProducts({ search: 'LAp top' }) should return Laptop Pro 15 and Laptop Stand.",
            "queryProducts({ sort: 'price' }) should return products sorted by price ascending (40, 50, 60, 75, 150, 180, 450, 1200).",
            "queryProducts({ sort: '-name' }) should return products sorted by name descending (Wireless Mouse, Webcam HD, USB-C Hub, Mechanical Keyboard, Laptop Stand, Laptop Pro 15, Gaming Monitor 27, External SSD 1TB).",
            "queryProducts({ search: 'keyboard', minPrice: 100, sort: '-price' }) should return Mechanical Keyboard."
          ],
          "hints": [
            "Remember to create a shallow copy of the array before sorting (`[...array]`) if you want to avoid modifying the original array in place.",
            "For the price filter, `minPrice` and `maxPrice` might be `undefined` or `null`. Handle these cases gracefully to skip that specific bound.",
            "The `String.prototype.localeCompare()` method is useful for robust string comparisons in sorting."
          ],
          "tags": [
            "JavaScript",
            "Array Methods",
            "Filtering",
            "Sorting",
            "Data Manipulation",
            "Frontend Logic"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "array_filter",
            "array_sort",
            "string_methods"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "functional_programming",
            "immutability",
            "single_responsibility_principle"
          ]
        },
        {
          "id": "task_fetch_user_photos",
          "title": "Fetch and Correlate User Data with Photos",
          "description": "\nImplement a JavaScript function `getUsersWithPhotos()` that fetches data from two different API endpoints concurrently and then combines them.\n\n**API Endpoints (mocked, but use `fetch`):**\n-   Users: `https://jsonplaceholder.typicode.com/users` (returns `[{ id, name, email, ... }]`)\n-   Photos: `https://jsonplaceholder.typicode.com/photos` (returns `[{ id, albumId, title, url, thumbnailUrl }]`)\n\n**Requirements:**\n1.  Use `Promise.all` to fetch both `users` and `photos` data concurrently.\n2.  Map the `photos` to their respective `users`. Each user should have a new property `photos` which is an array of photo objects where `photo.albumId` matches `user.id`.\n3.  Ensure your solution handles potential network errors gracefully (e.g., if one of the fetches fails, log the error and propagate it).\n4.  Return an array of user objects, each enriched with their `photos` array.\n\n**Note:** A user might not have any photos; in that case, their `photos` array should be empty.\n",
          "difficulty": "medium",
          "startingCode": "const USERS_URL = 'https://jsonplaceholder.typicode.com/users';\nconst PHOTOS_URL = 'https://jsonplaceholder.typicode.com/photos';\n\nasync function getUsersWithPhotos() {\n  // TODO: Fetch users and photos concurrently using Promise.all\n\n  // TODO: Correlate photos with users (each user should have a 'photos' array)\n  // Hint: Consider using a Map for efficient photo lookup by albumId\n\n  // TODO: Handle errors\n\n  return []; // Replace with your implementation\n}\n\n// Example Usage:\n// getUsersWithPhotos()\n//   .then(users => {\n//     console.log('First user with photos:', users[0]);\n//     console.log('Photos for first user:', users[0]?.photos?.length);\n//     console.log('Total users fetched:', users.length);\n//   })\n//   .catch(error => console.error('Failed to get users with photos:', error));\n",
          "solutionCode": "const USERS_URL = 'https://jsonplaceholder.typicode.com/users';\nconst PHOTOS_URL = 'https://jsonplaceholder.typicode.com/photos';\n\nasync function getUsersWithPhotos() {\n  try {\n    // 1. Fetch users and photos concurrently\n    const [users, photos] = await Promise.all([\n      fetch(USERS_URL).then(res => {\n        if (!res.ok) throw new Error(`HTTP error! Users status: ${res.status}`);\n        return res.json();\n      }),\n      fetch(PHOTOS_URL).then(res => {\n        if (!res.ok) throw new Error(`HTTP error! Photos status: ${res.status}`);\n        return res.json();\n      })\n    ]);\n\n    // 2. Correlate photos with users\n    // Create a Map for efficient lookup of photos by albumId\n    const photosByAlbumId = new Map();\n    photos.forEach(photo => {\n      if (!photosByAlbumId.has(photo.albumId)) {\n        photosByAlbumId.set(photo.albumId, []);\n      }\n      photosByAlbumId.get(photo.albumId).push(photo);\n    });\n\n    // Attach photos array to each user object\n    const usersWithPhotos = users.map(user => ({\n      ...user,\n      photos: photosByAlbumId.get(user.id) || [] // If no photos, default to empty array\n    }));\n\n    return usersWithPhotos;\n\n  } catch (error) {\n    console.error(\"Error fetching or correlating data:\", error);\n    throw error; // Re-throw the error to calling context\n  }\n}\n",
          "testCases": [
            "Call `getUsersWithPhotos()` and verify it returns an array.",
            "Check that each user object in the returned array has a `photos` property (which is an array).",
            "Verify that `user.photos` array contains photos whose `albumId` matches `user.id`.",
            "Ensure users with no corresponding photos have an empty `photos` array.",
            "Simulate a network error (e.g., by changing a URL to an invalid one) and verify that the `catch` block is executed and an error is logged/thrown."
          ],
          "hints": [
            "Remember that `fetch` returns a Promise that resolves to a `Response` object, and you'll need to call `.json()` on that response to parse the body.",
            "Use `async/await` for cleaner Promise handling.",
            "A `Map` data structure is excellent for grouping items by a key and then performing efficient lookups."
          ],
          "tags": [
            "JavaScript",
            "Asynchronous",
            "Promises",
            "Fetch API",
            "Promise.all",
            "Data Correlation",
            "API Integration"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "promises_basics",
            "fetch_api",
            "async_await",
            "map_object"
          ],
          "complexity": 8,
          "interviewRelevance": 10,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "error_handling_promises",
            "object_spread_syntax",
            "array_map",
            "array_foreach"
          ]
        }
      ]
    }
  },
  {
    "id": "bbe7a56f-477d-45f5-92a3-25cee6c82a8e",
    "startLine": 15300,
    "endLine": 15399,
    "processedDate": "2025-06-17T14:45:03.904Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_async_data_processing",
          "title": "Asynchronous Data Fetching and Transformation with Promise.all",
          "content": "This section explains how to efficiently fetch data asynchronously and transform it using modern JavaScript features like `async/await` and `Promise.all`, along with array manipulation methods like `filter` and `reduce`.\n\n## Key Concepts\n\n### Asynchronous JavaScript (`async/await`)\n`async/await` is syntactic sugar built on top of Promises, designed to make asynchronous code easier to read and write. An `async` function always returns a Promise. The `await` keyword can only be used inside an `async` function and pauses the execution of the `async` function until the Promise is settled (resolved or rejected).\n\n### Parallel Promise Execution (`Promise.all`)\n`Promise.all` is a static method on the `Promise` object that takes an iterable of Promises (e.g., an array) as input. It returns a single Promise that fulfills when all of the input Promises have fulfilled, or rejects if any of the input Promises reject. The fulfillment value is an array of the fulfillment values of the input Promises, in the same order as the input.\n\n`Promise.all` is crucial for scenarios where multiple independent asynchronous operations need to complete before proceeding, optimizing performance by running them concurrently rather than sequentially.\n\n### Array Manipulation (`filter`, `reduce`)\n*   **`Array.prototype.filter()`**: Creates a new array with all elements that pass the test implemented by the provided function. It's used here to efficiently select comments belonging to a specific post.\n*   **`Array.prototype.reduce()`**: Executes a user-supplied 'reducer' callback function on each element of the array, in order, passing in the return value from the calculation on the preceding element. The final result of running the reducer across all elements of the array is a single value. It's used for aggregating or transforming data into a single, comprehensive structure (e.g., an object mapping posts to their comments).\n\n### Error Handling (`try...catch`)\nWhen working with `async/await`, `try...catch` blocks are the standard way to handle potential errors. Any rejected Promise awaited within a `try` block will throw an error that can be caught by the corresponding `catch` block.",
          "examples": [
            {
              "id": "example_async_data_processing_1",
              "title": "Fetch and Map Data Example",
              "code": "/**\n * Mock function to simulate fetching all posts from an API.\n * @returns {Promise<Array<{id: number, title: string, body: string}>>}\n */\nconst fetchAllPosts = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 1, title: 'Post 1', body: 'Content of post 1' },\n        { id: 2, title: 'Post 2', body: 'Content of post 2' }\n      ]);\n    }, 100);\n  });\n};\n\n/**\n * Mock function to simulate fetching all comments from an API.\n * @returns {Promise<Array<{id: number, postId: number, body: string}>>}\n */\nconst fetchAllComments = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 101, postId: 1, body: 'Comment for post 1' },\n        { id: 102, postId: 2, body: 'Comment for post 2' },\n        { id: 103, postId: 1, body: 'Another comment for post 1' }\n      ]);\n    }, 150);\n  });\n};\n\nconst fetchAndMapData = async () => {\n  try {\n    // Fetch both posts and comments in parallel using Promise.all\n    const [posts, comments] = await Promise.all([\n      fetchAllPosts(),\n      fetchAllComments()\n    ]);\n\n    // Function to get all comments for a specific post using filter\n    const getCommentsForPost = postId =>\n      comments.filter(comment => comment.postId === postId);\n\n    // Map posts to their comments using reduce\n    const postsWithComments = posts.reduce((result, post) => {\n      result[post.id] = {\n        ...post,\n        comments: getCommentsForPost(post.id)\n      };\n      return result;\n    }, {}); // Initialize accumulator as an empty object\n\n    return postsWithComments;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return {}; // Return an empty object on error\n  }\n};\n\n// Usage example\nfetchAndMapData().then(data => {\n  console.log('Posts with comments:', data);\n  /*\n  Expected output:\n  {\n    '1': {\n      id: 1,\n      title: 'Post 1',\n      body: 'Content of post 1',\n      comments: [\n        { id: 101, postId: 1, body: 'Comment for post 1' },\n        { id: 103, postId: 1, body: 'Another comment for post 1' }\n      ]\n    },\n    '2': {\n      id: 2,\n      title: 'Post 2',\n      body: 'Content of post 2',\n      comments: [\n        { id: 102, postId: 2, body: 'Comment for post 2' }\n      ]\n    }\n  }\n  */\n});\n",
              "explanation": "This example demonstrates a common pattern in web development: fetching multiple related pieces of data from different endpoints and then combining them into a single, meaningful structure. `Promise.all` ensures that both `fetchAllPosts` and `fetchAllComments` run concurrently, significantly reducing the total waiting time compared to fetching them sequentially. Once both promises resolve, the `posts` and `comments` arrays are available. The `getCommentsForPost` helper uses `filter` to efficiently find relevant comments, and finally, `reduce` is used to transform the `posts` array into an object where each post is keyed by its `id` and augmented with its corresponding comments. Error handling is included via a `try...catch` block to gracefully manage network or data fetching failures.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "asynchronous-javascript",
            "promises",
            "async-await",
            "array-methods",
            "data-transformation",
            "error-handling",
            "frontend-architecture"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "Promises",
            "Functions",
            "Objects",
            "Arrays"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "complex-api-integration",
            "frontend-performance-optimization",
            "state-management"
          ]
        },
        {
          "id": "theory_prototypes_and_extensions",
          "title": "JavaScript Prototypes and Extending Built-in Objects",
          "content": "JavaScript is a prototype-based language, meaning objects inherit properties and methods from other objects. This mechanism is fundamental to how inheritance works in JavaScript.\n\n## Key Concepts\n\n### Prototypes and Prototype Chain\nEvery JavaScript object has a `[[Prototype]]` (internal slot, exposed as `__proto__` in many environments) which links to another object. This linked object is its prototype. When you try to access a property or method on an object, if it's not found directly on the object, JavaScript looks it up on the object's `[[Prototype]]`, then on *that* prototype's `[[Prototype]]`, and so on, forming a 'prototype chain'. This chain continues until it reaches `Object.prototype`, which has `null` as its prototype.\n\n### `String.prototype` and Other Built-in Prototypes\nBuilt-in objects like `String`, `Array`, `Number`, `Function`, etc., also have prototypes. For instance, `String.prototype` contains all the default methods available on string instances (e.g., `toUpperCase()`, `substring()`, `length`). When you create a string like `let s = \"hello\";`, `s` inherits properties and methods from `String.prototype`.\n\n### Extending Built-in Prototypes\nYou can add new methods or properties to `String.prototype` (or any other built-in prototype), making them available to all instances of that type. This is demonstrated by adding `getHashCode` to `String.prototype`.\n\n```javascript\nif (!String.prototype.getHashCode) {\n  String.prototype.getHashCode = function() {\n    // Implementation here\n  };\n}\n```\n\n**Considerations and Best Practices for Extending Built-ins:**\n*   **Global Pollution**: Modifying built-in prototypes can 'pollute' the global namespace and conflict with future JavaScript versions or other libraries that might add methods with the same name. This is why the `if (!String.prototype.getHashCode)` check is crucial to prevent overwriting existing methods.\n*   **Maintainability**: It can make code harder to debug and maintain, as it changes the fundamental behavior of widely used objects.\n*   **Non-enumerable Properties**: For cleaner extensions, especially in shared libraries, it's often better to make new properties non-enumerable using `Object.defineProperty` to prevent them from showing up in `for...in` loops or `Object.keys()`.\n\n```javascript\nif (!String.prototype.getHashCode) {\n  Object.defineProperty(String.prototype, 'getHashCode', {\n    value: function() {\n      let hash = 0;\n      if (this.length === 0) return hash;\n      for (let i = 0; i < this.length; i++) {\n        const char = this.charCodeAt(i);\n        hash = ((hash << 5) - hash) + char;\n        hash = hash & hash; // Convert to 32bit integer\n      }\n      return hash;\n    },\n    writable: true,     // Can be reassigned\n    configurable: true, // Can be deleted or its attributes changed\n    enumerable: false   // Crucial: not iterable with for...in or Object.keys\n  });\n}\n```\n\n### `this` Keyword in Prototype Methods\nInside a method added to a prototype (e.g., `String.prototype.getHashCode`), the `this` keyword refers to the *instance* of the object on which the method was invoked. In the `getHashCode` example, `this` refers to the specific string instance (e.g., `\"sample\"`) for which the hash code is being calculated.",
          "examples": [
            {
              "id": "example_prototype_extension_1",
              "title": "Implementing getHashCode on String Prototype",
              "code": "if (!String.prototype.getHashCode) {\n  /**\n   * Calculates a simple hash code for a string.\n   * This method will be available on all string instances.\n   * @returns {number} The hash code.\n   */\n  String.prototype.getHashCode = function() {\n    let hash = 0;\n    // If the string is empty, return 0 as its hash\n    if (this.length === 0) return hash;\n    \n    // Iterate through each character of the string\n    for (let i = 0; i < this.length; i++) {\n      // Get the Unicode value of the character\n      const char = this.charCodeAt(i);\n      // Update the hash using a common hashing algorithm bitwise operations\n      // (hash << 5) - hash is equivalent to hash * 31\n      hash = ((hash << 5) - hash) + char;\n      // Convert to 32-bit integer (effectively removes bits beyond 32nd, handling overflow)\n      hash = hash & hash;\n    }\n    \n    return hash;\n  };\n}\n\nlet s1 = \"sample\";\nlet s2 = \"another string\";\nlet s3 = \"sample\"; // Same string as s1\n\nconsole.log(`Hash for \"${s1}\": ${s1.getHashCode()}`); // e.g., -1320499623\nconsole.log(`Hash for \"${s2}\": ${s2.getHashCode()}`); // e.g., 2050963363\nconsole.log(`Hash for \"${s3}\": ${s3.getHashCode()}`); // e.g., -1320499623 (same as s1)\n\n// Demonstrating the 'this' context\nconst myString = \"Hello\";\nconst getMyStringHash = String.prototype.getHashCode.bind(myString);\nconsole.log(`Hash using bind: ${getMyStringHash()}`); // Same hash for \"Hello\"\n",
              "explanation": "This example shows how to extend `String.prototype` with a custom `getHashCode` method. The `if (!String.prototype.getHashCode)` check is crucial to ensure that the method is only added if it doesn't already exist, preventing potential conflicts. Inside the `getHashCode` function, `this` refers to the actual string instance (e.g., `\"sample\"`) on which the method is called. The hash calculation uses bitwise operations, a common technique for performance in such algorithms. The example also briefly shows `bind` to explicitly set `this`, though typically prototype methods are called directly on the instance.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "prototypes",
            "prototype-chain",
            "object-oriented-javascript",
            "inheritance",
            "string-methods",
            "this-keyword",
            "javascript-internals",
            "object-defineProperty"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "Objects",
            "Functions",
            "This-keyword"
          ],
          "complexity": 8,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "custom-data-structures",
            "library-development",
            "understanding-frameworks"
          ]
        },
        {
          "id": "theory_type_coercion_and_operators",
          "title": "JavaScript Type Coercion and Operator Behavior",
          "content": "JavaScript is a loosely typed language, which means variables do not need to be declared with a specific type. This flexibility leads to 'type coercion', where JavaScript automatically converts values from one type to another when operations are performed.\n\n## Key Concepts\n\n### Implicit Type Coercion\nImplicit coercion happens automatically when an operator is used with values of different types. JavaScript attempts to make sense of the operation by converting one or both operands to a compatible type.\n\n### The `+` Operator\nThe `+` operator is unique because it performs both numeric addition and string concatenation. Its behavior depends on the types of its operands:\n*   **If either operand is a string**, JavaScript will convert the other operand to a string and perform string concatenation.\n*   **Otherwise (if neither operand is a string)**, JavaScript will convert both operands to numbers (if they aren't already) and perform numeric addition.\n\n**Rules for Conversion to Primitive (ToPrimitive)**:\nWhen a non-primitive value (like an object or array) is used in a context requiring a primitive, JavaScript calls its `Symbol.toPrimitive` method, or `valueOf()`, or `toString()` to get a primitive representation.\n\n**Rules for Conversion to Number (ToNumber)**:\n*   `true` becomes `1`.\n*   `false` becomes `0`.\n*   `null` becomes `0`.\n*   `undefined` becomes `NaN`.\n*   Strings are parsed as numbers if possible (e.g., `'10'` becomes `10`), otherwise `NaN` (e.g., `'abc'` becomes `NaN`).\n\n**Rules for Conversion to String (ToString)**:\n*   `null` becomes `'null'`.\n*   `undefined` becomes `'undefined'`.\n*   `true` becomes `'true'`.\n*   `false` becomes `'false'`.\n*   Numbers become their string representation (e.g., `123` becomes `'123'`).\n*   Objects/Arrays become `[object Object]` or comma-separated string for arrays.\n\n### Comparison Operators (`>`, `<`, `>=`, `<=`, `==`)\n*   **String Comparison**: When comparing two strings, JavaScript performs a lexicographical comparison, character by character, based on their Unicode (UTF-16) values. This means '2' > '3' is false because '2' comes before '3' in Unicode, but 'two' > 'three' is true because 'w' (119) comes after 'h' (104).\n*   **Mixed Type Comparison (`==`)**: The loose equality operator `==` performs type coercion before comparison. For example, `1 == '1'` is true because `'1'` is coerced to the number `1`. This is why it's generally recommended to use `===` (strict equality) which does not perform type coercion and checks both value and type.",
          "examples": [
            {
              "id": "example_type_coercion_1",
              "title": "Various Operations Demonstrating Type Coercion",
              "code": "// Numeric addition (true is coerced to 1)\nconsole.log(1 + true);        // Output: 2 \n\n// Numeric addition (both true are coerced to 1)\nconsole.log(true + true);     // Output: 2\n\n// String concatenation (true is coerced to 'true')\nconsole.log('1' + true);      // Output: '1true'\n\n// String comparison (lexicographical: '2' comes before '3')\nconsole.log('2' > '3');       // Output: false \n\n// String comparison (lexicographical: 't' == 't', 'w' > 'h')\nconsole.log('two' > 'three'); // Output: true \n\n// More examples\nconsole.log(10 + 'abc');      // Output: '10abc'\nconsole.log('5' * '2');       // Output: 10 (Multiplication operator coerces to Number)\nconsole.log(5 + null);        // Output: 5 (null is coerced to 0)\nconsole.log(5 + undefined);   // Output: NaN (undefined is coerced to NaN)\n",
              "explanation": "These examples illustrate the key behaviors of JavaScript operators with different data types. The `+` operator demonstrates its dual role as an adder and concatenator, prioritizing string concatenation if any operand is a string. When neither is a string, it defaults to numeric addition, coercing booleans (`true` to 1) or `null` to numbers. Comparison operators like `>` perform lexicographical comparison for strings and numeric comparison for numbers after potential coercion. Understanding these rules is crucial to avoid unexpected outcomes in JavaScript.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "type-coercion",
            "javascript-fundamentals",
            "operators",
            "comparison",
            "data-types",
            "quirks"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "Data-types",
            "Operators"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "beginner",
          "requiredFor": [
            "debugging-javascript",
            "writing-robust-code"
          ]
        },
        {
          "id": "theory_primitives_references_this",
          "title": "JavaScript Variable Handling: Primitives, References, and 'this' Context",
          "content": "Understanding how JavaScript handles different data types—specifically, the distinction between primitive values and reference values—is fundamental to predicting variable behavior. Equally important is grasping the dynamic nature of the `this` keyword.\n\n## Key Concepts\n\n### Primitive Values\nPrimitive values are data that are not objects and have no methods. There are seven primitive data types:\n*   `string`\n*   `number`\n*   `boolean`\n*   `symbol`\n*   `null`\n*   `undefined`\n*   `bigint`\n\nWhen a primitive value is assigned to a variable, the value itself is stored in that variable. When you assign one primitive variable to another, a *copy* of the value is made. Subsequent changes to one variable do not affect the other.\n\n### Reference Values (Objects)\nReference values are objects, which include plain objects, arrays, and functions. Unlike primitives, reference values are not stored directly in the variable. Instead, the variable stores a *reference* (a pointer) to the memory location where the object is stored.\n\nWhen you assign one reference variable to another, the *reference* is copied, not the object itself. This means both variables point to the *same* object in memory. Therefore, if you modify the object through one variable, those changes will be visible when accessed through the other variable.\n\n### The `this` Keyword\nThe `this` keyword in JavaScript is a special identifier that refers to the context in which a function is executed. Its value is determined dynamically at runtime, depending on *how* the function is called, rather than where it's defined (lexical scope), with the exception of arrow functions.\n\n**Common `this` Bindings:**\n1.  **Global Context**: When `this` is used outside of any function, or inside a regular function called directly (not as a method), `this` refers to the global object (`window` in browsers, `global` in Node.js). In strict mode, `this` inside a function called directly is `undefined`.\n    ```javascript\n    console.log(this); // In browser: Window object\n    function showThis() { console.log(this); }\n    showThis(); // In browser (non-strict): Window object; (strict): undefined\n    ```\n2.  **Method Context**: When a function is called as a method of an object, `this` refers to the object on which the method was called.\n    ```javascript\n    const person = {\n      name: 'Alice',\n      greet: function() {\n        console.log(`Hello, my name is ${this.name}`);\n      }\n    };\n    person.greet(); // `this` is `person` object, output: 'Hello, my name is Alice'\n    ```\n3.  **Constructor Context**: When a function is used as a constructor with the `new` keyword, `this` refers to the newly created instance of the object.\n    ```javascript\n    function Car(make) {\n      this.make = make;\n    }\n    const myCar = new Car('Toyota');\n    console.log(myCar.make); // `this` is `myCar` instance, output: 'Toyota'\n    ```\n4.  **Explicit Binding (`call`, `apply`, `bind`)**: These methods allow you to explicitly set the value of `this` for a function call.\n    ```javascript\n    function sayHello() { console.log(`Hello, ${this.name}`); }\n    const user = { name: 'Bob' };\n    sayHello.call(user); // `this` is `user`, output: 'Hello, Bob'\n    ```\n5.  **Arrow Functions**: Arrow functions do not have their own `this` binding. Instead, `this` inside an arrow function is lexically scoped; it inherits `this` from the enclosing (outer) lexical context at the time the arrow function is *defined*, not when it's called.\n    ```javascript\n    const user = {\n      name: 'Charlie',\n      greet: function() {\n        setTimeout(() => {\n          console.log(`Hello, ${this.name}`); // `this` here refers to `user` (inherited from `greet`)\n        }, 100);\n      }\n    };\n    user.greet(); // `this` correctly points to `user`\n    ```",
          "examples": [
            {
              "id": "example_primitives_references_this_1",
              "title": "Primitive vs Reference Values",
              "code": "// Question 1: Primitive value behavior\nvar x_prim = 1;\nvar y_prim = x_prim; // y_prim gets a copy of the value 1\nx_prim = 0; // x_prim changes, y_prim remains 1\nconsole.log(x_prim, y_prim); // Output: 0, 1 (y_prim keeps original value)\n\n// Question 2: Reference value behavior (Arrays are objects)\nvar x_ref = [1];\nvar y_ref = x_ref; // y_ref gets a copy of the reference (pointer) to the array [1]\nx_ref = []; // x_ref now points to a NEW empty array. y_ref still points to the ORIGINAL [1]\nconsole.log(x_ref, y_ref); // Output: [], [1] (y_ref still refers to original array)\n\n// What if we modify the content of the referenced object?\nvar a_ref = { val: 1 };\nvar b_ref = a_ref;\na_ref.val = 2; // Modify the object through a_ref\nconsole.log(a_ref.val, b_ref.val); // Output: 2, 2 (Both variables see the change)\n\n",
              "explanation": "This example vividly illustrates the core difference between primitive and reference values in JavaScript. For primitives, assignment creates a distinct copy, so changes to one variable don't affect the other. For objects (including arrays), assignment copies the reference, meaning both variables point to the same underlying data. If the object's content is modified through one variable, those changes are reflected when accessed through the other, as they are indeed the same object.",
              "language": "typescript"
            },
            {
              "id": "example_primitives_references_this_2",
              "title": "'this' Context Demonstration",
              "code": "// Global context\nfunction Abc() {\n  console.log('Inside Abc (non-strict mode):', this);\n}\nAbc(); // In browser: Window object; In Node: global object\n\n// Strict mode global context\n(function() {\n  'use strict';\n  function AbcStrict() {\n    console.log('Inside AbcStrict (strict mode):', this);\n  }\n  AbcStrict(); // Output: undefined\n})();\n\n// Method context\nconst myObject = {\n  value: 42,\n  getValue: function() {\n    console.log('Inside myObject.getValue:', this.value);\n  }\n};\nmyObject.getValue(); // Output: 42 (this is myObject)\n\n// Constructor context\nfunction Person(name) {\n  this.name = name;\n  this.greeting = function() {\n    console.log(`Hello from ${this.name}`);\n  };\n}\nconst person1 = new Person('Alice');\nperson1.greeting(); // Output: Hello from Alice (this is person1)\n\n// Explicit binding with .call()\nfunction displayValue() {\n  console.log('displayValue:', this.data);\n}\nconst dataObject = { data: 'important info' };\ndisplayValue.call(dataObject); // Output: important info (this is dataObject)\n\n// Arrow function context (lexical 'this')\nconst arrowObject = {\n  id: 'arrowObj',\n  delayLog: function() {\n    setTimeout(() => {\n      console.log('Inside arrow function:', this.id);\n    }, 100);\n  }\n};\narrowObject.delayLog(); // Output: arrowObj (this is arrowObject, captured from delayLog's scope)\n",
              "explanation": "This example comprehensively demonstrates the various ways the `this` keyword is bound in JavaScript. It covers global execution context (both non-strict and strict mode), method invocation, constructor calls, explicit binding using `.call()`, and the lexical `this` behavior of arrow functions. Understanding these different binding rules is crucial for predicting and controlling function behavior, especially in complex applications and when dealing with callbacks or event handlers.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "primitives",
            "references",
            "this-keyword",
            "scope",
            "javascript-fundamentals",
            "memory-management",
            "function-context",
            "data-types"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "Variables",
            "Data-types",
            "Functions",
            "Objects"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "object-oriented-javascript",
            "functional-programming",
            "dom-manipulation"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_async_data_processing_1",
          "topic": "Asynchronous Operations with Promise.all",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following JavaScript code snippet. What is the primary benefit of using `Promise.all` in the `fetchAndMapData` function?",
          "answer": "It fetches posts and comments concurrently, improving performance.",
          "options": [
            "It fetches posts first, then comments, ensuring data consistency.",
            "It fetches posts and comments concurrently, improving performance.",
            "It automatically retries fetching if an error occurs.",
            "It ensures that comments are always mapped to the correct post ID without extra logic."
          ],
          "analysisPoints": [
            "`Promise.all` executes promises in parallel, not sequentially.",
            "Concurrency leads to reduced overall execution time, hence better performance.",
            "`Promise.all` itself does not provide retry mechanisms; that needs to be implemented separately.",
            "The mapping logic (filter/reduce) is separate from `Promise.all`'s role in concurrency."
          ],
          "keyConcepts": [
            "Promise.all",
            "Concurrency vs. Sequential execution",
            "Performance optimization",
            "Asynchronous JavaScript"
          ],
          "evaluationCriteria": [
            "Understanding of Promise.all's core functionality.",
            "Ability to identify performance implications of concurrent operations.",
            "Distinguishing Promise.all's role from other features."
          ],
          "example": "```typescript\nconst fetchAndMapData = async () => {\n  // ... (simplified)\n  const [posts, comments] = await Promise.all([\n    fetchAllPosts(),\n    fetchAllComments()\n  ]);\n  // ...\n};\n```",
          "tags": [
            "promise.all",
            "async-await",
            "performance",
            "concurrency",
            "mcq"
          ],
          "prerequisites": [
            "Promises",
            "Async/Await"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_async_data_processing_2",
          "topic": "Error Handling in Async/Await with Promise.all",
          "level": "medium",
          "type": "open",
          "question": "In the `fetchAndMapData` function, how would the error handling behavior change if one of the promises passed to `Promise.all` (e.g., `fetchAllPosts()`) rejects? Describe the expected outcome and how the `try...catch` block handles it.",
          "answer": "If any of the promises passed to `Promise.all` rejects, `Promise.all` itself immediately rejects with the reason of the first promise that rejected, regardless of the status of other promises. In the `fetchAndMapData` function, this rejection would be caught by the `try...catch` block surrounding the `await Promise.all(...)` call. The `catch (error)` block would execute, logging the error and returning an empty object (`{}`). The application would then continue execution from the point where `fetchAndMapData().then(...)` was called, but with an empty data set, preventing a crash.",
          "analysisPoints": [
            "Knowledge of `Promise.all`'s fail-fast behavior.",
            "Understanding of `try...catch` with `async/await`.",
            "Ability to trace execution flow on error.",
            "Consequences for the return value."
          ],
          "keyConcepts": [
            "Promise.all rejection",
            "Async/Await error handling",
            "Try...catch block",
            "Promise states"
          ],
          "evaluationCriteria": [
            "Accuracy in describing `Promise.all` error propagation.",
            "Correct understanding of `try...catch` in async functions.",
            "Clarity of explanation."
          ],
          "example": null,
          "tags": [
            "promise.all",
            "error-handling",
            "async-await",
            "open-ended"
          ],
          "prerequisites": [
            "Promises",
            "Error Handling"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_async_data_processing_3",
          "topic": "Array.prototype.reduce for Data Transformation",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of `Array.prototype.reduce` in the `fetchAndMapData` function's data transformation step?",
          "answer": "To transform an array of posts into an object where each post is a property keyed by its ID, and augmented with its related comments.",
          "analysisPoints": [
            "Recall `reduce`'s role in aggregation/transformation.",
            "Identify the specific transformation being performed."
          ],
          "keyConcepts": [
            "Array.prototype.reduce",
            "Data transformation",
            "Aggregation"
          ],
          "evaluationCriteria": [
            "Ability to quickly recall the purpose of `reduce` in a specific context."
          ],
          "example": null,
          "tags": [
            "array-methods",
            "reduce",
            "data-transformation",
            "flashcard"
          ],
          "prerequisites": [
            "Arrays",
            "Functions"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_async_data_processing_4",
          "topic": "Async/Await Best Practices",
          "level": "hard",
          "type": "code",
          "question": "Refactor the `fetchAndMapData` function. Instead of fetching all comments and then filtering them, imagine there's a new API endpoint `fetchCommentsForPost(postId)`. Modify `fetchAndMapData` to use this new endpoint for each post, while still aiming for efficient execution. Consider how to handle errors if a specific `fetchCommentsForPost` call fails for one post, without stopping the entire process for other posts.",
          "answer": "```typescript\n/**\n * Mock function for fetching all posts.\n */\nconst fetchAllPosts = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 1, title: 'Post 1' },\n        { id: 2, title: 'Post 2' },\n        { id: 3, title: 'Post 3' }\n      ]);\n    }, 100);\n  });\n};\n\n/**\n * Mock function for fetching comments for a specific post.\n * Simulate a failure for postId 2.\n */\nconst fetchCommentsForPost = (postId) => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (postId === 2) {\n        reject(new Error(`Failed to fetch comments for post ${postId}`));\n      } else if (postId === 1) {\n        resolve([{ id: 101, postId: 1, body: 'C1 for P1' }, { id: 102, postId: 1, body: 'C2 for P1' }]);\n      } else if (postId === 3) {\n        resolve([{ id: 103, postId: 3, body: 'C1 for P3' }]);\n      } else {\n        resolve([]);\n      }\n    }, 150);\n  });\n};\n\nconst fetchAndMapDataRefactored = async () => {\n  try {\n    const posts = await fetchAllPosts();\n\n    // Create an array of promises for fetching comments for each post\n    // Use .then/.catch for each individual promise to handle errors gracefully\n    const postsWithCommentPromises = posts.map(async post => {\n      try {\n        const comments = await fetchCommentsForPost(post.id);\n        return { ...post, comments };\n      } catch (error) {\n        console.warn(`Warning: Could not fetch comments for Post ID ${post.id}. Error: ${error.message}`);\n        return { ...post, comments: [] }; // Return post with empty comments array on error\n      }\n    });\n\n    // Wait for all individual post-comment mapping promises to settle\n    const postsWithComments = await Promise.all(postsWithCommentPromises);\n\n    // Transform the array into an object keyed by post ID (optional, if original structure desired)\n    return postsWithComments.reduce((acc, post) => {\n      acc[post.id] = post;\n      return acc;\n    }, {});\n\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return {};\n  }\n};\n\n// Usage\nfetchAndMapDataRefactored().then(data => {\n  console.log('Refactored Posts with comments:', data);\n});\n```",
          "analysisPoints": [
            "Correct use of `map` to create an array of promises.",
            "Proper use of `Promise.all` to wait for all *mapped* promises.",
            "Handling individual promise rejections using `try...catch` inside the `map` callback to prevent `Promise.all` from failing if one comment fetch fails.",
            "Returning a resolved value (e.g., post with empty comments) from the inner `catch` block to ensure `Promise.all` receives only resolved promises.",
            "Maintaining the desired data structure after transformation."
          ],
          "keyConcepts": [
            "Promise.all",
            "Array.prototype.map",
            "Async/Await",
            "Error handling patterns",
            "Resilience"
          ],
          "evaluationCriteria": [
            "Ability to refactor and optimize asynchronous flows.",
            "Understanding of `Promise.allSettled` vs `Promise.all` for partial failures (or how to simulate `allSettled` behavior with `Promise.all`).",
            "Correct error handling for individual items in a parallel fetch.",
            "Code clarity and efficiency."
          ],
          "example": null,
          "tags": [
            "async-await",
            "promise.all",
            "error-handling",
            "refactoring",
            "code-challenge",
            "hard"
          ],
          "prerequisites": [
            "Promises",
            "Array.prototype.map",
            "Async/Await",
            "Error Handling"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_prototypes_1",
          "topic": "Extending String.prototype",
          "level": "easy",
          "type": "flashcard",
          "question": "What is `String.prototype` in JavaScript, and what is its purpose when defining a method like `getHashCode`?",
          "answer": "`String.prototype` is the object that all `String` instances inherit properties and methods from. Its purpose, when defining `getHashCode`, is to make the `getHashCode` method available directly on all JavaScript string instances, allowing them to call `\"mystring\".getHashCode()`.",
          "analysisPoints": [
            "Definition of prototype.",
            "Role of `String.prototype` in inheritance.",
            "How it enables method access on instances."
          ],
          "keyConcepts": [
            "Prototypes",
            "Prototype chain",
            "String.prototype",
            "Inheritance"
          ],
          "evaluationCriteria": [
            "Quick recall of prototype definition and function."
          ],
          "example": null,
          "tags": [
            "prototypes",
            "string.prototype",
            "flashcard",
            "inheritance"
          ],
          "prerequisites": [
            "Objects",
            "Basic JavaScript"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_prototypes_2",
          "topic": "this keyword in Prototype Methods",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `getHashCode` method added to `String.prototype`. What does the `this` keyword refer to inside the `getHashCode` function?\n\n```javascript\nif (!String.prototype.getHashCode) {\n  String.prototype.getHashCode = function() {\n    // What is 'this' here?\n    return this.length;\n  };\n}\n\nlet myString = \"example\";\nmyString.getHashCode();\n```",
          "answer": "The string instance (e.g., \"example\") on which the method was called.",
          "options": [
            "The `String` constructor function.",
            "The `String.prototype` object itself.",
            "The global window object (in browsers) or undefined (in strict mode).",
            "The string instance (e.g., \"example\") on which the method was called."
          ],
          "analysisPoints": [
            "Method invocation rule for `this`.",
            "Context of `this` in prototype methods."
          ],
          "keyConcepts": [
            "This keyword",
            "Prototype methods",
            "Function context"
          ],
          "evaluationCriteria": [
            "Correct understanding of `this` binding in method calls.",
            "Distinguishing between prototype object and instance."
          ],
          "example": null,
          "tags": [
            "this-keyword",
            "prototypes",
            "mcq",
            "function-context"
          ],
          "prerequisites": [
            "This keyword",
            "Prototypes"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_prototypes_3",
          "topic": "Pros and Cons of Extending Built-in Prototypes",
          "level": "medium",
          "type": "open",
          "question": "While extending built-in prototypes like `String.prototype` provides convenience, it also has potential drawbacks. Discuss at least two pros and two cons of extending built-in JavaScript prototypes in a production environment.",
          "answer": "**Pros:**\n1.  **Convenience and Readability**: It makes methods available directly on instances, leading to more concise and readable code (e.g., `myString.getHashCode()` instead of `stringUtils.getHashCode(myString)`).\n2.  **Performance (sometimes)**: For very frequently used utility functions, adding them to the prototype can sometimes offer slight performance benefits by avoiding utility function calls with explicit arguments.\n\n**Cons:**\n1.  **Global Pollution/Conflicts**: Modifying global prototypes can lead to name collisions with future JavaScript versions or other libraries that might define methods with the same name, leading to unexpected behavior or breaking changes.\n2.  **Debugging Difficulty**: It can make code harder to debug because the source of a method might not be immediately obvious, and its behavior could be altered by different parts of the codebase.\n3.  **Maintainability and Predictability**: It can make the codebase less predictable and harder to maintain for new developers who might not expect built-in objects to have custom methods.",
          "analysisPoints": [
            "Ability to articulate the benefits of prototype extension.",
            "Awareness of the risks associated with modifying global objects.",
            "Consideration of maintainability and collaboration in a team setting."
          ],
          "keyConcepts": [
            "Prototypes",
            "Global scope",
            "Maintainability",
            "Code organization",
            "Best practices"
          ],
          "evaluationCriteria": [
            "Balance of arguments for and against.",
            "Clarity and depth of explanation.",
            "Identification of practical implications."
          ],
          "example": null,
          "tags": [
            "prototypes",
            "best-practices",
            "open-ended",
            "design-patterns"
          ],
          "prerequisites": [
            "Prototypes"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_type_coercion_1",
          "topic": "Type Coercion with '+' operator",
          "level": "easy",
          "type": "mcq",
          "question": "What will be the output of `console.log('10' + 5 + true);` in JavaScript?",
          "answer": "'105true'",
          "options": [
            "15",
            "16",
            "'105true'",
            "NaN"
          ],
          "analysisPoints": [
            "The `+` operator performs left-to-right evaluation.",
            "If a string is encountered, subsequent `+` operations result in string concatenation.",
            "Number `5` is coerced to `'5'`, and boolean `true` is coerced to `'true'`."
          ],
          "keyConcepts": [
            "Type coercion",
            "Plus operator behavior",
            "String concatenation",
            "Order of operations"
          ],
          "evaluationCriteria": [
            "Understanding of step-by-step type coercion.",
            "Knowledge of `+` operator rules."
          ],
          "example": "```javascript\nconsole.log('10' + 5 + true); \n// Step 1: '10' + 5  -> '105' (string concatenation because '10' is a string)\n// Step 2: '105' + true -> '105true' (string concatenation because '105' is a string)\n```",
          "tags": [
            "type-coercion",
            "operators",
            "mcq",
            "javascript-fundamentals"
          ],
          "prerequisites": [
            "Data types",
            "Operators"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_type_coercion_2",
          "topic": "String vs Numeric Comparison",
          "level": "medium",
          "type": "mcq",
          "question": "What is the output of the following JavaScript code snippets?\n\n```javascript\nconsole.log(10 > '9');\nconsole.log('10' > '9');\n```",
          "answer": "true\nfalse",
          "options": [
            "true\ntrue",
            "false\nfalse",
            "true\nfalse",
            "false\ntrue"
          ],
          "analysisPoints": [
            "For `10 > '9'`, the string `'9'` is coerced to a number `9` before comparison, resulting in `10 > 9` which is `true`.",
            "For `'10' > '9'`, both are strings, so a lexicographical comparison occurs. Character '1' is compared to '9'. '1' has a lower Unicode value than '9', so '10' is considered 'less than' '9' in string comparison. Thus, `'10' > '9'` is `false`."
          ],
          "keyConcepts": [
            "Type coercion",
            "Comparison operators",
            "Numeric comparison",
            "Lexicographical string comparison"
          ],
          "evaluationCriteria": [
            "Ability to differentiate between numeric and string comparison rules.",
            "Understanding of implicit type coercion in comparison operations."
          ],
          "example": null,
          "tags": [
            "type-coercion",
            "operators",
            "comparison",
            "mcq"
          ],
          "prerequisites": [
            "Data types",
            "Operators"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_type_coercion_3",
          "topic": "Falsy Values and Coercion",
          "level": "easy",
          "type": "flashcard",
          "question": "What value does `!!\"\"` evaluate to in JavaScript, and why?",
          "answer": "`false`. The empty string `\"\"` is a 'falsy' value. The first `!` converts it to `true`, and the second `!` then converts `true` to `false`.",
          "analysisPoints": [
            "Recall common falsy values.",
            "Understand `!` operator behavior (coercion to boolean and negation)."
          ],
          "keyConcepts": [
            "Type coercion",
            "Falsy values",
            "Boolean operator"
          ],
          "evaluationCriteria": [
            "Quick recall of boolean coercion rules for falsy values."
          ],
          "example": null,
          "tags": [
            "type-coercion",
            "falsy",
            "boolean",
            "flashcard"
          ],
          "prerequisites": [
            "Data types",
            "Operators"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_primitives_references_1",
          "topic": "Primitive vs. Reference Assignment",
          "level": "medium",
          "type": "mcq",
          "question": "What will be the output of the following JavaScript code snippets?\n\n```javascript\n// Snippet 1: Primitive vs reference values\nvar x1 = 10;\nvar y1 = x1;\nx1 = 20;\nconsole.log(x1, y1);\n\n// Snippet 2: Array reference\nvar x2 = [1, 2];\nvar y2 = x2;\nx2.push(3);\nconsole.log(x2, y2);\n```",
          "answer": "20 10\n[1, 2, 3] [1, 2, 3]",
          "options": [
            "20 10\n[1, 2, 3] [1, 2, 3]",
            "20 10\n[1, 2, 3] [1, 2]",
            "10 20\n[1, 2] [1, 2, 3]",
            "20 20\n[1, 2, 3] [1, 2, 3]"
          ],
          "analysisPoints": [
            "In Snippet 1, `x1` and `y1` are primitives. `y1` gets a copy of `x1`'s *value*. Changing `x1` does not affect `y1`.",
            "In Snippet 2, `x2` and `y2` are references (arrays). `y2` gets a copy of `x2`'s *reference* (pointer). Both point to the *same* array in memory. Modifying the array through `x2` (e.g., `push`) affects the array that `y2` also points to."
          ],
          "keyConcepts": [
            "Primitive values",
            "Reference values",
            "Pass-by-value",
            "Pass-by-reference (for assignment/object content)"
          ],
          "evaluationCriteria": [
            "Correctly distinguishing between primitive and reference type behavior.",
            "Understanding how assignments and mutations affect variables based on their type."
          ],
          "example": null,
          "tags": [
            "primitives",
            "references",
            "memory-management",
            "mcq"
          ],
          "prerequisites": [
            "Data types",
            "Variables"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_primitives_references_2",
          "topic": "Array Reassignment vs. Mutation",
          "level": "medium",
          "type": "mcq",
          "question": "What is the output of the following JavaScript code?\n\n```javascript\nvar arr1 = [5];\nvar arr2 = arr1;\narr1 = [];\nconsole.log(arr1, arr2);\n```",
          "answer": "[] [5]",
          "options": [
            "[] []",
            "[] [5]",
            "[5] [5]",
            "Error"
          ],
          "analysisPoints": [
            "`arr1 = [5]` creates an array `[5]` and `arr1` points to it.",
            "`arr2 = arr1` copies the *reference* from `arr1` to `arr2`. Now `arr1` and `arr2` both point to `[5]`.",
            "`arr1 = []` reassigns `arr1` to point to a *new*, empty array. This does NOT affect what `arr2` is pointing to.",
            "`arr2` still points to the original array `[5]`."
          ],
          "keyConcepts": [
            "Reference values",
            "Array assignment",
            "Mutation vs. Reassignment"
          ],
          "evaluationCriteria": [
            "Understanding that reassigning a reference variable creates a new reference, not modifies the original object.",
            "Distinguishing between reassigning the variable and mutating the object it references."
          ],
          "example": null,
          "tags": [
            "references",
            "arrays",
            "memory-management",
            "mcq"
          ],
          "prerequisites": [
            "Arrays",
            "Variables"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_this_context_1",
          "topic": "this Context in Global Scope and Simple Function Calls",
          "level": "easy",
          "type": "flashcard",
          "question": "What does `this` refer to when called in the global scope (outside any function) in a browser, and inside a simple function call in strict mode?",
          "answer": "In the global scope: `window` object. Inside a simple function call in strict mode: `undefined`.",
          "analysisPoints": [
            "Recall global `this` binding.",
            "Recall strict mode `this` binding for simple function calls."
          ],
          "keyConcepts": [
            "This keyword",
            "Global context",
            "Strict mode"
          ],
          "evaluationCriteria": [
            "Quick recall of `this` behavior in basic contexts."
          ],
          "example": null,
          "tags": [
            "this-keyword",
            "flashcard",
            "strict-mode"
          ],
          "prerequisites": [
            "This keyword"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_this_context_2",
          "topic": "this Context in Object Methods and Arrow Functions",
          "level": "medium",
          "type": "open",
          "question": "Explain the difference in how `this` is bound when a function is called as a method of an object versus when an arrow function is used within that same object method. Provide a simple code example to illustrate your explanation.",
          "answer": "When a regular function is called as a method of an object (`obj.method()`), `this` is dynamically bound to the object on which the method was called (`obj`). This is known as implicit binding. For example:\n\n```javascript\nconst myObject = {\n  value: 10,\n  getValue: function() {\n    console.log(this.value); // `this` will be `myObject`\n  }\n};\nmyObject.getValue(); // Output: 10\n```\n\nIn contrast, an arrow function does *not* have its own `this` binding. Instead, `this` inside an arrow function is lexically scoped; it inherits the `this` value from the enclosing execution context (the scope where the arrow function was defined). This means `this` in an arrow function behaves like a regular variable, capturing its value from the surrounding code.\n\n```javascript\nconst myObjectWithArrow = {\n  value: 20,\n  getValueDelayed: function() {\n    // 'this' here is bound to myObjectWithArrow\n    setTimeout(() => {\n      // 'this' here is lexically inherited from the enclosing `getValueDelayed` method\n      console.log(this.value);\n    }, 100);\n  }\n};\nmyObjectWithArrow.getValueDelayed(); // Output: 20 (correctly accesses myObjectWithArrow.value)\n\n// Compare with a regular function in setTimeout:\nconst myObjectWithRegularFunction = {\n  value: 30,\n  getValueDelayedWrong: function() {\n    // 'this' here is bound to myObjectWithRegularFunction\n    setTimeout(function() {\n      // 'this' here refers to the global object (window/undefined in strict mode)\n      // because it's a simple function call in the setTimeout callback context.\n      console.log(this.value); \n    }, 100);\n  }\n};\nmyObjectWithRegularFunction.getValueDelayedWrong(); // Output: undefined (or error in strict mode)\n```\n\nThe key difference is that regular functions' `this` context is determined by *how they are called*, while arrow functions' `this` context is determined by *where they are defined*.",
          "analysisPoints": [
            "Clear explanation of implicit `this` binding for regular functions.",
            "Clear explanation of lexical `this` binding for arrow functions.",
            "Illustrative code examples for both scenarios.",
            "Highlighting the practical implications (e.g., in `setTimeout` callbacks)."
          ],
          "keyConcepts": [
            "This keyword",
            "Arrow functions",
            "Lexical scope",
            "Function context",
            "Implicit binding"
          ],
          "evaluationCriteria": [
            "Accuracy and completeness of `this` binding rules.",
            "Quality and relevance of code examples.",
            "Ability to compare and contrast different function types."
          ],
          "example": null,
          "tags": [
            "this-keyword",
            "arrow-functions",
            "open-ended",
            "scope",
            "function-context"
          ],
          "prerequisites": [
            "This keyword",
            "Functions"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_async_data_dashboard",
          "title": "Build a Concurrent Data Dashboard Fetcher",
          "description": "\nAs a frontend developer, you need to build a function that fetches data for a user dashboard. The dashboard requires two main pieces of data:\n1.  A list of users.\n2.  A list of products.\n\nAfter fetching both, you need to process them to determine the most popular product category based on product sales (imagine products have a `category` and `salesCount` property).\n\n**Requirements:**\n1.  Implement `fetchUsers()` and `fetchProducts()` mock async functions that return promises resolving with sample data after a short delay.\n2.  Create an `initializeDashboardData()` async function that:\n    *   Fetches `users` and `products` concurrently using `Promise.all`.\n    *   Handles any errors during fetching gracefully, logging the error and returning an object with empty arrays for users and products if fetching fails.\n    *   After successful fetching, calculates the `mostPopularCategory` from the `products` data. The most popular category is the one with the highest total `salesCount`.\n    *   Returns an object `{ users: [], products: [], mostPopularCategory: string | null }`.\n\n3.  Ensure your solution is robust to errors and efficient.\n",
          "difficulty": "medium",
          "startingCode": "/**\n * Mock function to simulate fetching users from an API.\n * @returns {Promise<Array<{id: number, name: string}>>}\n */\nconst fetchUsers = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 1, name: 'Alice' },\n        { id: 2, name: 'Bob' }\n      ]);\n    }, 200);\n  });\n};\n\n/**\n * Mock function to simulate fetching products from an API.\n * Products have a category and sales count.\n * @returns {Promise<Array<{id: number, name: string, category: string, salesCount: number}>>}\n */\nconst fetchProducts = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 101, name: 'Laptop', category: 'Electronics', salesCount: 150 },\n        { id: 102, name: 'Mouse', category: 'Electronics', salesCount: 200 },\n        { id: 103, name: 'Keyboard', category: 'Electronics', salesCount: 100 },\n        { id: 104, name: 'T-Shirt', category: 'Apparel', salesCount: 300 },\n        { id: 105, name: 'Jeans', category: 'Apparel', salesCount: 250 }\n      ]);\n    }, 300);\n  });\n};\n\nasync function initializeDashboardData() {\n  // TODO: Implement the required functionality\n  // 1. Fetch users and products concurrently.\n  // 2. Handle errors gracefully.\n  // 3. Calculate the most popular category from products.\n  // 4. Return the structured dashboard data.\n  \n  return { users: [], products: [], mostPopularCategory: null };\n}\n\n// Example Usage (uncomment to test):\n// initializeDashboardData().then(data => {\n//   console.log('Dashboard Data:', data);\n//   // Expected output for successful run:\n//   // { \n//   //   users: [...],\n//   //   products: [...],\n//   //   mostPopularCategory: 'Apparel' \n//   // }\n// });\n\n// // Example of error handling (uncomment and modify fetchProducts to reject to test):\n// // const originalFetchProducts = fetchProducts;\n// // fetchProducts = () => Promise.reject(new Error('Network error'));\n// // initializeDashboardData().then(data => {\n// //   console.log('Dashboard Data (Error Scenario):', data);\n// //   // Expected output for error:\n// //   // { users: [], products: [], mostPopularCategory: null }\n// // });\n// // fetchProducts = originalFetchProducts; // Restore original for other tests\n",
          "solutionCode": "/**\n * Mock function to simulate fetching users from an API.\n * @returns {Promise<Array<{id: number, name: string}>>}\n */\nconst fetchUsers = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 1, name: 'Alice' },\n        { id: 2, name: 'Bob' }\n      ]);\n    }, 200);\n  });\n};\n\n/**\n * Mock function to simulate fetching products from an API.\n * Products have a category and sales count.\n * @returns {Promise<Array<{id: number, name: string, category: string, salesCount: number}>>}\n */\nconst fetchProducts = () => {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve([\n        { id: 101, name: 'Laptop', category: 'Electronics', salesCount: 150 },\n        { id: 102, name: 'Mouse', category: 'Electronics', salesCount: 200 },\n        { id: 103, name: 'Keyboard', category: 'Electronics', salesCount: 100 },\n        { id: 104, name: 'T-Shirt', category: 'Apparel', salesCount: 300 },\n        { id: 105, name: 'Jeans', category: 'Apparel', salesCount: 250 }\n      ]);\n    }, 300);\n  });\n};\n\nasync function initializeDashboardData() {\n  try {\n    // Fetch both users and products concurrently\n    const [users, products] = await Promise.all([\n      fetchUsers(),\n      fetchProducts()\n    ]);\n\n    // Calculate the most popular product category\n    const categorySales = products.reduce((acc, product) => {\n      acc[product.category] = (acc[product.category] || 0) + product.salesCount;\n      return acc;\n    }, {});\n\n    let mostPopularCategory = null;\n    let maxSales = 0;\n\n    for (const category in categorySales) {\n      if (categorySales[category] > maxSales) {\n        maxSales = categorySales[category];\n        mostPopularCategory = category;\n      }\n    }\n\n    return {\n      users,\n      products,\n      mostPopularCategory\n    };\n  } catch (error) {\n    console.error('Failed to initialize dashboard data:', error);\n    // Return default empty state on error\n    return {\n      users: [],\n      products: [],\n      mostPopularCategory: null\n    };\n  }\n}\n",
          "testCases": [
            "Should fetch users and products concurrently.",
            "Should return correct `users` and `products` arrays on successful fetch.",
            "Should correctly calculate `mostPopularCategory` based on `salesCount`.",
            "Should return `{ users: [], products: [], mostPopularCategory: null }` if `fetchUsers` rejects.",
            "Should return `{ users: [], products: [], mostPopularCategory: null }` if `fetchProducts` rejects.",
            "Should return `{ users: [], products: [], mostPopularCategory: null }` if both fetch functions reject (first rejection takes precedence for Promise.all)."
          ],
          "hints": [
            "Remember to use `Promise.all` to run your `fetchUsers` and `fetchProducts` promises in parallel.",
            "Wrap your asynchronous logic in a `try...catch` block to handle potential errors from `Promise.all`.",
            "For calculating the most popular category, consider using `Array.prototype.reduce` to aggregate sales by category, then iterate over the aggregated data to find the maximum."
          ],
          "tags": [
            "async-await",
            "promise.all",
            "data-transformation",
            "error-handling",
            "array-methods",
            "frontend-development"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "Promises",
            "Async/Await",
            "Array.prototype.reduce",
            "Error Handling"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "concurrency",
            "data-aggregation",
            "api-integration"
          ]
        },
        {
          "id": "task_custom_array_prototype_method",
          "title": "Implement `Array.prototype.deepFlatten()`",
          "description": "\nImplement a `deepFlatten` method on `Array.prototype`. This method should recursively flatten a nested array structure into a single-level array, regardless of how deeply nested the arrays are.\n\n**Requirements:**\n1.  The method should be named `deepFlatten` and added to `Array.prototype`.\n2.  It should handle arrays containing elements that are not arrays (e.g., numbers, strings, objects) and include them in the flattened result.\n3.  It should work for arbitrarily deep nested arrays.\n4.  The original array should not be mutated.\n5.  Ensure the method is added safely, without overwriting if it already exists.\n\n**Example:**\n`[1, [2, 3], [4, [5, 6]], 7].deepFlatten()` should return `[1, 2, 3, 4, 5, 6, 7]`\n`[[1], 2, [3, [4, 5]]].deepFlatten()` should return `[1, 2, 3, 4, 5]`\n",
          "difficulty": "medium",
          "startingCode": "if (!Array.prototype.deepFlatten) {\n  Array.prototype.deepFlatten = function() {\n    // TODO: Implement the deepFlatten method\n    // 'this' refers to the array instance on which the method is called.\n    // Remember to return a new flattened array.\n    // Handle deeply nested arrays recursively.\n\n    return []; // Placeholder\n  };\n}\n\n// Example Usage (uncomment to test):\n// const nestedArray1 = [1, [2, 3], [4, [5, 6]], 7];\n// console.log(nestedArray1.deepFlatten()); // Expected: [1, 2, 3, 4, 5, 6, 7]\n\n// const nestedArray2 = [[1], 2, [3, [4, 5]]];\n// console.log(nestedArray2.deepFlatten()); // Expected: [1, 2, 3, 4, 5]\n\n// const emptyArray = [];\n// console.log(emptyArray.deepFlatten()); // Expected: []\n\n// const nonNestedArray = [1, 2, 3];\n// console.log(nonNestedArray.deepFlatten()); // Expected: [1, 2, 3]\n",
          "solutionCode": "if (!Array.prototype.deepFlatten) {\n  Array.prototype.deepFlatten = function() {\n    // Use reduce to iterate over the array elements\n    return this.reduce((acc, item) => {\n      // If the item is an array, recursively call deepFlatten on it\n      // and concatenate the result to the accumulator\n      if (Array.isArray(item)) {\n        return acc.concat(item.deepFlatten());\n      } else {\n        // If the item is not an array, just add it to the accumulator\n        return acc.concat(item);\n      }\n    }, []); // Initialize the accumulator as an empty array\n  };\n}\n",
          "testCases": [
            "Test with a simple nested array: `[1, [2, 3], 4].deepFlatten()` should return `[1, 2, 3, 4]`.",
            "Test with deeply nested array: `[1, [2, [3, [4]]], 5].deepFlatten()` should return `[1, 2, 3, 4, 5]`.",
            "Test with an empty array: `[].deepFlatten()` should return `[]`.",
            "Test with an array containing no nested arrays: `[1, 2, 3].deepFlatten()` should return `[1, 2, 3]`.",
            "Test with mixed data types: `[1, 'hello', [2, {a:1}], [null, [undefined, 3]]].deepFlatten()` should return `[1, 'hello', 2, {a:1}, null, undefined, 3]`.",
            "Verify that the original array is not mutated after calling `deepFlatten()`."
          ],
          "hints": [
            "Think recursively: if an element is an array, how can you flatten it?",
            "Consider using `Array.isArray()` to check if an element is an array.",
            "The `reduce` method is very suitable for this type of aggregation and transformation.",
            "Remember `this` inside the prototype method refers to the array instance itself.",
            "To avoid mutation, ensure you are creating new arrays or concatenating results, rather than modifying the original array in place."
          ],
          "tags": [
            "prototypes",
            "recursion",
            "array-methods",
            "data-structures",
            "functional-programming"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "Prototypes",
            "Arrays",
            "Recursion",
            "Array.prototype.reduce"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "array-flattening",
            "utility-functions",
            "pure-functions"
          ]
        },
        {
          "id": "task_safe_config_parser",
          "title": "Build a Safe Configuration Parser",
          "description": "\nCreate a function `parseConfigValue(value)` that safely processes various input types (strings, numbers, booleans) from a configuration file, demonstrating an understanding of JavaScript's type coercion and explicit type conversion.\n\n**Requirements:**\n1.  The function should take a single argument `value` of mixed type.\n2.  If `value` is a string that represents a number (e.g., `'123'`, `'45.6'`), convert it to a `number`.\n3.  If `value` is a string that represents a boolean (e.g., `'true'`, `'false'`, case-insensitive), convert it to a `boolean`.\n4.  If `value` is an empty string `''`, it should be treated as `null`.\n5.  If `value` is `null` or `undefined`, it should remain as is.\n6.  For any other string value, it should remain a `string`.\n7.  For any other non-string, non-null, non-undefined primitive (e.g., a number or boolean that is already a number/boolean), it should remain unchanged.\n8.  The function should not throw errors for any valid input type.\n\n**Example Scenarios:**\n*   `parseConfigValue('123')` returns `123` (number)\n*   `parseConfigValue('TRUE')` returns `true` (boolean)\n*   `parseConfigValue('hello')` returns `'hello'` (string)\n*   `parseConfigValue('')` returns `null`\n*   `parseConfigValue(123)` returns `123` (number)\n*   `parseConfigValue(false)` returns `false` (boolean)\n*   `parseConfigValue(null)` returns `null`\n",
          "difficulty": "medium",
          "startingCode": "function parseConfigValue(value) {\n  // TODO: Implement safe configuration parsing.\n  // Consider type checking and explicit conversions.\n\n  return value; // Placeholder\n}\n\n// Example Usage (uncomment to test):\n// console.log(`'123' -> ${parseConfigValue('123')} (Type: ${typeof parseConfigValue('123')})`);\n// console.log(`'TRUE' -> ${parseConfigValue('TRUE')} (Type: ${typeof parseConfigValue('TRUE')})`);\n// console.log(`'false' -> ${parseConfigValue('false')} (Type: ${typeof parseConfigValue('false')})`);\n// console.log(`'hello' -> ${parseConfigValue('hello')} (Type: ${typeof parseConfigValue('hello')})`);\n// console.log(`'' -> ${parseConfigValue('')} (Type: ${typeof parseConfigValue('')})`);\n// console.log(`123 -> ${parseConfigValue(123)} (Type: ${typeof parseConfigValue(123)})`);\n// console.log(`false -> ${parseConfigValue(false)} (Type: ${typeof parseConfigValue(false)})`);\n// console.log(`null -> ${parseConfigValue(null)} (Type: ${typeof parseConfigValue(null)})`);\n// console.log(`undefined -> ${parseConfigValue(undefined)} (Type: ${typeof parseConfigValue(undefined)})`);\n// console.log(`'0' -> ${parseConfigValue('0')} (Type: ${typeof parseConfigValue('0')})`);\n// console.log(`'3.14' -> ${parseConfigValue('3.14')} (Type: ${typeof parseConfigValue('3.14')})`);\n",
          "solutionCode": "function parseConfigValue(value) {\n  // Handle null or undefined first, as typeof null is 'object'\n  if (value === null || typeof value === 'undefined') {\n    return value;\n  }\n\n  // Process string values\n  if (typeof value === 'string') {\n    // Empty string to null\n    if (value === '') {\n      return null;\n    }\n\n    // Try to convert to number\n    const numValue = Number(value);\n    if (!isNaN(numValue) && String(numValue) === value) { // Check if it's a valid number string like '123' or '12.5' but not '123a'\n        return numValue;\n    }\n    \n    // Try to convert to boolean (case-insensitive)\n    const lowerCaseValue = value.toLowerCase();\n    if (lowerCaseValue === 'true') {\n      return true;\n    }\n    if (lowerCaseValue === 'false') {\n      return false;\n    }\n\n    // If none of the above, keep as original string\n    return value;\n  }\n\n  // For non-string primitives (numbers, booleans), return as is\n  return value;\n}\n",
          "testCases": [
            "Test with string '123' should return number 123.",
            "Test with string '3.14' should return number 3.14.",
            "Test with string 'TRUE' should return boolean true.",
            "Test with string 'false' should return boolean false.",
            "Test with string 'hello' should return string 'hello'.",
            "Test with empty string '' should return null.",
            "Test with number 123 should return number 123.",
            "Test with boolean false should return boolean false.",
            "Test with null should return null.",
            "Test with undefined should return undefined.",
            "Test with string '0' should return number 0.",
            "Test with string '    42   ' (padded number) should return 42.",
            "Test with string 'not_a_number' should return 'not_a_number'."
          ],
          "hints": [
            "Use `typeof` to check the type of the input `value`.",
            "For string-to-number conversion, `Number()` function and `isNaN()` can be helpful. Also consider `parseInt()` or `parseFloat()`.",
            "For string-to-boolean conversion, `toLowerCase()` on the string value can simplify checks.",
            "The order of checks matters. Handle edge cases like empty string, `null`, and `undefined` early."
          ],
          "tags": [
            "type-coercion",
            "type-conversion",
            "javascript-fundamentals",
            "string-manipulation",
            "conditionals"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "Data types",
            "Operators",
            "Conditional statements"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "input-validation",
            "configuration-management",
            "data-parsing"
          ]
        },
        {
          "id": "task_simple_shopping_cart",
          "title": "Implement a Basic Shopping Cart Class with 'this' Context",
          "description": "\nCreate a `ShoppingCart` class (or constructor function) that manages a collection of `CartItem` objects. This task emphasizes proper handling of reference types for items and correct `this` binding within class methods.\n\n**Requirements:**\n1.  Define a `CartItem` class/constructor for items with `id`, `name`, and `price` properties.\n2.  Define a `ShoppingCart` class/constructor with:\n    *   A private/internal `_items` array to store `CartItem` objects.\n    *   An `addItem(item)` method: Adds a `CartItem` to the cart. Ensure you're storing a *copy* of the item if external modification to the original item object should not affect the one in the cart. However, for simplicity, a direct reference is acceptable if the task doesn't explicitly require deep cloning.\n    *   A `removeItem(itemId)` method: Removes an item by its ID.\n    *   A `getTotal()` method: Calculates the total price of all items in the cart.\n    *   A `getCartContents()` method: Returns a *copy* of the `_items` array to prevent external modification of the cart's internal state.\n\n3.  Demonstrate correct `this` binding in all methods.\n\n",
          "difficulty": "medium",
          "startingCode": "/**\n * Represents an item in the shopping cart.\n * @param {number} id - Unique ID of the item.\n * @param {string} name - Name of the item.\n * @param {number} price - Price of the item.\n */\nclass CartItem {\n  constructor(id, name, price) {\n    this.id = id;\n    this.name = name;\n    this.price = price;\n  }\n}\n\nclass ShoppingCart {\n  constructor() {\n    this._items = []; // Internal array to store cart items\n  }\n\n  /**\n   * Adds an item to the cart.\n   * @param {CartItem} item - The item to add.\n   */\n  addItem(item) {\n    // TODO: Implement addItem. Ensure 'this' correctly refers to the ShoppingCart instance.\n  }\n\n  /**\n   * Removes an item from the cart by its ID.\n   * @param {number} itemId - The ID of the item to remove.\n   */\n  removeItem(itemId) {\n    // TODO: Implement removeItem. \n  }\n\n  /**\n   * Calculates the total price of all items in the cart.\n   * @returns {number} The total price.\n   */\n  getTotal() {\n    // TODO: Implement getTotal. Use array methods and ensure 'this' refers to the instance.\n    return 0;\n  }\n\n  /**\n   * Returns a copy of the cart contents to prevent external modification.\n   * @returns {Array<CartItem>} A copy of the items array.\n   */\n  getCartContents() {\n    // TODO: Implement getCartContents. Return a shallow copy.\n    return [];\n  }\n}\n\n// Example Usage (uncomment to test):\n// const cart = new ShoppingCart();\n// const item1 = new CartItem(1, 'Laptop', 1200);\n// const item2 = new CartItem(2, 'Mouse', 25);\n// const item3 = new CartItem(3, 'Keyboard', 75);\n\n// cart.addItem(item1);\n// cart.addItem(item2);\n// cart.addItem(item3);\n\n// console.log('Cart contents:', cart.getCartContents()); // Should show 3 items\n// console.log('Total price:', cart.getTotal()); // Should be 1300\n\n// cart.removeItem(2); // Remove Mouse\n// console.log('Cart contents after removal:', cart.getCartContents()); // Should show Laptop, Keyboard\n// console.log('Total price after removal:', cart.getTotal()); // Should be 1275\n\n// // Test immutability of getCartContents\n// const contents = cart.getCartContents();\n// contents.pop(); // Modify the copy\n// console.log('Original cart after modifying copy:', cart.getCartContents()); // Should still have Laptop, Keyboard\n",
          "solutionCode": "/**\n * Represents an item in the shopping cart.\n * @param {number} id - Unique ID of the item.\n * @param {string} name - Name of the item.\n * @param {number} price - Price of the item.\n */\nclass CartItem {\n  constructor(id, name, price) {\n    this.id = id;\n    this.name = name;\n    this.price = price;\n  }\n}\n\nclass ShoppingCart {\n  constructor() {\n    this._items = []; // Internal array to store cart items\n  }\n\n  /**\n   * Adds an item to the cart. \n   * For simplicity, directly stores the item reference. For deep copy,\n   * one would use `JSON.parse(JSON.stringify(item))` or a dedicated cloning utility.\n   * @param {CartItem} item - The item to add.\n   */\n  addItem(item) {\n    // 'this' refers to the ShoppingCart instance\n    if (item && item.id && item.name && typeof item.price === 'number') {\n      this._items.push(item);\n    } else {\n      console.warn('Invalid item provided to addItem:', item);\n    }\n  }\n\n  /**\n   * Removes an item from the cart by its ID.\n   * @param {number} itemId - The ID of the item to remove.\n   */\n  removeItem(itemId) {\n    // 'this' refers to the ShoppingCart instance\n    this._items = this._items.filter(item => item.id !== itemId);\n  }\n\n  /**\n   * Calculates the total price of all items in the cart.\n   * @returns {number} The total price.\n   */\n  getTotal() {\n    // 'this' refers to the ShoppingCart instance\n    return this._items.reduce((total, item) => total + item.price, 0);\n  }\n\n  /**\n   * Returns a copy of the cart contents to prevent external modification.\n   * @returns {Array<CartItem>} A shallow copy of the items array.\n   */\n  getCartContents() {\n    // 'this' refers to the ShoppingCart instance\n    return [...this._items]; // Returns a shallow copy\n  }\n}\n",
          "testCases": [
            "Should correctly add items and increase the item count.",
            "Should correctly calculate the total price of items in the cart.",
            "Should correctly remove items by ID.",
            "Should return an empty array if no items are in the cart.",
            "Calling `getCartContents()` should return a new array, not the internal `_items` array (test immutability).",
            "Adding an invalid item (missing ID, name, or price) should not add it to the cart."
          ],
          "hints": [
            "Inside a class method, `this` automatically refers to the instance of the class.",
            "For `removeItem`, `Array.prototype.filter` is a good choice to create a new array without the specified item.",
            "For `getTotal`, `Array.prototype.reduce` can sum up the prices.",
            "To return a copy of an array, you can use `[...this._items]` or `this._items.slice()`."
          ],
          "tags": [
            "classes",
            "this-keyword",
            "object-oriented-javascript",
            "array-methods",
            "data-structures"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "Classes",
            "This-keyword",
            "Arrays",
            "Functions"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "encapsulation",
            "data-modeling",
            "state-management"
          ]
        }
      ]
    }
  },
  {
    "id": "5732f524-f1a9-45c6-89c2-b6fa9a99a40c",
    "startLine": 15500,
    "endLine": 15599,
    "processedDate": "2025-06-17T15:00:39.357Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_custom_array_methods",
          "title": "Custom Array Methods (Polyfills)",
          "content": "JavaScript array methods like `reduce`, `map`, `filter`, etc., are powerful tools for data manipulation. In some scenarios, especially when dealing with older environments or custom logic, one might need to implement a 'polyfill' or a custom version of these methods. A polyfill is a piece of code (or a plugin) that provides the functionality that is natively not available in a web browser, but that you want to use.\n\nImplementing a custom `reduce` function, for instance, involves iterating through the array and accumulating a single value based on a provided callback function. This process demonstrates a fundamental understanding of how array iteration and aggregation work under the hood.\n\n### Array.prototype.reduce Explained\n\nThe `reduce()` method executes a user-supplied 'reducer' callback function on each element of the array, in order, passing in the return value from the calculation on the preceding element. The final result of running the reducer across all elements of the array is a single value.\n\n**Syntax:**\n`arr.reduce(callback(accumulator, currentValue, currentIndex, array), initialValue)`\n\n- `callback`: A function to execute on each element in the array. It takes four arguments:\n    - `accumulator`: The accumulated value previously returned in the last invocation of the callback, or `initialValue`, if supplied.\n    - `currentValue`: The current element being processed in the array.\n    - `currentIndex` (Optional): The index of the current element being processed in the array. Starts from 0 if an `initialValue` is provided, and from 1 if not.\n    - `array` (Optional): The array `reduce()` was called upon.\n- `initialValue` (Optional): A value to use as the first argument to the first call of the `callback`. If no `initialValue` is supplied, the first element in the array will be used as the `accumulator` initial value and `currentValue` will start from the second element.",
          "examples": [
            {
              "id": "example_custom_reduce_1",
              "title": "Basic Custom Reduce Implementation",
              "code": "Array.prototype.customReduce = function(callback, initialValue) {\n  const arr = this;\n  let accumulator = initialValue;\n  let startIndex = 0;\n\n  if (initialValue === undefined) {\n    if (arr.length === 0) {\n      throw new TypeError('Reduce of empty array with no initial value');\n    }\n    accumulator = arr[0];\n    startIndex = 1;\n  }\n\n  for (let i = startIndex; i < arr.length; i++) {\n    accumulator = callback(accumulator, arr[i], i, arr);\n  }\n\n  return accumulator;\n};\n\n// Usage Example 1: Summing numbers\nconst numbers = [1, 2, 3, 4];\nconst sum = numbers.customReduce((acc, current) => acc + current, 0);\nconsole.log(sum); // 10\n\n// Usage Example 2: Flattening an array of arrays\nconst arrays = [[1, 2], [3, 4], [5, 6]];\nconst flattened = arrays.customReduce((acc, current) => acc.concat(current), []);\nconsole.log(flattened); // [1, 2, 3, 4, 5, 6]\n",
              "explanation": "This code block demonstrates a simple polyfill for `Array.prototype.reduce`. It correctly handles cases with and without an `initialValue`, and throws an error for an empty array without an `initialValue`, mimicking the native behavior. The `sum` example from the prompt is included here as a direct demonstration.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_custom_reduce_1",
            "question_custom_reduce_2",
            "question_custom_reduce_3"
          ],
          "relatedTasks": [
            "task_custom_reduce_polyfill"
          ],
          "tags": [
            "JavaScript",
            "Array Methods",
            "Polyfill",
            "Functional Programming",
            "Higher-Order Functions"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "functions",
            "arrays",
            "prototypes"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "data_transformation",
            "custom_utilities"
          ]
        },
        {
          "id": "theory_debounce",
          "title": "Debounce Function for Performance Optimization",
          "content": "Debouncing is a technique used to improve performance by limiting the rate at which a function can fire. When an event (like a keystroke in a search bar or window resizing) fires rapidly, the associated event handler can be called many times in a short period, leading to performance issues if the handler performs expensive operations (e.g., API calls, heavy DOM manipulation).\n\nA debounce function wraps the original function and delays its execution until a specified time has passed since the *last* time it was invoked. This means that if the event fires multiple times within the delay period, the timer is reset, and the function only executes once the user has stopped triggering the event for the specified duration.\n\n### How Debouncing Works\n\n1.  **Timer Management**: A `timerId` (usually from `setTimeout`) is used to schedule the execution of the original function.\n2.  **Reset on Re-invocation**: Every time the debounced function is called, any existing timer is cleared using `clearTimeout()`. This effectively cancels the previously scheduled execution.\n3.  **Delayed Execution**: A new timer is then set with `setTimeout()`, scheduling the function to run after the specified `delay`.\n4.  **Context and Arguments**: The debounced function needs to ensure that the original function (`func`) is called with the correct `this` context and `arguments` that were passed to the debounced function itself.\n\n### Common Use Cases\n\n*   **Search bar input**: Delaying API calls until the user stops typing.\n*   **Window resizing**: Performing layout recalculations only after the user has finished resizing the window.\n*   **Button clicks**: Preventing multiple rapid clicks from triggering an action multiple times.",
          "examples": [
            {
              "id": "example_debounce_1",
              "title": "Debounce Implementation and Usage",
              "code": "function debounce(func, delay) {\n  let timerId;\n  return function(...args) {\n    clearTimeout(timerId);\n    timerId = setTimeout(() => {\n      func.apply(this, args);\n    }, delay);\n  };\n}\n\n// Usage Example: Search Input\nconst handleSearch = debounce((searchTerm) => {\n  console.log(`Searching for: ${searchTerm}`);\n  // In a real application, this would be an API call or heavy operation\n}, 500);\n\n// Simulate an input element and event listener\n// In a browser, you'd do: document.getElementById('search').addEventListener('input', (e) => handleSearch(e.target.value));\n\nconsole.log('--- Simulating search input ---');\nhandleSearch('a');   // Timer set\nhandleSearch('ap');  // Timer cleared, new timer set\nhandleSearch('app'); // Timer cleared, new timer set\n\n// Wait for 600ms (more than 500ms delay) to see the last call execute\nsetTimeout(() => {\n  console.log('--- After debounce delay ---');\n  // No further calls, so 'Searching for: app' will be logged.\n}, 600);\n\n// Another example where only the last call fires after a pause\nsetTimeout(() => {\n  console.log('--- Simulating another sequence ---');\n  handleSearch('apple'); // Timer set\n  setTimeout(() => handleSearch('apple s'), 100); // Timer cleared, new timer set\n  setTimeout(() => handleSearch('apple se'), 200); // Timer cleared, new timer set\n  setTimeout(() => handleSearch('apple see'), 700); // Timer cleared, new timer set\n  // The 'apple see' search will fire after 500ms from its call (700ms total from start)\n}, 1500);\n",
              "explanation": "This example provides the canonical implementation of a debounce function. It shows how `clearTimeout` and `setTimeout` work together to ensure the function is only called after a period of inactivity. The usage section simulates rapid input changes and demonstrates that `handleSearch` is only executed once the typing has stopped for the specified `delay` (500ms in this case).",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_debounce_1",
            "question_debounce_2",
            "question_debounce_3",
            "question_debounce_4"
          ],
          "relatedTasks": [
            "task_implement_debounce"
          ],
          "tags": [
            "JavaScript",
            "Performance",
            "Frontend",
            "Optimization",
            "Functions",
            "Debounce"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "closures",
            "timers"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "ui_performance",
            "event_handling"
          ]
        },
        {
          "id": "theory_throttle",
          "title": "Throttle Function for Performance Optimization",
          "content": "Throttling is a technique used to limit the rate at which a function can be called. Unlike debouncing, which waits for a pause in events, throttling ensures that a function executes at most once within a specified time period, regardless of how many times the event fires.\n\nThis is particularly useful for events that fire continuously, such as scrolling, mouse movement, or drag-and-drop operations, where you want to perform an action periodically, but not on every single event trigger.\n\n### How Throttling Works\n\n1.  **State Management**: A flag, typically `isThrottled`, is used to track whether the function is currently in a 'throttled' state.\n2.  **Initial Execution**: When the throttled function is called and `isThrottled` is `false`, the original function (`callback`) is executed immediately.\n3.  **Set Throttled State**: Immediately after execution, `isThrottled` is set to `true` to prevent further executions within the interval.\n4.  **Reset Timer**: A `setTimeout` is set to reset `isThrottled` to `false` after the `interval` has passed. This allows the function to be called again.\n5.  **Ignore During Throttled State**: If the throttled function is called while `isThrottled` is `true`, the call is simply ignored.\n\n### Common Use Cases\n\n*   **Scroll events**: Updating UI elements (e.g., sticky headers, lazy loading) only a few times per second.\n*   **Mousemove events**: Tracking mouse position or performing drag operations.\n*   **API rate limiting**: Ensuring a minimum delay between successive API requests.\n*   **Progress bars**: Updating a progress bar during a long operation.",
          "examples": [
            {
              "id": "example_throttle_1",
              "title": "Throttle Implementation and Usage",
              "code": "function throttle(callback, interval) {\n  let isThrottled = false;\n  \n  return function(...args) {\n    if (!isThrottled) {\n      callback.apply(this, args);\n      isThrottled = true;\n      \n      setTimeout(() => {\n        isThrottled = false;\n      }, interval);\n    }\n  };\n}\n\n// Usage Example: Scroll Event\nconst handleScroll = throttle(() => {\n  console.log('Scroll event handled');\n  // In a real application, this would be an expensive calculation or DOM operation\n}, 300);\n\n// Simulate scroll events\nconsole.log('--- Simulating scroll events ---');\nhandleScroll(); // Logs: 'Scroll event handled' (isThrottled = true)\nhandleScroll(); // Ignored (isThrottled = true)\nhandleScroll(); // Ignored (isThrottled = true)\n\nsetTimeout(() => {\n  console.log('--- After 300ms interval ---');\n  handleScroll(); // Logs: 'Scroll event handled' (isThrottled = false, now true again)\n  handleScroll(); // Ignored\n}, 301);\n\nsetTimeout(() => {\n  console.log('--- After another 300ms interval ---');\n  handleScroll(); // Logs: 'Scroll event handled'\n}, 602);\n",
              "explanation": "This example demonstrates the standard implementation of a throttle function. It uses an `isThrottled` flag and `setTimeout` to ensure the `callback` is invoked at most once within the specified `interval`. The simulation shows that even if `handleScroll` is called multiple times rapidly, it only executes once per 300ms window.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_throttle_1",
            "question_throttle_2",
            "question_throttle_3",
            "question_throttle_4",
            "question_throttle_debounce_comparison_1"
          ],
          "relatedTasks": [
            "task_implement_throttle"
          ],
          "tags": [
            "JavaScript",
            "Performance",
            "Frontend",
            "Optimization",
            "Functions",
            "Throttle"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "closures",
            "timers"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "ui_performance",
            "event_handling"
          ]
        },
        {
          "id": "theory_polling_mechanisms",
          "title": "Polling Mechanisms for API Data Handling",
          "content": "Polling is a common technique used in web applications to periodically fetch updated data from a server. This is often necessary when real-time updates are desired but a persistent connection (like WebSockets) is not feasible or overkill. For example, fetching stock market data, chat messages, or notification counts at regular intervals.\n\nThere are two primary approaches to implement polling in JavaScript:\n\n### 1. Using `setInterval`\n\n`setInterval()` is a widely used method for executing a function or code snippet repeatedly at a fixed time delay. It's straightforward to implement but comes with a potential pitfall: it schedules the next execution without waiting for the current execution (e.g., an `fetch` request) to complete. If the API request takes longer than the `interval`, multiple requests can overlap, leading to an increasing queue of requests, potential server overload, and inconsistent data.\n\n### 2. Using Recursive `setTimeout`\n\nRecursive `setTimeout()` involves calling `setTimeout()` again within the callback of the previous `setTimeout()` call. This approach is generally preferred for polling because it ensures that the next API call is only scheduled *after* the previous one has completed (or failed). This prevents request queuing and ensures a more controlled and predictable polling cycle, especially important for long-running or potentially unreliable API calls.\n\n### Key Considerations for Polling\n\n*   **Interval Selection**: Choose an appropriate interval based on data criticality and server load capacity.\n*   **Error Handling**: Implement robust error handling (e.g., retries, back-off strategies) for API failures.\n*   **Stopping Polling**: Provide a mechanism to stop polling when it's no longer needed (e.g., user navigates away, component unmounts).\n*   **Resource Management**: Be mindful of network and CPU usage. Over-polling can drain battery life and consume server resources unnecessarily.\n*   **Alternatives**: Consider WebSockets or Server-Sent Events (SSE) for true real-time needs, as they are generally more efficient for frequent, unsolicited updates.",
          "examples": [
            {
              "id": "example_polling_interval_1",
              "title": "Polling with setInterval",
              "code": "// Helper function (simulates fetching data and updating UI)\nasync function fetchAndUpdateUI(endpoint) {\n  console.log(`Fetching data from ${endpoint}...`);\n  try {\n    // Simulate API call delay and data update\n    const response = await new Promise(resolve => setTimeout(() => resolve(`Data from ${endpoint} at ${new Date().toLocaleTimeString()}`), 200));\n    console.log(`Updated UI with: ${response}`);\n    return response;\n  } catch (error) {\n    console.error(`Error fetching from ${endpoint}:`, error);\n    throw error;\n  }\n}\n\n// Approach 1: Using setInterval\nfunction pollWithInterval(endpoint, interval) {\n  console.log(`Starting polling with setInterval for ${endpoint} every ${interval}ms`);\n  // Initial fetch\n  fetchAndUpdateUI(endpoint);\n  \n  // Set up polling\n  const pollId = setInterval(() => {\n    fetchAndUpdateUI(endpoint);\n  }, interval);\n\n  return pollId; // Return ID to allow clearing\n}\n\n// Usage\nconst intervalId = pollWithInterval('/api/stock-data', 1000); // Poll every 1 second\n\n// To stop polling after some time (e.g., 5 seconds):\n// setTimeout(() => {\n//   clearInterval(intervalId);\n//   console.log('Stopped polling with setInterval.');\n// }, 5000);\n",
              "explanation": "This example demonstrates polling using `setInterval`. It's concise but highlights the potential issue: if `fetchAndUpdateUI` takes longer than the `interval`, new `fetchAndUpdateUI` calls will be scheduled before the previous ones complete, leading to overlapping requests. The `fetchAndUpdateUI` function is a simulated asynchronous operation.",
              "language": "javascript"
            },
            {
              "id": "example_polling_timeout_1",
              "title": "Polling with Recursive setTimeout",
              "code": "// Helper function (same as above, simulates fetching data and updating UI)\nasync function fetchAndUpdateUI(endpoint) {\n  console.log(`Fetching data from ${endpoint}...`);\n  try {\n    const response = await new Promise(resolve => setTimeout(() => resolve(`Data from ${endpoint} at ${new Date().toLocaleTimeString()}`), 200));\n    console.log(`Updated UI with: ${response}`);\n    return response;\n  } catch (error) {\n    console.error(`Error fetching from ${endpoint}:`, error);\n    throw error;\n  }\n}\n\n// Approach 2: Using recursive setTimeout (more flexible)\nfunction pollWithTimeout(endpoint, interval) {\n  console.log(`Starting polling with recursive setTimeout for ${endpoint} every ${interval}ms`);\n  let timeoutId = null;\n\n  function poll() {\n    fetchAndUpdateUI(endpoint)\n      .finally(() => {\n        // Only schedule the next poll AFTER the current fetch is complete (resolved or rejected)\n        timeoutId = setTimeout(poll, interval);\n      });\n  }\n  \n  // Start polling immediately\n  poll();\n\n  return () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      console.log('Stopped polling with recursive setTimeout.');\n    }\n  }; // Return a cleanup function\n}\n\n// Usage\nconst stopPolling = pollWithTimeout('/api/market-data', 1000); // Poll every 1 second\n\n// To stop polling after some time (e.g., 5 seconds):\n// setTimeout(() => {\n//   stopPolling();\n// }, 5000);\n",
              "explanation": "This example showcases the preferred method for polling using recursive `setTimeout`. The key difference is that `setTimeout(poll, interval)` is called within the `.finally()` block of the `fetchAndUpdateUI` promise. This ensures that the next polling request only starts `interval` milliseconds *after* the previous request has completed, preventing overlap and resource exhaustion. A cleanup function is returned to allow stopping the polling.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_polling_1",
            "question_polling_2",
            "question_polling_3",
            "question_polling_4",
            "question_polling_5"
          ],
          "relatedTasks": [
            "task_implement_polling_with_timeout"
          ],
          "tags": [
            "JavaScript",
            "API",
            "Data Handling",
            "Polling",
            "Async",
            "Frontend"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "promises",
            "async_await",
            "timers",
            "fetch_api"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "realtime_updates",
            "api_integration"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_custom_reduce_1",
          "topic": "Custom Array Methods",
          "level": "medium",
          "type": "code",
          "question": "Implement a `customReduce` method as a polyfill for `Array.prototype.reduce`. Your implementation should mimic the behavior of the native `reduce` method, including handling the optional `initialValue` and throwing an error for an empty array without an `initialValue`.",
          "answer": "```javascript\nArray.prototype.customReduce = function(callback, initialValue) {\n  const arr = this;\n  let accumulator = initialValue;\n  let startIndex = 0;\n\n  if (initialValue === undefined) {\n    if (arr.length === 0) {\n      throw new TypeError('Reduce of empty array with no initial value');\n    }\n    accumulator = arr[0];\n    startIndex = 1;\n  }\n\n  for (let i = startIndex; i < arr.length; i++) {\n    accumulator = callback(accumulator, arr[i], i, arr);\n  }\n\n  return accumulator;\n};\n```",
          "options": [],
          "analysisPoints": [
            "Correctly handling the `initialValue` parameter (or its absence).",
            "Throwing `TypeError` for an empty array without `initialValue`.",
            "Passing correct arguments (accumulator, currentValue, currentIndex, array) to the callback.",
            "Ensuring the `this` context within the polyfill refers to the array.",
            "Iterating through the array elements correctly."
          ],
          "keyConcepts": [
            "Array.prototype",
            "Polyfills",
            "Array.prototype.reduce",
            "Callbacks",
            "Context (`this`)",
            "Error Handling"
          ],
          "evaluationCriteria": [
            "Functional correctness for various inputs (empty, single element, multiple elements)",
            "Adherence to native `reduce` behavior for `initialValue` and errors",
            "Code readability and efficiency"
          ],
          "example": "```javascript\nconst numbers = [1, 2, 3, 4];\nconst sum = numbers.customReduce((acc, current) => acc + current, 0);\nconsole.log(sum); // 10\n\nconst product = numbers.customReduce((acc, current) => acc * current); // No initial value\nconsole.log(product); // 24\n\nconst emptyArr = [];\ntry {\n  emptyArr.customReduce((acc, current) => acc + current);\n} catch (e) {\n  console.log(e.message); // Reduce of empty array with no initial value\n}\n```",
          "tags": [
            "JavaScript",
            "Array Methods",
            "Polyfill",
            "Higher-Order Functions",
            "Coding Challenge"
          ],
          "prerequisites": [
            "javascript_functions",
            "javascript_arrays",
            "javascript_prototypes"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_custom_reduce_2",
          "topic": "Custom Array Methods",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of the `reduce` array method in JavaScript?",
          "answer": "The `reduce` method executes a callback function on each element of an array, resulting in a single output value. It's used to 'reduce' an array to a single value by accumulating the results.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Array.prototype.reduce",
            "Aggregation",
            "Single Value"
          ],
          "evaluationCriteria": [
            "Recall of fundamental array methods"
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "Array Methods",
            "Flashcard"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_custom_reduce_3",
          "topic": "Custom Array Methods",
          "level": "medium",
          "type": "mcq",
          "question": "Given the following custom `reduce` implementation:\n\n```javascript\nArray.prototype.myReduce = function(callback, initialValue) {\n  let accumulator = initialValue;\n  let startIndex = 0;\n\n  if (initialValue === undefined) {\n    accumulator = this[0];\n    startIndex = 1;\n  }\n\n  for (let i = startIndex; i < this.length; i++) {\n    accumulator = callback(accumulator, this[i], i, this);\n  }\n\n  return accumulator;\n};\n\nconst data = [1, 2, 3];\nconst result = data.myReduce((acc, val) => acc + val);\n```\n\nWhat will be the value of `result` and why?",
          "answer": "6, because when `initialValue` is not provided, `myReduce` uses the first element (1) as the initial accumulator, and starts iteration from the second element (2).",
          "options": [
            "6, because when `initialValue` is not provided, `myReduce` uses the first element (1) as the initial accumulator, and starts iteration from the second element (2).",
            "0, because the `initialValue` is implicitly 0 if not provided.",
            "Error, because `initialValue` is mandatory for `reduce`.",
            "Undefined, because `myReduce` does not correctly handle missing `initialValue`."
          ],
          "analysisPoints": [
            "Tests understanding of `reduce` behavior when `initialValue` is omitted.",
            "Checks knowledge of how the accumulator is initialized in such cases.",
            "Verifies understanding of the loop's starting index.",
            "Distinguishes between native `reduce` behavior and potential polyfill errors."
          ],
          "keyConcepts": [
            "Array.prototype.reduce",
            "initialValue",
            "Accumulator",
            "Iteration"
          ],
          "evaluationCriteria": [
            "Accurate prediction of `reduce` output",
            "Correct reasoning for the output"
          ],
          "example": "When `initialValue` is not provided for `myReduce` on `[1, 2, 3]`, `accumulator` is initialized to `1`. The loop starts from index `1` (value `2`).\n1. `acc = 1`, `val = 2` -> `acc = 1 + 2 = 3`\n2. `acc = 3`, `val = 3` -> `acc = 3 + 3 = 6`\nFinally, `6` is returned.",
          "tags": [
            "JavaScript",
            "Array Methods",
            "MCQ"
          ],
          "prerequisites": [
            "javascript_functions",
            "javascript_arrays"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_debounce_1",
          "topic": "Performance Optimization: Debounce",
          "level": "open",
          "type": "open",
          "question": "How would you implement a debounce function in JavaScript? Explain the key components and their roles in preventing excessive function calls.",
          "answer": "A debounce function limits how often a function can be called, delaying its execution until after a specified time has passed since it was last invoked. The core implementation involves:\n\n1.  **`timerId`**: A variable (often within the closure of the returned function) to store the `setTimeout` identifier. This allows us to cancel pending executions.\n2.  **`clearTimeout(timerId)`**: Called at the beginning of the debounced function's execution. This clears any previously set timer, effectively resetting the 'delay' period if the function is called again before the previous timer expires.\n3.  **`setTimeout(() => { ... }, delay)`**: Sets a new timer. The original function (`func`) is executed inside this `setTimeout` callback. The delay specifies the period of inactivity required before the function fires.\n4.  **Closure**: The `timerId` needs to be retained across multiple invocations of the debounced function, which is achieved by making it part of the closure formed by the returned function.\n5.  **Context and Arguments**: `func.apply(this, args)` is used to ensure the original function `func` is executed with the correct `this` context and all arguments (`args`) that were passed to the debounced function.",
          "options": [],
          "analysisPoints": [
            "Understanding of `setTimeout` and `clearTimeout`.",
            "Correct use of closures to maintain `timerId`.",
            "Proper handling of `this` context and arguments.",
            "Ability to explain the *purpose* (delaying until inactivity) and *mechanism* (resetting timer).",
            "Identification of common use cases."
          ],
          "keyConcepts": [
            "Debounce",
            "Performance Optimization",
            "setTimeout",
            "clearTimeout",
            "Closures",
            "Event Handling",
            "Function Context"
          ],
          "evaluationCriteria": [
            "Correctness of the implementation logic",
            "Clarity of explanation for each component",
            "Identification of appropriate use cases",
            "Demonstration of understanding of JavaScript fundamentals (closures, `this`)"
          ],
          "example": "```javascript\nfunction debounce(func, delay) {\n  let timerId; // Stored in closure\n  return function(...args) { // Returned function is the debounced version\n    clearTimeout(timerId); // Clear any existing timer\n    timerId = setTimeout(() => { // Set a new timer\n      func.apply(this, args); // Execute original function with correct context and arguments\n    }, delay);\n  };\n}\n\n// Usage\nconst logInput = debounce((value) => console.log('Searching for:', value), 300);\nlogInput('a');\nlogInput('ab');\nlogInput('abc'); // Only 'Searching for: abc' will log after 300ms of inactivity\n```",
          "tags": [
            "JavaScript",
            "Performance",
            "Functions",
            "Open-Ended",
            "Debounce"
          ],
          "prerequisites": [
            "javascript_closures",
            "javascript_timers"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_debounce_2",
          "topic": "Performance Optimization: Debounce",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following scenarios is *best* suited for using a debounce function?",
          "answer": "An input field where a search API call should be made only after the user stops typing for a short period.",
          "options": [
            "Updating a scroll position indicator as a user continuously scrolls down a long page.",
            "An input field where a search API call should be made only after the user stops typing for a short period.",
            "Triggering an animation on every single mouse movement over a large canvas.",
            "Calling a function exactly once every second, regardless of how often an event fires."
          ],
          "analysisPoints": [
            "Distinguishes between debounce and throttle use cases.",
            "Identifies the key characteristic of debounce: waiting for inactivity.",
            "Recognizes scenarios where continuous events need rate limiting vs. delayed execution."
          ],
          "keyConcepts": [
            "Debounce Use Cases",
            "Throttle Use Cases",
            "Event Handling",
            "Performance"
          ],
          "evaluationCriteria": [
            "Correct application of debounce concept to real-world scenarios",
            "Ability to differentiate debounce from other optimization techniques"
          ],
          "example": "Debounce is ideal for 'wait until X stops' scenarios. For a search input, you don't want to hit the API with every single keystroke, only when the user has finished typing their query. This is a classic debounce use case.",
          "tags": [
            "JavaScript",
            "Performance",
            "MCQ",
            "Debounce",
            "Use Cases"
          ],
          "prerequisites": [
            "debounce_concept"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_debounce_3",
          "topic": "Performance Optimization: Debounce",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary goal of a debounce function?",
          "answer": "To limit the rate at which a function is called by delaying its execution until a specified time has passed since its last invocation.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Debounce",
            "Rate Limiting",
            "Delay"
          ],
          "evaluationCriteria": [
            "Recall of debounce definition"
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "Performance",
            "Flashcard",
            "Debounce"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_debounce_4",
          "topic": "Performance Optimization: Debounce",
          "level": "hard",
          "type": "code",
          "question": "Implement a debounce function that allows an immediate invocation on the first call, and then debounces subsequent calls within the delay period. This is sometimes referred to as `leading` or `immediate` debounce.",
          "answer": "```javascript\nfunction debounceLeading(func, delay, immediate = false) {\n  let timerId;\n  let lastArgs;\n  let lastThis;\n  let result;\n\n  return function(...args) {\n    lastArgs = args;\n    lastThis = this;\n\n    const isInvoked = timerId != null;\n\n    if (!isInvoked && immediate) {\n      result = func.apply(lastThis, lastArgs);\n    }\n\n    clearTimeout(timerId);\n    timerId = setTimeout(() => {\n      if (!immediate) {\n        result = func.apply(lastThis, lastArgs);\n      }\n      timerId = null; // Clear the timer ID after execution\n    }, delay);\n\n    return result; // Return the result of the *last* invocation\n  };\n}\n\n// Usage Example:\nconst logImmediate = debounceLeading((value) => {\n  console.log('Immediate search for:', value);\n  return `Result for ${value}`;\n}, 500, true);\n\nconsole.log(logImmediate('first'));  // Logs 'Immediate search for: first', returns 'Result for first'\nconsole.log(logImmediate('second')); // No immediate log, timer reset\nconsole.log(logImmediate('third'));  // No immediate log, timer reset\n\nsetTimeout(() => {\n  console.log('After delay (should not log from timeout if immediate is true)');\n}, 600);\n\n// Test without immediate (standard debounce)\nconst logStandard = debounceLeading((value) => {\n  console.log('Standard search for:', value);\n}, 500, false);\n\nsetTimeout(() => logStandard('a'), 1000);\nsetTimeout(() => logStandard('ab'), 1100);\nsetTimeout(() => logStandard('abc'), 1200); // 'Standard search for: abc' logs after 1700ms\n\n```",
          "options": [],
          "analysisPoints": [
            "Correctly handling the `immediate` flag.",
            "Executing the function on the leading edge (first call) when `immediate` is true.",
            "Ensuring subsequent calls within the delay period are still debounced.",
            "Clearing the timer correctly after it fires or is reset.",
            "Maintaining `this` context and arguments."
          ],
          "keyConcepts": [
            "Debounce Leading Edge",
            "Debounce Trailing Edge",
            "Flags",
            "Timers",
            "Conditional Logic"
          ],
          "evaluationCriteria": [
            "Correct implementation of leading-edge debounce logic",
            "Robustness across different call patterns",
            "Edge case handling (e.g., immediate set to false, rapid calls)"
          ],
          "example": "The example demonstrates how `debounceLeading` behaves differently based on the `immediate` flag, executing on the first call then debouncing subsequent calls within the delay.",
          "tags": [
            "JavaScript",
            "Performance",
            "Coding Challenge",
            "Debounce",
            "Advanced"
          ],
          "prerequisites": [
            "debounce_concept",
            "javascript_closures",
            "javascript_timers"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_throttle_1",
          "topic": "Performance Optimization: Throttle",
          "level": "open",
          "type": "open",
          "question": "How would you implement a throttle function in JavaScript? Explain its mechanism and common use cases where it's preferred over debounce.",
          "answer": "A throttle function ensures that a function is called at most once within a specified time period (`interval`), regardless of how many times the event triggering it actually fires. Its mechanism involves:\n\n1.  **`isThrottled` flag**: A boolean variable (within the closure) to track if the function is currently in a 'throttled' state. Initially `false`.\n2.  **Conditional Execution**: When the throttled function is called:\n    *   If `isThrottled` is `false`, the original `callback` is executed immediately.\n    *   `isThrottled` is then set to `true` to prevent further immediate executions.\n    *   A `setTimeout` is scheduled to reset `isThrottled` back to `false` after the `interval` has passed.\n    *   If `isThrottled` is `true`, the call is simply ignored.\n3.  **Context and Arguments**: Similar to debounce, `callback.apply(this, args)` is used to maintain the correct execution context and arguments.\n\n**Preference over Debounce**: Throttle is preferred when you want to ensure a function is called *regularly* but not *excessively* during a continuous event. For example:\n*   **Scroll events**: You might want to update a UI element (like a sticky header) every 100ms during a scroll, but not on every pixel scroll. Debounce would only fire *after* scrolling stops, which is not desired here.\n*   **Mousemove events**: If tracking mouse coordinates for a drawing application, you might want to record points periodically rather than on every single pixel movement.\n*   **Button clicks**: To prevent rapid double-clicks on a submission button, allowing the button to be clicked again after a short delay, but not immediately.",
          "options": [],
          "analysisPoints": [
            "Understanding of `setTimeout` and a state flag (`isThrottled`).",
            "Correct use of closures to maintain state.",
            "Proper handling of `this` context and arguments.",
            "Ability to explain the *purpose* (rate limiting) and *mechanism* (periodic execution).",
            "Clear differentiation from debounce and identification of appropriate use cases."
          ],
          "keyConcepts": [
            "Throttle",
            "Performance Optimization",
            "setTimeout",
            "State Management",
            "Closures",
            "Event Handling",
            "Function Context"
          ],
          "evaluationCriteria": [
            "Correctness of the implementation logic",
            "Clarity of explanation for each component",
            "Identification of appropriate use cases and distinction from debounce",
            "Demonstration of understanding of JavaScript fundamentals"
          ],
          "example": "```javascript\nfunction throttle(callback, interval) {\n  let isThrottled = false;\n  return function(...args) {\n    if (!isThrottled) {\n      callback.apply(this, args);\n      isThrottled = true;\n      setTimeout(() => {\n        isThrottled = false;\n      }, interval);\n    }\n  };\n}\n\n// Usage\nconst handleScroll = throttle(() => console.log('Scroll event throttled!'), 500);\n\nconsole.log('--- Simulating rapid scrolls ---');\nhandlerScroll(); // Logs: 'Scroll event throttled!'\nhandlerScroll(); // Ignored\nhandlerScroll(); // Ignored\n\nsetTimeout(() => {\n  handleScroll(); // Logs: 'Scroll event throttled!' (after 500ms)\n}, 501);\n```",
          "tags": [
            "JavaScript",
            "Performance",
            "Functions",
            "Open-Ended",
            "Throttle"
          ],
          "prerequisites": [
            "javascript_closures",
            "javascript_timers"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_throttle_2",
          "topic": "Performance Optimization: Throttle",
          "level": "medium",
          "type": "mcq",
          "question": "When implementing a throttle function, what is the primary role of the `isThrottled` flag?",
          "answer": "To prevent the original function from executing if it has already been called within the current throttling interval.",
          "options": [
            "To store the timer ID for `setTimeout`.",
            "To prevent the original function from executing if it has already been called within the current throttling interval.",
            "To ensure the function executes only once after all rapid events have stopped.",
            "To count how many times the throttled function has been invoked."
          ],
          "analysisPoints": [
            "Tests understanding of the state management in throttling.",
            "Distinguishes `isThrottled` from `timerId` (used in debounce).",
            "Reinforces the core principle of throttling: rate limiting per interval."
          ],
          "keyConcepts": [
            "Throttle",
            "State Management",
            "Rate Limiting",
            "isThrottled Flag"
          ],
          "evaluationCriteria": [
            "Correct identification of `isThrottled` purpose",
            "Ability to differentiate from debounce mechanics"
          ],
          "example": "The `isThrottled` flag acts as a gate. Once the function executes, the gate closes (`isThrottled = true`) for a set `interval`. Any calls while the gate is closed are ignored. After the `interval`, the gate reopens (`isThrottled = false`), allowing the next call.",
          "tags": [
            "JavaScript",
            "Performance",
            "MCQ",
            "Throttle"
          ],
          "prerequisites": [
            "throttle_concept"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_throttle_3",
          "topic": "Performance Optimization: Throttle",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary goal of a throttle function?",
          "answer": "To ensure a function is called at most once within a specified time period, limiting its execution rate during continuous events.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Throttle",
            "Rate Limiting",
            "Interval"
          ],
          "evaluationCriteria": [
            "Recall of throttle definition"
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "Performance",
            "Flashcard",
            "Throttle"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_throttle_4",
          "topic": "Performance Optimization: Throttle",
          "level": "hard",
          "type": "code",
          "question": "Implement a throttle function that ensures the function is called on the *leading* edge (immediately) and also on the *trailing* edge (after the interval if there were calls during the interval).",
          "answer": "```javascript\nfunction throttleLeadingAndTrailing(func, interval) {\n  let timeoutId = null;\n  let lastArgs;\n  let lastThis;\n  let lastResult;\n  let lastRan = 0;\n\n  const throttled = function(...args) {\n    lastArgs = args;\n    lastThis = this;\n\n    const now = Date.now();\n    const remaining = interval - (now - lastRan);\n\n    if (remaining <= 0 || remaining > interval) {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n      lastRan = now;\n      lastResult = func.apply(lastThis, lastArgs);\n    } else if (!timeoutId) {\n      timeoutId = setTimeout(() => {\n        lastRan = Date.now();\n        timeoutId = null;\n        lastResult = func.apply(lastThis, lastArgs);\n      }, remaining);\n    }\n    return lastResult;\n  };\n\n  return throttled;\n}\n\n// Usage Example:\nconst logActivity = throttleLeadingAndTrailing((message) => {\n  console.log(`Activity logged: ${message} at ${new Date().toLocaleTimeString()}`);\n}, 1000);\n\nconsole.log('--- Simulating rapid activity ---');\nlogActivity('event 1'); // Immediate log\nlogActivity('event 2'); // Ignored\nlogActivity('event 3'); // Ignored\nlogActivity('event 4'); // Ignored\n\nsetTimeout(() => {\n  console.log('--- After 1.1s ---');\n  logActivity('event 5'); // Will cause a trailing log for 'event 4' (or 'event 5' if no trailing occurred yet) + immediate log for 'event 5' \n}, 1100);\n\nsetTimeout(() => {\n  console.log('--- After 2.2s ---');\n  logActivity('event 6'); // Immediate log\n}, 2200);\n\n// To see the trailing call, make sure calls continue during the interval\nsetTimeout(() => {\n    logActivity('event X');\n}, 2500);\nsetTimeout(() => {\n    logActivity('event Y');\n}, 2700);\nsetTimeout(() => {\n    logActivity('event Z'); // This will be the one logged after 3.5s approx\n}, 3000);\n\n```",
          "options": [],
          "analysisPoints": [
            "Correctly handling both leading and trailing edge invocations.",
            "Using `Date.now()` to calculate remaining time.",
            "Clearing and setting timeouts appropriately.",
            "Maintaining `this` context and arguments for both leading and trailing calls."
          ],
          "keyConcepts": [
            "Throttle Leading/Trailing Edge",
            "Timers",
            "Time Calculation",
            "Function Context"
          ],
          "evaluationCriteria": [
            "Functional correctness for leading and trailing calls",
            "Robustness under various rapid invocation patterns",
            "Efficient timer management"
          ],
          "example": "The example demonstrates how the `throttleLeadingAndTrailing` function executes immediately on the first call and then ensures a final call occurs after the interval if there were calls within that period.",
          "tags": [
            "JavaScript",
            "Performance",
            "Coding Challenge",
            "Throttle",
            "Advanced"
          ],
          "prerequisites": [
            "throttle_concept",
            "javascript_closures",
            "javascript_timers"
          ],
          "complexity": 9,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_throttle_debounce_comparison_1",
          "topic": "Performance Optimization",
          "level": "medium",
          "type": "open",
          "question": "Compare and contrast `debounce` and `throttle`. Provide an example use case for each where the other would be a less suitable choice.",
          "answer": "**Debounce**\n*   **Purpose**: Limits how often a function can fire, delaying its execution until after a specified time has passed since it was last invoked. It's about 'waiting for a pause'.\n*   **Mechanism**: Uses `setTimeout` and `clearTimeout`. Each new invocation resets the timer, ensuring the function only fires once after a period of inactivity.\n*   **Use Case Example**: A search bar where an API call is made to fetch results. You want to make the call only when the user has *finished typing* for a moment, not on every keystroke. If you used throttle, you'd get intermediate search results while typing, which is usually not desired.\n\n**Throttle**\n*   **Purpose**: Ensures a function is called at most once in a specified time period. It's about 'rate limiting' to a fixed frequency.\n*   **Mechanism**: Uses a flag (e.g., `isThrottled`) and `setTimeout`. The function executes immediately if not throttled, then sets the flag and a timer to reset the flag after the interval. Subsequent calls within the interval are ignored.\n*   **Use Case Example**: Handling a `scroll` event to update a 'back to top' button visibility. You want the button's visibility to update *periodically* as the user scrolls, not just when they stop scrolling. If you used debounce, the button would only appear/disappear after the user stopped scrolling, which could feel unresponsive.\n\n**Key Differences**: Debounce waits for a *break* in events; throttle *forces a maximum execution rate* over time.",
          "options": [],
          "analysisPoints": [
            "Clear definitions for both `debounce` and `throttle`.",
            "Accurate description of their underlying mechanisms.",
            "Relevant and distinct use cases for each.",
            "Articulate comparison highlighting when one is preferred over the other."
          ],
          "keyConcepts": [
            "Debounce",
            "Throttle",
            "Performance Optimization",
            "Event Handling",
            "Rate Limiting",
            "Delay"
          ],
          "evaluationCriteria": [
            "Thorough understanding of both concepts",
            "Ability to distinguish and provide clear examples",
            "Explanations of why one is better than the other in specific contexts"
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "Performance",
            "Open-Ended",
            "Comparison",
            "Debounce",
            "Throttle"
          ],
          "prerequisites": [
            "debounce_concept",
            "throttle_concept"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_polling_1",
          "topic": "API and Data Handling: Polling",
          "level": "open",
          "type": "open",
          "question": "What's the best approach to implement a polling mechanism for stock market API data in a frontend application? Discuss the trade-offs between `setInterval` and recursive `setTimeout` for this purpose.",
          "answer": "For implementing a polling mechanism for dynamic data like stock market updates, the **recursive `setTimeout` approach is generally considered superior** to `setInterval`.\n\n**1. `setInterval` Approach:**\n*   **Mechanism**: Executes a function repeatedly at fixed time intervals. `setInterval(() => fetchAndUpdate(), interval);`\n*   **Pros**: Simple to set up.\n*   **Cons**: If the `fetchAndUpdate` operation takes longer than the `interval`, subsequent calls will start before previous ones finish. This can lead to an accumulation of pending requests, potential network congestion, server overload, and inconsistent data if responses arrive out of order.\n\n**2. Recursive `setTimeout` Approach:**\n*   **Mechanism**: Schedules the next execution of a function *after* the current execution has completed (or failed). `function poll() { fetchAndUpdate().finally(() => setTimeout(poll, interval)); } poll();`\n*   **Pros**: Prevents overlapping requests. The next fetch only begins after the previous one has resolved (either successfully or with an error). This makes the polling more robust and less prone to resource exhaustion or data inconsistencies, especially with unreliable or slow APIs.\n*   **Cons**: Slightly more complex to write initially than `setInterval`.\n\n**Trade-offs Summary:**\n*   **`setInterval`**: Good for simple, fast, non-blocking tasks where execution time is negligible compared to the interval. Risk of overlapping requests for asynchronous operations.\n*   **Recursive `setTimeout`**: Preferred for asynchronous operations (like API calls) as it guarantees that a new request doesn't start until the previous one has finished, preventing request queueing and providing more control over the polling cycle. This ensures data freshness while respecting API rate limits and preventing client/server overload.\n\nFor stock market data, where API calls are asynchronous and can vary in latency, the recursive `setTimeout` is the safer and more reliable choice.",
          "options": [],
          "analysisPoints": [
            "Clear explanation of both `setInterval` and `setTimeout` polling methods.",
            "Accurate identification of pros and cons for each, especially concerning overlapping requests.",
            "Justification for preferring recursive `setTimeout` for API polling.",
            "Mention of error handling and stopping mechanisms."
          ],
          "keyConcepts": [
            "Polling",
            "setInterval",
            "setTimeout",
            "API Data",
            "Asynchronous Operations",
            "Performance",
            "Error Handling"
          ],
          "evaluationCriteria": [
            "Comprehensive comparison of the two polling methods",
            "Sound reasoning for preferred approach in context",
            "Awareness of potential pitfalls and best practices"
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "API",
            "Polling",
            "Async",
            "Open-Ended"
          ],
          "prerequisites": [
            "javascript_timers",
            "promises",
            "fetch_api"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_polling_2",
          "topic": "API and Data Handling: Polling",
          "level": "medium",
          "type": "mcq",
          "question": "Consider a scenario where you need to fetch updates from a slow API every 2 seconds. Which polling mechanism is generally more robust for this situation, and why?\n\nA: Using `setInterval(fetchData, 2000)`\nB: Using recursive `setTimeout` where `setTimeout(poll, 2000)` is called inside the `finally` block of the `fetchData` promise.\n\nWhich option is better?",
          "answer": "B, because it ensures that the next API call only starts after the previous one has completed, preventing overlapping requests.",
          "options": [
            "A, because `setInterval` is simpler to implement and provides a constant polling rate.",
            "B, because it ensures that the next API call only starts after the previous one has completed, preventing overlapping requests.",
            "A, because `setTimeout` can lead to an accumulation of unhandled errors.",
            "Neither, WebSockets are always the best solution for real-time data."
          ],
          "analysisPoints": [
            "Tests understanding of the core difference between `setInterval` and `setTimeout` for asynchronous tasks.",
            "Highlights the risk of overlapping requests with `setInterval`.",
            "Emphasizes the reliability of `setTimeout` waiting for promise resolution.",
            "Distinguishes polling from true real-time solutions like WebSockets."
          ],
          "keyConcepts": [
            "Polling",
            "setInterval",
            "setTimeout",
            "Asynchronous Operations",
            "Promise.finally"
          ],
          "evaluationCriteria": [
            "Correct choice and reasoning for robust API polling",
            "Awareness of potential performance and data integrity issues"
          ],
          "example": "If `fetchData` takes 3 seconds, `setInterval` would try to start a new request at 2 seconds, while the first one is still running. This would lead to concurrent requests, potentially overloading the server or causing data inconsistencies. Recursive `setTimeout` ensures the 3-second `fetchData` completes before the next 2-second delay even begins, so the next request would start at `3 + 2 = 5` seconds.",
          "tags": [
            "JavaScript",
            "API",
            "Polling",
            "MCQ",
            "Async"
          ],
          "prerequisites": [
            "promises",
            "javascript_timers"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_polling_3",
          "topic": "API and Data Handling: Polling",
          "level": "easy",
          "type": "flashcard",
          "question": "What is 'polling' in the context of fetching data from an API?",
          "answer": "Polling is a technique where a client periodically sends requests to a server to check for new data or updates, typically at regular intervals.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Polling",
            "API",
            "Data Fetching"
          ],
          "evaluationCriteria": [
            "Recall of polling definition"
          ],
          "example": "",
          "tags": [
            "JavaScript",
            "API",
            "Flashcard",
            "Polling"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_polling_4",
          "topic": "API and Data Handling: Polling",
          "level": "medium",
          "type": "code",
          "question": "Given the following asynchronous `fetchData` function, write a function `startPolling` that uses recursive `setTimeout` to poll `fetchData` every 1500 milliseconds. The `startPolling` function should also return a cleanup function to stop the polling.",
          "answer": "```javascript\nasync function fetchData(id) {\n  console.log(`Fetching data for ID: ${id}...`);\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const data = `Data for ${id} @ ${new Date().toLocaleTimeString()}`;\n      console.log(`Received: ${data}`);\n      resolve(data);\n    }, Math.random() * 500 + 200); // Simulate variable network delay\n  });\n}\n\nfunction startPolling(dataId, interval) {\n  let timeoutId = null;\n\n  async function poll() {\n    try {\n      await fetchData(dataId);\n    } catch (error) {\n      console.error('Polling error:', error);\n      // Implement error handling logic here, e.g., retry count, back-off\n    } finally {\n      // Schedule the next poll only after the current one completes (success or failure)\n      timeoutId = setTimeout(poll, interval);\n    }\n  }\n\n  // Start the first poll immediately\n  poll();\n\n  // Return a cleanup function to stop polling\n  return () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n      console.log(`Polling for ID ${dataId} stopped.`);\n    }\n  };\n}\n\n// Usage Example:\n// const stopMarketPolling = startPolling('stock_A', 1500);\n// setTimeout(() => {\n//   stopMarketPolling();\n// }, 7000); // Stop after 7 seconds\n```",
          "options": [],
          "analysisPoints": [
            "Correctly using `setTimeout` recursively within the `finally` block of a Promise.",
            "Ensuring the `async` nature of `fetchData` is handled with `await`.",
            "Returning a function to clean up the `setTimeout` to prevent memory leaks.",
            "Basic error handling within the polling loop."
          ],
          "keyConcepts": [
            "Polling",
            "Recursive setTimeout",
            "Async/Await",
            "Promises",
            "Error Handling",
            "Cleanup Functions"
          ],
          "evaluationCriteria": [
            "Functional correctness of polling with `setTimeout`",
            "Proper cleanup mechanism",
            "Adherence to asynchronous best practices"
          ],
          "example": "The solution demonstrates how `startPolling` schedules `fetchData` and then recursively calls itself within the `.finally()` block, ensuring a new fetch only begins after the previous one is done. The returned function `stopPolling` provides a way to gracefully end the polling cycle.",
          "tags": [
            "JavaScript",
            "API",
            "Polling",
            "Coding Challenge",
            "Async"
          ],
          "prerequisites": [
            "promises",
            "async_await",
            "javascript_timers"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_polling_5",
          "topic": "API and Data Handling: Polling",
          "level": "easy",
          "type": "mcq",
          "question": "You are implementing a UI component that needs to fetch a list of unread messages every 5 seconds. Which of the following is a potential problem if you use `setInterval` for this task, especially if the network is slow?",
          "answer": "If an API call takes longer than 5 seconds, multiple concurrent requests might be initiated, leading to a queue of pending requests.",
          "options": [
            "The component will stop fetching messages automatically after 10 requests.",
            "The browser might block `setInterval` calls for security reasons.",
            "If an API call takes longer than 5 seconds, multiple concurrent requests might be initiated, leading to a queue of pending requests.",
            "The `setInterval` function will automatically switch to `setTimeout` if performance issues are detected."
          ],
          "analysisPoints": [
            "Tests understanding of `setInterval`'s synchronous scheduling.",
            "Highlights the consequence of API call duration exceeding interval.",
            "Compares `setInterval` behavior to recursive `setTimeout` implications."
          ],
          "keyConcepts": [
            "setInterval",
            "Polling Pitfalls",
            "Asynchronous Operations",
            "Concurrency"
          ],
          "evaluationCriteria": [
            "Correct identification of `setInterval`'s weakness in asynchronous polling",
            "Understanding of potential performance and network issues"
          ],
          "example": "If your `fetchMessages` API call takes 7 seconds and you use `setInterval(fetchMessages, 5000)`, the first call starts at 0s, the second at 5s (while the first is still running), the third at 10s (while the first two might still be running). This leads to a build-up of uncompleted requests, increasing network load and potentially causing the server to reject requests or the client to run out of resources.",
          "tags": [
            "JavaScript",
            "API",
            "Polling",
            "MCQ",
            "Performance"
          ],
          "prerequisites": [
            "javascript_timers",
            "async_programming"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_custom_reduce_polyfill",
          "title": "Implement `Array.prototype.customReduce`",
          "description": "\nYour task is to implement a polyfill for the `Array.prototype.reduce` method, named `Array.prototype.customReduce`.\n\n**Requirements:**\n1.  The `customReduce` method should be available on all array instances.\n2.  It must accept a `callback` function and an optional `initialValue`.\n3.  The `callback` function should receive `(accumulator, currentValue, currentIndex, array)` arguments, mimicking the native `reduce`.\n4.  If `initialValue` is provided, the accumulation should start with it, and iteration from the first element.\n5.  If `initialValue` is *not* provided, the first element of the array should be used as the `accumulator`, and iteration should start from the second element.\n6.  If the array is empty and `initialValue` is *not* provided, it should throw a `TypeError` (e.g., 'Reduce of empty array with no initial value').\n7.  Ensure the `this` context inside `customReduce` refers to the array itself.\n\n**Hints:**\n*   Use `Array.prototype` to add the method.\n*   Pay close attention to the `initialValue` parameter and its impact on the starting index of your loop.\n*   Consider edge cases like empty arrays.\n",
          "difficulty": "medium",
          "startingCode": "Array.prototype.customReduce = function(callback, initialValue) {\n  // TODO: Implement the required functionality\n  const arr = this;\n  let accumulator;\n  let startIndex;\n\n  // Your implementation here\n\n  // Example of usage inside the function for context:\n  // accumulator = callback(accumulator, arr[i], i, arr);\n\n  // return accumulator;\n};\n\n// Example usage:\n// const numbers = [1, 2, 3, 4];\n// const sum = numbers.customReduce((acc, current) => acc + current, 0);\n// console.log(sum); // 10\n",
          "solutionCode": "Array.prototype.customReduce = function(callback, initialValue) {\n  const arr = this;\n  let accumulator = initialValue;\n  let startIndex = 0;\n\n  if (initialValue === undefined) {\n    if (arr.length === 0) {\n      throw new TypeError('Reduce of empty array with no initial value');\n    }\n    accumulator = arr[0];\n    startIndex = 1;\n  }\n\n  for (let i = startIndex; i < arr.length; i++) {\n    if (i in arr) { // Ensures it only processes existing indices (like native reduce)\n      accumulator = callback(accumulator, arr[i], i, arr);\n    }\n  }\n\n  return accumulator;\n};\n",
          "testCases": [
            "Test with sum of numbers with initial value: `[1,2,3].customReduce((acc,v)=>acc+v, 0)` should be `6`.",
            "Test with sum of numbers without initial value: `[1,2,3].customReduce((acc,v)=>acc+v)` should be `6`.",
            "Test with empty array and no initial value: `[].customReduce((acc,v)=>acc+v)` should throw `TypeError`.",
            "Test with empty array and initial value: `[].customReduce((acc,v)=>acc+v, 10)` should be `10`.",
            "Test with single element array and no initial value: `[5].customReduce((acc,v)=>acc+v)` should be `5`.",
            "Test with object transformation: `[{a:1},{a:2}].customReduce((acc,v)=>{acc[v.a]=v; return acc;}, {})` should transform correctly.",
            "Test with sparse array: `[1, , 3].customReduce((acc,v)=>acc+v, 0)` should handle missing elements like native `reduce` (skipping them).",
            "Test `this` context and arguments: `['a','b'].customReduce(function(acc,v,i,arr){ console.log(this === window); return acc+v; }, '')` (in browser) or `console.log(this === global)` (Node) should indicate `this` is not global object inside callback, `i` and `arr` should be correct."
          ],
          "hints": [
            "The `this` keyword inside `customReduce` will correctly refer to the array when called as `arr.customReduce(...)`.",
            "Remember to check `arr.length` when `initialValue` is `undefined`."
          ],
          "tags": [
            "JavaScript",
            "Array Methods",
            "Polyfill",
            "Functional Programming"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "javascript_functions",
            "javascript_arrays",
            "javascript_prototypes",
            "javascript_closures"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Array.prototype.map",
            "Array.prototype.filter",
            "Higher-Order Functions"
          ]
        },
        {
          "id": "task_implement_debounce",
          "title": "Implement a Debounce Utility for Search Input",
          "description": "\nImplement a `debounce` function that delays the execution of a given function until a specified time (`delay`) has passed since the last time it was invoked. Then, apply this `debounce` function to simulate a search input field where an API call (represented by a `console.log`) should only happen after the user stops typing for 500 milliseconds.\n\n**Requirements:**\n1.  Create a `debounce(func, delay)` function.\n2.  The `debounce` function should return a new function that, when called, will manage the debouncing logic.\n3.  Ensure the original function (`func`) is called with the correct `this` context and arguments.\n4.  Simulate a search input by calling the debounced function multiple times in quick succession, followed by a pause, to demonstrate its effect.\n\n**Hints:**\n*   You'll need `setTimeout` and `clearTimeout`.\n*   Use a closure to keep track of the `timerId`.\n*   The `apply` method can help with context and arguments.",
          "difficulty": "medium",
          "startingCode": "function debounce(func, delay) {\n  let timerId;\n  // TODO: Implement debounce logic here\n  return function(...args) {\n    // Your implementation\n  };\n}\n\n// Simulate an API call / heavy operation\nconst performSearch = (query) => {\n  console.log(`Performing search for: \"${query}\"`);\n  // In a real app, this would be an actual API call (e.g., fetch(`/api/search?q=${query}`)))\n};\n\n// TODO: Apply debounce and simulate input\n// const debouncedSearch = debounce(performSearch, 500);\n// debouncedSearch('apple');\n// debouncedSearch('apple pie');\n// (wait 500ms) -> Only 'Performing search for: \"apple pie\"' should log\n",
          "solutionCode": "function debounce(func, delay) {\n  let timerId;\n  return function(...args) {\n    const context = this;\n    clearTimeout(timerId);\n    timerId = setTimeout(() => {\n      func.apply(context, args);\n    }, delay);\n  };\n}\n\nconst performSearch = (query) => {\n  console.log(`Performing search for: \"${query}\"`);\n};\n\nconst debouncedSearch = debounce(performSearch, 500);\n\nconsole.log('--- Simulating rapid typing: ---');\ndebouncedSearch('a');\ndebouncedSearch('ap');\ndebouncedSearch('app');\ndebouncedSearch('appl');\ndebouncedSearch('apple'); // This is the call that will eventually trigger\n\nconsole.log('--- Waiting for debounce delay... ---');\n// Introduce a pause, so 'apple' is the last one called within the delay period\nsetTimeout(() => {\n  console.log('--- After debounce period (500ms + buffer) ---');\n  // If nothing else is called after 'apple' for 500ms, it will fire.\n}, 700); \n\n// Another set of rapid calls, then a longer pause\nsetTimeout(() => {\n  console.log('\\n--- Simulating another rapid typing set: ---');\n  debouncedSearch('banana');\n  setTimeout(() => debouncedSearch('banana split'), 100); // Resets timer\n  setTimeout(() => debouncedSearch('banana split bread'), 200); // Resets timer\n  setTimeout(() => debouncedSearch('banana split bread pudding'), 300); // Resets timer\n\n  console.log('--- Waiting for debounce delay (for final typing)... ---');\n  setTimeout(() => {\n    console.log('--- After final debounce period ---');\n  }, 800); // 300ms (last call) + 500ms (delay) + buffer\n}, 1500); // Start this simulation after the first one is likely done\n",
          "testCases": [
            "Rapid calls: `debouncedSearch('a'); debouncedSearch('b'); debouncedSearch('c');` followed by a pause should only trigger `performSearch` once with `'c'`.",
            "Single call: `debouncedSearch('test')` followed by a pause should trigger `performSearch` once with `'test'`.",
            "No calls after initial setup: Ensure `performSearch` is not called if `debouncedSearch` is never invoked.",
            "Verify `this` context: If `performSearch` is a method of an object, ensure `this` inside `performSearch` correctly refers to that object.",
            "Verify arguments: Ensure `performSearch` receives the correct arguments from the last call.",
            "Zero delay: `debounce(func, 0)` should effectively behave like a next-tick debounce or immediate call."
          ],
          "hints": [
            "The `timerId` variable must be accessible to both `setTimeout` and `clearTimeout` calls, which can be achieved through closure.",
            "Remember that `setTimeout` returns a numerical `timerId` that `clearTimeout` uses.",
            "To ensure the correct `this` context for `func`, use `func.apply(this, args)` or `func.call(this, ...args)`."
          ],
          "tags": [
            "JavaScript",
            "Performance",
            "Functions",
            "Debounce",
            "Event Handling"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "javascript_closures",
            "javascript_timers",
            "functions_apply_call"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "throttle",
            "event_listeners",
            "ui_optimization"
          ]
        },
        {
          "id": "task_implement_throttle",
          "title": "Implement a Throttle Utility for Scroll Events",
          "description": "\nImplement a `throttle` function that limits the rate at which a function can be called to at most once within a specified `interval`. Then, apply this `throttle` function to simulate a scroll event handler where a heavy operation (represented by a `console.log`) should only occur every 300 milliseconds, regardless of how frequently the scroll event fires.\n\n**Requirements:**\n1.  Create a `throttle(func, interval)` function.\n2.  The `throttle` function should return a new function that, when called, will manage the throttling logic.\n3.  Ensure the original function (`func`) is called with the correct `this` context and arguments.\n4.  Simulate rapid scroll events to demonstrate that `func` is only called once per `interval`.\n\n**Hints:**\n*   You'll need a flag (e.g., `isThrottled`) and `setTimeout`.\n*   The flag should be set to `true` when the function executes and reset to `false` after the `interval`.",
          "difficulty": "medium",
          "startingCode": "function throttle(func, interval) {\n  let isThrottled = false;\n  // TODO: Implement throttle logic here\n  return function(...args) {\n    // Your implementation\n  };\n}\n\n// Simulate a heavy scroll handling operation\nconst handleScrollLogic = () => {\n  console.log(`Scroll event handled at ${new Date().toLocaleTimeString()}`);\n  // In a real app, this might involve complex DOM reads/writes or calculations\n};\n\n// TODO: Apply throttle and simulate scroll events\n// const throttledScroll = throttle(handleScrollLogic, 300);\n// throttledScroll();\n// throttledScroll();\n// throttledScroll();\n// (wait 300ms) -> Only the first call should log immediately, then another after 300ms if called again\n",
          "solutionCode": "function throttle(func, interval) {\n  let isThrottled = false;\n  \n  return function(...args) {\n    const context = this;\n    if (!isThrottled) {\n      func.apply(context, args);\n      isThrottled = true;\n      \n      setTimeout(() => {\n        isThrottled = false;\n      }, interval);\n    }\n  };\n}\n\nconst handleScrollLogic = () => {\n  console.log(`Scroll event handled at ${new Date().toLocaleTimeString()}`);\n};\n\nconst throttledScroll = throttle(handleScrollLogic, 300);\n\nconsole.log('--- Simulating rapid scroll events: ---');\nthrottledScroll(); // Call 1: Logs immediately, isThrottled = true\nthrottledScroll(); // Call 2: Ignored\nthrottledScroll(); // Call 3: Ignored\n\n// After 300ms, isThrottled becomes false, allowing the next call\nsetTimeout(() => {\n  console.log('\\n--- After 300ms interval: ---');\n  throttledScroll(); // Call 4: Logs immediately, isThrottled = true\n  throttledScroll(); // Call 5: Ignored\n}, 301);\n\n// Another set of rapid calls after another interval\nsetTimeout(() => {\n  console.log('\\n--- After another 300ms interval: ---');\n  throttledScroll(); // Call 6: Logs immediately, isThrottled = true\n  throttledScroll(); // Call 7: Ignored\n  setTimeout(() => throttledScroll(), 100); // Call 8: Ignored (still within initial 300ms window)\n}, 602);\n",
          "testCases": [
            "Rapid calls: `throttledScroll(); throttledScroll(); throttledScroll();` should only trigger `handleScrollLogic` once initially, then again after the interval if called again.",
            "Single call: `throttledScroll()` should trigger `handleScrollLogic` once.",
            "Verify interval: Ensure the function does not fire before the `interval` has passed since the last execution.",
            "Verify `this` context: If `handleScrollLogic` is a method of an object, ensure `this` inside `handleScrollLogic` correctly refers to that object.",
            "Verify arguments: Ensure `handleScrollLogic` receives the correct arguments from the first call in a given interval.",
            "Zero interval: `throttle(func, 0)` should effectively behave like a normal function call."
          ],
          "hints": [
            "Use a boolean flag (e.g., `isThrottled`) to control whether the function can execute.",
            "The `setTimeout` is crucial for resetting the `isThrottled` flag after the `interval`.",
            "The `this` context and arguments must be passed correctly using `apply`."
          ],
          "tags": [
            "JavaScript",
            "Performance",
            "Functions",
            "Throttle",
            "Event Handling"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "javascript_closures",
            "javascript_timers",
            "functions_apply_call"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "debounce",
            "event_listeners",
            "ui_optimization"
          ]
        },
        {
          "id": "task_implement_polling_with_timeout",
          "title": "Implement a Robust API Polling Mechanism",
          "description": "\nImplement a flexible and robust API polling mechanism using recursive `setTimeout`. This mechanism should periodically fetch data from a simulated API endpoint, update a `console.log` (representing UI update), and provide a way to stop the polling.\n\n**Requirements:**\n1.  Create an `async` function `fetchSimulatedStockData(symbol)` that simulates an API call. It should:\n    *   Take a `symbol` (e.g., 'AAPL', 'GOOG') as input.\n    *   Return a Promise that resolves after a random delay (e.g., 200-800ms) with a simulated stock price and timestamp.\n    *   Log `Fetching data for [symbol]...` when called and `Received data for [symbol]: [price] at [time]` on success.\n    *   Randomly `reject` the promise sometimes (e.g., 10% chance) to simulate network errors.\n2.  Create a `startPolling(symbol, interval)` function.\n    *   This function should use recursive `setTimeout` to call `fetchSimulatedStockData` for the given `symbol` at the specified `interval` (in milliseconds).\n    *   Crucially, the next `setTimeout` call must be scheduled *only after* the current `fetchSimulatedStockData` Promise has settled (either resolved or rejected).\n    *   Implement basic error handling for `fetchSimulatedStockData` errors (log the error, but continue polling).\n    *   The `startPolling` function must return a cleanup function (`stopPolling`) that, when called, stops the polling process.\n3.  Demonstrate usage: Start polling for a symbol, and then stop it after a few seconds.\n\n**Hints:**\n*   Use `Promise.prototype.finally()` to schedule the next `setTimeout` call, ensuring it runs regardless of promise resolution or rejection.\n*   Store the `setTimeout` ID to enable cancellation with `clearTimeout`.",
          "difficulty": "hard",
          "startingCode": "async function fetchSimulatedStockData(symbol) {\n  console.log(`Fetching data for ${symbol}...`);\n  return new Promise((resolve, reject) => {\n    const delay = Math.random() * 600 + 200; // 200-800ms delay\n    setTimeout(() => {\n      if (Math.random() < 0.1) { // 10% chance of error\n        reject(new Error(`Network error for ${symbol}`));\n      } else {\n        const price = (Math.random() * 100 + 100).toFixed(2); // Price between 100-200\n        console.log(`Received data for ${symbol}: $${price} at ${new Date().toLocaleTimeString()}`);\n        resolve({ symbol, price, timestamp: new Date().toISOString() });\n      }\n    }, delay);\n  });\n}\n\nfunction startPolling(symbol, interval) {\n  let timeoutId = null;\n\n  // TODO: Implement recursive setTimeout polling logic here\n\n  // Make sure to return a function to stop polling\n  return () => {\n    // Cleanup logic\n  };\n}\n\n// Example Usage (uncomment to test):\n// const stopAAPLPolling = startPolling('AAPL', 1500); // Poll every 1.5 seconds\n\n// setTimeout(() => {\n//   console.log('\\nStopping AAPL polling after 6 seconds.');\n//   stopAAPLPolling();\n// }, 6000);\n\n// const stopGOOGPolling = startPolling('GOOG', 2000);\n\n// setTimeout(() => {\n//   console.log('\\nStopping GOOG polling after 8 seconds.');\n//   stopGOOGPolling();\n// }, 8000);\n",
          "solutionCode": "async function fetchSimulatedStockData(symbol) {\n  console.log(`Fetching data for ${symbol}...`);\n  return new Promise((resolve, reject) => {\n    const delay = Math.random() * 600 + 200; // 200-800ms delay\n    setTimeout(() => {\n      if (Math.random() < 0.1) { // 10% chance of error\n        reject(new Error(`Network error for ${symbol}`));\n      } else {\n        const price = (Math.random() * 100 + 100).toFixed(2); // Price between 100-200\n        console.log(`Received data for ${symbol}: $${price} at ${new Date().toLocaleTimeString()}`);\n        resolve({ symbol, price, timestamp: new Date().toISOString() });\n      }\n    }, delay);\n  });\n}\n\nfunction startPolling(symbol, interval) {\n  let timeoutId = null;\n\n  async function poll() {\n    try {\n      await fetchSimulatedStockData(symbol);\n    } catch (error) {\n      console.error(`Polling for ${symbol} failed:`, error.message);\n      // Decide whether to stop or continue polling on error\n      // For this task, we continue polling.\n    } finally {\n      // Schedule the next poll only after the current fetch (and its processing) is complete\n      timeoutId = setTimeout(poll, interval);\n    }\n  }\n\n  // Start the first poll immediately\n  poll();\n\n  // Return a cleanup function to stop polling\n  return () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n      console.log(`Polling for ${symbol} stopped.`);\n    }\n  };\n}\n\n// Example Usage:\nconst stopAAPLPolling = startPolling('AAPL', 1500); // Poll every 1.5 seconds\n\nsetTimeout(() => {\n  console.log('\\nStopping AAPL polling after 6 seconds.');\n  stopAAPLPolling();\n}, 6000);\n\nconst stopGOOGPolling = startPolling('GOOG', 2000);\n\nsetTimeout(() => {\n  console.log('\\nStopping GOOG polling after 8 seconds.');\n  stopGOOGPolling();\n}, 8000);\n",
          "testCases": [
            "Polling starts and fetches data: Verify `fetchSimulatedStockData` logs appear at regular intervals (approx `interval + fetch_delay`).",
            "Polling handles errors: Verify `Network error` logs appear without stopping the polling when simulated.",
            "Polling stops correctly: Verify that calling the returned `stopPolling` function prevents further `fetchSimulatedStockData` calls.",
            "Concurrent polling for different symbols: Ensure multiple `startPolling` calls run independently.",
            "Timing: Ensure the `interval` is respected *after* the fetch completes, not concurrently."
          ],
          "hints": [
            "The `async` keyword for `poll` is important to allow `await`ing `fetchSimulatedStockData`.",
            "The `.finally()` block on a Promise ensures a piece of code runs whether the Promise resolves or rejects.",
            "Remember that `setTimeout` returns an ID that `clearTimeout` can use to cancel it."
          ],
          "tags": [
            "JavaScript",
            "API",
            "Polling",
            "Async",
            "Promises",
            "Error Handling"
          ],
          "timeEstimate": 75,
          "prerequisites": [
            "promises",
            "async_await",
            "javascript_timers",
            "fetch_api_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "WebSockets",
            "Server-Sent Events",
            "Resource Management"
          ]
        }
      ]
    }
  },
  {
    "id": "03f49844-e9cf-44db-867e-2550f5e64414",
    "startLine": 15600,
    "endLine": 15699,
    "processedDate": "2025-06-17T15:06:14.749Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_fetch_api_promises",
          "title": "Asynchronous Operations: Fetch API and Promises",
          "content": "Asynchronous operations are fundamental in modern web development, allowing applications to perform long-running tasks (like network requests) without blocking the main thread, thus maintaining a responsive user interface. The `Fetch API` provides a modern, flexible way to make network requests, replacing older methods like `XMLHttpRequest`.\n\n## The Fetch API\n`fetch()` is a global method that initiates a network request. It returns a `Promise` that resolves to the `Response` object representing the response to your request. A `Response` object is not directly the JSON data; it's an HTTP response. To extract the actual data (e.g., JSON, text, blob), you use methods like `response.json()`, `response.text()`, etc., which themselves return promises.\n\n## Promises\nPromises are objects representing the eventual completion or failure of an asynchronous operation and its resulting value. A Promise can be in one of three states:\n*   **Pending:** Initial state, neither fulfilled nor rejected.\n*   **Fulfilled (Resolved):** Meaning the operation completed successfully.\n*   **Rejected:** Meaning the operation failed.\n\n## Promise Chaining\nPromises allow for chaining `then()` calls to handle sequential asynchronous operations. Each `.then()` call returns a new promise, allowing you to chain subsequent operations. The `catch()` method is used to handle errors that occur anywhere in the promise chain.\n\n### Key Concepts\n-   `fetch(url, options)`: Initiates a network request.\n-   `Response` object: Represents the HTTP response. Contains methods to parse the body (`.json()`, `.text()`, etc.).\n-   `.then(onFulfilled, onRejected)`: Handles successful completion or rejection of a promise.\n-   `.catch(onRejected)`: A shorthand for `.then(null, onRejected)` for error handling.\n-   `.finally(onFinally)`: Executes a callback when the promise is settled (either fulfilled or rejected), regardless of the outcome.\n\n### Error Handling\n`fetch()` only rejects a promise if a network error occurs or if the request is aborted. It does **not** reject for HTTP error statuses (like 404 Not Found or 500 Internal Server Error). For these, you must check `response.ok` property (which is `true` for 2xx status codes) within the `.then()` block.\n",
          "examples": [
            {
              "id": "example_fetch_api_promises_1",
              "title": "Basic Fetch Request with Promise Chaining",
              "code": "async function fetchStockData(endpoint) {\n  try {\n    const response = await fetch(endpoint);\n    // Check if the response was successful (e.g., status 200-299)\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const data = await response.json();\n    // Update UI with new stock data\n    console.log('Updated stock data:', data);\n    return data;\n  } catch (error) {\n    console.error('Error fetching stock data:', error);\n    // Handle error in UI, e.g., display error message\n    throw error; // Re-throw to propagate the error if needed\n  }\n}\n\n// Original example from markdown (using .then/.catch)\nfunction fetchStockDataLegacy(endpoint) {\n  return fetch(endpoint)\n    .then(response => {\n      if (!response.ok) {\n        // Handle HTTP errors specifically\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return response.json();\n    })\n    .then(data => {\n      // Update UI with new stock data\n      console.log('Updated stock data:', data);\n      return data;\n    })\n    .catch(error => {\n      console.error('Error fetching stock data:', error);\n      // Handle error in UI\n    });\n}\n\n// Example Usage:\n// fetchStockData('/api/stocks');\n// fetchStockDataLegacy('/api/stocks');",
              "explanation": "This example demonstrates how to use the Fetch API with Promise chaining (`.then()`, `.catch()`) and also with modern `async/await` syntax for better readability. It highlights the importance of checking `response.ok` for HTTP error statuses, as `fetch` itself only rejects on network errors. The console logs show how to access and use the fetched data.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_fetch_api_1",
            "question_promise_states_2",
            "question_fetch_error_handling_3",
            "question_async_await_vs_promises_4"
          ],
          "relatedTasks": [
            "task_implement_fetch_display"
          ],
          "tags": [
            "asynchronous-javascript",
            "fetch-api",
            "promises",
            "error-handling",
            "web-apis"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "callbacks"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "single_page_applications",
            "api_integration",
            "state_management"
          ]
        },
        {
          "id": "theory_es6_vs_es5_inheritance",
          "title": "ES6 Classes vs. ES5 Prototype Inheritance",
          "content": "JavaScript is a prototype-based language, meaning objects inherit properties and methods from other objects. Before ES6, inheritance was primarily implemented using constructor functions and modifying the `prototype` chain. ES6 introduced `class` syntax, which is syntactic sugar over this existing prototype-based inheritance model, providing a more familiar object-oriented programming (OOP) style.\n\n## ES5 Prototype Inheritance\nIn ES5, you define 'classes' using constructor functions. Methods intended for inheritance are added to the constructor's `prototype` object. Inheritance between 'classes' is achieved by setting the `prototype` of the child constructor to an instance of the parent's prototype, often using `Object.create()`. The `call()` or `apply()` methods are used within the child constructor to invoke the parent constructor, ensuring that parent properties are initialized on the child instance. A common pitfall is the `constructor` property on the child's prototype, which needs to be explicitly reset.\n\n### Key Concepts (ES5)\n-   **Constructor Function:** A regular JavaScript function used with `new` keyword to create objects.\n-   `prototype` Property: An object associated with every function, where inherited properties and methods are stored.\n-   `__proto__` Property: An internal property on an object that points to its prototype (i.e., the object it inherits from).\n-   `Object.create(proto)`: Creates a new object with the specified prototype object.\n-   `Parent.call(this, ...args)`: Invokes the `Parent` constructor function with `this` bound to the child instance, allowing property inheritance.\n\n## ES6 Class Syntax\nES6 classes provide a cleaner, more intuitive syntax for creating constructor functions and managing inheritance. They are not true classes in the traditional OOP sense (like Java or C++) but rather a different way to write prototype-based inheritance.\n\n### Key Concepts (ES6)\n-   `class MyClass { ... }`: Defines a class.\n-   `constructor(...)`: A special method for creating and initializing an object created with a class.\n-   `extends OtherClass`: Used in a class declaration or class expression to create a class that is a child of another class.\n-   `super()`: Used to call the constructor of the parent class. Must be called before `this` is accessed in a derived class's constructor.\n\nDespite the different syntax, the underlying mechanism remains prototype-based. Understanding the ES5 equivalent helps in debugging and comprehending advanced JavaScript concepts.\n",
          "examples": [
            {
              "id": "example_es6_vs_es5_inheritance_1",
              "title": "Converting ES6 Class Inheritance to ES5 Prototype Inheritance",
              "code": "// ES6 Class Inheritance\nclass ParentES6 {\n  constructor(name) {\n    this.name = name;\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  static greet() {\n    return \"Hello from Parent!\";\n  }\n}\n\nclass ChildES6 extends ParentES6 {\n  constructor(name, age) {\n    super(name); // Calls ParentES6's constructor\n    this.age = age;\n  }\n\n  getDetails() {\n    return `${this.getName()} is ${this.age} years old.`;\n  }\n}\n\n// Converted to ES5 Prototype Inheritance\nfunction ParentES5(name) {\n  this.name = name;\n}\n\nParentES5.prototype.getName = function() {\n  return this.name;\n};\n\n// Static method equivalent in ES5\nParentES5.greet = function() {\n  return \"Hello from Parent!\";\n};\n\nfunction ChildES5(name, age) {\n  // Call parent constructor with current context to inherit properties\n  ParentES5.call(this, name);\n  this.age = age;\n}\n\n// Set up prototype chain: ChildES5's prototype inherits from ParentES5's prototype\nChildES5.prototype = Object.create(ParentES5.prototype);\n// Fix constructor property, as Object.create sets it to ParentES5\nChildES5.prototype.constructor = ChildES5;\n\nChildES5.prototype.getDetails = function() {\n  // Access parent method via prototype chain\n  return `${this.getName()} is ${this.age} years old.`;\n};\n\n// Example Usage:\nconst parentES6 = new ParentES6('Alice');\nconsole.log(parentES6.getName()); // Alice\n\nconst childES6 = new ChildES6('Bob', 30);\nconsole.log(childES6.getDetails()); // Bob is 30 years old.\nconsole.log(ParentES6.greet()); // Hello from Parent!\n\nconst parentES5 = new ParentES5('Charlie');\nconsole.log(parentES5.getName()); // Charlie\n\nconst childES5 = new ChildES5('David', 25);\nconsole.log(childES5.getDetails()); // David is 25 years old.\nconsole.log(ParentES5.greet()); // Hello from Parent!\n\n// Check inheritance chain:\nconsole.log(childES6 instanceof ChildES6); // true\nconsole.log(childES6 instanceof ParentES6); // true\nconsole.log(childES5 instanceof ChildES5); // true\nconsole.log(childES5 instanceof ParentES5); // true",
              "explanation": "This example provides a side-by-side comparison of ES6 class inheritance and its equivalent ES5 prototype-based implementation. It demonstrates how to handle constructors (`super()` vs. `Parent.call(this)`), prototype methods, and the crucial step of setting up the prototype chain (`Object.create()`) and fixing the `constructor` property in ES5. It also includes an example of a static method equivalent.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_es6_to_es5_inheritance_1",
            "question_prototype_chain_2",
            "question_super_keyword_3",
            "question_this_in_constructors_4",
            "question_instanceof_5"
          ],
          "relatedTasks": [
            "task_inheritance_conversion"
          ],
          "tags": [
            "javascript",
            "oop",
            "inheritance",
            "es6",
            "es5",
            "prototypes",
            "classes"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_objects",
            "functions_as_first_class_citizens"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "framework_understanding",
            "library_development",
            "advanced_javascript"
          ]
        },
        {
          "id": "theory_array_processing_hash_maps",
          "title": "Array Processing and Hash Maps (Two Sum Problem)",
          "content": "Array processing is a fundamental skill in algorithm design. Many problems involve iterating through arrays to find specific elements, pairs, or patterns. One common challenge is optimizing these operations for better time complexity.\n\n## Hash Maps (Map/Set in JavaScript)\nHash maps (also known as hash tables, dictionaries, or objects/Maps in JavaScript) are data structures that store key-value pairs and allow for extremely fast (average O(1) time) lookups, insertions, and deletions. This efficiency makes them invaluable for problems requiring quick checks for the existence of an element or its complement.\n\n## The Two Sum Problem\nThe 'Two Sum' problem is a classic algorithm question: given an array of integers `nums` and a target integer `target`, return indices of the two numbers such that they add up to `target`. If there are multiple pairs, any one valid pair is acceptable. If no such pair exists, indicate that.\n\n### Hash Map Approach for Two Sum\nA highly efficient approach to solve the Two Sum problem is using a hash map. The strategy is to iterate through the array once. For each number `num` we encounter, we calculate its `complement` (i.e., `target - num`). We then check if this `complement` already exists in our hash map. If it does, we've found a pair. If not, we add the current `num` (and its index) to the hash map for future lookups.\n\n### Time and Space Complexity\n-   **Time Complexity: O(n)**. We iterate through the array once. Each hash map operation (insertion, lookup) takes average O(1) time.\n-   **Space Complexity: O(n)**. In the worst case, we might store all elements of the array in the hash map.\n\nThis approach significantly improves upon a naive O(n^2) nested loop solution.",
          "examples": [
            {
              "id": "example_two_sum_hash_map_1",
              "title": "Finding Pairs with a Target Sum using a Hash Map",
              "code": "/**\n * Finds pairs of numbers in an array that sum to a specific target.\n * @param {number[]} nums The input array of numbers.\n * @param {number} target The target sum.\n * @returns {Array<[number, number]>} An array of pairs that sum to the target.\n */\nfunction findPairsWithSum(nums, target) {\n  const pairs = [];\n  // Use a Map to store numbers encountered and their indices (or just their presence).\n  // For this problem, we just need presence, so a Set or Map with boolean value works.\n  const numMap = new Map(); \n  \n  for (const num of nums) {\n    const complement = target - num;\n    \n    // Check if the complement has been seen before\n    if (numMap.has(complement)) {\n      pairs.push([complement, num]); // Store the pair\n    }\n    \n    // Add the current number to the map\n    // We set a value (e.g., true) just to indicate presence.\n    // If we needed indices, we'd store numMap.set(num, index);\n    numMap.set(num, true);\n  }\n  \n  return pairs;\n}\n\n// Example 1: Basic usage\nconst numbers1 = [2, 7, 10, 1, 11, 15, 9];\nconst targetSum1 = 11;\nconst result1 = findPairsWithSum(numbers1, targetSum1);\nconsole.log(`Pairs for target ${targetSum1}:`, result1); // Expected: [[1, 10], [2, 9]] (order might vary)\n\n// Example 2: No pairs\nconst numbers2 = [1, 2, 3, 4];\nconst targetSum2 = 10;\nconst result2 = findPairsWithSum(numbers2, targetSum2);\nconsole.log(`Pairs for target ${targetSum2}:`, result2); // Expected: []\n\n// Example 3: Duplicate numbers and multiple pairs\nconst numbers3 = [3, 3, 6, 2, 8, 4];\nconst targetSum3 = 6;\nconst result3 = findPairsWithSum(numbers3, targetSum3);\nconsole.log(`Pairs for target ${targetSum3}:`, result3); // Expected: [[3,3], [2,4]] (order might vary)",
              "explanation": "This example demonstrates the hash map approach for finding pairs that sum to a target. It iterates through the `nums` array, calculates the `complement` for each `num`, and efficiently checks if the `complement` already exists in the `numMap`. If it does, a pair is found. The `numMap` stores previously encountered numbers, allowing for O(1) average time lookups. The complexity analysis highlights the efficiency gains over brute-force methods.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_two_sum_algorithm_1",
            "question_two_sum_complexity_2",
            "question_hash_map_usage_3",
            "question_two_sum_variations_4"
          ],
          "relatedTasks": [
            "task_two_sum_implementation"
          ],
          "tags": [
            "algorithms",
            "data-structures",
            "arrays",
            "hash-map",
            "time-complexity",
            "space-complexity"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_arrays",
            "basic_data_structures"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "algorithmic_thinking",
            "technical_interviews"
          ]
        },
        {
          "id": "theory_local_maximum",
          "title": "Finding a Local Maximum in an Array",
          "content": "A local maximum (also known as a peak element) in an array is an element that is greater than or equal to its immediate neighbors. For elements at the boundaries of the array, only one neighbor needs to be considered. If an array has multiple local maxima, the goal is typically to find any one of them.\n\n## Definition of Local Maximum\nAn element `arr[i]` is a local maximum if:\n*   `arr[i] >= arr[i-1]` (if `i > 0`) AND\n*   `arr[i] >= arr[i+1]` (if `i < arr.length - 1`)\n\n### Edge Cases:\n*   **Single element array:** The single element is always a local maximum.\n*   **First element:** `arr[0]` is a local maximum if `arr[0] >= arr[1]` (if `arr.length > 1`).\n*   **Last element:** `arr[arr.length - 1]` is a local maximum if `arr[arr.length - 1] >= arr[arr.length - 2]` (if `arr.length > 1`).\n\n## Algorithm: Linear Scan\nThe simplest approach to find a local maximum in an unsorted array is to perform a linear scan. Iterate through the array and for each element, check if it satisfies the local maximum condition. Since we only need *any* local maximum, we can return the first one found.\n\n### Time and Space Complexity\n*   **Time Complexity: O(n)** in the worst case, as we might need to iterate through the entire array.\n*   **Space Complexity: O(1)**, as we only use a few variables for iteration.\n\n## Optimized Approach (for specific cases): Binary Search\nIf the array is guaranteed to have a specific structure (e.g., unimodal array where elements strictly increase then strictly decrease), a more efficient binary search approach can find a peak in O(log n) time. However, for a general unsorted array where any local maximum is acceptable, the linear scan is straightforward and efficient enough.",
          "examples": [
            {
              "id": "example_local_maximum_1",
              "title": "Finding a Local Maximum using Linear Scan",
              "code": "/**\n * Finds a local maximum in an array.\n * A local maximum is an element that is greater than or equal to its neighbors.\n * @param {number[]} nums The input array of numbers.\n * @returns {number | null} The value of a local maximum, or null if the array is empty.\n */\nfunction findLocalMaximum(nums) {\n  if (!nums || nums.length === 0) {\n    return null; // Handle empty array\n  }\n  if (nums.length === 1) {\n    return nums[0]; // Single element is always a local maximum\n  }\n\n  // Check first element\n  if (nums[0] >= nums[1]) {\n    return nums[0];\n  }\n\n  // Check elements from index 1 to second-to-last\n  for (let i = 1; i < nums.length - 1; i++) {\n    if (nums[i] >= nums[i - 1] && nums[i] >= nums[i + 1]) {\n      return nums[i]; // Found a local maximum\n    }\n  }\n\n  // Check last element\n  if (nums[nums.length - 1] >= nums[nums.length - 2]) {\n    return nums[nums.length - 1];\n  }\n\n  return null; // Should ideally not be reached if a local maximum always exists (e.g., in a non-empty array)\n}\n\n// Example Usage:\nconsole.log('Local max in [1, 2, 3, 4, 5]:', findLocalMaximum([1, 2, 3, 4, 5])); // Expected: 5\nconsole.log('Local max in [5, 4, 3, 2, 1]:', findLocalMaximum([5, 4, 3, 2, 1])); // Expected: 5\nconsole.log('Local max in [1, 2, 1, 3, 5, 6, 4]:', findLocalMaximum([1, 2, 1, 3, 5, 6, 4])); // Expected: 2 or 6\nconsole.log('Local max in [1]:', findLocalMaximum([1])); // Expected: 1\nconsole.log('Local max in []:', findLocalMaximum([])); // Expected: null\nconsole.log('Local max in [7, 6, 5, 8, 9, 10]:', findLocalMaximum([7, 6, 5, 8, 9, 10])); // Expected: 7 or 10\nconsole.log('Local max in [3, 2, 1, 2, 3]:', findLocalMaximum([3, 2, 1, 2, 3])); // Expected: 3 (first or last)\n",
              "explanation": "This function implements a linear scan to find a local maximum. It handles edge cases for arrays with zero or one element, and specifically checks the first and last elements as they only have one neighbor. For elements in the middle, it checks both left and right neighbors. It returns the first local maximum found, satisfying the requirement of finding 'a' local maximum.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_local_maximum_definition_1",
            "question_find_local_maximum_algorithm_2",
            "question_local_maximum_edge_cases_3",
            "question_local_maximum_binary_search_4"
          ],
          "relatedTasks": [
            "task_find_local_maximum"
          ],
          "tags": [
            "algorithms",
            "arrays",
            "searching",
            "linear-scan",
            "time-complexity"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_arrays",
            "conditional_logic"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "algorithmic_thinking",
            "technical_interviews"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_fetch_api_1",
          "topic": "Fetch API",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following best describes what the `fetch()` function returns immediately?",
          "answer": "A Promise that resolves to a Response object",
          "options": [
            "The JSON data directly",
            "A JavaScript object containing the parsed data",
            "A Promise that resolves to a Response object",
            "An XMLHttpRequest object"
          ],
          "analysisPoints": [
            "Understanding that `fetch` is asynchronous and returns a Promise.",
            "Knowing that the initial Promise resolves to a `Response` object, not the final data.",
            "Distinguishing `fetch` from older AJAX methods like `XMLHttpRequest`."
          ],
          "keyConcepts": [
            "Fetch API",
            "Promises",
            "Response object"
          ],
          "evaluationCriteria": [
            "Correct identification of Fetch API's return value.",
            "Basic understanding of asynchronous operations."
          ],
          "example": "The `fetch()` function returns a `Promise`. This promise will eventually resolve to a `Response` object, from which you then need to call `.json()` or `.text()` to get the actual data, which itself returns another promise.\n\n```javascript\nfetch('/api/data')\n  .then(response => { // response is a Response object\n    console.log(response.status); // e.g., 200\n    return response.json(); // returns a new promise for the JSON data\n  })\n  .then(data => { // data is the parsed JSON object\n    console.log(data);\n  })\n  .catch(error => console.error(error));\n```",
          "tags": [
            "fetch",
            "promises",
            "api",
            "async"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_promise_states_2",
          "topic": "Promises",
          "level": "medium",
          "type": "flashcard",
          "question": "What are the three possible states of a JavaScript Promise?",
          "answer": "Pending, Fulfilled (Resolved), and Rejected.",
          "analysisPoints": [
            "Recall of promise lifecycle states."
          ],
          "keyConcepts": [
            "Promises",
            "Promise states"
          ],
          "evaluationCriteria": [
            "Ability to recall core promise concepts."
          ],
          "example": "A Promise starts in a `pending` state. If the operation completes successfully, it becomes `fulfilled` (or `resolved`). If it fails, it becomes `rejected`. Once a promise is fulfilled or rejected, it is `settled` and its state cannot change again.",
          "tags": [
            "promises",
            "async",
            "javascript"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_fetch_error_handling_3",
          "topic": "Fetch API Error Handling",
          "level": "medium",
          "type": "open",
          "question": "When using `fetch()`, how do you differentiate between a network error (e.g., no internet connection) and an HTTP error status (e.g., 404 Not Found)? Provide a code example.",
          "answer": "The `fetch()` API behaves differently for network errors versus HTTP error statuses.\n\n1.  **Network Errors:** `fetch()` will only `reject` its promise if a network error occurs (e.g., DNS lookup failure, offline, CORS issues preventing the request). In this case, the `.catch()` block will be executed.\n2.  **HTTP Error Statuses:** `fetch()` will *not* reject its promise for HTTP error status codes (like 404, 500, 401, etc.). The promise will still `resolve`, but the `response.ok` property of the `Response` object will be `false`. You must explicitly check `response.ok` (or `response.status`) within the first `.then()` block to handle these cases.\n\nExample:\n```javascript\nasync function safeFetch(url) {\n  try {\n    const response = await fetch(url);\n\n    // Check for HTTP error statuses (e.g., 404, 500)\n    if (!response.ok) {\n      const errorText = await response.text(); // Or response.json() if API returns JSON errors\n      throw new Error(`HTTP error! Status: ${response.status}, Message: ${errorText}`);\n    }\n\n    const data = await response.json();\n    console.log('Data fetched successfully:', data);\n    return data;\n  } catch (error) {\n    // This catch block handles both network errors and errors thrown from `if (!response.ok)`\n    console.error('Fetch operation failed:', error.message);\n    // You can differentiate here if needed, e.g., by checking `error.name` or `error.message`\n    if (error.message.includes('NetworkError') || error.message.includes('Failed to fetch')) {\n      console.log('This was likely a network-related issue.');\n    } else if (error.message.includes('HTTP error!')) {\n      console.log('This was an HTTP status error.');\n    }\n    throw error; // Re-throw to propagate or handle further\n  }\n}\n\n// Example Usage:\n// safeFetch('https://api.example.com/data'); // Success\n// safeFetch('https://api.example.com/nonexistent'); // 404 HTTP Error\n// safeFetch('http://invalid-domain-nonexistent-xyz.com'); // Network Error\n```",
          "analysisPoints": [
            "Understanding `fetch()`'s error-handling philosophy.",
            "Knowledge of `response.ok` property.",
            "Ability to implement robust error handling for both network and HTTP status errors."
          ],
          "keyConcepts": [
            "Fetch API",
            "Error Handling",
            "Promises",
            "HTTP Status Codes"
          ],
          "evaluationCriteria": [
            "Correctly identifies the difference in error handling for network vs. HTTP errors.",
            "Provides a clear and correct code example.",
            "Demonstrates comprehensive error handling strategy."
          ],
          "example": "",
          "tags": [
            "fetch",
            "error-handling",
            "promises",
            "http",
            "async"
          ],
          "prerequisites": [
            "fetch_api_basics",
            "promises"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_async_await_vs_promises_4",
          "topic": "Async/Await",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following code snippets for handling asynchronous operations:\n\n**Snippet A:**\n```javascript\nfunction getDataA(url) {\n  return fetch(url)\n    .then(response => response.json())\n    .then(data => data)\n    .catch(error => console.error(error));\n}\n```\n\n**Snippet B:**\n```javascript\nasync function getDataB(url) {\n  try {\n    const response = await fetch(url);\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n```\n\nWhich statement accurately describes a key difference or advantage of Snippet B over Snippet A for typical use cases?",
          "answer": "Snippet B often leads to more readable and maintainable code, especially with multiple asynchronous steps, by making asynchronous code look like synchronous code.",
          "options": [
            "Snippet B automatically handles HTTP error statuses (like 404) without explicit checks, unlike Snippet A.",
            "Snippet B uses less memory because `await` is more efficient than chained `.then()` calls.",
            "Snippet B can execute `fetch(url)` and `response.json()` in parallel, improving performance.",
            "Snippet B often leads to more readable and maintainable code, especially with multiple asynchronous steps, by making asynchronous code look like synchronous code."
          ],
          "analysisPoints": [
            "Understanding the primary benefit of `async/await` (readability).",
            "Correctly identifying that `await` pauses execution, not parallelizes.",
            "Knowing that `fetch` still requires explicit `response.ok` checks regardless of `async/await`."
          ],
          "keyConcepts": [
            "Async/Await",
            "Promises",
            "Readability",
            "Error Handling"
          ],
          "evaluationCriteria": [
            "Understands the syntactic sugar nature and readability benefits of `async/await`.",
            "Distinguishes between sequential and parallel execution.",
            "Recognizes `fetch` error handling requirements."
          ],
          "example": "Snippet B, using `async/await`, provides a more linear, synchronous-like flow, which can greatly improve the readability and maintainability of code involving multiple asynchronous operations. Each `await` keyword effectively pauses the execution of the `async` function until the awaited promise resolves. This eliminates the need for deeply nested `.then()` chains, often referred to as 'callback hell'. However, it does not inherently make network calls more performant or automatically handle HTTP error statuses without manual checks like `response.ok`.\n\n```javascript\n// Consider multiple sequential fetches\nasync function getSequentialData(url1, url2) {\n  const data1 = await fetch(url1).then(res => res.json());\n  const data2 = await fetch(url2).then(res => res.json());\n  return { data1, data2 };\n}\n\n// Compared to deeply nested .then() chains, async/await is much cleaner.\n```",
          "tags": [
            "async-await",
            "promises",
            "readability",
            "javascript"
          ],
          "prerequisites": [
            "promises"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_es6_to_es5_inheritance_1",
          "topic": "ES6 Classes and ES5 Prototypes",
          "level": "hard",
          "type": "open",
          "question": "You are given an ES6 class structure with inheritance. Explain and demonstrate how you would refactor this into an ES5 prototype-based inheritance model. Highlight the key differences and challenges, especially regarding constructor invocation and prototype chain establishment.",
          "answer": "ES6 classes are syntactic sugar over JavaScript's existing prototype-based inheritance. Refactoring an ES6 class structure to ES5 involves understanding how constructor functions, prototype properties, and the prototype chain work.\n\n**Key Differences and Challenges:**\n\n1.  **Constructor Invocation (`super()` vs. `Parent.call(this)`):**\n    *   **ES6:** The `super()` keyword in a child class's constructor is mandatory when using `extends`. It calls the parent class's constructor and binds `this` correctly before the child's `this` is accessible.\n    *   **ES5:** To inherit properties from the parent, the child's constructor must explicitly invoke the parent's constructor using `Parent.call(this, ...args)`. This ensures that the parent's `this.property` assignments are applied to the child's instance.\n\n2.  **Prototype Chain Establishment (`extends` vs. `Object.create()`):**\n    *   **ES6:** The `extends` keyword automatically sets up the prototype chain. `Child.prototype` will correctly inherit from `Parent.prototype`.\n    *   **ES5:** You must manually set up the prototype chain. The most robust way is `Child.prototype = Object.create(Parent.prototype);`. `Object.create()` creates a new object with the specified prototype, effectively linking the child's prototype to the parent's.\n\n3.  **`constructor` Property Fix:**\n    *   **ES6:** The `constructor` property on `Child.prototype` is automatically set correctly to `Child`.\n    *   **ES5:** When `Child.prototype` is set to `Object.create(Parent.prototype)`, the `constructor` property of `Child.prototype` will point to `ParentES5`. It is crucial to manually reset it to `ChildES5` (`ChildES5.prototype.constructor = ChildES5;`) to ensure correct `instanceof` checks and reflection.\n\n4.  **Static Methods:**\n    *   **ES6:** `static` keyword on class methods directly attaches them to the class constructor itself, not its prototype.\n    *   **ES5:** Static methods are simply properties added directly to the constructor function (e.g., `ParentES5.staticMethod = function() { ... };`).\n\n**Demonstration:**\n(See `example_es6_vs_es5_inheritance_1` in `theory_es6_vs_es5_inheritance` for a comprehensive code example.)",
          "analysisPoints": [
            "In-depth understanding of JavaScript's prototype chain.",
            "Ability to translate modern ES6 syntax to its foundational ES5 equivalent.",
            "Knowledge of `Object.create()`, `Function.prototype.call()`, and the `constructor` property."
          ],
          "keyConcepts": [
            "ES6 Classes",
            "ES5 Prototypes",
            "Inheritance",
            "Prototype Chain",
            "Constructor Functions",
            "super",
            "Object.create",
            "call"
          ],
          "evaluationCriteria": [
            "Accurate explanation of key differences.",
            "Correct and clear code demonstration.",
            "Identification and explanation of common pitfalls like `constructor` property."
          ],
          "example": "",
          "tags": [
            "javascript",
            "oop",
            "inheritance",
            "es6",
            "es5",
            "prototypes"
          ],
          "prerequisites": [
            "javascript_objects",
            "functions_as_first_class_citizens"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_prototype_chain_2",
          "topic": "JavaScript Prototypes",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of the `prototype` property on a JavaScript constructor function, and the `__proto__` property on an object instance?",
          "answer": "The `prototype` property on a constructor function is an object where inherited properties and methods are stored. The `__proto__` property (or `Object.getPrototypeOf()`) on an object instance points to the object's prototype, establishing the prototype chain for inheritance.",
          "analysisPoints": [
            "Distinguishing `prototype` from `__proto__`.",
            "Understanding their roles in inheritance."
          ],
          "keyConcepts": [
            "Prototypes",
            "Inheritance",
            "Constructor Functions",
            "__proto__"
          ],
          "evaluationCriteria": [
            "Ability to quickly define key prototype concepts."
          ],
          "example": "```javascript\nfunction Person(name) {\n  this.name = name;\n}\nPerson.prototype.sayHello = function() {\n  console.log(`Hello, my name is ${this.name}`);\n};\n\nconst john = new Person('John');\n\nconsole.log(john.__proto__ === Person.prototype); // true\nconsole.log(Object.getPrototypeOf(john) === Person.prototype); // true (preferred way)\n\n// When john.sayHello() is called, JavaScript looks for sayHello on john itself.\n// If not found, it looks on john.__proto__ (which is Person.prototype).\n// If still not found, it continues up the chain (e.g., Object.prototype).\njohn.sayHello();\n```",
          "tags": [
            "javascript",
            "prototypes",
            "oop",
            "inheritance"
          ],
          "prerequisites": [
            "javascript_objects"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_super_keyword_3",
          "topic": "ES6 Classes",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following ES6 class structure:\n\n```javascript\nclass Animal {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass Dog extends Animal {\n  constructor(name, breed) {\n    // Point A\n    this.breed = breed;\n    // Point B\n    super(name);\n    // Point C\n  }\n}\n```\n\nAt which point(s) would calling `super(name)` result in an error or unexpected behavior, and why?",
          "answer": "Calling `super(name)` at Point A would cause an error because `super()` must be called before `this` is accessed in a derived class's constructor.",
          "options": [
            "Calling `super(name)` at Point B would cause an error because `super()` must be the very first statement in the constructor.",
            "Calling `super(name)` at Point A would cause an error because `super()` must be called before `this` is accessed in a derived class's constructor.",
            "Calling `super(name)` at Point C would cause an error because it's too late; `this` would already be defined by the time `super()` is called.",
            "It would not cause an error at any of the points, as the order of `super()` and `this` assignment does not matter in ES6 classes."
          ],
          "analysisPoints": [
            "Understanding the strict rule for `super()` in derived class constructors.",
            "Knowing that `super()` initializes `this` for the derived class.",
            "Distinguishing between ES6 class constructor behavior and ES5 constructor functions."
          ],
          "keyConcepts": [
            "ES6 Classes",
            "Inheritance",
            "super keyword",
            "this binding"
          ],
          "evaluationCriteria": [
            "Correctly identifies the `super()` call order rule.",
            "Explains the reason for the error related to `this` access."
          ],
          "example": "In ES6 derived class constructors, `super()` *must* be called before any `this` reference is made. This is because `super()` is responsible for initializing `this` for the derived class by invoking the parent class's constructor. Until `super()` is called, `this` is not yet defined in the child's constructor, leading to a `ReferenceError` if accessed.\n\nCorrect usage:\n```javascript\nclass Dog extends Animal {\n  constructor(name, breed) {\n    super(name); // Call super first\n    this.breed = breed; // Then access this\n  }\n}\n```",
          "tags": [
            "es6",
            "classes",
            "inheritance",
            "super",
            "this"
          ],
          "prerequisites": [
            "es6_classes_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_this_in_constructors_4",
          "topic": "`this` Context",
          "level": "medium",
          "type": "open",
          "question": "Explain how the `this` keyword behaves differently in an ES5 constructor function compared to an ES6 class constructor, especially when dealing with inheritance.",
          "answer": "**ES5 Constructor Function (`function MyConstructor() { ... }`):**\nWhen an ES5 constructor function is called with the `new` keyword, `this` inside the constructor refers to the newly created object instance. For inheritance, the child constructor explicitly calls the parent constructor using `Parent.call(this, ...args)`. This `call()` method explicitly sets the `this` context for the parent constructor to be the child's newly created instance. This allows the parent constructor to add properties directly to the child's instance.\n\n**ES6 Class Constructor (`class MyClass { constructor() { ... } }`):**\nIn an ES6 class, particularly a *derived* class (one that `extends` another), `this` behaves differently. Before `super()` is called in a derived class's constructor, `this` is *uninitialized*. Attempting to access `this` before `super()` results in a `ReferenceError`. The `super()` call is responsible for initializing `this` for the derived class by calling the parent's constructor. After `super()` is called, `this` refers to the new instance of the derived class, allowing you to add properties specific to the child.\n\n**Summary of Difference:**\n*   **ES5:** `this` is available immediately and points to the new instance. Inheritance uses `Parent.call(this)` to explicitly bind the parent's context to the child's `this`.\n*   **ES6 (derived class):** `this` is not available until `super()` is called. `super()` takes care of the `this` binding and initialization from the parent's side. This ensures proper construction order and prevents `this` from being used before it's ready.\n",
          "analysisPoints": [
            "Understanding `this` binding with `new` keyword in ES5.",
            "Understanding the role of `call()` in ES5 inheritance.",
            "Understanding the pre-`super()` `this` behavior in ES6 derived constructors.",
            "Explaining why `super()` is essential for `this` initialization in ES6 derived classes."
          ],
          "keyConcepts": [
            "this keyword",
            "Constructor Functions",
            "ES6 Classes",
            "Inheritance",
            "super",
            "call method"
          ],
          "evaluationCriteria": [
            "Clear and accurate explanation of `this` context in both paradigms.",
            "Highlights the critical role of `super()` in ES6 derived constructors.",
            "Demonstrates understanding of implicit vs. explicit `this` binding."
          ],
          "example": "```javascript\n// ES5 Example\nfunction ParentES5(name) {\n  this.name = name; // 'this' refers to the new instance\n}\n\nfunction ChildES5(name, age) {\n  ParentES5.call(this, name); // Explicitly sets 'this' of ParentES5 to ChildES5's instance\n  this.age = age;\n}\n\n// ES6 Example\nclass ParentES6 {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass ChildES6 extends ParentES6 {\n  constructor(name, age) {\n    // console.log(this); // Would cause ReferenceError here\n    super(name); // 'this' is initialized after this call\n    // console.log(this); // 'this' is now available\n    this.age = age;\n  }\n}\n```",
          "tags": [
            "javascript",
            "this",
            "oop",
            "inheritance",
            "es5",
            "es6"
          ],
          "prerequisites": [
            "javascript_objects",
            "functions_context"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_instanceof_5",
          "topic": "JavaScript Inheritance",
          "level": "easy",
          "type": "flashcard",
          "question": "In the context of JavaScript inheritance, what does the `instanceof` operator check?",
          "answer": "The `instanceof` operator checks if an object is an instance of a particular constructor function or class by testing if the `prototype` property of the constructor appears anywhere in the prototype chain of the object.",
          "analysisPoints": [
            "Recall of `instanceof` functionality.",
            "Understanding its relation to the prototype chain."
          ],
          "keyConcepts": [
            "instanceof",
            "Prototype Chain",
            "Inheritance"
          ],
          "evaluationCriteria": [
            "Ability to define `instanceof` correctly."
          ],
          "example": "```javascript\nfunction Parent() {}\nfunction Child() {}\nChild.prototype = Object.create(Parent.prototype);\nChild.prototype.constructor = Child; // Important for correct instanceof behavior\n\nconst child = new Child();\n\nconsole.log(child instanceof Child); // true\nconsole.log(child instanceof Parent); // true\nconsole.log(child instanceof Object); // true\nconsole.log(child instanceof Array); // false\n\nclass MyClass {}\nclass MyDerivedClass extends MyClass {}\nconst derived = new MyDerivedClass();\nconsole.log(derived instanceof MyDerivedClass); // true\nconsole.log(derived instanceof MyClass); // true\n```",
          "tags": [
            "javascript",
            "inheritance",
            "instanceof",
            "prototypes"
          ],
          "prerequisites": [
            "javascript_objects"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_two_sum_algorithm_1",
          "topic": "Array Processing (Two Sum)",
          "level": "medium",
          "type": "open",
          "question": "You are given an array of integers `nums` and an integer `target`. Describe an algorithm to find two numbers in the array that sum up to `target`. Your solution should be more efficient than a brute-force O(n^2) approach. Provide pseudocode or a high-level explanation of your chosen algorithm and analyze its time and space complexity.",
          "answer": "### Algorithm: Hash Map Approach\n\nTo find two numbers that sum up to `target` more efficiently than O(n^2), we can use a hash map (or JavaScript `Map`/`Set`).\n\n**High-Level Explanation:**\n\n1.  Initialize an empty hash map (e.g., `Map` in JavaScript) to store numbers we have encountered so far.\n2.  Iterate through the `nums` array from left to right.\n3.  For each `num` in the array:\n    a.  Calculate its `complement`: `complement = target - num`.\n    b.  Check if this `complement` already exists as a key in the hash map.\n        i.  If it does, we have found a pair (`complement`, `num`) that sums to `target`. We can return this pair (or their indices).\n    c.  If the `complement` is not found, add the current `num` to the hash map. (If indices are needed, store `(num, index)`).\n4.  If the loop completes without finding such a pair, it means no such pair exists.\n\n**Pseudocode:**\n\n```\nfunction findTwoSum(nums, target):\n  seenNumbers = new Map()\n\n  for each number num in nums with its index i:\n    complement = target - num\n\n    if seenNumbers contains complement:\n      // Found a pair: (complement, num)\n      // If required, retrieve index of complement: seenNumbers.get(complement)\n      return [seenNumbers.get(complement), i] // Or return [complement, num] if values are needed\n\n    seenNumbers.set(num, i) // Store the number and its index\n\n  return null // No pair found\n```\n\n### Time and Space Complexity Analysis:\n\n*   **Time Complexity: O(n)**\n    *   We iterate through the array `nums` exactly once, which takes O(n) time.\n    *   Inside the loop, hash map operations (checking for existence (`has`) and insertion (`set`)) take, on average, O(1) time. In the worst case (due to hash collisions, though rare with good hash functions), they can degrade to O(n), but average case is O(1).\n    *   Therefore, the total time complexity is dominated by the single pass through the array, resulting in O(n).\n\n*   **Space Complexity: O(n)**\n    *   In the worst case, if no pairs sum to the target until the very last element (or no pairs at all), we might end up storing almost all `n` elements in the hash map.\n    *   Each entry in the hash map consumes constant space.\n    *   Thus, the space complexity is proportional to the number of elements stored, which is O(n).\n",
          "analysisPoints": [
            "Correctly identifies the hash map approach as efficient.",
            "Clearly explains the logic of using `complement`.",
            "Accurately analyzes both time and space complexity, including average vs. worst-case for hash maps."
          ],
          "keyConcepts": [
            "Two Sum Problem",
            "Hash Map",
            "Time Complexity",
            "Space Complexity",
            "Algorithms",
            "Array Processing"
          ],
          "evaluationCriteria": [
            "Demonstrates knowledge of efficient algorithms for array problems.",
            "Ability to analyze algorithm complexity.",
            "Clear and concise explanation."
          ],
          "example": "",
          "tags": [
            "algorithms",
            "arrays",
            "hash-map",
            "time-complexity",
            "interview-question"
          ],
          "prerequisites": [
            "javascript_arrays",
            "basic_data_structures"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_two_sum_complexity_2",
          "topic": "Two Sum Problem",
          "level": "medium",
          "type": "mcq",
          "question": "You are implementing the `findPairsWithSum` function as described, using a `Map` (hash map). If the input array `nums` has `N` elements, what are the typical time and space complexities for this approach?\n\n```javascript\nfunction findPairsWithSum(nums, target) {\n  const pairs = [];\n  const numMap = new Map();\n  \n  for (const num of nums) {\n    const complement = target - num;\n    \n    if (numMap.has(complement)) {\n      pairs.push([complement, num]);\n    }\n    \n    numMap.set(num, true);\n  }\n  \n  return pairs;\n}\n```",
          "answer": "Time: O(N), Space: O(N)",
          "options": [
            "Time: O(N^2), Space: O(1)",
            "Time: O(N log N), Space: O(N)",
            "Time: O(N), Space: O(N)",
            "Time: O(1), Space: O(1)"
          ],
          "analysisPoints": [
            "Understanding that a single loop implies O(N) time if inner operations are constant time.",
            "Knowing that hash map operations (get, set, has) are average O(1).",
            "Recognizing that the hash map stores up to N elements, leading to O(N) space."
          ],
          "keyConcepts": [
            "Time Complexity",
            "Space Complexity",
            "Hash Map",
            "Two Sum"
          ],
          "evaluationCriteria": [
            "Correctly identifies the complexities of the hash map approach.",
            "Demonstrates understanding of big O notation for common operations."
          ],
          "example": "The `for...of` loop iterates `N` times (once for each element in `nums`). Inside the loop, `numMap.has()` and `numMap.set()` operations on a `Map` (which is a hash map) typically have an average time complexity of O(1). Therefore, the overall time complexity is O(N * 1) = O(N).\n\nIn the worst case, if no pairs are found or if the last element completes a pair, the `numMap` could end up storing almost all `N` elements. Each element stored consumes constant space. Thus, the space complexity is O(N).",
          "tags": [
            "algorithms",
            "arrays",
            "hash-map",
            "complexity",
            "mcq"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_hash_map_usage_3",
          "topic": "Hash Maps",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary advantage of using a hash map (like JavaScript's `Map` or `Object`) for lookups in an array processing algorithm?",
          "answer": "The primary advantage is highly efficient (average O(1) time) lookups, insertions, and deletions, which allows for significantly faster processing compared to linear search (O(n)) in large datasets.",
          "analysisPoints": [
            "Recall of hash map properties.",
            "Understanding its performance benefits for lookups."
          ],
          "keyConcepts": [
            "Hash Map",
            "Map",
            "Time Complexity",
            "Lookups"
          ],
          "evaluationCriteria": [
            "Ability to state the main benefit of hash maps."
          ],
          "example": "```javascript\nconst myMap = new Map();\nmyMap.set('apple', 1);\nmyMap.set('banana', 2);\n\n// Checking for existence is very fast\nconsole.log(myMap.has('apple')); // true (O(1) on average)\nconsole.log(myMap.get('banana')); // 2 (O(1) on average)\n\n// Compared to iterating through an array to find an item (O(N) in worst case)\nconst myArray = [{ key: 'apple' }, { key: 'banana' }];\nconst found = myArray.find(item => item.key === 'apple'); // O(N)\n```",
          "tags": [
            "data-structures",
            "hash-map",
            "map",
            "performance",
            "flashcard"
          ],
          "prerequisites": [
            "basic_data_structures"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_two_sum_variations_4",
          "topic": "Two Sum Problem",
          "level": "hard",
          "type": "code",
          "question": "Modify the `findPairsWithSum` function to return only *unique* pairs of numbers, even if the input array contains duplicates that could form non-unique pairs. For example, if `nums = [1, 1, 2, 3]` and `target = 4`, the output should be `[[1, 3], [2, 2]]` (or `[[2,2], [1,3]]`), not `[[1,3], [1,3], [2,2]]`.\n\nYour function should take `nums` and `target` and return an array of unique pairs. The order of pairs or numbers within a pair does not matter for uniqueness.",
          "answer": "```javascript\nfunction findUniquePairsWithSum(nums, target) {\n  const uniquePairs = [];\n  const seenNums = new Map(); // Stores num -> count of occurrences\n  const addedPairs = new Set(); // Stores stringified pairs to track uniqueness\n\n  // First, count occurrences of each number\n  for (const num of nums) {\n    seenNums.set(num, (seenNums.get(num) || 0) + 1);\n  }\n\n  // Then iterate through the unique numbers in the map\n  for (const [num, count] of seenNums.entries()) {\n    const complement = target - num;\n\n    // Case 1: num is the complement of itself (e.g., target = 6, num = 3)\n    if (num === complement) {\n      // Need at least two occurrences of this number\n      if (count >= 2) {\n        const pair = [num, num].sort((a, b) => a - b).join(',');\n        if (!addedPairs.has(pair)) {\n          uniquePairs.push([num, num]);\n          addedPairs.add(pair);\n        }\n      }\n    } \n    // Case 2: num and complement are different numbers\n    else if (seenNums.has(complement)) {\n      const pair = [num, complement].sort((a, b) => a - b).join(',');\n      if (!addedPairs.has(pair)) {\n        uniquePairs.push([num, complement].sort((a, b) => a - b));\n        addedPairs.add(pair);\n      }\n    }\n  }\n\n  return uniquePairs;\n}\n\n// Test Cases\nconsole.log(JSON.stringify(findUniquePairsWithSum([1, 1, 2, 3], 4))); // Expected: [[1,3],[2,2]] (order may vary)\nconsole.log(JSON.stringify(findUniquePairsWithSum([2, 2, 2, 2], 4))); // Expected: [[2,2]]\nconsole.log(JSON.stringify(findUniquePairsWithSum([1, 2, 3, 4, 5], 6))); // Expected: [[1,5],[2,4]]\nconsole.log(JSON.stringify(findUniquePairsWithSum([0, 0, 0, 0], 0))); // Expected: [[0,0]]\nconsole.log(JSON.stringify(findUniquePairsWithSum([1, 2, 3, 4, 5, 6], 7))); // Expected: [[1,6],[2,5],[3,4]]\nconsole.log(JSON.stringify(findUniquePairsWithSum([7, 2, 4, 8, 3, 1, 10], 11))); // Expected: [[1,10],[2,9],[3,8],[4,7]] (9 is missing from input)\n\n```",
          "analysisPoints": [
            "Correctly handles duplicate numbers in the input array.",
            "Ensures uniqueness of *pairs* in the output, not just unique numbers within the pair.",
            "Uses appropriate data structures (`Map` for counts, `Set` for tracking added pairs) for efficiency.",
            "Manages cases where `num` equals `complement` (e.g., finding two 3s for target 6)."
          ],
          "keyConcepts": [
            "Two Sum Problem",
            "Duplicates",
            "Unique Pairs",
            "Hash Map",
            "Set",
            "Edge Cases"
          ],
          "evaluationCriteria": [
            "Solution correctly identifies unique pairs.",
            "Handles duplicate numbers effectively.",
            "Code is efficient (ideally O(N) or O(N log N) if sorting within loop).",
            "Proper use of auxiliary data structures."
          ],
          "example": "",
          "tags": [
            "algorithms",
            "arrays",
            "hash-map",
            "duplicates",
            "unique",
            "hard",
            "coding-challenge"
          ],
          "prerequisites": [
            "two_sum_algorithm_basic",
            "javascript_map_set"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_local_maximum_definition_1",
          "topic": "Local Maximum",
          "level": "easy",
          "type": "flashcard",
          "question": "What defines a 'local maximum' in an array?",
          "answer": "A local maximum in an array is an element that is greater than or equal to its immediate neighbors. For elements at the boundaries, only the existing neighbor(s) need to be considered.",
          "analysisPoints": [
            "Recall of the definition of local maximum.",
            "Consideration of boundary conditions."
          ],
          "keyConcepts": [
            "Local Maximum",
            "Peak Element",
            "Array",
            "Algorithms"
          ],
          "evaluationCriteria": [
            "Ability to define local maximum correctly."
          ],
          "example": "In the array `[1, 5, 2, 6, 3]`: \n*   `5` is a local maximum because `5 >= 1` and `5 >= 2`.\n*   `6` is a local maximum because `6 >= 2` and `6 >= 3`.\n*   If the array was `[5, 1, 2]`: `5` is a local maximum because `5 >= 1` (only one neighbor).",
          "tags": [
            "algorithms",
            "arrays",
            "flashcard"
          ],
          "prerequisites": [
            "array_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_find_local_maximum_algorithm_2",
          "topic": "Local Maximum",
          "level": "medium",
          "type": "open",
          "question": "Describe an algorithm to find *any* local maximum in a given array of integers. What are the edge cases you need to consider? Analyze the time and space complexity of your algorithm.",
          "answer": "### Algorithm: Linear Scan\n\nTo find any local maximum in a general array, a linear scan is a straightforward and efficient approach.\n\n**Algorithm Steps:**\n\n1.  **Handle Edge Cases:**\n    *   If the array is empty, there's no local maximum. Return null or throw an error.\n    *   If the array has only one element, that element is always a local maximum. Return it.\n2.  **Check First Element:** If `nums[0] >= nums[1]`, then `nums[0]` is a local maximum. Return `nums[0]`.\n3.  **Iterate Through Middle Elements:** Loop from the second element (`i = 1`) up to the second-to-last element (`i < nums.length - 1`). For each `nums[i]`:\n    *   Check if `nums[i] >= nums[i-1]` (left neighbor) AND `nums[i] >= nums[i+1]` (right neighbor).\n    *   If both conditions are true, `nums[i]` is a local maximum. Return `nums[i]` immediately as we only need *any* one.\n4.  **Check Last Element:** If the loop finishes without finding a local maximum, it means the last element `nums[nums.length - 1]` must be a local maximum if `nums[nums.length - 1] >= nums[nums.length - 2]` (if `nums.length > 1`). Return it.\n\n**Edge Cases to Consider:**\n\n*   **Empty array:** `[]` - No local maximum.\n*   **Single element array:** `[5]` - The element itself is the local maximum.\n*   **Monotonically increasing:** `[1, 2, 3, 4, 5]` - The last element (`5`) is the local maximum.\n*   **Monotonically decreasing:** `[5, 4, 3, 2, 1]` - The first element (`5`) is the local maximum.\n*   **Plateaus:** `[1, 5, 5, 2]` - `5` at index 1 is a local max. (`5 >= 1` and `5 >= 5`).\n\n### Time and Space Complexity Analysis:\n\n*   **Time Complexity: O(n)**\n    *   In the worst case (e.g., a strictly increasing array like `[1, 2, 3, 4, 5]`), we might have to iterate through almost the entire array to find the local maximum at the end.\n    *   Each comparison inside the loop takes constant time.\n    *   Therefore, the total time complexity is linear with respect to the number of elements `n` in the array.\n\n*   **Space Complexity: O(1)**\n    *   The algorithm uses a fixed amount of extra space regardless of the input array size (a few variables for loop index and comparisons).\n    *   No auxiliary data structures (like hash maps) are used that would grow with input size.\n",
          "analysisPoints": [
            "Provides a clear and correct linear scan algorithm.",
            "Identifies and correctly handles all major edge cases (empty, single, boundaries, monotonic).",
            "Accurately analyzes time and space complexity.",
            "Understands that 'any' local maximum is sufficient."
          ],
          "keyConcepts": [
            "Local Maximum",
            "Algorithms",
            "Linear Scan",
            "Edge Cases",
            "Time Complexity",
            "Space Complexity"
          ],
          "evaluationCriteria": [
            "Algorithmic correctness.",
            "Completeness of edge case handling.",
            "Accuracy of complexity analysis."
          ],
          "example": "",
          "tags": [
            "algorithms",
            "arrays",
            "searching",
            "linear-scan",
            "interview-question"
          ],
          "prerequisites": [
            "array_basics",
            "conditional_logic"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_local_maximum_edge_cases_3",
          "topic": "Local Maximum",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following arrays would have its *last* element as a local maximum according to the definition (greater than or equal to its neighbors)?",
          "answer": "`[1, 2, 3, 4, 5]`",
          "options": [
            "`[5, 4, 3, 2, 1]`",
            "`[1, 5, 2, 6, 3]`",
            "`[1, 2, 3, 4, 5]`",
            "`[7]`"
          ],
          "analysisPoints": [
            "Applying the definition of local maximum to array boundaries.",
            "Understanding monotonic sequences."
          ],
          "keyConcepts": [
            "Local Maximum",
            "Edge Cases",
            "Array"
          ],
          "evaluationCriteria": [
            "Correctly identifies local maximum at the end of an array.",
            "Understands the boundary condition for local maximum."
          ],
          "example": "For an array of length `N`, the last element `arr[N-1]` is a local maximum if `arr[N-1] >= arr[N-2]` (assuming `N > 1`).\n\n*   `[5, 4, 3, 2, 1]`: The first element `5` is a local maximum (`5 >= 4`).\n*   `[1, 5, 2, 6, 3]`: `5` and `6` are local maxima. The last element `3` is not (`3 < 6`).\n*   `[1, 2, 3, 4, 5]`: The last element `5` is a local maximum (`5 >= 4`). This is a monotonically increasing array.\n*   `[7]`: The single element is *always* a local maximum, but it's not the 'last' in comparison to other elements, it's just the only element.",
          "tags": [
            "algorithms",
            "arrays",
            "local-maximum",
            "edge-cases"
          ],
          "prerequisites": [
            "local_maximum_definition"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_local_maximum_binary_search_4",
          "topic": "Local Maximum (Advanced)",
          "level": "hard",
          "type": "open",
          "question": "For a strictly unimodal array (an array that first strictly increases and then strictly decreases, for example, `[1, 2, 3, 4, 3, 2, 1]`), describe how you would find the unique global maximum (which is also a local maximum) using a binary search approach. Analyze its time and space complexity.",
          "answer": "### Algorithm: Binary Search for Peak in Unimodal Array\n\nIn a strictly unimodal array, there's exactly one global maximum, which is also a local maximum. A binary search approach can find this peak in `O(log n)` time.\n\n**Algorithm Steps:**\n\n1.  **Initialize Search Range:** Set `low = 0` and `high = nums.length - 1`.\n2.  **Binary Search Loop:** Continue while `low < high`:\n    a.  Calculate `mid = low + Math.floor((high - low) / 2)`.\n    b.  **Compare `nums[mid]` with `nums[mid + 1]`:**\n        i.  If `nums[mid] < nums[mid + 1]`: This means we are on the increasing slope (or `mid` is to the left of the peak). The peak must be to the right of `mid`. So, set `low = mid + 1`.\n        ii. If `nums[mid] >= nums[mid + 1]`: This means we are on the decreasing slope (or `mid` is the peak itself, or to the right of it). The peak must be at `mid` or to its left. So, set `high = mid`.\n3.  **Return `nums[low]`:** When the loop terminates (`low === high`), `low` (or `high`) will point to the index of the peak element.\n\n**Example Trace (for `[1, 2, 3, 4, 3, 2, 1]`):\n\n*   Initial: `low=0`, `high=6`\n*   Iteration 1:\n    *   `mid = 3` (`nums[3] = 4`)\n    *   `nums[3] (4) >= nums[4] (3)` is true. `high = 3`.\n    *   `low=0`, `high=3`\n*   Iteration 2:\n    *   `mid = 1` (`nums[1] = 2`)\n    *   `nums[1] (2) < nums[2] (3)` is true. `low = 2`.\n    *   `low=2`, `high=3`\n*   Iteration 3:\n    *   `mid = 2` (`nums[2] = 3`)\n    *   `nums[2] (3) < nums[3] (4)` is true. `low = 3`.\n    *   `low=3`, `high=3`\n*   Loop ends. Return `nums[low]` (which is `nums[3] = 4`).\n\n### Time and Space Complexity Analysis:\n\n*   **Time Complexity: O(log n)**\n    *   In each step of the binary search, the search space (`high - low`) is roughly halved.\n    *   This logarithmic reduction in search space is characteristic of binary search.\n*   **Space Complexity: O(1)**\n    *   The algorithm uses a constant amount of extra space for variables like `low`, `high`, `mid`.\n    *   No additional data structures are used that grow with the input size.\n",
          "analysisPoints": [
            "Correctly applies binary search principles to find a peak.",
            "Understands how `nums[mid]` vs `nums[mid+1]` comparison guides the search direction.",
            "Accurately analyzes the O(log n) time complexity.",
            "Differentiates this optimized approach from a linear scan, specifying the unimodal array prerequisite."
          ],
          "keyConcepts": [
            "Local Maximum",
            "Global Maximum",
            "Binary Search",
            "Unimodal Array",
            "Time Complexity",
            "Space Complexity"
          ],
          "evaluationCriteria": [
            "Correct algorithm for binary search on unimodal array.",
            "Clear explanation of why it works.",
            "Accurate complexity analysis.",
            "Understanding of the specific conditions required for this optimization."
          ],
          "example": "",
          "tags": [
            "algorithms",
            "arrays",
            "binary-search",
            "optimization",
            "hard"
          ],
          "prerequisites": [
            "local_maximum_definition",
            "binary_search_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_implement_fetch_display",
          "title": "Implement a Data Fetching and Display Component",
          "description": "\nCreate a JavaScript function `fetchAndDisplayData` that simulates fetching user data from a given API endpoint and displaying it on a (simulated) webpage. \n\n**Requirements:**\n1.  The function should accept a `url` string as an argument.\n2.  It should use the `Fetch API` to make a GET request.\n3.  Implement proper error handling:\n    *   Catch network errors (e.g., connection refused, CORS issues).\n    *   Handle HTTP error statuses (e.g., 404, 500) by checking `response.ok`.\n4.  Simulate UI updates:\n    *   Log `Fetching data...` before the request.\n    *   Log `Data fetched successfully:` followed by the parsed data on success.\n    *   Log `Error fetching data:` followed by the error message on failure.\n    *   Log `Request finished.` regardless of success or failure.\n5.  The function should return a Promise that resolves with the fetched data, or rejects with an error.\n",
          "difficulty": "medium",
          "startingCode": "async function fetchAndDisplayData(url) {\n  console.log('Fetching data...');\n  try {\n    // TODO: Implement fetch request\n    // TODO: Check for response.ok for HTTP errors\n    // TODO: Parse JSON data\n    // TODO: Log success message and data\n  } catch (error) {\n    // TODO: Log error message\n  } finally {\n    // TODO: Log request finished message\n  }\n}\n\n// Example usage (uncomment to test):\n// fetchAndDisplayData('https://jsonplaceholder.typicode.com/users/1'); // Valid URL\n// fetchAndDisplayData('https://jsonplaceholder.typicode.com/nonexistent'); // 404 error\n// fetchAndDisplayData('http://invalid-domain.com'); // Network error (will fail in browser, might time out/error in Node)\n",
          "solutionCode": "async function fetchAndDisplayData(url) {\n  console.log('Fetching data...');\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      const errorDetail = await response.text();\n      throw new Error(`HTTP error! Status: ${response.status}, Details: ${errorDetail}`);\n    }\n\n    const data = await response.json();\n    console.log('Data fetched successfully:', data);\n    return data;\n  } catch (error) {\n    console.error('Error fetching data:', error.message);\n    throw error; // Re-throw to allow further handling if needed\n  } finally {\n    console.log('Request finished.');\n  }\n}\n",
          "testCases": [
            "Call with a valid JSON API endpoint (e.g., `https://jsonplaceholder.typicode.com/posts/1`) and verify 'Fetching data...', 'Data fetched successfully:', and 'Request finished.' are logged, and the function resolves with data.",
            "Call with an invalid API endpoint that returns a 404 status (e.g., `https://jsonplaceholder.typicode.com/nonexistent`) and verify 'Fetching data...', 'Error fetching data:', and 'Request finished.' are logged, and the function rejects.",
            "Call with a URL that causes a network error (e.g., a completely invalid domain like `http://nonexistent-domain-12345.com`) and verify 'Fetching data...', 'Error fetching data:', and 'Request finished.' are logged, and the function rejects.",
            "Verify the function returns a Promise and that its resolution/rejection can be handled externally (e.g., by chaining .then().catch())."
          ],
          "hints": [
            "Remember that `fetch` only rejects for network errors, not HTTP status errors.",
            "Use `response.ok` to check for successful HTTP status codes (200-299).",
            "The `finally` block is useful for cleanup or logging operations that must run regardless of success or failure."
          ],
          "tags": [
            "fetch-api",
            "promises",
            "async-await",
            "error-handling",
            "frontend",
            "api-integration"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "fetch_api_promises"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "api_integration",
            "user_interface_updates",
            "asynchronous_javascript"
          ]
        },
        {
          "id": "task_inheritance_conversion",
          "title": "Refactor JavaScript Inheritance: ES6 to ES5 and Vice Versa",
          "description": "\nYou are tasked with refactoring a pair of related classes between ES6 and ES5 inheritance models. This exercise tests your understanding of prototype chains, constructor invocation, and method inheritance in both paradigms.\n\n**Part 1: ES6 to ES5 Conversion**\nGiven the following ES6 class structure, rewrite `EmployeeES5` and `ManagerES5` using ES5 constructor functions and prototype-based inheritance. Ensure all methods and properties are correctly inherited.\n\n```javascript\n// ES6 Base Class\nclass EmployeeES6 {\n  constructor(name, id) {\n    this.name = name;\n    this.id = id;\n  }\n\n  getDetails() {\n    return `Name: ${this.name}, ID: ${this.id}`;\n  }\n\n  static companyName() {\n    return 'Tech Solutions Inc.';\n  }\n}\n\n// ES6 Derived Class\nclass ManagerES6 extends EmployeeES6 {\n  constructor(name, id, department) {\n    super(name, id);\n    this.department = department;\n  }\n\n  getManagerDetails() {\n    return `${this.getDetails()}, Department: ${this.department}`;\n  }\n}\n```\n\n**Part 2: ES5 to ES6 Conversion**\nGiven the following ES5 prototype-based structure, rewrite `VehicleES6` and `CarES6` using ES6 class syntax. Ensure all methods and properties are correctly inherited and `super` is used appropriately.\n\n```javascript\n// ES5 Base Constructor\nfunction VehicleES5(make, model) {\n  this.make = make;\n  this.model = model;\n}\n\nVehicleES5.prototype.getVehicleInfo = function() {\n  return `Make: ${this.make}, Model: ${this.model}`;\n};\n\nVehicleES5.totalVehicles = 0; // Static property\nVehicleES5.incrementTotal = function() { // Static method\n  this.totalVehicles++;\n};\n\n// ES5 Derived Constructor\nfunction CarES5(make, model, doors) {\n  VehicleES5.call(this, make, model);\n  this.doors = doors;\n}\n\nCarES5.prototype = Object.create(VehicleES5.prototype);\nCarES5.prototype.constructor = CarES5; // Fix constructor\n\nCarES5.prototype.getCarInfo = function() {\n  return `${this.getVehicleInfo()}, Doors: ${this.doors}`;\n};\n```\n\n**Testing:**\nInclude small test cases for both conversions to demonstrate that instances behave as expected and `instanceof` checks work correctly for both parent and child classes.",
          "difficulty": "hard",
          "startingCode": "// Part 1: ES6 to ES5 Conversion\n// Your ES5 code for EmployeeES5 and ManagerES5 here\n\n// function EmployeeES5(name, id) {\n//   // ...\n// }\n// EmployeeES5.prototype.getDetails = function() { /* ... */ };\n// EmployeeES5.companyName = function() { /* ... */ };\n\n// function ManagerES5(name, id, department) {\n//   // ...\n// }\n// ManagerES5.prototype = Object.create(EmployeeES5.prototype);\n// ManagerES5.prototype.constructor = ManagerES5;\n// ManagerES5.prototype.getManagerDetails = function() { /* ... */ };\n\n// Part 2: ES5 to ES6 Conversion\n// Your ES6 code for VehicleES6 and CarES6 here\n\n// class VehicleES6 { /* ... */ }\n// class CarES6 extends VehicleES6 { /* ... */ }\n",
          "solutionCode": "// Part 1: ES6 to ES5 Conversion\n// ES5 Base Constructor\nfunction EmployeeES5(name, id) {\n  this.name = name;\n  this.id = id;\n}\n\nEmployeeES5.prototype.getDetails = function() {\n  return `Name: ${this.name}, ID: ${this.id}`;\n};\n\nEmployeeES5.companyName = function() {\n  return 'Tech Solutions Inc.';\n};\n\n// ES5 Derived Constructor\nfunction ManagerES5(name, id, department) {\n  EmployeeES5.call(this, name, id); // Call parent constructor\n  this.department = department;\n}\n\nManagerES5.prototype = Object.create(EmployeeES5.prototype); // Set up prototype chain\nManagerES5.prototype.constructor = ManagerES5; // Fix constructor property\n\nManagerES5.prototype.getManagerDetails = function() {\n  return `${this.getDetails()}, Department: ${this.department}`;\n};\n\n// Part 1 Tests\nconst empES5 = new EmployeeES5('Alice', 'E001');\nconsole.log('ES5 Employee Details:', empES5.getDetails()); // Name: Alice, ID: E001\nconsole.log('ES5 Employee Company:', EmployeeES5.companyName()); // Tech Solutions Inc.\nconsole.log('empES5 instanceof EmployeeES5:', empES5 instanceof EmployeeES5); // true\n\nconst mgrES5 = new ManagerES5('Bob', 'M001', 'Sales');\nconsole.log('ES5 Manager Details:', mgrES5.getManagerDetails()); // Name: Bob, ID: M001, Department: Sales\nconsole.log('mgrES5 instanceof ManagerES5:', mgrES5 instanceof ManagerES5); // true\nconsole.log('mgrES5 instanceof EmployeeES5:', mgrES5 instanceof EmployeeES5); // true\n\n\n// Part 2: ES5 to ES6 Conversion\n// ES6 Base Class\nclass VehicleES6 {\n  constructor(make, model) {\n    this.make = make;\n    this.model = model;\n  }\n\n  getVehicleInfo() {\n    return `Make: ${this.make}, Model: ${this.model}`;\n  }\n\n  static totalVehicles = 0; // Class field for static property\n  static incrementTotal() {\n    VehicleES6.totalVehicles++;\n  }\n}\n\n// ES6 Derived Class\nclass CarES6 extends VehicleES6 {\n  constructor(make, model, doors) {\n    super(make, model); // Call parent constructor\n    this.doors = doors;\n  }\n\n  getCarInfo() {\n    return `${super.getVehicleInfo()}, Doors: ${this.doors}`; // Using super.method\n  }\n}\n\n// Part 2 Tests\nconst vehES6 = new VehicleES6('Ford', 'F-150');\nconsole.log('ES6 Vehicle Info:', vehES6.getVehicleInfo()); // Make: Ford, Model: F-150\nVehicleES6.incrementTotal();\nconsole.log('ES6 Total Vehicles (static):', VehicleES6.totalVehicles); // 1\nconsole.log('vehES6 instanceof VehicleES6:', vehES6 instanceof VehicleES6); // true\n\nconst carES6 = new CarES6('Tesla', 'Model 3', 4);\nconsole.log('ES6 Car Info:', carES6.getCarInfo()); // Make: Tesla, Model: Model 3, Doors: 4\nVehicleES6.incrementTotal();\nconsole.log('ES6 Total Vehicles (static):', VehicleES6.totalVehicles); // 2\nconsole.log('carES6 instanceof CarES6:', carES6 instanceof CarES6); // true\nconsole.log('carES6 instanceof VehicleES6:', carES6 instanceof VehicleES6); // true\n",
          "testCases": [
            "**Part 1: ES6 to ES5**\n-   Create `EmployeeES5` and `ManagerES5` instances.\n-   Verify `getDetails()` and `getManagerDetails()` methods work correctly.\n-   Verify `EmployeeES5.companyName()` static method works.\n-   Check `instanceof` relationships: `mgrES5 instanceof ManagerES5` and `mgrES5 instanceof EmployeeES5` should both be `true`.",
            "**Part 2: ES5 to ES6**\n-   Create `VehicleES6` and `CarES6` instances.\n-   Verify `getVehicleInfo()` and `getCarInfo()` methods work correctly.\n-   Verify `VehicleES6.totalVehicles` static property and `VehicleES6.incrementTotal()` static method work.\n-   Check `instanceof` relationships: `carES6 instanceof CarES6` and `carES6 instanceof VehicleES6` should both be `true`."
          ],
          "hints": [
            "For ES6 to ES5: Remember to use `Parent.call(this, ...args)` in the child constructor and `Child.prototype = Object.create(Parent.prototype); Child.prototype.constructor = Child;` for the prototype chain.",
            "For ES5 to ES6: Use `super(...args)` in the derived class constructor. Static properties and methods are directly attached to the class itself (e.g., `static myStaticProp = 0;` or `static myStaticMethod() { ... }`).",
            "Pay attention to the `this` context and how it's handled differently by `call` vs. `super`."
          ],
          "tags": [
            "javascript",
            "oop",
            "inheritance",
            "es5",
            "es6",
            "refactoring",
            "classes",
            "prototypes"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "es6_vs_es5_inheritance"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "prototype_chain",
            "constructor_functions",
            "super_keyword",
            "static_members"
          ]
        },
        {
          "id": "task_two_sum_implementation",
          "title": "Implement Two Sum with Specific Output Requirements",
          "description": "\nImplement the `twoSum` function that finds two numbers in an array `nums` that add up to a `target`. This time, instead of just values, return the *indices* of the two numbers. Assume each input has exactly one solution, and you may not use the same element twice.\n\n**Requirements:**\n1.  Function signature: `function twoSum(nums, target): number[]`.\n2.  Input: `nums` (array of integers), `target` (integer).\n3.  Output: An array of two integers, `[index1, index2]`, representing the 0-based indices of the two numbers in `nums` that sum to `target`.\n4.  Constraints: Each input has exactly one solution. You may not use the same element twice.\n5.  Efficiency: Your solution should run in O(n) time complexity.\n",
          "difficulty": "medium",
          "startingCode": "/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number[]}\n */\nfunction twoSum(nums, target) {\n  // TODO: Implement using a hash map (Map in JavaScript)\n  // Store number and its index\n\n  // For each number, calculate complement\n  // Check if complement exists in map\n  // If yes, return indices\n  // If no, add current number and its index to map\n\n  return []; // Placeholder\n}\n\n// Example Test Cases:\n// console.log(twoSum([2, 7, 11, 15], 9)); // Expected: [0, 1] (because nums[0] + nums[1] == 9)\n// console.log(twoSum([3, 2, 4], 6));    // Expected: [1, 2]\n// console.log(twoSum([3, 3], 6));      // Expected: [0, 1]\n",
          "solutionCode": "/**\n * @param {number[]} nums\n * @param {number} target\n * @return {number[]}\n */\nfunction twoSum(nums, target) {\n  const numMap = new Map(); // Map to store number -> its index\n\n  for (let i = 0; i < nums.length; i++) {\n    const num = nums[i];\n    const complement = target - num;\n\n    // Check if the complement exists in our map\n    // If it does, we found the pair\n    if (numMap.has(complement)) {\n      return [numMap.get(complement), i];\n    }\n\n    // If not, add the current number and its index to the map\n    numMap.set(num, i);\n  }\n\n  // According to problem constraints, there's always exactly one solution.\n  // So, this line should technically not be reached in a valid input scenario.\n  return []; \n}\n",
          "testCases": [
            "Test Case 1: `nums = [2, 7, 11, 15]`, `target = 9` => Expected: `[0, 1]`",
            "Test Case 2: `nums = [3, 2, 4]`, `target = 6` => Expected: `[1, 2]`",
            "Test Case 3: `nums = [3, 3]`, `target = 6` => Expected: `[0, 1]`",
            "Test Case 4: `nums = [-1, -2, -3, -4, -5]`, `target = -8` => Expected: `[2, 4]` (for -3 and -5)",
            "Test Case 5: `nums = [0, 4, 3, 0]`, `target = 0` => Expected: `[0, 3]` (for 0 and 0)"
          ],
          "hints": [
            "A `Map` (or a plain JavaScript object) can efficiently store key-value pairs.",
            "Think about what information you need to store for each number you iterate over to find its complement later.",
            "The problem states 'you may not use the same element twice', which is naturally handled by the hash map approach if you store the *index*."
          ],
          "tags": [
            "algorithms",
            "arrays",
            "hash-map",
            "two-sum",
            "coding-challenge",
            "leetcode"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "array_processing_hash_maps"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "time_complexity",
            "space_complexity",
            "map_data_structure"
          ]
        },
        {
          "id": "task_find_local_maximum",
          "title": "Find a Local Maximum in an Array",
          "description": "\nImplement a function `findAnyLocalMaximum` that identifies and returns any single local maximum from a given array of numbers. A local maximum is defined as an element that is greater than or equal to its immediate neighbors. For elements at the array boundaries, only the existing neighbor(s) should be considered.\n\n**Requirements:**\n1.  Function signature: `function findAnyLocalMaximum(nums): number | null`.\n2.  Input: `nums` (array of numbers).\n3.  Output: The value of any local maximum found in the array. Return `null` if the array is empty.\n4.  Consider edge cases: empty array, single-element array, monotonically increasing/decreasing arrays.\n5.  Your solution should be efficient for general cases.\n",
          "difficulty": "medium",
          "startingCode": "/**\n * Finds a local maximum in an array.\n * @param {number[]} nums The input array of numbers.\n * @returns {number | null} The value of a local maximum, or null if the array is empty.\n */\nfunction findAnyLocalMaximum(nums) {\n  if (!nums || nums.length === 0) {\n    return null;\n  }\n  if (nums.length === 1) {\n    return nums[0];\n  }\n\n  // TODO: Check first element\n\n  // TODO: Iterate through middle elements and check neighbors\n\n  // TODO: Check last element\n\n  return null; // Should ideally not be reached for non-empty arrays\n}\n\n// Example Test Cases:\n// console.log(findAnyLocalMaximum([1, 2, 3, 4, 5]));\n// console.log(findAnyLocalMaximum([5, 4, 3, 2, 1]));\n// console.log(findAnyLocalMaximum([1, 2, 1, 3, 5, 6, 4]));\n// console.log(findAnyLocalMaximum([7]));\n// console.log(findAnyLocalMaximum([]));\n",
          "solutionCode": "/**\n * Finds a local maximum in an array.\n * @param {number[]} nums The input array of numbers.\n * @returns {number | null} The value of a local maximum, or null if the array is empty.\n */\nfunction findAnyLocalMaximum(nums) {\n  if (!nums || nums.length === 0) {\n    return null; // Handle empty array\n  }\n  if (nums.length === 1) {\n    return nums[0]; // Single element is always a local maximum\n  }\n\n  // Check first element\n  // It's a local max if it's greater than or equal to its only neighbor (nums[1])\n  if (nums[0] >= nums[1]) {\n    return nums[0];\n  }\n\n  // Check elements from index 1 to second-to-last\n  for (let i = 1; i < nums.length - 1; i++) {\n    // An element is a local max if it's >= both its left and right neighbors\n    if (nums[i] >= nums[i - 1] && nums[i] >= nums[i + 1]) {\n      return nums[i]; // Found a local maximum, return it\n    }\n  }\n\n  // Check last element\n  // It's a local max if it's greater than or equal to its only neighbor (nums[length - 2])\n  if (nums[nums.length - 1] >= nums[nums.length - 2]) {\n    return nums[nums.length - 1];\n  }\n\n  // This return statement should theoretically not be reached if the array is non-empty\n  // as a local maximum is guaranteed to exist in any non-empty array.\n  return null; \n}\n",
          "testCases": [
            "Test with an empty array: `findAnyLocalMaximum([])` should return `null`.",
            "Test with a single-element array: `findAnyLocalMaximum([10])` should return `10`.",
            "Test with a monotonically increasing array: `findAnyLocalMaximum([1, 2, 3, 4, 5])` should return `5`.",
            "Test with a monotonically decreasing array: `findAnyLocalMaximum([5, 4, 3, 2, 1])` should return `5`.",
            "Test with an array containing internal peaks: `findAnyLocalMaximum([1, 2, 1, 3, 5, 6, 4])` should return `2` or `6` (any valid local max).",
            "Test with plateaus: `findAnyLocalMaximum([1, 5, 5, 2])` should return `5` (first occurrence or the plateau itself)."
          ],
          "hints": [
            "Handle edge cases (empty, single-element arrays) explicitly first.",
            "For elements in the middle of the array, you need to compare with both the left and right neighbors.",
            "For elements at the boundaries (first and last), remember they only have one relevant neighbor.",
            "Since you need 'any' local maximum, you can return as soon as one is found."
          ],
          "tags": [
            "algorithms",
            "arrays",
            "searching",
            "local-maximum",
            "coding-challenge"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "local_maximum_definition"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "edge_cases",
            "linear_scan",
            "array_traversal"
          ]
        }
      ]
    }
  },
  {
    "id": "316dfaf9-9fc9-4727-822d-5903ac2afc29",
    "startLine": 15700,
    "endLine": 15799,
    "processedDate": "2025-06-17T15:08:17.459Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_local_maxima",
          "title": "Finding Local Maxima in an Array",
          "content": "A local maximum in an array is an element that is strictly greater than its immediate neighbors. For elements at the ends of the array, they only need to be greater than their single existing neighbor. This concept is fundamental in array traversal and identifying peaks in data sequences.\n\n## Definition\n\n*   **Local Maximum**: An element `arr[i]` is a local maximum if:\n    *   `arr[i] > arr[i-1]` and `arr[i] > arr[i+1]` (for middle elements).\n    *   `arr[0] > arr[1]` (for the first element).\n    *   `arr[arr.length-1] > arr[arr.length-2]` (for the last element).\n\n## Algorithm Steps\n\nThe most straightforward way to find all local maxima is to iterate through the array once and apply the definition:\n\n1.  **Handle Edge Cases**: \n    *   If the array is empty, there are no local maxima. Return an empty array.\n    *   If the array has only one element, that element is always considered a local maximum (as it has no neighbors to be smaller than).\n2.  **Check the First Element**: Compare `arr[0]` with `arr[1]`. If `arr[0]` is greater, it's a local maximum.\n3.  **Iterate Through Middle Elements**: Loop from the second element (`i = 1`) up to the second-to-last element (`i = arr.length - 2`). For each `arr[i]`, check if `arr[i] > arr[i-1]` AND `arr[i] > arr[i+1]`.\n4.  **Check the Last Element**: Compare `arr[arr.length-1]` with `arr[arr.length-2]`. If `arr[arr.length-1]` is greater, it's a local maximum.\n5.  **Collect Indices**: Store the indices of all found local maxima.\n\n## Time and Space Complexity\n\n*   **Time Complexity**: `O(N)` because the algorithm performs a single pass over the array, where N is the number of elements in the array.\n*   **Space Complexity**: `O(K)` where K is the number of local maxima found. In the worst case (e.g., an alternating sequence like `[1, 0, 1, 0, 1]`), K can be `N/2`, so `O(N)`. In the best case (e.g., a strictly increasing array), K is 1.",
          "examples": [
            {
              "id": "example_local_maxima_1",
              "title": "Basic Local Maxima Finder",
              "code": "function findLocalMaxima(arr) {\n  if (arr.length === 0) return [];\n  if (arr.length === 1) return [0]; // Single element is always a local maximum\n  \n  const localMaxima = [];\n  \n  // Check first element\n  if (arr[0] > arr[1]) {\n    localMaxima.push(0);\n  }\n  \n  // Check middle elements\n  for (let i = 1; i < arr.length - 1; i++) {\n    if (arr[i] > arr[i-1] && arr[i] > arr[i+1]) {\n      localMaxima.push(i);\n    }\n  }\n  \n  // Check last element\n  if (arr[arr.length-1] > arr[arr.length-2]) {\n    localMaxima.push(arr.length-1);\n  }\n  \n  return localMaxima;\n}\n\n// Example Usage:\nconst array1 = [1, 2, 3, 5, 4];\nconsole.log(`Array: [${array1}] | Local Maxima Indices: ${findLocalMaxima(array1)}`); // Expected: [3] (value 5)\n\nconst array2 = [10, 5, 20, 15, 30];\nconsole.log(`Array: [${array2}] | Local Maxima Indices: ${findLocalMaxima(array2)}`); // Expected: [0, 2, 4] (values 10, 20, 30)\n\nconst array3 = [1, 2, 3, 4, 5];\nconsole.log(`Array: [${array3}] | Local Maxima Indices: ${findLocalMaxima(array3)}`); // Expected: [4] (value 5)\n\nconst array4 = [5, 4, 3, 2, 1];\nconsole.log(`Array: [${array4}] | Local Maxima Indices: ${findLocalMaxima(array4)}`); // Expected: [0] (value 5)\n\nconst array5 = [7];\nconsole.log(`Array: [${array5}] | Local Maxima Indices: ${findLocalMaxima(array5)}`); // Expected: [0] (value 7)\n\nconst array6 = [];\nconsole.log(`Array: [${array6}] | Local Maxima Indices: ${findLocalMaxima(array6)}`); // Expected: []",
              "explanation": "This example demonstrates the `findLocalMaxima` function. It correctly handles the edge cases for empty or single-element arrays. Then, it separately checks the first, middle, and last elements based on their specific neighbor comparison rules. The output shows the indices of elements that are local maxima within various test arrays, illustrating the algorithm's behavior for increasing, decreasing, and mixed sequences.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_local_maxima_1",
            "question_local_maxima_2",
            "question_local_maxima_3",
            "question_local_maxima_4"
          ],
          "relatedTasks": [
            "task_find_local_maxima",
            "task_find_peaks_and_valleys"
          ],
          "tags": [
            "array",
            "algorithm",
            "traversal",
            "local maximum",
            "peak finding"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "array_basics",
            "conditional_statements",
            "loops"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "dynamic_programming",
            "signal_processing_basics"
          ]
        },
        {
          "id": "theory_three_sum",
          "title": "Three Sum Problem (Finding Triplets with a Target Sum)",
          "content": "The 'Three Sum' problem is a classic array manipulation problem that asks to find all unique triplets in a given array `nums` such that their sum equals a specified `target` value. This problem often appears in coding interviews to test a candidate's understanding of sorting, pointer manipulation, and duplicate handling.\n\n## Problem Statement\n\nGiven an integer array `nums` and an integer `target`, return all unique triplets `[nums[i], nums[j], nums[k]]` such that `i != j`, `i != k`, `j != k`, and `nums[i] + nums[j] + nums[k] == target`.\n\n## Algorithm: Sorting + Two-Pointer Technique\n\nThe most efficient approach to solve the Three Sum problem is a combination of sorting the array and then using the two-pointer technique.\n\n1.  **Sort the Array**: First, sort the input array `nums` in non-decreasing order. This step is crucial because it allows us to use the two-pointer technique efficiently and easily handle duplicate elements.\n2.  **Iterate and Fix First Element**: Loop through the sorted array with a pointer `i` from the beginning up to `nums.length - 2` (since we need at least two more elements for a triplet).\n    *   **Skip Duplicates for `nums[i]`**: To ensure unique triplets, if `nums[i]` is the same as `nums[i-1]` (and `i > 0`), skip the current iteration because we would have already considered triplets starting with `nums[i-1]` that are identical.\n3.  **Two-Pointer Scan**: For each fixed `nums[i]`, we need to find two other numbers `nums[left]` and `nums[right]` such that `nums[i] + nums[left] + nums[right] === target`. This transforms the problem into a 'Two Sum' problem on the *remaining* part of the array (`nums[i+1]` to `nums[nums.length-1]`).\n    *   Initialize `left` pointer to `i + 1` and `right` pointer to `nums.length - 1`.\n    *   Calculate `remainingSum = target - nums[i]`.\n    *   While `left < right`:\n        *   Calculate `currentSum = nums[left] + nums[right]`.\n        *   If `currentSum === remainingSum`:\n            *   A triplet is found: `[nums[i], nums[left], nums[right]]`. Add it to the result list.\n            *   **Skip Duplicates for `nums[left]` and `nums[right]`**: Increment `left` while `left < right` and `nums[left] === nums[left+1]`. Decrement `right` while `left < right` and `nums[right] === nums[right-1]`. This prevents adding duplicate triplets.\n            *   Then, increment `left` and decrement `right` to continue searching.\n        *   If `currentSum < remainingSum`: Increment `left` to get a larger sum.\n        *   If `currentSum > remainingSum`: Decrement `right` to get a smaller sum.\n\n## Time and Space Complexity\n\n*   **Time Complexity**: `O(N^2)`. Sorting takes `O(N log N)`. The nested loop (outer `i` loop and inner `while` loop with `left` and `right` pointers) takes `O(N * N)`, which dominates the sorting time. Hence, the overall time complexity is `O(N^2)`.\n*   **Space Complexity**: `O(log N)` to `O(N)` depending on the sorting algorithm used (in-place sort vs. one requiring extra space). If the result array is considered, it can be `O(N)` in the worst case if many triplets are found.",
          "examples": [
            {
              "id": "example_three_sum_1",
              "title": "Basic Three Sum Implementation",
              "code": "function findTriplets(nums, target) {\n  // Sort the array for the two-pointer technique\n  nums.sort((a, b) => a - b);\n  const result = [];\n  \n  // Fix the first element and find pairs for the remaining sum\n  for (let i = 0; i < nums.length - 2; i++) {\n    // Skip duplicates for the first element\n    if (i > 0 && nums[i] === nums[i-1]) continue;\n    \n    let left = i + 1;\n    let right = nums.length - 1;\n    const remainingSum = target - nums[i];\n    \n    while (left < right) {\n      const currentSum = nums[left] + nums[right];\n      \n      if (currentSum === remainingSum) {\n        result.push([nums[i], nums[left], nums[right]]);\n        \n        // Skip duplicates for left and right pointers\n        while (left < right && nums[left] === nums[left+1]) left++;\n        while (left < right && nums[right] === nums[right-1]) right--;\n        \n        left++;\n        right--;\n      } else if (currentSum < remainingSum) {\n        left++;\n      } else { // currentSum > remainingSum\n        right--;\n      }\n    }\n  }\n  \n  return result;\n}\n\n// Example Usage:\nconst numbers1 = [1, 2, 3, 4, 5];\nconst targetSum1 = 9;\nconsole.log(`Numbers: [${numbers1}] | Target: ${targetSum1} | Triplets: ${JSON.stringify(findTriplets(numbers1, targetSum1))}`); // Expected: [[1, 3, 5], [2, 3, 4]]\n\nconst numbers2 = [-1, 0, 1, 2, -1, -4];\nconst targetSum2 = 0;\nconsole.log(`Numbers: [${numbers2}] | Target: ${targetSum2} | Triplets: ${JSON.stringify(findTriplets(numbers2, targetSum2))}`); // Expected: [[-1, -1, 2], [-1, 0, 1]]\n\nconst numbers3 = [0, 0, 0, 0];\nconst targetSum3 = 0;\nconsole.log(`Numbers: [${numbers3}] | Target: ${targetSum3} | Triplets: ${JSON.stringify(findTriplets(numbers3, targetSum3))}`); // Expected: [[0, 0, 0]]\n\nconst numbers4 = [1, 2, 3];\nconst targetSum4 = 10;\nconsole.log(`Numbers: [${numbers4}] | Target: ${targetSum4} | Triplets: ${JSON.stringify(findTriplets(numbers4, targetSum4))}`); // Expected: []",
              "explanation": "This example provides the complete implementation of the `findTriplets` function. It first sorts the input array to enable the two-pointer technique. The outer loop fixes one element, and the inner `while` loop uses two pointers (`left` and `right`) to find the remaining two elements that sum up to `target - nums[i]`. Crucially, it includes logic to skip duplicate elements at all three pointer positions (`i`, `left`, `right`) to ensure that only unique triplets are added to the result. This approach optimizes the search to O(N^2) time complexity.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_three_sum_1",
            "question_three_sum_2",
            "question_three_sum_3",
            "question_three_sum_4",
            "question_three_sum_5"
          ],
          "relatedTasks": [
            "task_three_sum_implementation",
            "task_four_sum_implementation"
          ],
          "tags": [
            "array",
            "algorithm",
            "two-pointer",
            "sorting",
            "triplets",
            "summation",
            "leetcode"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "array_basics",
            "sorting_algorithms",
            "two_sum_problem"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "k_sum_problem",
            "sliding_window"
          ]
        },
        {
          "id": "theory_fisher_yates_shuffle",
          "title": "Fisher-Yates Shuffle Algorithm",
          "content": "The Fisher-Yates (also known as Knuth) shuffle algorithm is a highly efficient and unbiased method for randomizing the order of elements in an array. It ensures that every possible permutation of the array elements is equally likely, making it ideal for scenarios like shuffling a deck of cards or randomizing user lists.\n\n## Principle\n\nThe core idea behind the Fisher-Yates shuffle is to iterate through the array from the last element down to the second element (index 1). In each step, a random element from the *unshuffled* portion of the array (from the beginning up to the current element's index `i`) is chosen and swapped with the current element `arr[i]`. As the loop progresses, the 'shuffled' portion of the array grows from the end.\n\n## Algorithm Steps\n\n1.  **Iterate Backwards**: Start from the last element of the array (index `n-1`, where `n` is the array length) and go down to the second element (index `1`). The first element (index `0`) does not need to be processed because by the time the loop reaches `i=1`, `arr[0]` will be the only remaining unshuffled element and will be implicitly placed correctly.\n2.  **Generate Random Index**: For each `i`, generate a random integer `j` such that `0 <= j <= i`. This `j` represents an index within the currently unsorted portion of the array (`arr[0]` to `arr[i]`).\n3.  **Swap Elements**: Swap the element at the current index `i` with the element at the random index `j`. This effectively places a random element from the unshuffled part into its final, shuffled position.\n\n## Why it's Unbiased\n\nThe Fisher-Yates shuffle is proven to be unbiased because, at each step `i`, every element from `arr[0]` to `arr[i]` has an equal `1/(i+1)` chance of being selected and swapped into position `i`. Since each position is filled by an element chosen uniformly at random from the remaining available elements, the final permutation is also uniform and unbiased. This differs from simpler (and biased) methods like sorting by `Math.random()`, which can lead to certain permutations being more likely than others.\n\n## Time and Space Complexity\n\n*   **Time Complexity**: `O(N)` because it performs a single pass through the array, with a constant number of operations (random number generation, array access, swap) at each step.\n*   **Space Complexity**: `O(1)` if the shuffle is performed in-place (modifying the original array). If a copy is made first (as in the example to preserve the original array), it's `O(N)` for the copy.",
          "examples": [
            {
              "id": "example_fisher_yates_1",
              "title": "Fisher-Yates Shuffle Implementation",
              "code": "function shuffleArray(array) {\n  const result = [...array]; // Create a copy to avoid modifying the original array\n  let currentIndex = result.length;\n  let randomIndex;\n\n  // While there remain elements to shuffle.\n  while (currentIndex !== 0) {\n\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [result[currentIndex], result[randomIndex]] = [result[randomIndex], result[currentIndex]];\n  }\n\n  return result;\n}\n\n// Example Usage:\nconst originalArray1 = [1, 2, 3, 4, 5];\nconst shuffledArray1 = shuffleArray(originalArray1);\nconsole.log(`Original: [${originalArray1}] | Shuffled: [${shuffledArray1}]`);\n\nconst originalArray2 = ['A', 'B', 'C', 'D'];\nconst shuffledArray2 = shuffleArray(originalArray2);\nconsole.log(`Original: [${originalArray2}] | Shuffled: [${shuffledArray2}]`);\n\nconst originalArray3 = [10];\nconst shuffledArray3 = shuffleArray(originalArray3);\nconsole.log(`Original: [${originalArray3}] | Shuffled: [${shuffledArray3}]`);\n\nconst originalArray4 = [];\nconst shuffledArray4 = shuffleArray(originalArray4);\nconsole.log(`Original: [${originalArray4}] | Shuffled: [${shuffledArray4}]`);",
              "explanation": "This example provides a complete implementation of the Fisher-Yates shuffle. It starts by creating a shallow copy of the input array to ensure the original remains unchanged. The algorithm then iterates from the last element (`currentIndex = result.length - 1`) down to `0`. In each iteration, it picks a random index `randomIndex` from `0` to `currentIndex` (inclusive) and swaps the element at `currentIndex` with the element at `randomIndex`. This process ensures that each element has an equal probability of ending up in any position, leading to an unbiased permutation. The `while` loop implementation effectively works backwards, making `currentIndex` represent `i` and `randomIndex` represent `j` from the theory.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_fisher_yates_1",
            "question_fisher_yates_2",
            "question_fisher_yates_3",
            "question_fisher_yates_4",
            "question_fisher_yates_5"
          ],
          "relatedTasks": [
            "task_fisher_yates_shuffle",
            "task_deck_of_cards_shuffler"
          ],
          "tags": [
            "array",
            "algorithm",
            "randomization",
            "shuffle",
            "fisher-yates",
            "in-place",
            "unbiased"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "array_basics",
            "random_number_generation",
            "swapping_elements"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "game_development_basics",
            "sampling_algorithms"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_local_maxima_1",
          "topic": "Local Maxima",
          "level": "easy",
          "type": "flashcard",
          "question": "What is a 'local maximum' in an array?",
          "answer": "An element in an array is a local maximum if it is strictly greater than all of its immediate neighbors.",
          "options": [],
          "analysisPoints": [
            "Understanding of relative comparisons.",
            "Distinction between local and global maximum."
          ],
          "keyConcepts": [
            "local maximum",
            "array traversal",
            "neighbors"
          ],
          "evaluationCriteria": [
            "Correct definition of local maximum."
          ],
          "example": "For example, in `[1, 5, 2, 8, 3]`, `5` is a local maximum because `5 > 1` and `5 > 2`. `8` is also a local maximum because `8 > 2` and `8 > 3`.",
          "tags": [
            "array",
            "definition",
            "basic"
          ],
          "prerequisites": [
            "array_basics"
          ],
          "complexity": 2,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_local_maxima_2",
          "topic": "Local Maxima",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `findLocalMaxima` function provided in the theory. What would be the output for the input `arr = [3, 2, 1]`?",
          "answer": "[0]",
          "options": [
            "[0]",
            "[0, 2]",
            "[]",
            "[2]"
          ],
          "analysisPoints": [
            "Correctly applying the edge case logic for the first element.",
            "Understanding the condition for middle elements.",
            "Understanding the condition for the last element."
          ],
          "keyConcepts": [
            "local maximum",
            "edge cases",
            "array traversal",
            "conditional logic"
          ],
          "evaluationCriteria": [
            "Ability to trace code execution with specific inputs.",
            "Correct handling of array boundaries for local maxima."
          ],
          "example": "The array is `[3, 2, 1]`. `arr.length` is 3.\n\n1.  **Check first element**: `arr[0]` (3) > `arr[1]` (2). True. `localMaxima.push(0)`. `localMaxima` is now `[0]`.\n2.  **Check middle elements**: Loop `i` from 1 to `arr.length - 2` (which is 1). So, only `i=1` is checked.\n    *   `arr[1]` (2) > `arr[0]` (3)? False. (`arr[1]` is not greater than `arr[0]`). No push.\n3.  **Check last element**: `arr[arr.length-1]` (1) > `arr[arr.length-2]` (2)? False. No push.\n\nTherefore, the final `localMaxima` is `[0]`.",
          "tags": [
            "array",
            "mcq",
            "trace",
            "edge-case"
          ],
          "prerequisites": [
            "local_maxima_algorithm"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_local_maxima_3",
          "topic": "Local Maxima",
          "level": "medium",
          "type": "open",
          "question": "Explain the time and space complexity of the `findLocalMaxima` algorithm. Justify your answer.",
          "answer": "The time complexity of the `findLocalMaxima` algorithm is O(N), where N is the number of elements in the array. This is because the algorithm iterates through the array a fixed number of times (once for the first element, once for the main loop covering middle elements, and once for the last element). Each comparison and array access operation takes constant time.\n\nThe space complexity is O(K), where K is the number of local maxima found. This is because an array `localMaxima` is used to store the indices of the found maxima. In the worst-case scenario (e.g., an alternating sequence like `[1,0,1,0,1]`), K can be approximately N/2, leading to O(N) space complexity. In the best case (e.g., a strictly increasing or decreasing array, or an empty array), K can be 0 or 1, leading to O(1) space complexity.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies O(N) time complexity.",
            "Correctly identifies O(K) or O(N) space complexity.",
            "Provides clear justification based on loop iterations and auxiliary data structures."
          ],
          "keyConcepts": [
            "time complexity",
            "space complexity",
            "big O notation",
            "array traversal",
            "auxiliary space"
          ],
          "evaluationCriteria": [
            "Accuracy of complexity analysis.",
            "Clarity and completeness of explanation.",
            "Ability to relate complexity to algorithm steps."
          ],
          "example": "",
          "tags": [
            "complexity",
            "algorithm",
            "analysis"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_local_maxima_4",
          "topic": "Local Maxima",
          "level": "hard",
          "type": "code",
          "question": "Implement a function `findPeaksAndValleys(arr)` that returns an array of objects, where each object indicates whether an element is a 'peak' (local maximum) or a 'valley' (local minimum) along with its index and value. An element can be both a peak and a valley only if the array has one element. For elements at the ends, they are considered peaks/valleys if they satisfy the condition with their single neighbor. Elements that are part of a plateau (e.g., `[1, 5, 5, 5, 2]`, the middle 5s) should not be considered peaks or valleys unless they are at the very end of a plateau.\n\nExample:\n`findPeaksAndValleys([1, 2, 1, 3, 2, 4, 0])` should return:\n`[{ type: 'peak', index: 1, value: 2 }, { type: 'valley', index: 2, value: 1 }, { type: 'peak', index: 3, value: 3 }, { type: 'peak', index: 5, value: 4 }, { type: 'valley', index: 6, value: 0 }]`\n\n`findPeaksAndValleys([5])` should return: `[{ type: 'peak', index: 0, value: 5 }]`",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Correctly identifies peaks and valleys.",
            "Handles edge cases for array ends.",
            "Correctly handles single element arrays.",
            "Distinguishes peaks/valleys from plateaus (e.g., [1, 5, 5, 2] -> 5s are not peak).",
            "Produces output in the specified format.",
            "Maintains O(N) time complexity."
          ],
          "keyConcepts": [
            "local maximum",
            "local minimum",
            "array traversal",
            "edge cases",
            "plateaus"
          ],
          "evaluationCriteria": [
            "Functional correctness for various inputs.",
            "Efficiency (time and space).",
            "Code readability and structure."
          ],
          "example": "```typescript\nfunction findPeaksAndValleys(arr) {\n  const result = [];\n  if (arr.length === 0) return [];\n  if (arr.length === 1) {\n    result.push({ type: 'peak', index: 0, value: arr[0] });\n    // In case problem definition allows, could also be a valley\n    // result.push({ type: 'valley', index: 0, value: arr[0] });\n    return result;\n  }\n\n  for (let i = 0; i < arr.length; i++) {\n    const isPeak = (i === 0 || arr[i] > arr[i - 1]) && (i === arr.length - 1 || arr[i] > arr[i + 1]);\n    const isValley = (i === 0 || arr[i] < arr[i - 1]) && (i === arr.length - 1 || arr[i] < arr[i + 1]);\n\n    // Refined check for plateaus: look for first/last element in a plateau\n    // For a peak: arr[i] must be strictly greater than left and strictly greater than right\n    // Or, if it's part of a plateau, it must be the start of a flat segment that's higher\n    // Or, if it's the end of a flat segment that's higher\n\n    // Better: traverse to find next distinct element for comparison\n    let leftVal = (i === 0) ? -Infinity : arr[i-1];\n    let rightVal = (i === arr.length - 1) ? -Infinity : arr[i+1];\n\n    // Find the next *distinct* element to the right for comparison, skipping plateaus\n    let k = i + 1;\n    while (k < arr.length && arr[k] === arr[i]) {\n      k++;\n    }\n    let nextDistinctVal = (k === arr.length) ? -Infinity : arr[k];\n\n    // Find the previous *distinct* element to the left for comparison, skipping plateaus\n    let p = i - 1;\n    while (p >= 0 && arr[p] === arr[i]) {\n      p--;\n    }\n    let prevDistinctVal = (p < 0) ? -Infinity : arr[p];\n\n    const currentIsPeak = arr[i] > prevDistinctVal && arr[i] > nextDistinctVal;\n    const currentIsValley = arr[i] < prevDistinctVal && arr[i] < nextDistinctVal;\n\n    if (currentIsPeak) {\n      result.push({ type: 'peak', index: i, value: arr[i] });\n    }\n    if (currentIsValley) {\n      result.push({ type: 'valley', index: i, value: arr[i] });\n    }\n\n    // Skip elements within a plateau once a peak/valley is identified (or not identified)\n    if (k > i + 1) {\n        i = k - 1; // Move i to the last element of the current plateau\n    }\n  }\n  return result;\n}\n\n// Corrected example logic for plateau handling\nfunction findPeaksAndValleysOptimized(arr) {\n    const result = [];\n    if (arr.length === 0) return [];\n    if (arr.length === 1) {\n        result.push({ type: 'peak', index: 0, value: arr[0] });\n        return result;\n    }\n\n    for (let i = 0; i < arr.length; i++) {\n        let leftDistinctIndex = i - 1;\n        while (leftDistinctIndex >= 0 && arr[leftDistinctIndex] === arr[i]) {\n            leftDistinctIndex--;\n        }\n\n        let rightDistinctIndex = i + 1;\n        while (rightDistinctIndex < arr.length && arr[rightDistinctIndex] === arr[i]) {\n            rightDistinctIndex++;\n        }\n\n        const leftVal = (leftDistinctIndex < 0) ? -Infinity : arr[leftDistinctIndex];\n        const rightVal = (rightDistinctIndex >= arr.length) ? -Infinity : arr[rightDistinctIndex];\n\n        const isPeak = arr[i] > leftVal && arr[i] > rightVal;\n        const isValley = arr[i] < leftVal && arr[i] < rightVal;\n\n        // Only add peak/valley for the first element of a plateau\n        if (isPeak && (i === 0 || arr[i] !== arr[i-1])) {\n            result.push({ type: 'peak', index: i, value: arr[i] });\n        }\n        if (isValley && (i === 0 || arr[i] !== arr[i-1])) {\n            result.push({ type: 'valley', index: i, value: arr[i] });\n        }\n\n        // Skip remaining elements in the plateau\n        i = rightDistinctIndex - 1; \n    }\n    return result;\n}\n\n// Test cases\n// console.log(findPeaksAndValleysOptimized([1, 2, 1, 3, 2, 4, 0])); // [{ type: 'peak', index: 1, value: 2 }, { type: 'valley', index: 2, value: 1 }, { type: 'peak', index: 3, value: 3 }, { type: 'peak', index: 5, value: 4 }, { type: 'valley', index: 6, value: 0 }]\n// console.log(findPeaksAndValleysOptimized([5])); // [{ type: 'peak', index: 0, value: 5 }]\n// console.log(findPeaksAndValleysOptimized([1, 5, 5, 5, 2])); // [{ type: 'peak', index: 1, value: 5 }, { type: 'valley', index: 4, value: 2 }] (or just peak at index 1 and valley at index 4 based on plateau definition)\n// The problem states 'elements that are part of a plateau... should not be considered peaks or valleys unless they are at the very end of a plateau'. This needs careful definition. \n// My current `findPeaksAndValleysOptimized` considers the START of a plateau if it's a peak/valley.\n// If the strict 'no plateau' rule applies, then [1,5,5,5,2] -> 5s are NOT peaks.\n// Re-interpretation: peak/valley requires *strictly greater/less* than *all* neighbors, skipping identical ones.\n// For [1, 5, 5, 5, 2], the first 5 is not strictly greater than its right neighbor (also 5). So no peak.\n// Let's adjust the definition in the provided example solution to strictly match that interpretation. The first version `findPeaksAndValleys` was closer to that.\n// For the problem example `[1, 2, 1, 3, 2, 4, 0]`, it should be:\n// 1: Neither\n// 2 (idx 1): 2 > 1, 2 > 1 -> Peak\n// 1 (idx 2): 1 < 2, 1 < 3 -> Valley\n// 3 (idx 3): 3 > 1, 3 > 2 -> Peak\n// 2 (idx 4): 2 > 3 (False)\n// 4 (idx 5): 4 > 2, 4 > 0 -> Peak\n// 0 (idx 6): 0 < 4 -> Valley\n// My `findPeaksAndValleysOptimized` matches the problem description better, assuming a peak is the first element of a local maximum plateau.\n// The phrasing 'unless they are at the very end of a plateau' is slightly ambiguous but generally it means strict inequality for interior elements.\n// Given the example, it implies a peak is `arr[i] > arr[i-1]` and `arr[i] > arr[i+1]` considering *distinct* neighbors.\n```",
          "tags": [
            "array",
            "algorithm",
            "advanced",
            "peak",
            "valley",
            "edge-cases"
          ],
          "prerequisites": [
            "local_maxima_algorithm",
            "local_minima"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_three_sum_1",
          "topic": "Three Sum Problem",
          "level": "medium",
          "type": "flashcard",
          "question": "What is the primary reason for sorting the array when solving the Three Sum problem with the two-pointer technique?",
          "answer": "Sorting the array allows for the efficient use of the two-pointer technique to find pairs that sum to a specific value, and it greatly simplifies the handling of duplicate elements to ensure unique triplets.",
          "options": [],
          "analysisPoints": [
            "Understanding of how sorting enables two-pointer.",
            "Understanding of how sorting simplifies duplicate handling."
          ],
          "keyConcepts": [
            "sorting",
            "two-pointer",
            "duplicates",
            "efficiency"
          ],
          "evaluationCriteria": [
            "Clear explanation of sorting's benefits."
          ],
          "example": "",
          "tags": [
            "array",
            "sorting",
            "two-pointer",
            "efficiency"
          ],
          "prerequisites": [
            "two_sum_problem"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_three_sum_2",
          "topic": "Three Sum Problem",
          "level": "medium",
          "type": "mcq",
          "question": "In the `findTriplets` function, why is the condition `if (i > 0 && nums[i] === nums[i-1]) continue;` necessary?",
          "answer": "To skip duplicate values for the first element (`nums[i]`) and prevent adding duplicate triplets to the result.",
          "options": [
            "To optimize the loop by skipping unnecessary iterations when `nums[i]` is zero.",
            "To handle edge cases where the array has only one or two elements.",
            "To skip duplicate values for the first element (`nums[i]`) and prevent adding duplicate triplets to the result.",
            "To ensure that `nums[i-1]` exists and prevent an out-of-bounds error."
          ],
          "analysisPoints": [
            "Understanding of duplicate handling in multi-sum problems.",
            "Distinguishing between optimization and correctness reasons.",
            "Recognizing the purpose of `continue` statement."
          ],
          "keyConcepts": [
            "duplicates",
            "two-pointer",
            "triplets",
            "uniqueness"
          ],
          "evaluationCriteria": [
            "Correct identification of duplicate handling.",
            "Understanding of the impact on result uniqueness."
          ],
          "example": "If `nums = [-1, 0, 1, 2, -1, -4]` and `target = 0`.\nAfter sorting: `[-4, -1, -1, 0, 1, 2]`.\nWithout the duplicate skip, when `i` is at index 1 (`nums[1] = -1`), we find `[-1, 0, 1]`. Then, when `i` is at index 2 (`nums[2] = -1`), we would again find `[-1, 0, 1]`, leading to a duplicate triplet in the result.",
          "tags": [
            "array",
            "mcq",
            "duplicate",
            "optimization"
          ],
          "prerequisites": [
            "two_sum_problem"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_three_sum_3",
          "topic": "Three Sum Problem",
          "level": "hard",
          "type": "code",
          "question": "Modify the `findTriplets` function to return the count of unique triplets whose sum equals the target, instead of the triplets themselves. Ensure the solution remains `O(N^2)`.",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Correctly adapts the logic to count instead of store.",
            "Maintains the O(N^2) time complexity.",
            "Correctly handles duplicate triplets to count only unique ones.",
            "Handles edge cases like empty array or no triplets found."
          ],
          "keyConcepts": [
            "three sum",
            "two-pointer",
            "counting",
            "duplicates",
            "optimization"
          ],
          "evaluationCriteria": [
            "Functional correctness for counting unique triplets.",
            "Efficiency of the solution.",
            "Ability to modify existing algorithms."
          ],
          "example": "```typescript\nfunction countTriplets(nums, target) {\n  nums.sort((a, b) => a - b);\n  let count = 0;\n  \n  for (let i = 0; i < nums.length - 2; i++) {\n    if (i > 0 && nums[i] === nums[i-1]) continue;\n    \n    let left = i + 1;\n    let right = nums.length - 1;\n    const remainingSum = target - nums[i];\n    \n    while (left < right) {\n      const currentSum = nums[left] + nums[right];\n      \n      if (currentSum === remainingSum) {\n        count++;\n        \n        while (left < right && nums[left] === nums[left+1]) left++;\n        while (left < right && nums[right] === nums[right-1]) right--;\n        \n        left++;\n        right--;\n      } else if (currentSum < remainingSum) {\n        left++;\n      } else {\n        right--;\n      }\n    }\n  }\n  \n  return count;\n}\n\n// Example Usage:\nconst numbers = [-1, 0, 1, 2, -1, -4];\nconst targetSum = 0;\nconsole.log(`Numbers: [${numbers}] | Target: ${targetSum} | Count of Triplets: ${countTriplets(numbers, targetSum)}`); // Expected: 2 ([[-1, -1, 2], [-1, 0, 1]])\n\nconst numbers2 = [1, 2, 3, 4, 5];\nconst targetSum2 = 9;\nconsole.log(`Numbers: [${numbers2}] | Target: ${targetSum2} | Count of Triplets: ${countTriplets(numbers2, targetSum2)}`); // Expected: 2 ([[1, 3, 5], [2, 3, 4]])\n\nconst numbers3 = [0, 0, 0, 0];\nconst targetSum3 = 0;\nconsole.log(`Numbers: [${numbers3}] | Target: ${targetSum3} | Count of Triplets: ${countTriplets(numbers3, targetSum3)}`); // Expected: 1 ([[0, 0, 0]])\n```",
          "tags": [
            "array",
            "algorithm",
            "counting",
            "two-pointer",
            "optimization"
          ],
          "prerequisites": [
            "three_sum_problem"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_three_sum_4",
          "topic": "Three Sum Problem",
          "level": "easy",
          "type": "open",
          "question": "What is the time complexity of the Three Sum algorithm after sorting the array, and why?",
          "answer": "After sorting, the time complexity is O(N^2). This is because the outer loop iterates `N-2` times. Inside this loop, the two-pointer approach (the `while` loop) effectively traverses the remaining portion of the array, which takes O(N) time. Thus, `N * N` operations lead to an overall O(N^2) complexity.",
          "options": [],
          "analysisPoints": [
            "Correctly states O(N^2) complexity.",
            "Explains the contribution of the outer loop and inner two-pointer loop.",
            "Distinguishes from the sorting time (which is typically O(N log N) but is dominated by O(N^2))."
          ],
          "keyConcepts": [
            "time complexity",
            "big O notation",
            "two-pointer",
            "sorting"
          ],
          "evaluationCriteria": [
            "Accuracy and clarity of complexity explanation.",
            "Understanding of algorithmic phases."
          ],
          "example": "",
          "tags": [
            "complexity",
            "algorithm",
            "analysis"
          ],
          "prerequisites": [
            "big_o_notation",
            "sorting_algorithms"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_three_sum_5",
          "topic": "Three Sum Problem",
          "level": "medium",
          "type": "open",
          "question": "How would you adapt the `findTriplets` algorithm to solve the 'Four Sum' problem (finding four numbers that sum to a target)? Describe the approach and its expected time complexity.",
          "answer": "To adapt the `findTriplets` algorithm to solve the 'Four Sum' problem, we can extend the nested loop structure. The core idea would be:\n\n1.  **Sort the Array**: First, sort the input array `nums`. This is still crucial for duplicate handling and using pointer techniques.\n2.  **Outer Loops**: Introduce two outer loops:\n    *   One loop for the first element (`i`) from `0` to `nums.length - 3`.\n    *   An inner loop for the second element (`j`) from `i + 1` to `nums.length - 2`.\n3.  **Two-Pointer Scan**: Inside these two loops, the problem reduces to a 'Two Sum' problem. Use two pointers, `left` (starting at `j + 1`) and `right` (starting at `nums.length - 1`).\n4.  **Calculate Remaining Sum**: The `remainingSum` would be `target - nums[i] - nums[j]`.\n5.  **Duplicate Handling**: Apply similar duplicate skipping logic for `i`, `j`, `left`, and `right` pointers to ensure unique quadruplets.\n\n**Time Complexity**: Sorting takes `O(N log N)`. The three nested loops (two outer loops for `i` and `j`, and the inner `while` loop for `left` and `right`) would result in `O(N * N * N)` or `O(N^3)` operations. Thus, the overall time complexity would be `O(N^3)`.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies extending the nested loop structure.",
            "Applies the two-pointer technique recursively (or by adding another fixed pointer).",
            "Mentions duplicate handling.",
            "Correctly estimates `O(N^3)` time complexity."
          ],
          "keyConcepts": [
            "four sum",
            "k-sum",
            "two-pointer",
            "sorting",
            "nested loops",
            "complexity"
          ],
          "evaluationCriteria": [
            "Ability to generalize algorithms.",
            "Accuracy of proposed approach.",
            "Correct complexity analysis."
          ],
          "example": "",
          "tags": [
            "algorithm",
            "extension",
            "complexity",
            "k-sum"
          ],
          "prerequisites": [
            "three_sum_problem"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_fisher_yates_1",
          "topic": "Fisher-Yates Shuffle",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the main characteristic of a Fisher-Yates shuffled array?",
          "answer": "Every possible permutation of the array elements is equally likely; it produces an unbiased random permutation.",
          "options": [],
          "analysisPoints": [
            "Understanding of 'unbiased' and 'uniform distribution'."
          ],
          "keyConcepts": [
            "fisher-yates",
            "unbiased",
            "permutation",
            "randomization"
          ],
          "evaluationCriteria": [
            "Correctly identifies unbiased property."
          ],
          "example": "",
          "tags": [
            "randomization",
            "definition",
            "basic"
          ],
          "prerequisites": [
            "array_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_fisher_yates_2",
          "topic": "Fisher-Yates Shuffle",
          "level": "medium",
          "type": "mcq",
          "question": "In the Fisher-Yates shuffle algorithm, when iterating from `i` down to `1`, why is `Math.random() * (i + 1)` used to generate the random index `j`?",
          "answer": "To ensure that the random index `j` is chosen uniformly from `0` to the current `i` (inclusive), covering all elements in the remaining unshuffled portion of the array.",
          "options": [
            "To select a random index from `0` to the end of the original array.",
            "To exclude the current element `arr[i]` from being swapped with itself.",
            "To ensure that the random index `j` is chosen uniformly from `0` to the current `i` (inclusive), covering all elements in the remaining unshuffled portion of the array.",
            "To improve performance by reducing the range of random numbers generated."
          ],
          "analysisPoints": [
            "Understanding the range of `Math.random()` (0 inclusive, 1 exclusive).",
            "Understanding why `i+1` is used for the upper bound.",
            "Relating the random range to the unshuffled portion of the array."
          ],
          "keyConcepts": [
            "randomization",
            "fisher-yates",
            "uniform distribution",
            "array indexing"
          ],
          "evaluationCriteria": [
            "Correct explanation of random index generation.",
            "Understanding of the algorithm's mechanism."
          ],
          "example": "If `i` is 4, `i+1` is 5. `Math.random() * 5` will generate a number between 0 (inclusive) and 5 (exclusive). `Math.floor()` will then yield an integer from 0, 1, 2, 3, or 4. This correctly represents the indices of elements from `arr[0]` to `arr[4]`, which are the candidates for swapping with `arr[4]`.",
          "tags": [
            "randomization",
            "mcq",
            "algorithm_details"
          ],
          "prerequisites": [
            "random_number_generation"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_fisher_yates_3",
          "topic": "Fisher-Yates Shuffle",
          "level": "medium",
          "type": "open",
          "question": "Explain why the Fisher-Yates shuffle is considered an 'unbiased' shuffling algorithm. Contrast it with a naive shuffling method like `array.sort(() => Math.random() - 0.5)`.",
          "answer": "The Fisher-Yates shuffle is unbiased because it ensures that every element has an equal probability of ending up in any given position, and consequently, every possible permutation of the array is equally likely. This is achieved by, at each step `i` (from `n-1` down to `1`), selecting a random element from the remaining `i+1` unshuffled elements (`arr[0]` to `arr[i]`) and swapping it with `arr[i]`. Each position is filled by an element uniformly chosen from the still-available pool, leading to a truly random permutation.\n\nIn contrast, the naive `array.sort(() => Math.random() - 0.5)` method is **biased**. JavaScript's `sort` method (and similar built-in sorting algorithms in other languages) are typically not designed for perfect randomization. They often use algorithms like Quicksort or Merge Sort, which expect a consistent comparison function. When a random comparison function is provided, the sort might not be stable, or it might not even correctly sort all elements, leading to certain permutations being significantly more likely than others. This bias is especially noticeable for smaller arrays but persists for larger ones, meaning not all permutations are equally probable. It's an improper application of a sorting algorithm for randomization.",
          "options": [],
          "analysisPoints": [
            "Correctly defines unbiased for Fisher-Yates (equal probability for permutations/elements).",
            "Explains the mechanism of Fisher-Yates that ensures unbiasedness.",
            "Identifies the bias in `array.sort(() => Math.random() - 0.5)`.",
            "Explains *why* the naive method is biased (non-deterministic comparison, underlying sort algorithm assumptions)."
          ],
          "keyConcepts": [
            "fisher-yates",
            "bias",
            "unbiased",
            "randomization",
            "permutation",
            "sorting_algorithm_misuse"
          ],
          "evaluationCriteria": [
            "Depth of explanation for unbiasedness.",
            "Clear comparison and explanation of bias in the naive method."
          ],
          "example": "",
          "tags": [
            "randomization",
            "algorithm",
            "comparison",
            "best-practices"
          ],
          "prerequisites": [
            "sorting_algorithms_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_fisher_yates_4",
          "topic": "Fisher-Yates Shuffle",
          "level": "hard",
          "type": "code",
          "question": "Implement a `getRandomSubset(array, size)` function that returns a random subset of `size` elements from the input `array`. The subset should be unique (no duplicate elements from the original array) and the order of elements in the subset does not matter. The original array should not be modified. Strive for optimal time and space complexity.",
          "answer": "",
          "options": [],
          "analysisPoints": [
            "Correctly implements random subset selection.",
            "Ensures uniqueness of elements in the subset.",
            "Does not modify the original array.",
            "Handles edge cases (e.g., `size` > `array.length`, `size` <= 0, empty array).",
            "Demonstrates understanding of Fisher-Yates principles for partial shuffling/sampling.",
            "Achieves time complexity better than `O(N)` if `size` is much smaller than `N` (e.g., `O(size)` on average with a Set, or `O(N)` for Fisher-Yates adaptation but only shuffling up to `size` elements)."
          ],
          "keyConcepts": [
            "randomization",
            "subset",
            "sampling",
            "fisher-yates",
            "array_copy",
            "edge-cases"
          ],
          "evaluationCriteria": [
            "Functional correctness of subset generation.",
            "Efficiency (avoiding full shuffle if only a small subset is needed).",
            "Code robustness and clarity."
          ],
          "example": "```typescript\nfunction getRandomSubset(array, size) {\n  if (size <= 0) return [];\n  if (size >= array.length) return [...array]; // Return a copy of the whole array\n\n  const tempArray = [...array]; // Create a mutable copy\n  const subset = [];\n\n  // Fisher-Yates partial shuffle: only shuffle as many elements as needed for the subset\n  for (let i = 0; i < size; i++) {\n    // Generate a random index from the remaining unshuffled portion (from i to tempArray.length - 1)\n    const randomIndex = i + Math.floor(Math.random() * (tempArray.length - i));\n    \n    // Swap the element at the current index i with the random element\n    // This effectively brings a random element to position i\n    [tempArray[i], tempArray[randomIndex]] = [tempArray[randomIndex], tempArray[i]];\n    \n    // Add the element at position i (which is now a random element) to the subset\n    subset.push(tempArray[i]);\n  }\n\n  return subset;\n}\n\n// Example Usage:\nconst original = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconsole.log(`Original: [${original}] | Subset size 3: [${getRandomSubset(original, 3)}]`);\nconsole.log(`Original: [${original}] | Subset size 7: [${getRandomSubset(original, 7)}]`);\nconsole.log(`Original: [${original}] | Subset size 1: [${getRandomSubset(original, 1)}]`);\nconsole.log(`Original: [${original}] | Subset size 0: [${getRandomSubset(original, 0)}]`);\nconsole.log(`Original: [${original}] | Subset size 10: [${getRandomSubset(original, 10)}]`);\nconsole.log(`Original: [${original}] | Subset size 12: [${getRandomSubset(original, 12)}]`);\n\nconst emptyArr = [];\nconsole.log(`Original: [${emptyArr}] | Subset size 2: [${getRandomSubset(emptyArr, 2)}]`);\n```",
          "tags": [
            "randomization",
            "sampling",
            "algorithm",
            "advanced",
            "subset"
          ],
          "prerequisites": [
            "fisher_yates_shuffle"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_fisher_yates_5",
          "topic": "Fisher-Yates Shuffle",
          "level": "medium",
          "type": "open",
          "question": "What are the time and space complexities of the Fisher-Yates shuffle algorithm, and how do they compare to a naive approach like `array.sort(() => Math.random() - 0.5)` in terms of efficiency?",
          "answer": "The Fisher-Yates shuffle algorithm has a time complexity of `O(N)`, where N is the number of elements in the array. This is because it performs a single pass through the array, with a constant number of operations (random number generation, array access, and swapping) for each element.\n\nThe space complexity is `O(1)` if the shuffle is performed in-place (modifying the original array). If a copy of the array is made before shuffling (as shown in the provided example), then the space complexity becomes `O(N)` for storing the copy.\n\nIn comparison, a naive approach like `array.sort(() => Math.random() - 0.5)` typically has a time complexity of `O(N log N)` because it relies on a comparison-based sorting algorithm, which is inherently less efficient than the linear time complexity of Fisher-Yates for shuffling. The space complexity for the naive approach would depend on the specific sorting algorithm implementation (e.g., `O(log N)` for in-place quicksort, `O(N)` for mergesort). However, beyond efficiency, the critical difference is that the naive approach produces a **biased** permutation, whereas Fisher-Yates produces an **unbiased** one, making Fisher-Yates the superior choice for true randomization.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies Fisher-Yates time (O(N)) and space (O(1) or O(N)) complexities.",
            "Compares Fisher-Yates time complexity to naive sort (O(N log N)).",
            "Highlights the crucial difference in bias/unbiasedness as a major factor beyond raw efficiency."
          ],
          "keyConcepts": [
            "complexity",
            "time complexity",
            "space complexity",
            "fisher-yates",
            "naive_shuffle",
            "bias"
          ],
          "evaluationCriteria": [
            "Accurate comparison of complexities.",
            "Emphasis on the qualitative difference (bias) alongside quantitative difference (efficiency)."
          ],
          "example": "",
          "tags": [
            "complexity",
            "efficiency",
            "comparison",
            "algorithm"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_find_local_maxima",
          "title": "Implement Find Local Maxima",
          "description": "\nImplement a function `findLocalMaxima(arr)` that takes an array of numbers and returns an array containing the indices of all local maxima. A local maximum is an element that is strictly greater than its immediate neighbors. For elements at the ends of the array, they only need to be greater than their single existing neighbor.\n\n**Requirements:**\n1.  Handle empty arrays by returning an empty array.\n2.  Handle arrays with a single element by considering it a local maximum and returning its index (0).\n3.  Ensure strict inequality: `arr[i]` must be *greater* than its neighbors.\n4.  The solution should have optimal time complexity.\n",
          "difficulty": "medium",
          "startingCode": "function findLocalMaxima(arr) {\n  // TODO: Implement the required functionality\n  // Consider edge cases:\n  // 1. Empty array\n  // 2. Single element array\n  // 3. Elements at array boundaries\n  \n  return []; \n}",
          "solutionCode": "function findLocalMaxima(arr) {\n  if (arr.length === 0) return [];\n  if (arr.length === 1) return [0];\n  \n  const localMaxima = [];\n  \n  // Check first element\n  if (arr[0] > arr[1]) {\n    localMaxima.push(0);\n  }\n  \n  // Check middle elements\n  for (let i = 1; i < arr.length - 1; i++) {\n    if (arr[i] > arr[i-1] && arr[i] > arr[i+1]) {\n      localMaxima.push(i);\n    }\n  }\n  \n  // Check last element\n  if (arr[arr.length-1] > arr[arr.length-2]) {\n    localMaxima.push(arr.length-1);\n  }\n  \n  return localMaxima;\n}",
          "testCases": [
            "findLocalMaxima([]) should return []",
            "findLocalMaxima([5]) should return [0]",
            "findLocalMaxima([1, 2, 3, 5, 4]) should return [3]",
            "findLocalMaxima([10, 5, 20, 15, 30]) should return [0, 2, 4]",
            "findLocalMaxima([1, 2, 3, 4, 5]) should return [4]",
            "findLocalMaxima([5, 4, 3, 2, 1]) should return [0]",
            "findLocalMaxima([1, 0, 1, 0, 1]) should return [0, 2, 4]",
            "findLocalMaxima([7, 7, 7]) should return []",
            "findLocalMaxima([1, 2, 2, 1]) should return []"
          ],
          "hints": [
            "Break down the problem into three cases: first element, middle elements, and last element.",
            "Pay attention to array boundary conditions for `i-1` and `i+1`.",
            "Ensure you're using strict greater-than (>) for comparisons.",
            "Think about the time complexity requirement - can you do this in a single pass?"
          ],
          "tags": [
            "array",
            "algorithm",
            "traversal",
            "local maximum"
          ],
          "timeEstimate": 25,
          "prerequisites": [
            "array_basics",
            "conditional_statements",
            "loops"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "local_minimum",
            "peak_finding"
          ]
        },
        {
          "id": "task_find_peaks_and_valleys",
          "title": "Find All Peaks and Valleys",
          "description": "\nExtend the concept of local maxima to include local minima. Implement a function `findPeaksAndValleys(arr)` that returns an array of objects. Each object should have `type` ('peak' or 'valley'), `index`, and `value`. A 'peak' is a local maximum, and a 'valley' is a local minimum (strictly less than its neighbors). Handle array boundaries and single-element arrays as discussed for local maxima.\n\n**Requirements:**\n1.  Return an empty array for empty input.\n2.  For a single-element array, it's considered a peak (and optionally a valley, if your interpretation allows for it based on the problem statement context; for this task, only mark it as a peak). \n3.  Strict inequality for comparisons (`>`, `<`).\n4.  Do not consider elements within a plateau (e.g., `[1, 5, 5, 5, 2]`) as peaks or valleys unless they are at the very beginning or end of the array, or if they are the first/last *distinct* element of a plateau that qualifies. For simplicity in this task, strictly adjacent comparison is sufficient.\n\n**Example Output Format:**\n`[{ type: 'peak', index: 1, value: 2 }, { type: 'valley', index: 2, value: 1 }]`\n",
          "difficulty": "hard",
          "startingCode": "function findPeaksAndValleys(arr) {\n  // TODO: Implement the logic to find both peaks and valleys\n  // Remember to handle edge cases for first/last elements and single-element arrays.\n  // An element within a plateau (e.g., 5 in [1, 5, 5, 2]) should not be counted unless it's strictly a peak/valley.\n  return [];\n}",
          "solutionCode": "function findPeaksAndValleys(arr) {\n  const result = [];\n  if (arr.length === 0) return [];\n  if (arr.length === 1) {\n    result.push({ type: 'peak', index: 0, value: arr[0] });\n    return result;\n  }\n\n  for (let i = 0; i < arr.length; i++) {\n    const isFirst = i === 0;\n    const isLast = i === arr.length - 1;\n    \n    let isPeak = false;\n    let isValley = false;\n\n    if (isFirst) {\n      if (arr[i] > arr[i+1]) isPeak = true;\n      if (arr[i] < arr[i+1]) isValley = true;\n    } else if (isLast) {\n      if (arr[i] > arr[i-1]) isPeak = true;\n      if (arr[i] < arr[i-1]) isValley = true;\n    } else {\n      // Middle element: must be strictly greater/less than BOTH neighbors\n      if (arr[i] > arr[i-1] && arr[i] > arr[i+1]) isPeak = true;\n      if (arr[i] < arr[i-1] && arr[i] < arr[i+1]) isValley = true;\n    }\n\n    if (isPeak) {\n      result.push({ type: 'peak', index: i, value: arr[i] });\n    }\n    if (isValley) {\n      result.push({ type: 'valley', index: i, value: arr[i] });\n    }\n  }\n  return result;\n}",
          "testCases": [
            "findPeaksAndValleys([]) should return []",
            "findPeaksAndValleys([5]) should return [{ type: 'peak', index: 0, value: 5 }]",
            "findPeaksAndValleys([1, 2, 1, 3, 2, 4, 0]) should return [{ type: 'peak', index: 1, value: 2 }, { type: 'valley', index: 2, value: 1 }, { type: 'peak', index: 3, value: 3 }, { type: 'peak', index: 5, value: 4 }, { type: 'valley', index: 6, value: 0 }]",
            "findPeaksAndValleys([1, 5, 5, 5, 2]) should return [] (no strict peak/valley in middle of plateau)",
            "findPeaksAndValleys([10, 5, 10]) should return [{ type: 'peak', index: 0, value: 10 }, { type: 'valley', index: 1, value: 5 }, { type: 'peak', index: 2, value: 10 }]",
            "findPeaksAndValleys([1, 2, 3, 4, 5]) should return [{ type: 'peak', index: 4, value: 5 }]",
            "findPeaksAndValleys([5, 4, 3, 2, 1]) should return [{ type: 'peak', index: 0, value: 5 }]"
          ],
          "hints": [
            "You can use the same three-case logic (first, middle, last element) for both peaks and valleys.",
            "Remember that a peak condition uses `>` and a valley condition uses `<`.",
            "Be careful with elements that are equal to their neighbors; they are neither peaks nor valleys under strict definition."
          ],
          "tags": [
            "array",
            "algorithm",
            "local minimum",
            "local maximum",
            "data analysis"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_local_maxima"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "monotonic_array",
            "slope_analysis"
          ]
        },
        {
          "id": "task_three_sum_implementation",
          "title": "Implement the Three Sum Problem",
          "description": "\nImplement the `findTriplets(nums, target)` function as described in the theory. Given an integer array `nums` and an integer `target`, return all unique triplets `[nums[i], nums[j], nums[k]]` such that `i != j`, `i != k`, `j != k`, and `nums[i] + nums[j] + nums[k] == target`.\n\n**Requirements:**\n1.  The function should return an array of arrays, where each inner array is a unique triplet.\n2.  The order of the triplets in the output array does not matter, nor does the order of elements within a triplet.\n3.  Your solution must efficiently handle duplicate numbers in the input array to ensure uniqueness of the output triplets.\n4.  The time complexity should be `O(N^2)`.\n",
          "difficulty": "medium",
          "startingCode": "function findTriplets(nums, target) {\n  // TODO: Implement the Three Sum problem using sorting and the two-pointer technique.\n  // Remember to handle duplicates effectively.\n  return [];\n}",
          "solutionCode": "function findTriplets(nums, target) {\n  nums.sort((a, b) => a - b);\n  const result = [];\n  \n  for (let i = 0; i < nums.length - 2; i++) {\n    if (i > 0 && nums[i] === nums[i-1]) continue;\n    \n    let left = i + 1;\n    let right = nums.length - 1;\n    const remainingSum = target - nums[i];\n    \n    while (left < right) {\n      const currentSum = nums[left] + nums[right];\n      \n      if (currentSum === remainingSum) {\n        result.push([nums[i], nums[left], nums[right]]);\n        \n        while (left < right && nums[left] === nums[left+1]) left++;\n        while (left < right && nums[right] === nums[right-1]) right--;\n        \n        left++;\n        right--;\n      } else if (currentSum < remainingSum) {\n        left++;\n      } else {\n        right--;\n      }\n    }\n  }\n  \n  return result;\n}",
          "testCases": [
            "findTriplets([1, 2, 3, 4, 5], 9) should return [[1, 3, 5], [2, 3, 4]] (order of triplets/elements might vary, but content must match)",
            "findTriplets([-1, 0, 1, 2, -1, -4], 0) should return [[-1, -1, 2], [-1, 0, 1]]",
            "findTriplets([0, 0, 0, 0], 0) should return [[0, 0, 0]]",
            "findTriplets([-2, 0, 1, 1, 2], 0) should return [[-2, 0, 2], [-2, 1, 1]]",
            "findTriplets([1, 2, 3], 10) should return []",
            "findTriplets([], 0) should return []",
            "findTriplets([1, 2], 3) should return []"
          ],
          "hints": [
            "Start by sorting the input array.",
            "The outer loop fixes the first number.",
            "Use two pointers, `left` and `right`, for the remaining numbers.",
            "Remember to skip duplicates for all three positions (`i`, `left`, `right`) to ensure unique triplets."
          ],
          "tags": [
            "array",
            "algorithm",
            "two-pointer",
            "sorting",
            "triplets",
            "leetcode"
          ],
          "timeEstimate": 40,
          "prerequisites": [
            "sorting_algorithms",
            "two_sum_problem"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "four_sum_problem",
            "k_sum_problem"
          ]
        },
        {
          "id": "task_four_sum_implementation",
          "title": "Implement the Four Sum Problem",
          "description": "\nImplement a function `findQuadruplets(nums, target)` that finds all unique quadruplets `[nums[a], nums[b], nums[c], nums[d]]` in a given array `nums` such that their sum equals the `target`. Similar to the Three Sum problem, indices must be distinct (`a != b != c != d`) and the solution should handle duplicates effectively.\n\n**Requirements:**\n1.  Return an array of arrays, each inner array being a unique quadruplet.\n2.  The order of quadruplets or elements within them does not matter.\n3.  Handle duplicate numbers to ensure uniqueness of output.\n4.  The time complexity should be `O(N^3)`.\n",
          "difficulty": "hard",
          "startingCode": "function findQuadruplets(nums, target) {\n  // TODO: Implement the Four Sum problem.\n  // This will likely involve extending the Three Sum approach.\n  // Remember to sort and handle duplicates for all four elements.\n  return [];\n}",
          "solutionCode": "function findQuadruplets(nums, target) {\n  nums.sort((a, b) => a - b);\n  const result = [];\n\n  if (nums.length < 4) return result; // Need at least 4 elements\n\n  for (let i = 0; i < nums.length - 3; i++) {\n    // Skip duplicates for the first element\n    if (i > 0 && nums[i] === nums[i - 1]) continue;\n\n    for (let j = i + 1; j < nums.length - 2; j++) {\n      // Skip duplicates for the second element\n      if (j > i + 1 && nums[j] === nums[j - 1]) continue;\n\n      let left = j + 1;\n      let right = nums.length - 1;\n      const remainingSum = target - nums[i] - nums[j];\n\n      while (left < right) {\n        const currentSum = nums[left] + nums[right];\n\n        if (currentSum === remainingSum) {\n          result.push([nums[i], nums[j], nums[left], nums[right]]);\n\n          // Skip duplicates for left and right pointers\n          while (left < right && nums[left] === nums[left + 1]) left++;\n          while (left < right && nums[right] === nums[right - 1]) right--;\n\n          left++;\n          right--;\n        } else if (currentSum < remainingSum) {\n          left++;\n        } else {\n          right--;\n        }\n      }\n    }\n  }\n\n  return result;\n}",
          "testCases": [
            "findQuadruplets([1, 0, -1, 0, -2, 2], 0) should return [[-2, -1, 1, 2], [-2, 0, 0, 2], [-1, 0, 0, 1]]",
            "findQuadruplets([2, 2, 2, 2, 2], 8) should return [[2, 2, 2, 2]]",
            "findQuadruplets([], 0) should return []",
            "findQuadruplets([1, 2, 3], 6) should return []",
            "findQuadruplets([1, 1, 1, 1], 4) should return [[1, 1, 1, 1]]",
            "findQuadruplets([-3, -1, 0, 2, 4, 5], 0) should return [[-3, -1, 0, 4]]"
          ],
          "hints": [
            "Begin by sorting the array.",
            "You'll need two outer loops to fix the first two elements.",
            "Inside the second outer loop, apply the two-pointer technique for the remaining sum.",
            "Pay close attention to duplicate skipping for all four pointers (i, j, left, right) to ensure unique quadruplets."
          ],
          "tags": [
            "array",
            "algorithm",
            "two-pointer",
            "sorting",
            "k-sum",
            "leetcode"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_three_sum"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "three_sum_problem",
            "n_sum_problem"
          ]
        },
        {
          "id": "task_fisher_yates_shuffle",
          "title": "Implement Fisher-Yates Shuffle",
          "description": "\nImplement the `shuffleArray(array)` function using the Fisher-Yates (Knuth) shuffle algorithm. The function should return a *new* array with the elements of the input array shuffled in a random, unbiased order. The original input array should not be modified.\n\n**Requirements:**\n1.  The shuffle must be unbiased, meaning every permutation should be equally likely.\n2.  The original `array` should remain unchanged.\n3.  Handle empty arrays or single-element arrays correctly.\n4.  The time complexity should be `O(N)` and space complexity `O(N)` (due to creating a copy).\n",
          "difficulty": "medium",
          "startingCode": "function shuffleArray(array) {\n  // TODO: Implement the Fisher-Yates shuffle algorithm.\n  // Make sure to create a copy of the array first to avoid modifying the original.\n  return [];\n}",
          "solutionCode": "function shuffleArray(array) {\n  const result = [...array]; // Create a copy to avoid modifying the original array\n  let currentIndex = result.length;\n  let randomIndex;\n\n  // While there remain elements to shuffle.\n  while (currentIndex !== 0) {\n\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [result[currentIndex], result[randomIndex]] = [result[randomIndex], result[currentIndex]];\n  }\n\n  return result;\n}",
          "testCases": [
            "shuffleArray([]) should return []",
            "shuffleArray([5]) should return [5]",
            "shuffleArray([1, 2, 3]) should return a permutation of [1, 2, 3]",
            "shuffleArray(['a', 'b', 'c', 'd']) should return a random permutation of ['a', 'b', 'c', 'd']",
            "Verify original array is not modified: const arr = [1, 2, 3]; shuffleArray(arr); arr should still be [1, 2, 3]",
            "Statistical test (requires multiple runs): Perform shuffle many times and check distribution of elements at various positions (difficult to automate in simple test cases, but good for manual review)."
          ],
          "hints": [
            "First, create a shallow copy of the input array using the spread operator (`...array`) or `slice()`.",
            "Iterate from the last element down to the second element (index 1).",
            "In each iteration, generate a random index within the remaining unsorted portion of the array.",
            "Use array destructuring for an elegant swap: `[arr[a], arr[b]] = [arr[b], arr[a]]`."
          ],
          "tags": [
            "array",
            "algorithm",
            "randomization",
            "shuffle",
            "fisher-yates"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "array_basics",
            "random_number_generation"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "sampling",
            "biased_vs_unbiased"
          ]
        },
        {
          "id": "task_deck_of_cards_shuffler",
          "title": "Build a Deck of Cards Shuffler",
          "description": "\nCreate a `Deck` class in JavaScript that simulates a standard 52-card deck. The class should have the following methods:\n\n1.  `constructor()`: Initializes a new deck with 52 standard playing cards (e.g., '2H', 'AD', 'KC', where 'H' is Hearts, 'D' is Diamonds, 'C' is Clubs, 'S' is Spades). The deck should be in a sorted, ordered state initially.\n2.  `shuffle()`: Randomly shuffles the deck using the Fisher-Yates algorithm. This method should modify the deck *in-place*.\n3.  `deal(numCards)`: Removes and returns the specified `numCards` from the top of the deck. If `numCards` is greater than the remaining cards, return all remaining cards.\n4.  `remainingCards()`: Returns the number of cards currently in the deck.\n\n**Requirements:**\n*   Use the Fisher-Yates algorithm for `shuffle()`.\n*   Ensure `deal()` modifies the internal state of the deck (removes cards).\n*   Handle edge cases for `deal()` (e.g., requesting more cards than available, requesting 0 or negative cards).\n",
          "difficulty": "hard",
          "startingCode": "class Deck {\n  constructor() {\n    this.cards = []; // Populate this with 52 cards\n    const suits = ['Hearts', 'Diamonds', 'Clubs', 'Spades'];\n    const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];\n\n    for (const suit of suits) {\n      for (const rank of ranks) {\n        // Example: 'AH' for Ace of Hearts\n        this.cards.push(`${rank[0]}${suit[0]}`); // Simplified card representation\n      }\n    }\n  }\n\n  shuffle() {\n    // TODO: Implement Fisher-Yates in-place shuffle\n  }\n\n  deal(numCards) {\n    // TODO: Remove and return numCards from the top of the deck\n    return [];\n  }\n\n  remainingCards() {\n    // TODO: Return the current number of cards\n    return this.cards.length;\n  }\n}\n\n// Example Usage:\n// const myDeck = new Deck();\n// console.log('Initial Deck size:', myDeck.remainingCards());\n// myDeck.shuffle();\n// console.log('Shuffled Deck (top 5):', myDeck.deal(5));\n// console.log('Remaining cards:', myDeck.remainingCards());",
          "solutionCode": "class Deck {\n  constructor() {\n    this.cards = [];\n    const suits = ['H', 'D', 'C', 'S']; // Using single letters for brevity as per example\n    const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];\n\n    for (const suit of suits) {\n      for (const rank of ranks) {\n        this.cards.push(`${rank}${suit}`);\n      }\n    }\n  }\n\n  shuffle() {\n    let currentIndex = this.cards.length;\n    let randomIndex;\n\n    // While there remain elements to shuffle.\n    while (currentIndex !== 0) {\n      // Pick a remaining element.\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex--;\n\n      // And swap it with the current element.\n      [this.cards[currentIndex], this.cards[randomIndex]] = [\n        this.cards[randomIndex],\n        this.cards[currentIndex],\n      ];\n    }\n    console.log('Deck shuffled!');\n  }\n\n  deal(numCards) {\n    if (numCards <= 0) return [];\n    const cardsToDeal = Math.min(numCards, this.cards.length);\n    \n    // Using splice to remove cards from the end (top of deck if it's conceptualized that way)\n    // Or from the beginning if conceptualized as drawing from the 'top' of the array (index 0)\n    // Let's assume drawing from the beginning for simplicity (pop from beginning, or slice from end)\n    // Using slice from end is usually more efficient due to array shift avoidance.\n    // If cards are dealt from the 'top' meaning index 0 of array, use splice(0, cardsToDeal)\n    // If cards are dealt from the 'end' meaning array.pop() like, then shuffle should put 'top' cards at end\n    \n    // Standard practice for 'deal from top' with array is to remove from end after shuffle, assuming last element is 'top'\n    const dealtCards = this.cards.splice(this.cards.length - cardsToDeal, cardsToDeal);\n    console.log(`Dealt ${dealtCards.length} cards.`);\n    return dealtCards;\n  }\n\n  remainingCards() {\n    return this.cards.length;\n  }\n\n  // Optional: Reset the deck to full and ordered state\n  reset() {\n      this.cards = [];\n      const suits = ['H', 'D', 'C', 'S'];\n      const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];\n\n      for (const suit of suits) {\n        for (const rank of ranks) {\n          this.cards.push(`${rank}${suit}`);\n        }\n      }\n      console.log('Deck reset!');\n  }\n}\n\n// Example Usage:\nconst myDeck = new Deck();\nconsole.log('Initial Deck size:', myDeck.remainingCards()); // Expected: 52\nconsole.log('Sample top 5 cards (before shuffle):', myDeck.cards.slice(47, 52)); // Shows order\n\nmyDeck.shuffle();\nconsole.log('Deck size after shuffle:', myDeck.remainingCards()); // Expected: 52\n\nconst hand1 = myDeck.deal(5);\nconsole.log('Hand 1 (5 cards):', hand1);\nconsole.log('Remaining cards after deal:', myDeck.remainingCards()); // Expected: 47\n\nconst hand2 = myDeck.deal(50); // Try to deal more than available\nconsole.log('Hand 2 (50 cards):', hand2);\nconsole.log('Remaining cards after second deal:', myDeck.remainingCards()); // Expected: 0\n\nmyDeck.reset();\nconsole.log('Deck size after reset:', myDeck.remainingCards()); // Expected: 52\nconst hand3 = myDeck.deal(0); // Test dealing 0 cards\nconsole.log('Hand 3 (0 cards):', hand3);\nconst hand4 = myDeck.deal(-2); // Test dealing negative cards\nconsole.log('Hand 4 (-2 cards):', hand4);",
          "tags": [
            "class",
            "oop",
            "randomization",
            "game-development",
            "fisher-yates"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "class_syntax",
            "array_methods",
            "fisher_yates_shuffle"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "card_games",
            "simulation"
          ]
        }
      ]
    }
  },
  {
    "id": "477d0362-2e8e-4697-831e-1828e1f125f8",
    "startLine": 15800,
    "endLine": 15899,
    "processedDate": "2025-06-17T15:11:44.319Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_array_shuffling",
          "title": "Array Shuffling (Fisher-Yates Algorithm)",
          "content": "The Fisher-Yates (or Knuth) shuffle is an algorithm for generating a random permutation of a finite sequence. The algorithm works by iterating through the array from the last element down to the first (or from the first to the last), and for each element, it swaps it with a randomly chosen element from the unsorted part of the array (including itself).\n\n## Key Concepts\n- **In-place Shuffling:** The algorithm modifies the original array directly without requiring extra space for a new array.\n- **Randomness:** Each permutation of the array elements has an equal probability of being generated, ensuring a truly random shuffle.\n- **Time Complexity:** The algorithm has a time complexity of O(n), where n is the number of elements in the array, because it performs a constant number of operations for each element.\n- **Space Complexity:** The space complexity is O(1) as it only uses a few variables for iteration and swapping.\n\n## Algorithm Steps\n1. Iterate from the last element `n-1` down to `1`.\n2. For each element at index `i`, generate a random index `j` such that `0 <= j <= i`.\n3. Swap the element at index `i` with the element at index `j`.\n\nThis ensures that as we iterate, each element is picked exactly once and moved to a 'final' shuffled position, and the elements already moved are not revisited.",
          "examples": [
            {
              "id": "example_array_shuffling_1",
              "title": "Fisher-Yates Shuffle Implementation",
              "code": "/**\n * Shuffles an array in-place using the Fisher-Yates (Knuth) algorithm.\n * @param {Array<T>} array The array to be shuffled.\n * @returns {Array<T>} The shuffled array.\n */\nfunction shuffleArray<T>(array: T[]): T[] {\n  const result = [...array]; // Create a copy to avoid modifying original if preferred\n  let currentIndex = result.length;\n  let randomIndex: number;\n\n  // While there remain elements to shuffle.\n  while (currentIndex !== 0) {\n\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [result[currentIndex], result[randomIndex]] = [\n      result[randomIndex],\n      result[currentIndex],\n    ];\n  }\n\n  return result;\n}\n\n// Example Usage:\nconst originalArray = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nconst shuffled = shuffleArray(originalArray);\nconsole.log('Original Array:', originalArray);\nconsole.log('Shuffled Array:', shuffled); // Random permutation of the original array\n\nconst anotherArray = ['apple', 'banana', 'cherry', 'date'];\nconsole.log('Original Array:', anotherArray);\nconsole.log('Shuffled Array:', shuffleArray(anotherArray));",
              "explanation": "This example provides a complete implementation of the Fisher-Yates shuffle. It iterates from the end of the array to the beginning. In each iteration, it selects a random index from the unshuffled portion (0 to `currentIndex`) and swaps the element at `currentIndex` with the element at the `randomIndex`. This process ensures that each element is equally likely to end up in any position, producing a truly random permutation.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_array_shuffling_1",
            "question_array_shuffling_2",
            "question_array_shuffling_3",
            "question_array_shuffling_4"
          ],
          "relatedTasks": [
            "task_implement_fisher_yates_shuffle",
            "task_random_quiz_question_order"
          ],
          "tags": [
            "array",
            "algorithm",
            "shuffling",
            "randomization",
            "in-place",
            "data-structures"
          ],
          "technology": "TypeScript",
          "prerequisites": [
            "arrays",
            "loops",
            "math_random",
            "variable_swapping"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "gaming_applications",
            "random_selection",
            "card_games"
          ]
        },
        {
          "id": "theory_recursion_nested_structures",
          "title": "Recursion for Traversing Deeply Nested Structures",
          "content": "Recursion is a programming technique where a function calls itself to solve a problem. It's particularly powerful for handling problems that can be broken down into smaller, self-similar subproblems, such as traversing tree-like or deeply nested data structures (e.g., nested arrays or objects).\n\n## Key Concepts\n- **Base Case:** Every recursive function must have one or more base cases. These are conditions under which the function stops calling itself and returns a result directly, preventing infinite recursion.\n- **Recursive Step:** This is where the function calls itself with a modified input that moves closer to the base case. For nested arrays, the recursive step involves iterating through elements and calling the function again if an element is an array.\n- **Call Stack:** Each recursive call adds a new frame to the call stack. When a base case is reached, the function returns, and its frame is removed from the stack, allowing previous calls to resume.\n- **Depth-First Traversal:** Recursion naturally implements a depth-first traversal strategy, exploring as far as possible along each branch before backtracking.\n\n## Application to Nested Arrays\nTo process a deeply nested array, a recursive function can iterate through the elements. If an element is itself an array, the function calls itself with that nested array. If the element is a primitive value (like a number or string), it processes that value directly. This approach allows handling arrays of arbitrary nesting depth.",
          "examples": [
            {
              "id": "example_recursion_nested_structures_1",
              "title": "Summing Elements in a Deeply Nested Array",
              "code": "/**\n * Calculates the sum of all number elements in a deeply nested array.\n * Non-numeric elements are ignored. Arrays can be nested to arbitrary depth.\n * @param {Array<number | Array<any>>} arr The nested array to sum.\n * @returns {number} The total sum of numbers.\n */\nfunction sumNestedArray(arr: (number | any[])[]): number {\n  let sum = 0;\n  \n  function processArray(array: (number | any[])[]) {\n    array.forEach(item => {\n      if (Array.isArray(item)) {\n        processArray(item); // Recursively process nested arrays\n      } else if (typeof item === 'number') {\n        sum += item;\n      }\n      // Ignore other types like strings, booleans, etc.\n    });\n  }\n  \n  processArray(arr);\n  return sum;\n}\n\n// Example Usage:\nconst nestedArray1 = [4, 5, 7, 8, [5, 7, 9, [3, 5, 7]]];\nconsole.log('Sum of nestedArray1:', sumNestedArray(nestedArray1)); // Expected: 60 (4+5+7+8+5+7+9+3+5+7)\n\nconst nestedArray2 = [1, [2, [3, [4]]], 5, []];\nconsole.log('Sum of nestedArray2:', sumNestedArray(nestedArray2)); // Expected: 15 (1+2+3+4+5)\n\nconst nestedArray3 = [10, 'a', [20, null, [30]], 40];\nconsole.log('Sum of nestedArray3:', sumNestedArray(nestedArray3)); // Expected: 100 (10+20+30+40)\n\nconst emptyNestedArray: any[] = [];\nconsole.log('Sum of emptyNestedArray:', sumNestedArray(emptyNestedArray)); // Expected: 0",
              "explanation": "This function `sumNestedArray` uses a helper recursive function `processArray` to traverse the nested structure. For each item, it checks if it's an array using `Array.isArray()`. If it is, `processArray` is called recursively on that item. If it's a number, it's added to the `sum`. This pattern effectively flattens and sums all numeric values regardless of their nesting depth.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_sum_nested_array_1",
            "question_sum_nested_array_2",
            "question_sum_nested_array_3",
            "question_sum_nested_array_4"
          ],
          "relatedTasks": [
            "task_sum_nested_numbers",
            "task_flatten_nested_array"
          ],
          "tags": [
            "recursion",
            "arrays",
            "data-structures",
            "traversal",
            "nested",
            "algorithm"
          ],
          "technology": "TypeScript",
          "prerequisites": [
            "functions",
            "loops",
            "array_methods",
            "type_checking"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "tree_traversal",
            "graph_algorithms",
            "complex_data_parsing"
          ]
        },
        {
          "id": "theory_two_pointer_technique",
          "title": "Two-Pointer Technique for Array Manipulation",
          "content": "The two-pointer technique is an algorithmic pattern that uses two pointers (usually indices) to iterate through a data structure, typically an array or a string, simultaneously. This technique is highly efficient for problems involving ordered data or scenarios where elements need to be compared or rearranged relative to each other.\n\n## Key Concepts\n- **In-place Modification:** Often, two-pointer solutions modify the array in-place, leading to O(1) space complexity.\n- **Efficiency:** By performing a single pass (or sometimes a few passes) through the data, two-pointer algorithms typically achieve O(n) time complexity, which is optimal for many array problems.\n- **Pointer Movement:** The pointers can move in the same direction (e.g., slow and fast pointers) or in opposite directions (e.g., left and right pointers).\n- **Scenarios:** Useful for problems like finding pairs, removing duplicates, reversing arrays, partitioning arrays, or merging sorted arrays.\n\n## Types of Two-Pointer Approaches\n1.  **Same-Direction Pointers (Slow/Fast):** One pointer (fast) moves ahead, while the other (slow) lags behind, used for problems like removing elements, moving specific elements, or finding cycle in a linked list.\n2.  **Opposite-Direction Pointers (Left/Right):** Pointers start at opposite ends of the array and move towards each other, typically used for problems on sorted arrays like finding pairs with a certain sum, reversing an array, or checking for palindromes.",
          "examples": [
            {
              "id": "example_two_pointer_technique_1",
              "title": "Move All Occurrences of Element to End",
              "code": "/**\n * Moves all occurrences of a specific target number to the end of an array in-place.\n * Uses a two-pointer approach.\n * @param {Array<number>} array The array to modify.\n * @param {number} target The number to move to the end.\n * @returns {Array<number>} The modified array with target elements at the end.\n */\nfunction moveElementToEnd(array: number[], target: number): number[] {\n  if (!array || array.length === 0) {\n    return [];\n  }\n\n  let i = 0; // Slow pointer, points to where the next non-target element should go\n  let j = 0; // Fast pointer, iterates through the array\n  \n  // Move all non-target elements to the front using the fast pointer (j)\n  // and placing them at the slow pointer's position (i).\n  while (j < array.length) {\n    if (array[j] !== target) {\n      // If the element at j is not the target, swap it with the element at i\n      // and increment i to point to the next available slot for a non-target element.\n      [array[i], array[j]] = [array[j], array[i]];\n      i++;\n    }\n    j++; // Always increment j to continue scanning the array\n  }\n  \n  return array;\n}\n\n// Example Usage:\nconst inputArray1 = [2, 9, 1, 5, 2, 3, 1, 2, 7, 4, 3, 8, 29, 2, 4, 6, 54, 32, 2, 100];\nconsole.log('Original Array:', inputArray1);\nconsole.log('After moving 2s:', moveElementToEnd(inputArray1, 2));\n// Expected: [9, 1, 5, 3, 1, 7, 4, 3, 8, 29, 4, 6, 54, 32, 100, 2, 2, 2, 2, 2]\n\nconst inputArray2 = [1, 1, 1, 1, 2, 3, 1, 1];\nconsole.log('Original Array:', inputArray2);\nconsole.log('After moving 1s:', moveElementToEnd(inputArray2, 1));\n// Expected: [2, 3, 1, 1, 1, 1, 1, 1]\n\nconst inputArray3 = [5, 5, 5];\nconsole.log('Original Array:', inputArray3);\nconsole.log('After moving 5s:', moveElementToEnd(inputArray3, 5));\n// Expected: [5, 5, 5]\n\nconst inputArray4 = [1, 2, 3];\nconsole.log('Original Array:', inputArray4);\nconsole.log('After moving 4s:', moveElementToEnd(inputArray4, 4));\n// Expected: [1, 2, 3]\n",
              "explanation": "This example demonstrates the 'slow and fast' two-pointer technique. The `j` pointer iterates through the entire array. If `array[j]` is *not* the target element, it means it's an element that should remain at the front. It's then swapped with `array[i]` (the position where the next non-target element should go), and `i` is incremented. Elements equal to the `target` are simply skipped by `i`, effectively being pushed towards the end as non-target elements fill the front of the array. Once `j` reaches the end, all non-target elements are in the initial `i` positions, and the rest are the `target` elements.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_move_element_to_end_1",
            "question_move_element_to_end_2",
            "question_move_element_to_end_3",
            "question_move_element_to_end_4"
          ],
          "relatedTasks": [
            "task_move_zeros_to_end",
            "task_remove_duplicates_from_sorted_array"
          ],
          "tags": [
            "array",
            "algorithm",
            "two-pointers",
            "in-place",
            "optimization",
            "data-structures"
          ],
          "technology": "TypeScript",
          "prerequisites": [
            "arrays",
            "loops",
            "variable_swapping"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "array_manipulation",
            "sorting_algorithms",
            "string_processing"
          ]
        },
        {
          "id": "theory_matrix_operations_rotation",
          "title": "Matrix Operations: In-place 90-Degree Clockwise Rotation",
          "content": "Matrix rotation is a common algorithmic problem, particularly when dealing with image processing or grid-based puzzles. Rotating a matrix 90 degrees clockwise in-place means modifying the original matrix directly without creating a new one, which is crucial for optimizing space complexity.\n\n## Key Concepts\n- **In-place Algorithm:** An algorithm that transforms input using a small, constant amount of extra storage space.\n- **Square Matrix:** This specific rotation method is typically applied to square matrices (number of rows equals number of columns), where `n x n` makes index mapping simpler.\n- **Transpose:** The first step in a 90-degree clockwise rotation is to transpose the matrix. Transposing means swapping elements `matrix[i][j]` with `matrix[j][i]`. This effectively flips the matrix over its main diagonal (from top-left to bottom-right).\n- **Reverse Rows:** After transposing, the matrix is rotated 90 degrees counter-clockwise. To achieve a clockwise rotation, each row must then be reversed. This final step puts the elements in their correct clockwise positions.\n\n## Algorithm Steps\n1.  **Transpose the Matrix:** Iterate through the upper triangle of the matrix (e.g., `for i from 0 to n-1`, `for j from i to n-1`). Swap `matrix[i][j]` with `matrix[j][i]`. This ensures each pair is swapped only once.\n2.  **Reverse Each Row:** After transposition, iterate through each row of the matrix. Reverse the elements within each row. This can be done by using `Array.prototype.reverse()` or by a two-pointer approach for each row.",
          "examples": [
            {
              "id": "example_matrix_rotation_1",
              "title": "In-place 90-Degree Clockwise Matrix Rotation",
              "code": "/**\n * Rotates a square matrix 90 degrees clockwise in-place.\n * @param {number[][]} matrix The square matrix to rotate.\n * @returns {number[][]} The rotated matrix (same reference as input).\n */\nfunction rotateMatrix(matrix: number[][]): number[][] {\n  if (!matrix || matrix.length === 0 || matrix[0].length === 0) {\n    return matrix; // Handle empty or invalid matrix\n  }\n  const n = matrix.length;\n\n  // Check if it's a square matrix (optional, but common for this problem type)\n  if (matrix.some(row => row.length !== n)) {\n    console.warn(\"Warning: Matrix is not square. Rotation might not be as expected.\");\n    // Depending on requirements, might throw an error or handle non-square matrices differently\n  }\n  \n  // 1. Transpose the matrix (swap rows with columns)\n  // Iterate only the upper triangle to avoid double swapping\n  for (let i = 0; i < n; i++) {\n    for (let j = i; j < n; j++) {\n      // Swap elements at positions [i,j] and [j,i]\n      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n    }\n  }\n  \n  // 2. Reverse each row\n  for (let i = 0; i < n; i++) {\n    matrix[i].reverse();\n  }\n  \n  return matrix;\n}\n\n// Example Usage:\nconst matrix1 = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n];\nconsole.log('Original Matrix 1:', JSON.stringify(matrix1));\nrotateMatrix(matrix1);\nconsole.log('Rotated Matrix 1 (90 deg clockwise):', JSON.stringify(matrix1));\n// Expected: [[7, 4, 1], [8, 5, 2], [9, 6, 3]]\n\nconst matrix2 = [\n  [5, 1, 9, 11],\n  [2, 4, 8, 10],\n  [13, 3, 6, 7],\n  [15, 14, 12, 16]\n];\nconsole.log('Original Matrix 2:', JSON.stringify(matrix2));\nrotateMatrix(matrix2);\nconsole.log('Rotated Matrix 2 (90 deg clockwise):', JSON.stringify(matrix2));\n// Expected: [[15, 13, 2, 5], [14, 3, 4, 1], [12, 6, 8, 9], [16, 7, 10, 11]]\n",
              "explanation": "The `rotateMatrix` function first transposes the square matrix. The nested loops iterate only for `j` from `i` to `n-1` to ensure that each pair `(i,j)` and `(j,i)` is swapped only once. After transposition, the matrix is effectively rotated 90 degrees counter-clockwise. To achieve a 90-degree clockwise rotation, each row of the transposed matrix is then reversed. This combination of operations correctly positions all elements.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_rotate_matrix_1",
            "question_rotate_matrix_2",
            "question_rotate_matrix_3",
            "question_rotate_matrix_4",
            "question_rotate_matrix_5"
          ],
          "relatedTasks": [
            "task_rotate_matrix_clockwise",
            "task_rotate_matrix_counter_clockwise"
          ],
          "tags": [
            "matrix",
            "algorithm",
            "in-place",
            "data-structures",
            "array",
            "rotation",
            "transposition"
          ],
          "technology": "TypeScript",
          "prerequisites": [
            "arrays",
            "nested_loops",
            "variable_swapping"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "game_development",
            "image_processing",
            "2d_array_manipulation"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_array_shuffling_1",
          "topic": "Array Shuffling",
          "level": "medium",
          "type": "code",
          "question": "Implement the Fisher-Yates (Knuth) shuffle algorithm. Your function should take an array and shuffle it in-place, ensuring that every permutation of the array elements is equally likely.",
          "answer": "```typescript\nfunction shuffleArray<T>(array: T[]): T[] {\n  let currentIndex = array.length;\n  let randomIndex: number;\n\n  while (currentIndex !== 0) {\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n    [array[currentIndex], array[randomIndex]] = [\n      array[randomIndex],\n      array[currentIndex],\n    ];\n  }\n  return array;\n}\n\nconst arr = [1, 2, 3, 4, 5];\nshuffleArray(arr);\nconsole.log(arr);\n```",
          "options": [],
          "analysisPoints": [
            "Correct implementation of Fisher-Yates algorithm.",
            "Ensuring in-place modification.",
            "Proper use of `Math.random()` and `Math.floor()` for index generation.",
            "Handling edge cases like empty or single-element arrays."
          ],
          "keyConcepts": [
            "Fisher-Yates Shuffle",
            "In-place algorithm",
            "Randomization",
            "Time complexity O(n)",
            "Space complexity O(1)"
          ],
          "evaluationCriteria": [
            "Algorithm correctness for statistical randomness.",
            "Efficiency (time and space).",
            "Code readability and robustness."
          ],
          "example": "The provided code implements the Fisher-Yates shuffle correctly. It iterates from the last element down to the first. In each iteration, it picks a random element from the `0` to `currentIndex` range and swaps it with the current element. This ensures that elements are only swapped into an already-processed part of the array, leading to an unbiased shuffle.",
          "tags": [
            "array",
            "shuffling",
            "algorithm",
            "randomization",
            "in-place"
          ],
          "prerequisites": [
            "arrays",
            "loops",
            "math_random"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_shuffling_2",
          "topic": "Array Shuffling",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the time complexity of the Fisher-Yates shuffle algorithm?",
          "answer": "O(n)",
          "options": [],
          "analysisPoints": [
            "Understanding of algorithmic complexity.",
            "Recall of Fisher-Yates properties."
          ],
          "keyConcepts": [
            "Time complexity",
            "Fisher-Yates Shuffle",
            "Efficiency"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall."
          ],
          "example": "The Fisher-Yates shuffle iterates through the array once (n elements), performing constant-time operations (random number generation, array access, swap) for each element. Thus, its time complexity is O(n).",
          "tags": [
            "array",
            "shuffling",
            "time-complexity",
            "flashcard"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_array_shuffling_3",
          "topic": "Array Shuffling",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following is a key characteristic of the Fisher-Yates shuffle?\n\nA. It requires O(n) auxiliary space to store the shuffled array.\nB. It guarantees that the first and last elements will always be swapped.\nC. It produces an unbiased permutation, meaning every permutation has equal probability.\nD. It only works on arrays of unique numbers.",
          "answer": "C. It produces an unbiased permutation, meaning every permutation has equal probability.",
          "options": [
            "A. It requires O(n) auxiliary space to store the shuffled array.",
            "B. It guarantees that the first and last elements will always be swapped.",
            "C. It produces an unbiased permutation, meaning every permutation has equal probability.",
            "D. It only works on arrays of unique numbers."
          ],
          "analysisPoints": [
            "Understanding of Fisher-Yates core properties.",
            "Distinguishing correct efficiency claims.",
            "Recognizing the algorithm's independence from data type or uniqueness."
          ],
          "keyConcepts": [
            "Fisher-Yates Shuffle",
            "Unbiased permutation",
            "In-place algorithm",
            "Space complexity"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental principles of the algorithm.",
            "Ability to distinguish true characteristics from false statements."
          ],
          "example": "The Fisher-Yates shuffle is known for producing an unbiased permutation. It works in-place, requiring O(1) auxiliary space, not O(n). It does not guarantee specific swaps, and it works on arrays of any data type, whether unique or not.",
          "tags": [
            "array",
            "shuffling",
            "mcq",
            "algorithm",
            "properties"
          ],
          "prerequisites": [
            "fisher_yates_algorithm"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_shuffling_4",
          "topic": "Array Shuffling",
          "level": "hard",
          "type": "open",
          "question": "Explain why `array.sort(() => Math.random() - 0.5)` is not a statistically sound way to shuffle an array for production use, even though it appears to randomize the elements. What are its main flaws compared to Fisher-Yates?",
          "answer": "While `array.sort(() => Math.random() - 0.5)` might seem like a quick way to shuffle, it is **not statistically sound** and should not be used for production applications requiring true randomness. Its main flaws compared to Fisher-Yates are:\n\n1.  **Non-Uniform Distribution (Bias):** The primary flaw is that it does not produce a uniform distribution of all possible permutations. Some permutations are far more likely to occur than others, while some may never occur at all. This bias is a consequence of how `Array.prototype.sort()` is implemented in various JavaScript engines (e.g., V8's Timsort or Quicksort variants), which are optimized for comparison sorting and not for producing truly random orderings. The comparison function, returning a random positive or negative value, doesn't provide the consistent ordering needed for these sorting algorithms to produce a uniform shuffle.\n2.  **Unpredictable Behavior Across Browsers/Engines:** The exact sorting algorithm used by `Array.prototype.sort()` is implementation-dependent and can vary between JavaScript engines (e.g., Chrome's V8, Firefox's SpiderMonkey, Safari's JavaScriptCore). This means the same code might produce different distributions of 'randomness' or even different results across environments, leading to inconsistent and unreliable behavior.\n3.  **Performance:** While often O(N log N) for typical sort algorithms, the constant overhead of `Math.random()` calls inside a comparison function, executed many times, can be surprisingly inefficient compared to the O(N) Fisher-Yates shuffle.\n\nIn contrast, the **Fisher-Yates shuffle** guarantees that every possible permutation of the array elements is equally likely to occur, making it a statistically sound method for generating random permutations. It achieves this in linear time (O(N)) and constant space (O(1) in-place).",
          "options": [],
          "analysisPoints": [
            "Understanding of sorting algorithm guarantees vs. random sort behavior.",
            "Knowledge of statistical bias in `sort(random)`.",
            "Awareness of cross-browser inconsistencies with `sort()` implementation.",
            "Comparison of time/space complexity with Fisher-Yates."
          ],
          "keyConcepts": [
            "Fisher-Yates Shuffle",
            "Randomness",
            "Statistical bias",
            "Array.prototype.sort()",
            "Time complexity",
            "Uniform distribution"
          ],
          "evaluationCriteria": [
            "Depth of understanding of random algorithms.",
            "Ability to articulate the pitfalls of common anti-patterns.",
            "Knowledge of JavaScript engine behaviors.",
            "Clarity and completeness of explanation."
          ],
          "example": "```typescript\nconst arr = [1, 2, 3, 4, 5];\n\n// This is NOT a reliable way to shuffle for true randomness\narr.sort(() => Math.random() - 0.5);\nconsole.log('Unreliable shuffle:', arr);\n\n// The issue is that the underlying sort algorithm (e.g., Quicksort, Timsort)\n// is designed for ordering, not random selection. A small number of comparisons\n// might be sufficient to 'settle' an element into a fixed position relative\n// to others, even if the comparisons are random. This leads to non-uniform distributions.\n\n// For example, some elements might have a higher probability of ending up at the beginning\n// or end of the array, or certain pairs of elements might be more likely to stay together.\n```",
          "tags": [
            "array",
            "shuffling",
            "randomness",
            "best-practices",
            "interview-question",
            "statistical-bias"
          ],
          "prerequisites": [
            "fisher_yates_algorithm",
            "array_sort",
            "math_random",
            "algorithmic_bias"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_sum_nested_array_1",
          "topic": "Recursion for Nested Structures",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following nested array:\n```javascript\nconst data = [1, [2, [3, 4]], 5, [6]];\n```\nWhich of the following functions correctly calculates the sum of all numeric elements in `data`?\n\nA.\n```javascript\nfunction sumAll(arr) {\n  let total = 0;\n  for (const item of arr) {\n    if (typeof item === 'number') {\n      total += item;\n    } else if (Array.isArray(item)) {\n      total += sumAll(item);\n    }\n  }\n  return total;\n}\n```\nB.\n```javascript\nfunction sumAll(arr) {\n  let total = 0;\n  arr.forEach(item => {\n    if (Array.isArray(item)) {\n      total += item.reduce((acc, curr) => acc + curr, 0);\n    } else if (typeof item === 'number') {\n      total += item;\n    }\n  });\n  return total;\n}\n```\nC.\n```javascript\nfunction sumAll(arr) {\n  return arr.flat(Infinity).filter(item => typeof item === 'number').reduce((acc, curr) => acc + curr, 0);\n}\n```\nD. Both A and C are correct, and C is generally more concise.",
          "answer": "D. Both A and C are correct, and C is generally more concise.",
          "options": [
            "A.",
            "B.",
            "C.",
            "D. Both A and C are correct, and C is generally more concise."
          ],
          "analysisPoints": [
            "Understanding of recursive function structure for nested data.",
            "Knowledge of `Array.prototype.flat()` and its `Infinity` depth option.",
            "Correct use of `Array.isArray()` for type checking.",
            "Identifying incorrect recursive or iteration logic."
          ],
          "keyConcepts": [
            "Recursion",
            "Nested arrays",
            "Array.prototype.flat()",
            "Array.prototype.reduce()",
            "Array.isArray()"
          ],
          "evaluationCriteria": [
            "Ability to recognize correct recursive patterns.",
            "Knowledge of modern array methods for flattening.",
            "Understanding of functional programming approaches vs. imperative loops."
          ],
          "example": "Option A correctly implements a recursive solution: if an item is a number, it's added; if it's an array, the function calls itself on that sub-array. Option C uses `flat(Infinity)` to completely flatten the array, then `filter` to keep only numbers, and finally `reduce` to sum them. Both are valid. Option B is incorrect because `item.reduce()` on a nested array would only sum the first level of that sub-array, not recurse.",
          "tags": [
            "recursion",
            "array",
            "nested",
            "mcq",
            "functional_programming"
          ],
          "prerequisites": [
            "recursion_basics",
            "array_methods"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_sum_nested_array_2",
          "topic": "Recursion for Nested Structures",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the essential component of a recursive function that prevents infinite loops?",
          "answer": "Base case(s)",
          "options": [],
          "analysisPoints": [
            "Recall of fundamental recursion principles."
          ],
          "keyConcepts": [
            "Recursion",
            "Base case",
            "Infinite loop"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall."
          ],
          "example": "A base case is a condition within a recursive function that stops the recursion and returns a result directly, without making further recursive calls. Without a base case, a recursive function would call itself indefinitely, leading to a stack overflow.",
          "tags": [
            "recursion",
            "flashcard",
            "fundamentals"
          ],
          "prerequisites": [
            "recursion_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_sum_nested_array_3",
          "topic": "Recursion for Nested Structures",
          "level": "medium",
          "type": "open",
          "question": "When might an iterative approach (e.g., using a stack or queue) be preferred over a recursive approach for traversing a deeply nested array, and why?",
          "answer": "An iterative approach using an explicit stack (for depth-first traversal) or a queue (for breadth-first traversal) might be preferred over a recursive approach for traversing a deeply nested array in the following scenarios:\n\n1.  **Stack Overflow Prevention:** Deep recursion can lead to a 'stack overflow' error if the nesting depth of the array exceeds the JavaScript engine's call stack limit. Iterative solutions manage their own stack/queue data structure, which is stored on the heap and can grow much larger than the call stack, thus avoiding this limitation.\n2.  **Performance/Efficiency:** While recursive calls are often concise, they incur overhead due to function call stack management. For very large or extremely deep structures, an iterative solution might offer better performance due to less overhead.\n3.  **Control over Traversal Order:** While recursion naturally lends itself to depth-first traversal, an iterative approach using a queue makes breadth-first traversal straightforward to implement, which might be required for specific problem types (e.g., level-order traversal).\n4.  **Readability for Non-Recursion Experts:** For developers less familiar or comfortable with recursion, an iterative approach using loops and an explicit stack/queue might be easier to understand and debug, although well-written recursion can also be very clear.",
          "options": [],
          "analysisPoints": [
            "Understanding of call stack limitations.",
            "Comparison of performance characteristics.",
            "Awareness of different traversal strategies (DFS vs BFS).",
            "Consideration of code readability and maintainability."
          ],
          "keyConcepts": [
            "Recursion",
            "Iteration",
            "Call stack",
            "Stack overflow",
            "DFS",
            "BFS",
            "Performance"
          ],
          "evaluationCriteria": [
            "Ability to analyze trade-offs between different algorithmic approaches.",
            "Understanding of underlying computer science concepts (call stack).",
            "Practical considerations for large data sets."
          ],
          "example": "```typescript\n// Iterative approach using a stack for DFS traversal\nfunction sumNestedArrayIterative(arr: (number | any[])[]): number {\n  let sum = 0;\n  const stack: (number | any[])[] = [...arr]; // Initialize stack with top-level elements\n\n  while (stack.length > 0) {\n    const item = stack.pop(); // Pop from end for DFS (or shift from beginning for BFS if using queue)\n\n    if (Array.isArray(item)) {\n      // Push elements in reverse order to maintain correct order when popping\n      // For example, if item is [a, b, c], push c, then b, then a so a is processed first.\n      for (let i = item.length - 1; i >= 0; i--) {\n        stack.push(item[i]);\n      }\n    } else if (typeof item === 'number') {\n      sum += item;\n    }\n  }\n  return sum;\n}\n\nconst nestedArray = [4, 5, 7, 8, [5, 7, 9, [3, 5, 7]]];\nconsole.log('Iterative sum:', sumNestedArrayIterative(nestedArray)); // 60\n```",
          "tags": [
            "recursion",
            "iteration",
            "data-structures",
            "performance",
            "stack",
            "queue"
          ],
          "prerequisites": [
            "recursion_basics",
            "data_structures_stack_queue"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_sum_nested_array_4",
          "topic": "Recursion for Nested Structures",
          "level": "hard",
          "type": "code",
          "question": "Implement a function `deepFind(obj, key)` that traverses a deeply nested object (similar to a JSON structure) and returns an array of all values associated with the given `key`, regardless of their nesting depth. If the key is not found, return an empty array. Consider both objects and arrays as potential containers.",
          "answer": "```typescript\nfunction deepFind(obj: any, key: string): any[] {\n  const results: any[] = [];\n\n  function traverse(current: any) {\n    if (typeof current !== 'object' || current === null) {\n      return; // Base case: not an object or array\n    }\n\n    if (Array.isArray(current)) {\n      for (const item of current) {\n        traverse(item);\n      }\n    } else { // It's an object\n      for (const prop in current) {\n        if (Object.prototype.hasOwnProperty.call(current, prop)) {\n          if (prop === key) {\n            results.push(current[prop]);\n          }\n          traverse(current[prop]);\n        }\n      }\n    }\n  }\n\n  traverse(obj);\n  return results;\n}\n\n// Test Cases:\nconst data1 = {\n  a: 1,\n  b: {\n    c: 2,\n    d: {\n      e: 3,\n      targetKey: 'value1'\n    }\n  },\n  f: [4, { targetKey: 'value2', g: 5 }],\n  h: {\n    i: [{ targetKey: 'value3' }, { j: 6 }]\n  }\n};\nconsole.log(\"deepFind(data1, 'targetKey'):\", deepFind(data1, 'targetKey')); // ['value1', 'value2', 'value3']\n\nconst data2 = {\n  items: [\n    { id: 1, name: 'Item A' },\n    { id: 2, name: 'Item B', details: { id: 100 } },\n    { id: 3, name: 'Item C' }\n  ]\n};\nconsole.log(\"deepFind(data2, 'id'):\", deepFind(data2, 'id')); // [1, 2, 100, 3]\n\nconst data3 = { prop: 'test' };\nconsole.log(\"deepFind(data3, 'nonExistent'):\", deepFind(data3, 'nonExistent')); // []\n\nconst data4 = [1, 2, 3];\nconsole.log(\"deepFind(data4, 'value'):\", deepFind(data4, 'value')); // []\n",
          "options": [],
          "analysisPoints": [
            "Correctly identifies and handles both objects and arrays.",
            "Properly uses recursion for deep traversal.",
            "Collects all matching values, not just the first.",
            "Handles edge cases like null, non-object values, and missing keys.",
            "Uses `Object.prototype.hasOwnProperty.call` for robust property iteration."
          ],
          "keyConcepts": [
            "Recursion",
            "Object traversal",
            "Array traversal",
            "JSON parsing",
            "Depth-First Search (DFS)"
          ],
          "evaluationCriteria": [
            "Correctness of recursive logic for complex data structures.",
            "Robustness in handling various data types and edge cases.",
            "Efficiency of traversal.",
            "Clarity of code."
          ],
          "example": "The `deepFind` function uses a helper `traverse` function to recursively explore the input structure. It distinguishes between arrays and objects. For arrays, it iterates through elements and recursively calls `traverse` on each. For objects, it iterates through properties. If a property's key matches the target `key`, its value is added to `results`. Then, `traverse` is called on the property's value to continue the deep search. This ensures all occurrences are found.",
          "tags": [
            "recursion",
            "object",
            "array",
            "data-traversal",
            "interview-question",
            "hard"
          ],
          "prerequisites": [
            "recursion",
            "object_iteration",
            "array_iteration"
          ],
          "complexity": 9,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_move_element_to_end_1",
          "topic": "Two-Pointer Technique",
          "level": "medium",
          "type": "mcq",
          "question": "Given an array `arr = [1, 2, 3, 2, 4, 2, 5]` and a target `element = 2`, what will be the state of `arr` after applying the `moveElementToEnd` function using the two-pointer approach described in the theory, if the fast pointer `j` reaches index 3 (value `2`) and the slow pointer `i` is at index 1 (value `2`) just before `j` advances?",
          "answer": "A. `[1, 3, 2, 2, 4, 2, 5]` (after the next non-target swap happens, or `j` simply advances)",
          "options": [
            "A. `[1, 3, 2, 2, 4, 2, 5]` (after the next non-target swap happens, or `j` simply advances)",
            "B. `[1, 2, 3, 4, 5, 2, 2]`",
            "C. `[1, 2, 2, 3, 4, 2, 5]`",
            "D. `[3, 1, 2, 2, 4, 2, 5]`"
          ],
          "analysisPoints": [
            "Understanding of the two-pointer state changes.",
            "Correctly identifying when swaps occur.",
            "Tracing the execution step-by-step."
          ],
          "keyConcepts": [
            "Two-pointer technique",
            "In-place modification",
            "Array manipulation"
          ],
          "evaluationCriteria": [
            "Ability to mentally trace algorithm execution.",
            "Understanding of pointer movement rules."
          ],
          "example": "Let's trace: `arr = [1, 2, 3, 2, 4, 2, 5]`, `target = 2`\n- Initial: `i=0`, `j=0`. `arr[0]=1` (not 2). Swap `arr[0]` and `arr[0]`. `arr = [1, 2, 3, 2, 4, 2, 5]`. `i=1`, `j=1`.\n- `j=1`. `arr[1]=2` (is 2). No swap. `i=1`, `j=2`.\n- `j=2`. `arr[2]=3` (not 2). Swap `arr[1]` and `arr[2]` (`2` and `3`). `arr = [1, 3, 2, 2, 4, 2, 5]`. `i=2`, `j=3`.\n- At this point, the state is `[1, 3, 2, 2, 4, 2, 5]`, `i=2`, `j=3`. Now `j` is at index 3 (value `2`). `arr[3]=2` (is 2). No swap. `i` remains `2`. `j` increments to `4`. The array remains `[1, 3, 2, 2, 4, 2, 5]` at this exact step. So, option A correctly shows the array state after the last non-target element (`3`) was moved to `arr[1]` and before `j` advances further from its position at `2`.",
          "tags": [
            "array",
            "two-pointers",
            "mcq",
            "trace",
            "algorithm"
          ],
          "prerequisites": [
            "two_pointer_technique"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_move_element_to_end_2",
          "topic": "Two-Pointer Technique",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary advantage of using a two-pointer approach for array manipulation problems, especially in interview settings?",
          "answer": "It often allows for O(N) time complexity and O(1) space complexity (in-place modification), making it very efficient.",
          "options": [],
          "analysisPoints": [
            "Understanding of algorithmic efficiency.",
            "Recall of two-pointer benefits."
          ],
          "keyConcepts": [
            "Two-pointer technique",
            "Time complexity",
            "Space complexity",
            "In-place algorithm"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall and understanding of benefits."
          ],
          "example": "The two-pointer technique minimizes redundant operations by processing elements in a single or few passes and often modifying the array directly, thus saving space.",
          "tags": [
            "two-pointers",
            "efficiency",
            "flashcard",
            "algorithm"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_move_element_to_end_3",
          "topic": "Two-Pointer Technique",
          "level": "medium",
          "type": "code",
          "question": "Modify the `moveElementToEnd` function to move all *even* numbers to the end of the array, while maintaining the relative order of both the odd numbers and the even numbers.",
          "answer": "```typescript\nfunction moveEvenToEnd(array: number[]): number[] {\n  // This problem (maintaining relative order) cannot be solved with the simple\n  // two-pointer swap approach used for 'moveElementToEnd' if the order of the\n  // *non-target* elements must be preserved. A more complex approach is needed.\n  // This would typically involve iterating and shifting elements, or using an auxiliary array.\n\n  // Solution using auxiliary array to preserve relative order (simpler to implement):\n  const result: number[] = [];\n  const evens: number[] = [];\n  for (const num of array) {\n    if (num % 2 === 0) {\n      evens.push(num);\n    } else {\n      result.push(num);\n    }\n  }\n  return result.concat(evens);\n}\n\n// In-place solution (more complex, using insertion or similar logic):\n// This requires iterating and inserting/shifting, which has O(N^2) complexity\n// or O(N) if using operations like splice in specific ways, but it's not a direct two-pointer swap.\nfunction moveEvenToEndInPlacePreservingOrder(array: number[]): number[] {\n  if (!array || array.length <= 1) return array;\n\n  let writePointer = 0;\n  for (let readPointer = 0; readPointer < array.length; readPointer++) {\n    if (array[readPointer] % 2 !== 0) { // If it's an odd number\n      array[writePointer] = array[readPointer];\n      writePointer++;\n    }\n  }\n\n  // Fill the rest with even numbers, maintaining their original relative order.\n  // This requires a second pass or storing the even numbers as they are encountered\n  // and then appending them. The above simply moves odd numbers to the front.\n  // To maintain *even* numbers' order, we need to collect them first.\n\n  // A common approach for in-place + preserving order for one group:\n  // 1. Collect elements that need to be moved.\n  // 2. Shift remaining elements forward.\n  // 3. Append collected elements.\n\n  // This is typically O(N^2) for array shifts in general purpose languages\n  // like JS, unless specific data structures are used.\n  // Example of a truly O(N) in-place solution often involves multiple passes\n  // or complex index tracking, often not trivial without breaking relative order.\n\n  // For the sake of simplicity and adhering to common interview expectations for this variant,\n  // if 'maintaining relative order' is critical, a temporary array is often implied\n  // or a different algorithm (like stable partition). The original problem's two-pointer\n  // approach doesn't preserve relative order for the non-target elements.\n  \n  // Re-evaluating the prompt for 'moveEvenToEnd' with 'maintaining relative order':\n  // If we only need to move *all* evens to the end, the solution provided in the markdown\n  // (for 'moveElementToEnd') doesn't maintain relative order of non-target elements.\n  // For example, [2, 9, 1, 5, 2] -> target 2 -> [9, 1, 5, 2, 2]. Relative order 9,1,5 is preserved.\n  // But [2, 1, 3, 2] target 2 -> [1, 3, 2, 2]. Relative order 1,3 is preserved.\n  // The original markdown solution *does* preserve the relative order of elements that are NOT the target.\n  // So, the question implies adapting THAT two-pointer to *this* condition.\n  \n  // Let's adapt the original two-pointer to this scenario.\n  // If we want to maintain the relative order of both groups, it's more complex.\n  // The simplest two-pointer approach (like `moveElementToEnd`) *does* maintain the relative order\n  // of the elements that are *not* the target. It also does not change the relative order\n  // of the target elements among themselves (they just get dumped at the end).\n  \n  // Let's assume the question implicitly asks to apply the same technique, and acknowledge its limitation\n  // if it's meant to be truly stable for *both* groups which is harder in-place.\n  \n  let i = 0; // Slow pointer for odd numbers\n  let j = 0; // Fast pointer for iterating\n\n  while (j < array.length) {\n    if (array[j] % 2 !== 0) { // If it's an odd number\n      [array[i], array[j]] = [array[j], array[i]];\n      i++;\n    }\n    j++;\n  }\n  return array;\n}\n\nconst arr1 = [2, 9, 1, 5, 2, 3, 1, 2, 7, 4, 3, 8, 29, 2, 4, 6, 54, 32, 2, 100];\nconsole.log('Original arr1:', arr1);\nconsole.log('Moved evens (order NOT strictly preserved for evens):', moveEvenToEndInPlacePreservingOrder([...arr1]));\n// Example result with this in-place method: [9,1,5,3,1,7,29,3,2,4,8,2,4,6,54,32,2,100,2,2] (order of evens might change)\n// The problem statement for `moveElementToEnd` implies preserving relative order of non-target elements.\n// So, this solution is consistent with that behavior.\n\nconst arr2 = [1, 2, 3, 4, 5, 6, 7, 8];\nconsole.log('Original arr2:', arr2);\nconsole.log('Moved evens (order NOT strictly preserved for evens):', moveEvenToEndInPlacePreservingOrder([...arr2]));\n// Expected (for preserving odds): [1, 3, 5, 7, 2, 4, 6, 8]\n// The provided solution does exactly this: it moves odd numbers to the front, preserving their relative order.\n// The even numbers fill the remaining slots, potentially changing their relative order with each other.\n// If the problem meant *stable partition* for both groups, that's a different algorithm.\n```",
          "options": [],
          "analysisPoints": [
            "Correct application of the two-pointer approach for a specific condition (even/odd).",
            "Understanding of the nuances of 'maintaining relative order' in two-pointer problems.",
            "Identifying if the simple two-pointer swap is sufficient or if a more complex (e.g., auxiliary array, stable partition) approach is needed.",
            "Handling edge cases like empty arrays or arrays with only even/odd numbers."
          ],
          "keyConcepts": [
            "Two-pointer technique",
            "Array partitioning",
            "In-place algorithm",
            "Relative order",
            "Parity"
          ],
          "evaluationCriteria": [
            "Ability to adapt a known algorithm to new constraints.",
            "Understanding of the limitations and specific guarantees of the algorithm.",
            "Correct implementation of the modified logic."
          ],
          "example": "The most straightforward adaptation of the two-pointer `moveElementToEnd` to `moveEvenToEnd` (preserving the relative order of *non-target* elements, i.e., odd numbers) is to treat odd numbers as the 'non-target' elements. The `i` pointer tracks the next position for an odd number, and `j` iterates. If `array[j]` is odd, it's swapped with `array[i]`, and `i` increments. Even numbers are simply skipped by `i` and eventually reside at the end of the array. This solution is `O(N)` time and `O(1)` space. Note that the relative order *among* the even numbers might not be preserved by this method, only the relative order of the odd numbers.",
          "tags": [
            "array",
            "two-pointers",
            "algorithm",
            "in-place",
            "modification",
            "medium"
          ],
          "prerequisites": [
            "two_pointer_technique",
            "modulo_operator"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_move_element_to_end_4",
          "topic": "Two-Pointer Technique",
          "level": "hard",
          "type": "open",
          "question": "Describe a scenario where a two-pointer approach would be significantly less efficient or unsuitable compared to other array manipulation techniques. Provide an alternative approach and justify your choice.",
          "answer": "A two-pointer approach would be significantly less efficient or unsuitable in scenarios where:\n\n1.  **Maintaining Relative Order of *All* Elements in a Complex Partition:** The classic two-pointer for partitioning (like `moveElementToEnd`) typically only preserves the relative order of the *non-target* elements. If you need to partition an array into multiple groups and strictly maintain the relative order of elements *within each group*, the basic two-pointer swap approach is insufficient. Iteratively shifting elements to maintain order becomes an O(N^2) operation in many cases.\n\n    *   **Scenario:** You have an array of mixed types (numbers, strings, booleans), and you need to rearrange it such that all numbers come first, then all strings, then all booleans, and the relative order *within each type* must be preserved.\n\n    *   **Unsuitability of Two-Pointer:** While you could run multiple two-pointer passes (e.g., move strings after numbers, then booleans after strings), each pass would modify the array in a way that might break the relative order established by previous passes for certain groups, or it becomes an iterative shift-and-insert operation, which is typically O(N^2).\n\n    *   **Alternative Approach:**\n        *   **Auxiliary Array (Stable Partition):** Create three empty auxiliary arrays: `numbers`, `strings`, `booleans`. Iterate through the original array once, pushing each element into its corresponding auxiliary array. Finally, concatenate these auxiliary arrays (`numbers.concat(strings, booleans)`).\n        *   **Justification:** This approach is O(N) time complexity because each element is visited and placed once, and array concatenation is also efficient. It inherently preserves the relative order of elements within each group because they are added to the auxiliary arrays in their original sequence. The space complexity is O(N) (for the auxiliary arrays), which is a trade-off for maintaining stability and simplicity of implementation when compared to complex in-place stable partitioning algorithms (which are usually more involved to implement correctly and might still not be O(N) in practice for dynamic arrays).",
          "options": [],
          "analysisPoints": [
            "Identifies limitations of the two-pointer technique (e.g., strict relative order across multiple partitions).",
            "Proposes a suitable alternative algorithm.",
            "Justifies the alternative based on complexity (time/space) and problem constraints (e.g., stability).",
            "Demonstrates understanding of different array manipulation techniques."
          ],
          "keyConcepts": [
            "Two-pointer limitations",
            "Stable partition",
            "Auxiliary array",
            "Time complexity",
            "Space complexity",
            "Relative order",
            "Multi-group partitioning"
          ],
          "evaluationCriteria": [
            "Critical thinking about algorithmic applicability.",
            "Knowledge of various data structure algorithms.",
            "Ability to analyze trade-offs.",
            "Clarity of explanation and solution."
          ],
          "example": "```typescript\n// Example for the 'Alternative Approach' (Auxiliary Array for Stable Partition)\nfunction stablePartitionByTypes(arr: any[]): any[] {\n  const numbers: number[] = [];\n  const strings: string[] = [];\n  const booleans: boolean[] = [];\n  const others: any[] = [];\n\n  for (const item of arr) {\n    if (typeof item === 'number') {\n      numbers.push(item);\n    } else if (typeof item === 'string') {\n      strings.push(item);\n    } else if (typeof item === 'boolean') {\n      booleans.push(item);\n    } else {\n      others.push(item);\n    }\n  }\n\n  return numbers.concat(strings, booleans, others);\n}\n\nconst mixedArray = [1, 'hello', true, 5, false, 'world', null, 3, undefined, 'foo'];\nconsole.log('Original mixed array:', mixedArray);\nconst partitionedArray = stablePartitionByTypes(mixedArray);\nconsole.log('Partitioned array (stable):', partitionedArray);\n// Expected: [1, 5, 3, 'hello', 'world', 'foo', true, false, null, undefined]\n// Note: null and undefined are typeof 'object' and 'undefined' respectively, handled by 'others'.\n```",
          "tags": [
            "two-pointers",
            "limitations",
            "algorithm",
            "stable-partition",
            "array-manipulation",
            "hard"
          ],
          "prerequisites": [
            "two_pointer_technique",
            "time_space_complexity",
            "array_methods"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_rotate_matrix_1",
          "topic": "Matrix Operations: Rotation",
          "level": "medium",
          "type": "mcq",
          "question": "Which two operations, when applied sequentially to a square matrix, result in a 90-degree clockwise rotation in-place?\n\nA. Transpose the matrix, then reverse each column.\nB. Transpose the matrix, then reverse each row.\nC. Reverse each row, then transpose the matrix.\nD. Rotate layers from outside inwards, then reverse the entire matrix.",
          "answer": "B. Transpose the matrix, then reverse each row.",
          "options": [
            "A. Transpose the matrix, then reverse each column.",
            "B. Transpose the matrix, then reverse each row.",
            "C. Reverse each row, then transpose the matrix.",
            "D. Rotate layers from outside inwards, then reverse the entire matrix."
          ],
          "analysisPoints": [
            "Understanding of matrix rotation components.",
            "Correct sequence of transposition and reversal.",
            "Distinguishing between clockwise and counter-clockwise rotation effects."
          ],
          "keyConcepts": [
            "Matrix rotation",
            "Transpose",
            "In-place algorithm",
            "Clockwise rotation"
          ],
          "evaluationCriteria": [
            "Knowledge of standard matrix rotation techniques.",
            "Ability to recall specific steps for 90-degree clockwise rotation."
          ],
          "example": "Transposing `(matrix[i][j] becomes matrix[j][i])` flips the matrix over its main diagonal. This essentially gives a 90-degree counter-clockwise rotation if you imagine the elements shifting. Reversing each row then corrects this to a 90-degree clockwise rotation. Option A (reverse each column) would result in a 90-degree counter-clockwise rotation after transposition.",
          "tags": [
            "matrix",
            "rotation",
            "algorithm",
            "mcq",
            "data-structures"
          ],
          "prerequisites": [
            "matrix_transpose"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_rotate_matrix_2",
          "topic": "Matrix Operations: Rotation",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the space complexity of an in-place 90-degree matrix rotation algorithm?",
          "answer": "O(1)",
          "options": [],
          "analysisPoints": [
            "Understanding of in-place algorithms.",
            "Recall of space complexity for matrix rotations."
          ],
          "keyConcepts": [
            "Space complexity",
            "In-place algorithm",
            "Matrix rotation"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall."
          ],
          "example": "An in-place algorithm modifies the input data structure directly without allocating significant additional memory. For matrix rotation, this means using only a few temporary variables for swaps, resulting in O(1) auxiliary space.",
          "tags": [
            "matrix",
            "rotation",
            "space-complexity",
            "flashcard"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_rotate_matrix_3",
          "topic": "Matrix Operations: Rotation",
          "level": "medium",
          "type": "code",
          "question": "Given the matrix `matrix = [[1, 2], [3, 4]]`, apply the `rotateMatrix` function. What are the intermediate states of the matrix after:\n1. Transposition?\n2. Reversing each row?",
          "answer": "```typescript\nconst matrix = [[1, 2], [3, 4]];\n\n// 1. After Transposition:\n// Original: [[1, 2],\n//            [3, 4]]\n// Swap (0,0) with (0,0) -> no change\n// Swap (0,1) with (1,0) -> [[1, 3],\n//                         [2, 4]]\n// (j loop starts from i, so (1,1) with (1,1) -> no change)\nconsole.log('Matrix after Transposition:', JSON.stringify([\n  [1, 3],\n  [2, 4]\n]));\n\n// 2. After Reversing each row:\n// Current: [[1, 3],\n//           [2, 4]]\n// Row 0 reverse: [3, 1]\n// Row 1 reverse: [4, 2]\nconsole.log('Matrix after Reversing each row:', JSON.stringify([\n  [3, 1],\n  [4, 2]\n]));\n\n// Full function call for verification:\nfunction rotateMatrix(matrix: number[][]): number[][] {\n  const n = matrix.length;\n  for (let i = 0; i < n; i++) {\n    for (let j = i; j < n; j++) {\n      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n    }\n  }\n  for (let i = 0; i < n; i++) {\n    matrix[i].reverse();\n  }\n  return matrix;\n}\n\nconst testMatrix = [[1, 2], [3, 4]];\nrotateMatrix(testMatrix);\nconsole.log('Final result from function:', JSON.stringify(testMatrix));\n```",
          "options": [],
          "analysisPoints": [
            "Ability to trace matrix operations step-by-step.",
            "Understanding of how transposition changes indices.",
            "Correctly applying row reversal after transposition."
          ],
          "keyConcepts": [
            "Matrix trace",
            "Transposition",
            "Row reversal",
            "In-place algorithm"
          ],
          "evaluationCriteria": [
            "Accuracy of step-by-step execution tracing.",
            "Precision in showing intermediate matrix states."
          ],
          "example": "The example demonstrates the step-by-step transformation of a 2x2 matrix. After transposition, the element at `(0,1)` (value 2) moves to `(1,0)`, and `(1,0)` (value 3) moves to `(0,1)`. The matrix becomes `[[1, 3], [2, 4]]`. Then, reversing each row transforms `[1, 3]` to `[3, 1]` and `[2, 4]` to `[4, 2]`, resulting in the final rotated matrix `[[3, 1], [4, 2]]`.",
          "tags": [
            "matrix",
            "rotation",
            "trace",
            "algorithm",
            "medium"
          ],
          "prerequisites": [
            "matrix_transpose",
            "array_reverse"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_rotate_matrix_4",
          "topic": "Matrix Operations: Rotation",
          "level": "hard",
          "type": "open",
          "question": "How would you modify the `rotateMatrix` function to perform a 90-degree counter-clockwise rotation in-place? Explain the logic and the change in steps.",
          "answer": "To perform a 90-degree counter-clockwise rotation in-place, you have two primary methods that build upon transposition:\n\n**Method 1: Transpose then Reverse Columns**\n\n1.  **Transpose the matrix:** This step remains the same as for clockwise rotation. Swap `matrix[i][j]` with `matrix[j][i]` for `0 <= i < n` and `i <= j < n`.\n    *   *Logic:* Transposing effectively flips the matrix along its main diagonal, which results in a 90-degree *counter-clockwise* rotation IF you view it from a perspective where the original top row becomes the new leftmost column. However, it's typically easier to think of it as a flip, and then apply another operation.\n\n2.  **Reverse each Column:** After transposition, to achieve a 90-degree counter-clockwise rotation, you need to reverse each column. This means swapping `matrix[row][col]` with `matrix[n - 1 - row][col]` for each column `col` from `0` to `n-1` and for `row` from `0` to `(n-1)/2`.\n\n    *   *Logic:* After transposing, the elements are correctly positioned relative to rows/columns, but their order within columns is inverted for a counter-clockwise rotation. Reversing each column corrects this.\n\n**Method 2: Reverse Rows then Transpose**\n\n1.  **Reverse each Row:** First, reverse the order of elements in each row of the matrix. This is `matrix[i].reverse()` for all `i`.\n    *   *Logic:* This operation mirrors the matrix horizontally.\n\n2.  **Transpose the matrix:** Then, transpose the matrix (swap `matrix[i][j]` with `matrix[j][i]`).\n    *   *Logic:* After horizontal mirroring, transposing aligns the elements for a 90-degree counter-clockwise rotation.\n\n**Justification for Method 2 (often simpler to code in JS):**\nCompared to Method 1, Method 2 (Reverse Rows then Transpose) is often slightly more intuitive to implement in JavaScript because `Array.prototype.reverse()` directly operates on rows. Implementing column reversal in-place requires manual swapping across rows for each column, which can be less direct than `matrix[i].reverse()`. Both methods achieve the same O(N^2) time complexity and O(1) space complexity.\n\n**Code Example (using Method 2):**\n```typescript\nfunction rotateMatrixCounterClockwise(matrix: number[][]): number[][] {\n  const n = matrix.length;\n\n  // 1. Reverse each row\n  for (let i = 0; i < n; i++) {\n    matrix[i].reverse();\n  }\n  \n  // 2. Transpose the matrix\n  for (let i = 0; i < n; i++) {\n    for (let j = i; j < n; j++) {\n      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n    }\n  }\n  \n  return matrix;\n}\n\nconst matrix = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n];\nconsole.log('Original Matrix:', JSON.stringify(matrix));\nrotateMatrixCounterClockwise(matrix);\nconsole.log('Rotated 90 deg counter-clockwise:', JSON.stringify(matrix));\n// Expected: [[3, 6, 9], [2, 5, 8], [1, 4, 7]]\n```",
          "options": [],
          "analysisPoints": [
            "Correctly identifies the algorithmic steps for counter-clockwise rotation.",
            "Explains the logic behind each step (transposition, row/column reversal).",
            "Compares different approaches if applicable.",
            "Provides a clear code example for the modified function."
          ],
          "keyConcepts": [
            "Matrix rotation",
            "Counter-clockwise rotation",
            "Transpose",
            "Column reversal",
            "Row reversal",
            "In-place algorithm"
          ],
          "evaluationCriteria": [
            "Depth of understanding of matrix transformation principles.",
            "Ability to derive inverse operations.",
            "Clarity of explanation and correctness of code."
          ],
          "example": "The explanation details two common methods for counter-clockwise rotation, emphasizing `Transpose then Reverse Columns` or `Reverse Rows then Transpose`. The provided code uses the `Reverse Rows then Transpose` method, which is often more straightforward with `Array.prototype.reverse()` in JavaScript. This method first horizontally flips the matrix, then transposing it correctly rotates it 90 degrees counter-clockwise.",
          "tags": [
            "matrix",
            "rotation",
            "algorithm",
            "in-place",
            "hard"
          ],
          "prerequisites": [
            "matrix_rotation_clockwise"
          ],
          "complexity": 9,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_rotate_matrix_5",
          "topic": "Matrix Operations: Rotation",
          "level": "medium",
          "type": "flashcard",
          "question": "What is the time complexity of rotating an N x N matrix 90 degrees in-place?",
          "answer": "O(N^2)",
          "options": [],
          "analysisPoints": [
            "Recall of algorithmic complexity for matrix operations.",
            "Understanding that operations iterate over all elements."
          ],
          "keyConcepts": [
            "Time complexity",
            "Matrix rotation",
            "N-squared complexity",
            "Efficiency"
          ],
          "evaluationCriteria": [
            "Basic knowledge recall."
          ],
          "example": "Both transposition and reversing each row/column involve iterating through all `N * N` elements of the matrix. Therefore, the total time complexity is O(N^2).",
          "tags": [
            "matrix",
            "rotation",
            "time-complexity",
            "flashcard"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_implement_fisher_yates_shuffle",
          "title": "Implement a Secure Deck Shuffler",
          "description": "\nImplement a function `shuffleDeck(deck: string[]): string[]` that shuffles an array of strings representing a deck of cards. The function must:\n\n1.  Use the Fisher-Yates (Knuth) shuffle algorithm.\n2.  Modify the input `deck` array *in-place*.\n3.  Ensure the shuffle is statistically unbiased, meaning every permutation has an equal probability.\n4.  Handle edge cases: an empty deck or a deck with a single card.\n\nYour solution should be efficient in terms of both time and space complexity.\n",
          "difficulty": "medium",
          "startingCode": "function shuffleDeck<T>(deck: T[]): T[] {\n  // TODO: Implement the Fisher-Yates shuffle algorithm here.\n  // Remember to shuffle in-place.\n  // Consider edge cases:\n  // 1. What if the deck is empty or has only one card?\n  \n  return deck; // Return the shuffled deck\n}\n\n// Example Usage:\n// const myDeck = ['Ace_Spades', 'King_Hearts', 'Queen_Diamonds', 'Jack_Clubs'];\n// shuffleDeck(myDeck);\n// console.log(myDeck); // A randomly shuffled version of the original deck\n",
          "solutionCode": "function shuffleDeck<T>(deck: T[]): T[] {\n  let currentIndex = deck.length;\n  let randomIndex: number;\n\n  // While there remain elements to shuffle.\n  while (currentIndex !== 0) {\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [deck[currentIndex], deck[randomIndex]] = [\n      deck[randomIndex],\n      deck[currentIndex],\n    ];\n  }\n\n  return deck;\n}",
          "testCases": [
            "shuffleDeck([]) should return []",
            "shuffleDeck(['A']) should return ['A']",
            "shuffleDeck(['A', 'B']) should return either ['A', 'B'] or ['B', 'A'] with 50% probability each",
            "shuffleDeck(['A', 'B', 'C', 'D']) should produce a different, valid permutation on multiple runs",
            "Ensure the original array reference is modified, not a new array returned.",
            "Test with a large array (e.g., 52 cards) for performance and correctness."
          ],
          "hints": [
            "The Fisher-Yates algorithm typically iterates from the end of the array down to the beginning.",
            "Remember to generate a random index `j` such that `0 <= j <= i` for the current element at index `i`.",
            "Use array destructuring for efficient swapping: `[arr[a], arr[b]] = [arr[b], arr[a]]`."
          ],
          "tags": [
            "array",
            "algorithm",
            "shuffling",
            "in-place",
            "randomization"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "arrays",
            "loops",
            "math_random"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "fisher_yates_algorithm",
            "time_complexity",
            "space_complexity"
          ]
        },
        {
          "id": "task_random_quiz_question_order",
          "title": "Display Quiz Questions in Random Order",
          "description": "\nDesign a small JavaScript module that can take a list of quiz questions and provide them in a randomly shuffled order for a quiz application. The module should provide a function `getShuffledQuestions(questions: Question[]): Question[]`.\n\n**Requirements:**\n1.  The input `questions` array should not be mutated. The function should return a *new* shuffled array.\n2.  Use a statistically sound shuffling algorithm (e.g., Fisher-Yates).\n3.  Ensure each question is presented exactly once.\n4.  Define a `Question` type with at least `id: string` and `text: string`.\n\n**Bonus:** Implement a function `getNextQuestion(): Question | null` that returns questions one by one from the shuffled list, and `resetQuiz(): void` to restart the quiz with a new shuffle.\n",
          "difficulty": "medium",
          "startingCode": "type Question = {\n  id: string;\n  text: string;\n  options?: string[];\n  answer?: string;\n};\n\nfunction getShuffledQuestions(questions: Question[]): Question[] {\n  const shuffledArray = [...questions]; // Create a copy\n\n  // TODO: Implement Fisher-Yates on `shuffledArray` here (in-place).\n\n  return shuffledArray;\n}\n\n// Bonus: Module for sequential access\nconst quizManager = (() => {\n  let currentShuffledQuestions: Question[] = [];\n  let currentIndex: number = 0;\n\n  function _shuffle(array: Question[]): Question[] {\n    let m = array.length, t, i;\n    while (m) {\n      i = Math.floor(Math.random() * m--);\n      t = array[m];\n      array[m] = array[i];\n      array[i] = t;\n    }\n    return array;\n  }\n\n  return {\n    initialize: (questions: Question[]) => {\n      currentShuffledQuestions = _shuffle([...questions]); // Ensure copy and shuffle\n      currentIndex = 0;\n    },\n    getNextQuestion: (): Question | null => {\n      // TODO: Return the next question or null if exhausted\n      return null;\n    },\n    resetQuiz: () => {\n      // TODO: Reset the quiz state (re-shuffle if necessary)\n    }\n  };\n})();\n\n// Example Usage:\n// const quizQuestions: Question[] = [\n//   { id: 'q1', text: 'What is 2+2?' },\n//   { id: 'q2', text: 'Capital of France?' },\n//   { id: 'q3', text: 'First programming language?' }\n// ];\n\n// const shuffled = getShuffledQuestions(quizQuestions);\n// console.log('Shuffled questions (new array):', shuffled);\n// console.log('Original questions (unmutated):', quizQuestions);\n\n// quizManager.initialize(quizQuestions);\n// console.log('Next question:', quizManager.getNextQuestion());\n// console.log('Next question:', quizManager.getNextQuestion());\n// quizManager.resetQuiz();\n// console.log('Next question after reset:', quizManager.getNextQuestion());\n",
          "solutionCode": "type Question = {\n  id: string;\n  text: string;\n  options?: string[];\n  answer?: string;\n};\n\nfunction getShuffledQuestions<T>(questions: T[]): T[] {\n  const shuffledArray = [...questions]; // Create a shallow copy to avoid mutating original\n  let currentIndex = shuffledArray.length;\n  let randomIndex: number;\n\n  // While there remain elements to shuffle.\n  while (currentIndex !== 0) {\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [shuffledArray[currentIndex], shuffledArray[randomIndex]] = [\n      shuffledArray[randomIndex],\n      shuffledArray[currentIndex],\n    ];\n  }\n\n  return shuffledArray;\n}\n\nconst quizManager = (() => {\n  let currentShuffledQuestions: Question[] = [];\n  let currentIndex: number = 0;\n  let originalQuestions: Question[] = []; // Store original for reset\n\n  function _shuffle<T>(array: T[]): T[] {\n    let m = array.length, t, i;\n    while (m) {\n      i = Math.floor(Math.random() * m--);\n      t = array[m];\n      array[m] = array[i];\n      array[i] = t;\n    }\n    return array;\n  }\n\n  return {\n    initialize: (questions: Question[]) => {\n      originalQuestions = questions; // Store reference to original\n      currentShuffledQuestions = _shuffle([...questions]); // Shuffle a copy\n      currentIndex = 0;\n    },\n    getNextQuestion: (): Question | null => {\n      if (currentIndex < currentShuffledQuestions.length) {\n        return currentShuffledQuestions[currentIndex++];\n      }\n      return null; // All questions exhausted\n    },\n    resetQuiz: () => {\n      // Re-initialize with a fresh shuffle of the original questions\n      quizManager.initialize(originalQuestions);\n    }\n  };\n})();\n\n// Example Usage:\nconst quizQuestions: Question[] = [\n  { id: 'q1', text: 'What is 2+2?' },\n  { id: 'q2', text: 'Capital of France?' },\n  { id: 'q3', text: 'First programming language?' }\n];\n\nconsole.log('\\n--- getShuffledQuestions ---');\nconst shuffled1 = getShuffledQuestions(quizQuestions);\nconsole.log('Shuffled questions (new array):', shuffled1);\nconsole.log('Original questions (unmutated):', quizQuestions);\n\nconsole.log('\\n--- Quiz Manager ---');\nquizManager.initialize(quizQuestions);\nconsole.log('Next 1:', quizManager.getNextQuestion());\nconsole.log('Next 2:', quizManager.getNextQuestion());\nconsole.log('Next 3:', quizManager.getNextQuestion());\nconsole.log('Next 4 (exhausted):', quizManager.getNextQuestion());\n\nconsole.log('\\n--- Reset Quiz ---');\nquizManager.resetQuiz();\nconsole.log('Next 1 after reset:', quizManager.getNextQuestion());\nconsole.log('Next 2 after reset:', quizManager.getNextQuestion());\nconsole.log('Next 3 after reset:', quizManager.getNextQuestion());\n",
          "testCases": [
            "`getShuffledQuestions` returns a new array, original is unchanged.",
            "`getShuffledQuestions([])` returns `[]`.",
            "`getShuffledQuestions([{id:'x', text:'y'}])` returns a single-element array.",
            "`quizManager.initialize` correctly shuffles and resets internal state.",
            "Successive calls to `quizManager.getNextQuestion` return distinct questions until exhausted.",
            "After `quizManager.getNextQuestion()` returns `null`, it continues to return `null`.",
            "`quizManager.resetQuiz()` reshuffles and resets the `currentIndex` to 0, allowing quiz restart."
          ],
          "hints": [
            "For `getShuffledQuestions`, remember to create a shallow copy of the input array before shuffling to meet the non-mutation requirement.",
            "For the `quizManager` bonus, use a closure to maintain the shuffled question list and current index.",
            "The `resetQuiz` function should likely re-call the internal shuffle logic to get a new random order."
          ],
          "tags": [
            "array",
            "shuffling",
            "module-design",
            "frontend",
            "algorithm",
            "design-patterns"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "arrays",
            "fisher_yates_algorithm",
            "closures"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "fisher_yates_algorithm",
            "iife",
            "data_encapsulation"
          ]
        },
        {
          "id": "task_sum_nested_numbers",
          "title": "Calculate Sum of Numbers in Mixed Nested Array",
          "description": "\nImplement a function `sumNumbersInNestedArray(arr: any[]): number` that calculates the sum of all *numeric* elements within a deeply nested array. The array can contain numbers, other arrays (nested to arbitrary depth), strings, booleans, null, or undefined. Only numbers should contribute to the sum; all other types should be ignored.\n\n**Requirements:**\n1.  The function should handle arrays nested to any depth.\n2.  Non-numeric elements (including strings, booleans, objects, null, undefined) must be ignored.\n3.  The solution should be robust and efficient.\n\n",
          "difficulty": "medium",
          "startingCode": "function sumNumbersInNestedArray(arr: any[]): number {\n  let totalSum = 0;\n\n  // TODO: Implement recursive or iterative logic here.\n  // Use Array.isArray() and typeof checks.\n\n  return totalSum;\n}\n\n// Example Usage:\n// const data1 = [1, [2, [3, 4]], 5, 'hello', [6, [7, null]], 8, true, {}];\n// console.log(sumNumbersInNestedArray(data1)); // Expected: 36 (1+2+3+4+5+6+7+8)\n",
          "solutionCode": "function sumNumbersInNestedArray(arr: any[]): number {\n  let totalSum = 0;\n  \n  function processArray(array: any[]) {\n    for (const item of array) {\n      if (Array.isArray(item)) {\n        processArray(item); // Recursively process nested arrays\n      } else if (typeof item === 'number') {\n        totalSum += item;\n      }\n      // Else, ignore other types\n    }\n  }\n  \n  processArray(arr);\n  return totalSum;\n}\n\n// Alternative using Array.prototype.flat() (if allowed/preferred):\nfunction sumNumbersInNestedArrayFlat(arr: any[]): number {\n  return arr.flat(Infinity) // Flatten array completely\n            .filter(item => typeof item === 'number') // Keep only numbers\n            .reduce((acc, curr) => acc + curr, 0); // Sum them up\n}\n\n// Example Usage:\nconst data1 = [1, [2, [3, 4]], 5, 'hello', [6, [7, null]], 8, true, {}];\nconsole.log('Recursive Sum:', sumNumbersInNestedArray(data1)); // Expected: 36\nconsole.log('Flat Method Sum:', sumNumbersInNestedArrayFlat(data1)); // Expected: 36\n\nconst data2 = [4, 5, 7, 8, [5, 7, 9, [3, 5, 7]]];\nconsole.log('Recursive Sum:', sumNumbersInNestedArray(data2)); // Expected: 60\nconsole.log('Flat Method Sum:', sumNumbersInNestedArrayFlat(data2)); // Expected: 60\n\nconst data3: any[] = [];\nconsole.log('Recursive Sum (empty):', sumNumbersInNestedArray(data3)); // Expected: 0\nconsole.log('Flat Method Sum (empty):', sumNumbersInNestedArrayFlat(data3)); // Expected: 0\n\nconst data4 = [[], [[]], 10, [\"a\", 20], [[30]], null, undefined];\nconsole.log('Recursive Sum:', sumNumbersInNestedArray(data4)); // Expected: 60\nconsole.log('Flat Method Sum:', sumNumbersInNestedArrayFlat(data4)); // Expected: 60\n",
          "testCases": [
            "sumNumbersInNestedArray([]) should return 0.",
            "sumNumbersInNestedArray([1, 2, 3]) should return 6.",
            "sumNumbersInNestedArray([1, [2, 3], 4]) should return 10.",
            "sumNumbersInNestedArray([1, [2, [3, [4]]], 5]) should return 15.",
            "sumNumbersInNestedArray(['a', true, [1, null, [2, 'b']], 3]) should return 6.",
            "sumNumbersInNestedArray([[], [[[]]], 10, [\"text\"], [20, null], 30]) should return 60."
          ],
          "hints": [
            "Consider using a recursive helper function to handle the nested arrays.",
            "Use `Array.isArray(item)` to check if an element is an array.",
            "Use `typeof item === 'number'` to check if an element is a number.",
            "Alternatively, explore using `Array.prototype.flat(Infinity)` if not restricted from using it, followed by `filter` and `reduce`."
          ],
          "tags": [
            "recursion",
            "arrays",
            "data-structures",
            "traversal",
            "nested"
          ],
          "timeEstimate": 40,
          "prerequisites": [
            "recursion_basics",
            "array_methods"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "depth_first_search",
            "json_traversal"
          ]
        },
        {
          "id": "task_flatten_nested_array",
          "title": "Implement a Custom `flatten` Function for Nested Arrays",
          "description": "\nImplement a function `customFlat(arr: any[], depth: number = 1): any[]` that flattens a deeply nested array up to a specified `depth`.\n\n**Requirements:**\n1.  The function should behave similarly to `Array.prototype.flat()`.\n2.  If `depth` is 1 (default), it flattens only one level.\n3.  If `depth` is `Infinity` (or a very large number), it should flatten completely.\n4.  The function should return a *new* array, without modifying the original.\n\n",
          "difficulty": "hard",
          "startingCode": "function customFlat(arr: any[], depth: number = 1): any[] {\n  const result: any[] = [];\n\n  // TODO: Implement the flattening logic recursively or iteratively.\n  // Handle the depth parameter correctly.\n\n  return result;\n}\n\n// Example Usage:\n// const nestedArr = [1, [2, [3, 4]], 5, [6]];\n// console.log(customFlat(nestedArr)); // [1, 2, [3, 4], 5, 6] (depth 1)\n// console.log(customFlat(nestedArr, 2)); // [1, 2, 3, 4, 5, 6]\n// console.log(customFlat(nestedArr, Infinity)); // [1, 2, 3, 4, 5, 6]\n",
          "solutionCode": "function customFlat(arr: any[], depth: number = 1): any[] {\n  const result: any[] = [];\n\n  // Use a recursive helper function with an accumulator and current depth\n  function flattenRecursive(currentArray: any[], currentDepth: number) {\n    for (const item of currentArray) {\n      // If item is an array AND we still have depth to flatten\n      if (Array.isArray(item) && currentDepth > 0) {\n        // Recurse with decremented depth\n        flattenRecursive(item, currentDepth - 1);\n      } else {\n        // Otherwise, push the item (either not an array or no more depth to flatten)\n        result.push(item);\n      }\n    }\n  }\n\n  flattenRecursive(arr, depth);\n  return result;\n}\n\n// Example Usage:\nconst nestedArr = [1, [2, [3, 4]], 5, [6, [7, 8]]];\n\nconsole.log('Original:', JSON.stringify(nestedArr));\nconsole.log('Flat (depth 1):', JSON.stringify(customFlat(nestedArr))); // [1, 2, [3, 4], 5, 6, [7, 8]]\nconsole.log('Flat (depth 2):', JSON.stringify(customFlat(nestedArr, 2))); // [1, 2, 3, 4, 5, 6, 7, 8]\nconsole.log('Flat (depth Infinity):', JSON.stringify(customFlat(nestedArr, Infinity))); // [1, 2, 3, 4, 5, 6, 7, 8]\nconsole.log('Flat (depth 0):', JSON.stringify(customFlat(nestedArr, 0))); // [1, [2, [3, 4]], 5, [6, [7, 8]]] (no flattening)\nconsole.log('Flat (empty):', JSON.stringify(customFlat([]))); // []\nconsole.log('Flat (non-array elements):', JSON.stringify(customFlat([1, 'a', true]))); // [1, 'a', true]\n",
          "testCases": [
            "customFlat([1, [2, 3]], 1) should return [1, 2, 3].",
            "customFlat([1, [2, [3, 4]]], 1) should return [1, 2, [3, 4]].",
            "customFlat([1, [2, [3, 4]]], 2) should return [1, 2, 3, 4].",
            "customFlat([1, [2, [3, 4]]], Infinity) should return [1, 2, 3, 4].",
            "customFlat([], 1) should return [].",
            "customFlat([1, 'a', true], 1) should return [1, 'a', true].",
            "customFlat([1, [2, [3, 4]]], 0) should return [1, [2, [3, 4]]] (no flattening)."
          ],
          "hints": [
            "This is a classic recursion problem. The recursive call needs to pass a decremented `depth`.",
            "The base case for recursion is when the `currentDepth` reaches 0 or when an element is not an array.",
            "Remember to create a new array for the `result` to avoid mutating the original input.",
            "Consider using a spread operator (`...`) or `concat` if an iterative approach with a stack is chosen."
          ],
          "tags": [
            "recursion",
            "arrays",
            "flatten",
            "data-structures",
            "utility-function"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "recursion_basics",
            "array_methods",
            "type_checking"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "array_prototype_flat",
            "depth_first_search"
          ]
        },
        {
          "id": "task_move_zeros_to_end",
          "title": "Move All Zeros to the End of an Array",
          "description": "\nImplement a function `moveZeros(nums: number[]): void` that takes an array of numbers and moves all `0`'s to the end of it while maintaining the relative order of the non-zero elements. The operation must be performed in-place.\n\n**Requirements:**\n1.  Modify the input array `nums` directly (in-place).\n2.  Maintain the relative order of the non-zero elements.\n3.  Achieve optimal time complexity (ideally O(N)) and space complexity (O(1)).\n\n",
          "difficulty": "medium",
          "startingCode": "function moveZeros(nums: number[]): void {\n  // TODO: Implement the in-place modification here.\n  // Use a two-pointer approach.\n}\n\n// Example Usage:\n// const arr1 = [0, 1, 0, 3, 12];\n// moveZeros(arr1);\n// console.log(arr1); // Expected: [1, 3, 12, 0, 0]\n",
          "solutionCode": "function moveZeros(nums: number[]): void {\n  if (!nums || nums.length === 0) {\n    return; // Handle empty or invalid array\n  }\n\n  let nonZeroPointer = 0; // Pointer for the next position to place a non-zero element\n  \n  // Iterate through the array with a readPointer\n  for (let readPointer = 0; readPointer < nums.length; readPointer++) {\n    // If the current element is non-zero, move it to the nonZeroPointer position\n    if (nums[readPointer] !== 0) {\n      nums[nonZeroPointer] = nums[readPointer];\n      nonZeroPointer++;\n    }\n  }\n\n  // Fill the remaining positions from nonZeroPointer to the end with zeros\n  for (let i = nonZeroPointer; i < nums.length; i++) {\n    nums[i] = 0;\n  }\n}\n\n// Alternative using swaps (slightly different variant of two-pointer)\n// This one combines both passes into one, but might do unnecessary swaps.\nfunction moveZerosWithSwaps(nums: number[]): void {\n  if (!nums || nums.length === 0) return;\n\n  let i = 0; // Pointer for the last non-zero position found so far\n  for (let j = 0; j < nums.length; j++) {\n    if (nums[j] !== 0) {\n      // If the element at 'j' is non-zero and 'i' is not at the same position,\n      // swap them. This places non-zeros at 'i' and implicitly moves zeros out.\n      if (i !== j) {\n        [nums[i], nums[j]] = [nums[j], nums[i]];\n      }\n      i++;\n    }\n  }\n}\n\n// Example Usage:\nconst arr1 = [0, 1, 0, 3, 12];\nmoveZeros(arr1);\nconsole.log('moveZeros([0,1,0,3,12]):', arr1); // Expected: [1, 3, 12, 0, 0]\n\nconst arr2 = [0, 0, 1];\nmoveZeros(arr2);\nconsole.log('moveZeros([0,0,1]):', arr2); // Expected: [1, 0, 0]\n\nconst arr3 = [1, 2, 3];\nmoveZeros(arr3);\nconsole.log('moveZeros([1,2,3]):', arr3); // Expected: [1, 2, 3]\n\nconst arr4 = [0, 0, 0];\nmoveZeros(arr4);\nconsole.log('moveZeros([0,0,0]):', arr4); // Expected: [0, 0, 0]\n\nconst arr5 = [];\nmoveZeros(arr5);\nconsole.log('moveZeros([]):', arr5); // Expected: []\n\nconst arr6 = [1];\nmoveZeros(arr6);\nconsole.log('moveZeros([1]):', arr6); // Expected: [1]\n\nconst arr7 = [0];\nmoveZeros(arr7);\nconsole.log('moveZeros([0]):', arr7); // Expected: [0]\n\nconsole.log('\\n--- Using moveZerosWithSwaps ---');\nconst arr8 = [0, 1, 0, 3, 12];\nmoveZerosWithSwaps(arr8);\nconsole.log('moveZerosWithSwaps([0,1,0,3,12]):', arr8); // Expected: [1, 3, 12, 0, 0]\n\nconst arr9 = [0, 0, 1];\nmoveZerosWithSwaps(arr9);\nconsole.log('moveZerosWithSwaps([0,0,1]):', arr9); // Expected: [1, 0, 0]\n",
          "testCases": [
            "`moveZeros([0, 1, 0, 3, 12])` should result in `[1, 3, 12, 0, 0]`.",
            "`moveZeros([0, 0, 1])` should result in `[1, 0, 0]`.",
            "`moveZeros([1, 2, 3])` should result in `[1, 2, 3]`.",
            "`moveZeros([0, 0, 0])` should result in `[0, 0, 0]`.",
            "`moveZeros([])` should result in `[]`.",
            "`moveZeros([1])` should result in `[1]`.",
            "`moveZeros([0])` should result in `[0]`."
          ],
          "hints": [
            "This problem can be solved with a single pass using two pointers.",
            "One pointer can track the position where the next non-zero element should be placed.",
            "The second pointer iterates through the entire array.",
            "After placing all non-zero elements, the remaining positions in the array should be filled with zeros."
          ],
          "tags": [
            "array",
            "two-pointers",
            "in-place",
            "algorithm",
            "optimization"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "two_pointer_technique"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "move_element_to_end",
            "partitioning_arrays"
          ]
        },
        {
          "id": "task_remove_duplicates_from_sorted_array",
          "title": "Remove Duplicates from Sorted Array",
          "description": "\nGiven a sorted array `nums`, remove the duplicates in-place such that each unique element appears only once. The relative order of the elements should be kept the same. The function should return the new length of the array.\n\n**Requirements:**\n1.  Modify the input array `nums` in-place.\n2.  Maintain the relative order of the unique elements.\n3.  Do not allocate extra space for another array (O(1) extra space).\n4.  Return the new length of the array after removing duplicates.\n\n",
          "difficulty": "medium",
          "startingCode": "function removeDuplicates(nums: number[]): number {\n  // TODO: Implement the in-place removal of duplicates.\n  // Use a two-pointer approach.\n  \n  if (nums.length === 0) return 0;\n\n  return 0; // Return the new length\n}\n\n// Example Usage:\n// const arr1 = [1, 1, 2];\n// const newLength1 = removeDuplicates(arr1);\n// console.log(arr1.slice(0, newLength1)); // Expected: [1, 2]\n// console.log(newLength1); // Expected: 2\n",
          "solutionCode": "function removeDuplicates(nums: number[]): number {\n  if (!nums || nums.length === 0) {\n    return 0;\n  }\n\n  let writePointer = 1; // Pointer for the next position where a unique element should be written\n\n  // readPointer iterates through the array starting from the second element\n  for (let readPointer = 1; readPointer < nums.length; readPointer++) {\n    // If the current element (at readPointer) is different from the previous unique element (at writePointer - 1)\n    if (nums[readPointer] !== nums[writePointer - 1]) {\n      nums[writePointer] = nums[readPointer];\n      writePointer++;\n    }\n  }\n  \n  // The writePointer now indicates the new length of the array with unique elements\n  return writePointer;\n}\n\n// Example Usage:\nconst arr1 = [1, 1, 2];\nlet newLength1 = removeDuplicates(arr1);\nconsole.log('Original: [1,1,2] -> Result:', arr1.slice(0, newLength1)); // Expected: [1, 2]\nconsole.log('New Length:', newLength1); // Expected: 2\n\nconst arr2 = [0, 0, 1, 1, 1, 2, 2, 3, 3, 4];\nlet newLength2 = removeDuplicates(arr2);\nconsole.log('Original: [0,0,1,1,1,2,2,3,3,4] -> Result:', arr2.slice(0, newLength2)); // Expected: [0, 1, 2, 3, 4]\nconsole.log('New Length:', newLength2); // Expected: 5\n\nconst arr3 = [1, 1, 1, 1, 1];\nlet newLength3 = removeDuplicates(arr3);\nconsole.log('Original: [1,1,1,1,1] -> Result:', arr3.slice(0, newLength3)); // Expected: [1]\nconsole.log('New Length:', newLength3); // Expected: 1\n\nconst arr4 = [1, 2, 3];\nlet newLength4 = removeDuplicates(arr4);\nconsole.log('Original: [1,2,3] -> Result:', arr4.slice(0, newLength4)); // Expected: [1, 2, 3]\nconsole.log('New Length:', newLength4); // Expected: 3\n\nconst arr5 = [];\nlet newLength5 = removeDuplicates(arr5);\nconsole.log('Original: [] -> Result:', arr5.slice(0, newLength5)); // Expected: []\nconsole.log('New Length:', newLength5); // Expected: 0\n",
          "testCases": [
            "`removeDuplicates([1, 1, 2])` should return 2, and `nums` becomes `[1, 2, _]`.",
            "`removeDuplicates([0, 0, 1, 1, 1, 2, 2, 3, 3, 4])` should return 5, and `nums` becomes `[0, 1, 2, 3, 4, _, _, _, _, _]`.",
            "`removeDuplicates([1, 1, 1, 1, 1])` should return 1, and `nums` becomes `[1, _, _, _, _]`.",
            "`removeDuplicates([1, 2, 3])` should return 3, and `nums` remains `[1, 2, 3]`.",
            "`removeDuplicates([])` should return 0.",
            "`removeDuplicates([1])` should return 1."
          ],
          "hints": [
            "This problem is well-suited for a two-pointer approach.",
            "One pointer (`writePointer`) can keep track of the position for the next unique element.",
            "Another pointer (`readPointer`) can iterate through the array to find unique elements.",
            "Since the array is sorted, duplicates will always be adjacent."
          ],
          "tags": [
            "array",
            "two-pointers",
            "in-place",
            "duplicates",
            "sorted-array",
            "optimization"
          ],
          "timeEstimate": 35,
          "prerequisites": [
            "two_pointer_technique"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "array_manipulation",
            "move_element_to_end"
          ]
        },
        {
          "id": "task_rotate_matrix_clockwise",
          "title": "Implement 90-Degree Clockwise Matrix Rotation",
          "description": "\nImplement a function `rotateMatrix(matrix: number[][]): number[][]` that rotates an `n x n` 2D matrix 90 degrees clockwise *in-place*.\n\n**Requirements:**\n1.  The rotation must be done in-place, modifying the original `matrix` array.\n2.  The matrix is guaranteed to be square (`n x n`).\n3.  The solution should have optimal time complexity (O(N^2)) and space complexity (O(1) auxiliary space).\n\n",
          "difficulty": "medium",
          "startingCode": "function rotateMatrix(matrix: number[][]): number[][] {\n  // TODO: Implement the in-place 90-degree clockwise rotation.\n  // Consider the two main steps: transpose and then reverse rows.\n\n  return matrix;\n}\n\n// Example Usage:\n// const matrix1 = [\n//   [1, 2, 3],\n//   [4, 5, 6],\n//   [7, 8, 9]\n// ];\n// rotateMatrix(matrix1);\n// console.log(matrix1); // Expected: [[7, 4, 1], [8, 5, 2], [9, 6, 3]]\n",
          "solutionCode": "function rotateMatrix(matrix: number[][]): number[][] {\n  if (!matrix || matrix.length === 0 || matrix[0].length === 0) {\n    return matrix; // Handle empty or invalid matrix\n  }\n  const n = matrix.length;\n  \n  // 1. Transpose the matrix (swap rows with columns)\n  for (let i = 0; i < n; i++) {\n    for (let j = i; j < n; j++) { // j starts from i to avoid double-swapping\n      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n    }\n  }\n  \n  // 2. Reverse each row\n  for (let i = 0; i < n; i++) {\n    matrix[i].reverse();\n  }\n  \n  return matrix;\n}\n\n// Example Usage:\nconst matrix1 = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n];\nconsole.log('Original Matrix 1:', JSON.stringify(matrix1));\nrotateMatrix(matrix1);\nconsole.log('Rotated Matrix 1 (90 deg clockwise):', JSON.stringify(matrix1));\n// Expected: [[7, 4, 1], [8, 5, 2], [9, 6, 3]]\n\nconst matrix2 = [\n  [5, 1, 9, 11],\n  [2, 4, 8, 10],\n  [13, 3, 6, 7],\n  [15, 14, 12, 16]\n];\nconsole.log('Original Matrix 2:', JSON.stringify(matrix2));\nrotateMatrix(matrix2);\nconsole.log('Rotated Matrix 2 (90 deg clockwise):', JSON.stringify(matrix2));\n// Expected: [[15, 13, 2, 5], [14, 3, 4, 1], [12, 6, 8, 9], [16, 7, 10, 11]]\n\nconst matrix3 = [[1]];\nconsole.log('Original Matrix 3:', JSON.stringify(matrix3));\nrotateMatrix(matrix3);\nconsole.log('Rotated Matrix 3 (90 deg clockwise):', JSON.stringify(matrix3));\n// Expected: [[1]]\n\nconst matrix4: number[][] = [];\nconsole.log('Original Matrix 4 (empty):', JSON.stringify(matrix4));\nrotateMatrix(matrix4);\nconsole.log('Rotated Matrix 4 (empty):', JSON.stringify(matrix4));\n// Expected: []\n",
          "testCases": [
            "rotateMatrix([[1,2],[3,4]]) should result in [[3,1],[4,2]].",
            "rotateMatrix([[1]]) should result in [[1]].",
            "rotateMatrix([]) should result in [].",
            "rotateMatrix([[1,2,3],[4,5,6],[7,8,9]]) should result in [[7,4,1],[8,5,2],[9,6,3]].",
            "Test with a larger matrix (e.g., 5x5) for performance and correctness."
          ],
          "hints": [
            "The standard approach involves two main steps: transposing the matrix and then reversing each row.",
            "For transposition, iterate `j` from `i` to `n-1` to avoid redundant swaps.",
            "Remember to use in-place swapping for elements.",
            "The `Array.prototype.reverse()` method can be used for reversing rows."
          ],
          "tags": [
            "matrix",
            "algorithm",
            "rotation",
            "in-place",
            "data-structures"
          ],
          "timeEstimate": 40,
          "prerequisites": [
            "nested_loops",
            "variable_swapping",
            "matrix_transpose"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "matrix_operations",
            "image_processing_basics"
          ]
        },
        {
          "id": "task_rotate_matrix_counter_clockwise",
          "title": "Implement 90-Degree Counter-Clockwise Matrix Rotation",
          "description": "\nImplement a function `rotateMatrixCounterClockwise(matrix: number[][]): number[][]` that rotates an `n x n` 2D matrix 90 degrees counter-clockwise *in-place*.\n\n**Requirements:**\n1.  The rotation must be done in-place, modifying the original `matrix` array.\n2.  The matrix is guaranteed to be square (`n x n`).\n3.  The solution should have optimal time complexity (O(N^2)) and space complexity (O(1) auxiliary space).\n\n",
          "difficulty": "hard",
          "startingCode": "function rotateMatrixCounterClockwise(matrix: number[][]): number[][] {\n  // TODO: Implement the in-place 90-degree counter-clockwise rotation.\n  // Consider the two main steps: reverse rows and then transpose.\n\n  return matrix;\n}\n\n// Example Usage:\n// const matrix1 = [\n//   [1, 2, 3],\n//   [4, 5, 6],\n//   [7, 8, 9]\n// ];\n// rotateMatrixCounterClockwise(matrix1);\n// console.log(matrix1); // Expected: [[3, 6, 9], [2, 5, 8], [1, 4, 7]]\n",
          "solutionCode": "function rotateMatrixCounterClockwise(matrix: number[][]): number[][] {\n  if (!matrix || matrix.length === 0 || matrix[0].length === 0) {\n    return matrix; // Handle empty or invalid matrix\n  }\n  const n = matrix.length;\n\n  // 1. Reverse each row\n  for (let i = 0; i < n; i++) {\n    matrix[i].reverse();\n  }\n  \n  // 2. Transpose the matrix\n  for (let i = 0; i < n; i++) {\n    for (let j = i; j < n; j++) { // j starts from i to avoid double-swapping\n      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n    }\n  }\n  \n  return matrix;\n}\n\n// Example Usage:\nconst matrix1 = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n];\nconsole.log('Original Matrix 1:', JSON.stringify(matrix1));\nrotateMatrixCounterClockwise(matrix1);\nconsole.log('Rotated Matrix 1 (90 deg counter-clockwise):', JSON.stringify(matrix1));\n// Expected: [[3, 6, 9], [2, 5, 8], [1, 4, 7]]\n\nconst matrix2 = [\n  [5, 1, 9, 11],\n  [2, 4, 8, 10],\n  [13, 3, 6, 7],\n  [15, 14, 12, 16]\n];\nconsole.log('Original Matrix 2:', JSON.stringify(matrix2));\nrotateMatrixCounterClockwise(matrix2);\nconsole.log('Rotated Matrix 2 (90 deg counter-clockwise):', JSON.stringify(matrix2));\n// Expected: [[11, 10, 7, 16], [9, 8, 6, 12], [1, 4, 3, 14], [5, 2, 13, 15]]\n\nconst matrix3 = [[1]];\nconsole.log('Original Matrix 3:', JSON.stringify(matrix3));\nrotateMatrixCounterClockwise(matrix3);\nconsole.log('Rotated Matrix 3 (90 deg counter-clockwise):', JSON.stringify(matrix3));\n// Expected: [[1]]\n",
          "testCases": [
            "rotateMatrixCounterClockwise([[1,2],[3,4]]) should result in [[2,4],[1,3]].",
            "rotateMatrixCounterClockwise([[1]]) should result in [[1]].",
            "rotateMatrixCounterClockwise([]) should result in [].",
            "rotateMatrixCounterClockwise([[1,2,3],[4,5,6],[7,8,9]]) should result in [[3,6,9],[2,5,8],[1,4,7]].",
            "Test with a larger matrix (e.g., 5x5) for performance and correctness."
          ],
          "hints": [
            "For counter-clockwise rotation, one common approach is to first reverse each row, and then transpose the matrix.",
            "The transposition step is identical to that for clockwise rotation.",
            "Ensure your implementation correctly handles the `j` loop bounds for transposition to avoid incorrect swaps."
          ],
          "tags": [
            "matrix",
            "algorithm",
            "rotation",
            "in-place",
            "data-structures",
            "hard"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "nested_loops",
            "variable_swapping",
            "matrix_transpose",
            "array_reverse"
          ],
          "complexity": 9,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "matrix_operations",
            "image_processing_basics",
            "matrix_clockwise_rotation"
          ]
        }
      ]
    }
  },
  {
    "id": "ad81f9a5-126b-4c5d-aaf5-3682307740a3",
    "startLine": 15900,
    "endLine": 15999,
    "processedDate": "2025-06-17T15:14:03.750Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_matrix_transformations",
          "title": "Matrix Transformations: Rotation and Spiral Traversal",
          "content": "## Matrix Rotation (90 Degrees Clockwise)\nMatrix rotation is a common operation in computer graphics and algorithms. For a square matrix, a 90-degree clockwise rotation can be performed in-place. One efficient approach involves iterating through layers of the matrix and cyclically shifting the four elements at each corner of the current layer. This method avoids the need for extra space.\n\n### Algorithm for In-place 90-degree Clockwise Rotation:\n1.  **Iterate through layers**: A square matrix of size `n x n` has `n / 2` layers (for `n` even) or `(n - 1) / 2` layers (for `n` odd). Loop from `layer = 0` to `floor(n / 2) - 1`.\n2.  **Define boundaries**: For each `layer`, define `first = layer` and `last = n - 1 - layer`. These represent the current layer's top-left and bottom-right boundaries.\n3.  **Iterate within the layer**: For each `i` from `first` to `last - 1` (this range ensures we pick unique elements for each cycle):\n    *   Store the top element: `top = matrix[first][i]`\n    *   Move left to top: `matrix[first][i] = matrix[last - (i - first)][first]`\n    *   Move bottom to left: `matrix[last - (i - first)][first] = matrix[last][last - (i - first)]`\n    *   Move right to bottom: `matrix[last][last - (i - first)] = matrix[i][last]`\n    *   Move stored top to right: `matrix[i][last] = top`\n\n## Spiral Matrix Traversal\nSpiral matrix traversal involves extracting elements from a matrix in a spiral order. This is typically achieved by maintaining four boundary pointers (top, bottom, left, right) and iteratively moving them inwards after traversing each side.\n\n### Algorithm for Spiral Traversal:\n1.  **Initialize boundaries**: `top = 0`, `bottom = matrix.length - 1`, `left = 0`, `right = matrix[0].length - 1`.\n2.  **Initialize direction**: `direction = 0` (0: right, 1: down, 2: left, 3: up).\n3.  **Loop while boundaries are valid**: Continue as long as `top <= bottom` and `left <= right`.\n    *   **Move Right (direction 0)**: Traverse from `left` to `right` along `matrix[top]`. Increment `top`.\n    *   **Move Down (direction 1)**: Traverse from `top` to `bottom` along `matrix[i][right]`. Decrement `right`.\n    *   **Move Left (direction 2)**: Traverse from `right` to `left` along `matrix[bottom]`. Decrement `bottom`.\n    *   **Move Up (direction 3)**: Traverse from `bottom` to `top` along `matrix[i][left]`. Increment `left`.\n4.  **Change direction**: After each side traversal, update `direction = (direction + 1) % 4` to cycle through the four directions.\n5.  **Collect results**: Add each visited element to a result array.",
          "examples": [
            {
              "id": "example_matrix_rotation_1",
              "title": "In-place Matrix Rotation (90 Degrees Clockwise)",
              "code": "function rotateMatrix(matrix) {\n  const n = matrix.length; // Assuming square matrix\n\n  for (let layer = 0; layer < Math.floor(n / 2); layer++) {\n    let first = layer;\n    let last = n - 1 - layer;\n\n    for (let i = first; i < last; i++) {\n      let offset = i - first;\n      // Save top-left element\n      let top = matrix[first][i];\n\n      // Move bottom-left to top-left\n      matrix[first][i] = matrix[last - offset][first];\n\n      // Move bottom-right to bottom-left\n      matrix[last - offset][first] = matrix[last][last - offset];\n\n      // Move top-right to bottom-right\n      matrix[last][last - offset] = matrix[i][last];\n\n      // Move saved top-left to top-right\n      matrix[i][last] = top;\n    }\n  }\n}\n\n// Example Usage:\nconst matrixToRotate = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n];\nconsole.log(\"Original matrix:\", matrixToRotate);\nrotateMatrix(matrixToRotate);\nconsole.log(\"Rotated matrix:\", matrixToRotate);\n/* Expected Result:\n[\n  [7, 4, 1],\n  [8, 5, 2],\n  [9, 6, 3]\n]\n*/",
              "explanation": "This function performs an in-place 90-degree clockwise rotation of a square matrix. It works by processing the matrix in concentric layers. For each layer, it iterates through elements on the top row (from `first` to `last-1`) and performs a cyclic swap of four elements: top-left with bottom-left, then bottom-left with bottom-right, then bottom-right with top-right, and finally top-right with the initially stored top-left element. This moves all four elements in a cycle, effectively rotating them.",
              "language": "javascript"
            },
            {
              "id": "example_spiral_traversal_1",
              "title": "Spiral Order Matrix Traversal",
              "code": "function spiralOrder(matrix) {\n  if (!matrix.length) return [];\n  \n  const result = [];\n  let top = 0;\n  let bottom = matrix.length - 1;\n  let left = 0;\n  let right = matrix[0].length - 1;\n  let direction = 0; // 0: right, 1: down, 2: left, 3: up\n  \n  while (top <= bottom && left <= right) {\n    if (direction === 0) {\n      // Move right\n      for (let i = left; i <= right; i++) {\n        result.push(matrix[top][i]);\n      }\n      top++;\n    } else if (direction === 1) {\n      // Move down\n      for (let i = top; i <= bottom; i++) {\n        result.push(matrix[i][right]);\n      }\n      right--;\n    } else if (direction === 2) {\n      // Move left (only if top is still <= bottom, avoids double counting in single row/column cases)\n      if (top <= bottom) { \n        for (let i = right; i >= left; i--) {\n          result.push(matrix[bottom][i]);\n        }\n      }\n      bottom--;\n    } else if (direction === 3) {\n      // Move up (only if left is still <= right, avoids double counting in single row/column cases)\n      if (left <= right) {\n        for (let i = bottom; i >= top; i--) {\n          result.push(matrix[i][left]);\n        }\n      }\n      left++;\n    }\n    \n    direction = (direction + 1) % 4; // Cycle direction\n  }\n  \n  return result;\n}\n\n// Example Usage:\nconst matrixToSpiral = [\n  [1, 2, 3, 4, 5],\n  [6, 7, 8, 9, 10],\n  [11, 12, 13, 14, 15],\n  [16, 17, 18, 19, 20]\n];\n\nconsole.log(\"Spiral order:\", spiralOrder(matrixToSpiral));\n// Expected: [1, 2, 3, 4, 5, 10, 15, 20, 19, 18, 17, 16, 11, 6, 7, 8, 9, 14, 13, 12]",
              "explanation": "This function extracts elements from a given matrix in a spiral order. It uses four pointers (`top`, `bottom`, `left`, `right`) to define the current boundaries of the sub-matrix being traversed. A `direction` variable (0-3) determines which side is being processed. After traversing one side, the corresponding boundary pointer is adjusted inwards, and the `direction` is updated cyclically. The loops for moving left and up include `if (top <= bottom)` and `if (left <= right)` checks, respectively, to prevent adding duplicate elements in cases of single-row or single-column matrices, which might happen after `top` or `right` have been incremented/decremented past `bottom` or `left`.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_matrix_spiral_mcq_1",
            "question_matrix_rotation_open_1",
            "question_matrix_spiral_flashcard_1",
            "question_matrix_rotation_code_1",
            "question_matrix_spiral_open_2",
            "question_matrix_rotation_flashcard_2"
          ],
          "relatedTasks": [
            "task_matrix_rotation",
            "task_spiral_traversal"
          ],
          "tags": [
            "matrix",
            "algorithms",
            "in-place",
            "traversal",
            "array",
            "data-structures"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "arrays",
            "loops",
            "basic_algorithms"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "graph_algorithms",
            "game_development",
            "image_processing"
          ]
        },
        {
          "id": "theory_string_processing",
          "title": "String Processing: Finding Most Consecutive Character Occurrences",
          "content": "## Finding the Character with Most Consecutive Occurrences\nThis problem involves scanning a string to identify which character appears consecutively the most number of times. It's a common string manipulation problem that tests basic iteration and state management skills.\n\n### Algorithm:\n1.  **Handle Edge Cases**: If the string is empty, return `null` (or handle as per requirements).\n2.  **Initialize Variables**: \n    *   `maxChar`: Stores the character with the overall maximum consecutive count. Initialize with the first character of the string.\n    *   `maxCount`: Stores the overall maximum consecutive count. Initialize with `1`.\n    *   `currentChar`: Stores the character of the current consecutive sequence. Initialize with the first character.\n    *   `currentCount`: Stores the count of the current consecutive sequence. Initialize with `1`.\n3.  **Iterate through the string**: Start from the second character (index 1) up to the end of the string.\n    *   **If current character matches previous**: Increment `currentCount`.\n    *   **If current character is different**: \n        *   First, compare `currentCount` with `maxCount`. If `currentCount` is greater, update `maxCount` to `currentCount` and `maxChar` to `currentChar`.\n        *   Then, reset `currentChar` to the new character and `currentCount` to `1`.\n4.  **Final Check**: After the loop finishes, perform one last comparison of `currentCount` with `maxCount`. This is crucial because if the string ends with the longest consecutive sequence, the `else` block inside the loop won't be triggered for that sequence.\n5.  **Return `maxChar`**.",
          "examples": [
            {
              "id": "example_string_processing_1",
              "title": "Finding Most Consecutive Character",
              "code": "function findMostConsecutiveChar(str) {\n  if (str.length === 0) return null;\n  \n  let maxChar = str[0];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n  \n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      // Check if the sequence that just ended was the longest\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChar = currentChar;\n      }\n      // Start a new sequence\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n  \n  // Crucial: After the loop, check the last sequence\n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChar = currentChar;\n  }\n  \n  return maxChar;\n}\n\n// Example Usage:\nconsole.log(\"abcccccccdddefffffaaa ->\", findMostConsecutiveChar(\"abcccccccdddefffffaaa\")); // Expected: 'c'\nconsole.log(\"aaabbcdddd ->\", findMostConsecutiveChar(\"aaabbcdddd\"));             // Expected: 'd'\nconsole.log(\"aaaaa ->\", findMostConsecutiveChar(\"aaaaa\"));                     // Expected: 'a'\nconsole.log(\"abc ->\", findMostConsecutiveChar(\"abc\"));                         // Expected: 'a'\nconsole.log(\" ->\", findMostConsecutiveChar(\"\"));                               // Expected: null",
              "explanation": "This function iterates through the string, keeping track of the `currentChar` and its `currentCount` of consecutive occurrences. When the character changes, or the string ends, it compares `currentCount` with `maxCount` and updates `maxChar` and `maxCount` if a new maximum is found. The final check after the loop ensures that if the longest sequence is at the end of the string, it is correctly captured.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_string_consecutive_open_1",
            "question_string_consecutive_mcq_1",
            "question_string_consecutive_code_1",
            "question_string_consecutive_flashcard_1",
            "question_string_consecutive_open_2"
          ],
          "relatedTasks": [
            "task_find_most_consecutive_char"
          ],
          "tags": [
            "string",
            "algorithms",
            "iteration",
            "counting",
            "character_frequency"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "strings",
            "loops",
            "variables"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "beginner",
          "requiredFor": [
            "text_processing",
            "data_validation"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_matrix_rotation_open_1",
          "topic": "Matrix Rotation",
          "level": "medium",
          "type": "open",
          "question": "Describe the core logic behind rotating a square matrix 90 degrees clockwise in-place using the layer-by-layer approach. Explain how elements are moved within each layer.",
          "answer": "The layer-by-layer approach for rotating a square matrix 90 degrees clockwise in-place involves iterating through concentric square 'layers' of the matrix. For each layer, four elements at the corners of the current layer's segment are cyclically swapped. \n\nFor a matrix of size `n x n`, you would iterate from `layer = 0` up to `floor(n / 2) - 1`. Within each `layer`, you define `first = layer` and `last = n - 1 - layer`. Then, you iterate with an index `i` from `first` to `last - 1` along the 'top' edge of the current layer.\n\nIn each step of the inner loop, four elements are involved:\n1.  **Top-Left**: `matrix[first][i]`\n2.  **Bottom-Left**: `matrix[last - (i - first)][first]`\n3.  **Bottom-Right**: `matrix[last][last - (i - first)]`\n4.  **Top-Right**: `matrix[i][last]`\n\nThe rotation happens by moving `Bottom-Left` to `Top-Left`, `Bottom-Right` to `Bottom-Left`, `Top-Right` to `Bottom-Right`, and the original `Top-Left` (which was temporarily saved) to `Top-Right`. This effectively shifts elements clockwise around the perimeter of the current layer.",
          "analysisPoints": [
            "Understanding of layers and boundaries.",
            "Correct identification of the four elements involved in a cyclic swap.",
            "Ability to explain the `offset` concept (`i - first`) for dynamic indexing.",
            "Knowledge of in-place modification benefits (space complexity)."
          ],
          "keyConcepts": [
            "Matrix Rotation",
            "In-place Algorithm",
            "Layer-by-layer",
            "Cyclic Swapping",
            "Time Complexity O(N^2)",
            "Space Complexity O(1)"
          ],
          "evaluationCriteria": [
            "Clarity and accuracy of the algorithm description.",
            "Correctness of indexing logic explanation.",
            "Demonstration of understanding of in-place concept.",
            "Completeness of the explanation for edge cases like n=1 matrix or even/odd n."
          ],
          "example": "See the `rotateMatrix` function in the theory section for a concrete implementation.",
          "tags": [
            "matrix",
            "algorithms",
            "in-place",
            "rotation",
            "interview_question"
          ],
          "prerequisites": [
            "arrays",
            "loops"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_matrix_spiral_mcq_1",
          "topic": "Spiral Matrix Traversal",
          "level": "medium",
          "type": "mcq",
          "question": "In the `spiralOrder` function for matrix traversal, what is the primary purpose of the line `direction = (direction + 1) % 4;`?",
          "answer": "To cyclically change the direction of traversal (right, down, left, up).",
          "options": [
            "To cyclically change the direction of traversal (right, down, left, up).",
            "To reset the `direction` to 0 after completing a full spiral.",
            "To ensure the loop terminates when all elements are visited.",
            "To calculate the next boundary pointer for the traversal."
          ],
          "analysisPoints": [
            "Understanding of the modulo operator's use for cyclic progression.",
            "Knowledge of the four states representing traversal directions.",
            "Ability to distinguish between state management and loop termination/boundary calculation."
          ],
          "keyConcepts": [
            "Spiral Traversal",
            "State Machine",
            "Modulo Operator",
            "Array Iteration"
          ],
          "evaluationCriteria": [
            "Correct identification of the modulo operator's role.",
            "Understanding of the algorithm's state transitions.",
            "Ability to differentiate between control flow mechanisms."
          ],
          "example": "The `direction` variable cycles through 0, 1, 2, 3, then back to 0. Each number corresponds to a specific traversal path (right, down, left, up) along the matrix's current boundaries. The modulo operation ensures this cycle continues indefinitely until the boundary conditions (`top <= bottom && left <= right`) are no longer met, causing the `while` loop to terminate.",
          "tags": [
            "matrix",
            "algorithms",
            "traversal",
            "mcq"
          ],
          "prerequisites": [
            "loops",
            "operators"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_matrix_spiral_flashcard_1",
          "topic": "Spiral Matrix Traversal",
          "level": "easy",
          "type": "flashcard",
          "question": "What are the four boundary pointers typically used in the spiral matrix traversal algorithm?",
          "answer": "Top, Bottom, Left, Right.",
          "analysisPoints": [
            "Recall of algorithm's key variables.",
            "Understanding of boundary-based iteration."
          ],
          "keyConcepts": [
            "Spiral Traversal",
            "Boundary Pointers",
            "Matrix"
          ],
          "evaluationCriteria": [
            "Accuracy of recall.",
            "Basic understanding of traversal mechanism."
          ],
          "example": "These pointers define the current sub-matrix that is being traversed. `top` and `bottom` define the row boundaries, while `left` and `right` define the column boundaries.",
          "tags": [
            "matrix",
            "algorithms",
            "traversal",
            "flashcard"
          ],
          "prerequisites": [
            "arrays"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_matrix_rotation_code_1",
          "topic": "Matrix Rotation",
          "level": "hard",
          "type": "code",
          "question": "Implement a function `rotateMatrixTransposeReverse(matrix)` that rotates a square matrix 90 degrees clockwise in-place by first transposing the matrix and then reversing each of its rows. Assume the input `matrix` is always square.",
          "answer": "```javascript\nfunction rotateMatrixTransposeReverse(matrix) {\n  const n = matrix.length;\n\n  // Step 1: Transpose the matrix\n  // Swap elements across the main diagonal (matrix[i][j] with matrix[j][i])\n  for (let i = 0; i < n; i++) {\n    for (let j = i; j < n; j++) { // Start j from i to avoid double swapping\n      [matrix[i][j], matrix[j][i]] = [matrix[j][i], matrix[i][j]];\n    }\n  }\n\n  // Step 2: Reverse each row\n  for (let i = 0; i < n; i++) {\n    matrix[i].reverse(); // Array.prototype.reverse() method\n  }\n}\n\n// Example usage:\nconst matrix1 = [\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n];\nconsole.log(\"Original:\", matrix1);\nrotateMatrixTransposeReverse(matrix1);\nconsole.log(\"Rotated (Transpose+Reverse):\", matrix1);\n// Expected: [[7, 4, 1], [8, 5, 2], [9, 6, 3]]\n\nconst matrix2 = [\n  [1, 2],\n  [3, 4]\n];\nconsole.log(\"Original:\", matrix2);\nrotateMatrixTransposeReverse(matrix2);\nconsole.log(\"Rotated (Transpose+Reverse):\", matrix2);\n// Expected: [[3, 1], [4, 2]]\n```",
          "analysisPoints": [
            "Correct implementation of matrix transposition (swapping `matrix[i][j]` with `matrix[j][i]`).",
            "Understanding that `j` should start from `i` in the transpose loop to avoid redundant swaps and maintain in-place property.",
            "Correct application of row reversal (e.g., using `Array.prototype.reverse()` or a manual two-pointer swap).",
            "Handling edge cases like 1x1 matrix (implicitly handled correctly)."
          ],
          "keyConcepts": [
            "Matrix Transposition",
            "In-place Algorithm",
            "Array Reversal",
            "Time Complexity O(N^2)",
            "Space Complexity O(1)"
          ],
          "evaluationCriteria": [
            "Functional correctness for various square matrix sizes.",
            "Efficiency (O(N^2) time, O(1) space).",
            "Clarity and readability of the code.",
            "Adherence to in-place constraint."
          ],
          "example": "This solution demonstrates an alternative and often simpler way to perform 90-degree clockwise rotation. First, the matrix is transposed, meaning rows become columns and columns become rows (e.g., `matrix[i][j]` becomes `matrix[j][i]`). Then, each row of the *transposed* matrix is reversed. This combination achieves the desired 90-degree clockwise rotation. The `j = i` in the inner loop for transposition ensures each pair is swapped only once.",
          "tags": [
            "matrix",
            "algorithms",
            "in-place",
            "rotation",
            "coding_challenge"
          ],
          "prerequisites": [
            "arrays",
            "loops",
            "array_methods"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_matrix_spiral_open_2",
          "topic": "Spiral Matrix Traversal",
          "level": "medium",
          "type": "open",
          "question": "Discuss the time and space complexity of the `spiralOrder` function. What are the key factors contributing to these complexities?",
          "answer": "**Time Complexity:**\nThe time complexity of the `spiralOrder` function is O(M*N), where M is the number of rows and N is the number of columns in the matrix.\n\n**Reasoning:**\nEvery element in the matrix is visited and added to the `result` array exactly once. The `while` loop continues as long as `top <= bottom` and `left <= right`, ensuring all elements are processed. Each inner `for` loop iterates over a distinct set of elements (a row or a column segment) that are not revisited. Therefore, the total number of operations is directly proportional to the total number of elements in the matrix.\n\n**Space Complexity:**\nThe space complexity of the `spiralOrder` function is O(M*N).\n\n**Reasoning:**\nA new array, `result`, is created to store all elements of the matrix in spiral order. In the worst-case scenario, this array will hold all M*N elements of the input matrix. If the problem allowed for printing elements directly without storing them, the auxiliary space complexity would be O(1) (excluding the input matrix itself and recursion stack if applicable). However, since the function returns a new array containing all elements, the space complexity is proportional to the size of the output.",
          "analysisPoints": [
            "Correctly identifying both time and space complexity.",
            "Providing clear reasoning for the time complexity based on visiting each element once.",
            "Providing clear reasoning for the space complexity based on the output array size.",
            "Distinguishing between auxiliary space and total space if relevant (e.g., if problem asked for printing vs. returning a list)."
          ],
          "keyConcepts": [
            "Time Complexity",
            "Space Complexity",
            "Big O Notation",
            "Matrix Traversal",
            "Algorithm Analysis"
          ],
          "evaluationCriteria": [
            "Accuracy of complexity analysis.",
            "Clarity and completeness of explanation.",
            "Understanding of how data structures (like `result` array) impact space complexity."
          ],
          "example": "Consider a 3x3 matrix. The function will visit 9 elements. For a 4x5 matrix, it visits 20 elements. This linear relationship to the total number of elements (M*N) defines its time complexity.",
          "tags": [
            "matrix",
            "algorithms",
            "complexity",
            "analysis",
            "interview_question"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_matrix_rotation_flashcard_2",
          "topic": "Matrix Rotation",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the typical space complexity for in-place matrix rotation algorithms (like the layer-by-layer method or transpose-then-reverse)?",
          "answer": "O(1) (constant space).",
          "analysisPoints": [
            "Recall of in-place algorithm benefits.",
            "Understanding of auxiliary space."
          ],
          "keyConcepts": [
            "Space Complexity",
            "In-place Algorithm",
            "Matrix Rotation"
          ],
          "evaluationCriteria": [
            "Accuracy of recall.",
            "Basic understanding of space efficiency."
          ],
          "example": "In-place algorithms modify the input matrix directly without allocating significant additional data structures proportional to the input size, hence achieving O(1) space complexity.",
          "tags": [
            "matrix",
            "algorithms",
            "complexity",
            "flashcard"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_string_consecutive_open_1",
          "topic": "String Processing",
          "level": "medium",
          "type": "open",
          "question": "How would you modify the `findMostConsecutiveChar` function to return an object containing both the character and its maximum consecutive count, instead of just the character?",
          "answer": "To modify the `findMostConsecutiveChar` function to return an object `{ char: maxChar, count: maxCount }`, you would make the following changes:\n\n1.  **Modify Return Type**: Change the final `return` statement to return an object.\n2.  **Initialize `maxCount`**: Ensure `maxCount` is initialized correctly (e.g., `1` for non-empty string, or `0` for an empty string if you want `{ char: null, count: 0 }`).\n3.  **Handle Empty String**: For an empty string, return a default object like `{ char: null, count: 0 }` or throw an error, depending on requirements.\n\n```javascript\nfunction findMostConsecutiveCharExtended(str) {\n  if (str.length === 0) {\n    return { char: null, count: 0 }; // Return null char and 0 count for empty string\n  }\n  \n  let maxChar = str[0];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n  \n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChar = currentChar;\n      }\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n  \n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChar = currentChar;\n  }\n  \n  return { char: maxChar, count: maxCount }; // Return an object\n}\n\n// Example Usage:\nconsole.log(findMostConsecutiveCharExtended(\"abcccccccdddefffffaaa\")); // { char: 'c', count: 7 }\nconsole.log(findMostConsecutiveCharExtended(\"aaaaa\"));                     // { char: 'a', count: 5 }\nconsole.log(findMostConsecutiveCharExtended(\"\"));                           // { char: null, count: 0 }\n```",
          "analysisPoints": [
            "Correctly identifying the need to return an object.",
            "Properly initializing `maxCount` and `maxChar` (and `currentChar`, `currentCount`) based on the first character.",
            "Handling the empty string case with an appropriate return value.",
            "Ensuring the final `if (currentCount > maxCount)` check is still in place before returning."
          ],
          "keyConcepts": [
            "String Iteration",
            "State Management",
            "Data Structures (Objects)",
            "Edge Cases"
          ],
          "evaluationCriteria": [
            "Functional correctness of the modified function.",
            "Appropriate handling of initial state and edge cases.",
            "Clarity of the returned data structure."
          ],
          "example": "This modification is useful when you need more than just the character; knowing the count is often critical for further processing or display. For instance, if you're building a simple run-length encoding feature, this information is vital.",
          "tags": [
            "string",
            "modification",
            "data_structure",
            "interview_question"
          ],
          "prerequisites": [
            "objects",
            "functions"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_string_consecutive_mcq_1",
          "topic": "String Processing",
          "level": "easy",
          "type": "mcq",
          "question": "Consider the `findMostConsecutiveChar` function. If the input string is `\"abbccc\"`, what character will `maxChar` hold after the loop finishes and the final check is performed?",
          "answer": "c",
          "options": [
            "a",
            "b",
            "c",
            "null"
          ],
          "analysisPoints": [
            "Tracing variable states through the loop.",
            "Understanding the role of `maxCount` and `maxChar` updates.",
            "Importance of the final check after the loop for the last sequence."
          ],
          "keyConcepts": [
            "String Iteration",
            "Variable Tracking",
            "Consecutive Count"
          ],
          "evaluationCriteria": [
            "Ability to mentally execute code.",
            "Correct application of comparison logic."
          ],
          "example": "Let's trace `\"abbccc\"`:\n- Initial: `maxChar='a'`, `maxCount=1`, `currentChar='a'`, `currentCount=1`\n- i=1 ('b'): `str[1]` != `currentChar`. `currentCount` (1) not > `maxCount` (1). Reset: `currentChar='b'`, `currentCount=1`.\n- i=2 ('b'): `str[2]` == `currentChar`. `currentCount` becomes 2.\n- i=3 ('c'): `str[3]` != `currentChar`. `currentCount` (2) > `maxCount` (1). Update: `maxCount=2`, `maxChar='b'`. Reset: `currentChar='c'`, `currentCount=1`.\n- i=4 ('c'): `str[4]` == `currentChar`. `currentCount` becomes 2.\n- i=5 ('c'): `str[5]` == `currentChar`. `currentCount` becomes 3.\n- Loop ends. Final check: `currentCount` (3) > `maxCount` (2). Update: `maxCount=3`, `maxChar='c'`.\nResult: `maxChar` is 'c'.",
          "tags": [
            "string",
            "logic_trace",
            "mcq"
          ],
          "prerequisites": [
            "loops",
            "variables"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_string_consecutive_code_1",
          "topic": "String Processing",
          "level": "medium",
          "type": "code",
          "question": "Implement a function `findLeastConsecutiveChar(str)` that finds the character with the *least* consecutive occurrences in a string. If multiple characters have the same minimum count, return the one that appears first alphabetically. Assume the string only contains lowercase English letters. If the string is empty, return `null`.",
          "answer": "```javascript\nfunction findLeastConsecutiveChar(str) {\n  if (str.length === 0) return null;\n\n  let minChar = str[0];\n  let minCount = Infinity; // Initialize with a very large number\n\n  let currentChar = str[0];\n  let currentCount = 1;\n\n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      // Check if the sequence that just ended is the new minimum\n      if (currentCount < minCount) {\n        minCount = currentCount;\n        minChar = currentChar;\n      } else if (currentCount === minCount) {\n        // If counts are equal, prioritize alphabetically smaller character\n        if (currentChar < minChar) {\n          minChar = currentChar;\n        }\n      }\n      // Start a new sequence\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n\n  // Crucial: After the loop, check the last sequence\n  if (currentCount < minCount) {\n    minCount = currentCount;\n    minChar = currentChar;\n  } else if (currentCount === minCount) {\n    if (currentChar < minChar) {\n      minChar = currentChar;\n    }\n  }\n\n  return minChar;\n}\n\n// Example Usage:\nconsole.log(findLeastConsecutiveChar(\"abcccccccdddefffffaaa\")); // Expected: 'b' (count 1)\nconsole.log(findLeastConsecutiveChar(\"aaabbcdddd\"));             // Expected: 'b' (count 1)\nconsole.log(findLeastConsecutiveChar(\"aaaaa\"));                     // Expected: 'a' (count 5)\nconsole.log(findLeastConsecutiveChar(\"abc\"));                         // Expected: 'a' (count 1, 'a' < 'b' < 'c')\nconsole.log(findLeastConsecutiveChar(\"eeeaabbbccc\"));           // Expected: 'a' (count 2, 'a' < 'e')\nconsole.log(findLeastConsecutiveChar(\"\"));                           // Expected: null\n```",
          "analysisPoints": [
            "Correctly adapting the logic from 'most' to 'least' (i.e., using `minCount` and `minChar` and initializing `minCount` to `Infinity`).",
            "Implementing the tie-breaking rule: if `currentCount` equals `minCount`, choose the alphabetically smaller character.",
            "Properly handling the empty string case.",
            "Ensuring the final check after the loop for the last sequence."
          ],
          "keyConcepts": [
            "String Iteration",
            "Minimum Finding",
            "Tie-breaking Logic",
            "Edge Cases",
            "Alphabetical Comparison"
          ],
          "evaluationCriteria": [
            "Functional correctness for various string inputs, including ties.",
            "Efficiency (O(N) time, O(1) space).",
            "Adherence to specified tie-breaking rule.",
            "Robustness for edge cases."
          ],
          "example": "This problem is a twist on finding the maximum, requiring careful adaptation of the comparison logic, especially for handling ties based on alphabetical order. Initializing `minCount` to `Infinity` is a common pattern when looking for a minimum value.",
          "tags": [
            "string",
            "algorithms",
            "variation",
            "coding_challenge"
          ],
          "prerequisites": [
            "find_most_consecutive_char",
            "string_comparison"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_string_consecutive_flashcard_1",
          "topic": "String Processing",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the time complexity of the `findMostConsecutiveChar` algorithm?",
          "answer": "O(N), where N is the length of the string.",
          "analysisPoints": [
            "Recall of linear time complexity for single pass algorithms.",
            "Understanding that each character is visited a constant number of times."
          ],
          "keyConcepts": [
            "Time Complexity",
            "Big O Notation",
            "String Iteration"
          ],
          "evaluationCriteria": [
            "Accuracy of recall.",
            "Basic understanding of algorithm efficiency."
          ],
          "example": "The algorithm involves a single loop that iterates through the string once. Operations inside the loop (comparisons, increments, assignments) take constant time. Therefore, the total time complexity is directly proportional to the length of the string.",
          "tags": [
            "string",
            "complexity",
            "flashcard"
          ],
          "prerequisites": [
            "big_o_notation"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_string_consecutive_open_2",
          "topic": "String Processing",
          "level": "medium",
          "type": "open",
          "question": "What happens if the longest consecutive sequence is at the very end of the string in `findMostConsecutiveChar` if the final check after the loop is omitted?",
          "answer": "If the final `if (currentCount > maxCount)` check after the loop is omitted in `findMostConsecutiveChar`, the function might return an incorrect result if the longest consecutive sequence occurs at the very end of the string.\n\n**Explanation:**\nThe `maxChar` and `maxCount` variables are updated *only* when `str[i]` is different from `currentChar` (i.e., when a sequence *ends*) or during the initial assignment. If the string ends with its longest sequence (e.g., `\"aaabbbcccc\"`), the `else` block (where `maxCount` and `maxChar` are updated) will not be triggered for the final sequence (`\"cccc\"`). The `currentCount` will correctly hold `4`, but `maxCount` would still hold the value from the previous longest sequence (e.g., `3` for `\"bbb\"`), leading to `maxChar` being `b` instead of `c`.\n\nTherefore, the final check is crucial to ensure that the statistics of the last sequence processed are properly compared and, if necessary, used to update the overall maximum.",
          "analysisPoints": [
            "Identifying the specific failure scenario (longest sequence at end).",
            "Explaining *why* the failure occurs (update logic tied to sequence termination within loop).",
            "Highlighting the importance of the post-loop check for correctness.",
            "Providing a concrete example to illustrate the point."
          ],
          "keyConcepts": [
            "Edge Cases",
            "Loop Invariants",
            "Algorithm Correctness",
            "State Management"
          ],
          "evaluationCriteria": [
            "Clear and accurate explanation of the defect.",
            "Demonstration of understanding of loop control flow.",
            "Ability to predict algorithm behavior under specific conditions."
          ],
          "example": "For the string `\"aaabbbcccc\"`:\n- After `\"aaa\"` (i=2), `maxChar='a'`, `maxCount=3` (or initial state if 'aaa' is not longest).\n- After `\"bbb\"` (i=5), `currentCount` (3) is compared. If `maxCount` was previously 1, then `maxCount` becomes 3, `maxChar` becomes 'b'.\n- When processing `\"cccc\"`, `currentCount` becomes 4. However, since the loop ends, the `else` block is never entered for the 'cccc' sequence. Without the final check, `maxChar` would remain 'b' and `maxCount` would remain 3, which is incorrect.",
          "tags": [
            "string",
            "edge_case",
            "logic",
            "interview_question"
          ],
          "prerequisites": [
            "loops",
            "debugging"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_matrix_rotation",
          "title": "Implement In-place Matrix Rotation (90 Degrees Clockwise)",
          "description": "\nImplement the `rotateMatrix` function that rotates a given `n x n` 2D matrix 90 degrees clockwise in-place. You must modify the input matrix directly. Assume the input `matrix` is always square (i.e., `matrix.length === matrix[0].length`).\n\n**Requirements:**\n1.  The rotation must be 90 degrees clockwise.\n2.  The operation must be performed in-place (do not create a new matrix).\n3.  Your solution should be efficient in terms of time and space complexity.\n\n**Example:**\nInput:\n```\n[\n  [1, 2, 3],\n  [4, 5, 6],\n  [7, 8, 9]\n]\n```\nOutput (modified in-place):\n```\n[\n  [7, 4, 1],\n  [8, 5, 2],\n  [9, 6, 3]\n]\n```\n",
          "difficulty": "medium",
          "startingCode": "function rotateMatrix(matrix) {\n  const n = matrix.length;\n\n  // TODO: Implement the in-place 90-degree clockwise rotation.\n  // Consider iterating through layers.\n  // For each layer, perform cyclic swaps of four elements.\n\n}\n\n// Example usage (for testing):\n// const matrix = [[1,2,3],[4,5,6],[7,8,9]];\n// rotateMatrix(matrix);\n// console.log(matrix);\n",
          "solutionCode": "function rotateMatrix(matrix) {\n  const n = matrix.length;\n\n  for (let layer = 0; layer < Math.floor(n / 2); layer++) {\n    let first = layer;\n    let last = n - 1 - layer;\n\n    for (let i = first; i < last; i++) {\n      let offset = i - first;\n      // Save top-left element\n      let top = matrix[first][i];\n\n      // Move bottom-left to top-left\n      matrix[first][i] = matrix[last - offset][first];\n\n      // Move bottom-right to bottom-left\n      matrix[last - offset][first] = matrix[last][last - offset];\n\n      // Move top-right to bottom-right\n      matrix[last][last - offset] = matrix[i][last];\n\n      // Move saved top-left to top-right\n      matrix[i][last] = top;\n    }\n  }\n}",
          "testCases": [
            "Test with 3x3 matrix: `[[1,2,3],[4,5,6],[7,8,9]]` should become `[[7,4,1],[8,5,2],[9,6,3]]`",
            "Test with 2x2 matrix: `[[1,2],[3,4]]` should become `[[3,1],[4,2]]`",
            "Test with 1x1 matrix: `[[5]]` should remain `[[5]]`",
            "Test with 4x4 matrix: `[[1,2,3,4],[5,6,7,8],[9,10,11,12],[13,14,15,16]]` should become `[[13,9,5,1],[14,10,6,2],[15,11,7,3],[16,12,8,4]]`",
            "Test with matrix containing zeros or negative numbers."
          ],
          "hints": [
            "Think about processing the matrix in concentric layers, starting from the outermost.",
            "For each layer, focus on cyclically rotating four elements at a time (top-left, top-right, bottom-right, bottom-left).",
            "Use an `offset` variable to correctly index elements within the current layer's segment.",
            "The time complexity should be O(N^2) and space complexity O(1)."
          ],
          "tags": [
            "matrix",
            "in-place",
            "rotation",
            "algorithm",
            "array"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "arrays",
            "loops"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "matrix_transposition",
            "image_processing",
            "game_development"
          ]
        },
        {
          "id": "task_spiral_traversal",
          "title": "Implement Spiral Matrix Traversal",
          "description": "\nImplement the `spiralOrder` function that takes a `m x n` matrix and returns a new array containing all elements of the matrix in spiral order.\n\n**Requirements:**\n1.  Handle matrices of different dimensions (e.g., `m x n`, `m x 1`, `1 x n`).\n2.  Handle an empty input matrix.\n\n**Example:**\nInput:\n```\n[\n  [1, 2, 3, 4, 5],\n  [6, 7, 8, 9, 10],\n  [11, 12, 13, 14, 15],\n  [16, 17, 18, 19, 20]\n]\n```\nOutput:\n```\n[1, 2, 3, 4, 5, 10, 15, 20, 19, 18, 17, 16, 11, 6, 7, 8, 9, 14, 13, 12]\n```\n",
          "difficulty": "medium",
          "startingCode": "function spiralOrder(matrix) {\n  // TODO: Handle empty matrix case.\n  // TODO: Initialize boundary pointers (top, bottom, left, right).\n  // TODO: Initialize direction.\n  // TODO: Loop while boundaries are valid, traversing each side and updating boundaries and direction.\n  // TODO: Collect elements in a result array.\n}\n\n// Example usage (for testing):\n// const matrix = [\n//   [1, 2, 3],\n//   [8, 9, 4],\n//   [7, 6, 5]\n// ];\n// console.log(spiralOrder(matrix)); // Expected: [1, 2, 3, 4, 5, 6, 7, 8, 9]\n",
          "solutionCode": "function spiralOrder(matrix) {\n  if (!matrix.length) return [];\n  \n  const result = [];\n  let top = 0;\n  let bottom = matrix.length - 1;\n  let left = 0;\n  let right = matrix[0].length - 1;\n  let direction = 0; // 0: right, 1: down, 2: left, 3: up\n  \n  while (top <= bottom && left <= right) {\n    if (direction === 0) {\n      // Move right\n      for (let i = left; i <= right; i++) {\n        result.push(matrix[top][i]);\n      }\n      top++;\n    } else if (direction === 1) {\n      // Move down\n      for (let i = top; i <= bottom; i++) {\n        result.push(matrix[i][right]);\n      }\n      right--;\n    } else if (direction === 2) {\n      // Move left (only if top is still <= bottom, avoids double counting in single row/column cases)\n      if (top <= bottom) { \n        for (let i = right; i >= left; i--) {\n          result.push(matrix[bottom][i]);\n        }\n      }\n      bottom--;\n    } else if (direction === 3) {\n      // Move up (only if left is still <= right, avoids double counting in single row/column cases)\n      if (left <= right) {\n        for (let i = bottom; i >= top; i--) {\n          result.push(matrix[i][left]);\n        }\n      }\n      left++;\n    }\n    \n    direction = (direction + 1) % 4; // Cycle direction\n  }\n  \n  return result;\n}",
          "testCases": [
            "Test with empty matrix: `[]` should return `[]`.",
            "Test with 1x1 matrix: `[[1]]` should return `[1]`.",
            "Test with 1xn matrix: `[[1,2,3,4]]` should return `[1,2,3,4]`.",
            "Test with nx1 matrix: `[[1],[2],[3]]` should return `[1,2,3]`.",
            "Test with a 3x3 matrix: `[[1,2,3],[8,9,4],[7,6,5]]` should return `[1,2,3,4,5,6,7,8,9]`.",
            "Test with the given example 4x5 matrix.",
            "Test with a 2x4 matrix: `[[1,2,3,4],[5,6,7,8]]` should return `[1,2,3,4,8,7,6,5]`."
          ],
          "hints": [
            "Use four pointers: `top`, `bottom`, `left`, `right` to define the current boundaries.",
            "Use a `direction` variable (e.g., 0 for right, 1 for down, 2 for left, 3 for up) and update it using the modulo operator.",
            "Remember to increment/decrement the correct boundary pointer after each traversal phase.",
            "Add checks (e.g., `if (top <= bottom)` or `if (left <= right)`) before the 'move left' and 'move up' phases to handle non-square matrices or single-row/column scenarios correctly and avoid duplicate elements."
          ],
          "tags": [
            "matrix",
            "traversal",
            "algorithm",
            "array",
            "data-structures"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "arrays",
            "loops",
            "conditional_logic"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "matrix_manipulation",
            "boundary_conditions"
          ]
        },
        {
          "id": "task_find_most_consecutive_char",
          "title": "Implement Find Most Consecutive Character",
          "description": "\nImplement the `findMostConsecutiveChar` function that takes a string `str` and returns the character with the most consecutive occurrences.\n\n**Requirements:**\n1.  If the string is empty, return `null`.\n2.  If there's a tie in consecutive counts, return the character that appears first in the string.\n3.  The function should be case-sensitive (e.g., 'a' and 'A' are different characters).\n\n**Examples:**\n*   `findMostConsecutiveChar(\"abcccccccdddefffffaaa\")` should return `'c'` (7 'c's).\n*   `findMostConsecutiveChar(\"aaabbcdddd\")` should return `'d'` (4 'd's).\n*   `findMostConsecutiveChar(\"aaaaa\")` should return `'a'` (5 'a's).\n*   `findMostConsecutiveChar(\"abc\")` should return `'a'` (all 1, 'a' comes first).\n*   `findMostConsecutiveChar(\"\")` should return `null`.\n",
          "difficulty": "easy",
          "startingCode": "function findMostConsecutiveChar(str) {\n  if (str.length === 0) return null;\n  \n  let maxChar = str[0];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n  \n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      // TODO: Logic for when current sequence ends\n      // Compare currentCount with maxCount and update if necessary\n      \n      // TODO: Reset for new character sequence\n      // currentChar = ...\n      // currentCount = ...\n    }\n  }\n  \n  // TODO: Important: Final check after the loop for the last sequence\n  \n  return maxChar;\n}",
          "solutionCode": "function findMostConsecutiveChar(str) {\n  if (str.length === 0) return null;\n  \n  let maxChar = str[0];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n  \n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      // Current sequence ended. Check if it's the new max.\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChar = currentChar;\n      }\n      // Start new sequence\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n  \n  // After the loop, check the very last sequence\n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChar = currentChar;\n  }\n  \n  return maxChar;\n}",
          "testCases": [
            "Test with `\"\"` (empty string) should return `null`.",
            "Test with `\"a\"` (single character) should return `'a'`.",
            "Test with `\"aaabbb\"` should return `'a'` (both 'a' and 'b' have count 3, 'a' appears first).",
            "Test with `\"abcccccccdddefffffaaa\"` should return `'c'`.",
            "Test with `\"aaabbcdddd\"` should return `'d'`.",
            "Test with `\"xyz\"` should return `'x'` (all count 1, 'x' appears first).",
            "Test with `\"AAAAABBBCC\"` should return `'A'`."
          ],
          "hints": [
            "You need to keep track of two sets of counts: one for the current consecutive sequence and one for the overall maximum found so far.",
            "Don't forget to handle the case where the longest consecutive sequence is at the very end of the string.",
            "The problem asks for the character itself, not its count, but you need the count for comparison."
          ],
          "tags": [
            "string",
            "algorithm",
            "iteration",
            "character_frequency"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "loops",
            "variables",
            "conditional_logic"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "beginner",
          "relatedConcepts": [
            "run_length_encoding",
            "string_parsing"
          ]
        }
      ]
    }
  },
  {
    "id": "652cd6da-ccd6-4837-9a62-dfebd41cdd6f",
    "startLine": 16000,
    "endLine": 16099,
    "processedDate": "2025-06-17T15:15:23.237Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_string_consecutive_char",
          "title": "String Manipulation: Finding the Most Consecutive Character",
          "content": "This theory block covers an algorithmic approach to find the character that appears most consecutively in a given string. This problem requires iterating through the string, keeping track of the current character and its consecutive count, and comparing it against the maximum count found so far.\n\n## Key Concepts\n-   **Iteration**: Processing each character of the string one by one.\n-   **State Management**: Maintaining `currentChar`, `currentCount`, `maxChar`, and `maxCount` variables to track the state of consecutive sequences.\n-   **Edge Cases**: Handling empty strings, strings with a single character, and ensuring the last sequence in the string is also checked.\n\n## Algorithm Steps\n1.  Initialize `maxChar` and `maxCount` to default values (e.g., empty string/first char and 0/1). For an empty string, handle it explicitly.\n2.  Initialize `currentChar` and `currentCount` for the current sequence being examined.\n3.  Iterate through the string from the second character (index 1).\n4.  If the current character is the same as the `currentChar`, increment `currentCount`.\n5.  If the current character is different, it means a sequence has ended:\n    a.  Compare `currentCount` with `maxCount`. If `currentCount` is greater, update `maxCount` and `maxChar`.\n    b.  Reset `currentChar` to the new character and `currentCount` to 1.\n6.  After the loop finishes, there might be a pending `currentCount` for the last sequence. Perform a final comparison of `currentCount` with `maxCount` to ensure the last sequence is considered.",
          "examples": [
            {
              "id": "example_string_consecutive_char_1",
              "title": "Basic Implementation of findMostConsecutiveChar",
              "code": "function findMostConsecutiveChar(str) {\n  if (!str || str.length === 0) {\n    return { char: '', count: 0 };\n  }\n\n  let maxChar = str[0];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n\n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChar = currentChar;\n      }\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n  \n  // Check for the last character sequence\n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChar = currentChar;\n  }\n  \n  return { char: maxChar, count: maxCount };\n}\n\n// Example Usage:\nconst str1 = 'bbbaaaaccadd';\nconst result1 = findMostConsecutiveChar(str1);\nconsole.log(result1); // Expected: { char: 'a', count: 4 }\n\nconst str2 = 'aabbbcccc';\nconst result2 = findMostConsecutiveChar(str2);\nconsole.log(result2); // Expected: { char: 'c', count: 4 }\n\nconst str3 = 'a';\nconst result3 = findMostConsecutiveChar(str3);\nconsole.log(result3); // Expected: { char: 'a', count: 1 }",
              "explanation": "This example provides the complete JavaScript function `findMostConsecutiveChar`. It initializes `maxChar` and `maxCount` with the first character's details. It then iterates through the string, comparing each character to the `currentChar`. If they match, `currentCount` increments. If they differ, it means a sequence has ended, so it checks if `currentCount` is a new maximum, updates `maxCount` and `maxChar` if necessary, and then resets `currentChar` and `currentCount` for the new sequence. A crucial final check outside the loop handles the case where the longest consecutive sequence occurs at the very end of the string.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_string_consecutive_char_1",
            "question_string_consecutive_char_2",
            "question_string_consecutive_char_3",
            "question_string_consecutive_char_4"
          ],
          "relatedTasks": [
            "task_string_consecutive_char_1"
          ],
          "tags": [
            "string-manipulation",
            "algorithms",
            "iteration",
            "data-processing"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "basic-javascript",
            "loops",
            "conditional-statements"
          ],
          "complexity": 4,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "sliding-window",
            "dynamic-programming-basics"
          ]
        },
        {
          "id": "theory_linked_list_reverse_iterative",
          "title": "Linked List Operations: Iterative Reversal",
          "content": "Reversing a linked list is a fundamental operation that involves changing the direction of the `next` pointers for each node. This can be achieved iteratively by carefully managing three pointers: `current`, `prev`, and `next`. This approach avoids the overhead and potential stack overflow issues associated with recursive solutions for very long lists.\n\n## Key Concepts\n-   **Linked List Structure**: Understanding that each node contains a value and a pointer (`next`) to the subsequent node.\n-   **Pointer Manipulation**: The core of linked list operations involves correctly updating `next` pointers to change the list's structure.\n-   **Three-Pointer Technique**: Using `current`, `prev`, and `next` pointers to facilitate the reversal:\n    -   `current`: Points to the node currently being processed.\n    -   `prev`: Points to the node that was previously processed, which will become the `current` node's new `next`.\n    -   `next`: Temporarily stores the `current` node's original `next` node before `current.next` is modified. This is crucial to avoid losing the rest of the list.\n\n## Iterative Reversal Algorithm\n1.  Initialize `prev` to `null` (the new head will point to `null`).\n2.  Initialize `current` to the `head` of the original list.\n3.  Loop while `current` is not `null`:\n    a.  Store `current.next` in a `next` temporary variable. This preserves the link to the rest of the un-reversed list.\n    b.  Change the `current` node's `next` pointer to point to `prev`. This reverses the link.\n    c.  Move `prev` forward to `current`. `current` is now part of the reversed section.\n    d.  Move `current` forward to `next`. `current` is now ready to process the next original node.\n4.  After the loop, `current` will be `null`, and `prev` will point to the new head of the reversed list (which was the original tail). Return `prev`.",
          "examples": [
            {
              "id": "example_linked_list_reverse_iterative_1",
              "title": "Iterative Linked List Reversal Implementation",
              "code": "class ListNode {\n  constructor(value) {\n    this.value = value;\n    this.next = null;\n  }\n}\n\nfunction reverseLinkedList(head) {\n  let current = head;\n  let prev = null;\n  let next = null; // Used to temporarily store the next node\n  \n  while (current !== null) {\n    // 1. Store next node before modifying current.next\n    next = current.next;\n    \n    // 2. Reverse current node's pointer: make it point to prev\n    current.next = prev;\n    \n    // 3. Move prev one step forward (it now points to the last reversed node)\n    prev = current;\n    \n    // 4. Move current one step forward (to the next node in the original list)\n    current = next;\n  }\n  \n  // After loop, prev is the new head of the reversed list\n  return prev;\n}\n\n// Example Usage:\n// Create list: 1 -> 2 -> 3 -> 4 -> 5 -> 6\nconst head = new ListNode(1);\nhead.next = new ListNode(2);\nhead.next.next = new ListNode(3);\nhead.next.next.next = new ListNode(4);\nhead.next.next.next.next = new ListNode(5);\nhead.next.next.next.next.next = new ListNode(6);\n\nconsole.log(\"Original list:\");\nlet temp = head;\nlet values = [];\nwhile (temp !== null) { values.push(temp.value); temp = temp.next; }\nconsole.log(values); // [1, 2, 3, 4, 5, 6]\n\n// Reverse the list\nconst newHead = reverseLinkedList(head);\n\n// Print the reversed list: 6 -> 5 -> 4 -> 3 -> 2 -> 1\nconsole.log(\"Reversed list:\");\nlet current = newHead;\nvalues = [];\nwhile (current !== null) {\n  values.push(current.value);\n  current = current.next;\n}\nconsole.log(values); // [6, 5, 4, 3, 2, 1]",
              "explanation": "This example demonstrates the iterative approach to reversing a singly linked list. The `ListNode` class defines the basic structure. The `reverseLinkedList` function uses three pointers: `current` (the node being processed), `prev` (the node that `current` will point to after reversal), and `next` (a temporary pointer to save the next node in the original list before `current.next` is modified). The loop continues until `current` becomes `null`, at which point `prev` holds the reference to the new head of the reversed list.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_linked_list_reverse_1",
            "question_linked_list_reverse_2",
            "question_linked_list_reverse_3",
            "question_linked_list_reverse_4"
          ],
          "relatedTasks": [
            "task_linked_list_reverse_1"
          ],
          "tags": [
            "linked-lists",
            "data-structures",
            "algorithms",
            "pointers",
            "interview-prep"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "data-structures-basics",
            "javascript-pointers-references"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "doubly-linked-lists",
            "list-cycle-detection",
            "merge-sorted-lists"
          ]
        },
        {
          "id": "theory_tree_traversal_iterative_preorder",
          "title": "Tree Traversal: Iterative Preorder Traversal",
          "content": "Tree traversal refers to the process of visiting each node in a tree data structure exactly once. While recursion is a natural fit for tree traversals, iterative approaches are often preferred in interviews to demonstrate a deeper understanding of data structures (like stacks) and to avoid potential stack overflow issues with very deep trees.\n\nPreorder traversal visits nodes in the order: **Root -> Left Subtree -> Right Subtree**.\n\n## Key Concepts\n-   **Binary Tree Structure**: Nodes typically have a `value`, `left` child, and `right` child.\n-   **Stack Data Structure**: Crucial for iterative traversals. A stack follows a Last-In, First-Out (LIFO) principle, which is essential for remembering nodes to visit later.\n-   **Preorder Logic**: For iterative preorder traversal, we push the right child first, then the left child. This ensures that when we pop, the left child is processed before the right, following the Root-Left-Right pattern.\n\n## Iterative Preorder Traversal Algorithm\n1.  Initialize an empty `result` array to store the traversed node values.\n2.  If the `root` is `null`, return the empty `result` array immediately.\n3.  Initialize an empty `stack` and push the `root` node onto it.\n4.  While the `stack` is not empty:\n    a.  Pop a `node` from the `stack`. This `node` is the current root to be processed.\n    b.  Add the `node.value` to the `result` array (this is the 'Root' part of 'Root-Left-Right').\n    c.  If the `node` has a `right` child, push it onto the `stack`. (Process right after left).\n    d.  If the `node` has a `left` child, push it onto the `stack`. (Process left first).\n5.  Return the `result` array.",
          "examples": [
            {
              "id": "example_tree_traversal_iterative_preorder_1",
              "title": "Iterative Preorder Traversal Implementation",
              "code": "class TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction preorderTraversal(root) {\n  if (!root) return [];\n  \n  const result = [];\n  const stack = [root]; // Initialize stack with the root node\n  \n  while (stack.length > 0) {\n    const node = stack.pop(); // Pop the node to visit\n    result.push(node.value); // Add its value to the result (Root)\n    \n    // Push right child first, so left child is processed before it (LIFO)\n    if (node.right) {\n      stack.push(node.right);\n    }\n    if (node.left) {\n      stack.push(node.left);\n    }\n  }\n  return result;\n}\n\n// Example Tree:\n//        1\n//       / \\n//      2   3\n//     / \\n//    4   5\nconst root = new TreeNode(1);\nroot.left = new TreeNode(2);\nroot.right = new TreeNode(3);\nroot.left.left = new TreeNode(4);\nroot.left.right = new TreeNode(5);\n\nconsole.log(\"Preorder Traversal:\", preorderTraversal(root)); // Expected: [1, 2, 4, 5, 3]\n\nconst emptyRoot = null;\nconsole.log(\"Preorder Traversal (empty tree):\", preorderTraversal(emptyRoot)); // Expected: []",
              "explanation": "This example provides the complete JavaScript implementation for iterative preorder tree traversal. It uses a `TreeNode` class for the tree structure and a `stack` (implemented using a JavaScript array acting as a stack) to manage the nodes to visit. The key insight is to push the right child onto the stack *before* the left child. Because a stack is LIFO, the left child will be popped and processed first, ensuring the Root -> Left -> Right order is maintained.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_tree_traversal_preorder_1",
            "question_tree_traversal_preorder_2",
            "question_tree_traversal_preorder_3",
            "question_tree_traversal_preorder_4"
          ],
          "relatedTasks": [
            "task_tree_traversal_1"
          ],
          "tags": [
            "trees",
            "data-structures",
            "algorithms",
            "stack",
            "traversal",
            "binary-tree"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "data-structures-basics",
            "stack-data-structure",
            "recursion-basics"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "bfs-dfs",
            "binary-search-trees",
            "graph-traversals"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_string_consecutive_char_1",
          "topic": "String Manipulation: Consecutive Characters",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `findMostConsecutiveChar` function. What would be the output for the input string `'abcaadddefffff'`?",
          "answer": "{ char: 'f', count: 5 }",
          "options": [
            "{ char: 'a', count: 2 }",
            "{ char: 'd', count: 3 }",
            "{ char: 'f', count: 5 }",
            "{ char: 'c', count: 1 }"
          ],
          "analysisPoints": [
            "The function tracks `maxCount` and `maxChar` throughout the iteration.",
            "It correctly updates `maxCount` when a longer consecutive sequence is found.",
            "It handles the final sequence check outside the loop, which is crucial if the longest sequence is at the end.",
            "For 'abcaadddefffff': 'a' (1), 'b' (1), 'c' (1), 'aa' (2), 'ddd' (3), 'e' (1), 'fffff' (5). The maximum is 'f' with count 5."
          ],
          "keyConcepts": [
            "String iteration",
            "Consecutive sequence tracking",
            "Edge case handling for string end"
          ],
          "evaluationCriteria": [
            "Ability to trace algorithm execution.",
            "Understanding of comparison logic for maximum count.",
            "Attention to edge cases."
          ],
          "example": "```javascript\nfunction findMostConsecutiveChar(str) {\n  if (!str || str.length === 0) {\n    return { char: '', count: 0 };\n  }\n  let maxChar = str[0];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChar = currentChar;\n      }\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChar = currentChar;\n  }\n  return { char: maxChar, count: maxCount };\n}\nconsole.log(findMostConsecutiveChar('abcaadddefffff')); // { char: 'f', count: 5 }\n```",
          "tags": [
            "string-manipulation",
            "algorithms",
            "mcq"
          ],
          "prerequisites": [
            "string-basics",
            "loops"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_string_consecutive_char_2",
          "topic": "String Manipulation: Consecutive Characters",
          "level": "medium",
          "type": "open",
          "question": "Analyze the time and space complexity of the `findMostConsecutiveChar` function. Justify your answer.",
          "answer": "Time Complexity: O(N), where N is the length of the input string. The function iterates through the string once using a single `for` loop.\nSpace Complexity: O(1). The function uses a constant amount of extra space for variables like `maxChar`, `maxCount`, `currentChar`, and `currentCount`, regardless of the input string's length.",
          "analysisPoints": [
            "**Time Complexity**: The algorithm involves a single pass through the input string. Each character is visited and processed a constant number of times (comparison, increment, assignment). Therefore, the time complexity scales linearly with the length of the string, making it O(N).",
            "**Space Complexity**: The auxiliary space used by the algorithm (variables like `maxChar`, `maxCount`, `currentChar`, `currentCount`) does not depend on the size of the input string. It's a fixed number of variables. Hence, the space complexity is constant, O(1)."
          ],
          "keyConcepts": [
            "Time complexity analysis",
            "Space complexity analysis",
            "Big O notation"
          ],
          "evaluationCriteria": [
            "Accuracy of time complexity analysis.",
            "Accuracy of space complexity analysis.",
            "Clarity of justification."
          ],
          "example": null,
          "tags": [
            "string-manipulation",
            "algorithms",
            "complexity-analysis",
            "open-ended"
          ],
          "prerequisites": [
            "big-o-notation"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_string_consecutive_char_3",
          "topic": "String Manipulation: Consecutive Characters",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary data structure or technique used to find the most consecutive character in a string as shown in the example?",
          "answer": "Iteration with state variables.",
          "analysisPoints": [
            "The solution uses a loop to go through each character.",
            "It maintains variables (state) to keep track of the current consecutive character and its count, as well as the overall maximum."
          ],
          "keyConcepts": [
            "Iteration",
            "State management",
            "Character comparison"
          ],
          "evaluationCriteria": [
            "Quick recall of fundamental algorithm approach."
          ],
          "example": null,
          "tags": [
            "string-manipulation",
            "algorithms",
            "flashcard"
          ],
          "prerequisites": [
            "loops"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_string_consecutive_char_4",
          "topic": "String Manipulation: Consecutive Characters",
          "level": "hard",
          "type": "code",
          "question": "Modify the `findMostConsecutiveChar` function to return an array of all characters that have the maximum consecutive count. If there are multiple characters with the same maximum count, they should all be included in the result array.",
          "answer": "```javascript\nfunction findAllMostConsecutiveChars(str) {\n  if (!str || str.length === 0) {\n    return [];\n  }\n\n  let maxChars = [str[0]];\n  let maxCount = 1;\n  let currentChar = str[0];\n  let currentCount = 1;\n\n  for (let i = 1; i < str.length; i++) {\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChars = [currentChar]; // New max, reset array\n      } else if (currentCount === maxCount) {\n        maxChars.push(currentChar); // Same max, add to array\n      }\n      currentChar = str[i];\n      currentCount = 1;\n    }\n  }\n  \n  // Check for the last character sequence\n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChars = [currentChar];\n  } else if (currentCount === maxCount) {\n    maxChars.push(currentChar);\n  }\n  \n  return maxChars;\n}\n\n// Example Usage:\nconsole.log(findAllMostConsecutiveChars('aaabbbccc')); // ['a', 'b', 'c']\nconsole.log(findAllMostConsecutiveChars('aabbcdddeee')); // ['d', 'e']\nconsole.log(findAllMostConsecutiveChars('bbbaaaaccadd')); // ['a']\n```",
          "analysisPoints": [
            "The key modification is changing `maxChar` from a single character to `maxChars` (an array).",
            "When `currentCount` exceeds `maxCount`, `maxChars` must be reset to contain only the new `currentChar`.",
            "When `currentCount` equals `maxCount`, the `currentChar` should be *added* to `maxChars`.",
            "The logic for the final sequence check remains critical and must incorporate the same comparison for equality."
          ],
          "keyConcepts": [
            "Array manipulation",
            "Handling multiple maximums",
            "Adapting existing algorithms"
          ],
          "evaluationCriteria": [
            "Correctly implementing array logic for multiple results.",
            "Handling edge cases like empty string and single character string.",
            "Maintaining correct comparison logic throughout the loop and final check."
          ],
          "example": "```javascript\n// See answer for example code.\n```",
          "tags": [
            "string-manipulation",
            "algorithms",
            "coding-challenge",
            "arrays"
          ],
          "prerequisites": [
            "string-consecutive-char-theory"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_linked_list_reverse_1",
          "topic": "Linked List Operations: Reversal",
          "level": "medium",
          "type": "open",
          "question": "How would you reverse a linked list iteratively? Describe the role of each pointer used in the process.",
          "answer": "To reverse a linked list iteratively, you typically use three pointers: `prev`, `current`, and `next`.\n\n1.  **Initialize**: `prev` is set to `null` (this will eventually be the new tail, and the new head will point to it). `current` is set to the `head` of the original list.\n2.  **Iterate**: Loop while `current` is not `null`:\n    *   **`next`**: Temporarily store `current.next` in `next`. This is crucial because `current.next` is about to be changed, and we need to preserve the link to the rest of the original list.\n    *   **Reverse Link**: Set `current.next` to `prev`. This changes the direction of the pointer for the `current` node.\n    *   **Advance `prev`**: Move `prev` to `current`. The `current` node (which has just been reversed) becomes the `prev` for the next iteration.\n    *   **Advance `current`**: Move `current` to `next`. This moves to the next node in the original list.\n3.  **Return**: Once the loop finishes (`current` becomes `null`), `prev` will be pointing to the original tail, which is now the new head of the reversed list. Return `prev`.",
          "analysisPoints": [
            "Clear explanation of the three-pointer technique.",
            "Correct sequence of pointer updates within the loop.",
            "Understanding of why `next` temporary pointer is necessary.",
            "Correct identification of the new head."
          ],
          "keyConcepts": [
            "Linked list structure",
            "Pointer manipulation",
            "Iterative algorithm",
            "Time and space complexity (O(N) time, O(1) space)"
          ],
          "evaluationCriteria": [
            "Completeness of the algorithm description.",
            "Accuracy of pointer roles.",
            "Clarity and conciseness."
          ],
          "example": null,
          "tags": [
            "linked-lists",
            "data-structures",
            "algorithms",
            "open-ended"
          ],
          "prerequisites": [
            "linked-list-basics"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_linked_list_reverse_2",
          "topic": "Linked List Operations: Reversal",
          "level": "medium",
          "type": "mcq",
          "question": "In the iterative linked list reversal algorithm, what is the purpose of the `prev` pointer?",
          "answer": "It stores the previously processed node, which becomes the `next` node for the current node after reversal.",
          "options": [
            "It stores the next node in the original list to prevent loss of reference.",
            "It always points to the head of the original list.",
            "It stores the previously processed node, which becomes the `next` node for the current node after reversal.",
            "It is used to count the number of nodes processed so far."
          ],
          "analysisPoints": [
            "`prev` is initialized to `null` because the first node of the original list will become the new head and its `next` should be `null`.",
            "As `current` iterates, `prev` follows, holding the reference to the *already reversed* part of the list.",
            "When `current.next` is set to `prev`, it means `current` now points backward, connecting to the reversed segment."
          ],
          "keyConcepts": [
            "Pointer roles in linked list reversal",
            "State management",
            "Iterative process"
          ],
          "evaluationCriteria": [
            "Understanding of pointer mechanics.",
            "Ability to distinguish roles of different pointers."
          ],
          "example": "```javascript\n// Snippet from reverseLinkedList function\n// ...\n// current.next = prev; // Here, current node's next is set to prev\n// prev = current;     // Then, prev moves to current\n// ...\n```",
          "tags": [
            "linked-lists",
            "data-structures",
            "algorithms",
            "mcq"
          ],
          "prerequisites": [
            "linked-list-basics"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_linked_list_reverse_3",
          "topic": "Linked List Operations: Reversal",
          "level": "hard",
          "type": "code",
          "question": "Implement a **recursive** function to reverse a singly linked list. You should still use the `ListNode` class provided in the theory.",
          "answer": "```javascript\nclass ListNode {\n  constructor(value) {\n    this.value = value;\n    this.next = null;\n  }\n}\n\nfunction reverseLinkedListRecursive(head) {\n  // Base case: If head is null or only one node, it's already reversed\n  if (head === null || head.next === null) {\n    return head;\n  }\n\n  // Recursively reverse the rest of the list\n  // newHead will be the last node of the original list (and new head)\n  const newHead = reverseLinkedListRecursive(head.next);\n\n  // Attach the current head to the end of the reversed sublist\n  // head.next is the second node in the original list.\n  // After recursive call, head.next.next points back to head.\n  head.next.next = head;\n  \n  // Set current head's next to null to break the original forward link\n  // This current head will become the new tail of its reversed sublist\n  head.next = null;\n\n  // Return the new head of the fully reversed list\n  return newHead;\n}\n\n// Example Usage:\nconst head = new ListNode(1);\nhead.next = new ListNode(2);\nhead.next.next = new ListNode(3);\nhead.next.next.next = new ListNode(4);\n\nconsole.log(\"Original list:\");\nlet temp = head;\nlet values = [];\nwhile (temp !== null) { values.push(temp.value); temp = temp.next; }\nconsole.log(values); // [1, 2, 3, 4]\n\nconst newHead = reverseLinkedListRecursive(head);\n\nconsole.log(\"Reversed list (recursive):\");\nlet current = newHead;\nvalues = [];\nwhile (current !== null) { values.push(current.value); current = current.next; }\nconsole.log(values); // [4, 3, 2, 1]\n```",
          "analysisPoints": [
            "The base case handles empty lists or lists with a single node.",
            "The recursive call effectively reverses the 'tail' of the list.",
            "The crucial step is `head.next.next = head;` which reverses the pointer of the node *after* `head` to point back to `head`.",
            "`head.next = null;` is essential to prevent a cycle and to correctly set the new tail of the current sub-problem.",
            "The function returns the new head of the *entire* reversed list, which is the original tail."
          ],
          "keyConcepts": [
            "Recursion",
            "Linked list manipulation",
            "Base cases",
            "Building solution from sub-problems"
          ],
          "evaluationCriteria": [
            "Correct implementation of recursive logic.",
            "Proper handling of base cases.",
            "Prevention of cycles.",
            "Correct return value."
          ],
          "example": "```javascript\n// See answer for example code.\n```",
          "tags": [
            "linked-lists",
            "data-structures",
            "algorithms",
            "recursion",
            "coding-challenge"
          ],
          "prerequisites": [
            "linked-list-basics",
            "recursion-basics"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_linked_list_reverse_4",
          "topic": "Linked List Operations: Reversal",
          "level": "easy",
          "type": "flashcard",
          "question": "What are the three essential pointers typically used in the iterative method to reverse a singly linked list?",
          "answer": "`current`, `prev`, and `next` (or `tempNext`).",
          "analysisPoints": [
            "Each pointer plays a distinct and critical role in the reversal process.",
            "`current` moves through the list, `prev` builds the new reversed list, and `next` temporarily saves the original forward link."
          ],
          "keyConcepts": [
            "Pointer names",
            "Memory management in linked lists"
          ],
          "evaluationCriteria": [
            "Recall of key terms."
          ],
          "example": null,
          "tags": [
            "linked-lists",
            "data-structures",
            "flashcard"
          ],
          "prerequisites": [
            "linked-list-basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_tree_traversal_preorder_1",
          "topic": "Tree Traversal: Iterative Preorder",
          "level": "medium",
          "type": "open",
          "question": "How would you implement a preorder tree traversal without recursion? Explain the role of the data structure used.",
          "answer": "To implement a preorder tree traversal iteratively, you can use a **stack** data structure.\n\n1.  **Initialization**: Create an empty `result` list and an empty `stack`. If the root node is null, return the empty `result` list.\n2.  **Start**: Push the `root` node onto the `stack`.\n3.  **Iteration**: While the `stack` is not empty:\n    *   **Pop**: Pop a node from the top of the `stack`. This node is the current one to be visited.\n    *   **Visit**: Add the `node's value` to the `result` list.\n    *   **Push Children**: Push the `right` child onto the `stack` first, then the `left` child. This order is crucial because a stack is LIFO (Last-In, First-Out), and in preorder, we want to process the left child before the right child. By pushing right then left, when we pop, left will be on top.\n\n**Role of the Stack**: The stack is used to keep track of the nodes that still need to be visited. When we visit a node, we push its children onto the stack to ensure they are processed later. The LIFO nature of the stack ensures that when we pop, we retrieve the most recently added child first, which facilitates the correct traversal order (left child before right child for preorder, after the parent has been visited).",
          "analysisPoints": [
            "Clear explanation of the algorithm steps.",
            "Correct identification of the stack as the core data structure.",
            "Accurate description of how the stack's LIFO property helps achieve the preorder sequence.",
            "Distinction between recursive and iterative approaches."
          ],
          "keyConcepts": [
            "Tree traversal algorithms",
            "Stack data structure",
            "Iterative vs. recursive solutions",
            "Preorder traversal order (Root-Left-Right)"
          ],
          "evaluationCriteria": [
            "Correctness of algorithm steps.",
            "Depth of explanation for stack's role.",
            "Clarity and precision of language."
          ],
          "example": null,
          "tags": [
            "trees",
            "data-structures",
            "algorithms",
            "stack",
            "open-ended"
          ],
          "prerequisites": [
            "tree-basics",
            "stack-data-structure"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_tree_traversal_preorder_2",
          "topic": "Tree Traversal: Preorder",
          "level": "medium",
          "type": "mcq",
          "question": "Given the following binary tree:\n```\n      A\n     / \\\n    B   C\n   / \\n  D   E\n```\nWhat is the correct preorder traversal sequence for this tree?",
          "answer": "A, B, D, E, C",
          "options": [
            "D, B, E, A, C",
            "A, B, D, E, C",
            "D, E, B, C, A",
            "A, C, B, D, E"
          ],
          "analysisPoints": [
            "Preorder traversal visits the root first, then the left subtree, then the right subtree.",
            "For 'A', visit A, then left (subtree B), then right (subtree C).",
            "For 'B', visit B, then left (D), then right (E).",
            "For 'C', visit C (it has no children).",
            "Combining these: A -> B -> D -> E -> C."
          ],
          "keyConcepts": [
            "Preorder traversal definition",
            "Applying traversal rules"
          ],
          "evaluationCriteria": [
            "Correct application of preorder traversal rules.",
            "Ability to trace tree traversals."
          ],
          "example": "```javascript\n// Tree definition as in the theory block.\n// const root = new TreeNode('A');\n// root.left = new TreeNode('B');\n// root.right = new TreeNode('C');\n// root.left.left = new TreeNode('D');\n// root.left.right = new TreeNode('E');\n// console.log(preorderTraversal(root)); // Should output ['A', 'B', 'D', 'E', 'C']\n```",
          "tags": [
            "trees",
            "data-structures",
            "algorithms",
            "mcq"
          ],
          "prerequisites": [
            "tree-basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_tree_traversal_preorder_3",
          "topic": "Tree Traversal: Iterative Preorder",
          "level": "medium",
          "type": "code",
          "question": "The provided markdown content includes a partial `preorderTraversal` function. Complete the function to correctly perform an iterative preorder traversal using a stack. The `TreeNode` class is also provided.",
          "answer": "```javascript\nclass TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction preorderTraversal(root) {\n  if (!root) return [];\n  \n  const result = [];\n  const stack = [root];\n  \n  while (stack.length > 0) {\n    const node = stack.pop();\n    result.push(node.value);\n    \n    // Push right child first, so left child is processed next (LIFO)\n    if (node.right) {\n      stack.push(node.right);\n    }\n    if (node.left) {\n      stack.push(node.left);\n    }\n  }\n  return result;\n}\n\n// Example Tree:\n//        1\n//       / \\\n//      2   3\n//     / \\n//    4   5\nconst root = new TreeNode(1);\nroot.left = new TreeNode(2);\nroot.right = new TreeNode(3);\nroot.left.left = new TreeNode(4);\nroot.left.right = new TreeNode(5);\n\nconsole.log(\"Preorder Traversal:\", preorderTraversal(root)); // Expected: [1, 2, 4, 5, 3]\n\nconst emptyRoot = null;\nconsole.log(\"Preorder Traversal (empty tree):\", preorderTraversal(emptyRoot)); // Expected: []\n```",
          "analysisPoints": [
            "Correct initialization of the stack with the root.",
            "Proper use of `stack.pop()` to get the current node.",
            "Correctly adding the node's value to the `result` array.",
            "Crucial order of pushing children: right child *then* left child to ensure left is processed first due to LIFO."
          ],
          "keyConcepts": [
            "Stack operations (`push`, `pop`, `length`)",
            "Iterative tree traversal logic",
            "Preorder traversal rules",
            "Handling null nodes"
          ],
          "evaluationCriteria": [
            "Functional correctness of the completed code.",
            "Adherence to iterative approach using a stack.",
            "Correct preorder output for various tree structures."
          ],
          "example": "```javascript\n// See answer for example code.\n```",
          "tags": [
            "trees",
            "data-structures",
            "algorithms",
            "stack",
            "coding-challenge"
          ],
          "prerequisites": [
            "tree-traversal-iterative-preorder-theory"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_tree_traversal_preorder_4",
          "topic": "Tree Traversal: Iterative",
          "level": "easy",
          "type": "flashcard",
          "question": "Which data structure is commonly used to implement iterative tree traversals (like preorder, inorder, postorder) and why?",
          "answer": "A stack. Because its Last-In, First-Out (LIFO) property allows us to manage the order of nodes to visit by pushing children and processing the desired next node first.",
          "analysisPoints": [
            "Understanding that stacks are fundamental for iterative depth-first traversals.",
            "Connecting the LIFO property to how nodes are ordered for visitation."
          ],
          "keyConcepts": [
            "Stack data structure",
            "LIFO principle",
            "Tree traversal mechanisms"
          ],
          "evaluationCriteria": [
            "Quick recall of essential data structure.",
            "Understanding of its role."
          ],
          "example": null,
          "tags": [
            "trees",
            "data-structures",
            "stack",
            "flashcard"
          ],
          "prerequisites": [
            "stack-data-structure"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        }
      ],
      "tasks": [
        {
          "id": "task_string_consecutive_char_1",
          "title": "Analyze and Summarize String Consecutive Character Properties",
          "description": "\nImplement a function `getStringConsecutiveAnalysis(str)` that takes a string and returns an object containing:\n\n1.  `mostConsecutiveChar`: The character with the longest consecutive sequence.\n2.  `maxConsecutiveCount`: The length of that longest sequence.\n3.  `allMaxChars`: An array of all characters that achieve this `maxConsecutiveCount` (if multiple characters have the same max count).\n4.  `firstCharSequence`: The first character in the string and its consecutive count.\n5.  `totalDistinctChars`: The total count of unique characters in the string.\n\nYour solution should be efficient (O(N) time complexity) and handle edge cases like empty strings or strings with a single character gracefully.\n",
          "difficulty": "medium",
          "startingCode": "function getStringConsecutiveAnalysis(str) {\n  if (!str || str.length === 0) {\n    return {\n      mostConsecutiveChar: '',\n      maxConsecutiveCount: 0,\n      allMaxChars: [],\n      firstCharSequence: { char: '', count: 0 },\n      totalDistinctChars: 0\n    };\n  }\n\n  let maxChar = str[0];\n  let maxCount = 1;\n  let allMaxChars = [str[0]];\n  \n  let currentChar = str[0];\n  let currentCount = 1;\n\n  let firstCharSequence = { char: str[0], count: 0 }; // To be updated properly\n  let distinctChars = new Set();\n\n  // TODO: Implement the core logic here\n  // You will need to iterate through the string and update the variables.\n  // Remember to handle the last sequence check.\n\n  return {\n    mostConsecutiveChar: maxChar,\n    maxConsecutiveCount: maxCount,\n    allMaxChars: allMaxChars,\n    firstCharSequence: firstCharSequence,\n    totalDistinctChars: distinctChars.size\n  };\n}\n",
          "solutionCode": "function getStringConsecutiveAnalysis(str) {\n  if (!str || str.length === 0) {\n    return {\n      mostConsecutiveChar: '',\n      maxConsecutiveCount: 0,\n      allMaxChars: [],\n      firstCharSequence: { char: '', count: 0 },\n      totalDistinctChars: 0\n    };\n  }\n\n  let maxChar = str[0];\n  let maxCount = 1;\n  let allMaxChars = [str[0]];\n  \n  let currentChar = str[0];\n  let currentCount = 1;\n\n  let firstCharSequence = { char: str[0], count: 1 }; // First char always has at least 1 count\n  let distinctChars = new Set();\n  distinctChars.add(str[0]);\n\n  for (let i = 1; i < str.length; i++) {\n    distinctChars.add(str[i]);\n\n    if (str[i] === currentChar) {\n      currentCount++;\n    } else {\n      // Check and update for max consecutive\n      if (currentCount > maxCount) {\n        maxCount = currentCount;\n        maxChars = [currentChar];\n      } else if (currentCount === maxCount) {\n        allMaxChars.push(currentChar);\n      }\n      \n      // Reset for new sequence\n      currentChar = str[i];\n      currentCount = 1;\n    }\n    \n    // Update firstCharSequence if it's still processing the very first sequence\n    if (i < str.length && str[i] === firstCharSequence.char && firstCharSequence.count === i) {\n        firstCharSequence.count++;\n    } else if (i === 1 && str[i] !== firstCharSequence.char) {\n        // If the second char is different, the first sequence is just 1\n        // This handles cases like 'abc', where firstCharSequence.count would be wrongly 2 for 'a' if not handled.\n        // No, this needs to be simpler: first sequence count is set once if the char changes. \n        // Or more simply: just check it after the loop if the first char was isolated.\n    }\n  }\n  \n  // Final check for the last character sequence\n  if (currentCount > maxCount) {\n    maxCount = currentCount;\n    maxChars = [currentChar];\n  } else if (currentCount === maxCount) {\n    allMaxChars.push(currentChar);\n  }\n\n  // Re-calculate firstCharSequence more reliably\n  let firstSeqChar = str[0];\n  let firstSeqCount = 1;\n  for(let i = 1; i < str.length; i++) {\n      if (str[i] === firstSeqChar) {\n          firstSeqCount++;\n      } else {\n          break; // First sequence ended\n      }\n  }\n  firstCharSequence = { char: firstSeqChar, count: firstSeqCount };\n\n  return {\n    mostConsecutiveChar: maxChar,\n    maxConsecutiveCount: maxCount,\n    allMaxChars: Array.from(new Set(allMaxChars)), // Remove duplicates for allMaxChars\n    firstCharSequence: firstCharSequence,\n    totalDistinctChars: distinctChars.size\n  };\n}\n",
          "testCases": [
            "getStringConsecutiveAnalysis('') should return { mostConsecutiveChar: '', maxConsecutiveCount: 0, allMaxChars: [], firstCharSequence: { char: '', count: 0 }, totalDistinctChars: 0 }",
            "getStringConsecutiveAnalysis('a') should return { mostConsecutiveChar: 'a', maxConsecutiveCount: 1, allMaxChars: ['a'], firstCharSequence: { char: 'a', count: 1 }, totalDistinctChars: 1 }",
            "getStringConsecutiveAnalysis('bbbaaaaccadd') should return { mostConsecutiveChar: 'a', maxConsecutiveCount: 4, allMaxChars: ['a'], firstCharSequence: { char: 'b', count: 3 }, totalDistinctChars: 4 }",
            "getStringConsecutiveAnalysis('aabbcddddeee') should return { mostConsecutiveChar: 'd', maxConsecutiveCount: 4, allMaxChars: ['d', 'e'], firstCharSequence: { char: 'a', count: 2 }, totalDistinctChars: 5 }",
            "getStringConsecutiveAnalysis('zyxw') should return { mostConsecutiveChar: 'z', maxConsecutiveCount: 1, allMaxChars: ['z', 'y', 'x', 'w'], firstCharSequence: { char: 'z', count: 1 }, totalDistinctChars: 4 }",
            "getStringConsecutiveAnalysis('qqqwww') should return { mostConsecutiveChar: 'q', maxConsecutiveCount: 3, allMaxChars: ['q', 'w'], firstCharSequence: { char: 'q', count: 3 }, totalDistinctChars: 2 }"
          ],
          "hints": [
            "Remember to initialize your variables correctly before the loop, especially for single-character strings.",
            "The logic for `allMaxChars` needs to handle two scenarios: finding a *new* maximum and finding an *equal* maximum.",
            "A `Set` can be very useful for tracking `totalDistinctChars` efficiently.",
            "The `firstCharSequence` can be determined by a separate, simple loop or by modifying your main loop with an `if` condition to break after the first sequence is counted."
          ],
          "tags": [
            "string-manipulation",
            "algorithms",
            "data-analysis",
            "javascript"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "string-consecutive-char-theory",
            "arrays",
            "sets"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "sliding-window",
            "character-frequency"
          ]
        },
        {
          "id": "task_linked_list_reverse_1",
          "title": "Reverse Linked List and Find Middle Element",
          "description": "\nImplement two functions for a singly linked list:\n\n1.  `reverseLinkedList(head)`: Takes the head of a singly linked list and returns the new head of the reversed list using the iterative three-pointer approach.\n2.  `findMiddle(head)`: Takes the head of a singly linked list and returns the value of the middle node. If the list has an even number of nodes, return the value of the second middle node (e.g., for 1->2->3->4, return 3).\n\nFinally, demonstrate how to reverse a given linked list and then find the middle element of the *reversed* list.\n",
          "difficulty": "medium",
          "startingCode": "class ListNode {\n  constructor(value) {\n    this.value = value;\n    this.next = null;\n  }\n}\n\nfunction reverseLinkedList(head) {\n  // TODO: Implement iterative linked list reversal\n  return null;\n}\n\nfunction findMiddle(head) {\n  // TODO: Implement finding the middle element (slow/fast pointers)\n  return null;\n}\n\n// Example Usage (provided for testing):\n// Create list: 1 -> 2 -> 3 -> 4 -> 5 -> 6\n// const head = new ListNode(1);\n// head.next = new ListNode(2);\n// head.next.next = new ListNode(3);\n// head.next.next.next = new ListNode(4);\n// head.next.next.next.next = new ListNode(5);\n// head.next.next.next.next.next = new ListNode(6);\n\n// const reversedHead = reverseLinkedList(head);\n// const middleOfReversed = findMiddle(reversedHead);\n// console.log(middleOfReversed); // Expected: 4\n",
          "solutionCode": "class ListNode {\n  constructor(value) {\n    this.value = value;\n    this.next = null;\n  }\n}\n\nfunction reverseLinkedList(head) {\n  let current = head;\n  let prev = null;\n  let next = null;\n  \n  while (current !== null) {\n    next = current.next;\n    current.next = prev;\n    prev = current;\n    current = next;\n  }\n  \n  return prev;\n}\n\nfunction findMiddle(head) {\n  if (!head) return null;\n  let slow = head;\n  let fast = head;\n\n  while (fast !== null && fast.next !== null) {\n    slow = slow.next;\n    fast = fast.next.next;\n  }\n  return slow.value;\n}\n\n// Example Usage:\n// Create list: 1 -> 2 -> 3 -> 4 -> 5 -> 6\nconst head = new ListNode(1);\nhead.next = new ListNode(2);\nhead.next.next = new ListNode(3);\nhead.next.next.next = new ListNode(4);\nhead.next.next.next.next = new ListNode(5);\nhead.next.next.next.next.next = new ListNode(6);\n\nconsole.log(\"Original List:\");\nlet temp = head;\nlet values = [];\nwhile (temp !== null) { values.push(temp.value); temp = temp.next; }\nconsole.log(values); // [1, 2, 3, 4, 5, 6]\n\nconst reversedHead = reverseLinkedList(head);\n\nconsole.log(\"Reversed List:\");\ntemp = reversedHead;\nvalues = [];\nwhile (temp !== null) { values.push(temp.value); temp = temp.next; }\nconsole.log(values); // [6, 5, 4, 3, 2, 1]\n\nconst middleOfReversed = findMiddle(reversedHead);\nconsole.log(\"Middle of Reversed List:\", middleOfReversed); // Expected: 4\n\n// Test with odd length list\nconst headOdd = new ListNode(10);\nheadOdd.next = new ListNode(20);\nheadOdd.next.next = new ListNode(30);\nconst reversedOdd = reverseLinkedList(headOdd);\nconst middleOfReversedOdd = findMiddle(reversedOdd);\nconsole.log(\"Middle of Reversed Odd List:\", middleOfReversedOdd); // Expected: 20\n",
          "testCases": [
            "reverseLinkedList(null) should return null.",
            "reverseLinkedList(new ListNode(1)) should return a list with value 1.",
            "reverseLinkedList(1->2->3) should return 3->2->1.",
            "findMiddle(null) should return null.",
            "findMiddle(new ListNode(1)) should return 1.",
            "findMiddle(1->2->3) should return 2.",
            "findMiddle(1->2->3->4) should return 3 (second middle).",
            "Demonstrate `findMiddle` on the output of `reverseLinkedList` for a list like 1->2->3->4->5->6. Expected output for middle of reversed list: 4."
          ],
          "hints": [
            "For `reverseLinkedList`, remember the three-pointer technique (`prev`, `current`, `next`).",
            "For `findMiddle`, consider the 'slow and fast pointer' (or 'tortoise and hare') approach to traverse the list in a single pass.",
            "Pay attention to the definition of 'middle' for even-length lists in `findMiddle`."
          ],
          "tags": [
            "linked-lists",
            "data-structures",
            "algorithms",
            "pointers"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "linked-list-reverse-iterative-theory"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "floyds-cycle-finding",
            "merge-two-sorted-lists"
          ]
        },
        {
          "id": "task_tree_traversal_1",
          "title": "Implement All Iterative Tree Traversals",
          "description": "\nImplement three functions for a binary tree using an iterative approach (without recursion). Each function should return an array of node values in the specified traversal order.\n\n1.  `preorderTraversalIterative(root)`: Root -> Left -> Right\n2.  `inorderTraversalIterative(root)`: Left -> Root -> Right\n3.  `postorderTraversalIterative(root)`: Left -> Right -> Root\n\nUse the `TreeNode` class provided below. Consider edge cases like an empty tree.\n",
          "difficulty": "hard",
          "startingCode": "class TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction preorderTraversalIterative(root) {\n  // TODO: Implement preorder iteratively\n  return [];\n}\n\nfunction inorderTraversalIterative(root) {\n  // TODO: Implement inorder iteratively\n  return [];\n}\n\nfunction postorderTraversalIterative(root) {\n  // TODO: Implement postorder iteratively\n  return [];\n}\n\n// Example Tree:\n//        1\n//       / \\\n//      2   3\n//     / \\n//    4   5\n// const root = new TreeNode(1);\n// root.left = new TreeNode(2);\n// root.right = new TreeNode(3);\n// root.left.left = new TreeNode(4);\n// root.left.right = new TreeNode(5);\n\n// console.log(\"Preorder:\", preorderTraversalIterative(root));\n// console.log(\"Inorder:\", inorderTraversalIterative(root));\n// console.log(\"Postorder:\", postorderTraversalIterative(root));\n",
          "solutionCode": "class TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction preorderTraversalIterative(root) {\n  if (!root) return [];\n  const result = [];\n  const stack = [root];\n  while (stack.length > 0) {\n    const node = stack.pop();\n    result.push(node.value);\n    if (node.right) {\n      stack.push(node.right);\n    }\n    if (node.left) {\n      stack.push(node.left);\n    }\n  }\n  return result;\n}\n\nfunction inorderTraversalIterative(root) {\n  const result = [];\n  const stack = [];\n  let current = root;\n  while (current !== null || stack.length > 0) {\n    while (current !== null) {\n      stack.push(current);\n      current = current.left;\n    }\n    current = stack.pop();\n    result.push(current.value);\n    current = current.right;\n  }\n  return result;\n}\n\nfunction postorderTraversalIterative(root) {\n  if (!root) return [];\n  const result = [];\n  const stack1 = [root]; // Main stack\n  const stack2 = [];    // Output stack (used for reversing order)\n\n  while (stack1.length > 0) {\n    const node = stack1.pop();\n    stack2.push(node.value); // Push to output stack\n\n    if (node.left) {\n      stack1.push(node.left);\n    }\n    if (node.right) {\n      stack1.push(node.right);\n    }\n  }\n  // Pop from stack2 to get in correct Postorder (Left-Right-Root)\n  while(stack2.length > 0) {\n      result.push(stack2.pop());\n  }\n  return result;\n}\n\n// Example Tree:\n//        1\n//       / \\\n//      2   3\n//     / \\n//    4   5\nconst root = new TreeNode(1);\nroot.left = new TreeNode(2);\nroot.right = new TreeNode(3);\nroot.left.left = new TreeNode(4);\nroot.left.right = new TreeNode(5);\n\nconsole.log(\"Preorder:\", preorderTraversalIterative(root));    // Expected: [1, 2, 4, 5, 3]\nconsole.log(\"Inorder:\", inorderTraversalIterative(root));      // Expected: [4, 2, 5, 1, 3]\nconsole.log(\"Postorder:\", postorderTraversalIterative(root));  // Expected: [4, 5, 2, 3, 1]\n\nconst emptyRoot = null;\nconsole.log(\"Preorder (empty):\", preorderTraversalIterative(emptyRoot)); // []\nconsole.log(\"Inorder (empty):\", inorderTraversalIterative(emptyRoot));   // []\nconsole.log(\"Postorder (empty):\", postorderTraversalIterative(emptyRoot)); // []\n",
          "testCases": [
            "preorderTraversalIterative(null) should return [].",
            "inorderTraversalIterative(null) should return [].",
            "postorderTraversalIterative(null) should return [].",
            "For a simple tree (1->2, 1->3), test all three traversals and verify output.",
            "For the provided example tree (1, 2, 3, 4, 5), `preorderTraversalIterative` should return `[1, 2, 4, 5, 3]`.",
            "For the provided example tree, `inorderTraversalIterative` should return `[4, 2, 5, 1, 3]`.",
            "For the provided example tree, `postorderTraversalIterative` should return `[4, 5, 2, 3, 1]`.",
            "Test with a tree that only has left children (e.g., 1->2->3) for all traversals.",
            "Test with a tree that only has right children (e.g., 1->2->3) for all traversals."
          ],
          "hints": [
            "All iterative traversals use a stack. The main difference lies in when you `push` children and when you `pop` and `visit` nodes.",
            "For Inorder, you typically traverse left as far as possible, pushing nodes onto the stack, then pop, visit, and move to the right.",
            "For Postorder, a common iterative trick involves using two stacks, or one stack and keeping track of the previously visited node to determine if a right child needs processing."
          ],
          "tags": [
            "trees",
            "data-structures",
            "algorithms",
            "stack",
            "traversal"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "tree-traversal-iterative-preorder-theory",
            "stack-data-structure"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "breadth-first-search",
            "binary-search-tree-operations"
          ]
        }
      ]
    }
  },
  {
    "id": "c0998467-3109-4f04-b332-06ee7ec8d2da",
    "startLine": 16100,
    "endLine": 16199,
    "processedDate": "2025-06-17T15:18:02.337Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_tree_preorder_traversal",
          "title": "Tree Traversal: Pre-order (Iterative)",
          "content": "Tree traversal is the process of visiting each node in a tree data structure exactly once. Pre-order traversal is a depth-first traversal strategy that visits the root node first, then recursively traverses the left subtree, and finally recursively traverses the right subtree. This order is commonly used to create a copy of the tree or to obtain a prefix expression of an expression tree.\n\nWhile pre-order traversal can be implemented recursively very naturally, an iterative approach is often preferred in certain scenarios (e.g., to avoid stack overflow for very deep trees or for better performance control).\n\n## Iterative Pre-order Traversal using a Stack\n\nThe iterative approach for pre-order traversal uses a stack data structure to keep track of nodes to visit. The general steps are:\n\n1.  Initialize an empty result list and an empty stack.\n2.  If the root is null, return the empty result list.\n3.  Push the root node onto the stack.\n4.  While the stack is not empty:\n    a.  Pop a node from the top of the stack. This is the `current` node.\n    b.  Add the `current` node's value to the result list.\n    c.  Push the `current` node's right child onto the stack (if it exists). This is pushed first because a stack is LIFO, so the right child will be processed *after* the left child.\n    d.  Push the `current` node's left child onto the stack (if it exists). This is pushed second, ensuring it's on top and processed next.\n5.  Return the result list.\n\nThis sequence ensures that the root is processed first, then its left child (and its subtree), and then its right child (and its subtree), mimicking the pre-order logic.",
          "examples": [
            {
              "id": "example_tree_preorder_1",
              "title": "Basic Iterative Pre-order Traversal",
              "code": "class TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction preorderTraversal(root) {\n  const result = [];\n  const stack = [];\n\n  if (!root) {\n    return result;\n  }\n\n  stack.push(root);\n\n  while (stack.length > 0) {\n    // Pop the top node from the stack\n    const current = stack.pop();\n\n    // Process the current node (add to result)\n    result.push(current.value);\n\n    // Push right child first (to process left child first since it's a stack)\n    if (current.right) {\n      stack.push(current.right);\n    }\n\n    // Push left child\n    if (current.left) {\n      stack.push(current.left);\n    }\n  }\n\n  return result;\n}\n\n// Example Usage:\nconst root = new TreeNode(1);\nroot.left = new TreeNode(2);\nroot.right = new TreeNode(3);\nroot.left.left = new TreeNode(4);\nroot.left.right = new TreeNode(5);\n\nconsole.log(preorderTraversal(root)); // Expected output: [1, 2, 4, 5, 3]",
              "explanation": "This example defines a `TreeNode` class and the `preorderTraversal` function which performs an iterative pre-order traversal. It uses a stack to manage the nodes. The key insight is pushing the right child before the left child, so that the left child is popped and processed first, adhering to the 'Root, Left, Right' order of pre-order traversal.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_tree_preorder_1",
            "question_tree_preorder_2",
            "question_tree_preorder_3",
            "question_tree_preorder_4",
            "question_tree_preorder_5"
          ],
          "relatedTasks": [
            "task_tree_traversal_implementations",
            "task_tree_serialization"
          ],
          "tags": [
            "data-structures",
            "trees",
            "traversal",
            "algorithms",
            "stack",
            "interview-prep"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "data_structures_basic",
            "stack_data_structure"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "binary_search_trees",
            "graph_traversal_dfs"
          ]
        },
        {
          "id": "theory_object_flattening",
          "title": "Object Operations: Flattening Deeply Nested Objects",
          "content": "Flattening a deeply nested object involves transforming an object with hierarchical structure into a single-level object, where keys represent the path to the original values. This is particularly useful for tasks like preparing data for forms, logging, serializing to specific formats, or simplifying data access.\n\n## Approach: Recursion with Dot Notation Concatenation\n\nThe most common way to flatten a nested object is using a recursive function that iterates through the object's keys. For each key:\n\n1.  **Construct the new key:** If a `prefix` (representing the path from the root) is provided, append the current key using dot notation (e.g., `prefix.key`). Otherwise, the current key is the new key.\n2.  **Check for nested objects:** If the value associated with the current key is itself an object (and not `null` and not an array, as arrays are usually treated as leaf values or handled specially):\n    a.  Recursively call the flattening function on this nested object, passing the `newKey` as the prefix.\n    b.  Merge the results of this recursive call into the main result object.\n3.  **Handle leaf values:** If the value is not a nested object, it's a leaf value. Add it directly to the result object with the `newKey`.\n\n`Object.keys()`, `Array.prototype.reduce()`, and `Object.assign()` (or spread syntax `{...result, ...flattenedNestedObject}`) are powerful JavaScript tools that facilitate this process.",
          "examples": [
            {
              "id": "example_object_flattening_1",
              "title": "Basic Object Flattening",
              "code": "function flattenObject(obj, prefix = '') {\n  return Object.keys(obj).reduce((result, key) => {\n    const newKey = prefix ? `${prefix}.${key}` : key;\n    \n    if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {\n      // Recursively flatten nested objects\n      Object.assign(result, flattenObject(obj[key], newKey));\n    } else {\n      // Add leaf values to the result\n      result[newKey] = obj[key];\n    }\n    \n    return result;\n  }, {});\n}\n\n// Example Usage:\nconst nestedObject = {\n  level1: {\n    level2: {\n      level3: {\n        value: 'deep value',\n        another: 'another deep value'\n      }\n    },\n    value: 'not so deep'\n  },\n  topLevel: 'top level value',\n  arr: [1, 2, { a: 3 }],\n  empty: null\n};\n\nconst flattened = flattenObject(nestedObject);\nconsole.log(flattened);\n/* Expected Result:\n{\n  'level1.level2.level3.value': 'deep value',\n  'level1.level2.level3.another': 'another deep value',\n  'level1.value': 'not so deep',\n  'topLevel': 'top level value',\n  'arr': [1, 2, { a: 3 }],\n  'empty': null\n}\n*/",
              "explanation": "This function demonstrates a common recursive pattern for flattening objects. It iterates over the keys of the input object. If a value is another object (but not an array or null), it recursively calls itself to flatten that sub-object. The `prefix` argument builds the dot-separated path for each key. Non-object values (including arrays and null) are added directly.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_object_flatten_1",
            "question_object_flatten_2",
            "question_object_flatten_3",
            "question_object_flatten_4",
            "question_object_flatten_5"
          ],
          "relatedTasks": [
            "task_flatten_object_enhanced",
            "task_unflatten_object"
          ],
          "tags": [
            "objects",
            "recursion",
            "data-transformation",
            "javascript",
            "interview-prep"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_objects",
            "recursion_basics",
            "array_reduce"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "form_data_processing",
            "api_serialization"
          ]
        },
        {
          "id": "theory_system_design_parking_lot",
          "title": "System Design: Parking Lot Management System",
          "content": "Designing a parking lot system involves managing available parking spaces, handling vehicle entry and exit, and potentially supporting various vehicle types, pricing models, and query functionalities. It's a common system design interview question that tests your ability to think about data structures, algorithms, and system architecture.\n\n## Core Components and Functionalities:\n\n1.  **Parking Lot:** Represents the physical parking area with a defined capacity.\n2.  **Parking Slots:** Individual spaces within the parking lot. Each slot might have properties like `isOccupied`, `vehicleType` allowed, and potentially a `vehicle` object occupying it.\n3.  **Vehicle:** Objects representing cars, motorcycles, or buses, with properties like `licensePlate`, `entryTime`, `type`.\n4.  **Operations:**\n    *   `parkVehicle(vehicle)`: Assigns a vehicle to an available slot, marks the slot as occupied, and records entry time.\n    *   `unparkVehicle(licensePlate)`: Frees up a slot occupied by a specific vehicle, calculates parking fees, and updates availability.\n    *   `getAvailableSlots(vehicleType)`: Returns the number of or specific IDs of available slots for a given vehicle type.\n    *   `getOccupiedSlots()`: Lists currently occupied slots.\n\n## Data Structures for Efficiency:\n\n*   **Array/List for Slots:** An array can represent the `N` slots, where `slots[i]` holds `null` if empty or a `Vehicle` object if occupied. This allows for direct access by slot number.\n*   **Set for Available Slots:** A `Set` (or a `Min-Heap` if closest/lowest slot number is desired) can efficiently track `availableSlots` for O(1) average-time addition and deletion of slot numbers. Categorizing by vehicle type (e.g., `Map<VehicleType, Set<SlotId>>`) would enhance this.\n*   **Map for Occupied Vehicles:** A `Map<LicensePlate, SlotId>` can quickly locate a vehicle's slot given its license plate for `unparkVehicle` operations. A `Map<SlotId, VehicleObject>` could store the actual vehicle object.\n\n## Key Design Considerations:\n\n*   **Scalability:** How to handle multiple parking lots, or a very large parking lot.\n*   **Concurrency:** How to manage multiple vehicles trying to park/unpark simultaneously.\n*   **Pricing Model:** Flat rate, hourly, tiered pricing based on duration or vehicle type.\n*   **Ticket System:** Generating and validating tickets.\n*   **Vehicle Types:** Different types of vehicles might require different slot sizes or have different pricing.\n*   **Reporting:** Historical data, occupancy rates.",
          "examples": [
            {
              "id": "example_parking_lot_system_1",
              "title": "Basic ParkingLot Class Structure",
              "code": "class Vehicle {\n  constructor(licensePlate, type) {\n    this.licensePlate = licensePlate;\n    this.type = type; // e.g., 'car', 'motorcycle', 'bus'\n    this.entryTime = Date.now();\n  }\n}\n\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null); // null means empty, else stores Vehicle object\n    this.availableSlots = new Set(Array.from({ length: capacity }, (_, i) => i)); // Stores indices of available slots\n    this.occupiedVehiclesMap = new Map(); // Map: licensePlate -> slotIndex\n    this.slotToVehicleMap = new Map(); // Map: slotIndex -> Vehicle object\n  }\n\n  _findAvailableSlot() {\n    if (this.availableSlots.size === 0) {\n      return -1; // No slots available\n    }\n    // For simplicity, just take the first available slot. \n    // In real-world, might need logic for specific types or nearest slot.\n    const slotIndex = this.availableSlots.values().next().value;\n    return slotIndex;\n  }\n\n  parkVehicle(vehicle) {\n    if (this.occupiedVehiclesMap.has(vehicle.licensePlate)) {\n      console.log(`Vehicle ${vehicle.licensePlate} is already parked.`);\n      return null;\n    }\n    const slotIndex = this._findAvailableSlot();\n    if (slotIndex === -1) {\n      console.log('Sorry, parking lot is full.');\n      return null;\n    }\n\n    this.slots[slotIndex] = vehicle; // Assign vehicle to slot\n    this.availableSlots.delete(slotIndex); // Remove from available set\n    this.occupiedVehiclesMap.set(vehicle.licensePlate, slotIndex); // Map plate to slot\n    this.slotToVehicleMap.set(slotIndex, vehicle); // Map slot to vehicle\n\n    console.log(`Vehicle ${vehicle.licensePlate} (${vehicle.type}) parked at slot ${slotIndex + 1}.`);\n    return slotIndex;\n  }\n\n  unparkVehicle(licensePlate) {\n    if (!this.occupiedVehiclesMap.has(licensePlate)) {\n      console.log(`Vehicle ${licensePlate} not found in parking lot.`);\n      return null;\n    }\n\n    const slotIndex = this.occupiedVehiclesMap.get(licensePlate);\n    const vehicle = this.slotToVehicleMap.get(slotIndex);\n\n    this.slots[slotIndex] = null; // Free up slot\n    this.availableSlots.add(slotIndex); // Add back to available set\n    this.occupiedVehiclesMap.delete(licensePlate); // Remove from maps\n    this.slotToVehicleMap.delete(slotIndex);\n\n    const duration = (Date.now() - vehicle.entryTime) / (1000 * 60 * 60); // duration in hours\n    const fee = Math.ceil(duration) * 5; // Example: $5 per hour\n\n    console.log(`Vehicle ${licensePlate} unparked from slot ${slotIndex + 1}. Duration: ${duration.toFixed(2)} hours. Fee: $${fee}.`);\n    return { vehicle, fee };\n  }\n\n  getAvailableSlotsCount() {\n    return this.availableSlots.size;\n  }\n\n  getOccupiedSlotsInfo() {\n    return Array.from(this.slotToVehicleMap.entries()).map(([slot, vehicle]) => `Slot ${slot + 1}: ${vehicle.licensePlate} (${vehicle.type})`);\n  }\n}\n\n// Example Usage:\nconst lot = new ParkingLot(5);\nconsole.log(`Initial available slots: ${lot.getAvailableSlotsCount()}`); // 5\n\nconst car1 = new Vehicle('ABC-123', 'car');\nlot.parkVehicle(car1);\n\nconst motorcycle1 = new Vehicle('MOTO-456', 'motorcycle');\nlot.parkVehicle(motorcycle1);\n\nconsole.log(`Available slots: ${lot.getAvailableSlotsCount()}`); // 3\nconsole.log('Occupied slots:', lot.getOccupiedSlotsInfo());\n\n// Simulate time passing\nsetTimeout(() => {\n  lot.unparkVehicle('ABC-123');\n  console.log(`Available slots after unparking: ${lot.getAvailableSlotsCount()}`); // 4\n}, 1000);",
              "explanation": "This example provides a foundational `ParkingLot` class. It demonstrates the use of an array (`slots`) to represent physical slots, a `Set` (`availableSlots`) for efficient tracking of free slots, and `Maps` (`occupiedVehiclesMap`, `slotToVehicleMap`) for quick lookups by license plate or slot index. It includes basic `parkVehicle` and `unparkVehicle` methods with simple fee calculation.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_parking_lot_1",
            "question_parking_lot_2",
            "question_parking_lot_3",
            "question_parking_lot_4",
            "question_parking_lot_5"
          ],
          "relatedTasks": [
            "task_parking_lot_full_design",
            "task_parking_lot_fee_calculator"
          ],
          "tags": [
            "system-design",
            "object-oriented-programming",
            "data-structures",
            "algorithms",
            "interview-prep"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "object_oriented_programming",
            "data_structures_basic",
            "maps_sets"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "large_scale_applications",
            "backend_system_design"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_tree_preorder_1",
          "topic": "Tree Traversal: Pre-order",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the order of visiting nodes in a pre-order tree traversal?",
          "answer": "Root -> Left Subtree -> Right Subtree",
          "options": [],
          "analysisPoints": [
            "Tests basic knowledge of tree traversal orders.",
            "Highlights the 'Root-first' nature of pre-order traversal."
          ],
          "keyConcepts": [
            "pre-order traversal",
            "tree traversal",
            "root node",
            "left subtree",
            "right subtree"
          ],
          "evaluationCriteria": [
            "Ability to recall definitions"
          ],
          "example": "Pre-order traversal is often used to create a prefix expression of an expression tree.",
          "tags": [
            "trees",
            "traversal",
            "flashcard"
          ],
          "prerequisites": [
            "tree_data_structure"
          ],
          "complexity": 2,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_tree_preorder_2",
          "topic": "Tree Traversal: Pre-order (Iterative)",
          "level": "medium",
          "type": "mcq",
          "question": "Given the following binary tree:\n```\n    A\n   / \\\n  B   C\n / \\\nD   E\n```\nWhich of the following sequences represents a pre-order traversal of the tree?",
          "answer": "A, B, D, E, C",
          "options": [
            "D, B, E, A, C",
            "A, B, D, E, C",
            "D, E, B, C, A",
            "A, C, B, D, E"
          ],
          "analysisPoints": [
            "Tests understanding of pre-order traversal sequence.",
            "Requires applying the 'Root, Left, Right' rule.",
            "Distinguishes from in-order and post-order sequences."
          ],
          "keyConcepts": [
            "pre-order traversal",
            "binary tree",
            "traversal sequence"
          ],
          "evaluationCriteria": [
            "Ability to apply traversal rules to a given tree"
          ],
          "example": "A pre-order traversal starts at the root, then explores the entire left subtree, and finally the entire right subtree. For node B, its left child D is visited before its right child E.",
          "tags": [
            "trees",
            "traversal",
            "mcq"
          ],
          "prerequisites": [
            "tree_data_structure",
            "pre_order_traversal_concept"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_tree_preorder_3",
          "topic": "Tree Traversal: Iterative Pre-order",
          "level": "hard",
          "type": "code",
          "question": "Implement the `inorderTraversal` function iteratively for a binary tree. You are given the `TreeNode` class definition. The function should return an array of node values in in-order sequence.\n\n```javascript\nclass TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction inorderTraversal(root) {\n  // Your implementation here\n}\n\n// Example Usage:\nconst root = new TreeNode(1);\nroot.right = new TreeNode(2);\nroot.right.left = new TreeNode(3);\n\n// inorderTraversal(root) should return [1, 3, 2]\n```",
          "answer": "// Solution for inorderTraversal iteratively\nclass TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\nfunction inorderTraversal(root) {\n  const result = [];\n  const stack = [];\n  let current = root;\n\n  while (current !== null || stack.length > 0) {\n    // Traverse to the leftmost node, pushing nodes onto stack along the way\n    while (current !== null) {\n      stack.push(current);\n      current = current.left;\n    }\n    \n    // Pop a node from stack (this is the leftmost unvisited node)\n    current = stack.pop();\n    result.push(current.value);\n\n    // Move to the right child to process its subtree\n    current = current.right;\n  }\n\n  return result;\n}",
          "options": [],
          "analysisPoints": [
            "Tests ability to adapt iterative traversal logic for different orders.",
            "Requires correct use of stack and handling of `null` nodes.",
            "Assesses understanding of the 'Left, Root, Right' order for in-order."
          ],
          "keyConcepts": [
            "in-order traversal",
            "iterative traversal",
            "stack",
            "binary tree"
          ],
          "evaluationCriteria": [
            "Correctness of the algorithm.",
            "Efficiency (time and space complexity).",
            "Handling edge cases like empty tree or single-node tree."
          ],
          "example": "In-order traversal, especially iteratively, is more complex than pre-order because the root is visited in between its left and right subtrees. This requires keeping track of visited nodes and those yet to be fully processed on the stack.",
          "tags": [
            "trees",
            "traversal",
            "algorithms",
            "coding-challenge"
          ],
          "prerequisites": [
            "tree_data_structure",
            "stack_data_structure",
            "pre_order_traversal_iterative"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_tree_preorder_4",
          "topic": "Tree Traversal: DFS vs BFS",
          "level": "medium",
          "type": "open",
          "question": "Compare and contrast Depth-First Search (DFS) traversals (pre-order, in-order, post-order) with Breadth-First Search (BFS) (level-order traversal) in terms of their typical use cases, time complexity, and space complexity for a binary tree. When would you prefer one over the other?",
          "answer": "Depth-First Search (DFS) traversals (pre-order, in-order, post-order) explore as far as possible along each branch before backtracking. They typically use a stack (iterative) or recursion (implicit stack).\n\n*   **Pre-order (Root, Left, Right):** Used for creating a copy of the tree, prefix expressions.\n*   **In-order (Left, Root, Right):** Used for sorted output in Binary Search Trees, infix expressions.\n*   **Post-order (Left, Right, Root):** Used for deleting a tree, postfix expressions.\n\n**Time Complexity (DFS):** O(N), where N is the number of nodes, as each node is visited once.\n**Space Complexity (DFS):** O(H), where H is the height of the tree, due to the stack (or recursion call stack). In the worst case (skewed tree), H can be N.\n\nBreadth-First Search (BFS), or level-order traversal, explores all nodes at the current depth level before moving on to nodes at the next depth level. It typically uses a queue.\n\n*   **Level-order:** Used for finding the shortest path in an unweighted graph, processing nodes level by level (e.g., UI elements in a tree structure).\n\n**Time Complexity (BFS):** O(N), where N is the number of nodes, as each node is visited once.\n**Space Complexity (BFS):** O(W), where W is the maximum width of the tree (max number of nodes at any level). In the worst case (complete binary tree), W can be N/2, so O(N).\n\n**When to prefer:**\n*   **DFS:** Preferred for problems that require exploring all paths from a source to a target (e.g., finding a specific node deep in the tree), or if space is a major concern (for balanced trees where H << N). Also, when the order of processing (pre, in, post) is crucial for the problem's logic.\n*   **BFS:** Preferred for finding the shortest path in an unweighted tree/graph, or when processing nodes level by level is required (e.g., finding all nodes at a certain depth, or for social network 'friends of friends' problems).",
          "options": [],
          "analysisPoints": [
            "Requires understanding of both DFS and BFS principles.",
            "Ability to articulate typical use cases for each.",
            "Correctly identifies and compares time and space complexities.",
            "Provides insights into when to choose one over the other based on problem constraints."
          ],
          "keyConcepts": [
            "DFS",
            "BFS",
            "pre-order",
            "in-order",
            "post-order",
            "level-order",
            "time complexity",
            "space complexity",
            "stack",
            "queue"
          ],
          "evaluationCriteria": [
            "Comprehensive comparison.",
            "Accuracy of complexity analysis.",
            "Relevance of use cases.",
            "Clear explanation of decision factors."
          ],
          "example": "While both DFS and BFS visit all nodes in O(N) time, their memory consumption can differ significantly depending on the tree's shape. A very deep, narrow tree favors BFS in terms of worst-case space, while a wide, shallow tree favors DFS.",
          "tags": [
            "trees",
            "traversal",
            "algorithms",
            "complexity",
            "system-design"
          ],
          "prerequisites": [
            "tree_traversal_basics",
            "stack_data_structure",
            "queue_data_structure",
            "big_o_notation"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_tree_preorder_5",
          "topic": "Tree Traversal",
          "level": "easy",
          "type": "flashcard",
          "question": "What data structure is commonly used to implement iterative Depth-First Search (DFS) traversals like pre-order, in-order, or post-order?",
          "answer": "A Stack",
          "options": [],
          "analysisPoints": [
            "Tests recall of fundamental data structures in algorithm implementations.",
            "Connects the concept of DFS with its typical iterative implementation."
          ],
          "keyConcepts": [
            "DFS",
            "iterative traversal",
            "stack"
          ],
          "evaluationCriteria": [
            "Direct recall of knowledge"
          ],
          "example": "The LIFO (Last-In, First-Out) nature of a stack naturally supports the 'go deep first' strategy of DFS.",
          "tags": [
            "data-structures",
            "trees",
            "algorithms",
            "flashcard"
          ],
          "prerequisites": [
            "stack_data_structure",
            "tree_traversal_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_object_flatten_1",
          "topic": "Object Flattening",
          "level": "medium",
          "type": "mcq",
          "question": "Given the `flattenObject` function:\n```javascript\nfunction flattenObject(obj, prefix = '') {\n  return Object.keys(obj).reduce((result, key) => {\n    const newKey = prefix ? `${prefix}.${key}` : key;\n    \n    if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {\n      Object.assign(result, flattenObject(obj[key], newKey));\n    } else {\n      result[newKey] = obj[key];\n    }\n    \n    return result;\n  }, {});\n}\n\nconst input = {\n  a: 1,\n  b: {\n    c: 2,\n    d: {\n      e: 3\n    }\n  },\n  f: 'test'\n};\n\n```\nWhat will be the output of `flattenObject(input)`?",
          "answer": "{\n  'a': 1,\n  'b.c': 2,\n  'b.d.e': 3,\n  'f': 'test'\n}",
          "options": [
            "{\n  'a': 1,\n  'b': { 'c': 2, 'd': { 'e': 3 } },\n  'f': 'test'\n}",
            "{\n  'a': 1,\n  'b.c': 2,\n  'b.d.e': 3,\n  'f': 'test'\n}",
            "{\n  'a': 1,\n  'c': 2,\n  'e': 3,\n  'f': 'test'\n}",
            "{\n  'a': 1,\n  'b_c': 2,\n  'b_d_e': 3,\n  'f': 'test'\n}"
          ],
          "analysisPoints": [
            "Tests understanding of recursive object flattening.",
            "Verifies correct key concatenation using dot notation.",
            "Ensures correct handling of nested objects versus primitive values."
          ],
          "keyConcepts": [
            "object flattening",
            "recursion",
            "dot notation",
            "Object.keys",
            "Array.prototype.reduce"
          ],
          "evaluationCriteria": [
            "Ability to trace recursive function execution",
            "Correctly predict output of data transformation"
          ],
          "example": "The function recursively descends into `b`, then into `b.d`, building the full path 'b.d.e' for the value 3. `a` and `f` are top-level and retain their original keys.",
          "tags": [
            "objects",
            "recursion",
            "data-transformation",
            "mcq"
          ],
          "prerequisites": [
            "javascript_objects",
            "recursion_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_object_flatten_2",
          "topic": "Object Flattening",
          "level": "hard",
          "type": "code",
          "question": "Modify the `flattenObject` function to handle arrays. If a value is an array, its elements should be flattened with bracket notation (e.g., `parent.array[0]`, `parent.array[1].nested`).\n\n```javascript\nfunction flattenObject(obj, prefix = '') {\n  return Object.keys(obj).reduce((result, key) => {\n    const newKey = prefix ? `${prefix}.${key}` : key;\n    \n    if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {\n      Object.assign(result, flattenObject(obj[key], newKey));\n    } else {\n      result[newKey] = obj[key];\n    }\n    \n    return result;\n  }, {});\n}\n\n// Example Input:\nconst nestedObjectWithArray = {\n  name: 'Test',\n  details: {\n    items: [\n      { id: 1, value: 'A' },\n      { id: 2, value: 'B' }\n    ],\n    tags: ['red', 'blue']\n  },\n  data: [10, 20]\n};\n\n// Expected Output:\n/*\n{\n  'name': 'Test',\n  'details.items[0].id': 1,\n  'details.items[0].value': 'A',\n  'details.items[1].id': 2,\n  'details.items[1].value': 'B',\n  'details.tags[0]': 'red',\n  'details.tags[1]': 'blue',\n  'data[0]': 10,\n  'data[1]': 20\n}\n*/\n```",
          "answer": "```javascript\nfunction flattenObject(obj, prefix = '') {\n  return Object.keys(obj).reduce((result, key) => {\n    const currentVal = obj[key];\n    const newKey = prefix ? `${prefix}.${key}` : key;\n\n    if (typeof currentVal === 'object' && currentVal !== null) {\n      if (Array.isArray(currentVal)) {\n        // Handle arrays by iterating over elements\n        currentVal.forEach((item, index) => {\n          // Recursively flatten array elements, using bracket notation for key\n          const arrayElementKey = `${newKey}[${index}]`;\n          if (typeof item === 'object' && item !== null) {\n            Object.assign(result, flattenObject(item, arrayElementKey));\n          } else {\n            result[arrayElementKey] = item;\n          }\n        });\n      } else {\n        // Handle nested objects\n        Object.assign(result, flattenObject(currentVal, newKey));\n      }\n    } else {\n      // Add leaf values (primitives, null, undefined)\n      result[newKey] = currentVal;\n    }\n    \n    return result;\n  }, {});\n}\n```",
          "options": [],
          "analysisPoints": [
            "Tests ability to extend recursive logic to handle different data types (arrays).",
            "Requires careful construction of keys using bracket notation for array elements.",
            "Assesses understanding of how to recursively flatten elements within an array if they are objects."
          ],
          "keyConcepts": [
            "object flattening",
            "recursion",
            "array iteration",
            "bracket notation",
            "Object.assign"
          ],
          "evaluationCriteria": [
            "Correct handling of array types.",
            "Accurate generation of flattened keys for array elements.",
            "Preservation of existing object flattening logic.",
            "Edge case handling (empty arrays, arrays of primitives/objects)."
          ],
          "example": "The key challenge is to distinguish between objects and arrays, and for arrays, to iterate over their elements and apply the flattening logic, dynamically generating keys like `parent.array[index]`.",
          "tags": [
            "objects",
            "recursion",
            "data-transformation",
            "coding-challenge",
            "arrays"
          ],
          "prerequisites": [
            "object_flattening_basic",
            "javascript_arrays"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_object_flatten_3",
          "topic": "Object Flattening",
          "level": "medium",
          "type": "open",
          "question": "What are the advantages and disadvantages of flattening an object into a single-level structure using dot notation (e.g., `parent.child.value`)?",
          "answer": "Advantages:\n1.  **Simplified Access:** All values become directly accessible without multiple levels of property access (e.g., `obj['parent.child.value']` instead of `obj.parent.child.value`). This can simplify certain algorithms or data processing.\n2.  **Serialization/Deserialization:** Easily maps to formats that prefer flat structures, like query parameters (URLSearchParams), form data, or some NoSQL database entries.\n3.  **Data Uniformity:** Provides a consistent structure, which can be beneficial for validation, filtering, or display in tabular formats.\n4.  **Debugging/Logging:** Can make it easier to log or inspect all values in a complex object at a glance.\n\nDisadvantages:\n1.  **Loss of Hierarchy:** The original semantic structure and relationships between nested objects are lost, which might make the data harder to reason about or process if the hierarchy is important.\n2.  **Key Name Collisions:** If original keys contain dots, or if generated flattened keys collide with existing keys or paths, it can lead to unexpected behavior or require complex escaping strategies.\n3.  **Increased Key Length:** Keys can become very long, potentially consuming more memory or making the flattened object less readable.\n4.  **Reconstruction Complexity:** Un-flattening the object back to its original nested structure can be more complex than flattening it.",
          "options": [],
          "analysisPoints": [
            "Requires critical thinking about data representation.",
            "Identifies practical benefits and drawbacks of a common data transformation.",
            "Discusses implications for data integrity and usability."
          ],
          "keyConcepts": [
            "object flattening",
            "data structure design",
            "pros and cons",
            "data serialization"
          ],
          "evaluationCriteria": [
            "Balanced perspective on advantages and disadvantages.",
            "Clear and concise explanations for each point.",
            "Identification of relevant real-world implications."
          ],
          "example": "Consider a UI where user input from a deeply nested form is sent to an API. Flattening the object simplifies preparing the data for a `FormData` object, but if the API expects a nested JSON structure, it would need to be un-flattened on the backend.",
          "tags": [
            "objects",
            "data-transformation",
            "system-design",
            "open-ended"
          ],
          "prerequisites": [
            "javascript_objects",
            "data_structures_basic"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_object_flatten_4",
          "topic": "Object Flattening",
          "level": "easy",
          "type": "flashcard",
          "question": "What JavaScript method is commonly used to iterate over the own enumerable properties of an object and is useful in object flattening functions?",
          "answer": "`Object.keys()`",
          "options": [],
          "analysisPoints": [
            "Tests knowledge of fundamental JavaScript object methods.",
            "Connects a specific method to its practical application in object processing."
          ],
          "keyConcepts": [
            "Object.keys()",
            "object iteration",
            "enumerable properties"
          ],
          "evaluationCriteria": [
            "Direct recall of knowledge"
          ],
          "example": "`Object.keys(obj)` returns an array of a given object's own enumerable string-keyed property names.",
          "tags": [
            "javascript",
            "objects",
            "flashcard"
          ],
          "prerequisites": [
            "javascript_objects_basics"
          ],
          "complexity": 2,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_object_flatten_5",
          "topic": "Object Flattening",
          "level": "hard",
          "type": "open",
          "question": "Design an `unflattenObject` function that takes a flattened object (e.g., `{'a.b.c': 1, 'd.e': 2}`) and reconstructs its original nested structure. Consider edge cases like invalid paths or arrays (if you've handled them in flattening).",
          "answer": "```javascript\nfunction unflattenObject(flattenedObj) {\n  const result = {};\n\n  for (const key in flattenedObj) {\n    const value = flattenedObj[key];\n    const parts = key.split('.');\n    let current = result;\n\n    for (let i = 0; i < parts.length; i++) {\n      let part = parts[i];\n      \n      // Check for array notation like 'key[index]'\n      const arrayMatch = part.match(/(.*)\\[(\\d+)\\]$/);\n      if (arrayMatch) {\n        const arrayKey = arrayMatch[1];\n        const index = parseInt(arrayMatch[2], 10);\n\n        if (!current[arrayKey]) {\n          current[arrayKey] = [];\n        }\n        if (!Array.isArray(current[arrayKey])) {\n          // Handle collision: if arrayKey already exists and is not an array\n          console.warn(`Path collision: '${arrayKey}' is not an array but key '${key}' expects it to be.`);\n          // Decide how to handle: overwrite, skip, or throw error\n          current[arrayKey] = []; // Force to array\n        }\n        \n        // If this is the last part, assign the value\n        if (i === parts.length - 1) {\n          current[arrayKey][index] = value;\n        } else {\n          // If not last part, ensure nested object/array exists\n          if (!current[arrayKey][index] || typeof current[arrayKey][index] !== 'object' || Array.isArray(current[arrayKey][index])) {\n            current[arrayKey][index] = {};\n          }\n          current = current[arrayKey][index];\n        }\n\n      } else { // Regular object key\n        if (i === parts.length - 1) {\n          current[part] = value;\n        } else {\n          if (!current[part] || typeof current[part] !== 'object' || Array.isArray(current[part])) {\n            current[part] = {};\n          }\n          current = current[part];\n        }\n      }\n    }\n  }\n  return result;\n}\n\n// Example Usage:\nconst flattened = {\n  'level1.level2.level3.value': 'deep value',\n  'level1.level2.level3.another': 'another deep value',\n  'level1.value': 'not so deep',\n  'topLevel': 'top level value',\n  'details.items[0].id': 1,\n  'details.items[0].value': 'A',\n  'details.items[1].id': 2,\n  'details.items[1].value': 'B',\n  'details.tags[0]': 'red',\n  'details.tags[1]': 'blue',\n  'data[0]': 10,\n  'data[1]': 20\n};\n\nconst unflattened = unflattenObject(flattened);\nconsole.log(JSON.stringify(unflattened, null, 2));\n/* Expected Output:\n{\n  \"level1\": {\n    \"level2\": {\n      \"level3\": {\n        \"value\": \"deep value\",\n        \"another\": \"another deep value\"\n      }\n    },\n    \"value\": \"not so deep\"\n  },\n  \"topLevel\": \"top level value\",\n  \"details\": {\n    \"items\": [\n      {\n        \"id\": 1,\n        \"value\": \"A\"\n      },\n      {\n        \"id\": 2,\n        \"value\": \"B\"\n      }\n    ],\n    \"tags\": [\n      \"red\",\n      \"blue\"\n    ]\n  },\n  \"data\": [\n    10,\n    20\n  ]\n}\n*/\n```",
          "options": [],
          "analysisPoints": [
            "Tests ability to reverse a complex data transformation.",
            "Requires parsing complex string keys (dot notation and bracket notation).",
            "Challenges handling dynamic object/array creation during reconstruction.",
            "Forces consideration of potential path collisions or type mismatches."
          ],
          "keyConcepts": [
            "object reconstruction",
            "string parsing",
            "dynamic object creation",
            "array handling",
            "edge cases"
          ],
          "evaluationCriteria": [
            "Correctness of nested object/array reconstruction.",
            "Robustness in handling various key formats.",
            "Efficiency of the reconstruction process.",
            "Consideration of potential errors or warnings for malformed flattened objects."
          ],
          "example": "The core logic involves splitting each flattened key by '.' and then iteratively traversing/creating the nested structure. Special handling is needed for array elements indicated by `[index]` in the key.",
          "tags": [
            "objects",
            "data-transformation",
            "algorithms",
            "coding-challenge"
          ],
          "prerequisites": [
            "object_flattening_basic",
            "javascript_strings",
            "javascript_objects_advanced"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_parking_lot_1",
          "topic": "System Design: Parking Lot",
          "level": "medium",
          "type": "mcq",
          "question": "In a parking lot system, which data structure would be most efficient for quickly finding and removing an available parking slot, ensuring O(1) average time complexity for these operations?",
          "answer": "Set",
          "options": [
            "Array (linear scan)",
            "Linked List",
            "Set",
            "Queue"
          ],
          "analysisPoints": [
            "Tests knowledge of data structure efficiency for specific operations.",
            "Highlights the O(1) average time complexity of Sets for add/delete/check existence.",
            "Differentiates from other structures that would involve linear time for finding/removing by value (Array, Linked List) or only offer specific order (Queue)."
          ],
          "keyConcepts": [
            "data structures",
            "Set",
            "time complexity",
            "parking lot system",
            "available slots"
          ],
          "evaluationCriteria": [
            "Correct selection of optimal data structure",
            "Understanding of Big O notation"
          ],
          "example": "A Set allows for very fast `add()`, `delete()`, and `has()` operations on average. If we store the indices of available slots in a Set, we can quickly pick one (e.g., `set.values().next().value`) and remove it.",
          "tags": [
            "system-design",
            "data-structures",
            "mcq"
          ],
          "prerequisites": [
            "data_structures_basic",
            "big_o_notation"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_parking_lot_2",
          "topic": "System Design: Parking Lot",
          "level": "hard",
          "type": "open",
          "question": "How would you extend the basic `ParkingLot` design to support different types of vehicles (e.g., motorcycles, cars, buses) where each type might require a different size or type of parking slot, and potentially have different hourly rates?",
          "answer": "To support different vehicle types and varying slot requirements/rates, the `ParkingLot` system would need the following extensions:\n\n1.  **Vehicle Type Enum/Constant:** Define vehicle types (e.g., `VehicleType.MOTORCYCLE`, `VehicleType.CAR`, `VehicleType.BUS`).\n\n2.  **Slot Types:** Introduce `Slot` objects or separate arrays/maps for different slot types. Each `Slot` object could have properties like `id`, `size`, `allowedVehicleTypes`, `isOccupied`.\n    *   **Motorcycle Slot:** Smallest, can only fit motorcycles.\n    *   **Compact Slot:** Fits cars and motorcycles.\n    *   **Large Slot:** Fits cars, motorcycles, and potentially small buses.\n    *   **Bus Slot:** Largest, specifically for buses, possibly allowing smaller vehicles if no specific compact/large slots are available (policy dependent).\n\n3.  **Tiered Slot Management:** Instead of a single `availableSlots` set, use a `Map<VehicleType, Set<SlotIndex>>` or `Map<SlotType, Set<SlotIndex>>` to track available slots for each category. For example:\n    ```javascript\n    this.availableSlotsByType = {\n      [VehicleType.MOTORCYCLE]: new Set(),\n      [VehicleType.CAR]: new Set(), // This would be for compact/standard car slots\n      [VehicleType.BUS]: new Set()\n    };\n    // Or more granular: Map<SlotType, Set<SlotIndex>>\n    this.availableSlotsByPhysicalType = {\n      'motorcycle_only': new Set(),\n      'compact': new Set(),\n      'large': new Set(),\n      'bus_specific': new Set()\n    };\n    ```\n\n4.  **`parkVehicle` Logic Enhancement:**\n    *   When a vehicle arrives, first try to find the most specific slot for its type.\n    *   If no specific slot is available, check if it can fit into larger, more general slots (e.g., a motorcycle can park in a car slot if no motorcycle-specific slot is free).\n    *   This might involve a prioritized search order (e.g., motorcycle -> compact -> large for a motorcycle).\n\n5.  **Pricing Model:**\n    *   Introduce a `PricingStrategy` class or a simple `Map<VehicleType, Rate>`.\n    *   `Map<VehicleType, { hourlyRate: number, firstHourRate?: number, dailyRate?: number }>`. This map would define the specific pricing rules for each vehicle type.\n    *   The `unparkVehicle` method would then look up the appropriate rate based on `vehicle.type` and `duration`.\n\n6.  **Ticket System (Optional but good):** Generate a unique ticket ID on entry, store vehicle info and entry time. On exit, validate the ticket. This separates the physical slot management from the transaction.\n\nThis approach allows for flexible allocation, efficient lookup of suitable slots, and dynamic pricing based on vehicle characteristics.",
          "options": [],
          "analysisPoints": [
            "Tests ability to handle complexity and extend a basic design.",
            "Requires designing for different data types and their interactions.",
            "Demonstrates understanding of flexible system architecture (e.g., using enums, mapping strategies).",
            "Considers practical scenarios like slot hierarchy and pricing variations."
          ],
          "keyConcepts": [
            "system design",
            "object-oriented programming",
            "vehicle types",
            "slot management",
            "pricing models",
            "data modeling"
          ],
          "evaluationCriteria": [
            "Completeness of proposed solution.",
            "Clarity of data structure choices.",
            "Logical flow of operational changes (e.g., `parkVehicle` logic).",
            "Consideration of edge cases and scalability."
          ],
          "example": "A concrete example could be: a `Motorcycle` object attempts to park. The system first checks `availableSlotsByType.MOTORCYCLE`. If empty, it checks `availableSlotsByType.CAR` or `availableSlotsByPhysicalType.compact`, and so on, until a suitable (and available) slot is found or rejected.",
          "tags": [
            "system-design",
            "object-oriented-programming",
            "scalability",
            "open-ended"
          ],
          "prerequisites": [
            "object_oriented_programming",
            "data_structures_advanced"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "expert"
        },
        {
          "id": "question_parking_lot_3",
          "topic": "System Design: Parking Lot",
          "level": "medium",
          "type": "code",
          "question": "Add a method `getOccupiedSlotsByVehicleType(type)` to the `ParkingLot` class that returns an array of slot numbers currently occupied by vehicles of a specific `type`. If no type is provided, it should return all occupied slots.\n\n```javascript\nclass Vehicle {\n  constructor(licensePlate, type) {\n    this.licensePlate = licensePlate;\n    this.type = type; // e.g., 'car', 'motorcycle', 'bus'\n    this.entryTime = Date.now();\n  }\n}\n\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null); \n    this.availableSlots = new Set(Array.from({ length: capacity }, (_, i) => i)); \n    this.occupiedVehiclesMap = new Map(); \n    this.slotToVehicleMap = new Map(); \n  }\n\n  _findAvailableSlot() {\n    if (this.availableSlots.size === 0) {\n      return -1;\n    }\n    const slotIndex = this.availableSlots.values().next().value;\n    return slotIndex;\n  }\n\n  parkVehicle(vehicle) {\n    if (this.occupiedVehiclesMap.has(vehicle.licensePlate)) {\n      console.log(`Vehicle ${vehicle.licensePlate} is already parked.`);\n      return null;\n    }\n    const slotIndex = this._findAvailableSlot();\n    if (slotIndex === -1) {\n      console.log('Sorry, parking lot is full.');\n      return null;\n    }\n\n    this.slots[slotIndex] = vehicle;\n    this.availableSlots.delete(slotIndex);\n    this.occupiedVehiclesMap.set(vehicle.licensePlate, slotIndex);\n    this.slotToVehicleMap.set(slotIndex, vehicle);\n\n    console.log(`Vehicle ${vehicle.licensePlate} (${vehicle.type}) parked at slot ${slotIndex + 1}.`);\n    return slotIndex;\n  }\n\n  unparkVehicle(licensePlate) {\n    if (!this.occupiedVehiclesMap.has(licensePlate)) {\n      console.log(`Vehicle ${licensePlate} not found in parking lot.`);\n      return null;\n    }\n\n    const slotIndex = this.occupiedVehiclesMap.get(licensePlate);\n    const vehicle = this.slotToVehicleMap.get(slotIndex);\n\n    this.slots[slotIndex] = null;\n    this.availableSlots.add(slotIndex);\n    this.occupiedVehiclesMap.delete(licensePlate);\n    this.slotToVehicleMap.delete(slotIndex);\n\n    const duration = (Date.now() - vehicle.entryTime) / (1000 * 60 * 60);\n    const fee = Math.ceil(duration) * 5;\n\n    console.log(`Vehicle ${licensePlate} unparked from slot ${slotIndex + 1}. Duration: ${duration.toFixed(2)} hours. Fee: $${fee}.`);\n    return { vehicle, fee };\n  }\n\n  getAvailableSlotsCount() {\n    return this.availableSlots.size;\n  }\n\n  getOccupiedSlotsInfo() {\n    return Array.from(this.slotToVehicleMap.entries()).map(([slot, vehicle]) => `Slot ${slot + 1}: ${vehicle.licensePlate} (${vehicle.type})`);\n  }\n}\n\n// Expected Usage:\n// const lot = new ParkingLot(5);\n// lot.parkVehicle(new Vehicle('C1', 'car'));\n// lot.parkVehicle(new Vehicle('M1', 'motorcycle'));\n// lot.parkVehicle(new Vehicle('C2', 'car'));\n// console.log(lot.getOccupiedSlotsByVehicleType('car')); // Should return [0, 2] (or 1-based [1, 3])\n// console.log(lot.getOccupiedSlotsByVehicleType('motorcycle')); // Should return [1] (or 1-based [2])\n// console.log(lot.getOccupiedSlotsByVehicleType()); // Should return [0, 1, 2] (or 1-based [1, 2, 3])\n```",
          "answer": "```javascript\nclass Vehicle {\n  constructor(licensePlate, type) {\n    this.licensePlate = licensePlate;\n    this.type = type; // e.g., 'car', 'motorcycle', 'bus'\n    this.entryTime = Date.now();\n  }\n}\n\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null); \n    this.availableSlots = new Set(Array.from({ length: capacity }, (_, i) => i)); \n    this.occupiedVehiclesMap = new Map(); // licensePlate -> slotIndex\n    this.slotToVehicleMap = new Map(); // slotIndex -> Vehicle object\n  }\n\n  _findAvailableSlot() {\n    if (this.availableSlots.size === 0) {\n      return -1;\n    }\n    const slotIndex = this.availableSlots.values().next().value;\n    return slotIndex;\n  }\n\n  parkVehicle(vehicle) {\n    if (this.occupiedVehiclesMap.has(vehicle.licensePlate)) {\n      console.log(`Vehicle ${vehicle.licensePlate} is already parked.`);\n      return null;\n    }\n    const slotIndex = this._findAvailableSlot();\n    if (slotIndex === -1) {\n      console.log('Sorry, parking lot is full.');\n      return null;\n    }\n\n    this.slots[slotIndex] = vehicle;\n    this.availableSlots.delete(slotIndex);\n    this.occupiedVehiclesMap.set(vehicle.licensePlate, slotIndex);\n    this.slotToVehicleMap.set(slotIndex, vehicle);\n\n    console.log(`Vehicle ${vehicle.licensePlate} (${vehicle.type}) parked at slot ${slotIndex + 1}.`);\n    return slotIndex;\n  }\n\n  unparkVehicle(licensePlate) {\n    if (!this.occupiedVehiclesMap.has(licensePlate)) {\n      console.log(`Vehicle ${licensePlate} not found in parking lot.`);\n      return null;\n    }\n\n    const slotIndex = this.occupiedVehiclesMap.get(licensePlate);\n    const vehicle = this.slotToVehicleMap.get(slotIndex);\n\n    this.slots[slotIndex] = null;\n    this.availableSlots.add(slotIndex);\n    this.occupiedVehiclesMap.delete(licensePlate);\n    this.slotToVehicleMap.delete(slotIndex);\n\n    const duration = (Date.now() - vehicle.entryTime) / (1000 * 60 * 60);\n    const fee = Math.ceil(duration) * 5;\n\n    console.log(`Vehicle ${licensePlate} unparked from slot ${slotIndex + 1}. Duration: ${duration.toFixed(2)} hours. Fee: $${fee}.`);\n    return { vehicle, fee };\n  }\n\n  getAvailableSlotsCount() {\n    return this.availableSlots.size;\n  }\n\n  getOccupiedSlotsInfo() {\n    return Array.from(this.slotToVehicleMap.entries()).map(([slot, vehicle]) => `Slot ${slot + 1}: ${vehicle.licensePlate} (${vehicle.type})`);\n  }\n\n  getOccupiedSlotsByVehicleType(type = null) {\n    const occupiedSlots = [];\n    for (const [slotIndex, vehicle] of this.slotToVehicleMap.entries()) {\n      if (type === null || vehicle.type === type) {\n        occupiedSlots.push(slotIndex);\n      }\n    }\n    return occupiedSlots.sort((a, b) => a - b); // Return sorted indices for consistent output\n  }\n}\n```",
          "options": [],
          "analysisPoints": [
            "Tests ability to iterate through `Map` entries efficiently.",
            "Requires conditional filtering based on an optional parameter.",
            "Demonstrates practical use of stored vehicle data.",
            "Ensures correct return format (array of slot indices)."
          ],
          "keyConcepts": [
            "object-oriented-programming",
            "Map iteration",
            "conditional logic",
            "data filtering"
          ],
          "evaluationCriteria": [
            "Correct implementation of filtering logic.",
            "Efficient iteration over occupied vehicles.",
            "Handling of the optional `type` parameter.",
            "Returning the correct data type and format."
          ],
          "example": "The method iterates through `this.slotToVehicleMap`, which stores `slotIndex -> Vehicle` mappings. For each entry, it checks if `type` is null (meaning all types are requested) or if the vehicle's type matches the requested type. The `slotIndex` is then added to the result array.",
          "tags": [
            "system-design",
            "object-oriented-programming",
            "data-querying",
            "coding-challenge"
          ],
          "prerequisites": [
            "javascript_classes",
            "javascript_maps"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_parking_lot_4",
          "topic": "System Design: Parking Lot",
          "level": "easy",
          "type": "flashcard",
          "question": "What is a key piece of information that MUST be recorded when a vehicle enters a parking lot to correctly calculate its parking fee upon exit?",
          "answer": "Entry Time",
          "options": [],
          "analysisPoints": [
            "Tests understanding of fundamental requirements for billing systems.",
            "Highlights the importance of timestamping events in system design."
          ],
          "keyConcepts": [
            "parking lot",
            "billing",
            "entry time",
            "data capture"
          ],
          "evaluationCriteria": [
            "Direct recall of crucial system design elements"
          ],
          "example": "Without the entry time, calculating the duration a vehicle was parked would be impossible, making accurate fee calculation unfeasible.",
          "tags": [
            "system-design",
            "flashcard"
          ],
          "prerequisites": [
            "basic_system_design_concepts"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_parking_lot_5",
          "topic": "System Design: Parking Lot",
          "level": "medium",
          "type": "mcq",
          "question": "When designing a parking lot system, which of the following is NOT a typical concern for the `parkVehicle` operation itself (assuming a single-threaded environment)?",
          "answer": "Calculating the parking fee.",
          "options": [
            "Finding an available slot.",
            "Marking the slot as occupied.",
            "Recording the vehicle's entry time.",
            "Calculating the parking fee."
          ],
          "analysisPoints": [
            "Tests understanding of responsibilities of different system components/operations.",
            "Distinguishes between entry-time operations and exit-time operations.",
            "Emphasizes that fees are usually calculated upon *exit*."
          ],
          "keyConcepts": [
            "parking lot",
            "parkVehicle",
            "unparkVehicle",
            "system responsibilities"
          ],
          "evaluationCriteria": [
            "Ability to identify correct operational scope",
            "Understanding of functional decomposition"
          ],
          "example": "The `parkVehicle` operation's primary role is to assign a vehicle to a slot and record its arrival. Fee calculation is logically part of the `unparkVehicle` process when the vehicle leaves.",
          "tags": [
            "system-design",
            "object-oriented-programming",
            "mcq"
          ],
          "prerequisites": [
            "system_design_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_tree_traversal_implementations",
          "title": "Implement All Three DFS Tree Traversals",
          "description": "\nImplement the following three Depth-First Search (DFS) traversals for a Binary Tree, both recursively and iteratively:\n\n1.  **Pre-order Traversal** (Root, Left, Right)\n2.  **In-order Traversal** (Left, Root, Right)\n3.  **Post-order Traversal** (Left, Right, Root)\n\nFor each traversal, your function should return an array containing the values of the nodes in the correct order.\n\n**Requirements:**\n*   Use the provided `TreeNode` class.\n*   Implement `preorderTraversalRecursive`, `preorderTraversalIterative`.\n*   Implement `inorderTraversalRecursive`, `inorderTraversalIterative`.\n*   Implement `postorderTraversalRecursive`, `postorderTraversalIterative`.\n*   Handle edge cases like an empty tree (`root = null`).\n",
          "difficulty": "hard",
          "startingCode": "class TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\n// Pre-order Traversal (Root, Left, Right)\nfunction preorderTraversalRecursive(root) {\n  const result = [];\n  // TODO: Implement recursive pre-order traversal\n  return result;\n}\n\nfunction preorderTraversalIterative(root) {\n  const result = [];\n  // TODO: Implement iterative pre-order traversal using a stack\n  return result;\n}\n\n// In-order Traversal (Left, Root, Right)\nfunction inorderTraversalRecursive(root) {\n  const result = [];\n  // TODO: Implement recursive in-order traversal\n  return result;\n}\n\nfunction inorderTraversalIterative(root) {\n  const result = [];\n  // TODO: Implement iterative in-order traversal using a stack\n  return result;\n}\n\n// Post-order Traversal (Left, Right, Root)\nfunction postorderTraversalRecursive(root) {\n  const result = [];\n  // TODO: Implement recursive post-order traversal\n  return result;\n}\n\nfunction postorderTraversalIterative(root) {\n  const result = [];\n  // TODO: Implement iterative post-order traversal using a stack\n  return result;\n}\n\n// Example Tree:\n//     1\n//    / \\\n//   2   3\n//  / \\\n// 4   5\nconst root = new TreeNode(1);\nroot.left = new TreeNode(2);\nroot.right = new TreeNode(3);\nroot.left.left = new TreeNode(4);\nroot.left.right = new TreeNode(5);\n\n// console.log(preorderTraversalRecursive(root)); // Expected: [1, 2, 4, 5, 3]\n// console.log(preorderTraversalIterative(root)); // Expected: [1, 2, 4, 5, 3]\n// console.log(inorderTraversalRecursive(root));  // Expected: [4, 2, 5, 1, 3]\n// console.log(inorderTraversalIterative(root));  // Expected: [4, 2, 5, 1, 3]\n// console.log(postorderTraversalRecursive(root)); // Expected: [4, 5, 2, 3, 1]\n// console.log(postorderTraversalIterative(root)); // Expected: [4, 5, 2, 3, 1]\n",
          "solutionCode": "class TreeNode {\n  constructor(value) {\n    this.value = value;\n    this.left = null;\n    this.right = null;\n  }\n}\n\n// Pre-order Traversal (Root, Left, Right)\nfunction preorderTraversalRecursive(root) {\n  const result = [];\n  function traverse(node) {\n    if (node === null) return;\n    result.push(node.value);\n    traverse(node.left);\n    traverse(node.right);\n  }\n  traverse(root);\n  return result;\n}\n\nfunction preorderTraversalIterative(root) {\n  const result = [];\n  const stack = [];\n  if (!root) return result;\n  stack.push(root);\n  while (stack.length > 0) {\n    const current = stack.pop();\n    result.push(current.value);\n    if (current.right) stack.push(current.right);\n    if (current.left) stack.push(current.left);\n  }\n  return result;\n}\n\n// In-order Traversal (Left, Root, Right)\nfunction inorderTraversalRecursive(root) {\n  const result = [];\n  function traverse(node) {\n    if (node === null) return;\n    traverse(node.left);\n    result.push(node.value);\n    traverse(node.right);\n  }\n  traverse(root);\n  return result;\n}\n\nfunction inorderTraversalIterative(root) {\n  const result = [];\n  const stack = [];\n  let current = root;\n\n  while (current !== null || stack.length > 0) {\n    while (current !== null) {\n      stack.push(current);\n      current = current.left;\n    }\n    current = stack.pop();\n    result.push(current.value);\n    current = current.right;\n  }\n  return result;\n}\n\n// Post-order Traversal (Left, Right, Root)\nfunction postorderTraversalRecursive(root) {\n  const result = [];\n  function traverse(node) {\n    if (node === null) return;\n    traverse(node.left);\n    traverse(node.right);\n    result.push(node.value);\n  }\n  traverse(root);\n  return result;\n}\n\nfunction postorderTraversalIterative(root) {\n  const result = [];\n  const stack1 = [];\n  const stack2 = [];\n  if (!root) return result;\n\n  stack1.push(root);\n  while (stack1.length > 0) {\n    const current = stack1.pop();\n    stack2.push(current.value);\n    if (current.left) stack1.push(current.left);\n    if (current.right) stack1.push(current.right);\n  }\n  // Reverse stack2 to get post-order sequence\n  while (stack2.length > 0) {\n    result.push(stack2.pop());\n  }\n  return result;\n}\n",
          "testCases": [
            "Test with empty tree: `preorderTraversalRecursive(null)` should return `[]`.",
            "Test with single node tree: `inorderTraversalIterative(new TreeNode(10))` should return `[10]`.",
            "Test with balanced tree: `preorderTraversalIterative(root)` where root is 1,2,3,4,5 should return `[1, 2, 4, 5, 3]`.",
            "Test with skewed tree (right-skewed): `inorderTraversalIterative(skewedRoot)` where 1->null->2->null->3 should return `[1, 2, 3]`.",
            "Test with skewed tree (left-skewed): `postorderTraversalIterative(skewedRoot)` where 1->2->3->null->null should return `[3, 2, 1]`.",
            "Verify all 6 functions return correct results for the example tree provided in starting code."
          ],
          "hints": [
            "For recursive solutions, the base case is always a null node.",
            "For iterative DFS, use a stack. The order of pushing left/right children onto the stack is crucial and depends on the traversal type.",
            "Iterative in-order traversal is often considered the trickiest due to visiting the root in the middle.",
            "Iterative post-order can be achieved by a slight modification of pre-order logic and then reversing the result, or by using two stacks."
          ],
          "tags": [
            "trees",
            "traversal",
            "algorithms",
            "recursion",
            "stack",
            "data-structures"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "tree_data_structure",
            "stack_data_structure",
            "recursion_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "binary_tree_implementation",
            "dfs_vs_bfs"
          ]
        },
        {
          "id": "task_flatten_object_enhanced",
          "title": "Flatten Object with Custom Separator and Array Handling",
          "description": "\nEnhance the `flattenObject` function to provide more flexibility:\n\n1.  **Custom Separator:** Allow the caller to specify a custom separator string instead of always using a dot (`.`). Default to `.`.\n2.  **Array Handling:** Flatten array elements using bracket notation (`[index]`). If an element is an object, continue flattening it recursively. If it's a primitive, add it directly.\n3.  **Null/Undefined Handling:** Ensure `null` and `undefined` values are preserved correctly as leaf nodes.\n\n**Requirements:**\n*   The function signature should be `flattenObject(obj, separator = '.', prefix = '')`.\n*   Handle deeply nested objects and arrays within objects.\n*   Return a new flattened object.\n\n**Example Input:**\n```javascript\nconst complexObject = {\n  user: {\n    id: 123,\n    profile: {\n      name: 'Alice',\n      email: 'alice@example.com',\n      settings: {\n        theme: 'dark',\n        notifications: true\n      }\n    },\n    roles: ['admin', 'editor'],\n    contact: null\n  },\n  metadata: {\n    lastLogin: '2023-10-26'\n  },\n  permissions: [\n    { name: 'read', level: 1 },\n    { name: 'write', level: 2 }\n  ]\n};\n```\n\n**Expected Output (with default separator '.'):**\n```json\n{\n  \"user.id\": 123,\n  \"user.profile.name\": \"Alice\",\n  \"user.profile.email\": \"alice@example.com\",\n  \"user.profile.settings.theme\": \"dark\",\n  \"user.profile.settings.notifications\": true,\n  \"user.roles[0]\": \"admin\",\n  \"user.roles[1]\": \"editor\",\n  \"user.contact\": null,\n  \"metadata.lastLogin\": \"2023-10-26\",\n  \"permissions[0].name\": \"read\",\n  \"permissions[0].level\": 1,\n  \"permissions[1].name\": \"write\",\n  \"permissions[1].level\": 2\n}\n```\n",
          "difficulty": "hard",
          "startingCode": "function flattenObject(obj, separator = '.', prefix = '') {\n  // TODO: Implement the enhanced flattening logic here\n  // Consider the custom separator, array handling, and null/undefined values.\n  return {};\n}\n\n// Example Input (from description)\nconst complexObject = {\n  user: {\n    id: 123,\n    profile: {\n      name: 'Alice',\n      email: 'alice@example.com',\n      settings: {\n        theme: 'dark',\n        notifications: true\n      }\n    },\n    roles: ['admin', 'editor'],\n    contact: null\n  },\n  metadata: {\n    lastLogin: '2023-10-26'\n  },\n  permissions: [\n    { name: 'read', level: 1 },\n    { name: 'write', level: 2 }\n  ]\n};\n\n// Expected Output (with default separator '.'):\n// console.log(flattenObject(complexObject));\n\n// Expected Output (with custom separator '_'):\n// console.log(flattenObject(complexObject, '_'));\n/*\n{\n  \"user_id\": 123,\n  \"user_profile_name\": \"Alice\",\n  \"user_profile_email\": \"alice@example.com\",\n  \"user_profile_settings_theme\": \"dark\",\n  \"user_profile_settings_notifications\": true,\n  \"user_roles[0]\": \"admin\",\n  \"user_roles[1]\": \"editor\",\n  \"user_contact\": null,\n  \"metadata_lastLogin\": \"2023-10-26\",\n  \"permissions[0]_name\": \"read\",\n  \"permissions[0]_level\": 1,\n  \"permissions[1]_name\": \"write\",\n  \"permissions[1]_level\": 2\n}\n*/\n",
          "solutionCode": "function flattenObject(obj, separator = '.', prefix = '') {\n  const result = {};\n\n  for (const key in obj) {\n    if (!obj.hasOwnProperty(key)) continue; // Ensure own properties\n\n    const newKey = prefix ? `${prefix}${separator}${key}` : key;\n    const value = obj[key];\n\n    if (typeof value === 'object' && value !== null) {\n      if (Array.isArray(value)) {\n        // Handle arrays\n        value.forEach((item, index) => {\n          const arrayItemKey = `${newKey}[${index}]`;\n          if (typeof item === 'object' && item !== null) {\n            Object.assign(result, flattenObject(item, separator, arrayItemKey));\n          } else {\n            result[arrayItemKey] = item;\n          }\n        });\n      } else {\n        // Handle plain objects\n        Object.assign(result, flattenObject(value, separator, newKey));\n      }\n    } else {\n      // Handle primitive values, null, undefined\n      result[newKey] = value;\n    }\n  }\n  return result;\n}\n",
          "testCases": [
            "Test with the `complexObject` and default separator.",
            "Test with the `complexObject` and a custom separator like `_`.",
            "Test with an empty object: `flattenObject({})` should return `{}`.",
            "Test with an object containing only primitives: `flattenObject({a:1, b:'test'})` should return `{a:1, b:'test'}`.",
            "Test with an object containing `null` and `undefined` values: `flattenObject({a: null, b: undefined})` should return `{a: null, b: undefined}`.",
            "Test with an array containing mixed types: `flattenObject({data: [1, {x:2}, null, 'str']})` should produce correct flattened keys and values."
          ],
          "hints": [
            "The recursive function should accept the `separator` and `prefix` as arguments.",
            "When processing an array, iterate over its elements using `forEach` or a `for` loop.",
            "For array elements, build the `newKey` using `[index]` notation.",
            "Remember to recursively call `flattenObject` on object *elements* within an array, too."
          ],
          "tags": [
            "objects",
            "recursion",
            "data-transformation",
            "javascript",
            "arrays",
            "interview-prep"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "object_flattening_basic",
            "javascript_objects_advanced",
            "recursion_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "object_serialization",
            "form_data_processing",
            "unflatten_object"
          ]
        },
        {
          "id": "task_unflatten_object",
          "title": "Reconstruct Nested Object from Flattened Keys",
          "description": "\nCreate a function `unflattenObject(flattenedObj, separator = '.')` that performs the inverse operation of flattening. It should take a flattened object (where keys are path strings) and reconstruct the original deeply nested object.\n\n**Requirements:**\n*   Accept a `separator` argument for key splitting, defaulting to `.`.\n*   Correctly interpret dot-separated paths for nested objects.\n*   Correctly interpret bracket-notation `[index]` for array elements.\n*   Handle cases where intermediate objects/arrays need to be created.\n*   Be robust against potential issues like a key `a.b` existing and then `a.b.c` being encountered, or a path expecting an object where an array was previously created and vice versa (in such cases, default to the expected type for the current path segment).\n\n**Example Input (using default separator):**\n```json\n{\n  \"user.id\": 123,\n  \"user.profile.name\": \"Alice\",\n  \"user.profile.email\": \"alice@example.com\",\n  \"user.profile.settings.theme\": \"dark\",\n  \"user.profile.settings.notifications\": true,\n  \"user.roles[0]\": \"admin\",\n  \"user.roles[1]\": \"editor\",\n  \"user.contact\": null,\n  \"metadata.lastLogin\": \"2023-10-26\",\n  \"permissions[0].name\": \"read\",\n  \"permissions[0].level\": 1,\n  \"permissions[1].name\": \"write\",\n  \"permissions[1].level\": 2\n}\n```\n\n**Expected Output (as shown in theory for `flattenObject`):**\n```javascript\n{\n  user: {\n    id: 123,\n    profile: {\n      name: 'Alice',\n      email: 'alice@example.com',\n      settings: {\n        theme: 'dark',\n        notifications: true\n      }\n    },\n    roles: ['admin', 'editor'],\n    contact: null\n  },\n  metadata: {\n    lastLogin: '2023-10-26'\n  },\n  permissions: [\n    { name: 'read', level: 1 },\n    { name: 'write', level: 2 }\n  ]\n}\n```\n",
          "difficulty": "hard",
          "startingCode": "function unflattenObject(flattenedObj, separator = '.') {\n  const result = {};\n\n  for (const key in flattenedObj) {\n    if (!flattenedObj.hasOwnProperty(key)) continue;\n    const value = flattenedObj[key];\n    // TODO: Implement the unflattening logic here\n    // Split key by separator, handle array notation\n    // Dynamically create nested objects and arrays\n  }\n  return result;\n}\n\n// Example Input (from description)\nconst flattenedObject = {\n  \"user.id\": 123,\n  \"user.profile.name\": \"Alice\",\n  \"user.profile.email\": \"alice@example.com\",\n  \"user.profile.settings.theme\": \"dark\",\n  \"user.profile.settings.notifications\": true,\n  \"user.roles[0]\": \"admin\",\n  \"user.roles[1]\": \"editor\",\n  \"user.contact\": null,\n  \"metadata.lastLogin\": \"2023-10-26\",\n  \"permissions[0].name\": \"read\",\n  \"permissions[0].level\": 1,\n  \"permissions[1].name\": \"write\",\n  \"permissions[1].level\": 2\n};\n\n// console.log(JSON.stringify(unflattenObject(flattenedObject), null, 2));\n",
          "solutionCode": "function unflattenObject(flattenedObj, separator = '.') {\n  const result = {};\n\n  for (const key in flattenedObj) {\n    if (!flattenedObj.hasOwnProperty(key)) continue;\n\n    const value = flattenedObj[key];\n    const parts = key.split(separator);\n    let current = result;\n\n    for (let i = 0; i < parts.length; i++) {\n      let part = parts[i];\n      let isArrayPart = false;\n      let arrayKey = '';\n      let arrayIndex = -1;\n\n      // Check for array notation e.g., 'key[index]'\n      const arrayMatch = part.match(/(.*)\\[(\\d+)\\]$/);\n      if (arrayMatch) {\n        isArrayPart = true;\n        arrayKey = arrayMatch[1];\n        arrayIndex = parseInt(arrayMatch[2], 10);\n        part = arrayKey; // Use the base key for property access\n      }\n\n      // If it's the last part of the path, assign the value\n      if (i === parts.length - 1) {\n        if (isArrayPart) {\n          if (!current[part]) {\n            current[part] = [];\n          } else if (!Array.isArray(current[part])) {\n            // Path conflict: e.g., 'a' was an object, now 'a[0]' expects array\n            console.warn(`Type conflict at path segment '${part}': Expected array but found object. Overwriting.`);\n            current[part] = [];\n          }\n          current[part][arrayIndex] = value;\n        } else {\n          current[part] = value;\n        }\n      } else { // Not the last part, ensure intermediate container exists\n        if (isArrayPart) {\n          if (!current[part]) {\n            current[part] = [];\n          } else if (!Array.isArray(current[part])) {\n             console.warn(`Type conflict at path segment '${part}': Expected array but found object. Overwriting.`);\n             current[part] = [];\n          }\n\n          // Ensure nested object/array exists at the array index\n          if (!current[part][arrayIndex] || typeof current[part][arrayIndex] !== 'object' || Array.isArray(current[part][arrayIndex])) {\n            current[part][arrayIndex] = {}; // Assume it should be an object for further nesting\n          }\n          current = current[part][arrayIndex];\n        } else { // Regular object part\n          if (!current[part] || typeof current[part] !== 'object' || Array.isArray(current[part])) {\n            current[part] = {}; // Assume it should be an object for further nesting\n          }\n          current = current[part];\n        }\n      }\n    }\n  }\n  return result;\n}\n",
          "testCases": [
            "Test with the complex `flattenedObject` and default separator.",
            "Test with a flattened object using a custom separator (e.g., `_`): `{'user_id': 123, 'user_roles[0]': 'admin'}` and `separator = '_'`.",
            "Test with an empty flattened object: `unflattenObject({})` should return `{}`.",
            "Test with a single-level flattened object: `unflattenObject({a:1, b:'test'})` should return `{a:1, b:'test'}`.",
            "Test with a flattened object containing `null` and `undefined` values: `unflattenObject({'a.b': null, 'c': undefined})` should preserve them.",
            "Test with a challenging edge case: `{'a.b': 1, 'a.b.c': 2}` (the first key creates a primitive where the second expects an object). Solution should handle or warn.",
            "Test with a key `a[0]` then `a` itself. (e.g., `{'a[0]': 1, 'a': 'some value'}`). The latest assignment overwrites or a warning is issued based on implementation.",
            "Test with `{'arr[0].name': 'test', 'arr': 'not an array'}`. It should ideally resolve `arr` as an array or warn."
          ],
          "hints": [
            "Iterate through the keys of the `flattenedObj`.",
            "For each key, split it into parts using the `separator`.",
            "For each part, determine if it's an object key or an array index (e.g., using `RegExp.prototype.match()` to detect `[index]`).",
            "Maintain a `current` pointer to navigate the `result` object and create intermediate objects (`{}`) or arrays (`[]`) as needed.",
            "Pay careful attention to when to assign the `value` vs. when to move the `current` pointer further into the nested structure.",
            "Consider potential type conflicts (e.g., if a path like `a.b` refers to a primitive, but then `a.b.c` implies `a.b` should be an object). You might choose to overwrite, throw an error, or issue a warning."
          ],
          "tags": [
            "objects",
            "data-transformation",
            "javascript",
            "string-parsing",
            "algorithms",
            "interview-prep"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "object_flattening_enhanced",
            "javascript_strings_regex",
            "dynamic_object_creation"
          ],
          "complexity": 9,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "json_serialization",
            "object_mapping"
          ]
        },
        {
          "id": "task_parking_lot_full_design",
          "title": "Full Parking Lot System Design with Vehicle Types and Pricing",
          "description": "\nDesign and implement a more robust `ParkingLot` system that accounts for different vehicle types and a dynamic pricing structure. Your system should be able to:\n\n1.  **Initialize with capacity and slot types:** The `ParkingLot` should be initialized with a total capacity and possibly a distribution of slot types (e.g., 20 car slots, 5 motorcycle slots, 2 bus slots).\n2.  **Support Vehicle Types:** Distinguish between 'CAR', 'MOTORCYCLE', 'BUS' vehicles. Each vehicle object should have a `type` property.\n3.  **Intelligent Parking:** When a vehicle parks, assign it to the most suitable available slot. For instance, a motorcycle can take a motorcycle slot, then a car slot, then a bus slot if needed (in that order of preference). Cars can take car or bus slots. Buses can only take bus slots.\n4.  **Dynamic Pricing:** Implement a basic pricing model. For example:\n    *   Motorcycles: $2/hour\n    *   Cars: $5/hour\n    *   Buses: $10/hour\n    *   Fees are rounded up to the nearest full hour.\n5.  **Tracking & Querying:** Provide methods to:\n    *   `parkVehicle(licensePlate, type)`: Parks a vehicle and returns its assigned slot number.\n    *   `unparkVehicle(licensePlate)`: Unparks a vehicle, calculates and returns the fee.\n    *   `getAvailableSlots(vehicleType)`: Returns the number of available slots for a given vehicle type (considering where it can fit).\n    *   `getOccupiedSlots()`: Returns a list of all occupied slots with vehicle details.\n\n**Considerations:**\n*   Use appropriate data structures for efficient lookup and management (e.g., Maps for vehicles, Sets for available slots per type).\n*   Handle full parking lots and non-existent vehicles gracefully.\n",
          "difficulty": "expert",
          "startingCode": "class Vehicle {\n  constructor(licensePlate, type) {\n    this.licensePlate = licensePlate;\n    this.type = type; // e.g., 'car', 'motorcycle', 'bus'\n    this.entryTime = null;\n  }\n}\n\nclass ParkingLot {\n  constructor(capacityConfig) {\n    // capacityConfig example: { car: 20, motorcycle: 5, bus: 2 }\n    this.capacityConfig = capacityConfig;\n    this.totalCapacity = Object.values(capacityConfig).reduce((sum, count) => sum + count, 0);\n\n    // TODO: Initialize data structures for different slot types\n    // this.slots = ...\n    // this.availableSlotsByType = {\n    //   'car': new Set(),\n    //   'motorcycle': new Set(),\n    //   'bus': new Set()\n    // };\n    // this.occupiedVehiclesMap = new Map(); // licensePlate -> Vehicle object\n    // this.slotIdToVehicleMap = new Map(); // slotId -> Vehicle object\n\n    // Initialize slots based on config, e.g., 'C1', 'C2', 'M1', 'B1'\n    let currentSlotId = 0;\n    this.slotsMap = new Map(); // slotId -> { vehicle: Vehicle | null, type: 'car' | 'motorcycle' | 'bus' }\n    this.availableSlotsByType = {\n        'CAR': new Set(),\n        'MOTORCYCLE': new Set(),\n        'BUS': new Set()\n    };\n    \n    for (const type in capacityConfig) {\n        for (let i = 0; i < capacityConfig[type]; i++) {\n            const slotIdentifier = `${type.toUpperCase()}_${i + 1}`;\n            this.slotsMap.set(slotIdentifier, { vehicle: null, type: type.toUpperCase() });\n            this.availableSlotsByType[type.toUpperCase()].add(slotIdentifier);\n        }\n    }\n\n    this.occupiedVehiclesMap = new Map(); // licensePlate -> Vehicle object\n  }\n\n  _getParkingPreference(vehicleType) {\n    // Define preference order for different vehicle types\n    const preferences = {\n      'MOTORCYCLE': ['MOTORCYCLE', 'CAR', 'BUS'],\n      'CAR': ['CAR', 'BUS'],\n      'BUS': ['BUS']\n    };\n    return preferences[vehicleType];\n  }\n\n  _calculateFee(vehicle) {\n    const rates = {\n      'MOTORCYCLE': 2,\n      'CAR': 5,\n      'BUS': 10\n    };\n    if (!vehicle.entryTime) return 0; // Should not happen if parked correctly\n    const durationHours = Math.ceil((Date.now() - vehicle.entryTime) / (1000 * 60 * 60));\n    return durationHours * (rates[vehicle.type] || 0);\n  }\n\n  parkVehicle(licensePlate, type) {\n    const vehicle = new Vehicle(licensePlate, type.toUpperCase());\n    // TODO: Implement parking logic\n    // 1. Check if vehicle is already parked.\n    // 2. Find an available slot based on preference and type.\n    // 3. Update data structures (availableSlotsByType, occupiedVehiclesMap, slotsMap).\n    // 4. Set vehicle entry time.\n    // 5. Return slotId or null.\n    return null; \n  }\n\n  unparkVehicle(licensePlate) {\n    // TODO: Implement unparking logic\n    // 1. Check if vehicle exists.\n    // 2. Retrieve slotId and vehicle.\n    // 3. Calculate fee.\n    // 4. Update data structures (availableSlotsByType, occupiedVehiclesMap, slotsMap).\n    // 5. Return { vehicle, fee } or null.\n    return null;\n  }\n\n  getAvailableSlots(vehicleType) {\n    // TODO: Implement logic to count available slots for a given vehicle type\n    // This should consider all slot types the vehicle can fit into.\n    return 0;\n  }\n\n  getOccupiedSlots() {\n    const occupied = [];\n    // TODO: Iterate through slotsMap and collect occupied slot details.\n    return occupied;\n  }\n}\n\n// Example Usage:\n// const parkingLot = new ParkingLot({ car: 2, motorcycle: 1, bus: 1 });\n// console.log(parkingLot.getAvailableSlots('CAR')); // Should be 3 (2 car, 1 bus)\n// console.log(parkingLot.getAvailableSlots('MOTORCYCLE')); // Should be 4 (1 moto, 2 car, 1 bus)\n\n// const s1 = parkingLot.parkVehicle('ABC1', 'CAR');\n// const s2 = parkingLot.parkVehicle('XYZ9', 'MOTORCYCLE');\n// const s3 = parkingLot.parkVehicle('BUS1', 'BUS');\n\n// console.log(parkingLot.getOccupiedSlots());\n// setTimeout(() => {\n//   const { fee } = parkingLot.unparkVehicle('ABC1');\n//   console.log(`Fee for ABC1: $${fee}`);\n// }, 1000);",
          "solutionCode": "class Vehicle {\n  constructor(licensePlate, type) {\n    this.licensePlate = licensePlate;\n    this.type = type; // e.g., 'car', 'motorcycle', 'bus'\n    this.entryTime = null;\n  }\n}\n\nclass ParkingLot {\n  constructor(capacityConfig) {\n    this.capacityConfig = capacityConfig;\n    this.totalCapacity = Object.values(capacityConfig).reduce((sum, count) => sum + count, 0);\n\n    this.slotsMap = new Map(); // slotId -> { vehicle: Vehicle | null, type: 'CAR' | 'MOTORCYCLE' | 'BUS' }\n    this.availableSlotsByType = {\n        'CAR': new Set(),\n        'MOTORCYCLE': new Set(),\n        'BUS': new Set()\n    };\n    \n    let slotCounter = 0;\n    for (const type in capacityConfig) {\n        for (let i = 0; i < capacityConfig[type]; i++) {\n            const slotId = `${type.toUpperCase()}_${i + 1}`;\n            this.slotsMap.set(slotId, { vehicle: null, type: type.toUpperCase(), id: slotId });\n            this.availableSlotsByType[type.toUpperCase()].add(slotId);\n        }\n    }\n\n    this.occupiedVehiclesMap = new Map(); // licensePlate -> { vehicle: Vehicle, slotId: string }\n  }\n\n  _getParkingPreference(vehicleType) {\n    // Define preference order for different vehicle types\n    const preferences = {\n      'MOTORCYCLE': ['MOTORCYCLE', 'CAR', 'BUS'],\n      'CAR': ['CAR', 'BUS'],\n      'BUS': ['BUS']\n    };\n    return preferences[vehicleType];\n  }\n\n  _calculateFee(vehicle) {\n    const rates = {\n      'MOTORCYCLE': 2,\n      'CAR': 5,\n      'BUS': 10\n    };\n    if (!vehicle.entryTime) return 0; \n    const durationHours = Math.ceil((Date.now() - vehicle.entryTime) / (1000 * 60 * 60));\n    return durationHours * (rates[vehicle.type] || 0);\n  }\n\n  parkVehicle(licensePlate, type) {\n    const vehicleType = type.toUpperCase();\n    if (this.occupiedVehiclesMap.has(licensePlate)) {\n      console.log(`Vehicle ${licensePlate} is already parked.`);\n      return null;\n    }\n\n    const preferredSlotTypes = this._getParkingPreference(vehicleType);\n    let foundSlotId = null;\n\n    for (const slotType of preferredSlotTypes) {\n      if (this.availableSlotsByType[slotType] && this.availableSlotsByType[slotType].size > 0) {\n        // Get the first available slot of this type\n        foundSlotId = this.availableSlotsByType[slotType].values().next().value;\n        this.availableSlotsByType[slotType].delete(foundSlotId);\n        break; \n      }\n    }\n\n    if (!foundSlotId) {\n      console.log(`Sorry, no suitable parking slot available for ${vehicleType} (License: ${licensePlate}).`);\n      return null;\n    }\n\n    const vehicle = new Vehicle(licensePlate, vehicleType);\n    vehicle.entryTime = Date.now();\n    this.slotsMap.get(foundSlotId).vehicle = vehicle;\n    this.occupiedVehiclesMap.set(licensePlate, { vehicle, slotId: foundSlotId });\n\n    console.log(`Vehicle ${licensePlate} (${vehicleType}) parked at slot ${foundSlotId}.`);\n    return foundSlotId;\n  }\n\n  unparkVehicle(licensePlate) {\n    if (!this.occupiedVehiclesMap.has(licensePlate)) {\n      console.log(`Vehicle ${licensePlate} not found in parking lot.`);\n      return null;\n    }\n\n    const { vehicle, slotId } = this.occupiedVehiclesMap.get(licensePlate);\n    \n    // Free up the slot\n    this.slotsMap.get(slotId).vehicle = null;\n    this.availableSlotsByType[this.slotsMap.get(slotId).type].add(slotId);\n    this.occupiedVehiclesMap.delete(licensePlate);\n\n    const fee = this._calculateFee(vehicle);\n\n    console.log(`Vehicle ${licensePlate} unparked from slot ${slotId}. Duration: ${((Date.now() - vehicle.entryTime) / (1000 * 60 * 60)).toFixed(2)} hours. Fee: $${fee}.`);\n    return { vehicle, fee };\n  }\n\n  getAvailableSlots(vehicleType) {\n    const type = vehicleType.toUpperCase();\n    const relevantSlotTypes = this._getParkingPreference(type);\n    let count = 0;\n    for (const slotType of relevantSlotTypes) {\n      if (this.availableSlotsByType[slotType]) {\n        count += this.availableSlotsByType[slotType].size;\n      }\n    }\n    return count;\n  }\n\n  getOccupiedSlots() {\n    const occupied = [];\n    for (const [slotId, slotInfo] of this.slotsMap.entries()) {\n      if (slotInfo.vehicle) {\n        occupied.push({\n          slotId: slotId,\n          vehicle: slotInfo.vehicle,\n          slotType: slotInfo.type\n        });\n      }\n    }\n    return occupied;\n  }\n}\n",
          "testCases": [
            "Initialize with a mix of slots: `new ParkingLot({ car: 2, motorcycle: 1, bus: 1 })`.",
            "Park a motorcycle, then a car, then a bus; check `getOccupiedSlots()`.",
            "Test parking when a specific slot type is full, but a larger type is available (e.g., park motorcycle when motorcycle slots are full but car slots are open).",
            "Test `getAvailableSlots('CAR')` and `getAvailableSlots('MOTORCYCLE')` after various parking actions to ensure accurate counts considering preferences.",
            "Attempt to park a vehicle when the lot is completely full for its type (and larger types it can use).",
            "Unpark a vehicle and verify the fee calculation and slot availability update.",
            "Attempt to unpark a non-existent vehicle.",
            "Test with multiple park/unpark cycles for the same vehicle.",
            "Test with all slots occupied and then unpark one to create availability."
          ],
          "hints": [
            "Think about how to represent the physical slots. A `Map` mapping `slotId` to a `slotInfo` object (containing `vehicle` and `type`) is robust.",
            "Use separate `Set`s for `availableSlotsByType` to ensure O(1) efficiency for adding/removing available slots.",
            "The `_getParkingPreference` helper is crucial for implementing the intelligent parking logic (finding the 'best' fit).",
            "Ensure `entryTime` is set when `parkVehicle` is successful and used when `unparkVehicle` calculates the fee.",
            "Remember to convert vehicle types to a consistent uppercase format for map/set keys."
          ],
          "tags": [
            "system-design",
            "object-oriented-programming",
            "data-structures",
            "algorithms",
            "interview-prep",
            "complex-logic"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_system_design_parking_lot",
            "javascript_maps_sets",
            "object_oriented_design_principles"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "expert",
          "relatedConcepts": [
            "concurrency_control",
            "database_design",
            "distributed_systems"
          ]
        }
      ]
    }
  },
  {
    "id": "86533d9a-4bcf-47c4-9c31-377c497659fd",
    "startLine": 16200,
    "endLine": 16299,
    "processedDate": "2025-06-17T15:20:01.107Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_oop_fundamentals_vehicle_parkinglot_structure",
          "title": "Object-Oriented Programming Fundamentals: Vehicle and ParkingLot Class Structure",
          "content": "This section introduces the foundational concepts of Object-Oriented Programming (OOP) in JavaScript through the definition of `Vehicle` and `ParkingLot` classes. OOP principles like encapsulation, abstraction, and modularity are demonstrated by structuring the application logic into reusable and distinct entities.\n\n## Vehicle Class\nThe `Vehicle` class serves as a blueprint for creating vehicle objects. Each `Vehicle` instance encapsulates properties such as `registrationNumber` and `color`. The `constructor` method is used to initialize these properties when a new `Vehicle` object is created.\n\n## ParkingLot Class\nThe `ParkingLot` class manages the parking facility. It encapsulates the state of the parking lot (e.g., available slots, occupied slots) and provides methods to interact with it, such as parking, unparking, and querying vehicle information. This design promotes a clear separation of concerns, making the code more organized and maintainable.\n\n### Key Concepts\n-   **Classes (`class` keyword):** A template for creating objects, providing initial values for state (member variables) and implementations of behavior (member functions or methods).\n-   **Constructors (`constructor` method):** A special method for creating and initializing an object created with a `class`.\n-   **`this` keyword:** Refers to the current instance of the class within its methods, allowing access to its properties and other methods.\n-   **Encapsulation:** Bundling data (properties) and methods (functions) that operate on the data into a single unit (class), and restricting direct access to some of the object's components.",
          "examples": [
            {
              "id": "example_vehicle_class_1",
              "title": "Defining the Vehicle Class",
              "code": "class Vehicle {\n  constructor(registrationNumber, color) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n  }\n}",
              "explanation": "This code defines the `Vehicle` class with a constructor that takes `registrationNumber` and `color` as arguments and assigns them to the instance properties. This allows creating vehicle objects with specific details.",
              "language": "javascript"
            },
            {
              "id": "example_parkinglot_structure_1",
              "title": "Basic ParkingLot Class Structure",
              "code": "class ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n  }\n\n  // Other methods will go here\n  parkVehicle(vehicle) { /* ... */ }\n  removeVehicle(slotNumber) { /* ... */ }\n  // ...\n}",
              "explanation": "This snippet shows the basic structure of the `ParkingLot` class, including its constructor which initializes the total capacity, an array `slots` to hold vehicles, and a `Set` `availableSlots` to keep track of empty slots. The constructor pre-populates `availableSlots` with all slot numbers.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_class_definition_1",
            "question_this_keyword_1",
            "question_oop_principles_1",
            "question_constructor_purpose_1"
          ],
          "relatedTasks": [
            "task_refactor_vehicle_parking_classes"
          ],
          "tags": [
            "OOP",
            "Classes",
            "Constructor",
            "this",
            "JavaScript",
            "Fundamentals"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "functions"
          ],
          "complexity": 5,
          "interviewRelevance": 8,
          "learningPath": "beginner",
          "requiredFor": [
            "data_structures_in_js",
            "design_patterns"
          ]
        },
        {
          "id": "theory_parkinglot_initialization_data_structures",
          "title": "Parking Lot Initialization and Data Structure Choices",
          "content": "The `ParkingLot` class's constructor is crucial for setting up the initial state of the parking facility. It takes a `capacity` argument, which determines the total number of parking slots available. The choice of internal data structures significantly impacts the efficiency of parking operations.\n\n## Internal Data Structures\n-   **`slots` (Array):** An array of size `capacity` is used to represent the physical parking slots. Each index in the array corresponds to a slot number. Initially, all slots are `null`, indicating they are empty. When a vehicle is parked, the corresponding array element is updated with the `Vehicle` object.\n    -   **Advantage:** Direct access to a slot by its number (index). Useful for `removeVehicle` and querying by slot number.\n    -   **Disadvantage:** Can lead to sparse arrays if many slots are empty and accessed by iteration.\n\n-   **`availableSlots` (Set):** A `Set` is used to store the numbers of all currently available (empty) parking slots. The `Set` is initialized in the constructor by adding all slot numbers from `0` to `capacity - 1`.\n    -   **Why a `Set`?** `Set` objects are collections of unique values. They offer excellent performance for operations like:\n        -   **Adding (`add()`):** Constant time on average.\n        -   **Deleting (`delete()`):** Constant time on average.\n        -   **Checking for existence (`has()`):** Constant time on average.\n        -   **Getting any element (`values().next().value`):** Efficient way to pick an arbitrary available slot.\n    -   This makes `Set` an ideal choice for quickly managing the pool of available slots, ensuring that `parkVehicle` and `removeVehicle` operations are efficient in determining and updating slot availability.",
          "examples": [
            {
              "id": "example_parkinglot_constructor_1",
              "title": "ParkingLot Constructor Implementation",
              "code": "class ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null); // Array to hold vehicle objects or null\n    this.availableSlots = new Set(); // Set to store available slot numbers\n\n    // Populate availableSlots initially\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n  }\n}",
              "explanation": "This constructor initializes `capacity`, creates a `slots` array filled with `null`s, and populates the `availableSlots` Set with all possible slot numbers. This setup ensures the parking lot starts in a known, empty state, ready for operations.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_set_vs_array_1",
            "question_available_slots_set_1",
            "question_initial_state_1",
            "question_data_structure_choice_1"
          ],
          "relatedTasks": [
            "task_optimize_parkinglot_datastructures"
          ],
          "tags": [
            "Data Structures",
            "Set",
            "Array",
            "Initialization",
            "Efficiency",
            "JavaScript"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_arrays",
            "javascript_sets"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "performance_optimization",
            "system_design"
          ]
        },
        {
          "id": "theory_parking_unparking_operations",
          "title": "Parking and Unparking Operations: `parkVehicle` and `removeVehicle`",
          "content": "The core functionality of the `ParkingLot` class revolves around parking and unparking vehicles. These operations involve careful management of both the `slots` array and the `availableSlots` Set, along with robust error handling.\n\n## `parkVehicle(vehicle)` Method\nThis method attempts to park a given `vehicle` object. It performs the following steps:\n1.  **Check for Availability:** It first checks if there are any available slots using `this.availableSlots.size === 0`. If no slots are available, it returns an error message.\n2.  **Retrieve Slot:** If slots are available, it gets the *first* available slot number from the `Set` using `this.availableSlots.values().next().value`. The `values().next().value` pattern is a common way to get an arbitrary element from a Set (as Sets do not have direct indexing).\n3.  **Occupy Slot:** The retrieved slot number is then removed from `this.availableSlots` using `delete()`, and the `vehicle` object is placed into the `this.slots` array at that index.\n4.  **Return Status:** It returns an object indicating success and the assigned slot number.\n\n## `removeVehicle(slotNumber)` Method\nThis method attempts to remove a vehicle from a specific `slotNumber`. It includes several validation checks:\n1.  **Invalid Slot Number:** It checks if the provided `slotNumber` is within the valid range (`0` to `capacity - 1`).\n2.  **Empty Slot:** It verifies if the slot is already empty (`this.slots[slotNumber] === null`). If so, it returns an error.\n3.  **Remove Vehicle:** If the slot is valid and occupied, the `Vehicle` object is retrieved, the slot in `this.slots` array is set back to `null`, and the `slotNumber` is added back to `this.availableSlots` Set.\n4.  **Return Status:** It returns an object indicating success and the removed `vehicle` object.",
          "examples": [
            {
              "id": "example_park_vehicle_1",
              "title": "parkVehicle Method Implementation",
              "code": "parkVehicle(vehicle) {\n  if (this.availableSlots.size === 0) {\n    return { success: false, message: \"No available parking slots\" };\n  }\n  \n  // Get the first available slot\n  const slotNumber = this.availableSlots.values().next().value;\n  this.availableSlots.delete(slotNumber);\n  \n  // Park the vehicle\n  this.slots[slotNumber] = vehicle;\n  \n  return { \n    success: true, \n    message: `Vehicle parked successfully`,\n    slotNumber \n  };\n}",
              "explanation": "This example demonstrates how `parkVehicle` finds an available slot using the `Set`, removes it from the `availableSlots` pool, and places the vehicle in the `slots` array, returning the outcome.",
              "language": "javascript"
            },
            {
              "id": "example_remove_vehicle_1",
              "title": "removeVehicle Method Implementation",
              "code": "removeVehicle(slotNumber) {\n  if (slotNumber < 0 || slotNumber >= this.capacity) {\n    return { success: false, message: \"Invalid slot number\" };\n  }\n  \n  if (this.slots[slotNumber] === null) {\n    return { success: false, message: \"Slot is already empty\" };\n  }\n  \n  // Remove the vehicle\n  const vehicle = this.slots[slotNumber];\n  this.slots[slotNumber] = null;\n  this.availableSlots.add(slotNumber);\n  \n  return { \n    success: true, \n    message: \"Vehicle removed successfully\", \n    vehicle \n  };\n}",
              "explanation": "This code for `removeVehicle` shows input validation for the slot number, checks if the slot is actually occupied, and then clears the slot while returning its number to the `availableSlots` Set.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_park_unpark_logic_1",
            "question_error_handling_1",
            "question_set_operations_1",
            "question_return_values_1"
          ],
          "relatedTasks": [
            "task_implement_advanced_parking",
            "task_handle_parking_errors"
          ],
          "tags": [
            "Methods",
            "Parking Logic",
            "Set Operations",
            "Error Handling",
            "Vehicle Management"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_operators",
            "conditional_statements",
            "javascript_sets"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "system_design",
            "backend_api_design"
          ]
        },
        {
          "id": "theory_query_operations",
          "title": "Parking Lot Query Operations: Retrieving Information",
          "content": "The `ParkingLot` class provides several methods to query the state of parked vehicles and available slots. These methods leverage JavaScript's powerful array manipulation functions and Set conversions to efficiently retrieve specific information.\n\n## `getVehiclesByColor(color)`\nThis method filters all currently parked vehicles and returns those matching a specified `color`. It returns an array of objects, where each object contains the `vehicle` details and its `slotNumber`.\n-   Uses `filter()` to select vehicles that are not `null` and match the `color`.\n-   Uses `map()` to transform the filtered `vehicle` and `index` (slotNumber) into the desired object format.\n\n## `getSlotByRegistration(registrationNumber)`\nThis method finds the slot number of a vehicle given its `registrationNumber`. It returns the index (slot number) if found, otherwise `null`.\n-   Uses `findIndex()` to iterate through the `slots` array and find the index of the first vehicle whose `registrationNumber` matches.\n\n## `getSlotsByColor(color)`\nSimilar to `getVehiclesByColor`, but specifically returns an array of *slot numbers* for vehicles of a given `color`.\n-   First `map()` to create objects containing both `vehicle` and `index`.\n-   Then `filter()` based on vehicle existence and color.\n-   Final `map()` to extract only the `index` (slot number).\n\n## `getAvailableSlots()`\nThis method returns an array of all currently unoccupied slot numbers.\n-   Uses `Array.from()` to convert the `Set` of `availableSlots` into a standard JavaScript `Array`.",
          "examples": [
            {
              "id": "example_get_vehicles_by_color_1",
              "title": "getVehiclesByColor Implementation",
              "code": "getVehiclesByColor(color) {\n  return this.slots\n    .filter(vehicle => vehicle && vehicle.color === color)\n    .map((vehicle, index) => ({ vehicle, slotNumber: index }));\n}",
              "explanation": "This method efficiently finds all vehicles of a certain color. The `filter` ensures only occupied slots with a matching color are considered, and `map` transforms the result into a more useful format including the slot number.",
              "language": "javascript"
            },
            {
              "id": "example_get_slot_by_registration_1",
              "title": "getSlotByRegistration Implementation",
              "code": "getSlotByRegistration(registrationNumber) {\n  const index = this.slots.findIndex(\n    vehicle => vehicle && vehicle.registrationNumber === registrationNumber\n  );\n  \n  return index !== -1 ? index : null;\n}",
              "explanation": "`findIndex` is used here to locate the slot number of a vehicle by its registration. It returns the index if found, or `-1` which is then converted to `null` for a clearer representation of 'not found'.",
              "language": "javascript"
            },
            {
              "id": "example_get_available_slots_1",
              "title": "getAvailableSlots Implementation",
              "code": "getAvailableSlots() {\n  return Array.from(this.availableSlots);\n}",
              "explanation": "This simple method demonstrates converting a `Set` to an `Array`, which is often useful when a list of items is needed from a `Set` for iteration or display.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_array_methods_1",
            "question_query_efficiency_1",
            "question_set_to_array_1",
            "question_filter_map_chaining_1"
          ],
          "relatedTasks": [
            "task_implement_additional_queries"
          ],
          "tags": [
            "Querying",
            "Array Methods",
            "filter",
            "map",
            "findIndex",
            "Set to Array",
            "Information Retrieval"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_arrays",
            "javascript_loops",
            "javascript_sets"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "data_processing",
            "api_development"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_class_definition_1",
          "topic": "Class Definition and Instantiation",
          "level": "easy",
          "type": "mcq",
          "question": "Which keyword is used in JavaScript to define a class?",
          "answer": "class",
          "options": [
            "function",
            "object",
            "class",
            "define"
          ],
          "analysisPoints": [
            "Tests basic knowledge of JavaScript class syntax.",
            "Differentiates between functions (which can also act as constructors pre-ES6) and explicit class definitions."
          ],
          "keyConcepts": [
            "Classes",
            "ES6 syntax",
            "OOP fundamentals"
          ],
          "evaluationCriteria": [
            "Correct recall of ES6 class syntax."
          ],
          "example": "```javascript\n// Correct usage:\nclass MyClass {\n  constructor() {}\n}\n\n// Incorrect usage example:\n// function MyClass() {} // This is a constructor function, not a class definition\n```",
          "tags": [
            "OOP",
            "Classes",
            "Syntax",
            "JavaScript"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 2,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_this_keyword_1",
          "topic": "The `this` Keyword in Class Methods",
          "level": "medium",
          "type": "mcq",
          "question": "In the `parkVehicle` method of the `ParkingLot` class, what does `this` refer to?",
          "answer": "The current instance of the ParkingLot class.",
          "options": [
            "The `vehicle` object passed as an argument.",
            "The `parkVehicle` method itself.",
            "The global window object.",
            "The current instance of the ParkingLot class."
          ],
          "analysisPoints": [
            "Tests understanding of `this` context within class methods.",
            "Distinguishes `this` from method arguments or global objects."
          ],
          "keyConcepts": [
            "this keyword",
            "Class methods",
            "Context",
            "OOP"
          ],
          "evaluationCriteria": [
            "Understanding of lexical `this` binding in classes.",
            "Ability to identify the correct object instance."
          ],
          "example": "```javascript\nclass ExampleClass {\n  constructor(name) {\n    this.name = name;\n  }\n  greet() {\n    return `Hello, ${this.name}!`; // 'this' refers to the instance (e.g., myInstance)\n  }\n}\nconst myInstance = new ExampleClass('Alice');\nconsole.log(myInstance.greet()); // Output: Hello, Alice!\n```",
          "tags": [
            "OOP",
            "this",
            "Context",
            "Classes",
            "JavaScript"
          ],
          "prerequisites": [
            "javascript_functions",
            "oop_fundamentals"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_set_vs_array_1",
          "topic": "Choosing Data Structures (Set vs. Array)",
          "level": "medium",
          "type": "open",
          "question": "The `ParkingLot` class uses a `Set` for `availableSlots` and an `Array` for `slots`. Explain why a `Set` is a good choice for `availableSlots` and an `Array` is suitable for `slots`, considering the typical operations performed on each.",
          "answer": "N/A",
          "options": [],
          "analysisPoints": [
            "Demonstrates understanding of `Set` properties: unique values, efficient add/delete/has operations (average O(1)).",
            "Demonstrates understanding of `Array` properties: ordered collection, direct index access (O(1)), suitable for representing fixed-size slots.",
            "Compares and contrasts the use cases for each data structure in the context of the parking lot problem.",
            "Discusses how the chosen data structures optimize specific operations (`parkVehicle`, `removeVehicle`, `getSlotByRegistration`)."
          ],
          "keyConcepts": [
            "Set",
            "Array",
            "Data structures",
            "Time complexity",
            "Optimization"
          ],
          "evaluationCriteria": [
            "Clarity and accuracy of explanation regarding `Set` and `Array` characteristics.",
            "Ability to relate data structure choice to operational efficiency.",
            "Comprehensive comparison of use cases within the given context."
          ],
          "example": "```javascript\n// Set operations for available slots:\nconst available = new Set([1, 2, 3]);\navailable.add(4); // O(1) average\navailable.delete(2); // O(1) average\navailable.has(1); // O(1) average\n\n// Array operations for occupied slots:\nconst slots = [null, 'Car A', 'Car B', null];\nslots[1]; // O(1) direct access\nslots.findIndex(v => v === 'Car B'); // O(N) search\n```",
          "tags": [
            "Data Structures",
            "Set",
            "Array",
            "Performance",
            "Interview Question"
          ],
          "prerequisites": [
            "javascript_sets",
            "javascript_arrays",
            "time_complexity_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_park_vehicle_logic_1",
          "topic": "Parking Logic and Edge Cases",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `parkVehicle` method. What would be the expected output if `parkingLot.parkVehicle(car4)` is called when all slots are already occupied in a `ParkingLot` instance?",
          "answer": "{ success: false, message: \"No available parking slots\" }",
          "options": [
            "{ success: true, message: \"Vehicle parked successfully\", slotNumber: -1 }",
            "{ success: false, message: \"Parking lot is full\" }",
            "An error would be thrown.",
            "{ success: false, message: \"No available parking slots\" }"
          ],
          "analysisPoints": [
            "Tests understanding of the `parkVehicle` method's `if (this.availableSlots.size === 0)` condition.",
            "Verifies knowledge of the specific error message returned when no slots are available.",
            "Highlights the importance of handling edge cases (full parking lot)."
          ],
          "keyConcepts": [
            "Method logic",
            "Edge cases",
            "Error handling",
            "Return values"
          ],
          "evaluationCriteria": [
            "Accurate recall of the method's behavior under specific conditions.",
            "Understanding of the method's return structure for failure cases."
          ],
          "example": "```javascript\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) this.availableSlots.add(i);\n  }\n  parkVehicle(vehicle) {\n    if (this.availableSlots.size === 0) {\n      return { success: false, message: \"No available parking slots\" };\n    }\n    const slotNumber = this.availableSlots.values().next().value;\n    this.availableSlots.delete(slotNumber);\n    this.slots[slotNumber] = vehicle;\n    return { success: true, message: `Vehicle parked successfully`, slotNumber };\n  }\n}\n\nconst parkingLot = new ParkingLot(1);\nconst car1 = { registrationNumber: \"A\", color: \"Red\" };\nconst car2 = { registrationNumber: \"B\", color: \"Blue\" };\n\nparkingLot.parkVehicle(car1); // Parks car1\nconsole.log(parkingLot.parkVehicle(car2)); // Calls parkVehicle when full\n// Expected output: { success: false, message: \"No available parking slots\" }\n```",
          "tags": [
            "Methods",
            "Logic",
            "Edge Cases",
            "Error Handling"
          ],
          "prerequisites": [
            "conditional_statements"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_remove_vehicle_validation_1",
          "topic": "Input Validation in `removeVehicle`",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following scenarios would cause the `removeVehicle` method to return `{ success: false, message: 'Invalid slot number' }`?",
          "answer": "Calling `parkingLot.removeVehicle(-1)` or `parkingLot.removeVehicle(parkingLot.capacity)`",
          "options": [
            "Calling `parkingLot.removeVehicle(5)` when slot 5 is already empty.",
            "Calling `parkingLot.removeVehicle(0)` when slot 0 is occupied.",
            "Calling `parkingLot.removeVehicle(-1)` or `parkingLot.removeVehicle(parkingLot.capacity)`",
            "Calling `parkingLot.removeVehicle()` with no arguments."
          ],
          "analysisPoints": [
            "Tests understanding of the `removeVehicle` method's input validation for `slotNumber`.",
            "Distinguishes between 'invalid slot number' and 'slot already empty' error messages.",
            "Reinforces awareness of array boundary conditions."
          ],
          "keyConcepts": [
            "Input validation",
            "Method parameters",
            "Edge cases",
            "Error messages"
          ],
          "evaluationCriteria": [
            "Accurate identification of the condition that triggers a specific error message.",
            "Knowledge of array indexing bounds."
          ],
          "example": "```javascript\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) this.availableSlots.add(i);\n  }\n  removeVehicle(slotNumber) {\n    if (slotNumber < 0 || slotNumber >= this.capacity) {\n      return { success: false, message: \"Invalid slot number\" };\n    }\n    if (this.slots[slotNumber] === null) {\n      return { success: false, message: \"Slot is already empty\" };\n    }\n    const vehicle = this.slots[slotNumber];\n    this.slots[slotNumber] = null;\n    this.availableSlots.add(slotNumber);\n    return { success: true, message: \"Vehicle removed successfully\", vehicle };\n  }\n}\n\nconst parkingLot = new ParkingLot(5);\nconsole.log(parkingLot.removeVehicle(-1)); // Expected: { success: false, message: \"Invalid slot number\" }\nconsole.log(parkingLot.removeVehicle(5));  // Expected: { success: false, message: \"Invalid slot number\" }\nconsole.log(parkingLot.removeVehicle(0));  // Expected: { success: false, message: \"Slot is already empty\" } (if slot 0 is empty)\n```",
          "tags": [
            "Input Validation",
            "Edge Cases",
            "Methods",
            "Error Handling"
          ],
          "prerequisites": [
            "conditional_statements"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_method_get_slots_by_color_1",
          "topic": "Array Methods: `filter` and `map` Chaining",
          "level": "hard",
          "type": "code",
          "question": "The `getSlotsByColor` method uses a chain of `map` and `filter` operations. Rewrite this method to achieve the same result using a single `forEach` loop and an array to collect the results. Discuss the trade-offs between the two approaches.",
          "answer": "N/A",
          "options": [],
          "analysisPoints": [
            "Demonstrates ability to refactor array method chains into imperative loops.",
            "Requires understanding of how `map` and `filter` operate internally.",
            "Prompts discussion on code readability, functional programming paradigms vs. imperative, and potential performance implications for very large arrays."
          ],
          "keyConcepts": [
            "Array methods",
            "`forEach` loop",
            "`filter`",
            "`map`",
            "Refactoring",
            "Performance trade-offs",
            "Functional vs Imperative programming"
          ],
          "evaluationCriteria": [
            "Correct implementation of the `forEach` version.",
            "Insightful discussion of pros and cons for both approaches (readability, conciseness, performance, intermediate array creation).",
            "Adherence to the original method's logic."
          ],
          "example": "```javascript\n// Original (using map and filter chaining):\ngetSlotsByColor(color) {\n  return this.slots\n    .map((vehicle, index) => ({ vehicle, index }))\n    .filter(item => item.vehicle && item.vehicle.color === color)\n    .map(item => item.index);\n}\n\n// Rewritten using forEach:\ngetSlotsByColorRefactored(color) {\n  const resultSlots = [];\n  for (let i = 0; i < this.slots.length; i++) {\n    const vehicle = this.slots[i];\n    if (vehicle && vehicle.color === color) {\n      resultSlots.push(i);\n    }\n  }\n  return resultSlots;\n}\n\n// Trade-offs discussion:\n// Chaining `map` and `filter` is often more declarative, concise, and readable for simple transformations.\n// It can sometimes create intermediate arrays, which might have a minor performance overhead for extremely large datasets.\n// A `forEach` loop (or traditional `for` loop) can be more performant as it avoids intermediate array creation and offers more control.\n// However, it can be more verbose and less 'functional' in style.\n```",
          "tags": [
            "Code Challenge",
            "Array Methods",
            "Refactoring",
            "Performance",
            "Functional Programming"
          ],
          "prerequisites": [
            "javascript_arrays",
            "javascript_loops",
            "javascript_functions"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_flashcard_set_purpose",
          "topic": "Set Data Structure Purpose",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary benefit of using a `Set` for `availableSlots` in the `ParkingLot` class?",
          "answer": "Efficient (average O(1)) addition, deletion, and checking for existence of unique slot numbers.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Set",
            "Data Structures",
            "Efficiency"
          ],
          "evaluationCriteria": [
            "Quick recall of `Set` advantages."
          ],
          "example": "N/A",
          "tags": [
            "Flashcard",
            "Set",
            "Data Structures"
          ],
          "prerequisites": [
            "javascript_sets"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_flashcard_get_slot_by_reg",
          "topic": "Getting Slot by Registration Number",
          "level": "easy",
          "type": "flashcard",
          "question": "Which `ParkingLot` method would you use to find the parking slot number of a vehicle given its registration number?",
          "answer": "`getSlotByRegistration(registrationNumber)`",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Method usage",
            "Query operations"
          ],
          "evaluationCriteria": [
            "Quick recall of method names and their purpose."
          ],
          "example": "N/A",
          "tags": [
            "Flashcard",
            "Methods",
            "Querying"
          ],
          "prerequisites": [
            "oop_fundamentals"
          ],
          "complexity": 3,
          "interviewFrequency": 5,
          "learningPath": "beginner"
        },
        {
          "id": "question_coding_implement_is_parked",
          "topic": "Adding a New Query Method",
          "level": "medium",
          "type": "code",
          "question": "Add a new method `isVehicleParked(registrationNumber)` to the `ParkingLot` class. This method should return `true` if a vehicle with the given registration number is currently parked, and `false` otherwise.",
          "answer": "N/A",
          "options": [],
          "analysisPoints": [
            "Requires understanding of how to iterate through `slots`.",
            "Tests ability to use `findIndex` or a loop to search for a specific vehicle property.",
            "Ensures correct handling of `null` values in `slots`.",
            "Demonstrates modular thinking by building on existing `getSlotByRegistration` logic."
          ],
          "keyConcepts": [
            "Class methods",
            "Array iteration",
            "Conditional logic",
            "Boolean return values"
          ],
          "evaluationCriteria": [
            "Correct implementation of the search logic.",
            "Efficiency of the search (e.g., direct use of `findIndex`).",
            "Adherence to class structure."
          ],
          "example": "```javascript\nclass ParkingLot {\n  // ... (previous constructor and methods)\n\n  getSlotByRegistration(registrationNumber) {\n    const index = this.slots.findIndex(\n      vehicle => vehicle && vehicle.registrationNumber === registrationNumber\n    );\n    return index !== -1 ? index : null;\n  }\n\n  // New method implementation:\n  isVehicleParked(registrationNumber) {\n    return this.getSlotByRegistration(registrationNumber) !== null;\n  }\n}\n\n// Example usage:\nconst parkingLot = new ParkingLot(2);\nconst car1 = new Vehicle(\"ABC\", \"Red\");\nparkingLot.parkVehicle(car1);\nconsole.log(parkingLot.isVehicleParked(\"ABC\")); // true\nconsole.log(parkingLot.isVehicleParked(\"XYZ\")); // false\n```",
          "tags": [
            "Coding Challenge",
            "Methods",
            "Querying",
            "Array Search"
          ],
          "prerequisites": [
            "javascript_arrays",
            "oop_fundamentals"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_open_scaling_parking_lot_1",
          "topic": "System Design: Scaling the Parking Lot",
          "level": "hard",
          "type": "open",
          "question": "Imagine this `ParkingLot` system needs to be scaled to manage a multi-story parking garage with potentially thousands of slots and different vehicle types (e.g., motorcycles, cars, trucks, each requiring different slot sizes). What modifications would you propose to the `ParkingLot` and `Vehicle` classes, and what new data structures or concepts might be introduced to handle this complexity?",
          "answer": "N/A",
          "options": [],
          "analysisPoints": [
            "Discusses extending `Vehicle` (e.g., with `size` property, or inheritance for `Car`, `Motorcycle`, `Truck`).",
            "Proposes changes to `ParkingLot` to handle different slot sizes or types (e.g., `slots` could be a 2D array or an object mapping floor numbers to arrays; `availableSlots` could be a `Map<SlotType, Set<SlotNumber>>`).",
            "Considers strategies for parking logic: finding suitable slots based on vehicle type/size.",
            "Mentions potential need for more complex query methods (e.g., `getAvailableSlotsByType`).",
            "Touches on database persistence or distributed system considerations if 'thousands of slots' implies a persistent, large-scale system.",
            "Identifies the challenge of slot allocation optimization (e.g., 'best fit' algorithm)."
          ],
          "keyConcepts": [
            "System design",
            "Scalability",
            "Inheritance",
            "Polymorphism",
            "Advanced data structures (Maps of Sets)",
            "Database integration",
            "Algorithm design (slot allocation)"
          ],
          "evaluationCriteria": [
            "Breadth and depth of proposed architectural changes.",
            "Practicality and justification of data structure choices.",
            "Consideration of various aspects of system design (OOP, data, algorithms, persistence).",
            "Ability to think beyond the immediate problem and anticipate future requirements."
          ],
          "example": "N/A",
          "tags": [
            "System Design",
            "Scalability",
            "OOP",
            "Advanced Data Structures",
            "Architecture"
          ],
          "prerequisites": [
            "design_patterns",
            "advanced_data_structures",
            "oop_principles"
          ],
          "complexity": 9,
          "interviewFrequency": 10,
          "learningPath": "expert"
        }
      ],
      "tasks": [
        {
          "id": "task_refactor_vehicle_parking_classes",
          "title": "Refactor Vehicle and ParkingLot Classes with Type Safety",
          "description": "\nRefactor the `Vehicle` and `ParkingLot` classes using TypeScript to introduce type safety. Ensure all properties and method parameters/return types are explicitly defined. Pay special attention to the `slots` array and `availableSlots` Set, correctly typing their elements.\n\n**Requirements:**\n1.  Convert `Vehicle` class to TypeScript, explicitly typing `registrationNumber` and `color`.\n2.  Convert `ParkingLot` class to TypeScript.\n3.  Type `capacity`, `slots` (e.g., `(Vehicle | null)[]`), and `availableSlots` (e.g., `Set<number>`).\n4.  Add explicit types for all method parameters and return values (e.g., `parkVehicle(vehicle: Vehicle): { success: boolean; message: string; slotNumber?: number; }`).\n5.  Ensure the example usage still works without type errors.\n",
          "difficulty": "medium",
          "startingCode": "class Vehicle {\n  constructor(registrationNumber, color) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n  }\n}\n\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n  }\n  \n  parkVehicle(vehicle) {\n    if (this.availableSlots.size === 0) {\n      return { success: false, message: \"No available parking slots\" };\n    }\n    const slotNumber = this.availableSlots.values().next().value;\n    this.availableSlots.delete(slotNumber);\n    this.slots[slotNumber] = vehicle;\n    return { \n      success: true, \n      message: `Vehicle parked successfully`, \n      slotNumber \n    };\n  }\n  \n  removeVehicle(slotNumber) {\n    if (slotNumber < 0 || slotNumber >= this.capacity) {\n      return { success: false, message: \"Invalid slot number\" };\n    }\n    if (this.slots[slotNumber] === null) {\n      return { success: false, message: \"Slot is already empty\" };\n    }\n    const vehicle = this.slots[slotNumber];\n    this.slots[slotNumber] = null;\n    this.availableSlots.add(slotNumber);\n    return { \n      success: true, \n      message: \"Vehicle removed successfully\", \n      vehicle \n    };\n  }\n  \n  getVehiclesByColor(color) {\n    return this.slots\n      .filter(vehicle => vehicle && vehicle.color === color)\n      .map((vehicle, index) => ({ vehicle, slotNumber: index }));\n  }\n  \n  getSlotByRegistration(registrationNumber) {\n    const index = this.slots.findIndex(\n      vehicle => vehicle && vehicle.registrationNumber === registrationNumber\n    );\n    return index !== -1 ? index : null;\n  }\n  \n  getSlotsByColor(color) {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, index }))\n      .filter(item => item.vehicle && item.vehicle.color === color)\n      .map(item => item.index);\n  }\n  \n  getAvailableSlots() {\n    return Array.from(this.availableSlots);\n  }\n}\n\n// Example usage (should be type-safe after refactoring)\nconst parkingLot = new ParkingLot(3);\nconst car1 = new Vehicle(\"KA-01-HH-1234\", \"White\");\nconsole.log(parkingLot.parkVehicle(car1));\n",
          "solutionCode": "class Vehicle {\n  registrationNumber: string;\n  color: string;\n\n  constructor(registrationNumber: string, color: string) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n  }\n}\n\ninterface ParkResult {\n  success: boolean;\n  message: string;\n  slotNumber?: number;\n}\n\ninterface RemoveResult {\n  success: boolean;\n  message: string;\n  vehicle?: Vehicle;\n}\n\ninterface VehicleInSlot {\n  vehicle: Vehicle;\n  slotNumber: number;\n}\n\nclass ParkingLot {\n  private capacity: number;\n  private slots: (Vehicle | null)[];\n  private availableSlots: Set<number>;\n\n  constructor(capacity: number) {\n    this.capacity = capacity;\n    this.slots = new Array<Vehicle | null>(capacity).fill(null);\n    this.availableSlots = new Set<number>();\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n  }\n  \n  parkVehicle(vehicle: Vehicle): ParkResult {\n    if (this.availableSlots.size === 0) {\n      return { success: false, message: \"No available parking slots\" };\n    }\n    \n    const slotNumber: number = this.availableSlots.values().next().value;\n    this.availableSlots.delete(slotNumber);\n    \n    this.slots[slotNumber] = vehicle;\n    \n    return { \n      success: true, \n      message: `Vehicle parked successfully`, \n      slotNumber \n    };\n  }\n  \n  removeVehicle(slotNumber: number): RemoveResult {\n    if (slotNumber < 0 || slotNumber >= this.capacity) {\n      return { success: false, message: \"Invalid slot number\" };\n    }\n    \n    if (this.slots[slotNumber] === null) {\n      return { success: false, message: \"Slot is already empty\" };\n    }\n    \n    const vehicle: Vehicle = this.slots[slotNumber] as Vehicle; // Type assertion as it's guaranteed not null here\n    this.slots[slotNumber] = null;\n    this.availableSlots.add(slotNumber);\n    \n    return { \n      success: true, \n      message: \"Vehicle removed successfully\", \n      vehicle \n    };\n  }\n  \n  getVehiclesByColor(color: string): VehicleInSlot[] {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, slotNumber: index }))\n      .filter((item): item is VehicleInSlot => item.vehicle !== null && item.vehicle.color === color)\n      .map(item => ({ vehicle: item.vehicle, slotNumber: item.slotNumber }));\n  }\n  \n  getSlotByRegistration(registrationNumber: string): number | null {\n    const index: number = this.slots.findIndex(\n      vehicle => vehicle && vehicle.registrationNumber === registrationNumber\n    );\n    \n    return index !== -1 ? index : null;\n  }\n  \n  getSlotsByColor(color: string): number[] {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, index }))\n      .filter((item): item is { vehicle: Vehicle; index: number } => item.vehicle !== null && item.vehicle.color === color)\n      .map(item => item.index);\n  }\n  \n  getAvailableSlots(): number[] {\n    return Array.from(this.availableSlots);\n  }\n}\n\n// Example usage (now type-safe)\nconst parkingLot = new ParkingLot(3);\nconst car1 = new Vehicle(\"KA-01-HH-1234\", \"White\");\nconst car2 = new Vehicle(\"KA-01-HH-9999\", \"White\");\nconst car3 = new Vehicle(\"KA-01-BB-0001\", \"Black\");\n\nconsole.log(parkingLot.parkVehicle(car1));\nconsole.log(parkingLot.parkVehicle(car2));\nconsole.log(parkingLot.parkVehicle(car3));\n\nconsole.log(parkingLot.getVehiclesByColor(\"White\"));\nconsole.log(parkingLot.getSlotByRegistration(\"KA-01-HH-1234\"));\nconsole.log(parkingLot.getSlotsByColor(\"White\"));\nconsole.log(parkingLot.getAvailableSlots());\n\nconsole.log(parkingLot.removeVehicle(0));\nconsole.log(parkingLot.getAvailableSlots());\n",
          "testCases": [
            "Constructor: `new ParkingLot(5)` should create a `slots` array of 5 `null`s and `availableSlots` Set with {0,1,2,3,4}.",
            "parkVehicle: Parking a vehicle should return `{ success: true, ... }` and correctly update `slots` and `availableSlots`.",
            "parkVehicle (full): Calling `parkVehicle` on a full lot should return `{ success: false, message: 'No available parking slots' }`.",
            "removeVehicle: Removing a vehicle from an occupied slot should return `{ success: true, ... }` and update `slots` and `availableSlots`.",
            "removeVehicle (invalid slot): Calling `removeVehicle(-1)` or `removeVehicle(capacity)` should return `{ success: false, message: 'Invalid slot number' }`.",
            "removeVehicle (empty slot): Calling `removeVehicle` on an already empty slot should return `{ success: false, message: 'Slot is already empty' }`.",
            "getVehiclesByColor: Should correctly return all vehicles of a specified color with their slot numbers.",
            "getSlotByRegistration: Should return the correct slot number or `null` if not found.",
            "getSlotsByColor: Should return an array of slot numbers for vehicles of a specified color.",
            "getAvailableSlots: Should return an array of all currently available slot numbers, matching the state of `availableSlots`."
          ],
          "hints": [
            "Start by defining interfaces for the return types of methods like `parkVehicle` and `removeVehicle` for better clarity.",
            "Remember that `slots` can hold either a `Vehicle` object or `null`, so use a union type like `(Vehicle | null)[]`.",
            "For `filter` methods on arrays that contain `null`, you might need a type predicate (e.g., `(item): item is VehicleInSlot => item.vehicle !== null`) to correctly narrow types for subsequent `map` operations in TypeScript.",
            "The `Set` type in TypeScript is generic, so specify the type of elements it holds, e.g., `Set<number>`."
          ],
          "tags": [
            "TypeScript",
            "Refactoring",
            "Type Safety",
            "OOP",
            "Data Structures"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "typescript_basics",
            "oop_fundamentals",
            "javascript_arrays",
            "javascript_sets"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "interfaces",
            "union_types",
            "type_predicates"
          ]
        },
        {
          "id": "task_implement_advanced_parking",
          "title": "Implement Priority Parking for Handicapped Vehicles",
          "description": "\nExtend the `ParkingLot` class to support a new feature: priority parking for vehicles that are marked as 'handicapped'.\n\n**Requirements:**\n1.  Modify the `Vehicle` class to include an optional `isHandicapped` boolean property.\n2.  Modify the `ParkingLot` constructor to optionally reserve a certain number of slots (e.g., the first `N` slots) as 'handicapped-only' slots. These slots should only be assigned to handicapped vehicles.\n3.  Update the `parkVehicle` method:\n    *   If a handicapped vehicle is being parked, it should prioritize parking in a handicapped-only slot if available.\n    *   If no handicapped-only slots are available, it can park in a regular available slot.\n    *   If a non-handicapped vehicle is being parked, it should *not* be able to park in a handicapped-only slot.\n4.  Update the `removeVehicle` method: Ensure removed handicapped-only slots are correctly returned to the `handicappedAvailableSlots` pool.\n5.  Add a new method `getHandicappedSlots()` that returns the numbers of all handicapped-only slots.\n",
          "difficulty": "hard",
          "startingCode": "class Vehicle {\n  constructor(registrationNumber, color) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n    // Add isHandicapped here\n  }\n}\n\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n    // Add handicapped related properties here\n  }\n  \n  parkVehicle(vehicle) {\n    // Modify this logic for handicapped priority\n    if (this.availableSlots.size === 0) {\n      return { success: false, message: \"No available parking slots\" };\n    }\n    const slotNumber = this.availableSlots.values().next().value;\n    this.availableSlots.delete(slotNumber);\n    this.slots[slotNumber] = vehicle;\n    return { success: true, message: `Vehicle parked successfully`, slotNumber };\n  }\n  \n  removeVehicle(slotNumber) {\n    // Modify this logic for handicapped slots\n    if (slotNumber < 0 || slotNumber >= this.capacity) {\n      return { success: false, message: \"Invalid slot number\" };\n    }\n    if (this.slots[slotNumber] === null) {\n      return { success: false, message: \"Slot is already empty\" };\n    }\n    const vehicle = this.slots[slotNumber];\n    this.slots[slotNumber] = null;\n    this.availableSlots.add(slotNumber);\n    return { success: true, message: \"Vehicle removed successfully\", vehicle };\n  }\n  \n  // Add getHandicappedSlots method\n}\n\n// Example usage\n// const parkingLot = new ParkingLot(5, 2); // 5 total slots, 2 handicapped\n// const regularCar = new Vehicle(\"R123\", \"Blue\", false);\n// const handicappedCar = new Vehicle(\"H456\", \"Green\", true);\n// console.log(parkingLot.parkVehicle(regularCar));\n// console.log(parkingLot.parkVehicle(handicappedCar));\n// console.log(parkingLot.getAvailableSlots());\n// console.log(parkingLot.getHandicappedSlots());\n",
          "solutionCode": "class Vehicle {\n  registrationNumber;\n  color;\n  isHandicapped;\n\n  constructor(registrationNumber, color, isHandicapped = false) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n    this.isHandicapped = isHandicapped;\n  }\n}\n\nclass ParkingLot {\n  capacity;\n  handicappedCapacity;\n  slots;\n  availableSlots;\n  handicappedAvailableSlots;\n  handicappedReservedSlots;\n\n  constructor(capacity, handicappedCapacity = 0) {\n    if (handicappedCapacity > capacity) {\n      throw new Error(\"Handicapped capacity cannot exceed total capacity.\");\n    }\n    this.capacity = capacity;\n    this.handicappedCapacity = handicappedCapacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set(); // Regular available slots\n    this.handicappedAvailableSlots = new Set(); // Available handicapped slots\n    this.handicappedReservedSlots = new Set(); // Fixed handicapped slot numbers\n\n    for (let i = 0; i < capacity; i++) {\n      if (i < handicappedCapacity) {\n        this.handicappedAvailableSlots.add(i);\n        this.handicappedReservedSlots.add(i);\n      } else {\n        this.availableSlots.add(i);\n      }\n    }\n  }\n  \n  parkVehicle(vehicle) {\n    let slotNumber = null;\n\n    if (vehicle.isHandicapped) {\n      if (this.handicappedAvailableSlots.size > 0) {\n        slotNumber = this.handicappedAvailableSlots.values().next().value;\n        this.handicappedAvailableSlots.delete(slotNumber);\n      } else if (this.availableSlots.size > 0) {\n        slotNumber = this.availableSlots.values().next().value;\n        this.availableSlots.delete(slotNumber);\n      }\n    } else { // Regular vehicle\n      if (this.availableSlots.size > 0) {\n        slotNumber = this.availableSlots.values().next().value;\n        this.availableSlots.delete(slotNumber);\n      } else {\n        return { success: false, message: \"No regular or available handicapped slots for a non-handicapped vehicle\" };\n      }\n    }\n\n    if (slotNumber === null) {\n      return { success: false, message: \"No available parking slots\" };\n    }\n    \n    this.slots[slotNumber] = vehicle;\n    \n    return { \n      success: true, \n      message: `Vehicle parked successfully`, \n      slotNumber \n    };\n  }\n  \n  removeVehicle(slotNumber) {\n    if (slotNumber < 0 || slotNumber >= this.capacity) {\n      return { success: false, message: \"Invalid slot number\" };\n    }\n    \n    if (this.slots[slotNumber] === null) {\n      return { success: false, message: \"Slot is already empty\" };\n    }\n    \n    const vehicle = this.slots[slotNumber];\n    this.slots[slotNumber] = null;\n\n    if (this.handicappedReservedSlots.has(slotNumber)) {\n      this.handicappedAvailableSlots.add(slotNumber);\n    } else {\n      this.availableSlots.add(slotNumber);\n    }\n    \n    return { \n      success: true, \n      message: \"Vehicle removed successfully\", \n      vehicle \n    };\n  }\n  \n  getVehiclesByColor(color) {\n    return this.slots\n      .filter(vehicle => vehicle && vehicle.color === color)\n      .map((vehicle, index) => ({ vehicle, slotNumber: index }));\n  }\n  \n  getSlotByRegistration(registrationNumber) {\n    const index = this.slots.findIndex(\n      vehicle => vehicle && vehicle.registrationNumber === registrationNumber\n    );\n    \n    return index !== -1 ? index : null;\n  }\n  \n  getSlotsByColor(color) {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, index }))\n      .filter(item => item.vehicle && item.vehicle.color === color)\n      .map(item => item.index);\n  }\n  \n  getAvailableSlots() {\n    return Array.from(this.availableSlots).concat(Array.from(this.handicappedAvailableSlots)).sort((a, b) => a - b);\n  }\n\n  getHandicappedSlots() {\n    return Array.from(this.handicappedReservedSlots).sort((a, b) => a - b);\n  }\n}\n\n// Example usage\nconst parkingLot = new ParkingLot(5, 2); // 5 total slots, 2 handicapped (slots 0, 1)\n\nconst regularCar1 = new Vehicle(\"R123\", \"Blue\");\nconst regularCar2 = new Vehicle(\"R456\", \"Red\");\nconst handicappedCar1 = new Vehicle(\"H789\", \"Green\", true);\nconst handicappedCar2 = new Vehicle(\"H111\", \"Yellow\", true);\nconst regularCar3 = new Vehicle(\"R222\", \"Black\");\n\nconsole.log(\"Initial available:\", parkingLot.getAvailableSlots()); // Should include all 0-4\nconsole.log(\"Handicapped reserved:\", parkingLot.getHandicappedSlots()); // Should be [0, 1]\n\nconsole.log(parkingLot.parkVehicle(regularCar1)); // Parks in 2\nconsole.log(parkingLot.parkVehicle(regularCar2)); // Parks in 3\nconsole.log(parkingLot.parkVehicle(handicappedCar1)); // Parks in 0 (handicapped slot)\nconsole.log(parkingLot.parkVehicle(regularCar3)); // Parks in 4\n\nconsole.log(\"After parking:\");\nconsole.log(\"Available slots:\", parkingLot.getAvailableSlots()); // Only slot 1 (handicapped) should be available\nconsole.log(\"Handicapped available slots (internal):\", Array.from(parkingLot.handicappedAvailableSlots)); // Should be [1]\n\nconsole.log(parkingLot.parkVehicle(handicappedCar2)); // Parks in 1\n\nconsole.log(\"After all parking:\");\nconsole.log(\"Available slots:\", parkingLot.getAvailableSlots()); // Should be empty\n\nconst regularCar4 = new Vehicle(\"R999\", \"White\");\nconsole.log(parkingLot.parkVehicle(regularCar4)); // Should fail: \"No regular or available handicapped slots for a non-handicapped vehicle\"\n\nconsole.log(parkingLot.removeVehicle(0)); // Remove handicappedCar1\nconsole.log(\"After removing handicappedCar1:\");\nconsole.log(\"Handicapped available slots (internal):\", Array.from(parkingLot.handicappedAvailableSlots)); // Should be [0]\nconsole.log(\"Available slots:\", parkingLot.getAvailableSlots()); // Should include 0\n\nconsole.log(parkingLot.parkVehicle(regularCar4)); // Should fail again as 0 is handicapped only\n\nconst handicappedCar3 = new Vehicle(\"H000\", \"Orange\", true);\nconsole.log(parkingLot.parkVehicle(handicappedCar3)); // Should park in 0\n",
          "testCases": [
            "Constructor: `new ParkingLot(5, 2)` should correctly initialize `availableSlots` and `handicappedAvailableSlots` sets.",
            "parkVehicle (handicapped, has priority slot): A handicapped vehicle should first occupy a handicapped-only slot.",
            "parkVehicle (handicapped, no priority slot): A handicapped vehicle should then occupy a regular available slot if no priority slots are free.",
            "parkVehicle (regular, has regular slot): A regular vehicle should occupy a regular slot.",
            "parkVehicle (regular, no regular slot, handicapped slots available): A regular vehicle *must not* park in a handicapped-only slot.",
            "parkVehicle (full): Both regular and handicapped calls should fail if no suitable slots are available.",
            "removeVehicle (from handicapped slot): Removing a vehicle from a handicapped slot should return that slot to `handicappedAvailableSlots`.",
            "removeVehicle (from regular slot): Removing a vehicle from a regular slot should return that slot to `availableSlots`.",
            "getHandicappedSlots(): Should correctly return the array of handicapped slot numbers.",
            "getAvailableSlots(): Should return all available slots (regular + handicapped available), sorted."
          ],
          "hints": [
            "You'll need two separate `Set`s for available slots: one for regular slots (`availableSlots`) and one for handicapped slots (`handicappedAvailableSlots`).",
            "The `handicappedCapacity` parameter in the `ParkingLot` constructor can define the number of initial handicapped-only slots (e.g., `0` to `handicappedCapacity - 1`).",
            "When parking a handicapped vehicle, check `handicappedAvailableSlots` first, then `availableSlots`. For regular vehicles, only check `availableSlots`.",
            "When removing a vehicle, you need to determine if the `slotNumber` belongs to the `handicappedReservedSlots` (you might need a separate `Set` to store these fixed slot numbers) to return it to the correct available pool.",
            "Consider how `getAvailableSlots` should combine the two sets for a complete list."
          ],
          "tags": [
            "OOP",
            "Feature Implementation",
            "Conditional Logic",
            "Data Structures",
            "Edge Cases",
            "Complex Logic"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "oop_fundamentals",
            "parking_unparking_operations",
            "javascript_sets"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "inheritance",
            "polymorphism",
            "design_patterns"
          ]
        },
        {
          "id": "task_implement_additional_queries",
          "title": "Implement Advanced Parking Lot Query Methods",
          "description": "\nExtend the `ParkingLot` class with two new query methods that provide more specific insights into the parking lot's state.\n\n**Requirements:**\n1.  Implement `getOccupiedSlotsCount()`: This method should return the total number of currently occupied parking slots.\n2.  Implement `getVehiclesByType(type: string)`: This method requires an extension to the `Vehicle` class first. Add a `type` property (e.g., 'car', 'motorcycle', 'truck') to the `Vehicle` class. Then, `getVehiclesByType` should return an array of `VehicleInSlot` objects (similar to `getVehiclesByColor`) for vehicles matching the given type.\n",
          "difficulty": "medium",
          "startingCode": "class Vehicle {\n  constructor(registrationNumber, color) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n    // Add type property here\n  }\n}\n\nclass ParkingLot {\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n  }\n  \n  parkVehicle(vehicle) { /* ... */ }\n  removeVehicle(slotNumber) { /* ... */ }\n  getVehiclesByColor(color) { /* ... */ }\n  getSlotByRegistration(registrationNumber) { /* ... */ }\n  getSlotsByColor(color) { /* ... */ }\n  getAvailableSlots() { /* ... */ }\n\n  // Add getOccupiedSlotsCount() here\n  // Add getVehiclesByType(type) here\n}\n\n// Example Usage:\n// const parkingLot = new ParkingLot(5);\n// const car = new Vehicle(\"C123\", \"Blue\", \"car\");\n// const bike = new Vehicle(\"M456\", \"Red\", \"motorcycle\");\n// parkingLot.parkVehicle(car);\n// parkingLot.parkVehicle(bike);\n// console.log(parkingLot.getOccupiedSlotsCount()); // Expected: 2\n// console.log(parkingLot.getVehiclesByType(\"car\")); // Expected: [{ vehicle: car, slotNumber: X }]\n",
          "solutionCode": "class Vehicle {\n  registrationNumber;\n  color;\n  type; // New property\n\n  constructor(registrationNumber, color, type) {\n    this.registrationNumber = registrationNumber;\n    this.color = color;\n    this.type = type; \n  }\n}\n\ninterface VehicleInSlot {\n  vehicle: Vehicle;\n  slotNumber: number;\n}\n\nclass ParkingLot {\n  capacity;\n  slots;\n  availableSlots;\n\n  constructor(capacity) {\n    this.capacity = capacity;\n    this.slots = new Array(capacity).fill(null);\n    this.availableSlots = new Set();\n    for (let i = 0; i < capacity; i++) {\n      this.availableSlots.add(i);\n    }\n  }\n  \n  parkVehicle(vehicle) {\n    if (this.availableSlots.size === 0) {\n      return { success: false, message: \"No available parking slots\" };\n    }\n    const slotNumber = this.availableSlots.values().next().value;\n    this.availableSlots.delete(slotNumber);\n    this.slots[slotNumber] = vehicle;\n    return { success: true, message: `Vehicle parked successfully`, slotNumber };\n  }\n  \n  removeVehicle(slotNumber) {\n    if (slotNumber < 0 || slotNumber >= this.capacity) {\n      return { success: false, message: \"Invalid slot number\" };\n    }\n    if (this.slots[slotNumber] === null) {\n      return { success: false, message: \"Slot is already empty\" };\n    }\n    const vehicle = this.slots[slotNumber];\n    this.slots[slotNumber] = null;\n    this.availableSlots.add(slotNumber);\n    return { success: true, message: \"Vehicle removed successfully\", vehicle };\n  }\n  \n  getVehiclesByColor(color) {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, slotNumber: index }))\n      .filter(item => item.vehicle && item.vehicle.color === color)\n      .map(item => ({ vehicle: item.vehicle, slotNumber: item.slotNumber }));\n  }\n  \n  getSlotByRegistration(registrationNumber) {\n    const index = this.slots.findIndex(\n      vehicle => vehicle && vehicle.registrationNumber === registrationNumber\n    );\n    return index !== -1 ? index : null;\n  }\n  \n  getSlotsByColor(color) {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, index }))\n      .filter(item => item.vehicle && item.vehicle.color === color)\n      .map(item => item.index);\n  }\n  \n  getAvailableSlots() {\n    return Array.from(this.availableSlots);\n  }\n\n  // New method 1\n  getOccupiedSlotsCount() {\n    return this.capacity - this.availableSlots.size;\n    // Alternative: return this.slots.filter(slot => slot !== null).length;\n  }\n\n  // New method 2\n  getVehiclesByType(type) {\n    return this.slots\n      .map((vehicle, index) => ({ vehicle, slotNumber: index }))\n      .filter(item => item.vehicle && item.vehicle.type === type)\n      .map(item => ({ vehicle: item.vehicle, slotNumber: item.slotNumber }));\n  }\n}\n\n// Example Usage:\nconst parkingLot = new ParkingLot(5);\nconst car1 = new Vehicle(\"C123\", \"Blue\", \"car\");\nconst bike1 = new Vehicle(\"M456\", \"Red\", \"motorcycle\");\nconst car2 = new Vehicle(\"C789\", \"Green\", \"car\");\n\nparkingLot.parkVehicle(car1);\nparkingLot.parkVehicle(bike1);\nparkingLot.parkVehicle(car2);\n\nconsole.log(\"Occupied slots count:\", parkingLot.getOccupiedSlotsCount()); // Expected: 3\nconsole.log(\"Vehicles of type 'car':\", parkingLot.getVehiclesByType(\"car\"));\n/* Expected:\n[\n  { vehicle: Vehicle { registrationNumber: 'C123', color: 'Blue', type: 'car' }, slotNumber: 0 },\n  { vehicle: Vehicle { registrationNumber: 'C789', color: 'Green', type: 'car' }, slotNumber: 2 }\n]\n*/\nconsole.log(\"Vehicles of type 'motorcycle':\", parkingLot.getVehiclesByType(\"motorcycle\"));\n/* Expected:\n[\n  { vehicle: Vehicle { registrationNumber: 'M456', color: 'Red', type: 'motorcycle' }, slotNumber: 1 }\n]\n*/\nconsole.log(\"Vehicles of type 'truck':\", parkingLot.getVehiclesByType(\"truck\")); // Expected: []\n",
          "testCases": [
            "getOccupiedSlotsCount: Should return 0 for an empty lot.",
            "getOccupiedSlotsCount: Should return the correct count after multiple park operations.",
            "getOccupiedSlotsCount: Should return the correct count after multiple remove operations.",
            "getVehiclesByType: Should correctly filter and return vehicles of a specific type (e.g., 'car').",
            "getVehiclesByType: Should return an empty array if no vehicles of the specified type are parked.",
            "getVehiclesByType: Should correctly handle scenarios where `Vehicle` objects might be `null` in `slots` array."
          ],
          "hints": [
            "For `getOccupiedSlotsCount()`, consider how the `availableSlots` Set relates to the total `capacity`.",
            "For `getVehiclesByType()`, you can adapt the logic from `getVehiclesByColor()` to filter by the new `type` property on the `Vehicle` object.",
            "Remember to update the `Vehicle` class constructor to accept the new `type` parameter."
          ],
          "tags": [
            "Feature Implementation",
            "Querying",
            "Array Methods",
            "OOP Extension"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "oop_fundamentals",
            "array_methods",
            "query_operations"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "object_properties",
            "data_filtering"
          ]
        }
      ]
    }
  },
  {
    "id": "439ce207-65d1-45be-84d5-3fe416b6d723",
    "startLine": 16300,
    "endLine": 16399,
    "processedDate": "2025-06-17T15:22:56.019Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_component_design_data_polling",
          "title": "React Component Design, Lifecycle, and Data Polling",
          "content": "This section covers the principles of creating functional React components, managing component lifecycle effects using the `useEffect` hook, handling state with `useState`, performing asynchronous data fetching, and implementing periodic data updates (polling). It also touches upon robust error handling and conditional rendering based on different component states.\n\n## Key Concepts\n\n### Functional Components and Hooks\nReact functional components are JavaScript functions that accept props as arguments and return React elements. Hooks are special functions that let you \"hook into\" React features from functional components. `useState` allows adding state to functional components, while `useEffect` handles side effects like data fetching, subscriptions, or manually changing the DOM.\n\n### `useState` for State Management\n`useState` is a Hook that lets you add React state to functional components. It returns a pair: the current state value and a function that lets you update it. The updater function causes a re-render of the component.\n\n### `useEffect` for Side Effects and Lifecycle\n`useEffect` is used for side effects in functional components. It runs after every render, but you can control when it runs by providing a dependency array.\n\n-   **No dependency array**: Runs after every render.\n-   **Empty dependency array (`[]`)**: Runs only once after the initial render (like `componentDidMount`). Cleanup function runs on unmount (like `componentWillUnmount`).\n-   **With dependencies (`[dep1, dep2]`)**: Runs after the initial render and whenever any dependency in the array changes. Cleanup function runs before re-running the effect and on unmount.\n\n**Cleanup Function**: The `useEffect` hook can return a function. This return function is the cleanup function. It runs before the component unmounts, and also before the effect runs again if the dependencies change. This is crucial for clearing timers, unsubscribing from events, or canceling network requests to prevent memory leaks or unexpected behavior.\n\n### Data Fetching with `fetch` API\nThe `fetch` API provides an interface for fetching resources (e.g., across the network). It returns a Promise that resolves to a `Response` object. It's important to check `response.ok` (status in the 200-299 range) to determine if the request was successful, as `fetch` only rejects a Promise if a network error occurs, not for HTTP errors like 404 or 500.\n\n### Polling\nPolling is a technique where a client repeatedly requests information from a server at a regular interval. This is useful for maintaining up-to-date data without a constant connection (like WebSockets), but it can be inefficient if updates are infrequent or if many clients poll simultaneously.\n\n### Conditional Rendering\nReact allows you to render different elements or components based on certain conditions. This is essential for displaying loading states, error messages, or different UI based on data availability or user permissions.\n\n## Implementation Steps for a Polling Component\n1.  **State Initialization**: Use `useState` to manage loading, error, and online status.\n2.  **Effect for Polling**: Use `useEffect` to initiate the first status check and set up an `setInterval` for periodic checks.\n3.  **Cleanup**: Return a cleanup function from `useEffect` to clear the `setInterval` when the component unmounts to prevent memory leaks.\n4.  **Data Fetching Logic**: Inside the effect, define an `async` function to use `fetch`, handle successful responses (check `response.status === 200`), and `try-catch` for network errors.\n5.  **Conditional UI**: Render different UI elements (loading, error, online, offline) based on the component's state.\n\n",
          "examples": [
            {
              "id": "example_user_status_indicator_1",
              "title": "User Status Indicator Component with Polling",
              "code": "import React, { useState, useEffect } from 'react';\n\nconst UserStatusIndicator = ({ url, pollingInterval = 5000 }) => {\n  const [isOnline, setIsOnline] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Function to check user status\n    async function checkStatus() {\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          // Handle HTTP errors (e.g., 404, 500)\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        // Consider user online only if status code is 200\n        setIsOnline(response.status === 200);\n        setError(null);\n      } catch (err) {\n        // Handle network errors or errors thrown above\n        setIsOnline(false);\n        setError(err.message);\n      }\n    }\n\n    // Check status immediately on mount\n    checkStatus();\n    \n    // Set up polling interval\n    const intervalId = setInterval(checkStatus, pollingInterval);\n    \n    // Clean up on unmount or before dependencies change\n    return () => {\n      console.log('Clearing interval:', intervalId);\n      clearInterval(intervalId);\n    };\n    \n  }, [url, pollingInterval]); // Dependencies ensure effect re-runs if url or interval changes\n\n  // Loading state\n  if (isOnline === null && !error) {\n    return <div className=\"status-indicator loading\">Checking status...</div>;\n  }\n\n  // Error state\n  if (error) {\n    return <div className=\"status-indicator error\">Error: {error}</div>;\n  }\n\n  // Online/Offline state\n  return (\n    <div className={`status-indicator ${isOnline ? 'online' : 'offline'}`}>\n      <div className=\"indicator-dot\"></div>\n      <span>{isOnline ? 'Online' : 'Offline'}</span>\n    </div>\n  );\n};\n\nexport default UserStatusIndicator;\n",
              "explanation": "This component demonstrates several key React concepts:\n1.  **State Management**: `isOnline` tracks the connection status (null for loading, true for online, false for offline). `error` stores any network or HTTP error messages.\n2.  **Side Effects with `useEffect`**: The `useEffect` hook is used to perform the data fetching logic. It's invoked immediately on mount and then repeatedly at `pollingInterval` using `setInterval`.\n3.  **Dependency Array**: `[url, pollingInterval]` ensures that if these props change, the old interval is cleared, and a new one is set up with the updated values. This is crucial for correct component behavior.\n4.  **Cleanup Function**: The `return () => clearInterval(intervalId);` within `useEffect` is vital. It clears the interval when the component unmounts (or before the effect re-runs due to dependency changes), preventing memory leaks and ensuring resources are properly released.\n5.  **Asynchronous Operations**: `async/await` syntax is used with `fetch` for cleaner asynchronous code.\n6.  **Error Handling**: A `try-catch` block wraps the `fetch` call to catch network errors. Additionally, `response.ok` is checked to handle HTTP response errors (like 404 or 500) that `fetch` itself doesn't throw as rejections.\n7.  **Conditional Rendering**: The component renders different UI elements (`Checking status...`, `Error: ...`, `Online`, `Offline`) based on the `isOnline` and `error` state variables, providing clear user feedback.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_user_status_1",
            "question_user_status_2",
            "question_user_status_3",
            "question_user_status_4",
            "question_user_status_5",
            "question_user_status_6",
            "question_user_status_7",
            "question_user_status_8",
            "question_user_status_9"
          ],
          "relatedTasks": [
            "task_resilient_api_polling"
          ],
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "useState",
            "Data Fetching",
            "Polling",
            "Component Design",
            "Error Handling",
            "Conditional Rendering"
          ],
          "technology": "React",
          "prerequisites": [
            "JavaScript Basics",
            "Promises",
            "React Fundamentals"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Advanced React Hooks",
            "Real-time UI",
            "Client-Server Communication"
          ]
        },
        {
          "id": "theory_dynamic_form_generation",
          "title": "Dynamic Form Generation using JSON Schema in React",
          "content": "Building forms dynamically from a JSON schema is a powerful pattern in frontend development. It allows for flexible and configurable user interfaces without hardcoding form structures, which is particularly useful for admin panels, configuration tools, or applications requiring customizable data input.\n\n## Key Concepts\n\n### JSON Schema for Forms\nA JSON schema can define the structure and validation rules for your form data. For dynamic forms, this schema typically includes an array of field definitions, where each field specifies its `type` (e.g., 'text', 'textarea', 'number', 'select', 'checkbox'), `id`, `name`, `label`, `placeholder`, `required` status, and possibly options for select fields or initial values.\n\n### Recursive Component Design\nThe core idea is to create a generic `FormField` component that can render different input types based on a `field` object passed as a prop. A parent `DynamicForm` component then iterates over the array of field definitions in the JSON schema and renders a `FormField` for each. For complex or nested structures (e.g., fieldsets, arrays of objects), the `DynamicForm` or `FormField` might recursively render itself or another component.\n\n### Controlled Components\nIn React, form elements whose values are controlled by React state are called controlled components. This means the value of the input is always driven by the state, and any changes to the input are handled via an `onChange` event handler that updates the state. This makes form data predictable and easy to validate.\n\n### State Management for Forms\nFor dynamic forms, a single state object can hold all form data, with keys corresponding to field IDs or names. The `onChange` handler for each `FormField` updates the relevant part of this state object. This centralizes form data management.\n\n## Implementation Steps for a Dynamic Form\n1.  **Define Field Schema**: Create a JSON array of objects, where each object describes a form field (type, name, label, placeholder, etc.).\n2.  **`FormField` Component**: Create a reusable component (`FormField`) that takes a single field definition and the current form value for that field, along with an `onChange` handler. Use a `switch` statement or conditional rendering to render the appropriate HTML input element (`<input>`, `<textarea>`, `<select>`, etc.) based on `field.type`.\n3.  **`DynamicForm` Component**: This component will:\n    *   Accept the JSON schema as a prop.\n    *   Manage the overall form state using `useState`, typically an object where keys are field names/IDs and values are the current input values.\n    *   Iterate over the field definitions in the schema.\n    *   For each field, render the `FormField` component, passing the field definition, the current value from its state, and an `onChange` handler.\n    *   Implement a generic `handleFieldChange` function that updates the form's state based on the field's ID and its new value.\n    *   Handle form submission, often by calling an `onSubmit` prop with the collected form data.\n4.  **Input Types**: Support common input types like `text`, `textarea`, `number`, `email`, `password`, `checkbox`, `radio`, `select`. Each type requires specific HTML attributes and event handling.\n5.  **Validation (Optional but Recommended)**: Integrate validation logic, either within `FormField` or `DynamicForm`, based on rules specified in the JSON schema (e.g., `required`, `minLength`, `pattern`). Display validation messages to the user.\n\n",
          "examples": [
            {
              "id": "example_form_field_1",
              "title": "FormField Component - Handling Various Input Types",
              "code": "import React from 'react';\n\nconst FormField = ({ field, onChange, value }) => {\n  const commonProps = {\n    id: field.id,\n    name: field.name,\n    value: value || '',\n    onChange: e => onChange(field.id, e.target.value),\n    placeholder: field.placeholder,\n    required: field.required,\n    className: 'form-field-input'\n  };\n\n  switch (field.type) {\n    case 'text':\n    case 'email':\n    case 'password':\n    case 'number':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <input type={field.type} {...commonProps} />\n        </div>\n      );\n    case 'textarea':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <textarea {...commonProps} rows={field.rows || 3} />\n        </div>\n      );\n    case 'checkbox':\n      // Checkbox uses `checked` and different onChange handling\n      return (\n        <div className=\"form-group checkbox-group\">\n          <input\n            type=\"checkbox\"\n            id={field.id}\n            name={field.name}\n            checked={!!value} // Convert truthy/falsy to boolean\n            onChange={e => onChange(field.id, e.target.checked)}\n            required={field.required}\n            className=\"form-field-checkbox\"\n          />\n          <label htmlFor={field.id}>{field.label}</label>\n        </div>\n      );\n    case 'select':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <select {...commonProps}>\n            {field.options && field.options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n        </div>\n      );\n    default:\n      return (\n        <div className=\"form-group error\">\n          <p>Unknown field type: {field.type}</p>\n        </div>\n      );\n  }\n};\n\nexport default FormField;\n",
              "explanation": "This `FormField` component is responsible for rendering individual form elements based on the `field` object passed via props. It uses a `switch` statement to handle different input types. \n- `text`, `email`, `password`, `number`: Render standard `<input>` elements.\n- `textarea`: Renders a `<textarea>`, allowing for `rows` customization.\n- `checkbox`: Handles the `checked` attribute and ensures `onChange` passes the boolean value (`e.target.checked`).\n- `select`: Renders a `<select>` element and maps `field.options` to `<option>` tags, setting up correct `value` and `onChange` for controlled behavior.\n- `commonProps`: A pattern to collect shared attributes for input types, reducing code duplication.\n- **Controlled Components**: The `value` prop (or `checked` for checkboxes) ensures that the input's displayed value is always derived from React's state, and the `onChange` handler updates that state.",
              "language": "typescript"
            },
            {
              "id": "example_dynamic_form_1",
              "title": "DynamicForm Component - Orchestrating Field Rendering",
              "code": "import React, { useState } from 'react';\nimport FormField from './FormField'; // Assume FormField is in a separate file\n\nconst DynamicForm = ({ schema, onSubmit }) => {\n  // Initialize form data from schema or empty object\n  const initialFormData = schema.reduce((acc, field) => {\n    acc[field.id] = field.defaultValue || ''; // Initialize with default or empty string\n    if (field.type === 'checkbox') acc[field.id] = !!field.defaultValue;\n    return acc;\n  }, {});\n\n  const [formData, setFormData] = useState(initialFormData);\n\n  const handleFieldChange = (id, value) => {\n    setFormData(prevData => ({\n      ...prevData,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // Here you would typically add validation logic before submitting\n    console.log('Form submitted with data:', formData);\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      {schema.map(field => (\n        <FormField\n          key={field.id} // Essential for list rendering performance and correctness\n          field={field}\n          value={formData[field.id]}\n          onChange={handleFieldChange}\n        />\n      ))}\n      <button type=\"submit\" className=\"submit-button\">Submit Form</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n",
              "explanation": "The `DynamicForm` component acts as the orchestrator for the dynamic form. \n- **Schema Input**: It accepts a `schema` prop, which is an array of field definitions.\n- **Centralized State**: It uses `useState` to manage `formData`, an object that holds the current values for all fields. The `initialFormData` is built by iterating through the schema and setting default values.\n- **`handleFieldChange`**: This single function is passed down to every `FormField`. When a field's value changes, it calls `handleFieldChange` with its `id` and new `value`, which then updates the `formData` state. This makes `formData` a controlled state for the entire form.\n- **Mapping Fields**: It iterates over the `schema` array using `map`, rendering a `FormField` component for each field definition. The `key` prop is crucial when rendering lists in React for performance and correct reconciliation.\n- **Form Submission**: An `onSubmit` handler prevents default form submission and logs/passes the current `formData`.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_dynamic_form_1",
            "question_dynamic_form_2",
            "question_dynamic_form_3",
            "question_dynamic_form_4",
            "question_dynamic_form_5",
            "question_dynamic_form_6",
            "question_dynamic_form_7",
            "question_dynamic_form_8",
            "question_dynamic_form_9"
          ],
          "relatedTasks": [
            "task_dynamic_form_validation"
          ],
          "tags": [
            "React",
            "Forms",
            "Dynamic UI",
            "JSON Schema",
            "Component Composition",
            "State Management",
            "Controlled Components",
            "Recursion"
          ],
          "technology": "React",
          "prerequisites": [
            "React State",
            "React Props",
            "Component Lifecycle",
            "JavaScript Objects"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "Form Builders",
            "Content Management Systems",
            "Configurators"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_user_status_1",
          "topic": "React Component Design and Data Polling",
          "level": "medium",
          "type": "open",
          "question": "How would you create a React component for a user status indicator that regularly checks an API endpoint and updates its UI based on the response? Describe the key React hooks and concepts you would use.",
          "answer": "This question assesses the candidate's understanding of React functional components, state management, side effects, data fetching, and conditional rendering. A good answer should cover:\n1.  **Functional Component Structure**: Using a functional component (e.g., `UserStatusIndicator`).\n2.  **`useState`**: To manage the `isOnline` status (e.g., `null` for loading, `true` for online, `false` for offline) and `error` state.\n3.  **`useEffect`**: For handling side effects like initial data fetch and setting up the polling interval. Emphasize its dependency array for controlling re-runs and the cleanup function to clear the interval on unmount.\n4.  **`fetch` API**: To make asynchronous requests to the API endpoint. Discuss handling both network errors (try/catch) and HTTP status code errors (checking `response.ok`).\n5.  **`setInterval`**: For implementing the polling mechanism.\n6.  **Conditional Rendering**: To display different UI states (loading, error, online, offline).\n7.  **Props**: To receive `url` and `pollingInterval`.",
          "options": [],
          "analysisPoints": [
            "Identifies and correctly applies `useState` for UI state.",
            "Correctly uses `useEffect` for side effects, including the dependency array and cleanup function.",
            "Demonstrates understanding of asynchronous data fetching with `fetch` and error handling.",
            "Explains the polling mechanism using `setInterval`.",
            "Describes conditional rendering for various UI states."
          ],
          "keyConcepts": [
            "React Hooks",
            "useState",
            "useEffect",
            "Data Fetching",
            "Polling",
            "Conditional Rendering",
            "Component Lifecycle"
          ],
          "evaluationCriteria": [
            "Clarity and completeness of explanation.",
            "Correct use of React terminology and concepts.",
            "Ability to structure a practical React solution.",
            "Demonstrates awareness of performance/cleanup considerations."
          ],
          "example": "```typescript\nimport React, { useState, useEffect } from 'react';\n\nconst UserStatusIndicator = ({ url, pollingInterval = 5000 }) => {\n  const [isOnline, setIsOnline] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function checkStatus() {\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        setIsOnline(response.status === 200);\n        setError(null);\n      } catch (err) {\n        setIsOnline(false);\n        setError(err.message);\n      }\n    }\n\n    checkStatus();\n    const intervalId = setInterval(checkStatus, pollingInterval);\n    \n    return () => clearInterval(intervalId);\n  }, [url, pollingInterval]);\n\n  if (isOnline === null && !error) return <div className=\"status-indicator loading\">Checking status...</div>;\n  if (error) return <div className=\"status-indicator error\">Error: {error}</div>;\n  return (\n    <div className={`status-indicator ${isOnline ? 'online' : 'offline'}`}>\n      <div className=\"indicator-dot\"></div>\n      <span>{isOnline ? 'Online' : 'Offline'}</span>\n    </div>\n  );\n};\n```",
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "useState",
            "Data Fetching",
            "Polling"
          ],
          "prerequisites": [
            "React Basics",
            "JavaScript Asynchronous"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_user_status_2",
          "topic": "React `useEffect` Cleanup",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `UserStatusIndicator` component. Why is it crucial to return `() => clearInterval(intervalId)` from the `useEffect` hook?\n\n```typescript\nuseEffect(() => {\n  // ... (async function checkStatus, initial call)\n  const intervalId = setInterval(checkStatus, pollingInterval);\n  \n  return () => clearInterval(intervalId); // <-- This line\n}, [url, pollingInterval]);\n```",
          "answer": "To prevent memory leaks by clearing the interval when the component unmounts or its dependencies change.",
          "options": [
            "To prevent memory leaks by clearing the interval when the component unmounts or its dependencies change.",
            "To ensure the interval runs only once after the component mounts.",
            "To explicitly stop the API calls after a certain number of attempts.",
            "To pause the polling when the user navigates away from the tab."
          ],
          "analysisPoints": [
            "The `useEffect` cleanup function runs when the component unmounts or when the dependencies change (before the effect runs again).",
            "Failing to clear intervals or subscriptions leads to memory leaks and unwanted side effects on unmounted components.",
            "This ensures that the `checkStatus` function is not called on a component that no longer exists in the DOM, preventing errors and resource consumption."
          ],
          "keyConcepts": [
            "useEffect",
            "Cleanup Function",
            "Memory Leaks",
            "Component Lifecycle"
          ],
          "evaluationCriteria": [
            "Understanding of `useEffect` lifecycle.",
            "Awareness of memory management in React components.",
            "Ability to identify common pitfalls in asynchronous operations."
          ],
          "example": "The cleanup function returned by `useEffect` is invoked by React when the component unmounts, or before the effect runs again if its dependencies have changed. In the context of `setInterval`, this is critical to stop the timer. Without it, the interval would continue to fire even after the `UserStatusIndicator` component is removed from the DOM, leading to unnecessary API calls, potential errors (e.g., trying to update state on an unmounted component), and a memory leak as the interval keeps a reference to the component's scope alive.",
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Memory Management"
          ],
          "prerequisites": [
            "React Basics",
            "JavaScript Timers"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_user_status_3",
          "topic": "React `useEffect` Dependencies",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of the dependency array in `useEffect` (e.g., `[url, pollingInterval]`)?",
          "answer": "The dependency array controls when the `useEffect` hook re-runs. The effect will re-run if any value in the array changes between renders.",
          "options": [],
          "analysisPoints": [
            "Explains the role of dependencies in `useEffect`.",
            "Distinguishes between an empty array, no array, and an array with values."
          ],
          "keyConcepts": [
            "useEffect",
            "Dependency Array",
            "React Lifecycle"
          ],
          "evaluationCriteria": [
            "Basic understanding of `useEffect` behavior."
          ],
          "example": "Without a dependency array, `useEffect` runs after every render. With an empty array (`[]`), it runs only once on mount. With specific dependencies (`[url, pollingInterval]`), it re-runs when `url` or `pollingInterval` change, ensuring the effect uses the latest props.",
          "tags": [
            "React",
            "Hooks",
            "useEffect"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_user_status_4",
          "topic": "Error Handling with `fetch`",
          "level": "medium",
          "type": "mcq",
          "question": "In the `checkStatus` function, why is `if (!response.ok) { throw new Error(...) }` included in addition to the `try-catch` block?\n\n```typescript\nasync function checkStatus() {\n  try {\n    const response = await fetch(url);\n    if (!response.ok) { // <-- This line\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    setIsOnline(response.status === 200);\n    setError(null);\n  } catch (err) {\n    setIsOnline(false);\n    setError(err.message);\n  }\n}\n```",
          "answer": "The `fetch` API only rejects the Promise on network errors (e.g., no internet); it resolves for HTTP errors like 404 or 500, so `response.ok` is needed to explicitly throw for these.",
          "options": [
            "The `fetch` API only rejects the Promise on network errors (e.g., no internet); it resolves for HTTP errors like 404 or 500, so `response.ok` is needed to explicitly throw for these.",
            "It's a redundant check, as the `try-catch` block will catch all errors automatically.",
            "It ensures that only successful HTTP status codes (2xx) are processed.",
            "It prevents infinite loops in case of a server-side error."
          ],
          "analysisPoints": [
            "Highlights a common misconception about `fetch`'s error handling.",
            "Explains the difference between network errors (caught by `catch`) and HTTP errors (require manual check).",
            "Emphasizes the importance of `response.ok` for robust API calls."
          ],
          "keyConcepts": [
            "fetch API",
            "Error Handling",
            "Promises",
            "HTTP Status Codes"
          ],
          "evaluationCriteria": [
            "Deep understanding of `fetch` API behavior.",
            "Ability to implement robust error handling in asynchronous operations."
          ],
          "example": "The `fetch` API's promise only rejects if there's a network error (e.g., DNS lookup failure, no internet connection, preflight request failed). If the server responds, even with a 4xx or 5xx status code, the promise resolves successfully. Therefore, `response.ok` (which is `true` for status codes 200-299) must be explicitly checked to treat non-2xx responses as errors and propagate them to the `catch` block for unified error handling.",
          "tags": [
            "JavaScript",
            "fetch",
            "Error Handling",
            "API"
          ],
          "prerequisites": [
            "JavaScript Promises"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_user_status_5",
          "topic": "State Initialization in React",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the initial value of `isOnline` (`null`) used for in the `UserStatusIndicator` component?",
          "answer": "It signifies a loading or initial state before the first API check has completed, allowing the component to render a 'Checking status...' message.",
          "options": [],
          "analysisPoints": [
            "Understanding of initial state meaning.",
            "Importance of distinct states for UI feedback."
          ],
          "keyConcepts": [
            "useState",
            "State Management",
            "Loading State"
          ],
          "evaluationCriteria": [
            "Basic understanding of `useState` initialization.",
            "Ability to design for different UI states."
          ],
          "example": "By initializing `isOnline` to `null`, the component can distinguish between 'loading' (`null`), 'online' (`true`), and 'offline' (`false`). This enables the conditional rendering of a 'Checking status...' message, providing immediate feedback to the user while the API call is in progress, rather than showing a default 'Offline' state prematurely.",
          "tags": [
            "React",
            "useState",
            "UI/UX"
          ],
          "prerequisites": [
            "React State"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_user_status_6",
          "topic": "React Performance Optimization",
          "level": "hard",
          "type": "open",
          "question": "Discuss potential performance issues and alternative approaches to polling for real-time status updates in a React application. When would you prefer one method over another?",
          "answer": "Polling can be inefficient for real-time updates due to:\n1.  **High Network Traffic**: Frequent requests even when no data changes.\n2.  **Increased Server Load**: More requests per client.\n3.  **Latency**: Updates only appear at the polling interval, not instantly.\n\nAlternative approaches include:\n\n*   **WebSockets**: Provides a full-duplex communication channel over a single TCP connection. The server can push updates to the client in real-time without the client explicitly requesting them. This is ideal for truly real-time features like chat applications, live dashboards, or user presence indicators where instant updates are critical and polling would be inefficient.\n    *   **Pros**: Low latency, efficient bandwidth usage (after initial handshake), true real-time.\n    *   **Cons**: More complex server-side implementation, browser compatibility for older browsers, potential firewall issues.\n\n*   **Server-Sent Events (SSE)**: A simpler alternative to WebSockets where the server pushes updates to the client over a single HTTP connection. It's unidirectional (server to client only). Suitable for continuous streams of data like stock tickers, news feeds, or status updates where the client doesn't need to send data back to the server in real-time.\n    *   **Pros**: Simpler to implement than WebSockets (especially server-side), leverages HTTP, automatic reconnection.\n    *   **Cons**: Unidirectional, not suitable for two-way communication, less performant than WebSockets for high-frequency updates.\n\n*   **Long Polling**: The client makes a request to the server, and the server holds the connection open until new data is available or a timeout occurs. Once data is sent (or timeout), the connection closes, and the client immediately re-initiates a new request. This is a compromise between traditional polling and WebSockets.\n    *   **Pros**: More real-time than traditional polling, less overhead than WebSockets for infrequent updates.\n    *   **Cons**: Still uses request/response model, can be resource-intensive on the server if many connections are held open.\n\n**When to Prefer Which:**\n*   **Polling**: Simple to implement, works well for infrequent updates or when slight delays are acceptable. Good for legacy APIs or when server-side push capabilities are not available/feasible.\n*   **SSE**: When you need a continuous stream of updates from the server to the client and two-way communication is not required (e.g., news feeds, real-time metrics display).\n*   **WebSockets**: When true bidirectional, low-latency, real-time communication is essential (e.g., chat apps, collaborative editing, gaming).\n*   **Long Polling**: A good fallback when WebSockets/SSE are not an option, but you need more responsiveness than traditional polling for infrequent updates.",
          "options": [],
          "analysisPoints": [
            "Identifies the inefficiencies of basic polling (network traffic, server load, latency).",
            "Explains WebSockets, SSE, and Long Polling with their characteristics.",
            "Compares and contrasts these alternatives, highlighting their pros and cons.",
            "Provides clear use cases for when each approach would be most appropriate.",
            "Demonstrates knowledge beyond basic React implementation into system design."
          ],
          "keyConcepts": [
            "Polling",
            "WebSockets",
            "Server-Sent Events (SSE)",
            "Long Polling",
            "Real-time Communication",
            "Performance Optimization",
            "Network Protocols"
          ],
          "evaluationCriteria": [
            "Depth of knowledge regarding real-time communication patterns.",
            "Ability to analyze trade-offs between different solutions.",
            "Understanding of network performance implications.",
            "System design thinking."
          ],
          "example": "",
          "tags": [
            "Performance",
            "Network",
            "Real-time",
            "System Design"
          ],
          "prerequisites": [
            "Networking Basics",
            "HTTP"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_user_status_7",
          "topic": "React StrictMode and `useEffect`",
          "level": "medium",
          "type": "flashcard",
          "question": "How does React's `StrictMode` affect the behavior of `useEffect` with an empty dependency array (`[]`) during development, and why?",
          "answer": "`StrictMode` will run the `useEffect` cleanup function, then the effect function itself, twice on mount. This helps detect issues like missing cleanup functions or incorrect side effects by simulating unmount/remount behavior.",
          "options": [],
          "analysisPoints": [
            "Understands `StrictMode`'s behavior with `useEffect`.",
            "Explains the reason behind this behavior (issue detection).",
            "Implication for cleanup functions."
          ],
          "keyConcepts": [
            "StrictMode",
            "useEffect",
            "React Development Tools",
            "Cleanup Function"
          ],
          "evaluationCriteria": [
            "Awareness of React development best practices.",
            "Understanding of `StrictMode`'s role in debugging.",
            "Knowledge of component lifecycle nuances."
          ],
          "example": "In `StrictMode`, during development, React intentionally mounts, unmounts, and then re-mounts components (or runs the effect, then its cleanup, then the effect again) to help developers catch issues related to side effects that don't have proper cleanup, or that rely on effects running only once without clean state. For a `useEffect` with `[]`, this means your initial `setInterval` will be set up, then immediately cleared (by the cleanup), then set up again. If you hadn't implemented the `clearInterval` properly, this behavior would highlight that bug by trying to clear a non-existent interval or creating duplicate intervals.",
          "tags": [
            "React",
            "StrictMode",
            "Debugging"
          ],
          "prerequisites": [
            "React Hooks",
            "React Development"
          ],
          "complexity": 6,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_user_status_8",
          "topic": "Controlled vs. Uncontrolled Components",
          "level": "easy",
          "type": "flashcard",
          "question": "Is the `<input>` element within `FormField` an example of a controlled or uncontrolled component?",
          "answer": "It is a controlled component because its value is tied to the `value` prop which is managed by React state, and its changes are handled via the `onChange` event.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies controlled component.",
            "Explains criteria for controlled component."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Uncontrolled Components",
            "React Forms"
          ],
          "evaluationCriteria": [
            "Basic React form knowledge."
          ],
          "example": "A controlled component means that the form element's value is controlled by React state. The `FormField` component receives `value` as a prop and passes it to the `<input>`'s `value` attribute. Any change to the input triggers the `onChange` handler, which then updates the parent component's state. This state change re-renders the `FormField` with the new `value`, thus React has full control over the input's rendered value.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_user_status_9",
          "topic": "Refactoring `UserStatusIndicator`",
          "level": "hard",
          "type": "code",
          "question": "Refactor the `checkStatus` logic within the `UserStatusIndicator` component to be more resilient to transient network failures. Implement a simple retry mechanism with a fixed number of retries and a delay between attempts. For simplicity, do not implement exponential backoff.\n\n```typescript\nimport React, { useState, useEffect } from 'react';\n\nconst UserStatusIndicator = ({ url, pollingInterval = 5000 }) => {\n  const [isOnline, setIsOnline] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function checkStatus() {\n      // TODO: Implement retry logic here\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        setIsOnline(response.status === 200);\n        setError(null);\n      } catch (err) {\n        setIsOnline(false);\n        setError(err.message);\n      }\n    }\n\n    checkStatus();\n    const intervalId = setInterval(checkStatus, pollingInterval);\n    \n    return () => clearInterval(intervalId);\n  }, [url, pollingInterval]);\n\n  if (isOnline === null && !error) return <div className=\"status-indicator loading\">Checking status...</div>;\n  if (error) return <div className=\"status-indicator error\">Error: {error}</div>;\n  return (\n    <div className={`status-indicator ${isOnline ? 'online' : 'offline'}`}>\n      <div className=\"indicator-dot\"></div>\n      <span>{isOnline ? 'Online' : 'Offline'}</span>\n    </div>\n  );\n};\n\nexport default UserStatusIndicator;\n```",
          "answer": "The refactored `checkStatus` function incorporates a retry mechanism with a fixed delay. It attempts the fetch a maximum number of times before giving up and setting an error state.",
          "options": [],
          "analysisPoints": [
            "Correctly implements a loop for retries.",
            "Uses `setTimeout` or similar for delaying retries.",
            "Manages attempt count and breaks loop on success.",
            "Properly propagates final error if all retries fail."
          ],
          "keyConcepts": [
            "Error Handling",
            "Retry Mechanism",
            "Asynchronous JavaScript",
            "Promises"
          ],
          "evaluationCriteria": [
            "Ability to write robust asynchronous code.",
            "Problem-solving for common network issues.",
            "Clean integration into existing component logic."
          ],
          "example": "```typescript\nimport React, { useState, useEffect } from 'react';\n\nconst UserStatusIndicator = ({ url, pollingInterval = 5000, retries = 3, retryDelay = 1000 }) => {\n  const [isOnline, setIsOnline] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function checkStatusWithRetry(attempt = 1) {\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          // Throw error for non-2xx status codes\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        setIsOnline(response.status === 200);\n        setError(null);\n      } catch (err) {\n        console.error(`Attempt ${attempt} failed:`, err.message);\n        if (attempt < retries) {\n          // Retry after a delay\n          setTimeout(() => {\n            checkStatusWithRetry(attempt + 1);\n          }, retryDelay);\n        } else {\n          // All retries failed\n          setIsOnline(false);\n          setError(`Failed after ${retries} attempts: ${err.message}`);\n        }\n      }\n    }\n\n    // Initial check and subsequent polling\n    checkStatusWithRetry();\n    const intervalId = setInterval(() => checkStatusWithRetry(), pollingInterval);\n    \n    return () => clearInterval(intervalId);\n  }, [url, pollingInterval, retries, retryDelay]);\n\n  if (isOnline === null && !error) {\n    return <div className=\"status-indicator loading\">Checking status...</div>;\n  }\n  if (error) {\n    return <div className=\"status-indicator error\">Error: {error}</div>;\n  }\n  return (\n    <div className={`status-indicator ${isOnline ? 'online' : 'offline'}`}>\n      <div className=\"indicator-dot\"></div>\n      <span>{isOnline ? 'Online' : 'Offline'}</span>\n    </div>\n  );\n};\n\nexport default UserStatusIndicator;\n```",
          "tags": [
            "React",
            "Hooks",
            "Error Handling",
            "Retry",
            "Asynchronous"
          ],
          "prerequisites": [
            "JavaScript Promises",
            "setTimeout"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_dynamic_form_1",
          "topic": "Dynamic Form Generation",
          "level": "medium",
          "type": "open",
          "question": "How would you build a dynamic form generator in React that takes a JSON schema as input and renders the appropriate form elements? Describe the components involved and their responsibilities.",
          "answer": "This question evaluates the ability to design a flexible UI system. A comprehensive answer should detail:\n1.  **JSON Schema Structure**: Explain how the JSON schema would define fields (e.g., `id`, `name`, `type`, `label`, `placeholder`, `required`, `options` for select).\n2.  **`DynamicForm` Component**: This would be the main container component. Its responsibilities include:\n    *   Receiving the `schema` as a prop.\n    *   Managing the overall form `formData` state using `useState`, typically an object where keys are field `id`s and values are current input values.\n    *   Iterating over the `schema` array and rendering individual `FormField` components.\n    *   Providing a generic `onChange` handler (`handleFieldChange`) that `FormField`s can call to update the central `formData` state.\n    *   Handling form submission (`onSubmit`).\n3.  **`FormField` Component**: A reusable component responsible for rendering a single form element. Its responsibilities include:\n    *   Receiving a `field` definition object, the `value` for that field, and the `onChange` handler from `DynamicForm`.\n    *   Using a `switch` statement or conditional rendering to render the correct HTML input element (`<input>`, `<textarea>`, `<select>`, `<input type='checkbox'>`) based on `field.type`.\n    *   Ensuring the input is a controlled component by binding its `value` to the `value` prop and calling the `onChange` handler on input changes.\n4.  **Controlled Components Principle**: Emphasize how input values are controlled by React state for predictable behavior and easier validation.\n5.  **Key Prop**: Mention the importance of the `key` prop when rendering lists of `FormField` components for React's reconciliation process.\n\nExample Schema:\n```json\n[\n  { \"id\": \"name\", \"type\": \"text\", \"label\": \"Full Name\", \"required\": true },\n  { \"id\": \"email\", \"type\": \"email\", \"label\": \"Email\", \"required\": true, \"placeholder\": \"Enter your email\" },\n  { \"id\": \"message\", \"type\": \"textarea\", \"label\": \"Message\", \"rows\": 4 },\n  { \"id\": \"country\", \"type\": \"select\", \"label\": \"Country\", \"options\": [\n    { \"label\": \"USA\", \"value\": \"US\" }, \n    { \"label\": \"Canada\", \"value\": \"CA\" }\n  ]},\n  { \"id\": \"terms\", \"type\": \"checkbox\", \"label\": \"Agree to terms\", \"defaultValue\": false }\n]\n```",
          "options": [],
          "analysisPoints": [
            "Clearly outlines the architecture (DynamicForm, FormField).",
            "Describes responsibilities of each component.",
            "Explains state management for dynamic forms.",
            "Understands controlled components and their application.",
            "Demonstrates knowledge of rendering different input types.",
            "Mentions important React list properties (`key`)."
          ],
          "keyConcepts": [
            "Dynamic Forms",
            "JSON Schema",
            "React Components",
            "Controlled Components",
            "State Management",
            "Component Composition"
          ],
          "evaluationCriteria": [
            "Architectural design skills.",
            "Understanding of React's core principles for forms.",
            "Ability to translate data structures into UI."
          ],
          "example": "",
          "tags": [
            "React",
            "Forms",
            "Dynamic UI",
            "Component Design"
          ],
          "prerequisites": [
            "React State & Props"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_2",
          "topic": "Controlled Components in Dynamic Forms",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following best describes why form fields in a dynamic form generator in React are typically implemented as 'controlled components'?",
          "answer": "To keep the form state synchronized with React's state, enabling easy validation, manipulation, and submission.",
          "options": [
            "To allow direct DOM manipulation for performance optimization.",
            "To completely decouple the form's state from React's rendering cycle.",
            "To keep the form state synchronized with React's state, enabling easy validation, manipulation, and submission.",
            "To automatically manage focus and blur events without manual handling."
          ],
          "analysisPoints": [
            "Identifies the core benefit of controlled components.",
            "Contrasts with misconceptions about uncontrolled components or direct DOM manipulation.",
            "Emphasizes advantages like validation and data handling."
          ],
          "keyConcepts": [
            "Controlled Components",
            "React Forms",
            "State Management",
            "Form Validation"
          ],
          "evaluationCriteria": [
            "Fundamental understanding of React form principles.",
            "Ability to explain the rationale behind architectural choices."
          ],
          "example": "In a controlled component, the input element's value is driven by React state. Whenever the input changes (e.g., user types), an `onChange` handler updates the React state, which then re-renders the input with the new value. This centralized control makes it straightforward to:\n1.  **Validate input**: As soon as a user types, you can check constraints and provide immediate feedback.\n2.  **Manipulate input**: You can programmatically set or clear input values based on other logic.\n3.  **Submit data**: All form data is readily available in a single state object for submission.\n4.  **Debug**: The state accurately reflects the UI, simplifying debugging.",
          "tags": [
            "React",
            "Forms",
            "State Management"
          ],
          "prerequisites": [
            "React Forms"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_3",
          "topic": "Dynamic Form - Key Prop",
          "level": "easy",
          "type": "flashcard",
          "question": "When mapping over an array of field definitions to render multiple `FormField` components, why is it important to include a `key` prop?",
          "answer": "The `key` prop helps React efficiently update the UI by identifying which items have changed, are added, or are removed, improving performance and preventing rendering issues.",
          "options": [],
          "analysisPoints": [
            "Understands React list rendering requirements.",
            "Explains the purpose of the `key` prop."
          ],
          "keyConcepts": [
            "React Lists",
            "Key Prop",
            "Reconciliation"
          ],
          "evaluationCriteria": [
            "Basic React rendering knowledge."
          ],
          "example": "The `key` prop provides a stable identity to each element in a list. When the list changes (e.g., fields are reordered, added, or removed in the schema), React uses the keys to match old elements with new elements in the virtual DOM. This allows React to efficiently update only the necessary parts of the actual DOM, rather than re-rendering the entire list. Without unique and stable keys, React might behave unpredictably, leading to performance issues or incorrect component state.",
          "tags": [
            "React",
            "Lists",
            "Performance"
          ],
          "prerequisites": [
            "React Rendering"
          ],
          "complexity": 4,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_dynamic_form_4",
          "topic": "Form State Management",
          "level": "medium",
          "type": "open",
          "question": "In a dynamic form, how would you manage the overall form state (`formData`) when individual `FormField` components are responsible for their own input types and `onChange` handling? What challenges might arise?",
          "answer": "The `DynamicForm` parent component typically holds the overall `formData` state using `useState`. This state is usually an object where keys correspond to field `id`s from the schema, and values are the current input values. Each `FormField` component receives two crucial props from the parent:\n1.  `value`: The current value for that specific field from the parent's `formData` state.\n2.  `onChange`: A function (e.g., `handleFieldChange`) that the `FormField` calls whenever its input value changes.\n\nThe `handleFieldChange` function in `DynamicForm` would then take the field's `id` and its new `value` as arguments, and update the `formData` state accordingly using `setFormData(prevData => ({ ...prevData, [id]: value }))`.\n\n**Challenges that might arise:**\n*   **Performance with Large Forms**: If `formData` is a single large object and every field change causes a re-render of the entire `DynamicForm` (and potentially all `FormField`s), performance can degrade. Memoization (`React.memo`) on `FormField`s can help, but careful state structure is more effective.\n*   **Nested Structures/Arrays**: Handling deeply nested objects or arrays of fields in the `formData` requires more complex state updates (e.g., using libraries like Immer or deep cloning).\n*   **Complex Validation**: Implementing interdependent field validations or complex regex validations on the fly can be challenging to manage efficiently and display feedback.\n*   **Initialization**: Properly initializing `formData` from a schema, especially for different field types (e.g., booleans for checkboxes, arrays for multi-selects), requires careful logic.\n*   **Prop Drilling**: If the `onChange` handler or validation logic needs to be passed deeply through several layers of components, it can lead to prop drilling. Context API or state management libraries (Redux, Zustand) can mitigate this.",
          "options": [],
          "analysisPoints": [
            "Explains the flow of state updates from child to parent.",
            "Identifies `formData` structure and `handleFieldChange` pattern.",
            "Discusses performance concerns (re-renders, memoization).",
            "Addresses complexities like nested data and advanced validation.",
            "Mentions potential challenges like prop drilling.",
            "Suggests solutions for complex scenarios (Immer, Context API, state management libraries)."
          ],
          "keyConcepts": [
            "State Management",
            "Controlled Components",
            "Component Communication",
            "Performance",
            "Form Validation",
            "Prop Drilling"
          ],
          "evaluationCriteria": [
            "In-depth understanding of React state flow.",
            "Ability to anticipate and address common frontend challenges.",
            "Knowledge of performance optimization techniques.",
            "Awareness of advanced state management patterns."
          ],
          "example": "",
          "tags": [
            "React",
            "Forms",
            "State Management",
            "Performance",
            "Architecture"
          ],
          "prerequisites": [
            "React State",
            "Component Props"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_dynamic_form_5",
          "topic": "Implementing Checkbox in Dynamic Forms",
          "level": "medium",
          "type": "code",
          "question": "Modify the `FormField` component to correctly handle a 'checkbox' input type. Ensure it is a controlled component and that its value passed to `onChange` is a boolean.\n\n```typescript\nimport React from 'react';\n\nconst FormField = ({ field, onChange, value }) => {\n  const commonProps = {\n    id: field.id,\n    name: field.name,\n    value: value || '', // This might need adjustment for checkbox\n    onChange: e => onChange(field.id, e.target.value), // This definitely needs adjustment\n    placeholder: field.placeholder,\n    required: field.required,\n    className: 'form-field-input'\n  };\n\n  switch (field.type) {\n    case 'text':\n      return (\n        <input type=\"text\" {...commonProps} />\n      );\n    case 'textarea':\n      return (\n        <textarea {...commonProps} rows={field.rows || 3} />\n      );\n    // TODO: Add case for 'checkbox'\n    default:\n      return null;\n  }\n};\n\nexport default FormField;\n```",
          "answer": "The `checkbox` case must use the `checked` attribute instead of `value`, and `e.target.checked` instead of `e.target.value` for its `onChange` handler.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies `checked` attribute for checkboxes.",
            "Uses `e.target.checked` to get the boolean state.",
            "Ensures the checkbox is controlled.",
            "Correctly adapts `value` prop handling for boolean state."
          ],
          "keyConcepts": [
            "React Forms",
            "Controlled Components",
            "Checkbox Input"
          ],
          "evaluationCriteria": [
            "Accuracy of React form element implementation.",
            "Understanding of specific input type properties."
          ],
          "example": "```typescript\nimport React from 'react';\n\nconst FormField = ({ field, onChange, value }) => {\n  const commonInputProps = {\n    id: field.id,\n    name: field.name,\n    placeholder: field.placeholder,\n    required: field.required,\n    className: 'form-field-input'\n  };\n\n  switch (field.type) {\n    case 'text':\n    case 'email':\n    case 'password':\n    case 'number':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <input type={field.type} value={value || ''} onChange={e => onChange(field.id, e.target.value)} {...commonInputProps} />\n        </div>\n      );\n    case 'textarea':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <textarea value={value || ''} onChange={e => onChange(field.id, e.target.value)} rows={field.rows || 3} {...commonInputProps} />\n        </div>\n      );\n    case 'checkbox':\n      return (\n        <div className=\"form-group checkbox-group\">\n          <input\n            type=\"checkbox\"\n            id={field.id}\n            name={field.name}\n            checked={!!value} // Checkbox uses 'checked' attribute for its state\n            onChange={e => onChange(field.id, e.target.checked)} // Get boolean value from e.target.checked\n            required={field.required}\n            className=\"form-field-checkbox\"\n          />\n          <label htmlFor={field.id}>{field.label}</label>\n        </div>\n      );\n    case 'select':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <select value={value || ''} onChange={e => onChange(field.id, e.target.value)} {...commonInputProps}>\n            {field.options && field.options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n        </div>\n      );\n    default:\n      return (\n        <div className=\"form-group error\">\n          <p>Unknown field type: {field.type}</p>\n        </div>\n      );\n  }\n};\n\nexport default FormField;\n```",
          "tags": [
            "React",
            "Forms",
            "Coding Challenge"
          ],
          "prerequisites": [
            "React Forms",
            "JavaScript Events"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_6",
          "topic": "Form Validation Strategy",
          "level": "hard",
          "type": "open",
          "question": "How would you integrate client-side validation into the dynamic form generator based on rules defined in the JSON schema (e.g., `required`, `minLength`, `pattern`)? Discuss where validation logic would reside and how errors would be displayed.",
          "answer": "Integrating client-side validation:\n\n**1. JSON Schema Augmentation:**\n   The schema would need additional properties for validation rules, e.g.:\n   ```json\n   { \"id\": \"username\", \"type\": \"text\", \"label\": \"Username\", \"required\": true, \"minLength\": 5, \"pattern\": \"^[a-zA-Z0-9]+$\" }\n   ```\n\n**2. Validation Logic Location:**\n   *   **`DynamicForm` (Centralized)**: The `DynamicForm` component is ideal for housing the primary validation logic. It can validate the entire `formData` object against the `schema` before submission. This allows for cross-field validation if needed.\n   *   **`FormField` (Field-level)**: Each `FormField` can perform its own immediate validation (e.g., on `blur` or `onChange`) against its specific field rules, providing instant feedback. It would then report its validity status or error message back up to the `DynamicForm`.\n\n**3. Validation Process & State:**\n   *   **Validation State**: The `DynamicForm` would need an additional state to store validation errors, e.g., `const [errors, setErrors] = useState({});`. This `errors` object would map field `id`s to error messages.\n   *   **Validation Function**: A `validateForm` function in `DynamicForm` would iterate through `formData` and `schema`, applying validation rules.\n   *   **When to Validate:**\n        *   **On `submit`**: Always validate the entire form. If invalid, prevent submission and display errors.\n        *   **On `blur` / `onChange`**: Field-level validation can be triggered as the user interacts, providing real-time feedback. This logic might live in `FormField` and update parent state.\n\n**4. Displaying Errors:**\n   *   **Error State Propagation**: The `DynamicForm` would pass relevant error messages (`errors[field.id]`) down to each `FormField` as a prop (e.g., `errorMsg`).\n   *   **`FormField` Responsibility**: `FormField` would then conditionally render an error message (e.g., `<span className=\"error-message\">{errorMsg}</span>`) near the input and/or apply error styling (e.g., red border).\n   *   **Form-level Summary**: For forms with many fields, a summary of all errors at the top of the form can be helpful.\n\n**Example Validation (inside DynamicForm's `validateForm`):**\n```typescript\nconst validateForm = () => {\n  let newErrors = {};\n  let isValid = true;\n\n  schema.forEach(field => {\n    const value = formData[field.id];\n\n    if (field.required && (value === '' || value === false || value === null)) {\n      newErrors[field.id] = `${field.label} is required.`;\n      isValid = false;\n    }\n    // Add more validation rules (minLength, pattern, etc.)\n    // Example: minLength for text\n    if (field.minLength && typeof value === 'string' && value.length < field.minLength) {\n      newErrors[field.id] = `${field.label} must be at least ${field.minLength} characters.`;\n      isValid = false;\n    }\n    // Example: pattern validation\n    if (field.pattern && value) {\n        const regex = new RegExp(field.pattern);\n        if (!regex.test(value)) {\n            newErrors[field.id] = `${field.label} format is invalid.`;\n            isValid = false;\n        }\n    }\n  });\n  setErrors(newErrors);\n  return isValid;\n};\n\nconst handleSubmit = (e) => {\n  e.preventDefault();\n  if (validateForm()) {\n    onSubmit(formData);\n  }\n};\n```",
          "options": [],
          "analysisPoints": [
            "Defines schema extension for validation rules.",
            "Discusses the logical placement of validation (centralized vs. field-level).",
            "Explains the state management for errors.",
            "Details when validation should occur (on submit, on change/blur).",
            "Describes how error messages are passed and displayed in the UI.",
            "Provides a clear code example of basic validation logic."
          ],
          "keyConcepts": [
            "Form Validation",
            "JSON Schema",
            "State Management",
            "Error Handling",
            "Controlled Components",
            "UI/UX Feedback"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of validation strategies.",
            "Ability to design scalable validation systems.",
            "Consideration of user experience for error display.",
            "Practical implementation details."
          ],
          "example": "",
          "tags": [
            "React",
            "Forms",
            "Validation",
            "Architecture"
          ],
          "prerequisites": [
            "React State",
            "Component Communication"
          ],
          "complexity": 9,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_dynamic_form_7",
          "topic": "Form Performance",
          "level": "medium",
          "type": "flashcard",
          "question": "What is `React.memo` and how could it potentially be used to optimize the `FormField` component in a large dynamic form?",
          "answer": "`React.memo` is a higher-order component (HOC) that memoizes a component's rendering. It prevents a functional component from re-rendering if its props (and state) have not changed. It could optimize `FormField` by preventing unnecessary re-renders of unrelated fields when only one field's value changes.",
          "options": [],
          "analysisPoints": [
            "Defines `React.memo`.",
            "Explains its mechanism (prop comparison).",
            "Applies it to the specific context of a dynamic form for optimization.",
            "Understands trade-offs (shallow comparison, overhead)."
          ],
          "keyConcepts": [
            "React.memo",
            "Performance Optimization",
            "Higher-Order Components",
            "Re-rendering"
          ],
          "evaluationCriteria": [
            "Knowledge of React performance features.",
            "Ability to apply optimization techniques.",
            "Understanding of component rendering lifecycles."
          ],
          "example": "```typescript\nimport React from 'react';\n\nconst FormField = React.memo(({ field, onChange, value }) => {\n  // ... (existing FormField implementation)\n  return (/* JSX */)\n});\n\nexport default FormField;\n```\nIn a large dynamic form, when one field's value changes, the `DynamicForm`'s `formData` state updates. This causes the `DynamicForm` to re-render, and by default, all its child `FormField` components would also re-render. By wrapping `FormField` with `React.memo`, it will only re-render if its `field`, `onChange`, or `value` props actually change. Since `onChange` is usually stable (if defined properly, or passed down from a `useCallback`), and `field` objects often don't change, only the `FormField` whose `value` prop changed (or was involved in the input) would re-render. This significantly reduces unnecessary renders, improving performance.",
          "tags": [
            "React",
            "Performance",
            "Optimization",
            "Memoization"
          ],
          "prerequisites": [
            "React Hooks",
            "Functional Components"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_8",
          "topic": "Form Element Accessibility",
          "level": "medium",
          "type": "open",
          "question": "What accessibility considerations are important when building dynamic forms in React? Provide specific examples from the `FormField` component.",
          "answer": "Accessibility (A11y) is crucial for dynamic forms to ensure they are usable by everyone, including those with disabilities, often relying on screen readers or keyboard navigation.\n\nKey considerations and examples:\n\n1.  **Labels and `htmlFor`**: Every input field should have a descriptive label associated with it. The `htmlFor` attribute on the `<label>` should match the `id` of the input element. This links the label to the input, allowing screen readers to announce the label when the input is focused.\n    *   **Example (from `FormField`)**: \n        ```jsx\n        <label htmlFor={field.id}>{field.label}</label>\n        <input id={field.id} ... />\n        ```\n        This ensures `label` clicks also focus the input.\n\n2.  **Keyboard Navigation**: All interactive elements (inputs, buttons, select) must be keyboard-focusable and navigable using Tab and Shift+Tab. Standard HTML form elements generally handle this by default.\n    *   **Example**: Using native `<input>`, `<textarea>`, `<select>` elements inherently supports keyboard navigation.\n\n3.  **Error Messages and `aria-describedby` / `aria-live`**: When validation errors occur, they should be clearly communicated to screen readers.\n    *   **`aria-describedby`**: Link the input to its error message element using `aria-describedby=\"error-id\"`. When the input is focused, the screen reader will announce both the label and the error.\n    *   **`aria-live` regions**: For dynamic error messages that appear or disappear, wrap the error message container in an `aria-live` region (e.g., `<div aria-live=\"polite\">`). This tells screen readers to announce changes within that region.\n\n4.  **Semantic HTML**: Use appropriate HTML5 input types (`type=\"email\"`, `type=\"number\"`, `type=\"password\"`) for better browser validation, autofill, and assistive technology interpretation.\n    *   **Example (from `FormField`)**: `input type={field.type}` correctly uses the semantic type.\n\n5.  **Focus Management**: Ensure logical focus order, especially after dynamic content changes (e.g., new fields appearing, error messages). Sometimes `useRef` and `focus()` can be needed to direct focus.\n\n6.  **Required Fields**: Clearly indicate required fields, both visually (e.g., an asterisk `*`) and programmatically using the `required` HTML attribute and/or `aria-required=\"true\"`.\n    *   **Example (from `FormField`)**: `required={field.required}` attribute is passed to the input.\n\nBy following these principles, dynamically generated forms can be made accessible to a broader audience.",
          "options": [],
          "analysisPoints": [
            "Identifies key accessibility principles for forms.",
            "Provides specific HTML attributes and their use cases (`htmlFor`, `aria-describedby`, `aria-live`, `required`).",
            "Connects accessibility features to the `FormField` component's implementation.",
            "Demonstrates understanding of semantic HTML and keyboard navigation."
          ],
          "keyConcepts": [
            "Accessibility (A11y)",
            "Semantic HTML",
            "ARIA Attributes",
            "Form Design",
            "Screen Readers",
            "UI/UX"
          ],
          "evaluationCriteria": [
            "Awareness of web accessibility standards.",
            "Ability to apply accessibility best practices in code.",
            "Understanding of how assistive technologies interact with forms."
          ],
          "example": "",
          "tags": [
            "Accessibility",
            "A11y",
            "Forms",
            "UI/UX",
            "Best Practices"
          ],
          "prerequisites": [
            "HTML Forms",
            "Web Accessibility Basics"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_dynamic_form_9",
          "topic": "Dynamic Form - Nested Structures",
          "level": "hard",
          "type": "code",
          "question": "Extend the `DynamicForm` and `FormField` components to support a nested JSON schema, allowing for a field of `type: 'object'` that contains its own array of `fields`. The `formData` should correctly reflect this nested structure.\n\n**Example Nested Schema:**\n```json\n[\n  { \"id\": \"name\", \"type\": \"text\", \"label\": \"Name\" },\n  {\n    \"id\": \"address\",\n    \"type\": \"object\",\n    \"label\": \"Address Information\",\n    \"fields\": [\n      { \"id\": \"street\", \"type\": \"text\", \"label\": \"Street\" },\n      { \"id\": \"city\", \"type\": \"text\", \"label\": \"City\" }\n    ]\n  }\n]\n```\n\nYour task is to modify the `DynamicForm` and `FormField` (if necessary) to handle `type: 'object'` and update `formData` to be like: `{ name: '...', address: { street: '...', city: '...' } }`.\n\n```typescript\n// DynamicForm.tsx (Simplified for question)\nimport React, { useState } from 'react';\nimport FormField from './FormField'; \n\nconst DynamicForm = ({ schema, onSubmit }) => {\n  const initialFormData = schema.reduce((acc, field) => {\n    acc[field.id] = field.defaultValue || ''; \n    if (field.type === 'checkbox') acc[field.id] = !!field.defaultValue;\n    // TODO: Handle 'object' type initialization\n    return acc;\n  }, {});\n\n  const [formData, setFormData] = useState(initialFormData);\n\n  const handleFieldChange = (id, value) => {\n    // TODO: Handle nested updates\n    setFormData(prevData => ({\n      ...prevData,\n      [id]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Form submitted with data:', formData);\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      {schema.map(field => (\n        <FormField\n          key={field.id}\n          field={field}\n          value={formData[field.id]}\n          onChange={handleFieldChange}\n        />\n      ))}\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n\n// FormField.tsx (Simplified for question)\nimport React from 'react';\n\nconst FormField = ({ field, onChange, value }) => {\n  switch (field.type) {\n    case 'text':\n    case 'textarea':\n    case 'checkbox':\n    case 'select':\n      // ... (existing implementation)\n      return (\n        <div>\n          <label htmlFor={field.id}>{field.label}</label>\n          {/* Input/Textarea/Checkbox/Select */}\n          <input type=\"text\" id={field.id} value={value || ''} onChange={e => onChange(field.id, e.target.value)} />\n        </div>\n      );\n    // TODO: Handle 'object' type. It should recursively render DynamicForm\n    default:\n      return null;\n  }\n};\n\n// NOTE: Assume FormField.tsx is separate and DynamicForm imports it.\n```",
          "answer": "To support nested objects, the `FormField` component must conditionally render another `DynamicForm` instance when `field.type` is 'object'. The `DynamicForm`'s `handleFieldChange` must be updated to correctly merge nested object updates into the overall `formData` state.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies the need for recursion for 'object' type fields.",
            "Modifies `FormField` to render `DynamicForm` for nested schemas.",
            "Adjusts `DynamicForm`'s `initialFormData` logic to initialize nested objects.",
            "Crucially, refactors `handleFieldChange` to perform a shallow or deep merge for nested updates, preserving other fields.",
            "Ensures `key` prop is used in recursive mapping if applicable."
          ],
          "keyConcepts": [
            "Dynamic Forms",
            "Recursion",
            "Nested Objects",
            "State Management",
            "Immutability",
            "Component Composition"
          ],
          "evaluationCriteria": [
            "Ability to implement recursive component patterns.",
            "Proficiency in managing complex nested state.",
            "Understanding of immutable state updates in React.",
            "Problem-solving for complex UI structures."
          ],
          "example": "```typescript\n// DynamicForm.tsx\nimport React, { useState } from 'react';\nimport FormField from './FormField'; // Assume FormField is in a separate file\n\nconst DynamicForm = ({ schema, onSubmit, initialValues = {} }) => {\n  // Helper to initialize nested objects recursively\n  const initializeFormData = (s, currentValues = {}) => {\n    return s.reduce((acc, field) => {\n      if (field.type === 'object' && field.fields) {\n        acc[field.id] = initializeFormData(field.fields, currentValues[field.id] || {});\n      } else if (field.type === 'checkbox') {\n        acc[field.id] = typeof currentValues[field.id] !== 'undefined' ? !!currentValues[field.id] : !!field.defaultValue;\n      } else {\n        acc[field.id] = typeof currentValues[field.id] !== 'undefined' ? currentValues[field.id] : (field.defaultValue || '');\n      }\n      return acc;\n    }, {});\n  };\n\n  const [formData, setFormData] = useState(() => initializeFormData(schema, initialValues));\n\n  // Function to deeply update nested state\n  const setNestedValue = (obj, path, value) => {\n    const newObj = { ...obj };\n    let current = newObj;\n    for (let i = 0; i < path.length - 1; i++) {\n      const key = path[i];\n      if (!current[key] || typeof current[key] !== 'object') {\n        current[key] = {}; // Ensure path exists\n      }\n      current = current[key];\n    }\n    current[path[path.length - 1]] = value;\n    return newObj;\n  };\n\n  const handleFieldChange = (path, value) => {\n    // Path can be a string (e.g., 'name') or an array (e.g., ['address', 'street'])\n    const fullPath = Array.isArray(path) ? path : [path];\n    setFormData(prevData => setNestedValue(prevData, fullPath, value));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Form submitted with data:', formData);\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      {schema.map(field => (\n        <FormField\n          key={field.id}\n          field={field}\n          value={formData[field.id]}\n          // Pass current path for nested fields. If it's a top-level field, pass its ID.\n          // If it's a nested form, it will append its own field IDs to this path.\n          onChange={(fieldId, val) => handleFieldChange(fieldId, val)}\n        />\n      ))}\n      <button type=\"submit\" className=\"submit-button\">Submit Form</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n\n// FormField.tsx\nimport React from 'react';\nimport DynamicForm from './DynamicForm'; // Import DynamicForm for recursion\n\nconst FormField = ({ field, onChange, value, currentPath = [] }) => {\n  const commonProps = {\n    id: field.id,\n    name: field.name,\n    placeholder: field.placeholder,\n    required: field.required,\n    className: 'form-field-input'\n  };\n\n  // Helper to construct path for nested fields\n  const getFullPath = (fieldId) => [...currentPath, fieldId];\n\n  switch (field.type) {\n    case 'text':\n    case 'email':\n    case 'password':\n    case 'number':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <input type={field.type} value={value || ''} onChange={e => onChange(getFullPath(field.id), e.target.value)} {...commonProps} />\n        </div>\n      );\n    case 'textarea':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <textarea value={value || ''} onChange={e => onChange(getFullPath(field.id), e.target.value)} rows={field.rows || 3} {...commonProps} />\n        </div>\n      );\n    case 'checkbox':\n      return (\n        <div className=\"form-group checkbox-group\">\n          <input\n            type=\"checkbox\"\n            id={field.id}\n            name={field.name}\n            checked={!!value}\n            onChange={e => onChange(getFullPath(field.id), e.target.checked)}\n            required={field.required}\n            className=\"form-field-checkbox\"\n          />\n          <label htmlFor={field.id}>{field.label}</label>\n        </div>\n      );\n    case 'select':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <select value={value || ''} onChange={e => onChange(getFullPath(field.id), e.target.value)} {...commonProps}>\n            {field.options && field.options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n        </div>\n      );\n    case 'object':\n      // Recursive rendering for nested objects\n      if (!field.fields || !Array.isArray(field.fields)) {\n        console.warn(`Object field '${field.id}' must have a 'fields' array.`);\n        return null;\n      }\n      return (\n        <fieldset className=\"form-group nested-fieldset\">\n          <legend>{field.label}</legend>\n          <DynamicForm\n            schema={field.fields}\n            initialValues={value} // Pass current nested object as initialValues to the nested form\n            // This onChange is crucial: it passes the entire nested form's data up\n            onSubmit={(nestedData) => onChange(getFullPath(field.id), nestedData)}\n          />\n        </fieldset>\n      );\n    default:\n      return (\n        <div className=\"form-group error\">\n          <p>Unknown field type: {field.type}</p>\n        </div>\n      );\n  }\n};\n\nexport default FormField;\n```",
          "tags": [
            "React",
            "Forms",
            "Recursion",
            "State Management",
            "Complex Data Structures"
          ],
          "prerequisites": [
            "React State & Props",
            "JavaScript Objects"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "expert"
        }
      ],
      "tasks": [
        {
          "id": "task_resilient_api_polling",
          "title": "Implement a Resilient API Polling Component with Exponential Backoff",
          "description": "\nExtend the `UserStatusIndicator` component to make its API polling more robust. Implement a retry mechanism with exponential backoff for network or HTTP errors.\n\n**Requirements:**\n1.  **Exponential Backoff**: After a failed attempt, wait for `initialDelay * (2^attempt)` milliseconds before retrying. For example, if `initialDelay` is 1000ms:\n    *   1st retry (after 1st failure): 1000ms\n    *   2nd retry (after 2nd failure): 2000ms\n    *   3rd retry (after 3rd failure): 4000ms\n2.  **Maximum Retries**: Allow a configurable maximum number of retry attempts.\n3.  **Polling Resumption**: After a successful retry, the component should resume regular polling at the `pollingInterval`.\n4.  **Error State**: If all retries fail, update the UI to show a persistent error message.\n5.  **Clean up**: Ensure all timers (polling and retry) are correctly cleared on unmount.\n\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState, useEffect } from 'react';\n\ninterface UserStatusIndicatorProps {\n  url: string;\n  pollingInterval?: number; // interval for regular successful polls\n  maxRetries?: number; // max retry attempts on failure\n  initialRetryDelay?: number; // initial delay for exponential backoff\n}\n\nconst UserStatusIndicator: React.FC<UserStatusIndicatorProps> = ({\n  url,\n  pollingInterval = 5000,\n  maxRetries = 5,\n  initialRetryDelay = 1000,\n}) => {\n  const [isOnline, setIsOnline] = useState<boolean | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [currentAttempt, setCurrentAttempt] = useState(0);\n\n  useEffect(() => {\n    let pollingTimer: NodeJS.Timeout | null = null;\n    let retryTimer: NodeJS.Timeout | null = null;\n\n    const cleanup = () => {\n      if (pollingTimer) clearInterval(pollingTimer);\n      if (retryTimer) clearTimeout(retryTimer);\n    };\n\n    async function checkStatus() {\n      try {\n        const response = await fetch(url);\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        setIsOnline(response.status === 200);\n        setError(null);\n        setCurrentAttempt(0); // Reset retry count on success\n        \n        // Schedule next regular poll\n        cleanup(); // Clear any existing timers\n        pollingTimer = setInterval(checkStatus, pollingInterval);\n\n      } catch (err: any) {\n        console.error('Fetch error:', err.message);\n        setCurrentAttempt(prevAttempt => prevAttempt + 1);\n\n        if (currentAttempt < maxRetries) {\n          const delay = initialRetryDelay * Math.pow(2, currentAttempt);\n          console.log(`Retrying in ${delay}ms (attempt ${currentAttempt + 1}/${maxRetries})`);\n          cleanup(); // Clear polling timer before scheduling retry\n          retryTimer = setTimeout(() => {\n            checkStatus(); // Call self for retry\n          }, delay);\n        } else {\n          // All retries failed\n          setIsOnline(false);\n          setError(`Failed to connect after ${maxRetries} attempts: ${err.message}`);\n          cleanup(); // Stop all timers\n        }\n      }\n    }\n\n    // Initial check on mount\n    checkStatus();\n\n    return cleanup; // Cleanup function for useEffect\n  }, [url, pollingInterval, maxRetries, initialRetryDelay, currentAttempt]); // currentAttempt is a dependency to re-run effect for retry logic\n\n  // Loading state\n  if (isOnline === null && !error) {\n    return <div className=\"status-indicator loading\">Checking status...</div>;\n  }\n\n  // Error state\n  if (error) {\n    return <div className=\"status-indicator error\">Error: {error}</div>;\n  }\n\n  // Online/Offline state\n  return (\n    <div className={`status-indicator ${isOnline ? 'online' : 'offline'}`}>\n      <div className=\"indicator-dot\"></div>\n      <span>{isOnline ? 'Online' : 'Offline'}</span>\n    </div>\n  );\n};\n\nexport default UserStatusIndicator;\n",
          "solutionCode": "import React, { useState, useEffect, useRef, useCallback } from 'react';\n\ninterface UserStatusIndicatorProps {\n  url: string;\n  pollingInterval?: number; // interval for regular successful polls\n  maxRetries?: number; // max retry attempts on failure\n  initialRetryDelay?: number; // initial delay for exponential backoff\n}\n\nconst UserStatusIndicator: React.FC<UserStatusIndicatorProps> = ({\n  url,\n  pollingInterval = 5000,\n  maxRetries = 5,\n  initialRetryDelay = 1000,\n}) => {\n  const [isOnline, setIsOnline] = useState<boolean | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Using useRef to store mutable timers without re-rendering\n  const pollingTimerRef = useRef<NodeJS.Timeout | null>(null);\n  const retryTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Ref for mutable retry attempt counter (so it doesn't trigger effect re-runs)\n  const currentAttemptRef = useRef(0);\n\n  // Cleanup function for timers\n  const clearTimers = useCallback(() => {\n    if (pollingTimerRef.current) {\n      clearInterval(pollingTimerRef.current);\n      pollingTimerRef.current = null;\n    }\n    if (retryTimerRef.current) {\n      clearTimeout(retryTimerRef.current);\n      retryTimerRef.current = null;\n    }\n  }, []);\n\n  // Use useCallback to memoize checkStatus, preventing unnecessary effect re-runs\n  const checkStatus = useCallback(async () => {\n    try {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      setIsOnline(response.status === 200);\n      setError(null);\n      currentAttemptRef.current = 0; // Reset retry count on success\n\n      clearTimers(); // Clear any existing timers (retry or previous poll)\n      pollingTimerRef.current = setInterval(checkStatus, pollingInterval); // Schedule next regular poll\n\n    } catch (err: any) {\n      console.error('Fetch error:', err.message);\n      currentAttemptRef.current++;\n\n      if (currentAttemptRef.current <= maxRetries) {\n        const delay = initialRetryDelay * Math.pow(2, currentAttemptRef.current - 1); // currentAttemptRef.current starts at 1 for first retry\n        console.log(`Retrying in ${delay}ms (attempt ${currentAttemptRef.current}/${maxRetries})`);\n\n        clearTimers(); // Clear polling timer before scheduling retry\n        retryTimerRef.current = setTimeout(() => {\n          checkStatus(); // Call self for retry\n        }, delay);\n      } else {\n        // All retries failed\n        setIsOnline(false);\n        setError(`Failed to connect after ${maxRetries} attempts: ${err.message}`);\n        clearTimers(); // Stop all timers definitively\n      }\n    }\n  }, [url, pollingInterval, maxRetries, initialRetryDelay, clearTimers]);\n  // The dependency array for useCallback ensures checkStatus is recreated only when these props change.\n\n  useEffect(() => {\n    // Initial check on mount\n    checkStatus();\n\n    // Cleanup function for useEffect to clear timers on unmount\n    return clearTimers;\n  }, [checkStatus, clearTimers]); // checkStatus and clearTimers are dependencies because they are defined outside\n\n  // Loading state\n  if (isOnline === null && !error) {\n    return <div className=\"status-indicator loading\">Checking status...</div>;\n  }\n\n  // Error state\n  if (error) {\n    return <div className=\"status-indicator error\">Error: {error}</div>;\n  }\n\n  // Online/Offline state\n  return (\n    <div className={`status-indicator ${isOnline ? 'online' : 'offline'}`}>\n      <div className=\"indicator-dot\"></div>\n      <span>{isOnline ? 'Online' : 'Offline'}</span>\n    </div>\n  );\n};\n\nexport default UserStatusIndicator;\n",
          "testCases": [
            "**Test Case 1: Initial Success**\n- `url`: A URL that consistently returns status 200.\n- Expected: `isOnline` becomes `true`, UI shows 'Online', polling continues normally.",
            "**Test Case 2: Transient Failure (Recovers)**\n- `url`: A URL that returns status 500 for the first 2 calls, then 200.\n- `maxRetries`: 3, `initialRetryDelay`: 100.\n- Expected: UI shows 'Checking status...', then 'Error' briefly, then retries and shows 'Online'. `currentAttemptRef` should reset to 0 after success.",
            "**Test Case 3: Persistent Failure (All Retries Fail)**\n- `url`: A URL that consistently returns status 500 or throws a network error.\n- `maxRetries`: 2, `initialRetryDelay`: 100.\n- Expected: UI shows 'Checking status...', then transitions to 'Error' state after 2 retries (3 total attempts), stopping all polling/retries.",
            "**Test Case 4: Component Unmount**\n- Mount the component, wait a few seconds, then unmount it.\n- Expected: No `setInterval` or `setTimeout` calls should remain active after unmount. Check console logs for 'Clearing interval' / 'Clearing timeout' messages.",
            "**Test Case 5: Prop Change (url or pollingInterval)**\n- Mount component with `url A`. After 5 seconds, change `url` prop to `url B`.\n- Expected: Old timers for `url A` should be cleared, and new polling for `url B` should start immediately."
          ],
          "hints": [
            "Consider using `useRef` to store mutable values like `currentAttempt` and timer IDs (`pollingTimer`, `retryTimer`) to avoid making them dependencies of `useEffect` or `useCallback` unless their change truly needs to trigger re-execution of the effect/callback.",
            "The `checkStatus` function itself should be wrapped in `useCallback` to prevent unnecessary re-creation on every render, which would lead to `useEffect` re-running more often than desired.",
            "Ensure the cleanup logic correctly clears both `setInterval` and `setTimeout` timers to prevent resource leaks and unexpected behavior.",
            "Remember that `Math.pow(2, 0)` is 1, so the delay for the first retry attempt should be `initialRetryDelay * Math.pow(2, 0)` if `currentAttempt` is 0-indexed for retries (meaning `currentAttempt` is 0 for first failure, 1 for second etc.) or `initialRetryDelay * Math.pow(2, currentAttempt - 1)` if `currentAttempt` is 1-indexed for retries.",
            "The `checkStatus` function needs to manage when to re-schedule polling (after success) versus scheduling a retry (after failure).",
            "The `useEffect` dependency array needs to include `checkStatus` (if memoized with `useCallback`) and `clearTimers` if they are defined outside `useEffect` and used within it."
          ],
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Data Fetching",
            "Error Handling",
            "Polling",
            "Exponential Backoff",
            "Resilience"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "React Hooks (useState, useEffect, useRef, useCallback)",
            "JavaScript Promises",
            "Error Handling",
            "setTimeout",
            "setInterval"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Component Lifecycle",
            "Asynchronous JavaScript",
            "Network Resilience"
          ]
        },
        {
          "id": "task_dynamic_form_validation",
          "title": "Build a Full Dynamic Form with Client-Side Validation",
          "description": "\nComplete the dynamic form generator to handle a wider range of input types and implement basic client-side validation based on the JSON schema.\n\n**Requirements:**\n1.  **Extend `FormField`**: Ensure `FormField.tsx` can correctly render and manage state for `text`, `textarea`, `checkbox`, `select`, `email`, and `password` input types. The example `FormField` provides a good starting point.\n2.  **Add Validation Rules to Schema**: Augment the JSON schema to include validation rules. At a minimum, support `required: true` for all input types and `minLength: number` for `text`, `textarea`, `email`, `password` types.\n3.  **Implement Validation Logic**: \n    *   Create a validation function within `DynamicForm.tsx` that iterates through the `schema` and `formData`.\n    *   This function should check all validation rules (e.g., `required`, `minLength`).\n    *   Store validation errors in the `DynamicForm`'s state (e.g., an object mapping `field.id` to error messages).\n4.  **Display Error Messages**: Pass error messages from `DynamicForm` to relevant `FormField` components. Each `FormField` should display its specific error message clearly (e.g., red text below the input) when validation fails.\n5.  **Form Submission**: Prevent form submission if validation fails. Only call the `onSubmit` prop with the `formData` if the form is valid.\n6.  **User Experience**: Display errors on form submission. (Optional: Implement validation on blur for individual fields).\n\n**Example JSON Schema with Validation:**\n```json\n[\n  { \"id\": \"username\", \"type\": \"text\", \"label\": \"Username\", \"required\": true, \"minLength\": 3, \"placeholder\": \"Enter username\" },\n  { \"id\": \"email\", \"type\": \"email\", \"label\": \"Email Address\", \"required\": true, \"placeholder\": \"your@example.com\" },\n  { \"id\": \"password\", \"type\": \"password\", \"label\": \"Password\", \"required\": true, \"minLength\": 6 },\n  { \"id\": \"bio\", \"type\": \"textarea\", \"label\": \"Biography\", \"minLength\": 10, \"rows\": 4 },\n  { \"id\": \"country\", \"type\": \"select\", \"label\": \"Country\", \"required\": true, \"options\": [\n    { \"label\": \"Select Country\", \"value\": \"\" },\n    { \"label\": \"USA\", \"value\": \"US\" },\n    { \"label\": \"Canada\", \"value\": \"CA\" },\n    { \"label\": \"Mexico\", \"value\": \"MX\" }\n  ]},\n  { \"id\": \"newsletter\", \"type\": \"checkbox\", \"label\": \"Subscribe to newsletter\", \"defaultValue\": true }\n]\n```\n",
          "difficulty": "medium",
          "startingCode": "// DynamicForm.tsx\nimport React, { useState } from 'react';\nimport FormField from './FormField'; // Assume FormField is implemented as in theory example\n\nconst DynamicForm = ({ schema, onSubmit }) => {\n  const initialFormData = schema.reduce((acc, field) => {\n    acc[field.id] = field.defaultValue || '';\n    if (field.type === 'checkbox') acc[field.id] = !!field.defaultValue;\n    return acc;\n  }, {});\n\n  const [formData, setFormData] = useState(initialFormData);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({}); // State for validation errors\n\n  const handleFieldChange = (id, value) => {\n    setFormData(prevData => ({\n      ...prevData,\n      [id]: value,\n    }));\n    // Optional: Clear error for this field immediately on change\n    setErrors(prevErrors => { \n      const newErrors = { ...prevErrors };\n      delete newErrors[id];\n      return newErrors;\n    });\n  };\n\n  // TODO: Implement validateForm function\n  const validateForm = () => {\n    let newErrors: { [key: string]: string } = {};\n    let isValid = true;\n\n    schema.forEach(field => {\n      const value = formData[field.id];\n      \n      // Example: Required check\n      if (field.required && (value === '' || value === null || (field.type === 'checkbox' && value === false))) {\n        newErrors[field.id] = `${field.label} is required.`;\n        isValid = false;\n      }\n\n      // TODO: Add minLength check for text, textarea, email, password\n\n      // TODO: Add email format check (optional but good)\n\n    });\n\n    setErrors(newErrors);\n    return isValid;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (validateForm()) {\n      console.log('Form submitted with data:', formData);\n      onSubmit(formData);\n    } else {\n      console.log('Form has validation errors:', errors);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      {schema.map(field => (\n        <FormField\n          key={field.id}\n          field={field}\n          value={formData[field.id]}\n          onChange={handleFieldChange}\n          error={errors[field.id]} // Pass error message to FormField\n        />\n      ))}\n      <button type=\"submit\" className=\"submit-button\">Submit Form</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n\n// FormField.tsx (Extend this based on the theory example to support all types)\nimport React from 'react';\n\nconst FormField = ({ field, onChange, value, error }) => {\n  const commonProps = {\n    id: field.id,\n    name: field.name,\n    value: value || '',\n    onChange: e => onChange(field.id, e.target.value),\n    placeholder: field.placeholder,\n    required: field.required,\n    className: `form-field-input ${error ? 'error-input' : ''}` // Apply error class\n  };\n\n  switch (field.type) {\n    case 'text':\n    case 'email':\n    case 'password':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <input type={field.type} {...commonProps} />\n          {error && <span className=\"error-message\">{error}</span>} {/* Display error */}\n        </div>\n      );\n    case 'textarea':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <textarea {...commonProps} rows={field.rows || 3} />\n          {error && <span className=\"error-message\">{error}</span>}\n        </div>\n      );\n    case 'checkbox':\n      return (\n        <div className=\"form-group checkbox-group\">\n          <input\n            type=\"checkbox\"\n            id={field.id}\n            name={field.name}\n            checked={!!value}\n            onChange={e => onChange(field.id, e.target.checked)}\n            required={field.required}\n            className={`form-field-checkbox ${error ? 'error-input' : ''}`}\n          />\n          <label htmlFor={field.id}>{field.label}</label>\n          {error && <span className=\"error-message\">{error}</span>}\n        </div>\n      );\n    case 'select':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <select {...commonProps}>\n            {field.options && field.options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n          {error && <span className=\"error-message\">{error}</span>}\n        </div>\n      );\n    default:\n      return (\n        <div className=\"form-group error\">\n          <p>Unknown field type: {field.type}</p>\n        </div>\n      );\n  }\n};\n\nexport default FormField;\n",
          "solutionCode": "// DynamicForm.tsx\nimport React, { useState } from 'react';\nimport FormField from './FormField'; \n\ninterface FieldSchema {\n  id: string;\n  type: string;\n  label: string;\n  required?: boolean;\n  minLength?: number;\n  maxLength?: number;\n  placeholder?: string;\n  rows?: number;\n  options?: { label: string; value: string }[];\n  pattern?: string;\n  defaultValue?: any;\n}\n\ninterface DynamicFormProps {\n  schema: FieldSchema[];\n  onSubmit: (data: { [key: string]: any }) => void;\n}\n\nconst DynamicForm: React.FC<DynamicFormProps> = ({ schema, onSubmit }) => {\n  const initialFormData = schema.reduce((acc, field) => {\n    acc[field.id] = field.defaultValue || (field.type === 'checkbox' ? false : '');\n    if (field.type === 'select' && field.options && field.options.length > 0 && field.options[0].value === '') {\n      acc[field.id] = ''; // Ensure default empty value for select if first option is empty\n    }\n    return acc;\n  }, {});\n\n  const [formData, setFormData] = useState<{ [key: string]: any }>(initialFormData);\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const handleFieldChange = (id: string, value: any) => {\n    setFormData(prevData => ({\n      ...prevData,\n      [id]: value,\n    }));\n    // Clear error for this field immediately on change\n    setErrors(prevErrors => {\n      const newErrors = { ...prevErrors };\n      delete newErrors[id];\n      return newErrors;\n    });\n  };\n\n  const validateForm = () => {\n    let newErrors: { [key: string]: string } = {};\n    let isValid = true;\n\n    schema.forEach(field => {\n      const value = formData[field.id];\n      \n      // Required check\n      if (field.required) {\n        if (field.type === 'checkbox' && value === false) {\n          newErrors[field.id] = `${field.label} is required.`;\n          isValid = false;\n        } else if (typeof value === 'string' && value.trim() === '') {\n          newErrors[field.id] = `${field.label} is required.`;\n          isValid = false;\n        } else if (value === null || typeof value === 'undefined') {\n          newErrors[field.id] = `${field.label} is required.`;\n          isValid = false;\n        }\n      }\n\n      // minLength check for string-based inputs\n      if (field.minLength && typeof value === 'string' && value.length < field.minLength) {\n        newErrors[field.id] = `${field.label} must be at least ${field.minLength} characters.`;\n        isValid = false;\n      }\n\n      // Optional: Email format check (basic regex)\n      if (field.type === 'email' && value && !/^[\\w.-]+@[\\w.-]+\\.\\w{2,4}$/i.test(value)) {\n        newErrors[field.id] = `Please enter a valid email address.`;\n        isValid = false;\n      }\n\n      // Optional: Pattern check (more generic regex)\n      if (field.pattern && typeof value === 'string' && value && !new RegExp(field.pattern).test(value)) {\n        newErrors[field.id] = `${field.label} format is invalid.`;\n        isValid = false;\n      }\n\n    });\n\n    setErrors(newErrors);\n    return isValid;\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (validateForm()) {\n      console.log('Form submitted with data:', formData);\n      onSubmit(formData);\n    } else {\n      console.log('Form has validation errors:', errors);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      {schema.map(field => (\n        <FormField\n          key={field.id}\n          field={field}\n          value={formData[field.id]}\n          onChange={handleFieldChange}\n          error={errors[field.id]} // Pass error message to FormField\n        />\n      ))}\n      <button type=\"submit\" className=\"submit-button\">Submit Form</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n\n// FormField.tsx\nimport React from 'react';\n\ninterface FieldProps {\n  id: string;\n  type: string;\n  label: string;\n  required?: boolean;\n  minLength?: number;\n  placeholder?: string;\n  rows?: number;\n  options?: { label: string; value: string }[];\n  pattern?: string;\n}\n\ninterface FormFieldProps {\n  field: FieldProps;\n  onChange: (id: string, value: any) => void;\n  value: any;\n  error?: string;\n}\n\nconst FormField: React.FC<FormFieldProps> = ({ field, onChange, value, error }) => {\n  const commonInputProps = {\n    id: field.id,\n    name: field.id, // Use id as name for consistency\n    placeholder: field.placeholder,\n    required: field.required,\n    className: `form-field-input ${error ? 'error-input' : ''}`\n  };\n\n  switch (field.type) {\n    case 'text':\n    case 'email':\n    case 'password':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <input type={field.type} value={value || ''} onChange={e => onChange(field.id, e.target.value)} {...commonInputProps} />\n          {error && <span className=\"error-message\" aria-live=\"polite\">{error}</span>}\n        </div>\n      );\n    case 'textarea':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <textarea value={value || ''} onChange={e => onChange(field.id, e.target.value)} rows={field.rows || 3} {...commonInputProps} />\n          {error && <span className=\"error-message\" aria-live=\"polite\">{error}</span>}\n        </div>\n      );\n    case 'checkbox':\n      return (\n        <div className=\"form-group checkbox-group\">\n          <input\n            type=\"checkbox\"\n            id={field.id}\n            name={field.id}\n            checked={!!value}\n            onChange={e => onChange(field.id, e.target.checked)}\n            required={field.required}\n            className={`form-field-checkbox ${error ? 'error-input' : ''}`}\n          />\n          <label htmlFor={field.id}>{field.label}</label>\n          {error && <span className=\"error-message\" aria-live=\"polite\">{error}</span>}\n        </div>\n      );\n    case 'select':\n      return (\n        <div className=\"form-group\">\n          <label htmlFor={field.id}>{field.label}</label>\n          <select value={value || ''} onChange={e => onChange(field.id, e.target.value)} {...commonInputProps}>\n            {field.options && field.options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))}\n          </select>\n          {error && <span className=\"error-message\" aria-live=\"polite\">{error}</span>}\n        </div>\n      );\n    default:\n      return (\n        <div className=\"form-group error\">\n          <p>Unknown field type: {field.type}</p>\n        </div>\n      );\n  }\n};\n\nexport default FormField;\n",
          "testCases": [
            "**Test Case 1: All Fields Valid**\n- Input valid data for all fields (e.g., username 'testuser' minLength 3, email 'test@example.com', password 'password123' minLength 6, biography 'This is my bio and it has enough characters.', country 'USA', newsletter checked).\n- Expected: Form submits successfully, `onSubmit` is called with correct `formData`, no error messages displayed.",
            "**Test Case 2: Required Field Empty (Text)**\n- Leave 'Username' field empty.\n- Expected: On submit, 'Username is required.' error message appears below the field, form does not submit.",
            "**Test Case 3: Required Field Empty (Select)**\n- Set 'Country' to 'Select Country' (empty value).\n- Expected: On submit, 'Country is required.' error message appears, form does not submit.",
            "**Test Case 4: Required Field Empty (Checkbox)**\n- Uncheck 'Subscribe to newsletter' if `required: true` is added for it.\n- Expected: On submit, 'Subscribe to newsletter is required.' error message appears, form does not submit.",
            "**Test Case 5: `minLength` Violation**\n- Enter 'ab' for 'Username' (minLength 3).\n- Expected: On submit, 'Username must be at least 3 characters.' error message appears, form does not submit.",
            "**Test Case 6: Invalid Email Format**\n- Enter 'invalid-email' for 'Email Address'.\n- Expected: On submit, 'Please enter a valid email address.' error message appears, form does not submit.",
            "**Test Case 7: Mixed Valid and Invalid**\n- Fill some fields correctly, leave others with validation errors.\n- Expected: Only fields with errors display messages, form does not submit.",
            "**Test Case 8: Error Clears on Input**\n- Submit form with errors. Then, type valid input into one of the errored fields.\n- Expected: As user types, the error message for *that specific field* should disappear, while others remain."
          ],
          "hints": [
            "Start by defining your `FieldSchema` interface or type to clearly specify the properties for each field, including validation rules.",
            "The `validateForm` function in `DynamicForm` should iterate through the `schema` array. For each field, access its `value` from `formData` and apply the relevant validation rules.",
            "Remember that `checkbox` inputs use `checked` instead of `value`, and `e.target.checked` returns a boolean, not a string. Adjust your `onChange` handler and validation logic accordingly.",
            "For `minLength` validation, ensure you're only applying it to string-based input types and checking `value.length`.",
            "The `error` prop passed from `DynamicForm` to `FormField` will be `undefined` if there's no error for that field, or a string with the error message. Use conditional rendering (`{error && <span>{error}</span>}`) in `FormField`.",
            "Consider adding a CSS class (e.g., `error-input`) to input fields when they have an error to provide visual feedback.",
            "To clear errors as the user types, modify `handleFieldChange` to `delete newErrors[id]` for the field being updated."
          ],
          "tags": [
            "React",
            "Forms",
            "Validation",
            "Client-Side",
            "Dynamic UI",
            "State Management"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React State & Props",
            "JavaScript Fundamentals",
            "HTML Forms"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Controlled Components",
            "Error Handling",
            "UI/UX"
          ]
        }
      ]
    }
  },
  {
    "id": "85e0dc8a-aba1-40ae-889e-2f05bc3dfc88",
    "startLine": 16400,
    "endLine": 16499,
    "processedDate": "2025-06-17T15:25:20.131Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_form_field_component",
          "title": "The `FormField` Component: Rendering Diverse Input Types",
          "content": "The `FormField` component is a foundational building block for dynamic forms, responsible for rendering different HTML input elements based on a given configuration. It acts as a switch, conditionally rendering `select`, `checkbox`, or other input types. Its primary role is to encapsulate the logic for associating a form field with its label, current value, and change handler, while also applying common HTML attributes like `id`, `name`, `required`, and specific attributes for each input type.\n\n## Key Concepts\n- **Props-driven Rendering**: The component receives a `field` object (containing `id`, `type`, `name`, `label`, `required`, `options`, `hint`), `value`, and an `onChange` callback.\n- **Conditional Rendering**: It uses a `switch` statement (or equivalent `if/else if`) on `field.type` to render the appropriate HTML element (`<select>`, `<input type='checkbox'>`).\n- **Value Handling**: It correctly binds the `value` prop to the HTML element's `value` or `checked` attribute. For `select` elements, `value || ''` ensures that an empty string is used if `value` is `null` or `undefined`, allowing the 'Select an option' placeholder to be active. For `checkbox` elements, `value || false` ensures the `checked` attribute is a boolean.\n- **Event Handling**: The `onChange` prop is a callback that is triggered when the input's value changes. For `select` and `text` inputs, `e.target.value` is passed. For `checkbox` inputs, `e.target.checked` is passed, reflecting the boolean state of the checkbox.\n- **Accessibility**: Utilizes `id` and `name` attributes for proper form submission and accessibility (`htmlFor` on a `label` element links to the `id` of its associated input).\n- **Extensibility**: The `default` case in the `switch` statement handles unsupported field types, making the component extensible for future input types.",
          "examples": [
            {
              "id": "example_form_field_select",
              "title": "Rendering a Select Field",
              "code": "interface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormFieldProps {\n  field: FormFieldConfig;\n  value: any;\n  onChange: (fieldId: string, value: any) => void;\n}\n\nconst FormField = ({ field, value, onChange }: FormFieldProps) => {\n  switch (field.type) {\n    case 'select':\n      return (\n        <select\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        >\n          <option value=\"\">Select an option</option>\n          {field.options && field.options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n\n// Usage example:\n// <FormField\n//   field={{\n//     id: 'city', name: 'city', label: 'City', type: 'select', required: true,\n//     options: [{ value: 'ny', label: 'New York' }, { value: 'la', label: 'Los Angeles' }]\n//   }}\n//   value={selectedCity}\n//   onChange={handleFormChange}\n// />",
              "explanation": "This example demonstrates how the `FormField` component renders a `<select>` element. It handles the `value` prop (defaulting to empty string for initial state or no selection), iterates over `field.options` to create `option` elements, and correctly captures the selected value using `e.target.value` when `onChange` is triggered.",
              "language": "typescript"
            },
            {
              "id": "example_form_field_checkbox",
              "title": "Rendering a Checkbox Field",
              "code": "interface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormFieldProps {\n  field: FormFieldConfig;\n  value: any;\n  onChange: (fieldId: string, value: any) => void;\n}\n\nconst FormField = ({ field, value, onChange }: FormFieldProps) => {\n  switch (field.type) {\n    case 'checkbox':\n      return (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n        />\n      );\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n\n// Usage example:\n// <FormField\n//   field={{ id: 'agree', name: 'agree', label: 'Agree to terms', type: 'checkbox' }}\n//   value={isAgreed}\n//   onChange={handleFormChange}\n// />",
              "explanation": "This example shows the implementation for a `checkbox` input. Notice how `checked={value || false}` is used to ensure the `checked` attribute always receives a boolean. The `onChange` event specifically uses `e.target.checked` to get the boolean state of the checkbox.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_form_field_mcq_1",
            "question_form_field_open_1",
            "question_form_field_flashcard_1"
          ],
          "relatedTasks": [
            "task_form_field_extension"
          ],
          "tags": [
            "React",
            "Components",
            "Forms",
            "Dynamic Forms",
            "JSX",
            "Conditional Rendering"
          ],
          "technology": "React",
          "prerequisites": [
            "react_functional_components",
            "react_props",
            "javascript_events",
            "html_form_elements"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "form_group_component",
            "dynamic_form_component"
          ]
        },
        {
          "id": "theory_form_group_component",
          "title": "The `FormGroup` Component: Organizing Form Sections",
          "content": "The `FormGroup` component is responsible for structuring a dynamic form into logical, collapsible sections. It supports both simple groups containing fields and complex nested groups, allowing for hierarchical form layouts. This component enhances user experience by segmenting large forms into manageable parts and improving navigation.\n\n## Key Concepts\n- **Hierarchical Structure**: A `FormGroup` can contain an array of `fields` or an array of `groups` (which are themselves `FormGroupConfig` objects). This enables arbitrary nesting of form sections.\n- **Collapsible Sections**: It uses React's `useState` hook to manage an `expanded` boolean state, determining whether the group's content (fields or nested groups) should be visible. Clicking the header toggles this state.\n- **Props Passing**: It receives `group` (containing its configuration), `values` (the current form data), and `onChange` (the central handler for field changes).\n- **Recursive Rendering**: When `group.groups` is present, it recursively renders `FormGroup` components for each nested group, passing down the `values` and `onChange` props. This is a common pattern for rendering tree-like structures in React.\n- **Rendering Fields**: When `group.fields` is present, it iterates over these field configurations and renders a `FormField` component for each, providing its specific `field` configuration, the relevant `value` from the overall `values` object, and the `onChange` callback.\n- **User Feedback**: The header visually indicates the expanded state using '▼' (down arrow) for expanded and '▶' (right arrow) for collapsed.",
          "examples": [
            {
              "id": "example_form_group_nested",
              "title": "FormGroup with Nested Groups",
              "code": "import React, { useState } from 'react';\n\ninterface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormGroupConfig {\n  id: string;\n  label: string;\n  groups?: FormGroupConfig[];\n  fields?: FormFieldConfig[];\n}\n\ninterface FormGroupProps {\n  group: FormGroupConfig;\n  values: { [key: string]: any };\n  onChange: (fieldId: string, value: any) => void;\n}\n\n// Assume FormField component is defined elsewhere\nconst FormField = ({ field, value, onChange }: any) => {\n  // Simplified for example\n  return <input type=\"text\" id={field.id} value={value || ''} onChange={e => onChange(field.id, e.target.value)} placeholder={field.label} />;\n};\n\nconst FormGroup = ({ group, values, onChange }: FormGroupProps) => {\n  const [expanded, setExpanded] = useState(true);\n\n  if (group.groups) {\n    return (\n      <div className=\"form-group nested-group-container\">\n        <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n          {group.label} {expanded ? '▼' : '▶'}\n        </h3>\n        {expanded && (\n          <div className=\"nested-groups\">\n            {group.groups.map(nestedGroup => (\n              <FormGroup\n                key={nestedGroup.id}\n                group={nestedGroup}\n                values={values}\n                onChange={onChange}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  return null; // For brevity, full implementation in next example\n};\n\n// Example usage with a schema (full schema definition would be in DynamicForm)\n// const schema = {\n//   id: 'main-group', label: 'Main Form',\n//   groups: [\n//     {\n//       id: 'personal-info', label: 'Personal Information',\n//       fields: [\n//         { id: 'firstName', name: 'firstName', label: 'First Name', type: 'text' }\n//       ]\n//     },\n//     {\n//       id: 'address-info', label: 'Address Information',\n//       groups: [\n//         {\n//           id: 'billing-address', label: 'Billing Address',\n//           fields: [\n//             { id: 'street', name: 'street', label: 'Street', type: 'text' }\n//           ]\n//         }\n//       ]\n//     }\n//   ]\n// };",
              "explanation": "This example highlights the recursive nature of `FormGroup` when handling `group.groups`. It renders a header that toggles the `expanded` state, and if expanded, maps over `nestedGroup` configurations, rendering another `FormGroup` for each. This pattern allows for infinitely deep nesting of form sections.",
              "language": "typescript"
            },
            {
              "id": "example_form_group_fields",
              "title": "FormGroup with Fields",
              "code": "import React, { useState } from 'react';\n\ninterface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormGroupConfig {\n  id: string;\n  label: string;\n  groups?: FormGroupConfig[];\n  fields?: FormFieldConfig[];\n}\n\ninterface FormGroupProps {\n  group: FormGroupConfig;\n  values: { [key: string]: any };\n  onChange: (fieldId: string, value: any) => void;\n}\n\n// Assume FormField component is defined elsewhere\nconst FormField = ({ field, value, onChange }: any) => {\n  // Simplified for example to show a text input\n  let inputElement;\n  switch (field.type) {\n    case 'text':\n      inputElement = (\n        <input\n          type=\"text\"\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        />\n      );\n      break;\n    case 'checkbox':\n      inputElement = (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n        />\n      );\n      break;\n    case 'select':\n      inputElement = (\n        <select\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        >\n          <option value=\"\">Select an option</option>\n          {field.options && field.options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n      break;\n    default:\n      inputElement = <div>Unsupported field type: {field.type}</div>;\n  }\n\n  return inputElement;\n};\n\n\nconst FormGroup = ({ group, values, onChange }: FormGroupProps) => {\n  const [expanded, setExpanded] = useState(true);\n  \n  if (group.groups) {\n    return (\n      <div className=\"form-group nested-group-container\">\n        <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n          {group.label} {expanded ? '▼' : '▶'}\n        </h3>\n        {expanded && (\n          <div className=\"nested-groups\">\n            {group.groups.map(nestedGroup => (\n              <FormGroup\n                key={nestedGroup.id}\n                group={nestedGroup}\n                values={values}\n                onChange={onChange}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  // Regular form group with fields\n  return (\n    <div className=\"form-group\">\n      <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n        {group.label} {expanded ? '▼' : '▶'}\n      </h3>\n      \n      {expanded && (\n        <div className=\"fields\">\n          {group.fields && group.fields.map(field => (\n            <div key={field.id} className=\"form-field\">\n              <label htmlFor={field.id}>{field.label}</label>\n              <FormField\n                field={field}\n                value={values[field.id]}\n                onChange={onChange}\n              />\n              {field.hint && <span className=\"hint\">{field.hint}</span>}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Example usage within a DynamicForm (see next theory block)",
              "explanation": "This example shows a `FormGroup` that contains individual `FormField` components. It maps over `group.fields`, rendering a `label` and a `FormField` for each. The `values[field.id]` retrieves the correct value for the `FormField` from the central `values` object, and the shared `onChange` handler ensures updates propagate to the `DynamicForm`.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_form_group_mcq_1",
            "question_form_group_open_1",
            "question_form_group_flashcard_1"
          ],
          "relatedTasks": [
            "task_dynamic_form_full"
          ],
          "tags": [
            "React",
            "Components",
            "Forms",
            "Dynamic Forms",
            "State Management",
            "Recursion",
            "UI/UX"
          ],
          "technology": "React",
          "prerequisites": [
            "react_functional_components",
            "react_props",
            "react_state",
            "javascript_array_methods"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "dynamic_form_component"
          ]
        },
        {
          "id": "theory_dynamic_form_component",
          "title": "The `DynamicForm` Component: Orchestrating Form Behavior",
          "content": "The `DynamicForm` component serves as the top-level container and orchestrator for the entire dynamic form system. It manages the form's overall state, processes user input through a centralized change handler, and coordinates the rendering of `FormGroup` (and thus `FormField`) components based on a provided schema. It is also responsible for handling form submission.\n\n## Key Concepts\n- **Centralized State Management**: It uses `useState` to maintain `formValues`, an object that holds the current values for all fields in the form. This central state is crucial for collecting all input data upon submission and for pre-populating fields.\n- **`formSchema`**: This is a critical prop that defines the entire structure of the form – its groups, nested groups, and fields, including their types, labels, and validation rules. The `DynamicForm` component interprets this schema to render the form dynamically.\n- **`handleFieldChange`**: This is a single, robust callback function passed down to all `FormField` instances (via `FormGroup`). When any field's value changes, `handleFieldChange` is invoked with the `fieldId` and its new `value`, ensuring that the `formValues` state is immutably updated. This prevents direct state manipulation within child components, adhering to React's unidirectional data flow.\n- **Form Submission (`handleSubmit`)**: Although the provided snippet is incomplete, a `handleSubmit` function is essential. It prevents the default browser form submission, typically performs final validation on `formValues`, and then invokes an `onSubmit` prop with the collected `formValues` to allow the parent component or application logic to process the form data.\n- **Uncontrolled vs. Controlled Components (Hybrid Approach)**: While `FormField` and `FormGroup` are technically 'controlled' by `DynamicForm`'s state, the overall pattern of defining form structure via a schema and dynamically rendering components can be seen as a more flexible 'uncontrolled' approach at the schema level, while individual inputs remain controlled.",
          "examples": [
            {
              "id": "example_dynamic_form_handle_change",
              "title": "Handling Field Changes in `DynamicForm`",
              "code": "import React, { useState } from 'react';\n\ninterface FormFieldConfig {\n  id: string; type: string; name: string; label: string; required?: boolean;\n  options?: { value: string; label: string }[]; hint?: string;\n}\n\ninterface FormGroupConfig {\n  id: string; label: string; groups?: FormGroupConfig[]; fields?: FormFieldConfig[];\n}\n\ninterface FormSchema {\n  id: string;\n  label: string;\n  groups: FormGroupConfig[];\n}\n\n// Assume FormGroup component is defined as in previous theory block\nconst FormGroup = ({ group, values, onChange }: any) => {\n  // Simplified placeholder for example\n  return (\n    <div className=\"form-group\">\n      <h3>{group.label}</h3>\n      {group.fields && group.fields.map((field: FormFieldConfig) => (\n        <div key={field.id}>\n          <label htmlFor={field.id}>{field.label}</label>\n          <input \n            type=\"text\" \n            id={field.id} \n            value={values[field.id] || ''} \n            onChange={e => onChange(field.id, e.target.value)} \n          />\n        </div>\n      ))}\n    </div>\n  );\n};\n\ninterface DynamicFormProps {\n  formSchema: FormSchema;\n  onSubmit: (values: { [key: string]: any }) => void;\n}\n\nconst DynamicForm = ({ formSchema, onSubmit }: DynamicFormProps) => {\n  const [formValues, setFormValues] = useState<{ [key: string]: any }>({});\n  \n  const handleFieldChange = (fieldId: string, value: any) => {\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [fieldId]: value\n    }));\n  };\n  \n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n    console.log('Form values:', formValues);\n    onSubmit(formValues);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form-container\">\n      <h2>{formSchema.label}</h2>\n      {formSchema.groups.map(group => (\n        <FormGroup\n          key={group.id}\n          group={group}\n          values={formValues}\n          onChange={handleFieldChange}\n        />\n      ))}\n      <button type=\"submit\">Submit Form</button>\n    </form>\n  );\n};\n\n// Example Usage (in a parent component):\n// const myFormSchema: FormSchema = {\n//   id: 'userProfileForm',\n//   label: 'User Profile',\n//   groups: [\n//     {\n//       id: 'contactInfo', label: 'Contact Information',\n//       fields: [\n//         { id: 'email', name: 'email', label: 'Email', type: 'text', required: true },\n//         { id: 'phone', name: 'phone', label: 'Phone', type: 'text' }\n//       ]\n//     }\n//   ]\n// };\n\n// const App = () => {\n//   const handleFormSubmit = (values: { [key: string]: any }) => {\n//     alert('Form submitted! Check console for values.');\n//     console.log('Submitted values:', values);\n//   };\n//   return (\n//     <DynamicForm formSchema={myFormSchema} onSubmit={handleFormSubmit} />\n//   );\n// };",
              "explanation": "This example shows the core `DynamicForm` component. It initializes `formValues` using `useState`. The `handleFieldChange` function is crucial: it receives the `fieldId` and `value` from any nested `FormField` and updates the central `formValues` state immutably. The `handleSubmit` function prevents default submission and calls the `onSubmit` prop with the current `formValues`.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_dynamic_form_open_1",
            "question_dynamic_form_mcq_1",
            "question_dynamic_form_flashcard_1"
          ],
          "relatedTasks": [
            "task_dynamic_form_full",
            "task_dynamic_form_validation"
          ],
          "tags": [
            "React",
            "Forms",
            "State Management",
            "Controlled Components",
            "Schema-driven UI",
            "Dynamic UI"
          ],
          "technology": "React",
          "prerequisites": [
            "react_hooks",
            "react_component_lifecycle",
            "javascript_object_spread"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "advanced_react_patterns",
            "form_validation_strategies"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_form_field_mcq_1",
          "topic": "`FormField` Component Value Handling",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the `FormField` component's handling of `value` and `onChange` for a `checkbox` type:\n\n```typescript\nconst FormField = ({ field, value, onChange }) => {\n  switch (field.type) {\n    case 'checkbox':\n      return (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n        />\n      );\n    default:\n      return null;\n  }\n};\n```\n\nIf the `value` prop passed to `FormField` for a checkbox is `undefined`, what will be the `checked` state of the rendered `input` element?",
          "answer": "false",
          "options": [
            "true",
            "false",
            "undefined",
            "An error will be thrown because `checked` expects a boolean."
          ],
          "analysisPoints": [
            "Understanding of logical OR operator (`||`) in JavaScript.",
            "Knowledge of how `checked` attribute works for HTML checkboxes.",
            "Understanding of React's controlled component pattern for checkboxes."
          ],
          "keyConcepts": [
            "Controlled Components",
            "Checkbox Input",
            "JavaScript Logical OR",
            "React Props"
          ],
          "evaluationCriteria": [
            "Ability to trace data flow through props.",
            "Understanding of type coercion in JavaScript expressions.",
            "Familiarity with HTML input element attributes."
          ],
          "example": "The expression `value || false` evaluates `value` first. If `value` is a 'falsy' value (like `undefined`, `null`, `0`, `''`), the expression falls back to `false`. Therefore, if `value` is `undefined`, `checked` becomes `false`.",
          "tags": [
            "React",
            "Forms",
            "Checkbox",
            "JavaScript",
            "Controlled Components"
          ],
          "prerequisites": [
            "javascript_truthy_falsy",
            "react_props"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_field_open_1",
          "topic": "Extending `FormField` Component",
          "level": "medium",
          "type": "open",
          "question": "The `FormField` component currently handles `select` and `checkbox` types. Describe how you would extend this component to support `text` and `number` input types. Provide a conceptual code snippet for one of these new types.",
          "answer": "To extend the `FormField` component for `text` and `number` input types, you would add new `case` statements within the `switch` block for `'text'` and `'number'`. For each case, you would render an `<input>` element with the appropriate `type` attribute. The `value` prop would be bound to the `value` attribute of the input, and the `onChange` event would capture `e.target.value`.\n\n**Conceptual Code Snippet for 'text' type:**\n\n```typescript\nconst FormField = ({ field, value, onChange }) => {\n  switch (field.type) {\n    // ... existing cases for 'select', 'checkbox'\n    case 'text':\n      return (\n        <input\n          type=\"text\"\n          id={field.id}\n          name={field.name}\n          value={value || ''} // Handle undefined/null initial values\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        />\n      );\n    case 'number':\n      return (\n        <input\n          type=\"number\"\n          id={field.id}\n          name={field.name}\n          value={value || ''} // Can be empty string for initial state, will coerce to number on change\n          onChange={e => onChange(field.id, parseFloat(e.target.value) || 0)} // Parse to number, handle NaN\n          required={field.required}\n        />\n      );\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n```\n\nFor `text` input, the `value` prop directly maps to `e.target.value`. For `number` input, it's good practice to parse `e.target.value` to a number using `parseFloat` or `Number()` to ensure the stored value is numeric, and handle cases where the input might not be a valid number (e.g., `parseFloat(e.target.value) || 0`).",
          "analysisPoints": [
            "Demonstrates understanding of conditional rendering in React.",
            "Shows how to bind value and onChange for various input types.",
            "Highlights attention to detail for type handling (e.g., parsing numbers).",
            "Understanding of `id` and `name` attributes for form fields."
          ],
          "keyConcepts": [
            "Conditional Rendering",
            "Controlled Components",
            "HTML Input Types",
            "Event Handling"
          ],
          "evaluationCriteria": [
            "Correct use of `switch` or `if/else if`.",
            "Accurate binding of `value` and `onChange`.",
            "Consideration for input type specifics (e.g., `e.target.checked` vs `e.target.value`, number parsing)."
          ],
          "example": "",
          "tags": [
            "React",
            "Forms",
            "Extensibility",
            "Components",
            "TypeScript"
          ],
          "prerequisites": [
            "react_props",
            "javascript_control_flow",
            "html_form_elements"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_field_flashcard_1",
          "topic": "`FormField` Key Prop Usage",
          "level": "easy",
          "type": "flashcard",
          "question": "In the `FormField` component, when rendering `option` elements for a `select` input using `map`, what is the purpose of the `key` prop, and why is `option.value` typically a good choice for it?",
          "answer": "The `key` prop helps React efficiently identify and re-render list items. It allows React to track which items have changed, been added, or been removed, preventing unnecessary re-renders of the entire list and ensuring correct state preservation. `option.value` is a good choice for the `key` because it is typically unique and stable for each option, satisfying React's requirement for keys to be unique among siblings and persistent across re-renders.",
          "analysisPoints": [
            "Recall the purpose of React `key` prop.",
            "Understand criteria for a good `key`.",
            "Relate `key` to list rendering optimization."
          ],
          "keyConcepts": [
            "React Lists and Keys",
            "Performance Optimization",
            "Virtual DOM"
          ],
          "evaluationCriteria": [
            "Correctly identifies purpose of `key`.",
            "Explains why `option.value` is suitable.",
            "Briefly mentions benefits (efficiency)."
          ],
          "example": "",
          "tags": [
            "React",
            "Lists",
            "Keys",
            "Performance"
          ],
          "prerequisites": [
            "react_lists"
          ],
          "complexity": 5,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_form_group_mcq_1",
          "topic": "`FormGroup` Component Recursion",
          "level": "medium",
          "type": "mcq",
          "question": "The `FormGroup` component is designed to handle nested form structures. Given the following snippet:\n\n```typescript\nconst FormGroup = ({ group, values, onChange }) => {\n  const [expanded, setExpanded] = useState(true);\n  \n  if (group.groups) {\n    return (\n      <div className=\"form-group\">\n        <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n          {group.label} {expanded ? '▼' : '▶'}\n        </h3>\n        {expanded && (\n          <div className=\"nested-groups\">\n            {group.groups.map(nestedGroup => (\n              <FormGroup\n                key={nestedGroup.id}\n                group={nestedGroup}\n                values={values}\n                onChange={onChange}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  // ... (rest of component for fields)\n};\n```\n\nWhat is the primary mechanism that allows `FormGroup` to render arbitrarily deep nested structures?",
          "answer": "Recursive component rendering",
          "options": [
            "Props drilling",
            "Context API",
            "Redux store",
            "Recursive component rendering"
          ],
          "analysisPoints": [
            "Identifying the pattern of a component rendering itself.",
            "Distinguishing between state management patterns and rendering patterns.",
            "Understanding how hierarchical data structures are rendered in React."
          ],
          "keyConcepts": [
            "React Components",
            "Recursion",
            "Props",
            "Hierarchical Data"
          ],
          "evaluationCriteria": [
            "Correctly identifies the core rendering pattern.",
            "Differentiates between rendering and state management concepts."
          ],
          "example": "The `FormGroup` component checks `if (group.groups)` and if true, it iterates over `group.groups.map(...)` and renders another `FormGroup` component for each `nestedGroup`. This self-referential rendering is the definition of recursion in components, enabling it to handle any depth of nesting defined in the `formSchema`.",
          "tags": [
            "React",
            "Components",
            "Recursion",
            "Dynamic Forms",
            "Architecture"
          ],
          "prerequisites": [
            "react_functional_components",
            "javascript_recursion"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_form_group_open_1",
          "topic": "`FormGroup` Collapsible Behavior",
          "level": "easy",
          "type": "open",
          "question": "Explain how the `FormGroup` component implements its collapsible behavior using the `useState` hook. What are the benefits of making form sections collapsible?",
          "answer": "The `FormGroup` component implements collapsible behavior using the `useState` hook to manage an `expanded` boolean state, initialized to `true` (`const [expanded, setExpanded] = useState(true);`).\n\n1.  **State Management**: The `expanded` state determines whether the content of the form group (either nested groups or fields) is visible.\n2.  **Toggle Mechanism**: An `onClick` handler is attached to the `group-header` (`<h3 onClick={() => setExpanded(!expanded)} ...>`). When the header is clicked, `setExpanded(!expanded)` is called, which flips the boolean value of `expanded`.\n3.  **Conditional Rendering**: The group's content (`<div className=\"nested-groups\">` or `<div className=\"fields\">`) is conditionally rendered using a short-circuit `&&` operator: `{expanded && (...) }`. This means the content is only rendered when `expanded` is `true`.\n4.  **Visual Indicator**: The header also updates a visual indicator (`{expanded ? '▼' : '▶'}`) to show whether the section is currently open or closed.\n\n**Benefits of collapsible form sections:**\n*   **Improved User Experience (UX)**: Prevents information overload by hiding less relevant sections, especially in long or complex forms.\n*   **Better Navigation**: Users can quickly scan and jump to relevant sections without scrolling through a lot of fields.\n*   **Reduced Cognitive Load**: Breaks down a large task into smaller, more manageable parts.\n*   **Performance (potential)**: In some cases, if the hidden content is complex, not rendering it until expanded can offer minor performance benefits, though React's efficient reconciliation usually handles this well.",
          "analysisPoints": [
            "Understanding of `useState` for UI toggles.",
            "Correct use of conditional rendering.",
            "Identification of `onClick` handler.",
            "Ability to articulate UX benefits."
          ],
          "keyConcepts": [
            "React State",
            "useState Hook",
            "Conditional Rendering",
            "User Experience (UX)"
          ],
          "evaluationCriteria": [
            "Clear explanation of state, event handling, and rendering.",
            "Comprehensive list of UX benefits.",
            "Correct identification of `useState`."
          ],
          "example": "",
          "tags": [
            "React",
            "State",
            "Hooks",
            "UI/UX",
            "Forms"
          ],
          "prerequisites": [
            "react_hooks",
            "javascript_boolean_logic"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_form_group_flashcard_1",
          "topic": "`FormGroup` Props",
          "level": "easy",
          "type": "flashcard",
          "question": "What are the three main props passed to the `FormGroup` component, and what is the purpose of each?",
          "answer": "1.  `group`: An object defining the configuration for the current group, including its `id`, `label`, and arrays for `fields` (form fields within this group) or `groups` (nested form groups).\n2.  `values`: An object containing the current state of all form fields across the entire dynamic form. This is passed down to allow `FormField` components to display their current values.\n3.  `onChange`: A callback function (`(fieldId: string, value: any) => void`) that is invoked when any individual form field's value changes. This function is responsible for updating the central form state in the `DynamicForm` component.",
          "analysisPoints": [
            "Recall component props and their roles.",
            "Understand data flow in React (props drilling).",
            "Identify inputs for form rendering and state updates."
          ],
          "keyConcepts": [
            "React Props",
            "Data Flow",
            "Form State"
          ],
          "evaluationCriteria": [
            "Correctly lists and describes each prop's purpose.",
            "Demonstrates understanding of component communication."
          ],
          "example": "",
          "tags": [
            "React",
            "Props",
            "Forms",
            "Data Flow"
          ],
          "prerequisites": [
            "react_props"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_dynamic_form_open_1",
          "topic": "Centralized State Management in `DynamicForm`",
          "level": "hard",
          "type": "open",
          "question": "The `DynamicForm` component uses `useState` to manage `formValues` centrally. Explain the advantages of this centralized state management approach over having each `FormField` manage its own state. Discuss potential challenges or considerations with this approach, especially for very large forms.",
          "answer": "### Advantages of Centralized State Management (`formValues` in `DynamicForm`):\n\n1.  **Single Source of Truth**: All form data resides in one place (`formValues`), making it easy to access the complete form state at any time (e.g., for submission, validation, or pre-population).\n2.  **Simplified Submission**: When the form is submitted, the `handleSubmit` function simply needs to read the `formValues` object, which already contains all the latest data from every field, regardless of nesting or type.\n3.  **Easier Validation**: Validation logic can be applied to the entire `formValues` object at once, or specific parts, from a single location, rather than having to collect state from numerous child components.\n4.  **Cross-Field Dependencies**: It facilitates implementing complex logic where one field's value depends on another (e.g., conditional rendering, calculation), as all values are readily available in the shared `formValues` object.\n5.  **Debugging**: Easier to debug state changes as they all flow through a single `handleFieldChange` function and update a single state object.\n6.  **Immutable Updates**: The `setFormValues(prevValues => ({ ...prevValues, [fieldId]: value }))` pattern ensures immutable updates, which is a React best practice, improving predictability and avoiding common bugs.\n\n### Challenges/Considerations for Very Large Forms:\n\n1.  **Performance (Re-renders)**: When `formValues` is updated, the entire `DynamicForm` component and all its children (`FormGroup`s and `FormField`s) might re-render, even if only one field's value changed. For forms with hundreds or thousands of fields, this could become a performance bottleneck.\n    *   **Mitigation**: Use `React.memo` for `FormField` and `FormGroup` components to prevent unnecessary re-renders if their props haven't changed. This is critical for performance in large forms.\n2.  **Prop Drilling**: The `formValues` and `onChange` props need to be passed down through multiple levels of `FormGroup` and `FormField` components. While manageable for a few levels, it can make the code harder to read and maintain as the nesting deepens.\n    *   **Mitigation**: Consider using React Context API or a dedicated state management library (like Zustand, Redux) for very deep and complex forms to avoid excessive prop drilling.\n3.  **Initial Load Time**: Populating `formValues` with initial data for a very large form might involve processing a substantial schema, potentially impacting initial rendering speed.\n4.  **Memory Usage**: Holding the entire form state in a single object might consume more memory than necessary for extremely large, sparsely filled forms, though this is rarely a practical issue for typical web forms.",
          "analysisPoints": [
            "Compares centralized vs. localized state management for forms.",
            "Lists comprehensive advantages.",
            "Identifies and explains potential performance issues (re-renders, prop drilling).",
            "Suggests concrete mitigation strategies (React.memo, Context/Redux).",
            "Demonstrates architectural thinking."
          ],
          "keyConcepts": [
            "React State Management",
            "Controlled Components",
            "Performance Optimization",
            "Prop Drilling",
            "React.memo",
            "Context API"
          ],
          "evaluationCriteria": [
            "Depth of understanding of state management trade-offs.",
            "Ability to identify and propose solutions for scalability issues.",
            "Clarity and organization of explanation."
          ],
          "example": "",
          "tags": [
            "React",
            "State Management",
            "Performance",
            "Architecture",
            "Forms",
            "Hooks"
          ],
          "prerequisites": [
            "react_hooks",
            "react_performance_optimization",
            "react_context_api"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_dynamic_form_mcq_1",
          "topic": "`DynamicForm` `handleFieldChange` Logic",
          "level": "medium",
          "type": "mcq",
          "question": "The `handleFieldChange` function in `DynamicForm` is defined as:\n\n```typescript\nconst handleFieldChange = (fieldId, value) => {\n  setFormValues(prevValues => ({\n    ...prevValues,\n    [fieldId]: value\n  }));\n};\n```\n\nWhich of the following best describes the key principle demonstrated by this implementation of `handleFieldChange`?",
          "answer": "Immutability and functional state updates",
          "options": [
            "Direct state mutation for performance",
            "Deep cloning of nested objects",
            "Immutability and functional state updates",
            "Synchronous state batching"
          ],
          "analysisPoints": [
            "Understanding of `setFormValues(prevValues => ...)` pattern.",
            "Knowledge of spread syntax (`...`) for object copying.",
            "Recognition of immutable update patterns in React.",
            "Distinguishing between different state management concepts."
          ],
          "keyConcepts": [
            "React State Updates",
            "Immutability",
            "Functional Updates",
            "Spread Syntax"
          ],
          "evaluationCriteria": [
            "Correctly identifies the core concept.",
            "Shows understanding of `useState`'s functional update form.",
            "Recognizes the importance of immutability in React."
          ],
          "example": "The use of `setFormValues(prevValues => ({ ...prevValues, [fieldId]: value }))` demonstrates two key principles:\n1.  **Immutability**: Instead of directly modifying `prevValues`, it creates a *new* object (`{ ...prevValues, [fieldId]: value }`) by spreading the old values and then overriding or adding the specific `fieldId` with its new `value`. This is crucial in React for efficient change detection and preventing unexpected side effects.\n2.  **Functional State Updates**: Passing a function to `setFormValues` ensures that `prevValues` always refers to the *latest* state, even if multiple updates are batched by React. This prevents stale closures and ensures reliable updates.",
          "tags": [
            "React",
            "State Management",
            "Immutability",
            "Hooks",
            "JavaScript"
          ],
          "prerequisites": [
            "react_hooks",
            "javascript_spread_syntax"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_flashcard_1",
          "topic": "`formSchema` Purpose",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary role of the `formSchema` prop in the `DynamicForm` component?",
          "answer": "The `formSchema` prop is a JavaScript object that serves as the blueprint or configuration for the entire dynamic form. It defines the structure of the form, including its groups, nested groups, and individual fields (their IDs, labels, types, validation rules, options, etc.), enabling the `DynamicForm` to render a form dynamically without hardcoding its structure.",
          "analysisPoints": [
            "Understand schema-driven UI.",
            "Identify how dynamic forms get their structure.",
            "Recall the configuration aspect."
          ],
          "keyConcepts": [
            "Schema-driven UI",
            "Dynamic Forms",
            "Configuration"
          ],
          "evaluationCriteria": [
            "Clearly defines `formSchema`'s role.",
            "Mentions key elements it defines (structure, fields, types)."
          ],
          "example": "",
          "tags": [
            "React",
            "Forms",
            "Schema-driven UI",
            "Configuration"
          ],
          "prerequisites": [
            "javascript_objects"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        }
      ],
      "tasks": [
        {
          "id": "task_form_field_extension",
          "title": "Extend `FormField` with New Input Types",
          "description": "\nExtend the existing `FormField` component to support `text` and `textarea` input types. Ensure correct handling of `value`, `onChange`, and `required` attributes for these new types.\n\n### Requirements:\n1.  Add a `case 'text'` to the `switch` statement for rendering a standard `<input type=\"text\">`.\n2.  Add a `case 'textarea'` for rendering a `<textarea>` element. Both `text` and `textarea` should bind their `value` and capture `e.target.value`.\n3.  Ensure the `id`, `name`, and `required` attributes are correctly passed to these new input types.\n4.  The default case for unsupported types should remain.\n",
          "difficulty": "medium",
          "startingCode": "import React from 'react';\n\ninterface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number' | 'textarea';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormFieldProps {\n  field: FormFieldConfig;\n  value: any;\n  onChange: (fieldId: string, value: any) => void;\n}\n\nconst FormField = ({ field, value, onChange }: FormFieldProps) => {\n  switch (field.type) {\n    case 'select':\n      return (\n        <select\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        >\n          <option value=\"\">Select an option</option>\n          {field.options && field.options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    case 'checkbox':\n      return (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n        />\n      );\n    // TODO: Add cases for 'text' and 'textarea'\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n\nexport default FormField;\n\n// Example Usage (for testing):\n/*\nfunction App() {\n  const [values, setValues] = React.useState({});\n\n  const handleChange = (id, val) => {\n    setValues(prev => ({ ...prev, [id]: val }));\n  };\n\n  return (\n    <div>\n      <h2>FormField Tests</h2>\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"username\">Username:</label>\n        <FormField\n          field={{ id: 'username', name: 'username', label: 'Username', type: 'text', required: true }}\n          value={values.username}\n          onChange={handleChange}\n        />\n        <p>Current: {values.username || 'empty'}</p>\n      </div>\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"description\">Description:</label>\n        <FormField\n          field={{ id: 'description', name: 'description', label: 'Description', type: 'textarea' }}\n          value={values.description}\n          onChange={handleChange}\n        />\n        <p>Current: {values.description || 'empty'}</p>\n      </div>\n      <div style={{ marginBottom: '20px' }}>\n        <label htmlFor=\"agreeTerms\">Agree:</label>\n        <FormField\n          field={{ id: 'agreeTerms', name: 'agreeTerms', label: 'Agree Terms', type: 'checkbox' }}\n          value={values.agreeTerms}\n          onChange={handleChange}\n        />\n        <p>Current: {values.agreeTerms?.toString() || 'false'}</p>\n      </div>\n    </div>\n  );\n}\n*/\n",
          "solutionCode": "import React from 'react';\n\ninterface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number' | 'textarea';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormFieldProps {\n  field: FormFieldConfig;\n  value: any;\n  onChange: (fieldId: string, value: any) => void;\n}\n\nconst FormField = ({ field, value, onChange }: FormFieldProps) => {\n  switch (field.type) {\n    case 'select':\n      return (\n        <select\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        >\n          <option value=\"\">Select an option</option>\n          {field.options && field.options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    case 'checkbox':\n      return (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n        />\n      );\n    case 'text':\n      return (\n        <input\n          type=\"text\"\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n        />\n      );\n    case 'textarea':\n      return (\n        <textarea\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          rows={4} // Example attribute for textarea\n        />\n      );\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n\nexport default FormField;\n",
          "testCases": [
            "Test `type='text'` field: Inputting 'Hello World' should update the value correctly. Empty input should default to empty string.",
            "Test `type='textarea'` field: Inputting multi-line text should update the value correctly. Empty input should default to empty string.",
            "Test `required` attribute: Verify that `required` prop is correctly applied for `text` and `textarea` fields.",
            "Test unsupported type: Passing a `field.type` like 'date' should render 'Unsupported field type: date'."
          ],
          "hints": [
            "Remember that both `<input type=\"text\">` and `<textarea>` capture their value from `e.target.value`.",
            "Consider how you've handled initial `value` for `select` inputs; a similar approach might be useful for text/textarea.",
            "Ensure `id`, `name`, and `required` attributes are consistently applied."
          ],
          "tags": [
            "React",
            "Forms",
            "Components",
            "Extensibility",
            "TypeScript"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "react_functional_components",
            "javascript_control_flow"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "form_field_component",
            "conditional_rendering",
            "controlled_components"
          ]
        },
        {
          "id": "task_dynamic_form_validation",
          "title": "Implement Basic Form Validation in `DynamicForm`",
          "description": "\nEnhance the `DynamicForm` component by adding basic client-side validation logic. The goal is to prevent form submission if any `required` field is empty. The validation should be triggered on form submission.\n\n### Requirements:\n1.  In the `handleSubmit` function of `DynamicForm`, before calling `onSubmit`, iterate through the `formSchema` to identify all `required` fields.\n2.  For each `required` field, check if its corresponding value in `formValues` is empty or 'falsy' (e.g., `''`, `null`, `undefined`, `false` for checkbox).\n3.  If any required field is empty, prevent the form from submitting. Instead, set a state variable `errors` to indicate which fields are invalid (e.g., `{ [fieldId]: 'Field is required' }`).\n4.  Pass these `errors` down through `FormGroup` to `FormField` so that an error message or styling can be displayed next to the invalid field.\n5.  If all required fields are filled, proceed with calling `onSubmit(formValues)`.\n\n**Note**: You'll need to define how `errors` are passed down and rendered in `FormGroup` and `FormField` as well.\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState } from 'react';\n\ninterface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number' | 'textarea';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormGroupConfig {\n  id: string;\n  label: string;\n  groups?: FormGroupConfig[];\n  fields?: FormFieldConfig[];\n}\n\ninterface FormSchema {\n  id: string;\n  label: string;\n  groups: FormGroupConfig[];\n}\n\n// --- FormField Component (as completed in previous task) ---\nconst FormField = ({ field, value, onChange, error }: any) => {\n  switch (field.type) {\n    case 'select':\n      return (\n        <select\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          style={{ borderColor: error ? 'red' : '' }}\n        >\n          <option value=\"\">Select an option</option>\n          {field.options && field.options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    case 'checkbox':\n      return (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n          style={{ outline: error ? '2px solid red' : '' }}\n        />\n      );\n    case 'text':\n      return (\n        <input\n          type=\"text\"\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          style={{ borderColor: error ? 'red' : '' }}\n        />\n      );\n    case 'textarea':\n      return (\n        <textarea\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          rows={4}\n          style={{ borderColor: error ? 'red' : '' }}\n        />\n      );\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n\n// --- FormGroup Component ---\nconst FormGroup = ({ group, values, onChange, errors }: any) => {\n  const [expanded, setExpanded] = useState(true);\n  \n  if (group.groups) {\n    return (\n      <div className=\"form-group nested-group-container\">\n        <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n          {group.label} {expanded ? '▼' : '▶'}\n        </h3>\n        {expanded && (\n          <div className=\"nested-groups\">\n            {group.groups.map((nestedGroup: FormGroupConfig) => (\n              <FormGroup\n                key={nestedGroup.id}\n                group={nestedGroup}\n                values={values}\n                onChange={onChange}\n                errors={errors}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"form-group\">\n      <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n        {group.label} {expanded ? '▼' : '▶'}\n      </h3>\n      \n      {expanded && (\n        <div className=\"fields\">\n          {group.fields && group.fields.map((field: FormFieldConfig) => (\n            <div key={field.id} className=\"form-field\">\n              <label htmlFor={field.id}>{field.label}</label>\n              <FormField\n                field={field}\n                value={values[field.id]}\n                onChange={onChange}\n                error={errors[field.id]} // Pass error prop down\n              />\n              {field.hint && <span className=\"hint\">{field.hint}</span>}\n              {errors[field.id] && <span style={{ color: 'red' }}>{errors[field.id]}</span>} {/* Display error message */}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// --- Main DynamicForm Component ---\ninterface DynamicFormProps {\n  formSchema: FormSchema;\n  onSubmit: (values: { [key: string]: any }) => void;\n}\n\nconst DynamicForm = ({ formSchema, onSubmit }: DynamicFormProps) => {\n  const [formValues, setFormValues] = useState<{ [key: string]: any }>({});\n  const [errors, setErrors] = useState<{ [key: string]: string }>({}); // State for validation errors\n\n  const handleFieldChange = (fieldId: string, value: any) => {\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [fieldId]: value\n    }));\n    // Clear error for this field as soon as it's modified\n    setErrors(prevErrors => {\n      const newErrors = { ...prevErrors };\n      delete newErrors[fieldId];\n      return newErrors;\n    });\n  };\n\n  const collectRequiredFields = (schema: FormSchema | FormGroupConfig): FormFieldConfig[] => {\n    let requiredFields: FormFieldConfig[] = [];\n    if ((schema as FormGroupConfig).fields) {\n      requiredFields = requiredFields.concat((schema as FormGroupConfig).fields!.filter(f => f.required));\n    }\n    if ((schema as FormGroupConfig).groups) {\n      (schema as FormGroupConfig).groups!.forEach(group => {\n        requiredFields = requiredFields.concat(collectRequiredFields(group));\n      });\n    }\n    return requiredFields;\n  };\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    const newErrors: { [key: string]: string } = {};\n    const allRequiredFields = collectRequiredFields(formSchema);\n\n    // TODO: Implement validation logic here\n    // Iterate through allRequiredFields and check if formValues[field.id] is valid\n    // If invalid, add to newErrors object (e.g., newErrors[field.id] = 'This field is required')\n    // If newErrors is not empty, setErrors(newErrors) and return (prevent submission)\n    // Otherwise, setErrors({}) and call onSubmit(formValues)\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n    } else {\n      setErrors({});\n      onSubmit(formValues);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form-container\">\n      <h2>{formSchema.label}</h2>\n      {formSchema.groups.map(group => (\n        <FormGroup\n          key={group.id}\n          group={group}\n          values={formValues}\n          onChange={handleFieldChange}\n          errors={errors}\n        />\n      ))}\n      <button type=\"submit\">Submit Form</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n\n// Example Usage (in a parent component):\n/*\nconst myFormSchema: FormSchema = {\n  id: 'userRegistration',\n  label: 'User Registration',\n  groups: [\n    {\n      id: 'credentials', label: 'Account Details',\n      fields: [\n        { id: 'username', name: 'username', label: 'Username', type: 'text', required: true },\n        { id: 'password', name: 'password', label: 'Password', type: 'text', required: true }\n      ]\n    },\n    {\n      id: 'personal', label: 'Personal Information',\n      fields: [\n        { id: 'fullName', name: 'fullName', label: 'Full Name', type: 'text' },\n        { id: 'email', name: 'email', label: 'Email', type: 'text', required: true }\n      ]\n    },\n    {\n      id: 'agreements', label: 'Agreements',\n      fields: [\n        { id: 'terms', name: 'terms', label: 'Agree to Terms', type: 'checkbox', required: true }\n      ]\n    }\n  ]\n};\n\nfunction App() {\n  const handleSubmit = (values) => {\n    console.log('Form Submitted!', values);\n    alert('Form Submitted! Check console.');\n  };\n\n  return <DynamicForm formSchema={myFormSchema} onSubmit={handleSubmit} />;\n}\n*/\n",
          "solutionCode": "import React, { useState } from 'react';\n\ninterface FormFieldConfig {\n  id: string;\n  name: string;\n  label: string;\n  type: 'select' | 'checkbox' | 'text' | 'number' | 'textarea';\n  required?: boolean;\n  options?: { value: string; label: string }[];\n  hint?: string;\n}\n\ninterface FormGroupConfig {\n  id: string;\n  label: string;\n  groups?: FormGroupConfig[];\n  fields?: FormFieldConfig[];\n}\n\ninterface FormSchema {\n  id: string;\n  label: string;\n  groups: FormGroupConfig[];\n}\n\nconst FormField = ({ field, value, onChange, error }: any) => {\n  switch (field.type) {\n    case 'select':\n      return (\n        <select\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          style={{ borderColor: error ? 'red' : '' }}\n        >\n          <option value=\"\">Select an option</option>\n          {field.options && field.options.map(option => (\n            <option key={option.value} value={option.value}>\n              {option.label}\n            </option>\n          ))}\n        </select>\n      );\n    case 'checkbox':\n      return (\n        <input\n          type=\"checkbox\"\n          id={field.id}\n          name={field.name}\n          checked={value || false}\n          onChange={e => onChange(field.id, e.target.checked)}\n          required={field.required}\n          style={{ outline: error ? '2px solid red' : '' }}\n        />\n      );\n    case 'text':\n      return (\n        <input\n          type=\"text\"\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          style={{ borderColor: error ? 'red' : '' }}\n        />\n      );\n    case 'textarea':\n      return (\n        <textarea\n          id={field.id}\n          name={field.name}\n          value={value || ''}\n          onChange={e => onChange(field.id, e.target.value)}\n          required={field.required}\n          rows={4}\n          style={{ borderColor: error ? 'red' : '' }}\n        />\n      );\n    default:\n      return <div>Unsupported field type: {field.type}</div>;\n  }\n};\n\nconst FormGroup = ({ group, values, onChange, errors }: any) => {\n  const [expanded, setExpanded] = useState(true);\n  \n  if (group.groups) {\n    return (\n      <div className=\"form-group nested-group-container\">\n        <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n          {group.label} {expanded ? '▼' : '▶'}\n        </h3>\n        {expanded && (\n          <div className=\"nested-groups\">\n            {group.groups.map((nestedGroup: FormGroupConfig) => (\n              <FormGroup\n                key={nestedGroup.id}\n                group={nestedGroup}\n                values={values}\n                onChange={onChange}\n                errors={errors}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"form-group\">\n      <h3 onClick={() => setExpanded(!expanded)} className=\"group-header\">\n        {group.label} {expanded ? '▼' : '▶'}\n      </h3>\n      \n      {expanded && (\n        <div className=\"fields\">\n          {group.fields && group.fields.map((field: FormFieldConfig) => (\n            <div key={field.id} className=\"form-field\">\n              <label htmlFor={field.id}>{field.label}</label>\n              <FormField\n                field={field}\n                value={values[field.id]}\n                onChange={onChange}\n                error={errors[field.id]} // Pass error prop down\n              />\n              {field.hint && <span className=\"hint\">{field.hint}</span>}\n              {errors[field.id] && <span style={{ color: 'red' }}>{errors[field.id]}</span>} {/* Display error message */}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\ninterface DynamicFormProps {\n  formSchema: FormSchema;\n  onSubmit: (values: { [key: string]: any }) => void;\n}\n\nconst DynamicForm = ({ formSchema, onSubmit }: DynamicFormProps) => {\n  const [formValues, setFormValues] = useState<{ [key: string]: any }>({});\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const handleFieldChange = (fieldId: string, value: any) => {\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [fieldId]: value\n    }));\n    // Clear error for this field as soon as it's modified\n    setErrors(prevErrors => {\n      const newErrors = { ...prevErrors };\n      delete newErrors[fieldId];\n      return newErrors;\n    });\n  };\n\n  const collectRequiredFields = (schema: FormSchema | FormGroupConfig): FormFieldConfig[] => {\n    let requiredFields: FormFieldConfig[] = [];\n    if ((schema as FormGroupConfig).fields) {\n      requiredFields = requiredFields.concat((schema as FormGroupConfig).fields!.filter(f => f.required));\n    }\n    if ((schema as FormGroupConfig).groups) {\n      (schema as FormGroupConfig).groups!.forEach(group => {\n        requiredFields = requiredFields.concat(collectRequiredFields(group));\n      });\n    }\n    return requiredFields;\n  };\n\n  const handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    const newErrors: { [key: string]: string } = {};\n    const allRequiredFields = collectRequiredFields(formSchema);\n\n    allRequiredFields.forEach(field => {\n      const value = formValues[field.id];\n      let isValid = true;\n      if (field.type === 'checkbox') {\n        isValid = value === true; // Checkbox must be explicitly true if required\n      } else {\n        isValid = !!value; // Check for any truthy value for other types\n      }\n\n      if (!isValid) {\n        newErrors[field.id] = `${field.label} is required`;\n      }\n    });\n\n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n    } else {\n      setErrors({});\n      onSubmit(formValues);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form-container\">\n      <h2>{formSchema.label}</h2>\n      {formSchema.groups.map(group => (\n        <FormGroup\n          key={group.id}\n          group={group}\n          values={formValues}\n          onChange={handleFieldChange}\n          errors={errors}\n        />\n      ))}\n      <button type=\"submit\">Submit Form</button>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n",
          "testCases": [
            "Test Case 1: Submit an empty form with required fields. Expect `onSubmit` not to be called, and appropriate error messages to display next to all required fields.",
            "Test Case 2: Fill in all required fields and submit. Expect `onSubmit` to be called with the correct `formValues` object, and no error messages displayed.",
            "Test Case 3: Fill in some required fields, leave others empty, then fill the empty ones. Expect errors to disappear from fields as they are filled.",
            "Test Case 4: Test a required checkbox. If unchecked, it should show an error. If checked, the error should clear.",
            "Test Case 5: Test a required select input. If 'Select an option' is chosen (empty string value), it should show an error. If a valid option is chosen, the error should clear."
          ],
          "hints": [
            "You'll need a new state variable in `DynamicForm` to store validation errors, likely an object where keys are `fieldId`s and values are error messages.",
            "The `collectRequiredFields` helper function will be useful to get all fields marked as `required` from the schema, including those in nested groups.",
            "Remember to clear an error for a field as soon as its `onChange` handler is triggered.",
            "Consider how 'empty' is defined for different input types (e.g., `''` for text, `false` for checkbox, `''` for select's default option)."
          ],
          "tags": [
            "React",
            "Forms",
            "Validation",
            "State Management",
            "Error Handling",
            "Recursion"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "dynamic_form_component",
            "form_field_component",
            "form_group_component",
            "javascript_array_methods",
            "react_hooks"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "form_validation_strategies",
            "error_display_patterns",
            "recursive_data_processing"
          ]
        }
      ]
    }
  },
  {
    "id": "819633ea-131d-4d83-a01b-9f4da3f7dabd",
    "startLine": 16500,
    "endLine": 16599,
    "processedDate": "2025-06-17T15:26:54.030Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_dynamic_form",
          "title": "React Dynamic Form Implementation",
          "content": "This theory block describes the implementation of a dynamic form in React, a common requirement in frontend development. A dynamic form is a component that renders its structure (fields, groups, etc.) based on a provided schema, allowing for flexible and configurable form generation without hardcoding each form.\n\n## Key Concepts\n*   **Controlled Components**: In React, form elements like `<input>`, `<textarea>`, and `<select>` maintain their own state. When using controlled components, React state becomes the 'single source of truth' for the input elements. You set the value of an input element from state and update the state via an `onChange` event handler.\n*   **Props for Configuration**: The `DynamicForm` component receives a `formSchema` prop, which is an object defining the structure and content of the form. This includes the form's title, description, and an array of `groups`, each containing its own fields. An `onSubmit` callback prop is also provided for handling form submission.\n*   **State Management with `useState`**: The `useState` hook is used to manage the current values of the form fields. `formValues` holds an object where keys are field IDs and values are the corresponding user inputs. `setFormValues` updates this state.\n*   **Event Handling**: \n    *   `handleSubmit`: This function is triggered when the form is submitted. It prevents the default browser form submission behavior (`e.preventDefault()`) and then calls the `onSubmit` prop with the current `formValues`.\n    *   `handleFieldChange`: This function is passed down to individual form fields (likely within the `FormGroup` component). It updates the `formValues` state whenever an input field's value changes, ensuring the form remains a controlled component.\n*   **Conditional Rendering**: The form description (`formSchema.description`) is rendered only if it exists, using a simple conditional `&&` operator.\n*   **List Rendering (`.map()`)**: The `formSchema.groups` array is iterated over using the `map` method to render multiple `FormGroup` components. Each `FormGroup` receives its specific `group` data, the current `formValues`, and the `handleFieldChange` callback. A unique `key` prop is essential for efficient list rendering in React.\n*   **Component Composition**: The `DynamicForm` leverages component composition by delegating the rendering of individual form groups to a separate `FormGroup` component (which is not provided in the snippet but implied).\n*   **Form Submission Button**: A standard `<button type=\"submit\">` is used, with its text customizable via `formSchema.submitText` or defaulting to 'Submit'.",
          "examples": [
            {
              "id": "example_dynamic_form_1",
              "title": "Basic DynamicForm Structure",
              "code": "import React, { useState } from 'react';\n\nconst FormGroup = ({ group, values, onChange }) => {\n  // This would typically render individual input fields based on group.fields\n  return (\n    <fieldset>\n      <legend>{group.title}</legend>\n      {/* Placeholder for actual input fields */}\n      <p>Group: {group.title}</p>\n      {/* Example of an input inside a FormGroup */}\n      {group.fields && group.fields.map(field => (\n        <div key={field.id}>\n          <label htmlFor={field.id}>{field.label}:</label>\n          <input\n            id={field.id}\n            type={field.type || 'text'}\n            value={values[field.id] || ''}\n            onChange={e => onChange(field.id, e.target.value)}\n          />\n        </div>\n      ))}\n    </fieldset>\n  );\n};\n\nconst DynamicForm = ({ formSchema, onSubmit }) => {\n  const [formValues, setFormValues] = useState({});\n\n  const handleFieldChange = (fieldId, value) => {\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [fieldId]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log('Form submitted with values:', formValues);\n    onSubmit(formValues);\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      <h2>{formSchema.title}</h2>\n      {formSchema.description && (\n        <p className=\"form-description\">{formSchema.description}</p>\n      )}\n      \n      {formSchema.groups.map(group => (\n        <FormGroup\n          key={group.id}\n          group={group}\n          values={formValues}\n          onChange={handleFieldChange}\n        />\n      ))}\n      \n      <div className=\"form-actions\">\n        <button type=\"submit\" className=\"submit-button\">\n          {formSchema.submitText || 'Submit'}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default DynamicForm;",
              "explanation": "This example shows the `DynamicForm` component using `useState` for `formValues` and `handleFieldChange` to update them. It also includes a basic `FormGroup` component that would typically render actual input fields based on a `group.fields` array. This illustrates how data flows from the parent `DynamicForm` down to `FormGroup` and back up via the `onChange` callback.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_dynamic_form_controlled_component",
            "question_dynamic_form_state_management_mcq",
            "question_dynamic_form_key_prop",
            "question_dynamic_form_prevent_default_flashcard",
            "question_dynamic_form_schema_evolution"
          ],
          "relatedTasks": [
            "task_implement_formgroup",
            "task_dynamic_form_validation",
            "task_dynamic_form_conditional_rendering"
          ],
          "tags": [
            "React",
            "Forms",
            "State Management",
            "Controlled Components",
            "Component Composition",
            "Frontend Development"
          ],
          "technology": "React",
          "prerequisites": [
            "react_basics",
            "javascript_es6",
            "dom_events"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "advanced_react_forms",
            "form_libraries_integration",
            "custom_form_builders"
          ]
        },
        {
          "id": "theory_javascript_spreadsheet",
          "title": "Vanilla JavaScript Spreadsheet Implementation",
          "content": "This theory block outlines the basic principles for building a simple spreadsheet application using vanilla JavaScript and DOM manipulation. The goal is to create an interactive grid of cells where users can input data, and the grid can dynamically grow by adding rows and columns.\n\n## Key Concepts\n*   **Class-Based Structure**: The spreadsheet is encapsulated within a `Spreadsheet` class, which manages the application's state (number of rows/columns, cell data) and behavior (rendering, adding rows/columns, handling cell changes).\n*   **Constructor Initialization**: The `constructor` sets up the initial dimensions (`rows`, `cols`) and initializes a 2D array (`this.data`) to store cell values. `Array(rows).fill().map(() => Array(cols).fill(''))` is a common pattern to create a 2D array where each inner array is a new instance, preventing unintended shared references.\n*   **DOM Manipulation for Rendering**: The `render()` method is responsible for creating the HTML table structure representing the spreadsheet.\n    *   `document.createElement()`: Used to create table elements like `<table>`, `<thead>`, `<tbody>`, `<tr>`, `<th>`, `<td>`, `<span>`, `<input>`. \n    *   `appendChild()`: Used to build the DOM tree by attaching child elements to their parents.\n    *   `textContent`: Used to set the visible text for elements like headers (e.g., 'A', 'B', '1', '2').\n    *   `className`: Used to assign CSS classes for styling.\n*   **Column and Row Headers**: \n    *   Column headers (A, B, C...) are generated using `String.fromCharCode(65 + col)`, where 65 is the ASCII code for 'A'.\n    *   Row headers (1, 2, 3...) are simply `row + 1`.\n*   **Interactive Input Cells**: Each data cell (`<td>`) contains an `<input>` element. \n    *   `input.value`: Binds the input's displayed value to the corresponding data in `this.data`.\n    *   `input.dataset`: Custom data attributes (`data-row`, `data-col`) are used to store the row and column index directly on the input element. This makes it easy to retrieve the cell's coordinates when handling events.\n*   **Event Listeners**: \n    *   `'click'` listener on the '+' button: Triggers the `addColumn()` method, modifying the spreadsheet's dimensions and potentially re-rendering.\n    *   `'change'` listener on input cells: Updates the `this.data` array with the new value entered by the user. The `dataset` properties (`e.target.dataset.row`, `e.target.dataset.col`) are crucial for identifying which cell changed.\n*   **Dynamic Column Addition**: The `addColumn()` method (and implicitly `addRow()`) would involve increasing the `this.cols` (or `this.rows`) property, expanding the `this.data` array for the new cells, and then updating the DOM (either by full re-render or by appending new elements).\n*   **Re-rendering Strategy**: For simplicity, a full re-render (clearing the container and calling `render()` again) can be used when structural changes occur (like adding rows/columns). For cell value changes, direct DOM updates are more efficient.",
          "examples": [
            {
              "id": "example_spreadsheet_class_basic",
              "title": "Basic Spreadsheet Class Structure",
              "code": "class Spreadsheet {\n  constructor(rows = 5, cols = 5) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(rows).fill().map(() => Array(cols).fill(''));\n    this.container = null; // Reference to the DOM element where spreadsheet will be rendered\n  }\n  \n  render(containerElement) {\n    this.container = containerElement;\n    this.container.innerHTML = ''; // Clear previous content\n\n    const table = document.createElement('table');\n    table.className = 'spreadsheet';\n    \n    // Create table header (column letters)\n    const thead = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n    \n    // Empty cell for row numbers column\n    headerRow.appendChild(document.createElement('th'));\n    \n    // Column headers (A, B, C, etc.)\n    for (let col = 0; col < this.cols; col++) {\n      const th = document.createElement('th');\n      th.textContent = String.fromCharCode(65 + col); // A, B, C, ...\n      headerRow.appendChild(th);\n    }\n    \n    // Add \"+\" button for adding columns\n    const addColHeader = document.createElement('th');\n    const addColButton = document.createElement('button');\n    addColButton.textContent = '+';\n    addColButton.addEventListener('click', () => this.addColumn());\n    addColHeader.appendChild(addColButton);\n    headerRow.appendChild(addColHeader);\n    thead.appendChild(headerRow);\n    table.appendChild(thead);\n    \n    // Create table body with data\n    const tbody = document.createElement('tbody');\n    \n    for (let row = 0; row < this.rows; row++) {\n      const tr = document.createElement('tr');\n      \n      // Row number\n      const rowHeader = document.createElement('th');\n      rowHeader.textContent = row + 1;\n      tr.appendChild(rowHeader);\n      \n      // Row cells\n      for (let col = 0; col < this.cols; col++) {\n        const td = document.createElement('td');\n        const input = document.createElement('input');\n        input.value = this.data[row][col];\n        input.dataset.row = row;\n        input.dataset.col = col;\n        \n        input.addEventListener('change', (e) => {\n          const { row, col } = e.target.dataset;\n          this.data[parseInt(row)][parseInt(col)] = e.target.value;\n          console.log(`Data updated at [${row},${col}]: ${e.target.value}`);\n        });\n        \n        td.appendChild(input);\n        tr.appendChild(td);\n      }\n\n      // Add \"+\" button for adding rows (optional, usually at the bottom)\n      // For this example, we'll put it at the end of each row for simplicity\n      // Or better, a single button at the bottom of the last row header\n      \n      tbody.appendChild(tr);\n    }\n\n    // Add a row for the 'add row' button if not already in existing rows\n    const addRowTR = document.createElement('tr');\n    const addRowTH = document.createElement('th');\n    const addRowButton = document.createElement('button');\n    addRowButton.textContent = '+';\n    addRowButton.addEventListener('click', () => this.addRow());\n    addRowTH.appendChild(addRowButton);\n    addRowTR.appendChild(addRowTH);\n    // Fill the rest of the row with empty cells or colspan\n    const emptyTd = document.createElement('td');\n    emptyTd.colSpan = this.cols + 1; // +1 for the addColHeader\n    addRowTR.appendChild(emptyTd);\n    tbody.appendChild(addRowTR);\n\n    table.appendChild(tbody);\n    this.container.appendChild(table);\n  }\n\n  addColumn() {\n    this.cols++;\n    for(let i = 0; i < this.rows; i++) {\n      this.data[i].push(''); // Add a new empty cell to each row\n    }\n    console.log('Column added. New dimensions:', this.rows, 'x', this.cols);\n    this.render(this.container); // Re-render the spreadsheet\n  }\n\n  addRow() {\n    this.rows++;\n    this.data.push(Array(this.cols).fill('')); // Add a new empty row\n    console.log('Row added. New dimensions:', this.rows, 'x', this.cols);\n    this.render(this.container); // Re-render the spreadsheet\n  }\n}\n\n// Usage example (requires a div with id='spreadsheet-container' in HTML)\n// const spreadsheet = new Spreadsheet(3, 3);\n// document.addEventListener('DOMContentLoaded', () => {\n//   const container = document.getElementById('spreadsheet-container');\n//   if (container) {\n//     spreadsheet.render(container);\n//   }\n// });",
              "explanation": "This example provides a more complete `Spreadsheet` class, building upon the snippet. It includes the `constructor`, a `render` method that dynamically creates the entire table structure, and basic `addColumn` and `addRow` methods. It demonstrates how to initialize the 2D data array, populate table headers, create input cells with `dataset` attributes, and handle `change` events to update the internal data. The `render` method is called after `addColumn` or `addRow` to reflect structural changes.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_spreadsheet_initialization",
            "question_spreadsheet_dom_manipulation_mcq",
            "question_spreadsheet_data_attribute",
            "question_spreadsheet_add_row_flashcard",
            "question_spreadsheet_formula_parsing_open",
            "question_spreadsheet_compare_frameworks"
          ],
          "relatedTasks": [
            "task_spreadsheet_complete_crud",
            "task_spreadsheet_formula_evaluation",
            "task_spreadsheet_undo_redo"
          ],
          "tags": [
            "JavaScript",
            "DOM Manipulation",
            "Classes",
            "Data Structures",
            "Event Handling",
            "Web Development"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "javascript_basics",
            "dom_api",
            "arrays_methods"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "data_grid_libraries",
            "custom_ui_components",
            "performance_optimization_dom"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_dynamic_form_controlled_component",
          "topic": "React Dynamic Form: Controlled Components",
          "level": "medium",
          "type": "open",
          "question": "The `DynamicForm` component, by its nature, relies on controlled components. Explain what a controlled component is in React and how the provided `DynamicForm` snippet exemplifies this concept. Describe the flow of data when a user types into an input field within this dynamic form.",
          "answer": "A controlled component in React is an input form element whose value is controlled by React state. Instead of the DOM element managing its own state, React state becomes the 'single source of truth'. The input's `value` prop is set by state, and any changes to the input trigger an `onChange` event handler which updates that state. This allows React to control the input's behavior and value.\n\nIn the `DynamicForm` snippet:\n1.  **State Initialization**: `const [formValues, setFormValues] = useState({});` initializes the form's data in the `formValues` state.\n2.  **Passing Data Down**: `formValues` is passed as a prop to `FormGroup` (and subsequently to individual input fields).\n3.  **Input `value` Prop**: Each `<input>` element (within `FormGroup`) would have its `value` prop bound to `values[field.id]`. For example, `<input value={values['firstName']} />`.\n4.  **`onChange` Event Handler**: When a user types into an input, an `onChange` event fires. This event calls `handleFieldChange`, which is passed down from `DynamicForm`. `handleFieldChange` receives the `fieldId` and the new `value`.\n5.  **State Update**: `setFormValues` is called with a new object that includes the updated field value. `setFormValues(prevValues => ({ ...prevValues, [fieldId]: value }));`\n6.  **Re-render**: React detects the state change, re-renders the `DynamicForm` and its children, including the specific input field whose value is now updated in the state, causing the input to display the new value.\n\nThis continuous loop (state -> input value -> user input -> onChange -> state update -> re-render) ensures that the input's value is always consistent with the React state, making it a controlled component.",
          "options": [],
          "analysisPoints": [
            "Understanding of controlled vs. uncontrolled components.",
            "Ability to trace data flow in React components.",
            "Knowledge of `useState` hook.",
            "Understanding of `onChange` event and `e.target.value`."
          ],
          "keyConcepts": [
            "Controlled Components",
            "React State Management",
            "useState Hook",
            "Data Flow in React",
            "Event Handling"
          ],
          "evaluationCriteria": [
            "Clarity and accuracy of explanation of controlled components.",
            "Correctness of data flow description.",
            "Identification of relevant code snippets/mechanisms.",
            "Completeness of the explanation."
          ],
          "example": "```javascript\n// Simplified representation of a controlled input within FormGroup\nfunction MyInputField({ id, value, onChange }) {\n  return (\n    <input \n      id={id} \n      type=\"text\" \n      value={value || ''} \n      onChange={(e) => onChange(id, e.target.value)}\n    />\n  );\n}\n\n// How it's used in DynamicForm's render cycle:\n// <MyInputField \n//   id=\"someField\"\n//   value={formValues[\"someField\"]}\n//   onChange={handleFieldChange}\n// />\n```\nThis example shows the core interaction: `value` comes from state, `onChange` updates state.",
          "tags": [
            "React",
            "Forms",
            "Controlled Components",
            "State Management"
          ],
          "prerequisites": [
            "react_basics",
            "useState_hook"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_state_management_mcq",
          "topic": "React Dynamic Form: State Management",
          "level": "easy",
          "type": "mcq",
          "question": "In the `DynamicForm` component, which React Hook is primarily used for managing the `formValues` state?",
          "answer": "useState",
          "options": [
            "useState",
            "useEffect",
            "useContext",
            "useReducer"
          ],
          "analysisPoints": [
            "Tests basic knowledge of React Hooks.",
            "Identifies the correct hook for component-level state.",
            "Distinguishes between state management hooks."
          ],
          "keyConcepts": [
            "React Hooks",
            "useState"
          ],
          "evaluationCriteria": [
            "Correct identification of `useState`."
          ],
          "example": "The line `const [formValues, setFormValues] = useState({});` in the `DynamicForm` snippet clearly indicates the use of the `useState` hook for managing the component's internal state for form data. `useEffect` is for side effects, `useContext` for global state, and `useReducer` for more complex state logic.",
          "tags": [
            "React",
            "Hooks",
            "State Management",
            "MCQ"
          ],
          "prerequisites": [
            "react_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_dynamic_form_key_prop",
          "topic": "React Dynamic Form: List Rendering",
          "level": "medium",
          "type": "flashcard",
          "question": "In the `DynamicForm` component, why is the `key={group.id}` prop crucial when mapping over `formSchema.groups` to render `FormGroup` components?",
          "answer": "The `key` prop provides React with a way to identify which items in a list have changed, been added, or been removed. Keys should be stable, unique, and immutable. When rendering lists of components, using a unique `key` helps React efficiently update the UI, correctly associate state and props with the right component instances, and prevent potential bugs and performance issues, especially when list items are reordered or removed.",
          "options": [],
          "analysisPoints": [
            "Understanding of React's list reconciliation.",
            "Importance of unique keys.",
            "Consequences of missing or incorrect keys."
          ],
          "keyConcepts": [
            "React List Rendering",
            "Key Prop",
            "Reconciliation"
          ],
          "evaluationCriteria": [
            "Correct explanation of `key` prop's purpose.",
            "Mention of uniqueness and stability."
          ],
          "example": "```javascript\n// Correct usage:\n{formSchema.groups.map(group => (\n  <FormGroup\n    key={group.id} // Ensures React can efficiently track each FormGroup\n    group={group}\n    values={formValues}\n    onChange={handleFieldChange}\n  />\n))}\n\n// Incorrect (avoid using index as key if list order can change or items are added/removed):\n// {formSchema.groups.map((group, index) => (\n//   <FormGroup key={index} ... />\n// ))}\n```",
          "tags": [
            "React",
            "List Rendering",
            "Keys",
            "Performance",
            "Flashcard"
          ],
          "prerequisites": [
            "react_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dynamic_form_prevent_default_flashcard",
          "topic": "React Dynamic Form: Event Handling",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of `e.preventDefault()` inside the `handleSubmit` function in the `DynamicForm` component?",
          "answer": "`e.preventDefault()` prevents the browser's default action for the event. In the context of a form `submit` event, it stops the browser from performing a full page reload or navigating to a new URL, which is the default behavior for HTML forms. This allows the React application to handle the form submission purely client-side without interrupting the Single Page Application (SPA) experience.",
          "options": [],
          "analysisPoints": [
            "Knowledge of DOM event default actions.",
            "Understanding of SPA principles."
          ],
          "keyConcepts": [
            "Event Handling",
            "e.preventDefault()",
            "Form Submission",
            "Single Page Application"
          ],
          "evaluationCriteria": [
            "Correctly identifies the effect of `preventDefault()` on form submission."
          ],
          "example": "```javascript\nconst handleSubmit = (e) => {\n  e.preventDefault(); // This line is crucial!\n  // Without it, the page would reload, losing React's state.\n  console.log('Form submitted:', formValues);\n  onSubmit(formValues);\n};\n```",
          "tags": [
            "React",
            "Events",
            "Forms",
            "JavaScript",
            "Flashcard"
          ],
          "prerequisites": [
            "dom_events"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_dynamic_form_schema_evolution",
          "topic": "React Dynamic Form: Advanced Scenarios",
          "level": "hard",
          "type": "open",
          "question": "Consider a scenario where the `formSchema` for the `DynamicForm` can change dynamically at runtime (e.g., loaded from an API, or changes based on user selections). How would you ensure that `formValues` state correctly resets or updates to reflect the new schema? What potential issues might arise and how would you mitigate them?",
          "answer": "When `formSchema` changes dynamically, `formValues` needs to be synchronized. \n\n**Synchronization Strategies:**\n1.  **Full Reset**: If the new schema is completely different, the simplest approach is to reset `formValues` to an empty object or initial values derived from the new `formSchema`. This can be done using `useEffect` with `formSchema` as a dependency:\n    ```javascript\n    useEffect(() => {\n      // Optionally derive initial values from new schema, e.g., default values\n      const initialValues = {};\n      formSchema.groups.forEach(group => {\n        group.fields.forEach(field => {\n          initialValues[field.id] = field.defaultValue || '';\n        });\n      });\n      setFormValues(initialValues);\n    }, [formSchema]); // Re-run when formSchema changes\n    ```\n2.  **Partial Update/Merge**: If schemas often overlap (e.g., adding/removing a few fields), you might merge existing `formValues` with defaults from the new schema, preserving user input for unchanged fields.\n    ```javascript\n    useEffect(() => {\n      const newDefaults = {};\n      formSchema.groups.forEach(group => {\n        group.fields.forEach(field => {\n          newDefaults[field.id] = field.defaultValue || '';\n        });\n      });\n      // Merge existing values, prioritize new schema defaults for new fields\n      setFormValues(prevValues => ({\n        ...newDefaults,\n        ...prevValues,\n        // Overwrite prevValues with defaults if field no longer exists in new schema\n        // or if specific reset logic is needed.\n        // A more robust merge would iterate over prevValues and check if fieldId exists in new schema.\n      }));\n    }, [formSchema]);\n    ```\n\n**Potential Issues and Mitigation:**\n1.  **Stale `formValues`**: If `formValues` is not reset/updated, it might contain data for fields that no longer exist in the new schema or be missing data for new mandatory fields. \n    *   **Mitigation**: Implement `useEffect` as described above to derive and set initial values from the new `formSchema`.\n2.  **User Data Loss**: A full reset clears all user input, which might be undesirable if part of the form remains the same. \n    *   **Mitigation**: Use a partial update/merge strategy, carefully merging `prevValues` with `newDefaults`, ensuring existing relevant data is preserved while new defaults are applied for new fields.\n3.  **Performance on Frequent Schema Changes**: Re-rendering the entire form and possibly re-initializing state on every schema change could be costly. \n    *   **Mitigation**: Memoize `DynamicForm` if `formSchema` changes frequently but `onSubmit` is stable. Optimize `FormGroup` components to only re-render when their specific props change. Use `useMemo` for derived values if calculations are expensive.\n4.  **Schema Validation Inconsistencies**: If validation rules are tied to the schema, they must update correctly with the new schema, potentially invalidating previously valid inputs.\n    *   **Mitigation**: Ensure validation logic is dynamically loaded/applied based on the current `formSchema`. Provide clear user feedback if inputs become invalid.\n5.  **User Experience (UX)**: Abrupt changes can disorient users. \n    *   **Mitigation**: Provide visual cues (e.g., loading spinners) during schema transitions. Consider animated transitions for form elements. If a significant part of the form changes, a confirmation dialog might be necessary before discarding unsaved changes.",
          "options": [],
          "analysisPoints": [
            "Understanding of `useEffect` for syncing state with props.",
            "Ability to identify potential pitfalls in dynamic data scenarios.",
            "Problem-solving for data persistence and UX.",
            "Consideration of performance and validation."
          ],
          "keyConcepts": [
            "React Lifecycle",
            "useEffect Hook",
            "Dynamic Forms",
            "State Synchronization",
            "User Experience",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Proposes valid state synchronization methods.",
            "Identifies relevant issues (data loss, staleness, UX).",
            "Provides actionable mitigation strategies.",
            "Demonstrates advanced React knowledge."
          ],
          "example": "See the `useEffect` code snippets in the answer for examples of state synchronization.",
          "tags": [
            "React",
            "Forms",
            "State Management",
            "Dynamic Forms",
            "useEffect",
            "Advanced"
          ],
          "prerequisites": [
            "react_lifecycle",
            "useEffect_hook",
            "react_state_management"
          ],
          "complexity": 9,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_spreadsheet_initialization",
          "topic": "JavaScript Spreadsheet: Initialization",
          "level": "medium",
          "type": "mcq",
          "question": "Given the `Spreadsheet` class constructor:\n```javascript\nclass Spreadsheet {\n  constructor(rows = 5, cols = 5) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(rows).fill().map(() => Array(cols).fill(''));\n  }\n  // ... rest of the class\n}\n```\nWhat is the purpose of `Array(rows).fill().map(() => Array(cols).fill(''))`?",
          "answer": "To create a 2D array where each inner array is a new, distinct array, preventing unintended shared references.",
          "options": [
            "To create a 2D array with all cells initialized to an empty string, ensuring each row is a unique array.",
            "To create a 2D array and fill it with references to the same empty array, saving memory.",
            "To efficiently deep clone a pre-existing 2D array of spreadsheet data.",
            "To simply create an array of `rows` length, with each element being an array of `cols` length filled with empty strings."
          ],
          "analysisPoints": [
            "Tests understanding of JavaScript array methods (`fill`, `map`).",
            "Highlights the common pitfall of `Array.fill()` with objects/arrays.",
            "Explains the necessity of `map` to create unique inner arrays."
          ],
          "keyConcepts": [
            "JavaScript Arrays",
            "2D Arrays",
            "Array.prototype.fill()",
            "Array.prototype.map()",
            "Reference vs. Value"
          ],
          "evaluationCriteria": [
            "Correctly identifies the unique array creation.",
            "Shows awareness of the `fill()` method's behavior with non-primitive values."
          ],
          "example": "```javascript\n// Scenario 1: Incorrect way, all inner arrays are references to the same array\nconst bad2DArray = Array(3).fill(Array(3).fill(''));\nbad2DArray[0][0] = 'hello';\nconsole.log(bad2DArray[1][0]); // Outputs 'hello' because all rows are the same array instance\n\n// Scenario 2: Correct way, each inner array is a new instance\nconst good2DArray = Array(3).fill().map(() => Array(3).fill(''));\ngood2DArray[0][0] = 'hello';\nconsole.log(good2DArray[1][0]); // Outputs '' because each row is a distinct array instance\n```\nThe `map` function with a callback that returns a new `Array(cols).fill('')` ensures that for each 'row' in the outer array, a *new* inner array is created, preventing modifications to one row from affecting others.",
          "tags": [
            "JavaScript",
            "Arrays",
            "Data Structures",
            "MCQ"
          ],
          "prerequisites": [
            "javascript_arrays"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_spreadsheet_dom_manipulation_mcq",
          "topic": "JavaScript Spreadsheet: DOM Manipulation",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following DOM manipulation methods is used to create new HTML elements in the `Spreadsheet` class's `render()` method?",
          "answer": "document.createElement()",
          "options": [
            "document.getElementById()",
            "element.innerHTML = ''",
            "document.createElement()",
            "element.setAttribute()"
          ],
          "analysisPoints": [
            "Tests basic knowledge of DOM API.",
            "Distinguishes between methods for selecting, modifying, and creating elements."
          ],
          "keyConcepts": [
            "DOM API",
            "document.createElement"
          ],
          "evaluationCriteria": [
            "Correct identification of `document.createElement()`."
          ],
          "example": "```javascript\n// From the Spreadsheet class:\nconst table = document.createElement('table');\nconst thead = document.createElement('thead');\n// ...and so on for tr, th, td, input, button.\n```\n`document.getElementById()` selects an element, `element.innerHTML = ''` clears content, and `element.setAttribute()` modifies attributes of an existing element.",
          "tags": [
            "JavaScript",
            "DOM",
            "MCQ"
          ],
          "prerequisites": [
            "dom_api"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_spreadsheet_data_attribute",
          "topic": "JavaScript Spreadsheet: Custom Data Attributes",
          "level": "medium",
          "type": "open",
          "question": "In the `Spreadsheet` class, each input element has `input.dataset.row = row;` and `input.dataset.col = col;`. Explain the purpose and benefit of using `dataset` attributes in this context.",
          "answer": "The `dataset` property (or `data-*` attributes in HTML) allows developers to store custom data directly on HTML elements. In the `Spreadsheet` context:\n\n**Purpose:**\n*   **Storing Metadata**: `data-row` and `data-col` are used to store the specific row and column index of a cell directly on its corresponding `<input>` element. This creates a direct link between the DOM element and its logical position in the spreadsheet's data model (`this.data`).\n\n**Benefits:**\n*   **Event Handling Convenience**: When an `input` element's `change` event fires, `e.target` refers to the input element itself. By using `e.target.dataset.row` and `e.target.dataset.col`, the event handler can easily and directly retrieve the exact cell's coordinates without needing to traverse the DOM, infer position from parent elements, or rely on global variables.\n*   **Separation of Concerns**: It keeps the data associated with the element close to the element itself, rather than needing to pass it around through complex function arguments or closures.\n*   **Readability and Maintainability**: It makes the code clearer by explicitly showing which data pertains to which element.\n*   **No Global Variables/Complex Lookups**: Avoids the need for complex lookups or maintaining large maps to link DOM elements back to their logical data, simplifying the event handling logic.",
          "options": [],
          "analysisPoints": [
            "Understanding of `data-*` attributes.",
            "Practical application in event delegation.",
            "Comparison to alternative methods (e.g., closures, DOM traversal)."
          ],
          "keyConcepts": [
            "HTML Data Attributes",
            "DOM API",
            "Event Handling",
            "e.target",
            "Metadata"
          ],
          "evaluationCriteria": [
            "Clear explanation of `dataset` purpose.",
            "Elaboration on benefits, especially for event handling.",
            "Demonstrates practical understanding."
          ],
          "example": "```javascript\n// Setting the dataset attributes\ninput.dataset.row = row; // Becomes data-row='N' in HTML\ninput.dataset.col = col; // Becomes data-col='M' in HTML\n\n// Retrieving them in an event listener\ninput.addEventListener('change', (e) => {\n  const { row, col } = e.target.dataset; // Destructures data-row and data-col\n  this.data[parseInt(row)][parseInt(col)] = e.target.value;\n});\n```",
          "tags": [
            "JavaScript",
            "DOM",
            "HTML",
            "Event Handling",
            "Data Attributes"
          ],
          "prerequisites": [
            "dom_api",
            "javascript_events"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_spreadsheet_add_row_flashcard",
          "topic": "JavaScript Spreadsheet: Dynamic Content",
          "level": "medium",
          "type": "flashcard",
          "question": "How would you modify the `Spreadsheet` class to include an `addRow()` method that adds a new row to the spreadsheet, similar to `addColumn()`?",
          "answer": "The `addRow()` method would:\n1.  Increment `this.rows`.\n2.  Add a new empty array (representing the new row) to `this.data`. This new array should be filled with `this.cols` number of empty strings: `this.data.push(Array(this.cols).fill(''));`\n3.  Re-render the entire spreadsheet, or efficiently append the new row's DOM elements to the `<tbody>` if performance is critical.",
          "options": [],
          "analysisPoints": [
            "Understanding of array manipulation for 2D data.",
            "Knowledge of how to update the DOM after data changes.",
            "Ability to extend existing class functionality."
          ],
          "keyConcepts": [
            "JavaScript Classes",
            "2D Arrays",
            "DOM Manipulation",
            "Dynamic UI"
          ],
          "evaluationCriteria": [
            "Correct logic for data array modification.",
            "Proper strategy for DOM update (re-render or append)."
          ],
          "example": "```javascript\n// Inside Spreadsheet class\naddRow() {\n  this.rows++;\n  this.data.push(Array(this.cols).fill('')); // Add a new empty row to data\n  console.log('Row added. New dimensions:', this.rows, 'x', this.cols);\n  this.render(this.container); // Assuming render clears and rebuilds, or a more targeted update is implemented\n}\n```",
          "tags": [
            "JavaScript",
            "Classes",
            "DOM",
            "Arrays",
            "Flashcard"
          ],
          "prerequisites": [
            "javascript_arrays",
            "dom_api"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_spreadsheet_formula_parsing_open",
          "topic": "JavaScript Spreadsheet: Formulas",
          "level": "hard",
          "type": "open",
          "question": "Beyond simple data entry, a key feature of spreadsheets is formula evaluation (e.g., `=A1+B1`). Describe how you would approach implementing a basic formula evaluation system for the `Spreadsheet` class. What challenges would you anticipate, and how might you address them?",
          "answer": "Implementing formula evaluation would involve several steps:\n\n**Approach:**\n1.  **Formula Recognition**: When a cell's value is changed, check if it starts with an `=` sign. If it does, treat it as a formula; otherwise, treat it as plain text.\n2.  **Parsing**: For formulas (e.g., `=A1+B1`), parse the string to identify cell references (A1, B1) and arithmetic operations (+, -, *, /).\n    *   **Cell Reference Conversion**: Convert cell references like `A1` into their numerical `[row, col]` indices. `A1` would be `[0, 0]`, `B1` would be `[0, 1]`, `A2` would be `[1, 0]`, etc.\n3.  **Evaluation**: Replace cell references with their current values from `this.data` and then evaluate the resulting arithmetic expression.\n    *   **Recursive Evaluation**: If a cell `C1` contains `=A1+B1` and `A1` contains `=D1+E1`, the evaluation needs to be recursive. A dependency graph could be useful.\n    *   **Handling Non-Numeric Values**: If a referenced cell contains non-numeric data, it should be treated as 0 or result in an error.\n4.  **Display**: The input element should display the *result* of the formula, while the actual formula string is stored in `this.data`.\n5.  **Re-calculation on Dependency Change**: This is crucial. If `A1` or `B1` changes, `C1` (which depends on them) must be re-evaluated. This requires tracking dependencies.\n\n**Challenges and Mitigation:**\n1.  **Circular References**: `A1 = B1 + 1` and `B1 = A1 + 1` creates an infinite loop. \n    *   **Mitigation**: Implement a dependency graph (DAG) and detect cycles during parsing or before evaluation. If a cycle is detected, mark cells as `ERROR: Circular Reference`.\n2.  **Order of Operations (Precedence)**: `1 + 2 * 3` should be 7, not 9. \n    *   **Mitigation**: Use a well-known algorithm like Shunting-yard or an expression parser library. For simple cases, `eval()` can be used (but is insecure and generally discouraged), or build a simple operator precedence parser.\n3.  **Error Handling**: Division by zero, invalid cell references (e.g., `=Z999` if `Z999` doesn't exist), non-numeric operands. \n    *   **Mitigation**: Implement robust error checks and display appropriate error messages (e.g., `#DIV/0!`, `#REF!`, `#VALUE!`) in the cell.\n4.  **Performance**: Re-calculating all dependent cells, especially in a large spreadsheet with complex formulas, can be slow. \n    *   **Mitigation**: Implement memoization for cell values. Only re-calculate cells whose direct or indirect dependencies have changed. A dirty flag system or a reactive system could be used.\n5.  **Function Support**: Extending to functions like `SUM(A1:A5)`, `AVERAGE()`, `IF()`. \n    *   **Mitigation**: Requires a more sophisticated parser and evaluator capable of recognizing function names and argument lists.\n6.  **User Experience**: Displaying results, editing formulas, feedback on errors. \n    *   **Mitigation**: Toggle between displaying formula and result on cell focus/blur. Provide tooltips for errors.",
          "options": [],
          "analysisPoints": [
            "Understanding of parsing and evaluation concepts.",
            "Ability to identify complex algorithm challenges (circular refs, precedence).",
            "Knowledge of data structures for dependency tracking (DAG).",
            "Consideration of error handling and performance."
          ],
          "keyConcepts": [
            "Formula Parsing",
            "Abstract Syntax Tree (AST)",
            "Dependency Graph (DAG)",
            "Circular References",
            "Order of Operations",
            "Error Handling",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Comprehensive outline of the formula evaluation process.",
            "Identification of core challenges like circular references and order of operations.",
            "Proposes relevant mitigation strategies for challenges.",
            "Demonstrates deep understanding of algorithm design."
          ],
          "example": "```javascript\n// A simplified formula evaluation (highly insecure and basic for illustrative purposes only)\nfunction evaluateFormula(formulaString, data, cellToCoord) {\n  // Example: formulaString = '=A1+B2'\n  let expression = formulaString.substring(1); // Remove '=' prefix\n\n  // Replace cell references with their values\n  expression = expression.replace(/([A-Z]+)(\\d+)/g, (match, colStr, rowStr) => {\n    const col = colStr.charCodeAt(0) - 65;\n    const row = parseInt(rowStr) - 1;\n    if (data[row] && typeof data[row][col] !== 'undefined') {\n      const val = data[row][col];\n      // If dependent cell is also a formula, we'd need to evaluate it first recursively\n      return !isNaN(parseFloat(val)) ? parseFloat(val) : 0; // Or handle errors\n    }\n    return '0'; // Handle invalid reference\n  });\n\n  try {\n    // DANGER: Using eval() is generally unsafe for untrusted input.\n    // A real implementation would use a proper expression parser.\n    return eval(expression);\n  } catch (e) {\n    return '#ERROR!';\n  }\n}\n\n// Example usage within a change listener (conceptual)\n// input.addEventListener('change', (e) => {\n//   const { row, col } = e.target.dataset;\n//   const value = e.target.value;\n//   this.data[parseInt(row)][parseInt(col)] = value;\n\n//   if (value.startsWith('=')) {\n//     const result = evaluateFormula(value, this.data, this.cellToCoordMap);\n//     e.target.value = result; // Display result\n//   }\n//   // Trigger re-calculation for dependent cells\n//   this.recalculateDependents(parseInt(row), parseInt(col));\n// });\n```",
          "tags": [
            "JavaScript",
            "Algorithms",
            "Data Structures",
            "Spreadsheet",
            "Formulas",
            "Advanced"
          ],
          "prerequisites": [
            "javascript_basics",
            "data_structures",
            "algorithms_basics"
          ],
          "complexity": 9,
          "interviewFrequency": 5,
          "learningPath": "advanced"
        },
        {
          "id": "question_spreadsheet_compare_frameworks",
          "topic": "JavaScript Spreadsheet: Architecture Comparison",
          "level": "hard",
          "type": "open",
          "question": "The provided `Spreadsheet` implementation uses vanilla JavaScript and direct DOM manipulation. Discuss the advantages and disadvantages of this approach compared to building a similar spreadsheet application using a modern JavaScript framework/library like React or Vue. When would you choose one over the other?",
          "answer": "**Vanilla JavaScript (Direct DOM Manipulation)**\n\n**Advantages:**\n*   **Lightweight**: No framework overhead, smaller bundle size, potentially faster initial load times.\n*   **Full Control**: Complete control over the DOM and rendering logic, allowing for highly optimized or niche interactions.\n*   **No Dependencies**: Fewer external dependencies, reducing security risks and maintenance burden.\n*   **Better Understanding of Fundamentals**: Forces a deeper understanding of how the browser and JavaScript interact with the DOM.\n\n**Disadvantages:**\n*   **Complexity for Large Applications**: Manual DOM manipulation becomes unwieldy and error-prone as the application grows (e.g., managing element updates, state synchronization, event listeners).\n*   **Developer Experience**: More verbose code, less declarative, harder to maintain, and higher boilerplate.\n*   **Performance Optimization**: Requires manual optimization (e.g., avoiding unnecessary re-renders, using document fragments) which can be difficult to implement correctly.\n*   **Lack of Built-in Features**: No out-of-the-box state management, routing, component lifecycle management, etc.\n\n**Modern JavaScript Frameworks (e.g., React, Vue)**\n\n**Advantages:**\n*   **Declarative Programming**: Write what the UI *should* look like for a given state, and the framework handles the DOM updates (e.g., Virtual DOM).\n*   **Component-Based Architecture**: Promotes modularity, reusability, and easier maintenance of UI elements.\n*   **Efficient Updates**: Frameworks like React use a Virtual DOM and reconciliation algorithms for optimized updates, abstracting away manual DOM manipulation complexities.\n*   **Improved Developer Experience**: Rich ecosystems, built-in state management tools, routing solutions, and community support make development faster and more efficient.\n*   **Scalability**: Better suited for large, complex applications with many interactive components.\n\n**Disadvantages:**\n*   **Overhead**: Larger bundle sizes and a learning curve for the framework's paradigms.\n*   **Less Control**: Abstracts away direct DOM access, which can be limiting for very specific, low-level optimizations.\n*   **Dependency Management**: Reliance on a framework and its ecosystem can introduce versioning conflicts or larger dependency trees.\n\n**When to Choose Which:**\n*   **Choose Vanilla JS when:**\n    *   The application is very small, simple, and has limited interactivity (e.g., a single-purpose widget).\n    *   Performance is *extremely* critical, and you can hand-optimize DOM updates better than a framework (a rare scenario).\n    *   You need absolute minimal bundle size and no external dependencies.\n    *   The goal is to learn or demonstrate fundamental web development concepts without abstractions.\n*   **Choose a Framework (React/Vue) when:**\n    *   The application is moderately to highly complex, with many interactive components, dynamic data, and state.\n    *   You are working in a team where consistency and maintainability are crucial.\n    *   Rapid development and scalability are priorities.\n    *   You need access to a rich ecosystem of libraries, tools, and community support (e.g., for state management, routing, UI components).\n    *   The long-term maintainability and extensibility of the codebase are important.",
          "options": [],
          "analysisPoints": [
            "Ability to articulate the core differences between direct DOM manipulation and framework-based approaches.",
            "Comprehensive understanding of advantages and disadvantages for both.",
            "Sound judgment on when to apply each technology.",
            "Knowledge of underlying mechanisms (e.g., Virtual DOM)."
          ],
          "keyConcepts": [
            "Vanilla JavaScript",
            "DOM Manipulation",
            "React",
            "Vue.js",
            "Frontend Frameworks",
            "Declarative vs. Imperative",
            "Component-Based Architecture",
            "Virtual DOM",
            "Performance",
            "Developer Experience"
          ],
          "evaluationCriteria": [
            "Balanced and detailed comparison of both approaches.",
            "Provides clear use-cases for each choice.",
            "Demonstrates understanding of framework benefits (e.g., Virtual DOM).",
            "Articulates trade-offs effectively."
          ],
          "example": "N/A",
          "tags": [
            "JavaScript",
            "React",
            "DOM",
            "Architecture",
            "Frameworks",
            "Comparison",
            "Open-Ended"
          ],
          "prerequisites": [
            "javascript_basics",
            "dom_api",
            "react_basics"
          ],
          "complexity": 9,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_implement_formgroup",
          "title": "Implement the FormGroup Component for DynamicForm",
          "description": "\nImplement the `FormGroup` React component which is used by the `DynamicForm`. This component should:\n\n1.  Receive `group` (an object containing `id`, `title`, and `fields` array), `values` (current form values), and `onChange` (a callback) as props.\n2.  Render a `<fieldset>` element with a `<legend>` displaying the `group.title`.\n3.  Iterate over `group.fields` and render an appropriate input for each field.\n4.  Each field should be a controlled component: its `value` prop should come from `values[field.id]`, and its `onChange` event should call the `onChange` prop received from `DynamicForm`, passing `field.id` and `e.target.value`.\n5.  Support at least `text`, `number`, and `checkbox` input types. For `checkbox`, ensure `checked` attribute is used instead of `value` and handle its boolean state correctly.\n6.  Include a `label` for each input, linked via `htmlFor`.\n7.  Handle cases where `field.type` might be missing (default to 'text').\n",
          "difficulty": "medium",
          "startingCode": "import React from 'react';\n\nconst FormGroup = ({ group, values, onChange }) => {\n  return (\n    <fieldset>\n      <legend>{group.title}</legend>\n      {/* TODO: Iterate over group.fields and render inputs */}\n      {/* Example for a text input: */}\n      {/* <div>\n            <label htmlFor=\"fieldName\">Field Label:</label>\n            <input\n              id=\"fieldName\"\n              type=\"text\"\n              value={values[\"fieldName\"] || ''}\n              onChange={(e) => onChange(\"fieldName\", e.target.value)}\n            />\n          </div> */}\n    </fieldset>\n  );\n};\n\nexport default FormGroup;\n\n// Example formSchema structure:\n// const formSchema = {\n//   title: 'User Profile',\n//   groups: [\n//     {\n//       id: 'personal',\n//       title: 'Personal Information',\n//       fields: [\n//         { id: 'firstName', label: 'First Name', type: 'text' },\n//         { id: 'age', label: 'Age', type: 'number' },\n//         { id: 'newsletter', label: 'Subscribe to Newsletter', type: 'checkbox' }\n//       ]\n//     }\n//   ]\n// };\n",
          "solutionCode": "import React from 'react';\n\nconst FormGroup = ({ group, values, onChange }) => {\n  return (\n    <fieldset>\n      <legend>{group.title}</legend>\n      {group.fields.map(field => (\n        <div key={field.id} className=\"form-field\">\n          <label htmlFor={field.id}>{field.label}:</label>\n          {field.type === 'checkbox' ? (\n            <input\n              id={field.id}\n              type=\"checkbox\"\n              checked={!!values[field.id]} // Ensure boolean value\n              onChange={(e) => onChange(field.id, e.target.checked)} // Use e.target.checked for checkboxes\n            />\n          ) : (\n            <input\n              id={field.id}\n              type={field.type || 'text'}\n              value={values[field.id] || ''}\n              onChange={(e) => onChange(field.id, e.target.value)}\n            />\n          )}\n        </div>\n      ))}\n    </fieldset>\n  );\n};\n\nexport default FormGroup;\n",
          "testCases": [
            "Should render a fieldset with correct legend.",
            "Should render a text input with correct label, value, and onChange handler.",
            "Should render a number input with correct label, value, and onChange handler.",
            "Should render a checkbox input with correct label, checked state, and onChange handler (using `e.target.checked`).",
            "Should handle missing `field.type` by defaulting to 'text'.",
            "Should correctly pass `field.id` and value/checked to the `onChange` callback."
          ],
          "hints": [
            "Use conditional rendering for different input types (e.g., `field.type === 'checkbox' ? ... : ...`).",
            "Remember that for checkboxes, you typically use the `checked` attribute and `e.target.checked` for the value.",
            "Ensure `key` prop is used when mapping over `group.fields`."
          ],
          "tags": [
            "React",
            "Components",
            "Forms",
            "Controlled Components",
            "JSX"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "react_functional_components",
            "react_props",
            "controlled_components"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "theory_react_dynamic_form"
          ]
        },
        {
          "id": "task_dynamic_form_validation",
          "title": "Enhance DynamicForm with Client-Side Validation",
          "description": "\nEnhance the `DynamicForm` component to include client-side validation based on the `formSchema`. Each field in the schema can now have an optional `validation` object with rules.\n\n**Requirements:**\n1.  **Schema Extension**: Modify `formSchema` to include a `validation` object for each field, e.g.:\n    ```javascript\n    // Example field schema with validation\n    { \n      id: 'email', \n      label: 'Email', \n      type: 'text', \n      validation: { \n        required: true, \n        pattern: /^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/, \n        minLength: 5 \n      }\n    }\n    ```\n2.  **Validation Logic**: Implement a `validateForm` function in `DynamicForm` that iterates through all fields based on the `formSchema` and applies validation rules.\n3.  **State for Errors**: Manage validation errors in the `DynamicForm`'s state (e.g., `formErrors`). `formErrors` should be an object mapping `fieldId` to an error message string (or `null` if valid).\n4.  **Display Errors**: Pass error messages down to `FormGroup` (and subsequently to individual inputs) so they can be displayed next to their respective fields.\n5.  **Submission Control**: Prevent form submission if there are any validation errors.\n6.  **Real-time Validation**: Implement validation on blur for individual fields, and validate all fields on form submission.\n\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState } from 'react';\n// Assume FormGroup is implemented correctly and accepts 'error' prop\n// import FormGroup from './FormGroup';\n\nconst FormGroup = ({ group, values, onChange, errors }) => {\n  // Placeholder for task; assume it renders error below input\n  return (\n    <fieldset>\n      <legend>{group.title}</legend>\n      {group.fields.map(field => (\n        <div key={field.id}>\n          <label htmlFor={field.id}>{field.label}:</label>\n          <input\n            id={field.id}\n            type={field.type || 'text'}\n            value={values[field.id] || ''}\n            onChange={(e) => onChange(field.id, e.target.value)}\n            // TODO: Add onBlur event for real-time validation\n          />\n          {errors[field.id] && <span className=\"error-message\">{errors[field.id]}</span>}\n        </div>\n      ))}\n    </fieldset>\n  );\n};\n\nconst DynamicForm = ({ formSchema, onSubmit }) => {\n  const [formValues, setFormValues] = useState({});\n  const [formErrors, setFormErrors] = useState({}); // TODO: Manage validation errors here\n\n  const handleFieldChange = (fieldId, value) => {\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [fieldId]: value,\n    }));\n    // TODO: Trigger real-time validation here (e.g., onBlur, or debounced onChange)\n  };\n\n  const validateField = (field, value) => {\n    // TODO: Implement field-specific validation based on field.validation\n    // Return an error message string or null if valid\n    return null;\n  };\n\n  const validateForm = () => {\n    let newErrors = {};\n    let isValid = true;\n\n    formSchema.groups.forEach(group => {\n      group.fields.forEach(field => {\n        const value = formValues[field.id];\n        const error = validateField(field, value); // Call the field validation logic\n        if (error) {\n          newErrors[field.id] = error;\n          isValid = false;\n        }\n      });\n    });\n    setFormErrors(newErrors);\n    return isValid;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const isValid = validateForm();\n    if (isValid) {\n      console.log('Form submitted with values:', formValues);\n      onSubmit(formValues);\n    } else {\n      console.log('Form has validation errors:', formErrors);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      <h2>{formSchema.title}</h2>\n      {formSchema.description && (\n        <p className=\"form-description\">{formSchema.description}</p>\n      )}\n      \n      {formSchema.groups.map(group => (\n        <FormGroup\n          key={group.id}\n          group={group}\n          values={formValues}\n          onChange={handleFieldChange}\n          errors={formErrors} // Pass errors down\n        />\n      ))}\n      \n      <div className=\"form-actions\">\n        <button type=\"submit\" className=\"submit-button\">\n          {formSchema.submitText || 'Submit'}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n",
          "solutionCode": "import React, { useState, useCallback } from 'react';\n\nconst FormGroup = ({ group, values, onChange, onBlur, errors }) => {\n  return (\n    <fieldset>\n      <legend>{group.title}</legend>\n      {group.fields.map(field => (\n        <div key={field.id} className=\"form-field\">\n          <label htmlFor={field.id}>{field.label}:</label>\n          {field.type === 'checkbox' ? (\n            <input\n              id={field.id}\n              type=\"checkbox\"\n              checked={!!values[field.id]}\n              onChange={(e) => onChange(field.id, e.target.checked)}\n              onBlur={() => onBlur(field.id, values[field.id], field.validation)}\n            />\n          ) : (\n            <input\n              id={field.id}\n              type={field.type || 'text'}\n              value={values[field.id] || ''}\n              onChange={(e) => onChange(field.id, e.target.value)}\n              onBlur={() => onBlur(field.id, values[field.id], field.validation)}\n            />\n          )}\n          {errors[field.id] && <span className=\"error-message\" style={{ color: 'red', fontSize: '0.8em' }}>{errors[field.id]}</span>}\n        </div>\n      ))}\n    </fieldset>\n  );\n};\n\nconst DynamicForm = ({ formSchema, onSubmit }) => {\n  const [formValues, setFormValues] = useState({});\n  const [formErrors, setFormErrors] = useState({});\n\n  // Helper function to find a field by its ID in the schema\n  const findFieldInSchema = useCallback((fieldId) => {\n    for (const group of formSchema.groups) {\n      const field = group.fields.find(f => f.id === fieldId);\n      if (field) return field;\n    }\n    return null;\n  }, [formSchema]);\n\n  const validateField = useCallback((fieldId, value, validationRules) => {\n    if (!validationRules) return null; // No validation rules defined\n    \n    if (validationRules.required && (value === null || value === '' || (typeof value === 'boolean' && !value))) {\n      return `${findFieldInSchema(fieldId)?.label || fieldId} is required.`;\n    }\n    if (validationRules.minLength && typeof value === 'string' && value.length < validationRules.minLength) {\n      return `${findFieldInSchema(fieldId)?.label || fieldId} must be at least ${validationRules.minLength} characters.`;\n    }\n    if (validationRules.pattern && typeof value === 'string' && !validationRules.pattern.test(value)) {\n      return `Invalid ${findFieldInSchema(fieldId)?.label || fieldId} format.`;\n    }\n    // Add more validation rules as needed (e.g., maxLength, min, max, custom functions)\n    return null; // Valid\n  }, [findFieldInSchema]);\n\n  const handleFieldChange = (fieldId, value) => {\n    setFormValues(prevValues => ({\n      ...prevValues,\n      [fieldId]: value,\n    }));\n    // Clear error for this field immediately on change, then re-validate on blur\n    setFormErrors(prevErrors => ({ ...prevErrors, [fieldId]: null }));\n  };\n\n  const handleFieldBlur = (fieldId, value, validationRules) => {\n    const error = validateField(fieldId, value, validationRules);\n    setFormErrors(prevErrors => ({ ...prevErrors, [fieldId]: error }));\n  };\n\n  const validateForm = () => {\n    let newErrors = {};\n    let isValid = true;\n\n    formSchema.groups.forEach(group => {\n      group.fields.forEach(field => {\n        const value = formValues[field.id];\n        const error = validateField(field.id, value, field.validation);\n        if (error) {\n          newErrors[field.id] = error;\n          isValid = false;\n        }\n      });\n    });\n    setFormErrors(newErrors);\n    return isValid;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const isValid = validateForm();\n    if (isValid) {\n      console.log('Form submitted with values:', formValues);\n      onSubmit(formValues);\n    } else {\n      console.log('Form has validation errors:', formErrors);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className=\"dynamic-form\">\n      <h2>{formSchema.title}</h2>\n      {formSchema.description && (\n        <p className=\"form-description\">{formSchema.description}</p>\n      )}\n      \n      {formSchema.groups.map(group => (\n        <FormGroup\n          key={group.id}\n          group={group}\n          values={formValues}\n          onChange={handleFieldChange}\n          onBlur={handleFieldBlur} // Pass onBlur handler\n          errors={formErrors}\n        />\n      ))}\n      \n      <div className=\"form-actions\">\n        <button type=\"submit\" className=\"submit-button\">\n          {formSchema.submitText || 'Submit'}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default DynamicForm;\n",
          "testCases": [
            "Form submission should be prevented if a required field is empty.",
            "Form submission should be prevented if a field does not match its `pattern`.",
            "Form submission should be prevented if a text field is shorter than `minLength`.",
            "Error messages should appear next to invalid fields on form submission.",
            "Error message for a field should disappear when it becomes valid after user input.",
            "Error messages should appear for individual fields on blur if invalid.",
            "Checkbox required validation: Should show error if unchecked and required, clear if checked.",
            "Form should submit successfully if all fields are valid."
          ],
          "hints": [
            "Create a helper function `validateField(fieldId, value, rules)` that returns an error string or null.",
            "Use `onBlur` event on input fields to trigger individual field validation.",
            "The `validateForm` function should be called on `handleSubmit` to check all fields.",
            "The `formErrors` state should be an object where keys are field IDs and values are error messages.",
            "For checkboxes, remember `e.target.checked` and that `required` validation means `true` for a checked box."
          ],
          "tags": [
            "React",
            "Forms",
            "Validation",
            "State Management",
            "Error Handling"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "theory_react_dynamic_form",
            "controlled_components",
            "javascript_regex"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_react_dynamic_form"
          ]
        },
        {
          "id": "task_spreadsheet_complete_crud",
          "title": "Complete Spreadsheet CRUD Functionality",
          "description": "\nComplete the `Spreadsheet` class by implementing the remaining CRUD (Create, Read, Update, Delete) functionalities, specifically focusing on dynamic row/column manipulation.\n\n**Requirements:**\n1.  **`addRow()` Method**: Implement a method that adds a new row at the bottom of the spreadsheet. It should update `this.rows`, add a new array to `this.data` filled with empty strings, and re-render the spreadsheet.\n2.  **`removeRow(rowIndex)` Method**: Implement a method that removes a specific row by its `rowIndex` (0-indexed). It should update `this.rows`, remove the corresponding row from `this.data`, and re-render.\n3.  **`removeColumn(colIndex)` Method**: Implement a method that removes a specific column by its `colIndex` (0-indexed). It should update `this.cols`, remove the corresponding column from each row in `this.data`, and re-render.\n4.  **UI for Remove Operations**: Add buttons or other UI elements (e.g., beside row numbers and column letters) to trigger `removeRow` and `removeColumn`.\n5.  **Robustness**: Handle edge cases like attempting to remove the last row/column or an invalid index gracefully (e.g., prevent removal, or show an alert).\n\n",
          "difficulty": "medium",
          "startingCode": "class Spreadsheet {\n  constructor(rows = 5, cols = 5) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(rows).fill().map(() => Array(cols).fill(''));\n    this.container = null; \n  }\n  \n  render(containerElement) {\n    this.container = containerElement;\n    this.container.innerHTML = '';\n\n    const table = document.createElement('table');\n    table.className = 'spreadsheet';\n    \n    // Header creation (as provided in theory/example)\n    const thead = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n    headerRow.appendChild(document.createElement('th')); // Empty corner for row numbers\n    \n    for (let col = 0; col < this.cols; col++) {\n      const th = document.createElement('th');\n      th.textContent = String.fromCharCode(65 + col);\n      // TODO: Add remove column button here or similar UI\n      const removeColButton = document.createElement('button');\n      removeColButton.textContent = 'x';\n      removeColButton.className = 'remove-col-button';\n      removeColButton.addEventListener('click', () => this.removeColumn(col));\n      th.appendChild(removeColButton);\n      headerRow.appendChild(th);\n    }\n    const addColHeader = document.createElement('th');\n    const addColButton = document.createElement('button');\n    addColButton.textContent = '+';\n    addColButton.addEventListener('click', () => this.addColumn());\n    addColHeader.appendChild(addColButton);\n    headerRow.appendChild(addColHeader);\n    thead.appendChild(headerRow);\n    table.appendChild(thead);\n    \n    // Body creation (as provided in theory/example)\n    const tbody = document.createElement('tbody');\n    for (let row = 0; row < this.rows; row++) {\n      const tr = document.createElement('tr');\n      const rowHeader = document.createElement('th');\n      rowHeader.textContent = row + 1;\n      // TODO: Add remove row button here or similar UI\n      const removeRowButton = document.createElement('button');\n      removeRowButton.textContent = 'x';\n      removeRowButton.className = 'remove-row-button';\n      removeRowButton.addEventListener('click', () => this.removeRow(row));\n      rowHeader.appendChild(removeRowButton);\n      tr.appendChild(rowHeader);\n      \n      for (let col = 0; col < this.cols; col++) {\n        const td = document.createElement('td');\n        const input = document.createElement('input');\n        input.value = this.data[row][col];\n        input.dataset.row = row;\n        input.dataset.col = col;\n        input.addEventListener('change', (e) => {\n          this.data[parseInt(e.target.dataset.row)][parseInt(e.target.dataset.col)] = e.target.value;\n        });\n        td.appendChild(input);\n        tr.appendChild(td);\n      }\n      tbody.appendChild(tr);\n    }\n\n    // Add row button at the bottom\n    const addRowTR = document.createElement('tr');\n    const addRowTH = document.createElement('th');\n    const addRowButton = document.createElement('button');\n    addRowButton.textContent = '+';\n    addRowButton.addEventListener('click', () => this.addRow());\n    addRowTH.appendChild(addRowButton);\n    addRowTR.appendChild(addRowTH);\n    const emptyTd = document.createElement('td');\n    emptyTd.colSpan = this.cols + 1;\n    addRowTR.appendChild(emptyTd);\n    tbody.appendChild(addRowTR);\n\n    table.appendChild(tbody);\n    this.container.appendChild(table);\n  }\n\n  addColumn() {\n    if (this.cols >= 26) { // Limit columns to A-Z for simplicity\n      alert('Cannot add more columns (max Z reached)');\n      return;\n    }\n    this.cols++;\n    for(let i = 0; i < this.rows; i++) {\n      this.data[i].push('');\n    }\n    this.render(this.container);\n  }\n\n  addRow() {\n    // TODO: Implement addRow logic\n    if (this.rows >= 100) { // Arbitrary limit\n      alert('Cannot add more rows (max 100 reached)');\n      return;\n    }\n    this.rows++;\n    this.data.push(Array(this.cols).fill(''));\n    this.render(this.container);\n  }\n\n  removeRow(rowIndex) {\n    // TODO: Implement removeRow logic\n    if (this.rows <= 1) {\n      alert('Cannot remove the last row.');\n      return;\n    }\n    if (rowIndex < 0 || rowIndex >= this.rows) {\n      alert('Invalid row index.');\n      return;\n    }\n    this.data.splice(rowIndex, 1);\n    this.rows--;\n    this.render(this.container);\n  }\n\n  removeColumn(colIndex) {\n    // TODO: Implement removeColumn logic\n    if (this.cols <= 1) {\n      alert('Cannot remove the last column.');\n      return;\n    }\n    if (colIndex < 0 || colIndex >= this.cols) {\n      alert('Invalid column index.');\n      return;\n    }\n    for (let i = 0; i < this.rows; i++) {\n      this.data[i].splice(colIndex, 1);\n    }\n    this.cols--;\n    this.render(this.container);\n  }\n}\n\n// To run this: \n// <div id=\"spreadsheet-container\"></div>\n// document.addEventListener('DOMContentLoaded', () => {\n//   const spreadsheet = new Spreadsheet(3, 3);\n//   const container = document.getElementById('spreadsheet-container');\n//   if (container) {\n//     spreadsheet.render(container);\n//   }\n// });",
          "solutionCode": "class Spreadsheet {\n  constructor(rows = 5, cols = 5) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(rows).fill().map(() => Array(cols).fill(''));\n    this.container = null; \n  }\n  \n  render(containerElement) {\n    this.container = containerElement;\n    this.container.innerHTML = '';\n\n    const table = document.createElement('table');\n    table.className = 'spreadsheet';\n    \n    // Header creation \n    const thead = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n    const cornerTh = document.createElement('th');\n    cornerTh.className = 'corner-th';\n    headerRow.appendChild(cornerTh); // Empty corner for row numbers\n    \n    for (let col = 0; col < this.cols; col++) {\n      const th = document.createElement('th');\n      th.className = 'column-header';\n      th.textContent = String.fromCharCode(65 + col);\n      \n      const removeColButton = document.createElement('button');\n      removeColButton.textContent = 'x';\n      removeColButton.className = 'remove-col-button';\n      removeColButton.title = `Remove Column ${String.fromCharCode(65 + col)}`;\n      removeColButton.addEventListener('click', (e) => {\n        e.stopPropagation(); // Prevent potential parent click events\n        this.removeColumn(col);\n      });\n      th.appendChild(removeColButton);\n      headerRow.appendChild(th);\n    }\n    const addColHeader = document.createElement('th');\n    const addColButton = document.createElement('button');\n    addColButton.textContent = '+';\n    addColButton.className = 'add-col-button';\n    addColButton.title = 'Add New Column';\n    addColButton.addEventListener('click', () => this.addColumn());\n    addColHeader.appendChild(addColButton);\n    headerRow.appendChild(addColHeader);\n    thead.appendChild(headerRow);\n    table.appendChild(thead);\n    \n    // Body creation\n    const tbody = document.createElement('tbody');\n    for (let row = 0; row < this.rows; row++) {\n      const tr = document.createElement('tr');\n      const rowHeader = document.createElement('th');\n      rowHeader.className = 'row-header';\n      rowHeader.textContent = row + 1;\n      \n      const removeRowButton = document.createElement('button');\n      removeRowButton.textContent = 'x';\n      removeRowButton.className = 'remove-row-button';\n      removeRowButton.title = `Remove Row ${row + 1}`;\n      removeRowButton.addEventListener('click', (e) => {\n        e.stopPropagation();\n        this.removeRow(row);\n      });\n      rowHeader.appendChild(removeRowButton);\n      tr.appendChild(rowHeader);\n      \n      for (let col = 0; col < this.cols; col++) {\n        const td = document.createElement('td');\n        const input = document.createElement('input');\n        input.value = this.data[row][col];\n        input.dataset.row = row;\n        input.dataset.col = col;\n        input.addEventListener('change', (e) => {\n          this.data[parseInt(e.target.dataset.row)][parseInt(e.target.dataset.col)] = e.target.value;\n        });\n        td.appendChild(input);\n        tr.appendChild(td);\n      }\n      tbody.appendChild(tr);\n    }\n\n    // Add row button at the bottom of the row headers\n    const addRowTR = document.createElement('tr');\n    const addRowTH = document.createElement('th');\n    addRowTH.className = 'add-row-th';\n    const addRowButton = document.createElement('button');\n    addRowButton.textContent = '+';\n    addRowButton.className = 'add-row-button';\n    addRowButton.title = 'Add New Row';\n    addRowButton.addEventListener('click', () => this.addRow());\n    addRowTH.appendChild(addRowButton);\n    addRowTR.appendChild(addRowTH);\n    // Fill the rest of the row with empty cells or colspan\n    const emptyTd = document.createElement('td');\n    emptyTd.colSpan = this.cols; // Only for data cells, not including the new column add button cell\n    addRowTR.appendChild(emptyTd);\n    tbody.appendChild(addRowTR);\n\n    table.appendChild(tbody);\n    this.container.appendChild(table);\n  }\n\n  addColumn() {\n    if (this.cols >= 26) { // Practical limit for single letter columns A-Z\n      alert('Cannot add more columns (max Z reached for simple naming).');\n      return;\n    }\n    this.cols++;\n    for(let i = 0; i < this.rows; i++) {\n      this.data[i].push('');\n    }\n    this.render(this.container);\n  }\n\n  addRow() {\n    if (this.rows >= 100) { // Arbitrary limit to prevent excessive rows\n      alert('Cannot add more rows (maximum 100 rows).');\n      return;\n    }\n    this.rows++;\n    this.data.push(Array(this.cols).fill(''));\n    this.render(this.container);\n  }\n\n  removeRow(rowIndex) {\n    if (this.rows <= 1) {\n      alert('Cannot remove the last row.');\n      return;\n    }\n    if (rowIndex < 0 || rowIndex >= this.rows) {\n      alert('Invalid row index.');\n      return;\n    }\n    if (confirm(`Are you sure you want to remove row ${rowIndex + 1}?`)) {\n      this.data.splice(rowIndex, 1);\n      this.rows--;\n      this.render(this.container);\n    }\n  }\n\n  removeColumn(colIndex) {\n    if (this.cols <= 1) {\n      alert('Cannot remove the last column.');\n      return;\n    }\n    if (colIndex < 0 || colIndex >= this.cols) {\n      alert('Invalid column index.');\n      return;\n    }\n    if (confirm(`Are you sure you want to remove column ${String.fromCharCode(65 + colIndex)}?`)) {\n      for (let i = 0; i < this.rows; i++) {\n        this.data[i].splice(colIndex, 1);\n      }\n      this.cols--;\n      this.render(this.container);\n    }\n  }\n}\n\n// Add some basic CSS for better visualization\n// const style = document.createElement('style');\n// style.textContent = `\n//   .spreadsheet { border-collapse: collapse; font-family: sans-serif; }\n//   .spreadsheet th, .spreadsheet td { border: 1px solid #ccc; padding: 5px; text-align: center; }\n//   .spreadsheet th { background-color: #f0f0f0; position: relative; }\n//   .spreadsheet td { min-width: 50px; }\n//   .spreadsheet input { width: 100%; box-sizing: border-box; border: none; padding: 3px; text-align: center; }\n//   .remove-row-button, .remove-col-button { \n//     position: absolute; right: 2px; top: 2px; \n//     background: red; color: white; border: none; border-radius: 50%; width: 18px; height: 18px; \n//     font-size: 0.7em; cursor: pointer; display: none;\n//   }\n//   .row-header:hover .remove-row-button, .column-header:hover .remove-col-button { display: block; }\n//   .add-row-button, .add-col-button { \n//     background: green; color: white; border: none; border-radius: 50%; width: 22px; height: 22px; \n//     font-size: 1em; cursor: pointer; margin: 2px;\n//   }\n// `;\n// document.head.appendChild(style);",
          "testCases": [
            "Calling `addRow()` should increase `this.rows` and add an empty row to `this.data` and re-render.",
            "Calling `removeRow(0)` on a 3x3 spreadsheet should result in a 2x3 spreadsheet, with the correct data shifted up.",
            "Calling `removeColumn(0)` on a 3x3 spreadsheet should result in a 3x2 spreadsheet, with the correct data shifted left.",
            "Attempting to remove the last remaining row should display an alert and not remove the row.",
            "Attempting to remove the last remaining column should display an alert and not remove the column.",
            "Clicking the '+' button in the header should add a column.",
            "Clicking the '+' button in the row header area should add a row.",
            "Clicking 'x' on a row header should remove that row (with confirmation).",
            "Clicking 'x' on a column header should remove that column (with confirmation)."
          ],
          "hints": [
            "For `removeRow`, `Array.prototype.splice()` is useful for modifying the `this.data` array.",
            "For `removeColumn`, you'll need to iterate over each row and use `splice()` on the inner array.",
            "Remember to update `this.rows` and `this.cols` after additions/removals.",
            "Always call `this.render(this.container)` after structural changes to update the DOM.",
            "Consider adding `confirm()` dialogs for delete operations to prevent accidental deletion."
          ],
          "tags": [
            "JavaScript",
            "DOM Manipulation",
            "Arrays",
            "CRUD",
            "Classes"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_javascript_spreadsheet",
            "javascript_array_methods",
            "dom_events"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "theory_javascript_spreadsheet"
          ]
        },
        {
          "id": "task_spreadsheet_formula_evaluation",
          "title": "Implement Basic Spreadsheet Formula Evaluation",
          "description": "\nExtend the `Spreadsheet` class to support basic arithmetic formula evaluation.\n\n**Requirements:**\n1.  **Formula Recognition**: Any cell input starting with an `=` sign should be treated as a formula.\n2.  **Cell Reference Parsing**: Parse cell references like `A1`, `B2`, `C3` within the formula. Convert them to their numerical `[row, col]` indices.\n3.  **Basic Arithmetic**: Support `+`, `-`, `*`, `/` operators. You can assume standard order of operations for a simple implementation or explicitly enforce left-to-right.\n4.  **Evaluation**: Replace cell references with their current numeric values and evaluate the expression. Display the *result* in the cell, but store the *formula string* in `this.data`.\n5.  **Re-calculation**: When a cell's value changes, any other cell containing a formula that *depends* on the changed cell must be automatically re-calculated and updated. This requires identifying dependencies.\n6.  **Error Handling**: Display `#REF!` for invalid cell references (e.g., `A999` if it's out of bounds) and `#ERROR!` for other calculation errors (e.g., division by zero, non-numeric operands).\n\n**Note**: For simplicity, you can initially use `eval()` for expression evaluation (though be aware of its security implications in real-world scenarios). A more robust solution would involve a custom parser/evaluator.\n",
          "difficulty": "hard",
          "startingCode": "class Spreadsheet {\n  constructor(rows = 5, cols = 5) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(rows).fill().map(() => Array(cols).fill(''));\n    this.container = null;\n    this.formulas = {}; // Stores formulas: { '0_0': '=A1+B1', ... }\n    this.dependencies = {}; // Stores dependencies: { '0_0': ['0_1', '0_2'], ... }\n    // 0_0 means cell at [0,0]\n  }\n  \n  render(containerElement) {\n    this.container = containerElement;\n    this.container.innerHTML = '';\n    const table = document.createElement('table');\n    table.className = 'spreadsheet';\n    \n    const thead = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n    headerRow.appendChild(document.createElement('th'));\n    for (let col = 0; col < this.cols; col++) {\n      const th = document.createElement('th');\n      th.textContent = String.fromCharCode(65 + col);\n      headerRow.appendChild(th);\n    }\n    thead.appendChild(headerRow);\n    table.appendChild(thead);\n    \n    const tbody = document.createElement('tbody');\n    for (let row = 0; row < this.rows; row++) {\n      const tr = document.createElement('tr');\n      const rowHeader = document.createElement('th');\n      rowHeader.textContent = row + 1;\n      tr.appendChild(rowHeader);\n      \n      for (let col = 0; col < this.cols; col++) {\n        const td = document.createElement('td');\n        const input = document.createElement('input');\n        const cellId = `${row}_${col}`;\n\n        // Display formula result or raw value\n        input.value = this.formulas[cellId] ? this.evaluateCell(row, col) : this.data[row][col];\n        \n        input.dataset.row = row;\n        input.dataset.col = col;\n        \n        input.addEventListener('change', (e) => {\n          const r = parseInt(e.target.dataset.row);\n          const c = parseInt(e.target.dataset.col);\n          const val = e.target.value;\n\n          if (val.startsWith('=')) {\n            this.formulas[cellId] = val;\n            this.data[r][c] = val; // Store formula in data as well\n          } else {\n            delete this.formulas[cellId];\n            this.data[r][c] = val; // Store raw value\n          }\n          this.recalculateAll(); // A simple approach, optimize later\n        });\n        \n        // Show formula when focused, result when blurred\n        input.addEventListener('focus', (e) => {\n            e.target.value = this.formulas[cellId] || this.data[row][col];\n        });\n        input.addEventListener('blur', (e) => {\n            e.target.value = this.formulas[cellId] ? this.evaluateCell(row, col) : this.data[row][col];\n        });\n\n        td.appendChild(input);\n        tr.appendChild(td);\n      }\n      tbody.appendChild(tr);\n    }\n    table.appendChild(tbody);\n    this.container.appendChild(table);\n  }\n\n  // Helper to convert 'A1' to [0,0]\n  getCellCoords(cellRef) {\n    const colStr = cellRef.match(/[A-Z]+/)[0];\n    const rowStr = cellRef.match(/\\d+/)[0];\n    const col = colStr.charCodeAt(0) - 65;\n    const row = parseInt(rowStr) - 1;\n    if (row < 0 || row >= this.rows || col < 0 || col >= this.cols) {\n      return null; // Invalid reference\n    }\n    return [row, col];\n  }\n\n  // Recursive function to get a cell's value (evaluating if it's a formula)\n  getCellValue(row, col, visited = new Set()) {\n    const cellId = `${row}_${col}`;\n    if (visited.has(cellId)) {\n        // Circular dependency detected\n        return '#CIRCULAR!'; // Or throw an error\n    }\n    visited.add(cellId);\n\n    if (this.formulas[cellId]) {\n        return this.evaluateFormulaExpression(this.formulas[cellId], visited);\n    } else {\n        const value = this.data[row][col];\n        return !isNaN(parseFloat(value)) && isFinite(value) ? parseFloat(value) : value;\n    }\n  }\n\n  evaluateFormulaExpression(formulaString, visited) {\n    let expression = formulaString.substring(1); // Remove '=' prefix\n    const cellRefs = expression.match(/[A-Z]+\\d+/g) || [];\n    let evaluatedExpression = expression;\n\n    cellRefs.forEach(cellRef => {\n      const coords = this.getCellCoords(cellRef);\n      if (!coords) {\n        evaluatedExpression = '#REF!'; // Invalid cell reference\n        return; \n      }\n      const [r, c] = coords;\n      const cellValue = this.getCellValue(r, c, new Set(visited)); // Pass a new set for recursive call\n      if (typeof cellValue === 'string' && cellValue.startsWith('#')) {\n        evaluatedExpression = cellValue; // Propagate errors\n        return;\n      }\n      evaluatedExpression = evaluatedExpression.replace(new RegExp(cellRef, 'g'), `(${cellValue})`);\n    });\n    \n    if (evaluatedExpression.startsWith('#')) return evaluatedExpression; // Propagate #REF! or #CIRCULAR!\n\n    try {\n      const result = eval(evaluatedExpression); // DANGER: For interview only. Use proper parser normally.\n      return isFinite(result) ? result : '#ERROR!'; // Handle NaN, Infinity\n    } catch (e) {\n      return '#ERROR!';\n    }\n  }\n\n  evaluateCell(row, col) {\n    const cellId = `${row}_${col}`;\n    if (this.formulas[cellId]) {\n        return this.evaluateFormulaExpression(this.formulas[cellId], new Set());\n    } else {\n        return this.data[row][col];\n    }\n  }\n\n  recalculateAll() {\n    // A simple, inefficient recalculation. Re-render will cause all cells to re-evaluate.\n    this.render(this.container);\n  }\n\n  addColumn() { /* ... unchanged ... */ }\n  addRow() { /* ... unchanged ... */ }\n  removeRow(rowIndex) { /* ... unchanged ... */ }\n  removeColumn(colIndex) { /* ... unchanged ... */ }\n}\n\n// Usage example:\n// const spreadsheet = new Spreadsheet(5, 5);\n// document.addEventListener('DOMContentLoaded', () => {\n//   const container = document.getElementById('spreadsheet-container');\n//   if (container) {\n//     spreadsheet.render(container);\n//     // You can set initial formulas programmatically for testing:\n//     // spreadsheet.data[0][0] = '10';\n//     // spreadsheet.data[0][1] = '20';\n//     // spreadsheet.formulas['0_2'] = '=A1+B1'; // C1 = A1 + B1\n//     // spreadsheet.recalculateAll(); // Trigger initial eval\n//   }\n// });\n",
          "testCases": [
            "Entering `=10+20` in a cell should display `30`.",
            "Entering `=A1+B1` where A1=`5` and B1=`10` should display `15`.",
            "Changing A1 from `5` to `7` should automatically update a cell with `=A1+B1` to `17`.",
            "Entering `=A1/0` should display `#ERROR!` or similar.",
            "Entering `=Z999` (an out-of-bounds cell) should display `#REF!`.",
            "Entering `=A1+B1` then changing B1 to non-numeric `hello` should display `#ERROR!` or similar.",
            "Cells containing formulas should display the result, but show the formula when focused for editing.",
            "Basic circular reference (e.g., A1=`=B1`, B1=`=A1`) should be handled (e.g., `#CIRCULAR!`)."
          ],
          "hints": [
            "Store formulas in a separate structure (e.g., `this.formulas = { 'row_col': 'formula_string' }`) and actual values in `this.data`.",
            "The `getCellValue` function should be recursive: if a cell is a formula, it should call `evaluateFormulaExpression` for that cell.",
            "Use regular expressions to find cell references (`[A-Z]+\\d+`) in the formula string.",
            "When a cell changes, you'll need a mechanism to find and re-evaluate all cells that depend on it. A simple `recalculateAll()` (re-rendering everything) is a starting point, but a more advanced solution would track explicit dependencies.",
            "For circular references, pass a `visited` set to recursive calls to detect loops.",
            "Be mindful of parsing numbers for calculations: use `parseFloat()` and check `isNaN()`."
          ],
          "tags": [
            "JavaScript",
            "Algorithms",
            "Data Structures",
            "Formulas",
            "Evaluation",
            "Hard"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_javascript_spreadsheet",
            "javascript_classes",
            "javascript_regex",
            "recursion"
          ],
          "complexity": 9,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_javascript_spreadsheet"
          ]
        }
      ]
    }
  },
  {
    "id": "d1c2e95e-c011-4e02-acc9-df947baa837d",
    "startLine": 16600,
    "endLine": 16699,
    "processedDate": "2025-06-17T15:29:00.700Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_vanilla_js_spreadsheet",
          "title": "Interactive Spreadsheet with Vanilla JavaScript and DOM Manipulation",
          "content": "This section details the implementation of a basic interactive spreadsheet using vanilla JavaScript and direct DOM manipulation. It serves as a practical example for understanding how to create dynamic HTML structures, handle user input through events, and manage an application's state within a class-based architecture without external frameworks.\n\n## Core Concepts\n-   **DOM Manipulation**: The fundamental technique involves creating, appending, and removing HTML elements (tables, rows, cells, input fields, and buttons) dynamically using JavaScript APIs like `document.createElement()`, `appendChild()`, `removeChild()`, and manipulating `innerHTML`. This provides granular control over the webpage structure.\n-   **Event Handling**: User interactions, such as typing in a cell or clicking buttons, are captured using event listeners (`addEventListener`). The `input` event is particularly important for real-time updates of cell data as the user types, while `click` events trigger actions like adding or removing rows/columns.\n-   **Class-Based Structure**: The entire spreadsheet logic is encapsulated within a `Spreadsheet` class. This object-oriented approach promotes modularity, organizes related data (like `rows`, `cols`, `data` array) and behaviors (like `render`, `addRow`, `update`), and facilitates reusability.\n-   **Data Model (`this.data`)**: The spreadsheet's content is maintained in a 2D array, where `this.data[rowIndex][colIndex]` stores the value of a specific cell. This array acts as the single source of truth for the spreadsheet's state.\n-   **Dynamic Sizing**: Methods such as `addRow()`, `addColumn()`, `removeRow()`, and `removeColumn()` demonstrate how to dynamically modify the `this.data` array and update the spreadsheet's dimensions (`this.rows`, `this.cols`). These methods leverage array manipulation techniques like `push()` and `splice()`.\n-   **Re-rendering Strategy (`update()`)**: The `update()` method re-renders the entire HTML table whenever the underlying data model changes. It achieves this by clearing the contents of the `spreadsheet-container` element (`innerHTML = ''`) and then re-appending a newly generated table via `this.render()`. While simple to implement, this full re-render strategy can be inefficient for very large datasets due to the overhead of recreating the entire DOM structure.\n\n## Implementation Details\n\n### `Spreadsheet` Class Initialization\nThe constructor sets up the initial dimensions and populates the `data` array with empty strings.\n\n```javascript\nclass Spreadsheet {\n  constructor(rows, cols) {\n    this.rows = rows;\n    this.cols = cols;\n    // Initialize data as a 2D array filled with empty strings\n    this.data = Array(rows).fill(null).map(() => Array(cols).fill(''));\n  }\n  // ... other methods\n}\n```\n\n### `render()` Method for UI Generation\nThis method dynamically creates all the necessary HTML elements for the table, including headers, data cells (with input fields), and control buttons. It attaches event listeners to these elements to enable interactivity.\n\n```javascript\nrender() {\n  const table = document.createElement('table');\n  const thead = document.createElement('thead');\n  const tbody = document.createElement('tbody');\n\n  // Header row for column labels and 'add column' button\n  const headerTr = document.createElement('tr');\n  headerTr.innerHTML = '<th></th>'; // Empty corner cell for alignment\n\n  for (let c = 0; c < this.cols; c++) {\n    const th = document.createElement('th');\n    th.textContent = String.fromCharCode(65 + c); // Column A, B, C...\n    const removeColBtn = document.createElement('button');\n    removeColBtn.textContent = 'x';\n    removeColBtn.className = 'remove-btn'; // For styling\n    // Using an IIFE to capture the correct 'c' value for each listener\n    ((colIndex) => {\n        removeColBtn.addEventListener('click', () => this.removeColumn(colIndex));\n    })(c);\n    th.appendChild(removeColBtn);\n    headerTr.appendChild(th);\n  }\n\n  const addColTh = document.createElement('th');\n  const addColButton = document.createElement('button');\n  addColButton.textContent = '+';\n  addColButton.addEventListener('click', () => this.addColumn());\n  addColTh.appendChild(addColButton);\n  headerTr.appendChild(addColTh);\n  thead.appendChild(headerTr);\n  table.appendChild(thead);\n\n  // Data rows and row headers\n  for (let r = 0; r < this.rows; r++) {\n    const tr = document.createElement('tr');\n    const th = document.createElement('th');\n    th.textContent = (r + 1).toString(); // Row 1, 2, 3...\n    const removeRowBtn = document.createElement('button');\n    removeRowBtn.textContent = 'x';\n    removeRowBtn.className = 'remove-btn';\n    ((rowIndex) => {\n        removeRowBtn.addEventListener('click', () => this.removeRow(rowIndex));\n    })(r);\n    th.appendChild(removeRowBtn);\n    tr.appendChild(th);\n\n    for (let c = 0; c < this.cols; c++) {\n      const td = document.createElement('td');\n      const input = document.createElement('input');\n      input.type = 'text';\n      input.value = this.data[r][c];\n      input.dataset.row = r.toString(); // Store row index as data attribute\n      input.dataset.col = c.toString(); // Store column index as data attribute\n      input.addEventListener('input', (e) => {\n        // Update the internal data model when an input changes\n        this.data[parseInt(e.target.dataset.row)][parseInt(e.target.dataset.col)] = e.target.value;\n      });\n      td.appendChild(input);\n      tr.appendChild(td);\n    }\n    tbody.appendChild(tr);\n  }\n\n  // 'Add Row' button at the bottom of the table\n  const addRowTr = document.createElement('tr');\n  const addRowTh = document.createElement('th');\n  const addRowButton = document.createElement('button');\n  addRowButton.textContent = '+';\n  addRowButton.addEventListener('click', () => this.addRow());\n  addRowTh.appendChild(addRowButton);\n  addRowTr.appendChild(addRowTh); // This 'th' acts as the button container for the new row\n  // Append empty 'td' elements to fill the rest of the row, matching column count\n  for (let i = 0; i < this.cols; i++) {\n      addRowTr.appendChild(document.createElement('td'));\n  }\n  tbody.appendChild(addRowTr);\n  \n  table.appendChild(tbody);\n  return table;\n}\n```\n\n### Data Modification Methods\nThese methods directly manipulate the `this.data` array and update the `rows` or `cols` count, then trigger a UI refresh via `update()`.\n\n```javascript\naddRow() {\n  this.data.push(Array(this.cols).fill(''));\n  this.rows++;\n  this.update();\n}\n\naddColumn() {\n  for (let i = 0; i < this.rows; i++) {\n    this.data[i].push('');\n  }\n  this.cols++;\n  this.update();\n}\n\nremoveRow(rowIndex) {\n  if (rowIndex >= 0 && rowIndex < this.rows) {\n    this.data.splice(rowIndex, 1); // Remove 1 element at rowIndex\n    this.rows--;\n    this.update();\n  }\n}\n\nremoveColumn(colIndex) {\n  if (colIndex >= 0 && colIndex < this.cols) {\n    for (let i = 0; i < this.rows; i++) {\n      this.data[i].splice(colIndex, 1); // Remove 1 element at colIndex from each row\n    }\n    this.cols--;\n    this.update();\n  }\n}\n```\n\n### `update()` Method for View Synchronization\nThis method is critical for keeping the DOM in sync with the internal `this.data` model. It ensures that any changes to the spreadsheet's dimensions or data are reflected in the user interface.\n\n```javascript\nupdate() {\n  const spreadsheetContainer = document.getElementById('spreadsheet-container');\n  spreadsheetContainer.innerHTML = ''; // Clears all children\n  spreadsheetContainer.appendChild(this.render()); // Re-creates and appends the new table\n}\n```\n\n## Usage\nThe spreadsheet instance is created and appended to a designated container (`spreadsheet-container`) once the entire DOM content has been loaded, ensuring that the target element exists.\n\n```javascript\ndocument.addEventListener('DOMContentLoaded', () => {\n  const spreadsheet = new Spreadsheet(10, 8); // Example: 10 rows, 8 columns\n  const container = document.getElementById('spreadsheet-container');\n  container.appendChild(spreadsheet.render());\n});\n```",
          "examples": [
            {
              "id": "example_spreadsheet_constructor",
              "title": "Spreadsheet Class Initialization",
              "code": "class Spreadsheet {\n  constructor(rows, cols) {\n    this.rows = rows;\n    this.cols = cols;\n    // Initialize a 2D array with empty strings\n    this.data = Array(rows).fill(null).map(() => Array(cols).fill(''));\n    // Example: Populate some initial data for demonstration\n    this.data[0][0] = 'Product';\n    this.data[0][1] = 'Price';\n    this.data[1][0] = 'Laptop';\n    this.data[1][1] = '1200';\n  }\n  \n  // ... other methods\n}\n\nconst mySpreadsheet = new Spreadsheet(2, 2);\nconsole.log(mySpreadsheet.data);\n/* Output:\n[\n  ['Product', 'Price'],\n  ['Laptop', '1200']\n]\n*/",
              "explanation": "This example illustrates the `Spreadsheet` constructor, showing how `rows`, `cols`, and the `data` 2D array are initialized. It also includes a basic setup to pre-fill a couple of cells, demonstrating how the internal data model holds the spreadsheet's content.",
              "language": "javascript"
            },
            {
              "id": "example_spreadsheet_add_remove_row_col",
              "title": "Adding and Removing Rows/Columns Logic",
              "code": "class Spreadsheet {\n  constructor(rows, cols) {\n    this.rows = rows;\n    this.cols = cols;\n    this.data = Array(rows).fill(null).map(() => Array(cols).fill(''));\n  }\n\n  addRow() {\n    this.data.push(Array(this.cols).fill(''));\n    this.rows++;\n    this.update(); // Assumes update method exists for UI refresh\n  }\n\n  removeRow(rowIndex) {\n    if (rowIndex >= 0 && rowIndex < this.rows) {\n      this.data.splice(rowIndex, 1);\n      this.rows--;\n      this.update();\n    }\n  }\n\n  addColumn() {\n    for (let i = 0; i < this.rows; i++) {\n      this.data[i].push('');\n    }\n    this.cols++;\n    this.update();\n  }\n\n  removeColumn(colIndex) {\n    if (colIndex >= 0 && colIndex < this.cols) {\n      for (let i = 0; i < this.rows; i++) {\n        this.data[i].splice(colIndex, 1);\n      }\n      this.cols--;\n      this.update();\n    }\n  }\n\n  update() {\n    // In a real application, this would trigger a DOM re-render.\n    // For this example, we just log the changes.\n    console.log('Spreadsheet state updated. Current data:', this.data);\n    console.log(`Current dimensions: Rows=${this.rows}, Cols=${this.cols}`);\n  }\n}\n\nconst spreadsheet = new Spreadsheet(2, 2);\nconsole.log('Initial data:', JSON.stringify(spreadsheet.data));\n\nspreadsheet.addRow();\nconsole.log('After addRow:', JSON.stringify(spreadsheet.data));\n\nspreadsheet.removeRow(0);\nconsole.log('After removeRow(0):', JSON.stringify(spreadsheet.data));\n\nspreadsheet.addColumn();\nconsole.log('After addColumn:', JSON.stringify(spreadsheet.data));\n\nspreadsheet.removeColumn(0);\nconsole.log('After removeColumn(0):', JSON.stringify(spreadsheet.data));",
              "explanation": "This example specifically demonstrates the internal logic of the `addRow`, `removeRow`, `addColumn`, and `removeColumn` methods. It shows how they modify the `data` array and the `rows`/`cols` properties. The `update()` call within these methods ensures that the UI (in a full implementation) would be synchronized with these data changes. The `JSON.stringify` is used for clearer console output of the array state.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "Vanilla JS",
            "DOM Manipulation",
            "Classes",
            "Data Structures",
            "Frontend Architecture",
            "Event Handling"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "HTML",
            "CSS",
            "Basic JavaScript Syntax",
            "Arrays",
            "Functions"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "Interactive UI Development",
            "Building Custom Components",
            "Understanding UI Frameworks"
          ]
        },
        {
          "id": "theory_react_user_search_interface",
          "title": "Building a User Search Interface with React Hooks and Accessibility",
          "content": "This section outlines the construction of a dynamic user search interface using React functional components and various React Hooks. The focus is on efficient state management, implementing a flexible search mechanism, and ensuring robust keyboard accessibility for an enhanced user experience.\n\n## Core Concepts\n-   **React State Management (`useState`)**: The `useState` hook is crucial for managing the dynamic data within the component. This includes: `searchTerm` (the user's input), `searchResults` (the filtered list of users), `selectedIndex` (the currently highlighted item for keyboard navigation), and `isDropdownOpen` (controls the visibility of the results dropdown).\n-   **React Refs (`useRef`)**: The `useRef` hook provides a way to access and interact with underlying DOM elements directly. In this context, `searchInputRef` allows managing focus on the search input, and `resultsContainerRef` helps in programmatic scrolling to ensure the selected search result is always visible.\n-   **Side Effects (`useEffect`)**: The `useEffect` hook is used for handling operations that cause side effects, such as:\n    -   Triggering the search function whenever the `searchTerm` changes.\n    -   Attaching and detaching global event listeners (e.g., `keydown` for keyboard navigation, `mousedown` for click-outside functionality).\n    -   Managing the scroll position of the selected item within the results list.\n-   **Search Logic (`searchUsers` Function)**: This function is responsible for filtering the raw user data (`users`) based on the current `searchTerm`. Key considerations for this logic include case-insensitivity and searching across multiple relevant user properties (e.g., `name`, `purchased` items, `address`, `zipCode`).\n-   **Keyboard Navigation (Accessibility)**: A critical aspect of a user-friendly interface. This involves detecting `ArrowUp`, `ArrowDown`, `Enter`, and `Escape` key presses. The `selectedIndex` state is updated to highlight the corresponding search result, and `e.preventDefault()` is used to stop default browser behaviors (like page scrolling). `Enter` key typically selects an item, while `Escape` closes the dropdown.\n-   **Dropdown Visibility Management**: The `isDropdownOpen` state controls when the search results dropdown is displayed. It's typically shown when a non-empty `searchTerm` yields results and hidden when the input is empty, no results are found, or the user clicks outside/presses Escape.\n-   **Debouncing for Performance**: To prevent the `searchUsers` function (which might be computationally expensive or trigger API calls) from running on every keystroke, a debouncing mechanism is employed. This delays the execution of the search logic until a short period of user inactivity, reducing unnecessary computations.\n\n## Implementation Details\n\n### State Variables and Refs\n```javascript\nimport React, { useState, useEffect, useRef } from 'react';\n\n// Sample user data\nconst users = [\n  { id: 1, name: 'John Smith', purchased: ['Laptop', 'Mouse'], \n    address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Sarah Johnson', purchased: ['Phone', 'Headphones'], \n    address: '456 Oak Ave', zipCode: '20002' },\n  // ... more users\n];\n\nfunction UserSearch() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0); // Index of highlighted item\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false); // Dropdown visibility\n  \n  const searchInputRef = useRef(null); // Ref for the search input DOM element\n  const resultsContainerRef = useRef(null); // Ref for the results list container\n  // ... rest of the component\n}\n```\n\n### Search Logic (`searchUsers`)\nThis function filters the `users` array based on the `query`, ensuring case-insensitive matching across multiple fields.\n\n```javascript\nconst searchUsers = (query) => {\n  if (!query.trim()) return [];\n  const lowerCaseQuery = query.toLowerCase();\n  \n  return users.filter(user => {\n    // Check user's name\n    if (user.name.toLowerCase().includes(lowerCaseQuery)) return true;\n    // Check purchased items array\n    if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery))) return true;\n    // Check address\n    if (user.address.toLowerCase().includes(lowerCaseQuery)) return true;\n    // Check zipCode (direct includes as it's typically numeric or alphanumeric)\n    if (user.zipCode.includes(lowerCaseQuery)) return true; \n    \n    return false;\n  });\n};\n```\n\n### `useEffect` for Search Term Changes and Debouncing\nThis hook integrates a debouncing mechanism (e.g., using a custom `useDebounce` hook or `setTimeout`) to delay the `searchUsers` call, preventing excessive re-filtering on rapid keystrokes.\n\n```javascript\n// Assuming a useDebounce hook is available\nconst debouncedSearchTerm = useDebounce(searchTerm, 300); // 300ms delay\n\nuseEffect(() => {\n  if (debouncedSearchTerm.trim()) {\n    const filtered = searchUsers(debouncedSearchTerm);\n    setSearchResults(filtered);\n    setSelectedIndex(filtered.length > 0 ? 0 : -1); // Auto-select first result, or none\n    setIsDropdownOpen(filtered.length > 0); // Open dropdown if results exist\n  } else {\n    setSearchResults([]);\n    setSelectedIndex(-1);\n    setIsDropdownOpen(false);\n  }\n}, [debouncedSearchTerm]); // Re-run effect only when debouncedSearchTerm changes\n```\n\n### `useEffect` for Keyboard Navigation\nThis hook sets up a global `keydown` event listener to manage `selectedIndex` based on arrow keys, `Enter` for selection, and `Escape` for closing the dropdown. It cleans up the listener on unmount.\n\n```javascript\nuseEffect(() => {\n  const handleKeyDown = (e) => {\n    if (!isDropdownOpen || searchResults.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault(); // Prevents page scroll\n        setSelectedIndex(prevIndex => (prevIndex + 1) % searchResults.length);\n        break;\n      case 'ArrowUp':\n        e.preventDefault(); // Prevents page scroll\n        setSelectedIndex(prevIndex => (prevIndex - 1 + searchResults.length) % searchResults.length); // Handles wrap-around for negative index\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex >= 0 && selectedIndex < searchResults.length) {\n          const selectedUser = searchResults[selectedIndex];\n          console.log('Selected user:', selectedUser);\n          setSearchTerm(selectedUser.name); // Update input with selected name\n          setIsDropdownOpen(false); // Close dropdown\n          searchInputRef.current?.focus(); // Return focus to input\n        }\n        break;\n      case 'Escape':\n        setIsDropdownOpen(false);\n        searchInputRef.current?.focus(); // Return focus to input\n        break;\n      default:\n        break;\n    }\n  };\n\n  window.addEventListener('keydown', handleKeyDown);\n  return () => {\n    window.removeEventListener('keydown', handleKeyDown);\n  };\n}, [searchResults, selectedIndex, isDropdownOpen]); // Dependencies: only re-run if these change\n```\n\n### `useEffect` for Scroll Into View\nEnsures that the currently selected (highlighted) item within the `searchResults` list is always visible in the scrollable container.\n\n```javascript\nuseEffect(() => {\n  if (resultsContainerRef.current && selectedIndex !== -1) {\n    const selectedElement = resultsContainerRef.current.children[selectedIndex];\n    if (selectedElement) {\n      selectedElement.scrollIntoView({\n        behavior: 'smooth', // Smooth scroll effect\n        block: 'nearest'    // Scrolls the minimum amount to make element visible\n      });\n    }\n  }\n}, [selectedIndex, searchResults]); // Runs when selection or results change\n```\n\n### `useEffect` for Click Outside\nHandles closing the dropdown when a user clicks anywhere on the document outside of the search input and results container, improving user experience.\n\n```javascript\nuseEffect(() => {\n  const handleClickOutside = (event) => {\n    if (searchInputRef.current && !searchInputRef.current.contains(event.target) &&\n        resultsContainerRef.current && !resultsContainerRef.current.contains(event.target)) {\n      setIsDropdownOpen(false);\n    }\n  };\n\n  document.addEventListener('mousedown', handleClickOutside);\n  return () => {\n    document.removeEventListener('mousedown', handleClickOutside);\n  };\n}, [searchInputRef, resultsContainerRef]); // Dependencies: refs themselves don't change often\n```\n\n## Sample User Data\nThis `users` array serves as the local data source for the search functionality. In a real-world application, this data might come from an API.\n\n```javascript\nconst users = [\n  { id: 1, name: 'John Smith', purchased: ['Laptop', 'Mouse'], \n    address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Sarah Johnson', purchased: ['Phone', 'Headphones'], \n    address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'David Lee', purchased: ['Keyboard', 'Monitor'], \n    address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Emily White', purchased: ['Tablet', 'Smartwatch'], \n    address: '101 Cedar Rd', zipCode: '40004' },\n  { id: 5, name: 'Michael Brown', purchased: ['Camera', 'Tripod'], \n    address: '202 Birch Dr', zipCode: '50005' }\n];\n```",
          "examples": [
            {
              "id": "example_user_search_component_structure",
              "title": "UserSearch Component Basic Structure with JSX",
              "code": "import React, { useState, useEffect, useRef } from 'react';\n\n// Sample user data\nconst users = [\n  { id: 1, name: 'John Smith', purchased: ['Laptop', 'Mouse'], \n    address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Sarah Johnson', purchased: ['Phone', 'Headphones'], \n    address: '456 Oak Ave', zipCode: '20002' }\n];\n\n// Minimal custom useDebounce for this example\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const handler = setTimeout(() => { setDebouncedValue(value); }, delay);\n    return () => { clearTimeout(handler); };\n  }, [value, delay]);\n  return debouncedValue;\n}\n\nfunction UserSearch() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n  const dropdownId = 'user-search-results';\n\n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n\n  const searchUsers = (query) => {\n    if (!query.trim()) return [];\n    const lowerCaseQuery = query.toLowerCase();\n    return users.filter(user => \n      user.name.toLowerCase().includes(lowerCaseQuery) ||\n      user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery)) ||\n      user.address.toLowerCase().includes(lowerCaseQuery) ||\n      user.zipCode.includes(lowerCaseQuery)\n    );\n  };\n\n  useEffect(() => {\n    const filteredResults = searchUsers(debouncedSearchTerm);\n    setSearchResults(filteredResults);\n    setSelectedIndex(filteredResults.length > 0 ? 0 : -1);\n    setIsDropdownOpen(debouncedSearchTerm.trim().length > 0 && filteredResults.length > 0);\n  }, [debouncedSearchTerm]); // Only re-run when debounced term changes\n\n  // Omitted keyboard and click-outside effects for brevity in this specific example\n  // (see theory for full implementations)\n\n  return (\n    <div style={{ position: 'relative', width: '300px', margin: 'auto' }}>\n      <input\n        type=\"text\"\n        placeholder=\"Search users...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        onFocus={() => setIsDropdownOpen(searchTerm.trim().length > 0 && searchResults.length > 0)}\n        ref={searchInputRef}\n        id=\"user-search-input\"\n        role=\"combobox\"\n        aria-autocomplete=\"list\"\n        aria-controls={dropdownId}\n        aria-expanded={isDropdownOpen}\n        aria-activedescendant={selectedIndex !== -1 && searchResults[selectedIndex] ? `result-item-${searchResults[selectedIndex].id}` : undefined}\n        style={{ width: '100%', padding: '8px' }}\n      />\n      {isDropdownOpen && searchResults.length > 0 && (\n        <ul\n          id={dropdownId}\n          ref={resultsContainerRef}\n          role=\"listbox\"\n          style={{\n            listStyle: 'none', padding: '0', margin: '5px 0 0 0',\n            border: '1px solid #ddd', maxHeight: '150px', overflowY: 'auto',\n            position: 'absolute', width: '100%', zIndex: 1000, backgroundColor: 'white'\n          }}\n        >\n          {searchResults.map((user, index) => (\n            <li \n              key={user.id}\n              id={`result-item-${user.id}`}\n              role=\"option\"\n              aria-selected={index === selectedIndex}\n              className={index === selectedIndex ? 'selected' : ''}\n              onClick={() => {\n                console.log('Clicked user:', user);\n                setSearchTerm(user.name);\n                setIsDropdownOpen(false);\n              }}\n              style={{ padding: '8px', background: index === selectedIndex ? '#f0f0f0' : 'white', cursor: 'pointer' }}\n            >\n              {user.name} ({user.address})\n            </li>\n          ))}\n        </ul>\n      )}\n      {isDropdownOpen && searchResults.length === 0 && searchTerm.trim().length > 0 && (\n        <div style={{ padding: '8px', border: '1px solid #ddd', marginTop: '5px', backgroundColor: 'white' }}>No results found.</div>\n      )}\n    </div>\n  );\n}\n\nexport default UserSearch;",
              "explanation": "This example provides the foundational React component structure for `UserSearch`. It demonstrates how `useState` manages the input and results, `useRef` provides access to DOM elements, and a `useEffect` with debouncing triggers the search. The JSX structure illustrates the search input and the conditional rendering of the results dropdown. ARIA attributes are included for accessibility.",
              "language": "javascript"
            },
            {
              "id": "example_keyboard_navigation_logic",
              "title": "Dedicated Keyboard Navigation Hook Example",
              "code": "import React, { useState, useEffect, useCallback } from 'react';\n\nfunction useKeyboardNavigation(items, onSelect) {\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n\n  useEffect(() => {\n    if (items.length > 0 && selectedIndex === -1) {\n      setSelectedIndex(0); // Auto-select first item if results appear\n    }\n  }, [items]);\n\n  const handleKeyDown = useCallback((e) => {\n    if (items.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prevIndex => (prevIndex + 1) % items.length);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prevIndex => (prevIndex - 1 + items.length) % items.length);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex !== -1) {\n          onSelect(items[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        setSelectedIndex(-1); // Deselect\n        // Additional logic to close dropdown would go here in main component\n        break;\n      default:\n        break;\n    }\n  }, [items, selectedIndex, onSelect]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handleKeyDown]);\n\n  return [selectedIndex, setSelectedIndex];\n}\n\n// Example usage in a component:\n/*\nfunction MySearchComponent() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [results, setResults] = useState(['Result A', 'Result B', 'Result C']);\n  \n  const handleSelection = useCallback((selectedItem) => {\n    console.log('Selected:', selectedItem);\n    // Close dropdown, update input, etc.\n  }, []);\n\n  const [keyboardSelectedIndex] = useKeyboardNavigation(results, handleSelection);\n\n  return (\n    <div>\n      <input type=\"text\" value={searchQuery} onChange={e => setSearchQuery(e.target.value)} />\n      <ul>\n        {results.map((res, idx) => (\n          <li key={idx} style={{ background: idx === keyboardSelectedIndex ? 'yellow' : 'none' }}>\n            {res}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n*/",
              "explanation": "This example extracts the core keyboard navigation logic into a reusable custom hook, `useKeyboardNavigation`. It manages the `selectedIndex` state and handles `keydown` events for `ArrowUp`, `ArrowDown`, `Enter`, and `Escape`. This pattern promotes code reuse and separation of concerns, making the main `UserSearch` component cleaner. `useCallback` is used to memoize `handleKeyDown` to prevent unnecessary re-creation of the event listener.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "React",
            "Hooks",
            "State Management",
            "Accessibility",
            "Search",
            "Performance",
            "Frontend Development"
          ],
          "technology": "React",
          "prerequisites": [
            "HTML",
            "CSS",
            "JavaScript ES6+",
            "React Basics (Components, Props)"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Interactive Forms",
            "Autocomplete Components",
            "Accessible UI Patterns",
            "SPAs"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_spreadsheet_dom_update_strategy",
          "topic": "Vanilla JS DOM Update Strategy",
          "level": "medium",
          "type": "open",
          "question": "The provided `Spreadsheet` class uses `innerHTML = ''` followed by `appendChild(this.render())` for updates. Discuss the advantages and disadvantages of this DOM update strategy. What are alternative approaches, and when would you consider using them?",
          "answer": "This is an open-ended question that requires a detailed explanation.",
          "options": [],
          "analysisPoints": [
            "**Advantages**: Simplicity and ease of implementation. It's straightforward to understand: just wipe and redraw. It works well for small, simple UIs or when the entire UI state truly changes dramatically.",
            "**Disadvantages**: \n    1.  **Performance**: For larger DOM trees or frequent updates, `innerHTML = ''` is highly inefficient. It forces the browser to parse HTML, create new DOM nodes, and re-paint/re-layout the entire subtree from scratch, which is computationally expensive.\n    2.  **Loss of State**: All existing DOM elements are destroyed and recreated. This means any transient UI state (e.g., input focus, cursor position, scroll position, media playback state, attached event listeners from external libraries) is lost.\n    3.  **Flickering**: Rapid re-rendering can cause visual flickering, especially on slower devices or for complex layouts.",
            "**Alternative Approaches**: \n    1.  **Granular DOM Updates**: Instead of re-rendering the whole table, identify exactly which cells/rows/columns have changed and update only those specific DOM elements. This requires more complex logic to track changes but is significantly more performant.\n        *   **When to use**: When fine-grained control is needed, performance is critical, and you want to avoid framework overhead. Often seen in highly optimized custom widgets or when dealing with specific, isolated DOM updates.\n    2.  **Virtual DOM (e.g., React, Vue)**: Frameworks create a lightweight JavaScript representation of the DOM (Virtual DOM). When the state changes, they compute a 'diff' between the old and new Virtual DOM, then apply only the necessary minimal changes to the actual DOM. This abstracts away manual DOM manipulation complexities.\n        *   **When to use**: For complex, interactive applications where managing UI state and efficient updates manually becomes too cumbersome. Offers good performance automatically for most cases, simplifies development, and provides a component-based architecture.\n    3.  **Document Fragments**: For batching multiple DOM manipulations. Instead of appending elements one by one to the live DOM (which causes reflows for each append), you can append them to a `DocumentFragment` first, and then append the fragment to the live DOM in a single operation. This reduces reflows and improves performance for a series of additions.\n        *   **When to use**: When performing multiple sequential additions/modifications to the DOM, especially within a loop, to reduce layout thrashing.",
            "**Conclusion**: The `innerHTML = ''` approach is acceptable for very simple scenarios. However, for anything more than trivial, adopting granular updates or leveraging a Virtual DOM-based framework is superior for performance, state preservation, and developer experience."
          ],
          "keyConcepts": [
            "DOM Manipulation",
            "Performance Optimization",
            "Re-rendering Strategies",
            "Virtual DOM",
            "Granular Updates",
            "DocumentFragment"
          ],
          "evaluationCriteria": [
            "Depth of understanding of DOM performance implications.",
            "Ability to analyze trade-offs of different rendering approaches.",
            "Knowledge of common frontend optimization techniques and relevant tools/frameworks."
          ],
          "example": "```javascript\n// Current update method in Spreadsheet class:\nupdate() {\n  const spreadsheetContainer = document.getElementById('spreadsheet-container');\n  spreadsheetContainer.innerHTML = ''; // Full destruction and recreation\n  spreadsheetContainer.appendChild(this.render());\n}\n\n// Conceptual Granular update (e.g., for a single cell edit):\n// Instead of full re-render, if only cell [0][0] changes:\n// const cellInput = document.querySelector('[data-row=\"0\"][data-col=\"0\"]');\n// if (cellInput) {\n//   cellInput.value = this.data[0][0];\n// }\n\n// Conceptual DocumentFragment usage for adding multiple rows:\n// const fragment = document.createDocumentFragment();\n// for (let i = 0; i < newRows.length; i++) {\n//   const tr = document.createElement('tr');\n//   // ... add cells to tr\n//   fragment.appendChild(tr);\n// }\n// tbody.appendChild(fragment); // Single append to live DOM\n```",
          "tags": [
            "Vanilla JS",
            "DOM",
            "Performance",
            "Optimization",
            "Architecture",
            "Rendering"
          ],
          "prerequisites": [
            "theory_vanilla_js_spreadsheet",
            "JavaScript Fundamentals"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_spreadsheet_remove_column_logic",
          "topic": "Spreadsheet Data Manipulation",
          "level": "easy",
          "type": "mcq",
          "question": "Consider the `removeColumn` method from the `Spreadsheet` class:\n\n```javascript\nremoveColumn(colIndex) {\n  if (colIndex >= 0 && colIndex < this.cols) {\n    for (let i = 0; i < this.rows; i++) {\n      this.data[i].splice(colIndex, 1);\n    }\n    this.cols--;\n    this.update();\n  }\n}\n```\n\nWhat is the primary array method used inside the loop to remove the column's data from each row, and what does `1` in `splice(colIndex, 1)` signify?",
          "answer": "splice; It signifies the number of elements to remove starting from `colIndex`.",
          "options": [
            "pop; It signifies the new length of the array.",
            "shift; It signifies the element to add.",
            "slice; It signifies the ending index of the new array.",
            "splice; It signifies the number of elements to remove starting from `colIndex`."
          ],
          "analysisPoints": [
            "Tests knowledge of common JavaScript array manipulation methods, specifically `splice`.",
            "Ensures understanding of `splice` parameters (start index, delete count).",
            "Distinguishes `splice` (modifies in place) from `slice` (creates new array)."
          ],
          "keyConcepts": [
            "Array Methods",
            "JavaScript Fundamentals",
            "Data Structures (2D Array)"
          ],
          "evaluationCriteria": [
            "Correct identification of `splice` method.",
            "Accurate understanding of `splice`'s second argument.",
            "Understanding of array mutation."
          ],
          "example": "The `splice()` method is used to change the contents of an array by removing, replacing, or adding elements. `array.splice(startIndex, deleteCount, ...itemsToAdd)`. In `this.data[i].splice(colIndex, 1)`, `colIndex` is the starting index from which to remove elements, and `1` means 'remove one element' at that position.",
          "tags": [
            "JavaScript",
            "Arrays",
            "Methods",
            "Data Manipulation"
          ],
          "prerequisites": [
            "theory_vanilla_js_spreadsheet",
            "JavaScript Arrays"
          ],
          "complexity": 3,
          "interviewFrequency": 5,
          "learningPath": "beginner"
        },
        {
          "id": "question_spreadsheet_event_delegation_flashcard",
          "topic": "Event Handling & Optimization in Vanilla JS",
          "level": "medium",
          "type": "flashcard",
          "question": "What is 'event delegation' and how could it be applied to optimize event handling for cell input events in the `Spreadsheet` class's `render()` method?",
          "answer": "Event delegation is a technique where you attach a single event listener to a common ancestor (parent) element, instead of attaching individual listeners to multiple child elements. When an event (like `input` or `click`) is triggered on a child element, it 'bubbles up' the DOM tree. The single listener on the parent then catches the event, and by inspecting `event.target` (the actual element that triggered the event), it can determine which child element was interacted with and perform the appropriate action.\n\nFor the `Spreadsheet`'s cell input events, instead of adding an `input` event listener to every single `<input>` element within the cells (which can be hundreds or thousands), one `input` listener could be attached to the `<tbody>` or even the `<table>` element. When an `input` event occurs, the listener would check if `event.target` is an `<input>` element within a data cell. To identify which specific cell's data changed, you would typically use `dataset` attributes (e.g., `data-row` and `data-col`) on the input elements themselves. This significantly reduces memory footprint and improves performance, especially for large tables with many interactive elements, as fewer event listeners are managed.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Event Delegation",
            "DOM Events",
            "Performance Optimization",
            "Memory Management",
            "Event Bubbling"
          ],
          "evaluationCriteria": [],
          "example": "```javascript\n// Original approach (simplified):\n// const input = document.createElement('input');\n// input.dataset.row = r;\n// input.dataset.col = c;\n// input.addEventListener('input', (e) => {\n//   this.data[parseInt(e.target.dataset.row)][parseInt(e.target.dataset.col)] = e.target.value;\n// });\n\n// Event delegation approach (conceptual within render() or in update/constructor):\n// Add this once to the table/tbody:\n// table.addEventListener('input', (e) => {\n//   const target = e.target;\n//   if (target.tagName === 'INPUT' && target.dataset.row && target.dataset.col) {\n//     const rowIndex = parseInt(target.dataset.row);\n//     const colIndex = parseInt(target.dataset.col);\n//     this.data[rowIndex][colIndex] = target.value;\n//   }\n// });\n```",
          "tags": [
            "JavaScript",
            "DOM",
            "Events",
            "Performance",
            "Frontend Architecture"
          ],
          "prerequisites": [
            "theory_vanilla_js_spreadsheet",
            "DOM Events"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_hooks_purpose_mcq",
          "topic": "React Hooks Fundamentals",
          "level": "easy",
          "type": "mcq",
          "question": "Which React hook is primarily used for performing side effects in functional components, such as data fetching, subscriptions, or manually changing the DOM, and typically runs after every render?",
          "answer": "useEffect",
          "options": [
            "useState",
            "useContext",
            "useReducer",
            "useEffect"
          ],
          "analysisPoints": [
            "Tests fundamental knowledge of React hooks and their specific purposes.",
            "Highlights the core role of `useEffect` in managing operations that interact with the outside world or require cleanup (side effects).",
            "Distinguishes `useEffect` from state management hooks (`useState`, `useReducer`) and context hooks (`useContext`)."
          ],
          "keyConcepts": [
            "React Hooks",
            "useEffect",
            "Side Effects",
            "Functional Components",
            "Component Lifecycle"
          ],
          "evaluationCriteria": [
            "Correct identification of `useEffect`'s purpose.",
            "Basic understanding of React component lifecycle concepts in functional components."
          ],
          "example": "The `useEffect` hook allows you to perform side effects in functional components. It is a powerful tool that combines the functionalities of `componentDidMount`, `componentDidUpdate`, and `componentWillUnmount` lifecycle methods from class components. It typically runs after every render of the component, but its execution can be controlled by specifying dependencies.",
          "tags": [
            "React",
            "Hooks",
            "useEffect",
            "Fundamentals"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_search_keyboard_navigation_implementation_code",
          "topic": "React User Search Implementation - Keyboard Navigation",
          "level": "hard",
          "type": "code",
          "question": "Given a React functional component `UserSearch` with `searchTerm`, `searchResults`, `selectedIndex`, and `isDropdownOpen` states, and `searchInputRef`, `resultsContainerRef` refs, implement the `useEffect` hook that handles keyboard navigation. Your implementation should cover:\n1.  **ArrowDown**: Move `selectedIndex` down, wrapping from the last item to the first. `preventDefault()` browser's default scroll.\n2.  **ArrowUp**: Move `selectedIndex` up, wrapping from the first item to the last. `preventDefault()` browser's default scroll.\n3.  **Enter**: If an item is selected, log the selected user object, update `searchTerm` with the user's name, and close the dropdown (`isDropdownOpen` to `false`). `preventDefault()` form submission.\n4.  **Escape**: Close the dropdown (`isDropdownOpen` to `false`).\n\nAssume the `searchResults` array is available and `isDropdownOpen` indicates if the results list is visible. The `selectedIndex` should be `-1` if no item is selected or results are empty. Ensure proper cleanup of event listeners.",
          "answer": "The expected solution would be the `useEffect` hook provided in the theory section for keyboard navigation, demonstrating correct handling of `selectedIndex` updates, `e.preventDefault()`, and state updates for dropdown visibility and selection, along with proper listener cleanup.",
          "options": [],
          "analysisPoints": [
            "Correct usage of `useEffect` for adding and removing global event listeners.",
            "Accurate implementation of `selectedIndex` state updates with wrap-around logic for both `ArrowDown` and `ArrowUp`.",
            "Proper use of `e.preventDefault()` for relevant key presses to control browser behavior.",
            "Correct state transitions for `isDropdownOpen` (closing on `Enter` or `Escape`).",
            "Ability to access and utilize `searchResults` and `selectedIndex` correctly within the effect.",
            "Handling edge cases like empty `searchResults` or `isDropdownOpen` being false.",
            "Ensuring `searchInputRef.current?.focus()` is called to return focus when dropdown closes via Enter/Escape."
          ],
          "keyConcepts": [
            "React Hooks (useEffect)",
            "Event Handling (Keyboard Events)",
            "Accessibility (Keyboard Navigation)",
            "State Management",
            "Array Modulo Arithmetic (for wrap-around)"
          ],
          "evaluationCriteria": [
            "Syntactical correctness of React code.",
            "Logical accuracy and completeness of keyboard navigation implementation.",
            "Adherence to accessibility best practices (e.g., `preventDefault`).",
            "Correct handling of `useEffect` dependencies and cleanup."
          ],
          "example": "```javascript\nimport React, { useState, useEffect, useRef } from 'react';\n\nconst users = [\n  { id: 1, name: 'Alice', purchased: ['Book'], address: '101 Pine', zipCode: '11111' },\n  { id: 2, name: 'Bob', purchased: ['Chair'], address: '202 Oak', zipCode: '22222' },\n  { id: 3, name: 'Charlie', purchased: ['Desk'], address: '303 Elm', zipCode: '33333' }\n];\n\nfunction UserSearchKeyboardNavChallenge() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  // Simplified search logic for example\n  useEffect(() => {\n    if (searchTerm.trim()) {\n      const filtered = users.filter(user => user.name.toLowerCase().includes(searchTerm.toLowerCase()));\n      setSearchResults(filtered);\n      setSelectedIndex(filtered.length > 0 ? 0 : -1);\n      setIsDropdownOpen(filtered.length > 0);\n    } else {\n      setSearchResults([]);\n      setSelectedIndex(-1);\n      setIsDropdownOpen(false);\n    }\n  }, [searchTerm]);\n\n  // --- YOUR KEYBOARD NAVIGATION useEffect IMPLEMENTATION STARTS HERE ---\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (!isDropdownOpen || searchResults.length === 0) return;\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prevIndex => (prevIndex + 1) % searchResults.length);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prevIndex => (prevIndex - 1 + searchResults.length) % searchResults.length);\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (selectedIndex !== -1 && selectedIndex < searchResults.length) {\n            const selectedUser = searchResults[selectedIndex];\n            console.log('Selected user:', selectedUser);\n            setSearchTerm(selectedUser.name); // Update input field\n            setIsDropdownOpen(false); // Close dropdown\n            searchInputRef.current?.focus(); // Return focus to input\n          }\n          break;\n        case 'Escape':\n          setIsDropdownOpen(false);\n          searchInputRef.current?.focus(); // Return focus to input\n          break;\n        default:\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [searchResults, selectedIndex, isDropdownOpen]);\n\n  // Effect for scroll into view (as per theory)\n  useEffect(() => {\n    if (resultsContainerRef.current && selectedIndex !== -1) {\n      const selectedElement = resultsContainerRef.current.children[selectedIndex];\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n      }\n    }\n  }, [selectedIndex, searchResults]);\n  // --- KEYBOARD NAVIGATION useEffect IMPLEMENTATION ENDS HERE ---\n\n  return (\n    <div style={{ padding: '20px' }}>\n      <h3>User Search with Keyboard Navigation Challenge</h3>\n      <input\n        type=\"text\"\n        placeholder=\"Search users...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        onFocus={() => setIsDropdownOpen(searchTerm.trim().length > 0 && searchResults.length > 0)}\n        ref={searchInputRef}\n        style={{ width: '300px', padding: '8px', fontSize: '16px' }}\n      />\n      {isDropdownOpen && searchResults.length > 0 && (\n        <ul ref={resultsContainerRef}\n            style={{\n              listStyle: 'none', padding: '0', margin: '5px 0 0 0',\n              border: '1px solid #ddd', maxHeight: '150px', overflowY: 'auto',\n              width: '300px', boxShadow: '0 2px 5px rgba(0,0,0,0.1)'\n            }}>\n          {searchResults.map((user, index) => (\n            <li\n              key={user.id}\n              style={{\n                padding: '10px',\n                background: index === selectedIndex ? '#f0f0f0' : 'white',\n                cursor: 'pointer',\n                borderBottom: '1px solid #eee'\n              }}\n              onClick={() => {\n                console.log('Clicked user:', user);\n                setSearchTerm(user.name);\n                setIsDropdownOpen(false);\n              }}\n            >\n              {user.name}\n            </li>\n          ))}\n        </ul>\n      )}\n      {isDropdownOpen && searchResults.length === 0 && searchTerm.trim().length > 0 && (\n          <div style={{ padding: '10px', border: '1px solid #ddd', width: '300px', marginTop: '5px' }}>No results found.</div>\n      )}\n    </div>\n  );\n}\n\nexport default UserSearchKeyboardNavChallenge;\n```",
          "tags": [
            "React",
            "Hooks",
            "Accessibility",
            "Keyboard Events",
            "Frontend",
            "Code Challenge"
          ],
          "prerequisites": [
            "theory_react_user_search_interface",
            "React Basics",
            "JavaScript Arrays"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_controlled_uncontrolled_flashcard",
          "topic": "React Forms and Inputs",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the key difference between a controlled component and an uncontrolled component in React, particularly in the context of input fields like a search bar or text input?",
          "answer": "A **controlled component** is a form input element whose value is controlled by React state. The input's value is always driven by its `value` prop, and any changes are handled by an `onChange` event handler that updates the state. This makes the input's value predictable and allows React to manage its entire lifecycle. The search input in `UserSearch` (`value={searchTerm}` and `onChange={(e) => setSearchTerm(e.target.value)}`) is a classic example of a controlled component.\n\nAn **uncontrolled component** is a form input element whose value is managed by the DOM itself, similar to how traditional HTML forms work. You typically use a `ref` to gain direct access to the DOM element and retrieve its current value when needed (e.g., when a form is submitted). Uncontrolled components can be simpler for very basic, isolated form inputs, but they offer less programmatic control from React's side compared to controlled components.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "Controlled Components",
            "Uncontrolled Components",
            "React Forms",
            "State Management",
            "Refs",
            "Input Fields"
          ],
          "evaluationCriteria": [],
          "example": "```jsx\n// Controlled Component (as seen in UserSearch's input)\nfunction ControlledInput() {\n  const [value, setValue] = useState('');\n  return <input type=\"text\" value={value} onChange={(e) => setValue(e.target.value)} />;\n}\n\n// Uncontrolled Component example\nfunction UncontrolledInput() {\n  const inputRef = useRef(null);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    alert('Input value: ' + inputRef.current.value);\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type=\"text\" ref={inputRef} defaultValue=\"Initial value\" />\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n```",
          "tags": [
            "React",
            "Forms",
            "State",
            "Hooks",
            "Fundamentals"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_search_debouncing_mcq",
          "topic": "Search Optimization",
          "level": "medium",
          "type": "mcq",
          "question": "When implementing a real-time search interface, such as the `UserSearch` component, which performance optimization technique is most suitable for preventing the `searchUsers` function (or an API call) from being executed on every single keystroke, especially if the operation is computationally expensive or network-bound?",
          "answer": "Debouncing",
          "options": [
            "Throttling",
            "Debouncing",
            "Memoization",
            "Caching"
          ],
          "analysisPoints": [
            "Tests knowledge of common performance optimization techniques for frequently triggered events.",
            "Distinguishes debouncing from throttling based on their behavior (executing after inactivity vs. limiting rate).",
            "Relates the concept directly to the use case of search inputs."
          ],
          "keyConcepts": [
            "Debouncing",
            "Throttling",
            "Performance Optimization",
            "Event Handling",
            "Front-end Architecture"
          ],
          "evaluationCriteria": [
            "Correct identification of debouncing as the appropriate technique.",
            "Understanding its application in search scenarios.",
            "Ability to differentiate it from related concepts."
          ],
          "example": "```javascript\n// Conceptual `useDebounce` hook often used in React\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\n// In UserSearch component:\n// const debouncedSearchTerm = useDebounce(searchTerm, 300); // 300ms delay\n// useEffect(() => {\n//   // This effect only runs when debouncedSearchTerm changes\n//   // meaning after 300ms of inactivity.\n//   setSearchResults(searchUsers(debouncedSearchTerm));\n// }, [debouncedSearchTerm]);\n```\n**Debouncing** ensures that a function (like `searchUsers` or an API call) is only executed after a specified period of inactivity (e.g., 300 milliseconds) has passed since the last time it was invoked. This is ideal for search inputs because it prevents overwhelming the system with requests for every single character typed, only performing the search when the user pauses typing.",
          "tags": [
            "JavaScript",
            "Performance",
            "Optimization",
            "React",
            "Hooks"
          ],
          "prerequisites": [
            "JavaScript Advanced (Closures, Timers)",
            "theory_react_user_search_interface"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_refs_purpose_flashcard",
          "topic": "React Refs",
          "level": "easy",
          "type": "flashcard",
          "question": "When and why would you typically use `useRef` in a React functional component? Provide two common use cases.",
          "answer": "`useRef` is a React Hook that allows you to persist a mutable value across renders of a functional component without causing the component to re-render when that value changes. It's like a 'box' that can hold a mutable value in its `.current` property.\n\nTwo common use cases are:\n1.  **Accessing DOM elements directly**: This is the most frequent use. For instance, you can use `useRef` to get a direct reference to an input element to programmatically focus it (`inputRef.current.focus()`), manage media playback, measure element dimensions, or integrate with third-party DOM libraries that don't operate on React's declarative rendering.\n2.  **Storing mutable values that don't trigger re-renders**: `useRef` can hold any mutable value (not just DOM nodes) that needs to persist across renders but whose changes should not cause the component to re-render. Examples include storing a timer ID (`setTimeout` or `setInterval` IDs), a WebSocket instance, or any value that behaves like an instance variable in a class component.",
          "options": [],
          "analysisPoints": [],
          "keyConcepts": [
            "useRef",
            "React Hooks",
            "DOM Manipulation",
            "Mutable Values",
            "Side Effects",
            "Component Lifecycle"
          ],
          "evaluationCriteria": [],
          "example": "```jsx\nimport React, { useRef, useEffect } from 'react';\n\nfunction MyComponent() {\n  const inputRef = useRef(null); // Use case 1: Accessing DOM element\n  const intervalIdRef = useRef(null); // Use case 2: Storing mutable value\n\n  useEffect(() => {\n    // 1. Focus on the input when the component mounts\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n\n    // 2. Store an interval ID that won't trigger re-renders\n    intervalIdRef.current = setInterval(() => {\n      console.log('Interval running...');\n    }, 1000);\n\n    return () => {\n      // Cleanup the interval on component unmount\n      clearInterval(intervalIdRef.current);\n    };\n  }, []); // Empty dependency array means this effect runs once on mount and cleans up on unmount\n\n  return (\n    <div>\n      <input ref={inputRef} type=\"text\" placeholder=\"I will be focused!\" />\n      <p>Check console for interval messages.</p>\n    </div>\n  );\n}\n```",
          "tags": [
            "React",
            "Hooks",
            "useRef",
            "DOM",
            "State Management",
            "Fundamentals"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_user_search_interface_open",
          "topic": "User Search Interface Design & Architecture",
          "level": "medium",
          "type": "open",
          "question": "You've been asked to create a real-time user search interface with an autocomplete-like dropdown. Beyond the basic functionality, what are the critical considerations for ensuring high performance, excellent user experience, and robust accessibility? Discuss at least three points for each category (performance, UX, accessibility), providing specific techniques or React-related features.",
          "answer": "This is an open-ended question that prompts a comprehensive answer covering various aspects of UI development.",
          "options": [],
          "analysisPoints": [
            "**Performance Considerations**: \n    1.  **Debouncing/Throttling**: To prevent the search logic (especially if it involves expensive computations or API calls) from running on every keystroke, apply debouncing (e.g., 300-500ms delay) to the input change handler. This ensures the search only triggers after a brief period of user inactivity.\n    2.  **Memoization**: Use `React.memo` for the search results list component (if it's a separate component) and `useMemo` for the `searchResults` array itself or the `searchUsers` filtering function. This prevents unnecessary re-renders of the list or re-computation of filtered data if the relevant props/dependencies haven't changed.\n    3.  **Virtualization/Windowing**: For very large datasets (hundreds or thousands of results), render only the items currently visible in the viewport, plus a few buffer items. Libraries like `react-window` or `react-virtualized` can significantly improve performance by reducing the number of DOM nodes.\n    4.  **Efficient Search Algorithm**: Ensure the filtering logic (`searchUsers`) is optimized (e.g., converting search term and relevant user data fields to lowercase only once for comparison, using `some` or `every` effectively for array checks).\n    5.  **Backend Integration**: For massive datasets, delegate the actual search operation to a backend API, making the frontend primarily responsible for display and interaction rather than heavy data processing.\n        ",
            "**User Experience (UX) Considerations**: \n    1.  **Clear Visual Feedback**: Provide immediate feedback to the user, such as a loading spinner while search is in progress, or a 'No results found' message if applicable. Highlight the active/selected item in the dropdown clearly.\n    2.  **Intuitive Interaction**: The dropdown should appear reliably on focus/input and disappear on blur/escape/selection. Clicking an item should populate the input and close the dropdown. The debouncing should be tuned to feel responsive without being overwhelming.\n    3.  **Scroll Management**: Ensure the keyboard-selected item automatically scrolls into view within the dropdown, preventing hidden selections.\n    4.  **Click Outside Behavior**: Implement logic to close the dropdown when the user clicks anywhere outside the search input and results list.\n    5.  **Empty State Handling**: Clearly communicate when no results are found for a given query, or when the search input is empty.\n        ",
            "**Accessibility Considerations (ARIA)**: \n    1.  **Keyboard Navigation**: Full keyboard support using `ArrowUp`, `ArrowDown`, `Enter`, and `Escape` keys is paramount. Ensure `e.preventDefault()` is used to prevent default browser behaviors.\n    2.  **ARIA Roles and Attributes**: Implement appropriate ARIA roles and attributes for autocomplete patterns:\n        *   `role='combobox'` on the input.\n        *   `aria-autocomplete='list'` on the input.\n        *   `aria-controls` on the input, pointing to the ID of the results `<ul>` (`role='listbox'`).\n        *   `aria-expanded` on the input, indicating if the dropdown is visible.\n        *   `aria-activedescendant` on the input, dynamically pointing to the `id` of the currently highlighted `<li>` (`role='option'`).\n        *   Each `<li>` in the dropdown should have `role='option'` and `aria-selected`.\n    3.  **Focus Management**: Ensure focus returns to the search input after a selection or after the dropdown closes, maintaining a logical tab order.\n    4.  **Semantic HTML**: Use semantic HTML elements (`<input>`, `<ul>`, `<li>`) where appropriate to convey meaning to assistive technologies.\n    5.  **Contrast and Readability**: Ensure sufficient color contrast for text and interactive elements, and use clear, readable fonts.",
            "**React-specific features for implementation**: `useState`, `useEffect`, `useRef`, `useCallback`, `useMemo`, and potentially custom hooks for reusability (e.g., `useDebounce`, `useClickOutside`)."
          ],
          "keyConcepts": [
            "React",
            "Hooks",
            "State Management",
            "Accessibility",
            "Performance Optimization",
            "User Experience",
            "Search",
            "Frontend Architecture",
            "ARIA"
          ],
          "evaluationCriteria": [
            "Completeness and depth of the solution outline.",
            "Understanding of React's core principles and advanced features (hooks, memoization).",
            "Ability to integrate performance and accessibility best practices.",
            "Demonstrates architectural thinking and problem-solving for real-world scenarios."
          ],
          "example": "See the `theory_react_user_search_interface` for foundational code that implements many of these concepts, including debouncing, keyboard navigation, and ARIA attributes.",
          "tags": [
            "React",
            "Frontend Interview",
            "System Design",
            "Accessibility",
            "Performance",
            "UX"
          ],
          "prerequisites": [
            "theory_react_user_search_interface",
            "React Advanced"
          ],
          "complexity": 9,
          "interviewFrequency": 10,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_implement_vanilla_js_spreadsheet",
          "title": "Build a Dynamic Vanilla JavaScript Spreadsheet",
          "description": "Implement the `Spreadsheet` class in vanilla JavaScript to create a fully functional, interactive spreadsheet. Your implementation should adhere to the following requirements:\n\n1.  **Constructor**: Initialize `this.rows`, `this.cols` with provided dimensions and create a 2D `this.data` array of `rows` by `cols` filled with empty strings.\n2.  **`render()` method**: This method should generate the complete HTML `<table>` structure. \n    *   Each data cell (`<td>`) must contain an `<input type=\"text\">` field.\n    *   Include headers (`<th>`) for both rows (numbered 1, 2, 3...) and columns (lettered A, B, C...). \n    *   Next to each row number and column letter, add a small 'x' button to `remove` that specific row or column. Ensure these buttons function correctly.\n    *   Add a '+' button at the bottom (in the first column's header area) to `addRow()` and another '+' button at the end of the top header row to `addColumn()`.\n3.  **Data Persistence (Cell Editing)**: Attach an `input` event listener to each cell's input field. When the user types, the corresponding value in the `this.data` array must be updated in real-time.\n4.  **`addRow()` / `addColumn()`**: Implement these methods to add a new empty row or column to the `this.data` array. After modifying the data, these methods *must* call `this.update()` to refresh the UI.\n5.  **`removeRow(rowIndex)` / `removeColumn(colIndex)`**: Implement these methods to remove a row or column from the `this.data` array. Include boundary checks (`rowIndex`/`colIndex` should be valid). After modification, these methods *must* call `this.update()`.\n6.  **`update()` method**: This method is responsible for synchronizing the DOM with the `this.data` model. It should clear the content of the `spreadsheet-container` element and then append a fresh table generated by `this.render()`.\n\nYour solution should be self-contained within the `Spreadsheet` class and demonstrate its usage by creating an instance and appending it to a container (`<div id=\"spreadsheet-container\"></div>`) when the `DOMContentLoaded` event fires. Minimal CSS for basic layout is provided.",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vanilla JS Spreadsheet</title>\n    <style>\n        body { font-family: sans-serif; display: flex; justify-content: center; padding: 20px; background-color: #f4f4f4; }\n        #spreadsheet-container { border: 1px solid #ccc; padding: 10px; background-color: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.1); overflow-x: auto; }\n        table { border-collapse: collapse; margin-top: 10px; }\n        th, td { border: 1px solid #ccc; padding: 0; min-width: 80px; text-align: center; vertical-align: middle; height: 30px; }\n        td input { width: calc(100% - 2px); height: calc(100% - 2px); border: none; outline: none; padding: 5px; box-sizing: border-box; text-align: center; }\n        th button { background-color: #f0f0f0; border: 1px solid #ccc; padding: 5px 10px; cursor: pointer; font-weight: bold; width: 100%; height: 100%; box-sizing: border-box; }\n        th button:hover { background-color: #e0e0e0; }\n        .remove-btn { background-color: #ffcccc; color: #cc0000; font-size: 0.8em; padding: 2px 5px; border: 1px solid #cc0000; border-radius: 3px; cursor: pointer; margin-left: 5px; }\n        .remove-btn:hover { background-color: #ffaaaa; }\n        .header-content { display: flex; align-items: center; justify-content: center; height: 100%; width: 100%; box-sizing: border-box; padding: 0 5px; }\n        .header-content span { flex-grow: 1; text-align: center; }\n    </style>\n</head>\n<body>\n    <div id=\"spreadsheet-container\"></div>\n\n    <script>\n      class Spreadsheet {\n        constructor(rows, cols) {\n          this.rows = rows;\n          this.cols = cols;\n          this.data = Array(rows).fill(null).map(() => Array(cols).fill(''));\n        }\n\n        render() {\n          const table = document.createElement('table');\n          const thead = document.createElement('thead');\n          const tbody = document.createElement('tbody');\n\n          // Top header row for column controls\n          const headerTr = document.createElement('tr');\n          headerTr.innerHTML = '<th></th>'; // Empty corner cell\n\n          for (let c = 0; c < this.cols; c++) {\n            const th = document.createElement('th');\n            const div = document.createElement('div');\n            div.className = 'header-content';\n            const span = document.createElement('span');\n            span.textContent = String.fromCharCode(65 + c); // A, B, C...\n            const removeColBtn = document.createElement('button');\n            removeColBtn.textContent = 'x';\n            removeColBtn.className = 'remove-btn';\n            // Important: Use a closure or let to capture current 'c'\n            ((columnIndex) => {\n              removeColBtn.addEventListener('click', () => this.removeColumn(columnIndex));\n            })(c);\n            \n            div.appendChild(span);\n            div.appendChild(removeColBtn);\n            th.appendChild(div);\n            headerTr.appendChild(th);\n          }\n\n          const addColTh = document.createElement('th');\n          const addColButton = document.createElement('button');\n          addColButton.textContent = '+';\n          addColButton.addEventListener('click', () => this.addColumn());\n          addColTh.appendChild(addColButton);\n          headerTr.appendChild(addColTh);\n          thead.appendChild(headerTr);\n          table.appendChild(thead);\n\n          // Data rows and left header column (row controls)\n          for (let r = 0; r < this.rows; r++) {\n            const tr = document.createElement('tr');\n            const th = document.createElement('th');\n            const div = document.createElement('div');\n            div.className = 'header-content';\n            const span = document.createElement('span');\n            span.textContent = (r + 1).toString();\n            const removeRowBtn = document.createElement('button');\n            removeRowBtn.textContent = 'x';\n            removeRowBtn.className = 'remove-btn';\n            // Important: Use a closure or let to capture current 'r'\n            ((rowIndex) => {\n              removeRowBtn.addEventListener('click', () => this.removeRow(rowIndex));\n            })(r);\n            \n            div.appendChild(span);\n            div.appendChild(removeRowBtn);\n            th.appendChild(div);\n            tr.appendChild(th);\n\n            for (let c = 0; c < this.cols; c++) {\n              const td = document.createElement('td');\n              const input = document.createElement('input');\n              input.type = 'text';\n              input.value = this.data[r][c];\n              input.dataset.row = r.toString();\n              input.dataset.col = c.toString();\n              input.addEventListener('input', (e) => {\n                this.data[parseInt(e.target.dataset.row)][parseInt(e.target.dataset.col)] = e.target.value;\n              });\n              td.appendChild(input);\n              tr.appendChild(td);\n            }\n            tbody.appendChild(tr);\n          }\n\n          // Add row button at the bottom\n          const addRowTr = document.createElement('tr');\n          const addRowTh = document.createElement('th');\n          const addRowButton = document.createElement('button');\n          addRowButton.textContent = '+';\n          addRowButton.addEventListener('click', () => this.addRow());\n          addRowTh.appendChild(addRowButton);\n          addRowTr.appendChild(addRowTh); \n\n          // Append empty TDs to span across remaining columns to align the '+' button\n          for(let i = 0; i < this.cols; i++) {\n            addRowTr.appendChild(document.createElement('td'));\n          }\n          \n          tbody.appendChild(addRowTr);\n          table.appendChild(tbody);\n          \n          return table;\n        }\n        \n        addRow() {\n          this.data.push(Array(this.cols).fill(''));\n          this.rows++;\n          this.update();\n        }\n        \n        addColumn() {\n          for (let i = 0; i < this.rows; i++) {\n            this.data[i].push('');\n          }\n          this.cols++;\n          this.update();\n        }\n        \n        removeRow(rowIndex) {\n          if (rowIndex >= 0 && rowIndex < this.rows) {\n            this.data.splice(rowIndex, 1);\n            this.rows--;\n            this.update();\n          }\n        }\n        \n        removeColumn(colIndex) {\n          if (colIndex >= 0 && colIndex < this.cols) {\n            for (let i = 0; i < this.rows; i++) {\n              this.data[i].splice(colIndex, 1);\n            }\n            this.cols--;\n            this.update();\n          }\n        }\n        \n        update() {\n          const spreadsheetContainer = document.getElementById('spreadsheet-container');\n          spreadsheetContainer.innerHTML = '';\n          spreadsheetContainer.appendChild(this.render());\n        }\n      }\n\n      document.addEventListener('DOMContentLoaded', () => {\n        const spreadsheet = new Spreadsheet(5, 5); // Example initial size\n        const container = document.getElementById('spreadsheet-container');\n        container.appendChild(spreadsheet.render());\n      });\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vanilla JS Spreadsheet Solution</title>\n    <style>\n        body { font-family: sans-serif; display: flex; justify-content: center; padding: 20px; background-color: #f4f4f4; }\n        #spreadsheet-container { border: 1px solid #ccc; padding: 10px; background-color: #fff; box-shadow: 0 0 10px rgba(0,0,0,0.1); overflow-x: auto; }\n        table { border-collapse: collapse; margin-top: 10px; }\n        th, td { border: 1px solid #ccc; padding: 0; min-width: 80px; text-align: center; vertical-align: middle; height: 30px; }\n        td input { width: calc(100% - 2px); height: calc(100% - 2px); border: none; outline: none; padding: 5px; box-sizing: border-box; text-align: center; }\n        th button { background-color: #f0f0f0; border: 1px solid #ccc; padding: 5px 10px; cursor: pointer; font-weight: bold; width: 100%; height: 100%; box-sizing: border-box; }\n        th button:hover { background-color: #e0e0e0; }\n        .remove-btn { background-color: #ffcccc; color: #cc0000; font-size: 0.8em; padding: 2px 5px; border: 1px solid #cc0000; border-radius: 3px; cursor: pointer; margin-left: 5px; }\n        .remove-btn:hover { background-color: #ffaaaa; }\n        .header-content { display: flex; align-items: center; justify-content: center; height: 100%; width: 100%; box-sizing: border-box; padding: 0 5px; }\n        .header-content span { flex-grow: 1; text-align: center; }\n    </style>\n</head>\n<body>\n    <div id=\"spreadsheet-container\"></div>\n\n    <script>\n      class Spreadsheet {\n        constructor(rows, cols) {\n          this.rows = rows;\n          this.cols = cols;\n          this.data = Array(rows).fill(null).map(() => Array(cols).fill(''));\n        }\n\n        render() {\n          const table = document.createElement('table');\n          const thead = document.createElement('thead');\n          const tbody = document.createElement('tbody');\n\n          // Top header row for column controls\n          const headerTr = document.createElement('tr');\n          headerTr.innerHTML = '<th></th>'; // Empty corner cell\n\n          for (let c = 0; c < this.cols; c++) {\n            const th = document.createElement('th');\n            const div = document.createElement('div');\n            div.className = 'header-content';\n            const span = document.createElement('span');\n            span.textContent = String.fromCharCode(65 + c); // A, B, C...\n            const removeColBtn = document.createElement('button');\n            removeColBtn.textContent = 'x';\n            removeColBtn.className = 'remove-btn';\n            // Use a closure to capture the correct 'c' value for each listener\n            ((columnIndex) => {\n              removeColBtn.addEventListener('click', () => this.removeColumn(columnIndex));\n            })(c);\n            \n            div.appendChild(span);\n            div.appendChild(removeColBtn);\n            th.appendChild(div);\n            headerTr.appendChild(th);\n          }\n\n          const addColTh = document.createElement('th');\n          const addColButton = document.createElement('button');\n          addColButton.textContent = '+';\n          addColButton.addEventListener('click', () => this.addColumn());\n          addColTh.appendChild(addColButton);\n          headerTr.appendChild(addColTh);\n          thead.appendChild(headerTr);\n          table.appendChild(thead);\n\n          // Data rows and left header column (row controls)\n          for (let r = 0; r < this.rows; r++) {\n            const tr = document.createElement('tr');\n            const th = document.createElement('th');\n            const div = document.createElement('div');\n            div.className = 'header-content';\n            const span = document.createElement('span');\n            span.textContent = (r + 1).toString();\n            const removeRowBtn = document.createElement('button');\n            removeRowBtn.textContent = 'x';\n            removeRowBtn.className = 'remove-btn';\n            // Use a closure to capture the correct 'r' value for each listener\n            ((rowIndex) => {\n              removeRowBtn.addEventListener('click', () => this.removeRow(rowIndex));\n            })(r);\n            \n            div.appendChild(span);\n            div.appendChild(removeRowBtn);\n            th.appendChild(div);\n            tr.appendChild(th);\n\n            for (let c = 0; c < this.cols; c++) {\n              const td = document.createElement('td');\n              const input = document.createElement('input');\n              input.type = 'text';\n              input.value = this.data[r][c];\n              input.dataset.row = r.toString(); // Store row index as data attribute\n              input.dataset.col = c.toString(); // Store column index as data attribute\n              input.addEventListener('input', (e) => {\n                this.data[parseInt(e.target.dataset.row)][parseInt(e.target.dataset.col)] = e.target.value;\n              });\n              td.appendChild(input);\n              tr.appendChild(td);\n            }\n            tbody.appendChild(tr);\n          }\n\n          // Add row button at the bottom\n          const addRowTr = document.createElement('tr');\n          const addRowTh = document.createElement('th');\n          const addRowButton = document.createElement('button');\n          addRowButton.textContent = '+';\n          addRowButton.addEventListener('click', () => this.addRow());\n          addRowTh.appendChild(addRowButton);\n          addRowTr.appendChild(addRowTh); \n\n          // Append empty TDs to span across remaining columns to align the '+' button\n          for(let i = 0; i < this.cols; i++) {\n            addRowTr.appendChild(document.createElement('td'));\n          }\n          \n          tbody.appendChild(addRowTr);\n          table.appendChild(tbody);\n          \n          return table;\n        }\n        \n        addRow() {\n          this.data.push(Array(this.cols).fill(''));\n          this.rows++;\n          this.update();\n        }\n        \n        addColumn() {\n          for (let i = 0; i < this.rows; i++) {\n            this.data[i].push('');\n          }\n          this.cols++;\n          this.update();\n        }\n        \n        removeRow(rowIndex) {\n          if (rowIndex >= 0 && rowIndex < this.rows) {\n            this.data.splice(rowIndex, 1);\n            this.rows--;\n            this.update();\n          }\n        }\n        \n        removeColumn(colIndex) {\n          if (colIndex >= 0 && colIndex < this.cols) {\n            for (let i = 0; i < this.rows; i++) {\n              this.data[i].splice(colIndex, 1);\n            }\n            this.cols--;\n            this.update();\n          }\n        }\n        \n        update() {\n          const spreadsheetContainer = document.getElementById('spreadsheet-container');\n          spreadsheetContainer.innerHTML = '';\n          spreadsheetContainer.appendChild(this.render());\n        }\n      }\n\n      document.addEventListener('DOMContentLoaded', () => {\n        const spreadsheet = new Spreadsheet(5, 5); // Example initial size\n        const container = document.getElementById('spreadsheet-container');\n        container.appendChild(spreadsheet.render());\n      });\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "**Initialization**: Load `index.html`. Verify a 5x5 grid (or initial size) appears correctly, with column letters (A-E) and row numbers (1-5) as headers. Check that input fields are present in all cells.",
            "**Cell Editing**: Type 'Test' into cell A1. Open browser developer console and type `spreadsheet.data[0][0]` (assuming `spreadsheet` is globally accessible via the `DOMContentLoaded` block). It should return 'Test'. Type in other cells and verify the `data` array is correctly updated.",
            "**Add Row Functionality**: Click the '+' button at the bottom. Verify a new, empty row is appended to the table, and the total number of rows displayed on the UI and in the `spreadsheet.rows` property increases by one.",
            "**Add Column Functionality**: Click the '+' button in the top right. Verify a new, empty column is appended to the table, and the total number of columns (`spreadsheet.cols`) increases by one. Existing data should shift correctly.",
            "**Remove Row Functionality**: Click the 'x' button next to row 2. Verify row 2 disappears, and row 3 shifts up to become the new row 2. Check `spreadsheet.rows` decreases. Repeat for first, last, and middle rows.",
            "**Remove Column Functionality**: Click the 'x' button next to column B. Verify column B disappears, and column C shifts left to become the new column B. Check `spreadsheet.cols` decreases. Repeat for first, last, and middle columns.",
            "**Data Persistence Across Updates**: Type some data into a few cells (e.g., A1, B2). Then, add a new row and a new column. Verify that the previously entered data in A1 and B2 is still present and correctly displayed after the `update()` calls.",
            "**Edge Cases (Removing when 1 row/col)**: Try to remove a row or column when only one is left. The current code allows this, shrinking to 0xN or Nx0. Consider if explicit handling is needed (e.g., prevent removal if only one left, or if 0 dimensions are okay).",
            "**Event Listener Cleanup (Implicit)**: While `innerHTML = ''` handles removal of old listeners, reflect on why explicit `removeEventListener` might be needed in other granular update scenarios."
          ],
          "hints": [
            "Pay close attention to how you pass `rowIndex` and `colIndex` to `removeRow` and `removeColumn` from within the loops in `render()`. If not handled carefully (e.g., using `let` for loop variables or an Immediately Invoked Function Expression - IIFE for closures), the `rowIndex` and `colIndex` inside the event listener might refer to the final value of the loop variable, not the value at the time the listener was attached.",
            "The `update()` method is crucial. Every time `this.data` dimensions change (via `addRow`, `addColumn`, `removeRow`, `removeColumn`), `update()` must be called to redraw the table.",
            "Use `dataset` attributes (e.g., `input.dataset.row = r; input.dataset.col = c;`) to store the row and column index directly on the input elements. This makes it easy to retrieve them in the `input` event listener (`e.target.dataset.row`). Remember to parse them to integers when using them as array indices (`parseInt(e.target.dataset.row)`).",
            "The `String.fromCharCode(65 + c)` trick is handy for generating alphabetical column headers (A, B, C...).",
            "Ensure your 'Add Row' button is placed correctly to span across the existing columns for good visual alignment."
          ],
          "tags": [
            "Vanilla JS",
            "DOM Manipulation",
            "Classes",
            "Event Handling",
            "Frontend",
            "UI Components"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "HTML",
            "CSS",
            "JavaScript Fundamentals",
            "DOM API",
            "Object-Oriented JavaScript"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Event Delegation",
            "Performance Optimization",
            "Single Responsibility Principle"
          ]
        },
        {
          "id": "task_implement_react_search_autocomplete",
          "title": "Build a React User Search with Autocomplete & Accessibility",
          "description": "Implement a `UserSearch` React functional component that provides a robust real-time search experience, an autocomplete-like dropdown, full keyboard navigation, and proper accessibility attributes.\n\n**Detailed Requirements:**\n1.  **Search Input**: A controlled text input field (`<input type=\"text\">`) to capture the user's search query.\n2.  **Sample Data**: Use the provided `users` array as the data source for the search.\n3.  **Real-time Filtering**: As the user types, filter the `users` array. The search should be case-insensitive and search across multiple user fields: `name`, items in `purchased` array, `address`, and `zipCode`.\n4.  **Autocomplete Dropdown**: Display the matching `searchResults` in a dropdown list (`<ul><li>`) immediately below the input. The dropdown should:\n    *   Only appear when the `searchTerm` is not empty and there are `searchResults`.\n    *   Show a 'No results found.' message if the `searchTerm` is not empty but `searchResults` is empty.\n5.  **Keyboard Navigation**: Implement comprehensive keyboard support within the dropdown:\n    *   `ArrowDown`: Move the `selectedIndex` down. The selection should wrap from the last item to the first item.\n    *   `ArrowUp`: Move the `selectedIndex` up. The selection should wrap from the first item to the last item.\n    *   `Enter`: If an item is selected, log the full selected `user` object to the console. Update the input field's value to the selected user's `name`. Close the dropdown.\n    *   `Escape`: Close the dropdown.\n    *   Crucially, `preventDefault()` for `ArrowDown`, `ArrowUp`, and `Enter` keys to stop default browser behavior (e.g., page scrolling or form submission).\n6.  **Visual Highlighting & Scroll**: Visually highlight the currently `selectedIndex` item in the dropdown. Ensure the highlighted item automatically scrolls into view if it's outside the visible area of the dropdown (use `scrollIntoView`).\n7.  **Click Outside Close**: The dropdown must close if the user clicks anywhere on the document outside the search input field and the results dropdown itself.\n8.  **Accessibility (ARIA)**: Apply relevant ARIA attributes to the input and dropdown elements to ensure screen reader compatibility and adherence to accessibility standards. These include, but are not limited to, `role`, `aria-autocomplete`, `aria-controls`, `aria-expanded`, and `aria-activedescendant`.\n9.  **Performance Enhancement**: Implement **debouncing** for the search input. The search filtering logic (or API call in a real app) should only execute after the user has stopped typing for a brief delay (e.g., 300ms) to avoid excessive re-renders/computations.\n\nYour solution should be presented as a single React functional component.",
          "difficulty": "hard",
          "startingCode": "import React, { useState, useEffect, useRef, useCallback } from 'react';\n\nconst users = [\n  { id: 1, name: 'John Smith', purchased: ['Laptop', 'Mouse'], \n    address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Sarah Johnson', purchased: ['Phone', 'Headphones'], \n    address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'David Lee', purchased: ['Keyboard', 'Monitor'], \n    address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Emily White', purchased: ['Tablet', 'Smartwatch'], \n    address: '101 Cedar Rd', zipCode: '40004' },\n  { id: 5, name: 'Michael Brown', purchased: ['Camera', 'Tripod'], \n    address: '202 Birch Dr', zipCode: '50005' },\n  { id: 6, name: 'Olivia Taylor', purchased: ['Webcam', 'Microphone'], \n    address: '303 Elm Ct', zipCode: '60006' },\n  { id: 7, name: 'Daniel Miller', purchased: ['Monitor Arm', 'Desk Mat'], \n    address: '404 Willow Way', zipCode: '70007' }\n];\n\n// Custom hook for debouncing a value\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nfunction UserSearch() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(-1); // -1 for no selection initially\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  \n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n  const dropdownId = 'user-search-results'; // For ARIA attributes\n\n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n\n  // Search logic based on debounced term\n  useEffect(() => {\n    if (debouncedSearchTerm.trim()) {\n      const lowerCaseQuery = debouncedSearchTerm.toLowerCase();\n      const filtered = users.filter(user => {\n        const nameMatch = user.name.toLowerCase().includes(lowerCaseQuery);\n        const purchasedMatch = user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery));\n        const addressMatch = user.address.toLowerCase().includes(lowerCaseQuery);\n        const zipCodeMatch = user.zipCode.includes(lowerCaseQuery);\n        return nameMatch || purchasedMatch || addressMatch || zipCodeMatch;\n      });\n      setSearchResults(filtered);\n      setSelectedIndex(filtered.length > 0 ? 0 : -1); // Auto-select first if results exist\n      setIsDropdownOpen(filtered.length > 0);\n    } else {\n      setSearchResults([]);\n      setSelectedIndex(-1);\n      setIsDropdownOpen(false);\n    }\n  }, [debouncedSearchTerm]);\n\n  // Keyboard navigation logic\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (!isDropdownOpen || searchResults.length === 0) return;\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prevIndex => (prevIndex + 1) % searchResults.length);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prevIndex => (prevIndex - 1 + searchResults.length) % searchResults.length);\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (selectedIndex !== -1 && selectedIndex < searchResults.length) {\n            const selectedUser = searchResults[selectedIndex];\n            console.log('Selected user:', selectedUser);\n            setSearchTerm(selectedUser.name);\n            setIsDropdownOpen(false);\n            searchInputRef.current?.focus();\n          }\n          break;\n        case 'Escape':\n          setIsDropdownOpen(false);\n          searchInputRef.current?.focus();\n          break;\n        default:\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [searchResults, selectedIndex, isDropdownOpen]);\n\n  // Scroll selected item into view\n  useEffect(() => {\n    if (resultsContainerRef.current && selectedIndex !== -1) {\n      const selectedElement = resultsContainerRef.current.children[selectedIndex];\n      if (selectedElement) {\n        selectedElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    }\n  }, [selectedIndex, searchResults]);\n\n  // Close dropdown on click outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (searchInputRef.current && !searchInputRef.current.contains(event.target) &&\n          resultsContainerRef.current && !resultsContainerRef.current.contains(event.target)) {\n        setIsDropdownOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <div style={{ position: 'relative', width: '400px', margin: '50px auto', fontFamily: 'Arial, sans-serif' }}>\n      <input\n        type=\"text\"\n        placeholder=\"Search for users...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        onFocus={() => setIsDropdownOpen(searchTerm.trim().length > 0 && searchResults.length > 0)}\n        ref={searchInputRef}\n        id=\"user-search-input\"\n        role=\"combobox\"\n        aria-autocomplete=\"list\"\n        aria-controls={dropdownId}\n        aria-expanded={isDropdownOpen}\n        aria-activedescendant={selectedIndex !== -1 ? `result-item-${searchResults[selectedIndex]?.id}` : undefined}\n        style={{ width: '100%', padding: '10px', fontSize: '16px', border: '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }}\n      />\n      {isDropdownOpen && searchResults.length > 0 && (\n        <ul\n          id={dropdownId}\n          ref={resultsContainerRef}\n          role=\"listbox\"\n          style={{\n            listStyle: 'none',\n            padding: '0',\n            margin: '5px 0 0 0',\n            border: '1px solid #ddd',\n            maxHeight: '250px',\n            overflowY: 'auto',\n            position: 'absolute',\n            width: '100%',\n            zIndex: 1000,\n            backgroundColor: 'white',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            borderRadius: '4px'\n          }}\n        >\n          {searchResults.map((user, index) => (\n            <li\n              key={user.id}\n              id={`result-item-${user.id}`}\n              role=\"option\"\n              aria-selected={index === selectedIndex}\n              className={index === selectedIndex ? 'selected' : ''}\n              onClick={() => {\n                console.log('Clicked user:', user);\n                setSearchTerm(user.name);\n                setIsDropdownOpen(false);\n              }}\n              style={{\n                padding: '12px',\n                cursor: 'pointer',\n                borderBottom: '1px solid #eee',\n                backgroundColor: index === selectedIndex ? '#f0f0f0' : 'white',\n                transition: 'background-color 0.1s ease'\n              }}\n            >\n              <strong>{user.name}</strong> ({user.zipCode})<br/>\n              <small>{user.address}</small><br/>\n              <small>Purchased: {user.purchased.join(', ')}</small>\n            </li>\n          ))}\n        </ul>\n      )}\n      {isDropdownOpen && searchResults.length === 0 && searchTerm.trim().length > 0 && (\n        <div style={{\n          padding: '12px',\n          border: '1px solid #ddd',\n          marginTop: '5px',\n          backgroundColor: 'white',\n          boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n          borderRadius: '4px'\n        }}>No results found.</div>\n      )}\n    </div>\n  );\n}\n\nexport default UserSearch;",
          "solutionCode": "import React, { useState, useEffect, useRef, useCallback } from 'react';\n\nconst users = [\n  { id: 1, name: 'John Smith', purchased: ['Laptop', 'Mouse'], \n    address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Sarah Johnson', purchased: ['Phone', 'Headphones'], \n    address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'David Lee', purchased: ['Keyboard', 'Monitor'], \n    address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Emily White', purchased: ['Tablet', 'Smartwatch'], \n    address: '101 Cedar Rd', zipCode: '40004' },\n  { id: 5, name: 'Michael Brown', purchased: ['Camera', 'Tripod'], \n    address: '202 Birch Dr', zipCode: '50005' },\n  { id: 6, name: 'Olivia Taylor', purchased: ['Webcam', 'Microphone'], \n    address: '303 Elm Ct', zipCode: '60006' },\n  { id: 7, name: 'Daniel Miller', purchased: ['Monitor Arm', 'Desk Mat'], \n    address: '404 Willow Way', zipCode: '70007' },\n  { id: 8, name: 'Jessica Davis', purchased: ['Printer', 'Ink'], \n    address: '505 Poplar Blvd', zipCode: '80008' },\n  { id: 9, name: 'Chris Wilson', purchased: ['External Drive', 'USB Hub'], \n    address: '606 Maple Dr', zipCode: '90009' },\n  { id: 10, name: 'Amanda Green', purchased: ['Router', 'Ethernet Cable'], \n    address: '707 Spruce Ln', zipCode: '10010' }\n];\n\n// Custom hook for debouncing a value\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nfunction UserSearch() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(-1); // -1 for no selection initially\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  \n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n  const dropdownId = 'user-search-results'; // For ARIA attributes\n\n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n\n  // Search logic memoized with useCallback (users array is stable here)\n  const performSearch = useCallback((query) => {\n    if (!query.trim()) return [];\n    const lowerCaseQuery = query.toLowerCase();\n    \n    return users.filter(user => {\n      const nameMatch = user.name.toLowerCase().includes(lowerCaseQuery);\n      const purchasedMatch = user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery));\n      const addressMatch = user.address.toLowerCase().includes(lowerCaseQuery);\n      const zipCodeMatch = user.zipCode.includes(lowerCaseQuery);\n      return nameMatch || purchasedMatch || addressMatch || zipCodeMatch;\n    });\n  }, [users]); // 'users' is stable, but include if it could change\n\n  // Effect to perform search when debounced term changes\n  useEffect(() => {\n    const filtered = performSearch(debouncedSearchTerm);\n    setSearchResults(filtered);\n    setSelectedIndex(filtered.length > 0 ? 0 : -1); // Auto-select first if results exist\n    setIsDropdownOpen(debouncedSearchTerm.trim().length > 0 && filtered.length > 0); // Open if term and results\n  }, [debouncedSearchTerm, performSearch]);\n\n  // Keyboard navigation logic\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (!isDropdownOpen || searchResults.length === 0) return;\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prevIndex => (prevIndex + 1) % searchResults.length);\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prevIndex => (prevIndex - 1 + searchResults.length) % searchResults.length);\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (selectedIndex !== -1 && selectedIndex < searchResults.length) {\n            const selectedUser = searchResults[selectedIndex];\n            console.log('Selected user:', selectedUser);\n            setSearchTerm(selectedUser.name); // Update input field with selected name\n            setIsDropdownOpen(false); // Close dropdown\n            searchInputRef.current?.focus(); // Return focus to input for continued typing\n          }\n          break;\n        case 'Escape':\n          setIsDropdownOpen(false);\n          searchInputRef.current?.focus(); // Return focus to input\n          break;\n        default:\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [searchResults, selectedIndex, isDropdownOpen]);\n\n  // Scroll selected item into view\n  useEffect(() => {\n    if (resultsContainerRef.current && selectedIndex !== -1) {\n      const selectedElement = resultsContainerRef.current.children[selectedIndex];\n      if (selectedElement) {\n        selectedElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'nearest'\n        });\n      }\n    }\n  }, [selectedIndex, searchResults]); // Dependency on searchResults ensures it runs if results change while an item is selected\n\n  // Close dropdown on click outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (searchInputRef.current && !searchInputRef.current.contains(event.target) &&\n          resultsContainerRef.current && !resultsContainerRef.current.contains(event.target)) {\n        setIsDropdownOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <div style={{ position: 'relative', width: '400px', margin: '50px auto', fontFamily: 'Arial, sans-serif' }}>\n      <input\n        type=\"text\"\n        placeholder=\"Search for users...\"\n        value={searchTerm}\n        onChange={(e) => setSearchTerm(e.target.value)}\n        onFocus={() => setIsDropdownOpen(searchTerm.trim().length > 0 && searchResults.length > 0)}\n        ref={searchInputRef}\n        id=\"user-search-input\"\n        role=\"combobox\"\n        aria-autocomplete=\"list\"\n        aria-controls={dropdownId}\n        aria-expanded={isDropdownOpen}\n        // aria-activedescendant points to the ID of the currently selected option\n        aria-activedescendant={selectedIndex !== -1 && isDropdownOpen && searchResults[selectedIndex] ? `result-item-${searchResults[selectedIndex].id}` : undefined}\n        style={{ width: '100%', padding: '10px', fontSize: '16px', border: '1px solid #ccc', borderRadius: '4px', boxSizing: 'border-box' }}\n      />\n      {isDropdownOpen && searchResults.length > 0 && (\n        <ul\n          id={dropdownId}\n          ref={resultsContainerRef}\n          role=\"listbox\"\n          style={{\n            listStyle: 'none',\n            padding: '0',\n            margin: '5px 0 0 0',\n            border: '1px solid #ddd',\n            maxHeight: '250px',\n            overflowY: 'auto',\n            position: 'absolute',\n            width: '100%',\n            zIndex: 1000,\n            backgroundColor: 'white',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n            borderRadius: '4px'\n          }}\n        >\n          {searchResults.map((user, index) => (\n            <li\n              key={user.id}\n              id={`result-item-${user.id}`}\n              role=\"option\"\n              aria-selected={index === selectedIndex}\n              className={index === selectedIndex ? 'selected' : ''}\n              onClick={() => {\n                console.log('Clicked user:', user);\n                setSearchTerm(user.name);\n                setIsDropdownOpen(false);\n                searchInputRef.current?.focus(); // Return focus to input on click\n              }}\n              style={{\n                padding: '12px',\n                cursor: 'pointer',\n                borderBottom: '1px solid #eee',\n                backgroundColor: index === selectedIndex ? '#f0f0f0' : 'white',\n                transition: 'background-color 0.1s ease'\n              }}\n            >\n              <strong>{user.name}</strong> ({user.zipCode})<br/>\n              <small>{user.address}</small><br/>\n              <small>Purchased: {user.purchased.join(', ')}</small>\n            </li>\n          ))}\n        </ul>\n      )}\n      {isDropdownOpen && searchResults.length === 0 && searchTerm.trim().length > 0 && (\n        <div style={{\n          padding: '12px',\n          border: '1px solid #ddd',\n          marginTop: '5px',\n          backgroundColor: 'white',\n          boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n          borderRadius: '4px'\n        }}>No results found.</div>\n      )}\n    </div>\n  );\n}\n\nexport default UserSearch;",
          "testCases": [
            "**Basic Search**: Type 'john' in the input. Verify 'John Smith' appears in the dropdown. Type 'ph'. Verify 'Sarah Johnson' appears. Type 'laptop'. Verify 'John Smith' appears. Type '10001'. Verify 'John Smith' appears.",
            "**Debouncing**: Type a sequence of characters quickly (e.g., 'micr'). Observe that the search results update only after a short pause, not on every single character. You can add a `console.count('Search performed')` inside your `performSearch` function to verify this.",
            "**Keyboard Navigation - ArrowDown**: With results displayed, press `ArrowDown` repeatedly. Verify the highlighted item moves down the list, wrapping from the last item back to the first. Ensure the browser doesn't scroll the page.",
            "**Keyboard Navigation - ArrowUp**: With results displayed, press `ArrowUp` repeatedly. Verify the highlighted item moves up the list, wrapping from the first item back to the last. Ensure the browser doesn't scroll the page.",
            "**Keyboard Navigation - Scroll into View**: If the results list is long and scrollable, navigate using arrow keys. Verify that the highlighted item automatically scrolls into the visible area of the dropdown when it goes out of view.",
            "**Keyboard Navigation - Enter Selection**: Navigate to an item (e.g., 'David Lee'). Press `Enter`. Verify 'David Lee' is logged to the console, the input field updates to 'David Lee', and the dropdown closes.",
            "**Keyboard Navigation - Escape**: With the dropdown open, press `Escape`. Verify the dropdown closes.",
            "**Dropdown Visibility**: \n    *   Start with an empty input: Dropdown should be hidden.\n    *   Type 'abc' (no match): Dropdown should be open showing 'No results found.'.\n    *   Delete all text from input: Dropdown should close.\n    *   Click input to focus, then click outside: Dropdown should close.",
            "**Accessibility (ARIA)**: Use browser developer tools (e.g., Chrome's Accessibility tab) to inspect the search input and dropdown elements. Verify that `role=\"combobox\"`, `aria-autocomplete=\"list\"`, `aria-controls=\"user-search-results\"`, `aria-expanded=\"true\"`/`\"false\"`, `aria-activedescendant=\"result-item-X\"` (where X is the ID of the selected item) are dynamically present and correct on the input. Verify `role=\"listbox\"` on the `<ul>` and `role=\"option\"` and `aria-selected=\"true\"`/`\"false\"` on the `<li>` items.",
            "**Click Outside**: Click inside the input, then click a blank area of the page. The dropdown should hide."
          ],
          "hints": [
            "Start by implementing the `useDebounce` hook, as it's fundamental to the performance requirement.",
            "Your main search `useEffect` should depend on the `debouncedSearchTerm`. Use `useCallback` for your `performSearch` function if `users` array is mutable, or if it has other changing dependencies, to avoid unnecessary re-creations.",
            "For keyboard navigation, attach the `keydown` event listener to `window` or `document`. Remember to return a cleanup function from `useEffect` to remove the event listener when the component unmounts to prevent memory leaks.",
            "The modulo operator (`%`) is useful for handling wrap-around logic for `selectedIndex` (`(prevIndex + 1) % length` and `(prevIndex - 1 + length) % length` for negative results).",
            "`scrollIntoView({ behavior: 'smooth', block: 'nearest' })` is a powerful method available on DOM elements for programmatic scrolling.",
            "Ensure unique `id` attributes for each list item (`<li id={`result-item-${user.id}`}>`) to correctly link them via `aria-activedescendant` on the input.",
            "Think about `selectedIndex` initialization. If `searchResults` are available, `selectedIndex` should ideally start at `0` to pre-select the first item. If no results, it should be `-1`."
          ],
          "tags": [
            "React",
            "Hooks",
            "Accessibility",
            "Performance",
            "Frontend Development",
            "UI/UX",
            "Complex Forms"
          ],
          "timeEstimate": 180,
          "prerequisites": [
            "theory_react_user_search_interface",
            "React Hooks",
            "JavaScript ES6+",
            "DOM Events"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Controlled Components",
            "Custom Hooks",
            "Functional Programming",
            "Web Accessibility Guidelines"
          ]
        }
      ]
    }
  },
  {
    "id": "fc01bbfd-4217-41a5-8f6b-34fe201ee2b4",
    "startLine": 16700,
    "endLine": 16799,
    "processedDate": "2025-06-17T15:32:50.188Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_state_and_hooks",
          "title": "React State Management and Essential Hooks (`useState`, `useEffect`, `useRef`)",
          "content": "This section covers the fundamental React Hooks (`useState`, `useEffect`, `useRef`) as demonstrated in the provided search component. These hooks are crucial for managing component state, handling side effects, and directly interacting with the DOM.\n\n## `useState` Hook\n`useState` is a React Hook that lets you add state variables to your functional components. It returns a pair: the current state value and a function that lets you update it. When the state updater function is called, React re-renders the component.\n\n**Syntax:** `const [state, setState] = useState(initialState);`\n\n*   `state`: The current value of the state.\n*   `setState`: A function to update the state. It can accept a new value directly or a function that receives the previous state and returns the new state (useful for updates based on previous state).\n*   `initialState`: The initial value of the state variable.\n\nIn the provided code, `searchTerm`, `searchResults`, `selectedIndex`, and `isDropdownOpen` are all managed using `useState`, reflecting user input, search outcomes, UI navigation, and UI visibility.\n\n## `useEffect` Hook\n`useEffect` is a React Hook that lets you synchronize a component with an external system. It's commonly used for side effects like data fetching, subscriptions, or manually changing the DOM.\n\n**Syntax:** `useEffect(() => { /* side effect */ }, [dependencies]);`\n\n*   The first argument is a function containing the side effect logic.\n*   The second argument is an optional dependency array. If provided, the effect will only re-run if any value in the array changes. An empty array (`[]`) means the effect runs only once after the initial render (like `componentDidMount`). Omitting the array means the effect runs after every render.\n\nIn the example, `useEffect` is used to `scrollIntoView` the selected search result. This effect depends on `selectedIndex` and `isDropdownOpen`, ensuring the scrolling happens only when the dropdown is open and the selected item changes.\n\n## `useRef` Hook\n`useRef` is a React Hook that lets you reference a value that's not needed for rendering. It's often used to access a DOM element directly or to persist a mutable value across renders without causing re-renders when it changes.\n\n**Syntax:** `const ref = useRef(initialValue);`\n\n*   It returns a mutable `ref` object whose `.current` property is initialized to the passed `initialValue`.\n*   The `ref.current` property can be updated directly, and these updates do not trigger re-renders.\n\nIn the provided code, `searchInputRef` is used to directly reference the input element, and `resultsContainerRef` is used for the results container, enabling imperative DOM manipulations like `scrollIntoView`.\n\n### Relationship Between Hooks and Component Lifecycle\nWhile hooks don't directly map to lifecycle methods, they provide equivalent functionality:\n*   **Mounting:** `useEffect(() => {}, [])`\n*   **Updating:** `useEffect(() => {}, [dependencies])`\n*   **Unmounting:** `useEffect(() => { return () => { /* cleanup */ }; }, [])` (The return function is the cleanup function.)",
          "examples": [
            {
              "id": "example_usestate_1",
              "title": "Basic useState Example",
              "code": "import React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n      <button onClick={() => setCount(prevCount => prevCount - 1)}>Decrement</button>\n    </div>\n  );\n}",
              "explanation": "This example demonstrates `useState` to manage a simple counter. `setCount(count + 1)` directly sets the new value, while `setCount(prevCount => prevCount - 1)` uses a functional update, which is safer when the new state depends on the previous state.",
              "language": "typescript"
            },
            {
              "id": "example_useeffect_useref_1",
              "title": "useEffect and useRef for Focus Management",
              "code": "import React, { useEffect, useRef } from 'react';\n\nfunction MyInput() {\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    // Focus the input element on component mount\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []); // Empty dependency array means this runs once on mount\n\n  return <input type=\"text\" ref={inputRef} placeholder=\"I will be focused!\" />;\n}",
              "explanation": "This example shows `useRef` to get a direct reference to a DOM input element. `useEffect` then uses this ref to call the `focus()` method on the input element once the component mounts.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_usestate_functional_update_mcq",
            "question_useeffect_dependencies_mcq",
            "question_useref_purpose_flashcard",
            "question_state_vs_ref_open"
          ],
          "relatedTasks": [
            "task_refactor_usestate_toreducer",
            "task_implement_debounced_search"
          ],
          "tags": [
            "React",
            "Hooks",
            "State Management",
            "useEffect",
            "useState",
            "useRef"
          ],
          "technology": "React",
          "prerequisites": [
            "JavaScript_basics",
            "DOM_manipulation_basics",
            "Functional_programming_concepts"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Complex_UI_development",
            "Custom_hooks",
            "Performance_optimization_in_React"
          ]
        },
        {
          "id": "theory_event_handling_and_keyboard_navigation",
          "title": "React Event Handling and Keyboard Navigation",
          "content": "This section details how React handles events and specifically focuses on implementing robust keyboard navigation, which is critical for accessibility in interactive components like search autocomplete or dropdowns.\n\n## React Event System\nReact uses a synthetic event system that wraps browser's native events. This system provides a consistent cross-browser API for events and also enables event delegation for performance optimization.\n\nKey event handlers used in the example:\n*   `onChange`: Fired when the value of an input element changes.\n*   `onKeyDown`: Fired when a key is pressed down.\n*   `onClick`: Fired when an element is clicked.\n*   `onMouseEnter`: Fired when the pointer is moved onto an element.\n*   `onFocus`: Fired when an element receives focus.\n\nThe event object (`e`) passed to event handlers is a synthetic event. It has properties like `e.target` (the DOM element that triggered the event), `e.target.value` (for input elements), and `e.key` (for keyboard events).\n\n## Keyboard Navigation\nThe provided component implements keyboard navigation for its search results dropdown, which is a key accessibility feature. This involves:\n\n1.  **Detecting Key Presses**: Using the `onKeyDown` event handler.\n2.  **Identifying Specific Keys**: Checking `e.key` property (e.g., `'ArrowDown'`, `'ArrowUp'`, `'Enter'`, `'Escape'`)\n3.  **Preventing Default Behavior**: Calling `e.preventDefault()` to stop the browser's default action for certain keys (e.g., preventing arrow keys from scrolling the page).\n4.  **Updating State Based on Key**: Modifying `selectedIndex` for arrow keys, or triggering an action for `Enter` (selection) or `Escape` (closing dropdown).\n5.  **Conditional Execution**: Ensuring keyboard navigation only works when the dropdown is open (`if (!isDropdownOpen) return;`).\n\nThis robust keyboard handling ensures users can navigate and select items without a mouse, significantly improving usability and accessibility.",
          "examples": [
            {
              "id": "example_event_handling_1",
              "title": "Input Change and Key Press Handling",
              "code": "import React, { useState } from 'react';\n\nfunction InputLogger() {\n  const [text, setText] = useState('');\n\n  const handleChange = (e) => {\n    setText(e.target.value);\n    console.log('Input changed:', e.target.value);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'A') {\n      console.log('You pressed A!');\n    }\n    if (e.key === 'Enter') {\n      e.preventDefault(); // Prevents new line in a textarea\n      console.log('Enter pressed! Current text:', text);\n    }\n  };\n\n  return (\n    <input\n      type=\"text\"\n      value={text}\n      onChange={handleChange}\n      onKeyDown={handleKeyPress}\n      placeholder=\"Type something...\"\n    />\n  );\n}",
              "explanation": "This example demonstrates `onChange` to capture input value changes and `onKeyDown` to react to specific key presses. It also shows `e.preventDefault()` to stop the browser's default behavior for the 'Enter' key in a text input.",
              "language": "typescript"
            },
            {
              "id": "example_keyboard_nav_scroll_1",
              "title": "Simplified Keyboard Navigation with Scrolling",
              "code": "import React, { useState, useEffect, useRef } from 'react';\n\nfunction ListNavigator({ items }) {\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const listRef = useRef(null);\n\n  useEffect(() => {\n    if (listRef.current && selectedIndex !== -1) {\n      const selectedElement = listRef.current.children[selectedIndex];\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, items]);\n\n  const handleKeyDown = (e) => {\n    if (items.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev < items.length - 1) ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0) ? prev - 1 : 0);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex !== -1) {\n          console.log('Selected:', items[selectedIndex]);\n        }\n        break;\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div onKeyDown={handleKeyDown} tabIndex={0} style={{ outline: 'none' }}>\n      <ul ref={listRef} style={{ height: '150px', overflowY: 'auto', border: '1px solid gray' }}>\n        {items.map((item, index) => (\n          <li\n            key={item.id || index}\n            style={{\n              padding: '8px',\n              background: index === selectedIndex ? '#eee' : 'transparent'\n            }}\n          >\n            {item.name || item}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nconst sampleItems = [\n  { id: 1, name: 'Apple' },\n  { id: 2, name: 'Banana' },\n  { id: 3, name: 'Cherry' },\n  { id: 4, name: 'Date' },\n  { id: 5, name: 'Elderberry' },\n  { id: 6, name: 'Fig' }\n];\n\n// Usage:\n// <ListNavigator items={sampleItems} />",
              "explanation": "This example showcases how `onKeyDown` and `useEffect` work together for keyboard navigation within a scrollable list. `setSelectedIndex` updates the active item, and `useEffect` then ensures the selected item is brought into view using `scrollIntoView`.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_event_object_properties_mcq",
            "question_preventdefault_open",
            "question_keyboard_nav_best_practices_open",
            "question_arrow_keys_flashcard"
          ],
          "relatedTasks": [
            "task_add_aria_attributes",
            "task_implement_debounced_search"
          ],
          "tags": [
            "React",
            "Event Handling",
            "Keyboard Navigation",
            "Accessibility",
            "UI/UX"
          ],
          "technology": "React",
          "prerequisites": [
            "HTML_events",
            "JavaScript_DOM_events",
            "React_components"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Accessible_component_development",
            "Interactive_UI_patterns"
          ]
        },
        {
          "id": "theory_search_filtering_and_list_rendering",
          "title": "Search, Filtering Logic, and Dynamic List Rendering",
          "content": "This section delves into the core logic of the search component: how data is filtered based on user input and how the filtered results are dynamically rendered as a list in React.\n\n## Search and Filtering Logic (`searchUsers` Function)\nThe `searchUsers` function is responsible for filtering a given list of `users` based on a `searchTerm`. It demonstrates several common JavaScript array and string methods:\n\n*   **`Array.prototype.filter()`**: This method creates a new array with all elements that pass the test implemented by the provided function. In the example, it's used to iterate over the `MOCK_USERS` array and select users matching the search criteria.\n*   **`String.prototype.toLowerCase()`**: Used for case-insensitive matching. Both the `searchTerm` and the user properties (name, address, purchased items) are converted to lowercase before comparison.\n*   **`String.prototype.includes()`**: This method determines whether one string may be found within another string, returning `true` or `false` as appropriate. It's used to check if the user's name, address, or zip code contains the `lowerCaseQuery`.\n*   **`Array.prototype.some()`**: This method tests whether at least one element in the array passes the test implemented by the provided function. It returns a boolean value. In the example, it's used to check if *any* of the `user.purchased` items include the search query.\n\nThe logic combines these methods to create a flexible search that looks across multiple user properties.\n\n## Dynamic List Rendering (`.map()`)\nReact components often need to display lists of data. In functional components, this is typically achieved using the `Array.prototype.map()` method in conjunction with JSX.\n\n*   **`Array.prototype.map()`**: This method creates a new array populated with the results of calling a provided function on every element in the calling array. In React, you `map` over an array of data and return a JSX element for each item.\n*   **`key` Prop**: When rendering a list of elements in React, it is crucial to provide a unique `key` prop for each item. The `key` helps React identify which items have changed, are added, or are removed, allowing it to efficiently update the UI. Without a stable `key`, React's reconciliation process can be inefficient and lead to bugs.\n    *   The `key` should be a stable and unique identifier for the item (e.g., `user.id`). Using an array index as a key (`index`) is generally discouraged if the list items can be reordered, added, or removed, as it can lead to performance issues and incorrect component state.\n\nThe example effectively uses `searchResults.map` to render `user-item` divs, assigning a unique `key` based on `user.id` and an `id` for direct DOM access (for `scrollIntoView`). Conditional CSS class (`selected`) is also applied based on `selectedIndex` for visual feedback.",
          "examples": [
            {
              "id": "example_filter_map_1",
              "title": "Filtering and Mapping Data",
              "code": "import React from 'react';\n\nconst products = [\n  { id: 1, name: 'Laptop', category: 'Electronics', price: 1200 },\n  { id: 2, name: 'Keyboard', category: 'Electronics', price: 75 },\n  { id: 3, name: 'Mouse', category: 'Electronics', price: 25 },\n  { id: 4, name: 'Desk Chair', category: 'Furniture', price: 300 },\n  { id: 5, name: 'Monitor', category: 'Electronics', price: 400 }\n];\n\nfunction ProductList({ query }) {\n  const filteredProducts = products.filter(product => \n    product.name.toLowerCase().includes(query.toLowerCase())\n  );\n\n  return (\n    <div>\n      <h2>Products:</h2>\n      {filteredProducts.length > 0 ? (\n        <ul>\n          {filteredProducts.map(product => (\n            <li key={product.id}>\n              {product.name} ({product.category}) - ${product.price}\n            </li>\n          ))}\n        </ul>\n      ) : (\n        <p>No products found for \"{query}\"</p>\n      )}\n    </div>\n  );\n}\n\n// Usage:\n// <ProductList query=\"lap\" />\n// <ProductList query=\"e\" />\n// <ProductList query=\"xyz\" />",
              "explanation": "This example demonstrates filtering a list of `products` based on a search `query` using `filter()` and then rendering the `filteredProducts` using `map()`. It also shows conditional rendering for when no results are found and the importance of the `key` prop.",
              "language": "typescript"
            },
            {
              "id": "example_array_some_1",
              "title": "Using Array.some() for Conditional Checks",
              "code": "const tags = ['react', 'javascript', 'frontend', 'hooks'];\n\nfunction hasSpecificTag(tagList, specificTag) {\n  return tagList.some(tag => tag === specificTag);\n}\n\nconsole.log(hasSpecificTag(tags, 'react'));     // true\nconsole.log(hasSpecificTag(tags, 'angular'));    // false\n\nconst userPermissions = ['admin', 'edit_posts', 'view_dashboard'];\n\nfunction canUserPerformAction(userPermissions, requiredPermission) {\n  return userPermissions.some(permission => permission === requiredPermission);\n}\n\nconsole.log(canUserPerformAction(userPermissions, 'admin')); // true\nconsole.log(canUserPerformAction(userPermissions, 'delete_users')); // false",
              "explanation": "This example illustrates the `Array.prototype.some()` method. It's useful when you need to check if at least one element in an array satisfies a given condition, returning `true` as soon as a match is found, or `false` otherwise.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_array_filter_mcq",
            "question_string_includes_flashcard",
            "question_map_key_importance_open",
            "question_array_some_use_case_mcq"
          ],
          "relatedTasks": [
            "task_enhance_search_function",
            "task_refactor_usestate_toreducer"
          ],
          "tags": [
            "JavaScript",
            "Arrays",
            "String Methods",
            "React",
            "List Rendering",
            "Filtering",
            "Search"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "JavaScript_arrays",
            "JavaScript_strings",
            "ES6_arrow_functions"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Data_manipulation",
            "Dynamic_UI",
            "Search_components"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_usestate_functional_update_mcq",
          "topic": "React useState Hook",
          "level": "easy",
          "type": "mcq",
          "question": "Given the following React state update for `selectedIndex`:\n```javascript\nsetSelectedIndex(prev => (prev < searchResults.length - 1) ? prev + 1 : prev);\n```\nWhat is the primary reason for using the functional update form (`prev => ...`) instead of directly `setSelectedIndex(selectedIndex + 1)`?",
          "answer": "To ensure the update uses the most recent state, especially in asynchronous updates or when multiple updates are batched.",
          "options": [
            "It is syntactically shorter and more readable.",
            "It automatically prevents component re-renders.",
            "To ensure the update uses the most recent state, especially in asynchronous updates or when multiple updates are batched.",
            "It allows for direct modification of the previous state object."
          ],
          "analysisPoints": [
            "Functional updates receive the previous state as an argument, guaranteeing that the update is based on the most current state value.",
            "This is particularly important in scenarios where state updates might be batched or asynchronous, preventing stale closures.",
            "Direct updates like `setCount(count + 1)` can lead to incorrect state when React batches updates or when `count` is captured from an earlier render scope."
          ],
          "keyConcepts": [
            "React useState",
            "Functional State Updates",
            "Asynchronous State Updates",
            "State Batching"
          ],
          "evaluationCriteria": [
            "Understanding of useState's functional update mechanism.",
            "Awareness of potential issues with direct state updates.",
            "Knowledge of React's state update behavior."
          ],
          "example": "```javascript\nimport React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  const handleClick = () => {\n    // If this is called multiple times quickly, \n    // using 'count + 1' might use a stale 'count' value.\n    // Using 'prevCount => prevCount + 1' ensures each update\n    // is based on the latest available state.\n    setCount(prevCount => prevCount + 1);\n  };\n\n  return <button onClick={handleClick}>Increment {count}</button>;\n}\n```",
          "tags": [
            "React",
            "useState",
            "Hooks",
            "State Management",
            "Best Practices"
          ],
          "prerequisites": [
            "React_functional_components",
            "JavaScript_arrow_functions"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_useeffect_dependencies_mcq",
          "topic": "React useEffect Hook",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following `useEffect` hook from the component:\n```javascript\nuseEffect(() => {\n  if (isDropdownOpen && resultsContainerRef.current) {\n    const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n    if (selectedElement) {\n      selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n    }\n  }\n}, [selectedIndex, isDropdownOpen]);\n```\nWhat would be the effect if `isDropdownOpen` was removed from the dependency array, making it `[selectedIndex]`?",
          "answer": "The scroll effect would run whenever `selectedIndex` changes, even if `isDropdownOpen` is false, potentially causing errors or unexpected behavior.",
          "options": [
            "The effect would only run once on component mount.",
            "The scroll effect would run whenever `selectedIndex` changes, even if `isDropdownOpen` is false, potentially causing errors or unexpected behavior.",
            "The component would enter an infinite re-render loop.",
            "The `resultsContainerRef.current` would always be null."
          ],
          "analysisPoints": [
            "Dependencies in `useEffect` control when the effect re-runs. If a value used inside the effect (like `isDropdownOpen`) is not in the dependency array, the effect might 'see' a stale value from a previous render.",
            "In this specific case, if `isDropdownOpen` is omitted, the `if (isDropdownOpen && resultsContainerRef.current)` check inside the effect would use the `isDropdownOpen` value from the render when the effect was initially set up, not its current value.",
            "This means if `selectedIndex` changes while `isDropdownOpen` is `false`, the effect would still execute its body with the potentially stale `isDropdownOpen` value, leading to the `if` condition evaluating based on the stale state, or if the initial `isDropdownOpen` was true, the scroll logic attempting to run even when it should not."
          ],
          "keyConcepts": [
            "React useEffect",
            "Dependency Array",
            "Stale Closures",
            "Side Effects"
          ],
          "evaluationCriteria": [
            "Understanding of `useEffect`'s dependency array.",
            "Ability to predict the impact of missing dependencies.",
            "Knowledge of how `useEffect` interacts with state changes."
          ],
          "example": "```javascript\nimport React, { useState, useEffect } from 'react';\n\nfunction StaleStateExample() {\n  const [count, setCount] = useState(0);\n  const [isActive, setIsActive] = useState(true);\n\n  useEffect(() => {\n    // If isActive is not in dependencies, this effect will only 'see' the\n    // isActive value from the render it was set up in. If isActive changes later,\n    // this effect will still use the old isActive value when count changes.\n    console.log(`Count: ${count}, Is Active: ${isActive}`);\n  }, [count]); // Missing isActive in dependencies\n\n  return (\n    <div>\n      <button onClick={() => setCount(count + 1)}>Increment Count</button>\n      <button onClick={() => setIsActive(!isActive)}>Toggle Active ({String(isActive)})</button>\n    </div>\n  );\n}\n```",
          "tags": [
            "React",
            "useEffect",
            "Hooks",
            "Debugging",
            "Side Effects"
          ],
          "prerequisites": [
            "React_Hooks",
            "JavaScript_closures"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_useref_purpose_flashcard",
          "topic": "React useRef Hook",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of the `useRef` hook in React, as seen with `searchInputRef` and `resultsContainerRef`?",
          "answer": "To get a direct reference to a DOM element or to persist a mutable value across renders without causing re-renders.",
          "analysisPoints": [
            "Focus on its utility for imperative DOM manipulation (like `focus()` or `scrollIntoView`).",
            "Mention its use for storing mutable values that don't trigger re-renders, unlike `useState`."
          ],
          "keyConcepts": [
            "React useRef",
            "DOM References",
            "Imperative Programming",
            "Mutable Values"
          ],
          "evaluationCriteria": [
            "Basic understanding of `useRef`.",
            "Ability to distinguish it from `useState`.",
            "Recognition of its common use cases."
          ],
          "example": "```javascript\nimport React, { useRef, useEffect } from 'react';\n\nfunction AutoFocusInput() {\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  return <input ref={inputRef} type=\"text\" />;\n}\n```",
          "tags": [
            "React",
            "useRef",
            "Hooks",
            "DOM"
          ],
          "prerequisites": [
            "React_Hooks"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_state_vs_ref_open",
          "topic": "React State Management",
          "level": "medium",
          "type": "open",
          "question": "The search component uses `useState` for `searchTerm` (user's input) and `useRef` for `searchInputRef` (the input element itself). Explain the fundamental difference in when you would choose to use `useState` versus `useRef` in a React component, providing examples for each from the context of this search component.",
          "answer": "When to use `useState` vs. `useRef`:\n\n*   **`useState`**: Use `useState` when the value needs to trigger a re-render of the component whenever it changes. It's for data that impacts the component's UI output or flow.\n    *   **Example from component**: `searchTerm` (the text in the search input). When `searchTerm` changes, the component needs to re-render to reflect the new input value and update the search results. `searchResults`, `selectedIndex`, and `isDropdownOpen` also fall into this category because changes to them directly affect what the user sees.\n\n*   **`useRef`**: Use `useRef` when you need to store a mutable value that does *not* trigger a re-render when it changes, or when you need a direct reference to a DOM element. It's for values that persist across renders but whose changes don't inherently require a UI update.\n    *   **Example from component**: `searchInputRef` and `resultsContainerRef`. These refs are used to gain direct access to the underlying DOM elements. For example, to call `element.focus()` or `element.scrollIntoView()`. Changing the `.current` property of a ref does not cause the component to re-render, which is appropriate for these imperative DOM operations.",
          "analysisPoints": [
            "Clear distinction between re-rendering behavior.",
            "Appropriate examples from the provided code.",
            "Understanding of the core purpose of each hook.",
            "Ability to articulate use cases for each."
          ],
          "keyConcepts": [
            "React useState",
            "React useRef",
            "State Management",
            "DOM Manipulation",
            "Component Re-renders"
          ],
          "evaluationCriteria": [
            "Accuracy of definitions.",
            "Relevance and correctness of examples.",
            "Demonstration of conceptual understanding.",
            "Clarity and conciseness of explanation."
          ],
          "example": "```javascript\nimport React, { useState, useRef } from 'react';\n\nfunction StateVsRef() {\n  // State: Changes here cause re-renders, displayed in UI\n  const [message, setMessage] = useState('Hello');\n\n  // Ref: Changes here do NOT cause re-renders, used for direct DOM access or mutable non-UI values\n  const inputRef = useRef(null);\n\n  const handleChange = (e) => setMessage(e.target.value);\n  const handleFocusClick = () => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  return (\n    <div>\n      <input ref={inputRef} value={message} onChange={handleChange} />\n      <p>Current Message: {message}</p>\n      <button onClick={handleFocusClick}>Focus Input</button>\n    </div>\n  );\n}\n```",
          "tags": [
            "React",
            "Hooks",
            "useState",
            "useRef",
            "State Management"
          ],
          "prerequisites": [
            "React_Hooks"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_event_object_properties_mcq",
          "topic": "React Event Handling",
          "level": "easy",
          "type": "mcq",
          "question": "In the `handleInputChange` function, `e.target.value` is used to get the current value of the input field. If `handleKeyDown` also needed to know the current value of the input field, which property of the `e` (synthetic event) object would it use?",
          "answer": "`e.target.value`",
          "options": [
            "`e.key`",
            "`e.keyCode`",
            "`e.target.value`",
            "`e.value`"
          ],
          "analysisPoints": [
            "`e.target` refers to the DOM element on which the event occurred.",
            "For input elements, `e.target.value` consistently provides the current value.",
            "`e.key` is specific to keyboard events and indicates which key was pressed.",
            "`e.keyCode` is deprecated."
          ],
          "keyConcepts": [
            "React Synthetic Events",
            "Event Object Properties",
            "Input Event Handling",
            "Keyboard Event Handling"
          ],
          "evaluationCriteria": [
            "Understanding of common event object properties.",
            "Knowledge of how to access input values.",
            "Distinction between different event types."
          ],
          "example": "```javascript\nimport React, { useState } from 'react';\n\nfunction InputValueChecker() {\n  const [inputValue, setInputValue] = useState('');\n\n  const handleGenericEvent = (e) => {\n    console.log('Event target value:', e.target.value);\n    if (e.key) {\n      console.log('Key pressed:', e.key);\n    }\n  };\n\n  return (\n    <input\n      type=\"text\"\n      value={inputValue}\n      onChange={handleGenericEvent}\n      onKeyDown={handleGenericEvent}\n      placeholder=\"Type and press keys\"\n    />\n  );\n}\n```",
          "tags": [
            "React",
            "Event Handling",
            "DOM Events",
            "Input"
          ],
          "prerequisites": [
            "JavaScript_DOM_events"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_preventdefault_open",
          "topic": "React Event Handling and Accessibility",
          "level": "medium",
          "type": "open",
          "question": "The `handleKeyDown` function uses `e.preventDefault()` for `ArrowDown`, `ArrowUp`, `Enter`, and `Escape` keys. Explain why `e.preventDefault()` is crucial here and what would happen if it were omitted for these specific keys.",
          "answer": "`e.preventDefault()` is crucial in `handleKeyDown` to stop the browser's default behavior for certain keys, which would interfere with the custom keyboard navigation implemented for the search dropdown.\n\n*   **`ArrowDown` and `ArrowUp`**: Without `e.preventDefault()`, these keys would cause the browser to scroll the entire page up or down. This would conflict with the component's intended behavior of navigating through the search results list, leading to a confusing user experience where pressing an arrow key scrolls the page instead of changing the selected item.\n*   **`Enter`**: If `e.preventDefault()` is omitted for `Enter` on an input field within a form, it might submit the form. Even without an explicit form, some browsers might trigger a click on a default button or submit the current input value in unexpected ways. Preventing default ensures `Enter` only triggers the custom user selection logic (`handleSelectUser`).\n*   **`Escape`**: Depending on the context (e.g., if the input is part of a dialog or modal), `Escape` might close the entire dialog. In this search component, `e.preventDefault()` ensures that `Escape` specifically closes the dropdown, preventing any unintended side effects from browser defaults.",
          "analysisPoints": [
            "Understanding of `e.preventDefault()`'s purpose.",
            "Identification of specific browser default behaviors for common keys.",
            "Explanation of how these defaults conflict with custom UI logic.",
            "Emphasis on improving user experience and accessibility."
          ],
          "keyConcepts": [
            "Event Object",
            "e.preventDefault()",
            "Browser Default Behavior",
            "Keyboard Accessibility",
            "User Experience"
          ],
          "evaluationCriteria": [
            "Thorough explanation of `preventDefault`.",
            "Accurate description of consequences for each key.",
            "Connection to accessibility and UX.",
            "Clarity and detail."
          ],
          "example": "```javascript\nfunction handleInputKeyDown(e) {\n  if (e.key === 'Enter') {\n    e.preventDefault(); // Prevents form submission or new line in textareas\n    console.log('Enter pressed, default prevented.');\n  }\n  if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n    e.preventDefault(); // Prevents page scrolling\n    console.log(`Arrow key pressed: ${e.key}, default prevented.`);\n  }\n}\n\n// In JSX:\n// <input type=\"text\" onKeyDown={handleInputKeyDown} />\n```",
          "tags": [
            "JavaScript",
            "Event Handling",
            "Accessibility",
            "Frontend Development"
          ],
          "prerequisites": [
            "HTML_event_defaults"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_keyboard_nav_best_practices_open",
          "topic": "Keyboard Navigation and Accessibility",
          "level": "hard",
          "type": "open",
          "question": "Beyond the basic `ArrowUp`/`ArrowDown`/`Enter`/`Escape` handling shown, what other accessibility best practices or keyboard navigation features should a production-ready search autocomplete component implement? Discuss at least three, explaining their importance.",
          "answer": "A production-ready search autocomplete should implement several additional accessibility best practices:\n\n1.  **ARIA Attributes (Accessible Rich Internet Applications)**: These attributes provide semantic meaning to UI elements, making them understandable to assistive technologies (like screen readers). Essential ARIA attributes for an autocomplete include:\n    *   `role=\"combobox\"` on the input's container.\n    *   `aria-autocomplete=\"list\"` on the input.\n    *   `aria-controls=\"[ID_of_results_list]\"` on the input.\n    *   `aria-expanded=\"true\"` or `\"false\"` on the input to indicate dropdown visibility.\n    *   `aria-activedescendant=\"[ID_of_selected_item]\"` on the input, updated as `selectedIndex` changes, to inform screen readers which item is currently 'selected' by keyboard navigation.\n    *   `role=\"listbox\"` on the results container.\n    *   `role=\"option\"` on each result item.\n    *   **Importance**: These attributes are crucial for screen reader users to understand the component's purpose, its current state (e.g., is the dropdown open?), and how to interact with it, especially which item is currently highlighted.\n\n2.  **Focus Management (Tab and Shift+Tab)**: Users should be able to tab into the search input and then, with further tabs, move out of the component or to the next logical element on the page, or use `Shift+Tab` to go backward. Crucially, when the dropdown is open, pressing `Tab` should either select the currently highlighted item or move focus *into* the dropdown itself (e.g., to the first result), and `Shift+Tab` should move focus back to the input.\n    *   **Importance**: Ensures predictable and intuitive navigation flow for keyboard users, preventing them from getting 'trapped' within the component.\n\n3.  **Live Region (`aria-live`) for Search Status/No Results**: For dynamically updating content like search results, a 'live region' can inform screen readers about changes without explicitly moving focus. For example, when results load or when 'No results found' appears, this information can be conveyed.\n    *   **Importance**: Provides immediate feedback to screen reader users about the outcome of their search query, especially in cases of no results, improving confidence and usability.\n\n4.  **Click Outside/Focus Out Handling**: The dropdown should close when a user clicks outside the component or when the input loses focus (e.g., by tabbing away). While `Escape` handles explicit closing, this covers more general user interaction patterns.\n    *   **Importance**: Improves usability and prevents the UI from becoming cluttered with persistently open dropdowns.",
          "analysisPoints": [
            "Comprehensive coverage of advanced accessibility features.",
            "Specific ARIA attributes and their application.",
            "Detailed explanation of focus management strategies.",
            "Discussion of live regions for dynamic content.",
            "Justification for each feature's importance.",
            "Demonstration of a deeper understanding of frontend accessibility beyond basic keyboard events."
          ],
          "keyConcepts": [
            "Accessibility (A11y)",
            "ARIA Attributes",
            "Keyboard Navigation",
            "Focus Management",
            "Screen Readers",
            "Usability"
          ],
          "evaluationCriteria": [
            "Depth of knowledge on accessibility standards.",
            "Ability to propose practical, specific solutions.",
            "Understanding of the 'why' behind each recommendation.",
            "Structure and clarity of the answer."
          ],
          "example": "```jsx\n// Example of aria-activedescendant\n<input\n  ref={searchInputRef}\n  type=\"text\"\n  placeholder=\"Search users...\"\n  value={searchTerm}\n  onChange={handleInputChange}\n  onKeyDown={handleKeyDown}\n  onFocus={() => setIsDropdownOpen(searchResults.length > 0)}\n  aria-autocomplete=\"list\"\n  aria-controls=\"search-results-list\"\n  aria-expanded={isDropdownOpen}\n  aria-activedescendant={isDropdownOpen && selectedIndex !== -1 ? `user-item-${searchResults[selectedIndex]?.id}` : undefined}\n/>\n\n// Example of aria-live region (for no results)\n{searchResults.length === 0 && searchTerm && !isDropdownOpen && (\n  <div aria-live=\"polite\" className=\"no-results\">\n    No users found for \"{searchTerm}\"\n  </div>\n)}\n```",
          "tags": [
            "Accessibility",
            "A11y",
            "ARIA",
            "Keyboard Navigation",
            "UI/UX",
            "Best Practices"
          ],
          "prerequisites": [
            "Web_Accessibility_basics",
            "Semantic_HTML"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "expert"
        },
        {
          "id": "question_arrow_keys_flashcard",
          "topic": "Keyboard Navigation",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of `e.key === 'ArrowDown'` in the `handleKeyDown` function?",
          "answer": "To detect when the user presses the 'Arrow Down' key, enabling custom navigation logic for the search results dropdown.",
          "analysisPoints": [
            "Focus on identifying the specific key.",
            "Relate it to the custom navigation logic."
          ],
          "keyConcepts": [
            "Keyboard Events",
            "e.key",
            "Conditional Logic"
          ],
          "evaluationCriteria": [
            "Basic understanding of keyboard event properties.",
            "Ability to infer purpose from code snippet."
          ],
          "example": "```javascript\nconst handleKeyPress = (e) => {\n  if (e.key === 'ArrowUp') {\n    console.log('User wants to go up!');\n  }\n};\n```",
          "tags": [
            "Keyboard Events",
            "JavaScript",
            "Event Handling"
          ],
          "prerequisites": [
            "JavaScript_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_array_filter_mcq",
          "topic": "JavaScript Array Methods",
          "level": "easy",
          "type": "mcq",
          "question": "Consider the `searchUsers` function, which uses `Array.prototype.filter()`. Which of the following best describes what `filter()` does?",
          "answer": "Creates a new array containing only the elements for which the provided callback function returns `true`.",
          "options": [
            "Modifies the original array by removing elements that don't satisfy a condition.",
            "Returns the first element that satisfies a condition.",
            "Executes a provided function once for each array element, producing a new array of results.",
            "Creates a new array containing only the elements for which the provided callback function returns `true`."
          ],
          "analysisPoints": [
            "Distinguish `filter` from `map` (produces new array of transformed elements) and `forEach` (no return value, side effects).",
            "Emphasize that `filter` *does not* modify the original array.",
            "Highlight that the callback function must return a boolean."
          ],
          "keyConcepts": [
            "JavaScript Arrays",
            "Array.prototype.filter",
            "Functional Programming",
            "Immutability"
          ],
          "evaluationCriteria": [
            "Correct definition of `filter`.",
            "Understanding of array immutability.",
            "Ability to differentiate from similar array methods."
          ],
          "example": "```javascript\nconst numbers = [1, 2, 3, 4, 5];\nconst evenNumbers = numbers.filter(num => num % 2 === 0);\n// evenNumbers will be [2, 4]\n// numbers remains [1, 2, 3, 4, 5]\n```",
          "tags": [
            "JavaScript",
            "Arrays",
            "Methods",
            "Filtering"
          ],
          "prerequisites": [
            "JavaScript_arrays"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_string_includes_flashcard",
          "topic": "JavaScript String Methods",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of `item.toLowerCase().includes(lowerCaseQuery)` within the `searchUsers` function?",
          "answer": "To check if a specific `item` (or any string) contains the `lowerCaseQuery` string, performing a case-insensitive search.",
          "analysisPoints": [
            "Focus on `includes` for substring checking.",
            "Highlight `toLowerCase` for case insensitivity.",
            "Connect it to search functionality."
          ],
          "keyConcepts": [
            "JavaScript Strings",
            "String.prototype.includes",
            "String.prototype.toLowerCase",
            "Case-insensitive Search"
          ],
          "evaluationCriteria": [
            "Basic understanding of string methods.",
            "Ability to explain combined method usage."
          ],
          "example": "```javascript\nconst text = \"Hello World\";\nconsole.log(text.includes(\"World\")); // true\nconsole.log(text.toLowerCase().includes(\"hello\")); // true\nconsole.log(text.includes(\"world\")); // false (case-sensitive)\n```",
          "tags": [
            "JavaScript",
            "Strings",
            "Methods",
            "Search"
          ],
          "prerequisites": [
            "JavaScript_strings"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_map_key_importance_open",
          "topic": "React List Rendering",
          "level": "medium",
          "type": "open",
          "question": "In the `searchResults.map` rendering, each `user-item` `div` has a `key={user.id}` prop. Explain the importance of the `key` prop in React lists, especially in a dynamic list like search results where items can be added, removed, or reordered.",
          "answer": "The `key` prop is a special string attribute you need to include when creating lists of elements in React. Its importance in dynamic lists like search results is critical for several reasons:\n\n1.  **Efficient Reconciliation**: React uses the `key` prop to identify which items in a list have changed, are added, or are removed. When the list of `searchResults` changes (e.g., new results appear, old ones disappear, or their order changes), React uses the keys to efficiently reconcile the new list with the old list. Without keys, or with unstable keys (like array indices when items can be reordered), React might re-render or re-mount components unnecessarily or incorrectly.\n\n2.  **Maintaining Component State**: If list items have internal state (e.g., an input field within each `user-item` holding its own value), React uses the `key` to correctly associate that state with the correct item. If keys are missing or unstable, React might accidentally reuse component instances for different data, leading to state bugs where the wrong data is shown or manipulated.\n\n3.  **Performance Optimization**: By identifying precisely which items have changed, React can perform minimal DOM manipulations, leading to better performance, especially for large lists.\n\n4.  **Preventing Bugs**: Using a stable, unique key (like `user.id` which is a unique identifier for each user) prevents many subtle bugs that can arise from React's reconciliation algorithm making incorrect assumptions about item identities.\n\n**Why not use `index` as a key?**\nUsing `index` as a `key` is problematic if the list items can be reordered, filtered, or added/removed from the middle. If an item is inserted at the beginning, all subsequent items shift their indices, causing React to think that every component has changed, leading to inefficient updates and potential state issues. `user.id` is stable regardless of the item's position or the list's changes, making it ideal.",
          "analysisPoints": [
            "Explanation of React's reconciliation process.",
            "Role of keys in identifying items for efficient updates.",
            "Impact on component state preservation.",
            "Performance implications.",
            "Clear explanation of why `index` is generally a bad key.",
            "Demonstration of `user.id` as a good key."
          ],
          "keyConcepts": [
            "React Reconciliation",
            "Key Prop",
            "List Rendering",
            "Performance Optimization",
            "Component State",
            "Immutability"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of `key` prop.",
            "Ability to explain its benefits and pitfalls.",
            "Clear distinction between good and bad key choices.",
            "Demonstrates knowledge of React internals."
          ],
          "example": "```javascript\n// BAD example (if items can change order/be removed)\nlistItems.map((item, index) => (\n  <div key={index}>{item.name}</div>\n));\n\n// GOOD example (stable and unique ID)\nlistItems.map((item) => (\n  <div key={item.id}>{item.name}</div>\n));\n```",
          "tags": [
            "React",
            "List Rendering",
            "Key Prop",
            "Performance",
            "Best Practices"
          ],
          "prerequisites": [
            "React_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_array_some_use_case_mcq",
          "topic": "JavaScript Array Methods",
          "level": "medium",
          "type": "mcq",
          "question": "The `searchUsers` function checks `if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery)))`. Why is `some()` a suitable method here, compared to, for example, `filter()` or `map()`?",
          "answer": "`some()` is suitable because it efficiently checks if *any* purchased item matches the query, returning `true` as soon as one match is found without needing to process the entire array or create a new one.",
          "options": [
            "`filter()` would modify the original `purchased` array, which is undesirable.",
            "`map()` would return a new array of booleans, and we only need a single boolean result.",
            "`some()` efficiently checks if *any* purchased item matches the query, returning `true` as soon as one match is found without needing to process the entire array or create a new one.",
            "`some()` allows for synchronous iteration, which is faster than other methods."
          ],
          "analysisPoints": [
            "Focus on `some()`'s short-circuiting behavior (returns `true` immediately upon first match).",
            "Distinguish its purpose (checking existence/condition) from `filter()` (creating a subset) and `map()` (transforming elements).",
            "Emphasize that `some()` returns a single boolean, which is exactly what the `if` condition needs."
          ],
          "keyConcepts": [
            "JavaScript Arrays",
            "Array.prototype.some",
            "Array.prototype.filter",
            "Array.prototype.map",
            "Efficiency",
            "Boolean Logic"
          ],
          "evaluationCriteria": [
            "Correct understanding of `Array.prototype.some()`.",
            "Ability to compare and contrast array methods.",
            "Recognition of optimal method for a given use case.",
            "Understanding of efficiency implications."
          ],
          "example": "```javascript\nconst fruits = ['apple', 'banana', 'cherry'];\n\n// Using some(): Checks if ANY fruit starts with 'a'\nconst hasApple = fruits.some(fruit => fruit.startsWith('a')); // true, stops after 'apple'\n\n// Using filter(): Creates a new array of fruits starting with 'a'\nconst fruitsStartingWithA = fruits.filter(fruit => fruit.startsWith('a')); // ['apple']\n\n// Using map(): Creates a new array of booleans for each fruit\nconst startsWithABooleans = fruits.map(fruit => fruit.startsWith('a')); // [true, false, false]\n\n// If the goal is just to know IF a condition exists, some() is most efficient.\n```",
          "tags": [
            "JavaScript",
            "Arrays",
            "Methods",
            "Optimization"
          ],
          "prerequisites": [
            "JavaScript_arrays",
            "Boolean_logic"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_refactor_usestate_toreducer",
          "title": "Refactor Search Component State with `useReducer`",
          "description": "\nRefactor the state management of the search component from using multiple `useState` hooks to a single `useReducer` hook. This should consolidate `searchTerm`, `searchResults`, `selectedIndex`, and `isDropdownOpen` into a single state object.\n\n**Requirements:**\n1.  Define a reducer function (`searchReducer`) that handles different actions (e.g., `SET_SEARCH_TERM`, `SET_SEARCH_RESULTS`, `KEY_DOWN`, `SELECT_USER`).\n2.  Initialize the reducer with an initial state object containing all necessary properties.\n3.  Replace all `setSearchTerm`, `setSearchResults`, `setSelectedIndex`, and `setIsDropdownOpen` calls with `dispatch` calls.\n4.  Ensure all existing functionality (search filtering, keyboard navigation, selection, dropdown visibility) works correctly after the refactor.\n5.  The `searchUsers` function does not need to be part of the reducer, but its integration with the `dispatch` logic should be correct.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect, useRef, useReducer } from 'react';\n\n// Assume MOCK_USERS is defined elsewhere or passed as a prop\nconst MOCK_USERS = [\n  { id: 1, name: 'Alice Smith', purchased: ['Laptop', 'Mouse'], address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Bob Johnson', purchased: ['Keyboard'], address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'Charlie Brown', purchased: ['Monitor', 'Webcam'], address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Diana Prince', purchased: ['Headphones'], address: '101 Elm Blvd', zipCode: '10001' }\n];\n\n// Initial state for useReducer (you will define the reducer)\nconst initialState = {\n  searchTerm: '',\n  searchResults: [],\n  selectedIndex: 0,\n  isDropdownOpen: false,\n};\n\n// TODO: Define searchReducer function here\nfunction searchReducer(state, action) {\n  switch (action.type) {\n    // Implement action handlers\n    default:\n      return state;\n  }\n}\n\nfunction UserSearchComponent() {\n  // const [searchTerm, setSearchTerm] = useState('');\n  // const [searchResults, setSearchResults] = useState([]);\n  // const [selectedIndex, setSelectedIndex] = useState(0);\n  // const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n\n  const [state, dispatch] = useReducer(searchReducer, initialState);\n  const { searchTerm, searchResults, selectedIndex, isDropdownOpen } = state;\n\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  // Search logic (remains outside reducer, but uses its state and dispatches actions)\n  const searchUsers = (query) => {\n    if (!query) return [];\n    const lowerCaseQuery = query.toLowerCase();\n    return MOCK_USERS.filter(user => {\n      if (user.name.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery))) return true;\n      if (user.address.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.zipCode.includes(lowerCaseQuery)) return true;\n      return false;\n    });\n  };\n  \n  // Handle input change\n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    // TODO: Dispatch action to set search term\n    // TODO: Dispatch action to set search results\n    // TODO: Dispatch action to reset selected index\n    // TODO: Dispatch action to manage dropdown visibility\n\n    // const results = searchUsers(value);\n    // setSearchTerm(value);\n    // setSearchResults(results);\n    // setSelectedIndex(0);\n    // setIsDropdownOpen(results.length > 0);\n  };\n  \n  // Handle keyboard navigation\n  const handleKeyDown = (e) => {\n    // TODO: Dispatch actions based on key presses\n    if (!isDropdownOpen) return;\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        // setSelectedIndex(prev => (prev < searchResults.length - 1) ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        // setSelectedIndex(prev => (prev > 0) ? prev - 1 : 0);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        // if (searchResults[selectedIndex]) {\n        //   handleSelectUser(searchResults[selectedIndex]);\n        // }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        // setIsDropdownOpen(false);\n        break;\n      default:\n        break;\n    }\n  };\n  \n  // Scroll selected item into view\n  useEffect(() => {\n    if (isDropdownOpen && resultsContainerRef.current) {\n      const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, isDropdownOpen]);\n  \n  // Handle user selection\n  const handleSelectUser = (user) => {\n    console.log('Selected user:', user);\n    // TODO: Dispatch actions to clear search term and close dropdown\n    // setSearchTerm('');\n    // setIsDropdownOpen(false);\n  };\n  \n  return (\n    <div className=\"user-search\">\n      <div className=\"search-container\">\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search users by name, items, address...\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => { /* TODO: Dispatch action to open dropdown if results exist */ /* setIsDropdownOpen(searchResults.length > 0) */ }}\n        />\n        \n        {isDropdownOpen && (\n          <div className=\"search-results\" ref={resultsContainerRef}>\n            {searchResults.length > 0 ? (\n              searchResults.map((user, index) => (\n                <div\n                  id={`user-item-${index}`}\n                  key={user.id}\n                  className={`user-item ${index === selectedIndex ? 'selected' : ''}`}\n                  onClick={() => handleSelectUser(user)}\n                  onMouseEnter={() => { /* TODO: Dispatch action to set selected index */ /* setSelectedIndex(index) */ }}\n                >\n                  <div className=\"user-name\">{user.name}</div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found.</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearchComponent;\n",
          "solutionCode": "import React, { useEffect, useRef, useReducer } from 'react';\n\nconst MOCK_USERS = [\n  { id: 1, name: 'Alice Smith', purchased: ['Laptop', 'Mouse'], address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Bob Johnson', purchased: ['Keyboard'], address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'Charlie Brown', purchased: ['Monitor', 'Webcam'], address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Diana Prince', purchased: ['Headphones'], address: '101 Elm Blvd', zipCode: '10001' },\n  { id: 5, name: 'Eve Adams', purchased: ['Desk'], address: '202 River Rd', zipCode: '40004' },\n  { id: 6, name: 'Frank White', purchased: ['Chair'], address: '303 Hill Dr', zipCode: '50005' }\n];\n\nconst initialState = {\n  searchTerm: '',\n  searchResults: [],\n  selectedIndex: -1, // Changed to -1 to indicate no selection initially\n  isDropdownOpen: false,\n};\n\nfunction searchReducer(state, action) {\n  switch (action.type) {\n    case 'SET_SEARCH_TERM':\n      return { ...state, searchTerm: action.payload };\n    case 'SET_SEARCH_RESULTS':\n      return { ...state, searchResults: action.payload };\n    case 'SET_SELECTED_INDEX':\n      return { ...state, selectedIndex: action.payload };\n    case 'SET_DROPDOWN_OPEN':\n      return { ...state, isDropdownOpen: action.payload };\n    case 'NAVIGATE_DOWN':\n      return {\n        ...state,\n        selectedIndex: (state.selectedIndex < state.searchResults.length - 1)\n          ? state.selectedIndex + 1\n          : state.selectedIndex,\n      };\n    case 'NAVIGATE_UP':\n      return {\n        ...state,\n        selectedIndex: (state.selectedIndex > 0) ? state.selectedIndex - 1 : 0,\n      };\n    case 'SELECT_ITEM':\n      // Log selected user and reset state\n      console.log('Selected user:', action.payload);\n      return { ...initialState }; // Reset to initial state after selection\n    case 'CLEAR_SEARCH':\n      return { ...initialState };\n    default:\n      return state;\n  }\n}\n\nfunction UserSearchComponent() {\n  const [state, dispatch] = useReducer(searchReducer, initialState);\n  const { searchTerm, searchResults, selectedIndex, isDropdownOpen } = state;\n\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  const searchUsers = (query) => {\n    if (!query) return [];\n    const lowerCaseQuery = query.toLowerCase();\n    return MOCK_USERS.filter(user => {\n      if (user.name.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery))) return true;\n      if (user.address.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.zipCode.includes(lowerCaseQuery)) return true;\n      return false;\n    });\n  };\n  \n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    dispatch({ type: 'SET_SEARCH_TERM', payload: value });\n    const results = searchUsers(value);\n    dispatch({ type: 'SET_SEARCH_RESULTS', payload: results });\n    dispatch({ type: 'SET_SELECTED_INDEX', payload: results.length > 0 ? 0 : -1 });\n    dispatch({ type: 'SET_DROPDOWN_OPEN', payload: results.length > 0 });\n  };\n  \n  const handleKeyDown = (e) => {\n    if (!isDropdownOpen) return;\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        dispatch({ type: 'NAVIGATE_DOWN' });\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        dispatch({ type: 'NAVIGATE_UP' });\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex !== -1 && searchResults[selectedIndex]) {\n          dispatch({ type: 'SELECT_ITEM', payload: searchResults[selectedIndex] });\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        dispatch({ type: 'SET_DROPDOWN_OPEN', payload: false });\n        break;\n      default:\n        break;\n    }\n  };\n  \n  useEffect(() => {\n    if (isDropdownOpen && resultsContainerRef.current && selectedIndex !== -1) {\n      const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, isDropdownOpen]);\n  \n  const handleSelectUser = (user) => {\n    dispatch({ type: 'SELECT_ITEM', payload: user });\n  };\n  \n  return (\n    <div className=\"user-search\">\n      <div className=\"search-container\">\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search users by name, items, address...\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => dispatch({ type: 'SET_DROPDOWN_OPEN', payload: searchResults.length > 0 })}\n        />\n        \n        {isDropdownOpen && (\n          <div className=\"search-results\" ref={resultsContainerRef}>\n            {searchResults.length > 0 ? (\n              searchResults.map((user, index) => (\n                <div\n                  id={`user-item-${index}`}\n                  key={user.id}\n                  className={`user-item ${index === selectedIndex ? 'selected' : ''}`}\n                  onClick={() => handleSelectUser(user)}\n                  onMouseEnter={() => dispatch({ type: 'SET_SELECTED_INDEX', payload: index })}\n                >\n                  <div className=\"user-name\">{user.name}</div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found.</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearchComponent;\n",
          "testCases": [
            "**Initial Load**: Component renders with empty search term, no results, dropdown closed.",
            "**Typing 'a'**: `searchTerm` updates to 'a', `searchResults` shows Alice, Diana, Charlie, `selectedIndex` is 0, `isDropdownOpen` is true.",
            "**Typing 'apple'**: `searchTerm` updates, `searchResults` shows Alice, `selectedIndex` is 0, `isDropdownOpen` is true.",
            "**Typing 'xyz' (no match)**: `searchTerm` updates, `searchResults` is empty, `isDropdownOpen` is false.",
            "**ArrowDown**: Pressing ArrowDown navigates `selectedIndex` from 0 to 1, then to 2, etc. (with results for 'a').",
            "**ArrowUp**: Pressing ArrowUp navigates `selectedIndex` from 2 to 1, then to 0 (with results for 'a').",
            "**Enter Selection**: With 'Alice Smith' selected (index 0), pressing Enter clears search, closes dropdown, logs 'Selected user: Alice Smith'.",
            "**Escape**: Pressing Escape closes dropdown and clears selected index (but not search term).",
            "**Focus In/Out**: `onFocus` opens dropdown if results exist. Clicking outside (implied, not direct testable by code alone) should close it."
          ],
          "hints": [
            "Start by defining your `initialState` and a basic `searchReducer` function with a `default` case.",
            "Identify all places where `useState` setters (`setSearchTerm`, etc.) are called and replace them with `dispatch({ type: 'ACTION_NAME', payload: value })`.",
            "For actions like `NAVIGATE_DOWN` or `NAVIGATE_UP`, the reducer logic should calculate the new `selectedIndex` based on the current `state.selectedIndex` and `state.searchResults.length`.",
            "The `SELECT_ITEM` action is a good candidate for resetting the state back to its initial empty/closed condition."
          ],
          "tags": [
            "React",
            "useReducer",
            "State Management",
            "Refactoring",
            "Hooks",
            "Intermediate"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "theory_react_state_and_hooks",
            "JavaScript_reducer_pattern"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Redux_pattern",
            "Flux_architecture",
            "Centralized_state"
          ]
        },
        {
          "id": "task_implement_debounced_search",
          "title": "Implement Debounced Search Input",
          "description": "\nEnhance the `handleInputChange` function to debounce the search operation. This means the `searchUsers` function should only be called after the user has stopped typing for a certain period (e.g., 300ms). This is a common performance optimization for search inputs.\n\n**Requirements:**\n1.  Introduce a debouncing mechanism to delay the execution of `searchUsers`.\n2.  The `setSearchTerm` (or `dispatch` equivalent) should update immediately, but `setSearchResults` (or `dispatch` equivalent) should be delayed.\n3.  Ensure that if the user types quickly, `searchUsers` is only called once after a pause.\n4.  Upon component unmount or when the effect cleans up, any pending debounce timer should be cleared.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect, useRef } from 'react';\n\nconst MOCK_USERS = [\n  { id: 1, name: 'Alice Smith', purchased: ['Laptop', 'Mouse'], address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Bob Johnson', purchased: ['Keyboard'], address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'Charlie Brown', purchased: ['Monitor', 'Webcam'], address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Diana Prince', purchased: ['Headphones'], address: '101 Elm Blvd', zipCode: '10001' }\n];\n\nfunction UserSearchComponent() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  const searchUsers = (query) => {\n    if (!query) return [];\n    console.log('Performing search for:', query); // Add this to observe debounce effect\n    const lowerCaseQuery = query.toLowerCase();\n    return MOCK_USERS.filter(user => {\n      if (user.name.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery))) return true;\n      if (user.address.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.zipCode.includes(lowerCaseQuery)) return true;\n      return false;\n    });\n  };\n  \n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setSearchTerm(value);\n    \n    // TODO: Implement debouncing here. \n    // The following lines should be moved inside the debounced function.\n    // const results = searchUsers(value);\n    // setSearchResults(results);\n    // setSelectedIndex(0);\n    // setIsDropdownOpen(results.length > 0);\n  };\n  \n  const handleKeyDown = (e) => {\n    if (!isDropdownOpen) return;\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev < searchResults.length - 1) ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0) ? prev - 1 : 0);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (searchResults[selectedIndex]) {\n          handleSelectUser(searchResults[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        setIsDropdownOpen(false);\n        break;\n      default:\n        break;\n    }\n  };\n  \n  useEffect(() => {\n    if (isDropdownOpen && resultsContainerRef.current) {\n      const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, isDropdownOpen]);\n  \n  const handleSelectUser = (user) => {\n    console.log('Selected user:', user);\n    setSearchTerm('');\n    setIsDropdownOpen(false);\n  };\n  \n  return (\n    <div className=\"user-search\">\n      <div className=\"search-container\">\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search users by name, items, address...\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => setIsDropdownOpen(searchResults.length > 0)}\n        />\n        \n        {isDropdownOpen && (\n          <div className=\"search-results\" ref={resultsContainerRef}>\n            {searchResults.length > 0 ? (\n              searchResults.map((user, index) => (\n                <div\n                  id={`user-item-${index}`}\n                  key={user.id}\n                  className={`user-item ${index === selectedIndex ? 'selected' : ''}`}\n                  onClick={() => handleSelectUser(user)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <div className=\"user-name\">{user.name}</div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found.</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearchComponent;\n",
          "solutionCode": "import React, { useState, useEffect, useRef, useCallback } from 'react';\n\nconst MOCK_USERS = [\n  { id: 1, name: 'Alice Smith', purchased: ['Laptop', 'Mouse'], address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Bob Johnson', purchased: ['Keyboard'], address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'Charlie Brown', purchased: ['Monitor', 'Webcam'], address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Diana Prince', purchased: ['Headphones'], address: '101 Elm Blvd', zipCode: '10001' },\n  { id: 5, name: 'Eve Adams', purchased: ['Desk'], address: '202 River Rd', zipCode: '40004' },\n  { id: 6, name: 'Frank White', purchased: ['Chair'], address: '303 Hill Dr', zipCode: '50005' }\n];\n\nfunction UserSearchComponent() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  const searchUsers = (query) => {\n    if (!query) return [];\n    console.log('Performing search for:', query); // Add this to observe debounce effect\n    const lowerCaseQuery = query.toLowerCase();\n    return MOCK_USERS.filter(user => {\n      if (user.name.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery))) return true;\n      if (user.address.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.zipCode.includes(lowerCaseQuery)) return true;\n      return false;\n    });\n  };\n\n  // Custom debounce hook/function could be extracted for reusability\n  const debouncedSearchTerm = useDebounce(searchTerm, 300);\n\n  useEffect(() => {\n    if (debouncedSearchTerm !== undefined) { // To prevent initial empty string search on mount\n      const results = searchUsers(debouncedSearchTerm);\n      setSearchResults(results);\n      setSelectedIndex(0);\n      setIsDropdownOpen(results.length > 0);\n    }\n  }, [debouncedSearchTerm]);\n  \n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setSearchTerm(value); // Update immediately for UI feedback\n  };\n  \n  const handleKeyDown = (e) => {\n    if (!isDropdownOpen) return;\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          (prev < searchResults.length - 1) ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0) ? prev - 1 : 0);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (searchResults[selectedIndex]) {\n          handleSelectUser(searchResults[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        setIsDropdownOpen(false);\n        break;\n      default:\n        break;\n    }\n  };\n  \n  useEffect(() => {\n    if (isDropdownOpen && resultsContainerRef.current) {\n      const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, isDropdownOpen]);\n  \n  const handleSelectUser = (user) => {\n    console.log('Selected user:', user);\n    setSearchTerm('');\n    setIsDropdownOpen(false);\n  };\n  \n  return (\n    <div className=\"user-search\">\n      <div className=\"search-container\">\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search users by name, items, address...\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => setIsDropdownOpen(searchResults.length > 0)}\n        />\n        \n        {isDropdownOpen && (\n          <div className=\"search-results\" ref={resultsContainerRef}>\n            {searchResults.length > 0 ? (\n              searchResults.map((user, index) => (\n                <div\n                  id={`user-item-${index}`}\n                  key={user.id}\n                  className={`user-item ${index === selectedIndex ? 'selected' : ''}`}\n                  onClick={() => handleSelectUser(user)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <div className=\"user-name\">{user.name}</div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found.</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Custom Hook for Debouncing\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport default UserSearchComponent;\n",
          "testCases": [
            "**Immediate Feedback**: Typing 'a' updates the input field instantly.",
            "**Debounce Delay**: Type 'ap' quickly. `searchUsers` should NOT be called after 'a' or 'p'. It should only be called after a 300ms pause after typing 'p'.",
            "**Continuous Typing**: Type 'apple' without pausing for 300ms between characters. `searchUsers` should only be called once, after you stop typing 'apple'.",
            "**Clearing Input**: Clear the input quickly. `searchUsers` should be called with an empty string after debounce delay.",
            "**Cleanup**: Verify no memory leaks by ensuring `setTimeout` is cleared on unmount or re-render of the effect."
          ],
          "hints": [
            "Consider creating a custom `useDebounce` hook that takes a `value` and a `delay`.",
            "Inside the `useDebounce` hook, use `useEffect` with `setTimeout` to delay setting the debounced value.",
            "Remember to return a cleanup function from `useEffect` to `clearTimeout` when the component unmounts or the `value`/`delay` changes.",
            "The `searchUsers` function should then be triggered by the `debouncedSearchTerm` within a separate `useEffect` in the main component."
          ],
          "tags": [
            "React",
            "Hooks",
            "Performance",
            "Debouncing",
            "Optimization",
            "useEffect"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_react_state_and_hooks",
            "JavaScript_closures",
            "JavaScript_timers"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Throttling",
            "Custom_hooks",
            "Performance_optimization"
          ]
        },
        {
          "id": "task_enhance_search_function",
          "title": "Enhance Search Functionality with Fuzzy Matching and Multiple Keywords",
          "description": "\nEnhance the `searchUsers` function to provide more flexible search capabilities. The current function only supports exact substring matching on individual fields. Your task is to:\n\n1.  **Support Multiple Keywords**: Allow the user to search for multiple keywords (e.g., 'alice laptop'). A user should match if *all* keywords are found in *any* of the searchable fields (name, purchased items, address, zip code).\n2.  **Basic Fuzzy Matching (Optional, for Harder Challenge)**: Implement a very basic form of fuzzy matching for name and address fields (e.g., 'alce' matches 'alice'). This could be done by allowing one character difference or using a simple Levenshtein distance check (if time permits, otherwise just focus on multiple keywords).\n\n**Requirements:**\n*   Modify `searchUsers` to split the `query` into individual keywords.\n*   Each user must match *all* keywords for them to be included in the results.\n*   The matching should still be case-insensitive.\n*   If implementing fuzzy matching, clearly state your approach (e.g., 'allows 1 typo').\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState, useEffect, useRef } from 'react';\n\nconst MOCK_USERS = [\n  { id: 1, name: 'Alice Smith', purchased: ['Laptop', 'Mouse'], address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Bob Johnson', purchased: ['Keyboard'], address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'Charlie Brown', purchased: ['Monitor', 'Webcam'], address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Diana Prince', purchased: ['Headphones'], address: '101 Elm Blvd', zipCode: '10001' },\n  { id: 5, name: 'Eve Adams', purchased: ['Desk'], address: '202 River Rd', zipCode: '40004' },\n  { id: 6, name: 'Frank White', purchased: ['Chair'], address: '303 Hill Dr', zipCode: '50005' },\n  { id: 7, name: 'Grace Taylor', purchased: ['Tablet'], address: '404 Creek Rd', zipCode: '60006' }\n];\n\nfunction UserSearchComponent() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  // TODO: Modify this searchUsers function\n  const searchUsers = (query) => {\n    if (!query) return [];\n    const lowerCaseQuery = query.toLowerCase();\n    return MOCK_USERS.filter(user => {\n      if (user.name.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.purchased.some(item => item.toLowerCase().includes(lowerCaseQuery))) return true;\n      if (user.address.toLowerCase().includes(lowerCaseQuery)) return true;\n      if (user.zipCode.includes(lowerCaseQuery)) return true;\n      return false;\n    });\n  };\n  \n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setSearchTerm(value);\n    \n    const results = searchUsers(value);\n    setSearchResults(results);\n    setSelectedIndex(0);\n    setIsDropdownOpen(results.length > 0);\n  };\n  \n  const handleKeyDown = (e) => {\n    if (!isDropdownOpen) return;\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          (prev < searchResults.length - 1) ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0) ? prev - 1 : 0);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (searchResults[selectedIndex]) {\n          handleSelectUser(searchResults[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        setIsDropdownOpen(false);\n        break;\n      default:\n        break;\n    }\n  };\n  \n  useEffect(() => {\n    if (isDropdownOpen && resultsContainerRef.current) {\n      const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, isDropdownOpen]);\n  \n  const handleSelectUser = (user) => {\n    console.log('Selected user:', user);\n    setSearchTerm('');\n    setIsDropdownOpen(false);\n  };\n  \n  return (\n    <div className=\"user-search\">\n      <div className=\"search-container\">\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search users by name, items, address...\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => setIsDropdownOpen(searchResults.length > 0)}\n        />\n        \n        {isDropdownOpen && (\n          <div className=\"search-results\" ref={resultsContainerRef}>\n            {searchResults.length > 0 ? (\n              searchResults.map((user, index) => (\n                <div\n                  id={`user-item-${index}`}\n                  key={user.id}\n                  className={`user-item ${index === selectedIndex ? 'selected' : ''}`}\n                  onClick={() => handleSelectUser(user)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <div className=\"user-name\">{user.name}</div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found.</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearchComponent;\n",
          "solutionCode": "import React, { useState, useEffect, useRef } from 'react';\n\nconst MOCK_USERS = [\n  { id: 1, name: 'Alice Smith', purchased: ['Laptop', 'Mouse'], address: '123 Main St', zipCode: '10001' },\n  { id: 2, name: 'Bob Johnson', purchased: ['Keyboard'], address: '456 Oak Ave', zipCode: '20002' },\n  { id: 3, name: 'Charlie Brown', purchased: ['Monitor', 'Webcam'], address: '789 Pine Ln', zipCode: '30003' },\n  { id: 4, name: 'Diana Prince', purchased: ['Headphones'], address: '101 Elm Blvd', zipCode: '10001' },\n  { id: 5, name: 'Eve Adams', purchased: ['Desk'], address: '202 River Rd', zipCode: '40004' },\n  { id: 6, name: 'Frank White', purchased: ['Chair'], address: '303 Hill Dr', zipCode: '50005' },\n  { id: 7, name: 'Grace Taylor', purchased: ['Tablet'], address: '404 Creek Rd', zipCode: '60006' }\n];\n\n// Helper for basic fuzzy match (1 character difference allowed)\nconst isFuzzyMatch = (text, query) => {\n  if (text.includes(query)) return true;\n  if (query.length < 2) return false; // Needs at least 2 chars for meaningful fuzzy\n\n  // Allows for one character difference (insertion, deletion, substitution)\n  for (let i = 0; i <= text.length; i++) {\n    // Insertion\n    if (text.slice(0, i) + query + text.slice(i) === query) return true; // not needed, just for conceptual clarity\n  }\n\n  // Simple 1-char difference check:\n  // Check if query can be formed by adding/removing/changing one char in text\n  if (Math.abs(text.length - query.length) > 1) return false; // Too many differences\n\n  let diffCount = 0;\n  let tIdx = 0;\n  let qIdx = 0;\n\n  while (tIdx < text.length && qIdx < query.length) {\n    if (text[tIdx] !== query[qIdx]) {\n      diffCount++;\n      if (diffCount > 1) return false;\n\n      // Try skipping a char in text (deletion in query)\n      if (text.length > query.length) {\n        tIdx++;\n      } else if (query.length > text.length) {\n        // Try skipping a char in query (insertion in query)\n        qIdx++;\n      } else {\n        // Substitution\n        tIdx++;\n        qIdx++;\n      }\n    } else {\n      tIdx++;\n      qIdx++;\n    }\n  }\n  diffCount += Math.abs((text.length - tIdx) - (query.length - qIdx));\n\n  return diffCount <= 1;\n};\n\n\nfunction UserSearchComponent() {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n\n  const searchInputRef = useRef(null);\n  const resultsContainerRef = useRef(null);\n\n  const searchUsers = (query) => {\n    if (!query) return [];\n    const lowerCaseKeywords = query.toLowerCase().split(' ').filter(k => k.length > 0);\n\n    if (lowerCaseKeywords.length === 0) return [];\n\n    return MOCK_USERS.filter(user => {\n      // Combine all searchable fields into a single string for each user\n      const userSearchableText = (\n        user.name + ' ' +\n        user.address + ' ' +\n        user.zipCode + ' ' +\n        user.purchased.join(' ')\n      ).toLowerCase();\n\n      // Check if ALL keywords are present in the user's searchable text (or fuzzy match)\n      return lowerCaseKeywords.every(keyword => {\n        // Original exact match\n        if (userSearchableText.includes(keyword)) return true;\n        // Fuzzy match for name and address fields\n        const nameAndAddress = (user.name + ' ' + user.address).toLowerCase();\n        return isFuzzyMatch(nameAndAddress, keyword); // Apply fuzzy match only to relevant fields\n      });\n    });\n  };\n  \n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setSearchTerm(value);\n    \n    const results = searchUsers(value);\n    setSearchResults(results);\n    setSelectedIndex(0);\n    setIsDropdownOpen(results.length > 0);\n  };\n  \n  const handleKeyDown = (e) => {\n    if (!isDropdownOpen) return;\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          (prev < searchResults.length - 1) ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => (prev > 0) ? prev - 1 : 0);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (searchResults[selectedIndex]) {\n          handleSelectUser(searchResults[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        e.preventDefault();\n        setIsDropdownOpen(false);\n        break;\n      default:\n        break;\n    }\n  };\n  \n  useEffect(() => {\n    if (isDropdownOpen && resultsContainerRef.current) {\n      const selectedElement = document.getElementById(`user-item-${selectedIndex}`);\n      if (selectedElement) {\n        selectedElement.scrollIntoView({ block: 'nearest', behavior: 'smooth' });\n      }\n    }\n  }, [selectedIndex, isDropdownOpen]);\n  \n  const handleSelectUser = (user) => {\n    console.log('Selected user:', user);\n    setSearchTerm('');\n    setIsDropdownOpen(false);\n  };\n  \n  return (\n    <div className=\"user-search\">\n      <div className=\"search-container\">\n        <input\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search users by name, items, address...\"\n          value={searchTerm}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          onFocus={() => setIsDropdownOpen(searchResults.length > 0)}\n        />\n        \n        {isDropdownOpen && (\n          <div className=\"search-results\" ref={resultsContainerRef}>\n            {searchResults.length > 0 ? (\n              searchResults.map((user, index) => (\n                <div\n                  id={`user-item-${index}`}\n                  key={user.id}\n                  className={`user-item ${index === selectedIndex ? 'selected' : ''}`}\n                  onClick={() => handleSelectUser(user)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <div className=\"user-name\">{user.name}</div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found.</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearchComponent;\n",
          "testCases": [
            "**Multi-keyword (Name + Item)**: Search for 'alice laptop'. Should return Alice Smith.",
            "**Multi-keyword (Item + Address)**: Search for 'keyboard oak'. Should return Bob Johnson.",
            "**Multi-keyword (Non-matching pair)**: Search for 'alice keyboard'. Should return no results (Alice has Laptop, Mouse; Bob has Keyboard).",
            "**Single Keyword (Existing)**: Search for 'frank'. Should return Frank White.",
            "**Fuzzy Matching (Name)**: Search for 'alce'. Should return Alice Smith.",
            "**Fuzzy Matching (Address)**: Search for '123 min'. Should return Alice Smith.",
            "**Fuzzy Matching (Multiple typos)**: Search for 'alca'. Should return no results (if 1-typo rule applies).",
            "**Empty Query**: `searchUsers('')` should return an empty array.",
            "**Query with Spaces**: `searchUsers('  ')` should return an empty array."
          ],
          "hints": [
            "Start by splitting the `query` string into an array of keywords using `split(' ')` and then `filter` out empty strings.",
            "Use `Array.prototype.every()` on the `lowerCaseKeywords` array inside the `user.filter()` callback. This ensures all keywords must match.",
            "For each `keyword`, you'll need to check if it `includes` any of the user's relevant fields (name, purchased, address, zipCode). Consider concatenating all searchable fields for a user into a single string for simpler `includes` checks.",
            "For basic fuzzy matching, you could implement a simple `isFuzzyMatch(text, query)` helper function that returns true if `text` contains `query` with, say, one character difference (e.g., using a simplified Levenshtein distance or a loop checking for one substitution/insertion/deletion)."
          ],
          "tags": [
            "JavaScript",
            "Algorithms",
            "Search",
            "Filtering",
            "String Manipulation",
            "Optimization"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_search_filtering_and_list_rendering",
            "JavaScript_array_methods"
          ],
          "complexity": 8,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Levenshtein_distance",
            "Text_search_algorithms",
            "Data_normalization"
          ]
        }
      ]
    }
  },
  {
    "id": "90b026f2-44aa-4400-acba-c556271a6c4c",
    "startLine": 16800,
    "endLine": 16899,
    "processedDate": "2025-06-17T15:34:49.110Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_user_search",
          "title": "React Component: User Search Implementation",
          "content": "This theory block describes a typical React functional component designed for searching and displaying user data. It covers fundamental React hooks like `useState` and `useEffect`, conditional rendering, and rendering lists of items.\n\n## Key Concepts\n-   **React Functional Component**: A JavaScript function that returns JSX (JavaScript XML) to describe UI elements. Functional components use hooks to manage state and side effects.\n-   **`useState` Hook**: Used to add state to functional components. It returns a stateful value and a function to update it. When the state changes, the component re-renders.\n-   **`useEffect` Hook**: Used to perform side effects in functional components, such as data fetching, subscriptions, or manually changing the DOM. It runs after every render by default, but its execution can be controlled by specifying dependencies.\n-   **Conditional Rendering**: Displaying different UI elements based on certain conditions (e.g., `isLoading`, `noResults`).\n-   **List Rendering**: Iterating over an array of data and rendering a component for each item. The `key` prop is crucial for performance and stable identity of items in a list, especially when items are added, removed, or reordered.\n-   **Event Handling**: Capturing user interactions (e.g., input changes) and updating component state or triggering logic.\n\n## Implementation Details\nThe `UserSearch` component demonstrates:\n1.  **State Management**: `searchText` (for input value), `users` (filtered user data), `isLoading` (for loading state), and `error` (for potential errors during data fetching/processing).\n2.  **Data Filtering/Search Logic**: The `useEffect` hook is used to simulate data fetching and filtering based on `searchText`. It includes a debouncing mechanism (via `setTimeout` and `clearTimeout`) to prevent excessive re-renders or API calls while the user is typing.\n3.  **Loading and Error States**: The component renders a 'Loading...' message when `isLoading` is true and a 'No results found' message if the filtered `users` array is empty after loading.\n4.  **Displaying Results**: Uses the `map` method to iterate over the `users` array and render each user's details, including address, zip code, and purchased items.",
          "examples": [
            {
              "id": "example_react_user_search_1",
              "title": "Basic useState and Conditional Rendering",
              "code": "import React, { useState } from 'react';\n\nfunction LoadingSpinner() {\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Simulate data loading\n  setTimeout(() => setIsLoading(false), 2000);\n\n  return (\n    <div>\n      {isLoading ? (\n        <p>Loading data...</p>\n      ) : (\n        <p>Data loaded successfully!</p>\n      )}\n    </div>\n  );\n}\n",
              "explanation": "This example shows how `useState` manages a boolean loading state and how conditional rendering is used to display a loading message or the loaded content based on that state.",
              "language": "typescript"
            },
            {
              "id": "example_react_user_search_2",
              "title": "List Rendering with map and Key Prop",
              "code": "import React from 'react';\n\nconst items = [\n  { id: 1, name: 'Apple' },\n  { id: 2, name: 'Banana' },\n  { id: 3, name: 'Cherry' }\n];\n\nfunction ItemList() {\n  return (\n    <ul>\n      {items.map(item => (\n        <li key={item.id}>{item.name}</li>\n      ))}\n    </ul>\n  );\n}\n",
              "explanation": "Demonstrates rendering a list of items using `Array.prototype.map()`. Each `<li>` element is given a unique `key` prop, which is essential for React's reconciliation process to efficiently update lists.",
              "language": "typescript"
            },
            {
              "id": "example_react_user_search_3",
              "title": "Basic useEffect with Debounce",
              "code": "import React, { useState, useEffect } from 'react';\n\nfunction SearchInput() {\n  const [query, setQuery] = useState('');\n  const [debouncedQuery, setDebouncedQuery] = useState('');\n\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      setDebouncedQuery(query);\n    }, 500);\n\n    return () => {\n      clearTimeout(timerId);\n    };\n  }, [query]);\n\n  return (\n    <input\n      type=\"text\"\n      value={query}\n      onChange={(e) => setQuery(e.target.value)}\n      placeholder=\"Type to search...\"\n    />\n  );\n}\n",
              "explanation": "This example illustrates how `useEffect` can be used to debounce an input value. The `debouncedQuery` state only updates after a 500ms pause in typing, preventing excessive re-renders or API calls. The cleanup function (`return () => clearTimeout(timerId)`) is critical to clear the previous timer if the `query` changes before the timeout fires.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "React",
            "Hooks",
            "State Management",
            "Conditional Rendering",
            "List Rendering",
            "Frontend Development",
            "JavaScript"
          ],
          "technology": "React, TypeScript",
          "prerequisites": [
            "JavaScript Fundamentals",
            "HTML Basics",
            "CSS Basics",
            "ES6+",
            "JSX"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Advanced React Hooks",
            "Performance Optimization",
            "Data Fetching"
          ]
        },
        {
          "id": "theory_dom_event_handling",
          "title": "DOM Event Handling and Propagation",
          "content": "DOM events are central to interactive web pages, allowing scripts to respond to user actions and browser occurrences. Understanding how events are processed and propagated is crucial for effective and performant frontend development.\n\n## Event Types and Differences\n-   **`mouseout` vs `mouseleave`**:\n    *   `mouseout`: Fires when the mouse pointer moves out of an element *or any of its children*. It bubbles up the DOM tree.\n    *   `mouseleave`: Fires *only* when the mouse pointer moves out of the direct bounds of the element it is registered on. It does *not* bubble. It's generally preferred for scenarios like tooltips or dropdown menus where you want the action to occur only when the mouse completely leaves the parent container, not just moves over a child.\n\n## Event Processing Order\n-   DOM events are typically processed in a **FIFO (First-In, First-Out)** manner. When an event (e.g., a click, key press) occurs, it's added to an event queue. The browser's event loop then picks events from this queue one by one and processes their associated handlers.\n\n## Event Propagation Phases\nWhen an event occurs on an element in the DOM, it doesn't just trigger handlers on that element; it goes through a specific lifecycle called event propagation, which consists of three phases:\n1.  **Capturing Phase**: The event starts from the `window` object and travels down through the target element's ancestors (e.g., `document`, `<html>`, `<body>`, `<div>`) until it reaches the parent of the target element. Event listeners registered with `useCapture` (the third argument in `addEventListener` set to `true`) are triggered during this phase.\n2.  **Target Phase**: The event reaches the actual element on which it occurred (the event target).\n3.  **Bubbling Phase**: After the target phase, the event propagates upwards from the target element's parent back to the `window` object. Most event handlers are registered for this phase by default (when `useCapture` is `false` or omitted).\n\n   <img src=\"https://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.png\" alt=\"DOM Event Flow: Capturing, Target, Bubbling\" style=\"width: 60%;\" />\n\n   *Image source: W3C DOM Level 3 Events Specification*\n\n## Controlling Event Propagation\n-   **`event.stopPropagation()`**:\n    *   **Purpose**: Prevents the event from propagating further in either the capturing or bubbling phases. It stops the event from reaching parent or child elements (depending on which phase it's called).\n    *   **Limitation**: If multiple event listeners are attached to the *same element* for the *same event type*, `stopPropagation()` will *not* prevent other listeners on that *same element* from executing.\n-   **`event.stopImmediatePropagation()`**:\n    *   **Purpose**: Does everything `stopPropagation()` does, AND it also prevents any other event listeners attached to the *same element* for the *same event type* from being executed after the current one.\n    *   **Effect**: The event stops completely at the current element, affecting both propagation up/down the DOM tree and execution of same-element handlers.\n\n## Event Delegation\nEvent delegation is a technique where you attach a single event listener to a parent element, rather than attaching individual listeners to multiple child elements. This listener then handles events that bubble up from its children. It is highly efficient for lists of dynamically added/removed elements and reduces memory footprint.",
          "examples": [
            {
              "id": "example_dom_event_1",
              "title": "mouseout vs mouseleave",
              "code": "<!-- HTML Structure -->\n<div id=\"parent\" style=\"border: 1px solid black; padding: 20px;\">\n  Parent\n  <div id=\"child\" style=\"border: 1px solid red; padding: 10px; margin-top: 10px;\">Child</div>\n</div>\n\n// JavaScript\nconst parent = document.getElementById('parent');\n\nparent.addEventListener('mouseout', () => {\n  console.log('Parent: mouseout fired'); // Fires when moving from parent to child\n});\n\nparent.addEventListener('mouseleave', () => {\n  console.log('Parent: mouseleave fired'); // Only fires when truly leaving the parent's boundary\n});\n",
              "explanation": "This example highlights the difference: `mouseout` on the parent fires when the mouse moves from the parent to its child, because the mouse 'leaves' the parent's immediate area to enter the child. `mouseleave` only fires when the mouse moves completely outside the parent's boundaries, ignoring movement into its children.",
              "language": "html+javascript"
            },
            {
              "id": "example_dom_event_2",
              "title": "Capturing and Bubbling Phases",
              "code": "<!-- HTML Structure -->\n<div id=\"outer\" style=\"padding: 20px; background: lightblue;\">\n  Outer\n  <div id=\"inner\" style=\"padding: 20px; background: lightcoral;\">\n    Inner\n  </div>\n</div>\n\n// JavaScript\nconst outer = document.getElementById('outer');\nconst inner = document.getElementById('inner');\n\nouter.addEventListener('click', () => console.log('Outer (Bubbling)'), false); // Default: Bubbling\ninner.addEventListener('click', () => console.log('Inner (Bubbling)'), false); // Default: Bubbling\nouter.addEventListener('click', () => console.log('Outer (Capturing)'), true);  // Capturing\ninner.addEventListener('click', () => console.log('Inner (Capturing)'), true);  // Capturing\n\n// Click on 'Inner':\n// Output order:\n// Outer (Capturing)\n// Inner (Capturing)\n// Inner (Bubbling)\n// Outer (Bubbling)\n",
              "explanation": "This example demonstrates the order of event listeners during capturing and bubbling phases. When 'Inner' is clicked, the event first travels down (capturing), then reaches the target, and finally bubbles up.",
              "language": "html+javascript"
            },
            {
              "id": "example_dom_event_3",
              "title": "stopPropagation vs stopImmediatePropagation",
              "code": "<!-- HTML Structure -->\n<button id=\"myButton\">Click me</button>\n<div id=\"parentDiv\">Parent Div</div>\n\n// JavaScript\nconst button = document.getElementById('myButton');\nconst parentDiv = document.getElementById('parentDiv');\n\nbutton.addEventListener('click', (event) => {\n  console.log('Button Listener 1');\n  event.stopPropagation(); // Stops bubbling to parentDiv\n  // event.stopImmediatePropagation(); // Would also stop 'Button Listener 2' from running\n});\n\nbutton.addEventListener('click', () => {\n  console.log('Button Listener 2'); // This will still run if only stopPropagation is used\n});\n\nparentDiv.addEventListener('click', () => {\n  console.log('Parent Div Listener'); // This will NOT run due to stopPropagation on button\n});\n",
              "explanation": "`stopPropagation()` prevents the click event from bubbling up to `parentDiv`. However, `Button Listener 2` (another listener on the *same* `button` element) still executes. If `stopImmediatePropagation()` were used instead, `Button Listener 2` would also be prevented from running.",
              "language": "html+javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "DOM",
            "Events",
            "Event Propagation",
            "JavaScript",
            "Browser APIs",
            "Performance"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "JavaScript Fundamentals",
            "DOM Manipulation"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Advanced DOM",
            "React Event System",
            "Performance Optimization"
          ]
        },
        {
          "id": "theory_web_accessibility",
          "title": "Web Accessibility (a11y)",
          "content": "Web Accessibility (often abbreviated as 'a11y' because there are 11 letters between 'a' and 'y') is the practice of designing and developing websites, tools, and technologies so that people with disabilities can use them effectively. This includes individuals with auditory, cognitive, neurological, physical, speech, and visual disabilities.\n\n## Core Principles\nAccessibility is about ensuring equal access and opportunity. It involves adhering to standards and best practices to remove barriers that prevent people with disabilities from interacting with or accessing digital content. Key aspects include:\n-   **Perceivable**: Information and user interface components must be presentable to users in ways they can perceive (e.g., provide text alternatives for images, captions for videos, sufficient color contrast).\n-   **Operable**: User interface components and navigation must be operable (e.g., keyboard navigability, enough time to read and use content, no seizures).\n-   **Understandable**: Information and the operation of user interface must be understandable (e.g., readable and understandable text, predictable functionality).\n-   **Robust**: Content must be robust enough that it can be interpreted reliably by a wide variety of user agents, including assistive technologies.\n\n## Key Standards and Techniques\n-   **WCAG (Web Content Accessibility Guidelines)**: The primary international standard for web accessibility, published by the W3C. It provides a set of guidelines and success criteria for making web content more accessible.\n-   **Semantic HTML**: Using HTML elements for their intended purpose (e.g., `<button>` for buttons, `<nav>` for navigation, `<header>`, `<footer>`, `<main>`, `<article>`, `<aside>`). Semantic HTML provides inherent meaning and structure that assistive technologies can understand.\n-   **Text Alternatives (`alt` attributes)**: Providing descriptive `alt` text for images (`<img src=\"cat.jpg\" alt=\"A fluffy orange cat sleeping on a chair\">`) so screen readers can convey visual information to users who cannot see the image.\n-   **Keyboard Navigability**: Ensuring all interactive elements can be accessed and operated using only a keyboard (e.g., `Tab` key for navigation, `Enter`/`Space` for activation). Proper focus management is essential.\n-   **Sufficient Color Contrast**: Ensuring there's enough contrast between text and its background for readability, especially for users with visual impairments.\n-   **ARIA (Accessible Rich Internet Applications)**: A set of attributes (`role`, `aria-label`, `aria-describedby`, `aria-live`, etc.) that define ways to make web content and web applications more accessible to people with disabilities, especially those with dynamic content and advanced UI controls developed with JavaScript. ARIA helps bridge the gap where native HTML elements are insufficient for conveying meaning to assistive technologies.\n\n## Benefits of Accessibility\nAccessibility benefits everyone, not just people with disabilities. It improves SEO, usability for mobile users, users with slow internet, and older users. It also demonstrates social responsibility and can be a legal requirement.",
          "examples": [
            {
              "id": "example_a11y_1",
              "title": "Semantic HTML vs Non-Semantic HTML",
              "code": "<!-- Non-semantic (Div Soup) -->\n<div onclick=\"doSomething()\" style=\"cursor: pointer;\">Click me</div>\n\n<!-- Semantic and Accessible -->\n<button type=\"button\">Click me</button>\n\n<!-- Image with alt text -->\n<img src=\"product.jpg\" alt=\"A sleek silver smartphone with a large display\" />\n",
              "explanation": "The semantic `<button>` element is inherently accessible: it's focusable by keyboard, actionable with Space/Enter, and conveys its purpose to assistive technologies without extra effort. The non-semantic `div` requires significant extra work (e.g., `tabindex`, ARIA roles, event listeners for keyboard) to achieve similar accessibility. The `alt` attribute for images is crucial for screen reader users.",
              "language": "html"
            },
            {
              "id": "example_a11y_2",
              "title": "ARIA Attributes for Dynamic Content",
              "code": "<!-- HTML -->\n<button aria-expanded=\"false\" aria-controls=\"menu-items\">Toggle Menu</button>\n<ul id=\"menu-items\" role=\"menu\" hidden>\n  <li role=\"menuitem\"><a href=\"#\">Item 1</a></li>\n  <li role=\"menuitem\"><a href=\"#\">Item 2</a></li>\n</ul>\n\n// JavaScript (simplified for concept)\nconst toggleButton = document.querySelector('button');\nconst menu = document.getElementById('menu-items');\n\ntoggleButton.addEventListener('click', () => {\n  const isExpanded = toggleButton.getAttribute('aria-expanded') === 'true';\n  toggleButton.setAttribute('aria-expanded', !isExpanded);\n  menu.hidden = isExpanded;\n});\n",
              "explanation": "This example uses ARIA attributes (`aria-expanded`, `aria-controls`, `role=\"menu\"`, `role=\"menuitem\"`) to provide semantic meaning and state information for a custom toggle menu that is not natively supported by HTML. Screen readers can use this information to inform users about the menu's state and structure.",
              "language": "html+javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "Accessibility",
            "A11y",
            "WCAG",
            "Semantic HTML",
            "ARIA",
            "Frontend Development",
            "Inclusive Design"
          ],
          "technology": "HTML, CSS, JavaScript",
          "prerequisites": [
            "HTML Basics",
            "CSS Basics",
            "JavaScript Fundamentals"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Advanced Frontend",
            "UI/UX Design",
            "Product Development"
          ]
        },
        {
          "id": "theory_virtual_dom",
          "title": "Virtual DOM (VDOM) and Reconciliation",
          "content": "The Virtual DOM (VDOM) is a programming concept used by libraries like React, Vue, and others to optimize UI rendering performance. It's an abstract, lightweight copy of the 'real' (browser) DOM kept in memory. The core idea is to minimize direct manipulations of the actual DOM, which are computationally expensive.\n\n## How Virtual DOM Works\n1.  **Initial Render**: When a component first renders, the rendering library (e.g., React) creates a Virtual DOM tree representing the UI. This VDOM tree is then used to construct the actual browser DOM.\n2.  **State/Prop Update**: When the application's state or props change, instead of directly updating the real DOM, the library creates a *new* Virtual DOM tree.\n3.  **Diffing (Reconciliation)**: The library then compares this new VDOM tree with the previous VDOM snapshot. This comparison process is called 'diffing'. It identifies the minimal set of differences between the two trees.\n4.  **Batch Updates**: Once the differences are determined, the library calculates the most efficient way to apply these changes to the actual browser DOM. Multiple updates are often batched together and applied in a single pass to further optimize performance.\n5.  **Real DOM Update**: Only the necessary changes are then applied to the real DOM, leading to fewer and more targeted DOM manipulations.\n\n## Benefits of Virtual DOM\n-   **Performance Optimization**: Minimizes direct DOM manipulations, which are slow. By updating only the necessary parts of the DOM, VDOM significantly improves rendering efficiency.\n-   **Cross-Platform Compatibility**: The VDOM abstraction makes it easier for libraries to support different rendering environments (e.g., web, native mobile, desktop), as the core rendering logic is decoupled from specific DOM APIs.\n-   **Simplified Development**: Developers can treat the UI as a function of state without worrying about the specifics of DOM manipulation. The library handles the updates efficiently.\n-   **Predictable Updates**: The VDOM ensures that updates are applied in a controlled and predictable manner.\n\n## Limitations/Considerations\n-   **Memory Usage**: Maintaining two copies of the DOM (virtual and real) can consume more memory, though the virtual DOM is typically lighter.\n-   **Overhead for Small Updates**: For very small, isolated updates, the overhead of diffing and reconciliation might sometimes be slightly more than direct DOM manipulation, but this is rare in complex applications.\n\n## Comparison with Real DOM\nThe Real DOM (Document Object Model) is a tree-structure interface that browsers use to represent HTML documents. It's a programming interface for web documents. Browsers expose APIs to interact with this DOM (e.g., `document.createElement`, `element.appendChild`). Direct manipulation of the Real DOM can be slow because each change often triggers re-renders, reflows (recalculating element positions and dimensions), and repaints (redrawing elements) of parts of the page, which are expensive operations.",
          "examples": [
            {
              "id": "example_virtual_dom_1",
              "title": "Conceptual VDOM Update Flow",
              "code": "/* \n  Conceptual steps in a React-like VDOM update:\n*/\n\n// 1. Initial Render: Component state initializes, VDOM tree 1 is created.\nconst vdomTree1 = {\n  type: 'div',\n  props: { className: 'container' },\n  children: [\n    { type: 'h1', props: {}, children: ['Hello'] },\n    { type: 'p', props: {}, children: ['World'] }\n  ]\n};\n// Render vdomTree1 to actual DOM\n\n// 2. State Update: User clicks a button, state changes.\n//    A new VDOM tree 2 is created based on the new state.\nconst vdomTree2 = {\n  type: 'div',\n  props: { className: 'container' },\n  children: [\n    { type: 'h1', props: {}, children: ['Hello'] },\n    { type: 'p', props: {}, children: ['React!'] } // 'World' changed to 'React!'\n  ]\n};\n\n// 3. Diffing: Compare vdomTree1 with vdomTree2.\n//    Identifies that only the text content of the <p> element changed.\n\n// 4. Batch Update & Real DOM Update:\n//    React generates a single efficient DOM operation:\n//    `document.querySelector('p').textContent = 'React!';`\n//    No need to re-render the entire <div> or <h1>.\n",
              "explanation": "This conceptual example illustrates how React's VDOM works. Instead of recreating the entire `div` or even the `h1` and `p` elements, the diffing algorithm identifies only the minimal change required (updating the text content of the `p` tag) and applies only that specific change to the real DOM.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "Virtual DOM",
            "Reconciliation",
            "React",
            "Performance",
            "Frontend Architecture",
            "JavaScript"
          ],
          "technology": "React, JavaScript",
          "prerequisites": [
            "JavaScript Fundamentals",
            "DOM Manipulation",
            "Basic Understanding of Frontend Frameworks"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "React Performance Optimization",
            "Custom UI Libraries"
          ]
        },
        {
          "id": "theory_service_workers",
          "title": "Service Workers and Offline Capabilities",
          "content": "Service Workers are a type of web worker, a JavaScript file that runs in the background, separate from the main browser thread. They act as a programmable proxy between the browser and the network, enabling powerful features like offline experiences, push notifications, and background synchronization. They are a core component of Progressive Web Apps (PWAs).\n\n## Key Capabilities\n-   **Network Interception (Fetch Event)**: The most powerful feature. Service Workers can intercept all network requests made by pages under their scope. This allows them to decide how to respond to requests, e.g., by serving cached content, fetching from the network, or generating a response dynamically. The `self.addEventListener('fetch', event => {})` listener is used for this purpose.\n-   **Caching**: With the `CacheStorage` API, Service Workers can store and retrieve network responses. This is fundamental for offline support and faster loading times.\n-   **Push Notifications**: Enabling web applications to receive messages pushed from a server, even when the user is not actively using the application.\n-   **Background Sync**: Allowing deferred actions (e.g., submitting forms) to be synchronized with a server when a stable network connection is detected.\n-   **Offline Experience**: By combining network interception and caching, Service Workers can ensure that a web application remains usable even when the user is offline.\n\n## Service Worker Lifecycle\n1.  **Registration**: A web page registers a Service Worker (`navigator.serviceWorker.register('./sw.js')`).\n2.  **Installation**: The browser downloads the Service Worker file. The `install` event is fired. This is a good time to pre-cache static assets that are essential for the app's offline functionality.\n3.  **Activation**: Once installed, the Service Worker activates. The `activate` event is fired. This is a good time to clean up old caches or migrate data. A new Service Worker won't activate until all pages controlled by the old one are closed or refreshed.\n4.  **Controlling Pages**: After activation, the Service Worker can 'control' web pages within its defined scope. Controlled pages will have their network requests intercepted.\n5.  **Update**: If a new version of the Service Worker file is detected, it's downloaded and installed in the background, but it won't activate until all old clients are gone (closed/reloaded). `self.skipWaiting()` can force immediate activation for testing or specific use cases.\n\n## Caching Strategies\n-   **Cache First**: Try to get a response from the cache; if not found, go to the network.\n-   **Network First**: Try to get a response from the network; if that fails (e.g., offline), fall back to the cache.\n-   **Stale-While-Revalidate**: Serve content from the cache immediately, then fetch an updated version from the network in the background and update the cache for future requests.\n-   **Cache Only**: Serve only from the cache (useful for static assets pre-cached during install).\n-   **Network Only**: Serve only from the network (useful for non-cached dynamic content).\n\nService Workers run in a separate thread and do not have access to the DOM.",
          "examples": [
            {
              "id": "example_service_worker_1",
              "title": "Basic Service Worker Registration",
              "code": "// In your main JavaScript file (e.g., index.js)\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js')\n      .then(registration => {\n        console.log('Service Worker registered with scope:', registration.scope);\n      })\n      .catch(error => {\n        console.error('Service Worker registration failed:', error);\n      });\n  });\n}\n\n// In your Service Worker file (sw.js)\nconsole.log('Service Worker loaded!');\n",
              "explanation": "This code snippet shows how a Service Worker (`sw.js`) is registered in the main application's JavaScript. The `if ('serviceWorker' in navigator)` check ensures browser compatibility. The `register()` method returns a Promise that resolves with a `ServiceWorkerRegistration` object.",
              "language": "javascript"
            },
            {
              "id": "example_service_worker_2",
              "title": "Cache-First Strategy using Fetch Event",
              "code": "// In your Service Worker file (sw.js)\nconst CACHE_NAME = 'my-app-cache-v1';\nconst urlsToCache = [\n  '/',\n  '/index.html',\n  '/styles.css',\n  '/script.js'\n];\n\nself.addEventListener('install', event => {\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then(cache => {\n        console.log('Opened cache');\n        return cache.addAll(urlsToCache);\n      })\n  );\n});\n\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request)\n      .then(response => {\n        // Cache hit - return response\n        if (response) {\n          console.log('Serving from cache:', event.request.url);\n          return response;\n        }\n        // No cache hit - fetch from network\n        console.log('Fetching from network:', event.request.url);\n        return fetch(event.request)\n          .then(networkResponse => {\n            // Check if we received a valid response\n            if (!networkResponse || networkResponse.status !== 200 || networkResponse.type !== 'basic') {\n              return networkResponse;\n            }\n            // IMPORTANT: Clone the response. A response is a stream\n            // and can only be consumed once. We must clone it so that\n            // we can consume the original and send one to the browser.\n            const responseToCache = networkResponse.clone();\n            caches.open(CACHE_NAME)\n              .then(cache => {\n                cache.put(event.request, responseToCache);\n              });\n            return networkResponse;\n          });\n      })\n  );\n});\n\nself.addEventListener('activate', event => {\n  const cacheWhitelist = [CACHE_NAME];\n  event.waitUntil(\n    caches.keys().then(cacheNames => {\n      return Promise.all(\n        cacheNames.map(cacheName => {\n          if (cacheWhitelist.indexOf(cacheName) === -1) {\n            console.log('Deleting old cache:', cacheName);\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n});\n",
              "explanation": "This comprehensive example demonstrates a 'cache-first' strategy. During the `install` phase, essential assets are pre-cached. In the `fetch` phase, the Service Worker first tries to find a match in the cache. If found, it returns the cached response. If not, it fetches from the network, caches the response for future use, and then returns it to the page. The `activate` phase handles cleaning up old caches during updates.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "Service Workers",
            "PWA",
            "Offline",
            "Caching",
            "Web Workers",
            "JavaScript",
            "Web Performance"
          ],
          "technology": "JavaScript",
          "prerequisites": [
            "JavaScript Asynchronous Programming",
            "Promises",
            "Fetch API"
          ],
          "complexity": 8,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "requiredFor": [
            "Progressive Web Apps",
            "Offline-first Applications"
          ]
        },
        {
          "id": "theory_web_performance_optimization",
          "title": "Web Page Performance Optimization",
          "content": "Optimizing web page performance is crucial for user experience, SEO, and business goals. A fast-loading website leads to better engagement, lower bounce rates, and improved conversions. Performance optimization involves a variety of techniques across different layers of the web stack.\n\n## Key Optimization Approaches\n1.  **Minimizing HTTP Requests**: Each asset (image, CSS, JS file, font) requires a separate HTTP request. Reducing the number of requests can significantly speed up loading.\n    *   **Techniques**: Bundling CSS/JS files into fewer larger files, using CSS sprites (combining multiple small images into one), inline small images/CSS/JS (for critical path).\n2.  **Optimizing Assets**: Reducing the file size of resources without compromising quality.\n    *   **Techniques**: Compressing images (lossy/lossless), minifying CSS/JS/HTML (removing whitespace, comments, shortening variable names), optimizing fonts.\n3.  **Using Browser Caching Effectively**: Instructing browsers to store resources locally so they don't need to be re-downloaded on subsequent visits.\n    *   **Techniques**: Setting appropriate `Cache-Control` headers (`max-age`, `no-cache`, `public`, `private`), using `ETags` for conditional requests.\n4.  **Leveraging Content Delivery Networks (CDNs)**: Distributing assets across multiple geographically dispersed servers. Users download assets from the closest server, reducing latency.\n5.  **Optimizing Rendering Path (Critical Rendering Path)**: Prioritizing the loading and processing of resources that are essential for the initial render of the page (above-the-fold content).\n    *   **Techniques**: Reducing render-blocking resources (CSS, JS), inlining critical CSS, deferring non-critical JS (`defer`, `async`), server-side rendering (SSR) or static site generation (SSG).\n6.  **Efficient JavaScript**: JavaScript can block rendering and cause long tasks, impacting responsiveness.\n    *   **Techniques**: Code splitting (loading JS only when needed), tree shaking (removing unused code), debouncing/throttling event handlers, using `requestAnimationFrame` for animations (browser-optimized timing).\n7.  **Lazy Loading Offscreen Images and Components**: Loading resources only when they are needed, typically when they enter the viewport.\n    *   **Techniques**: `loading=\"lazy\"` attribute for images/iframes, Intersection Observer API for custom lazy loading of components or videos.\n8.  **Using Modern Image Formats**: Employing formats that offer better compression and quality.\n    *   **Techniques**: WebP, AVIF, SVG for vector graphics. Serving appropriate formats based on browser support (`<picture>` element).\n9.  **Server-Side Optimizations**: Improving the responsiveness and efficiency of the server.\n    *   **Techniques**: Gzip/Brotli compression for text-based assets, fast server response time, efficient database queries.\n10. **Preloading, Prefetching, Preconnecting**: Giving hints to the browser about resources that will be needed soon.\n    *   **`preload`**: For resources needed in the current navigation as soon as possible (e.g., critical fonts, CSS, JS).\n    *   **`prefetch`**: For resources that might be needed in a future navigation.\n    *   **`preconnect`**: For establishing early connections to third-party origins.",
          "examples": [
            {
              "id": "example_perf_opt_1",
              "title": "Lazy Loading Images",
              "code": "<!-- HTML with native lazy loading -->\n<img src=\"image-placeholder.jpg\" data-src=\"actual-image.jpg\" alt=\"A beautiful landscape\" loading=\"lazy\" />\n\n<!-- JavaScript to replace placeholder with actual image on load (for older browsers) -->\n<script>\n  document.addEventListener('DOMContentLoaded', () => {\n    const lazyImages = document.querySelectorAll('img[loading=\"lazy\"]');\n    lazyImages.forEach(img => {\n      if ('IntersectionObserver' in window) {\n        // Use IntersectionObserver for modern browsers\n        let observer = new IntersectionObserver((entries, observer) => {\n          entries.forEach(entry => {\n            if (entry.isIntersecting) {\n              const imgElement = entry.target;\n              imgElement.src = imgElement.dataset.src;\n              observer.unobserve(imgElement);\n            }\n          });\n        });\n        observer.observe(img);\n      } else {\n        // Fallback for older browsers\n        img.src = img.dataset.src;\n      }\n    });\n  });\n</script>\n",
              "explanation": "This example shows two ways to lazy load images: using the native `loading=\"lazy\"` attribute (modern browsers) and a JavaScript fallback with `IntersectionObserver` or direct assignment. Lazy loading ensures images outside the viewport are only loaded when they become visible, improving initial page load time.",
              "language": "html+javascript"
            },
            {
              "id": "example_perf_opt_2",
              "title": "Preload and Defer Scripts",
              "code": "<!-- Preload a critical CSS file (as=style is important) -->\n<link rel=\"preload\" href=\"/css/critical.css\" as=\"style\" onload=\"this.rel='stylesheet'\">\n<noscript><link rel=\"stylesheet\" href=\"/css/critical.css\"></noscript>\n\n<!-- Defer non-critical JavaScript -->\n<script src=\"/js/non-critical.js\" defer></script>\n\n<!-- Async script (loads independently, executes when ready) -->\n<script src=\"/js/analytics.js\" async></script>\n",
              "explanation": "The `preload` hint tells the browser to fetch `critical.css` with high priority without blocking rendering. The `onload` attribute then applies it as a stylesheet. `defer` scripts execute after HTML parsing is complete but before `DOMContentLoaded`. `async` scripts load and execute independently of the HTML parsing, suitable for non-blocking scripts like analytics.",
              "language": "html"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "Web Performance",
            "Optimization",
            "Frontend Engineering",
            "Browser APIs",
            "HTTP",
            "Caching",
            "CDN",
            "Core Web Vitals"
          ],
          "technology": "HTML, CSS, JavaScript, HTTP",
          "prerequisites": [
            "HTML Basics",
            "CSS Basics",
            "JavaScript Fundamentals",
            "HTTP Protocol"
          ],
          "complexity": 9,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "Large-scale Applications",
            "Performance Auditing",
            "DevOps"
          ]
        },
        {
          "id": "theory_same_origin_policy",
          "title": "Browser Security: Same-Origin Policy (SOP) and CORS",
          "content": "The Same-Origin Policy (SOP) is a fundamental security mechanism implemented by web browsers. It restricts how a document or script loaded from one \"origin\" can interact with a resource from another \"origin.\" This policy is crucial for preventing malicious scripts on one website from accessing sensitive data on another website that a user might be logged into.\n\n## Definition of an Origin\nTwo URLs are considered to have the same origin if they have the identical:\n1.  **Protocol**: (e.g., `http`, `https`)\n2.  **Hostname**: (e.g., `www.example.com`)\n3.  **Port**: (e.g., `80`, `443` - if explicitly specified)\n\nFor example, `http://example.com:80/path/to/page.html` has the same origin as `http://example.com/another/page.html` (port 80 is default for HTTP), but a different origin from `https://example.com/`, `http://sub.example.com/`, or `http://example.com:8080/`.\n\n## Implementation in the Browser\nBrowsers enforce SOP by default. When a script requests a resource from a different origin, the browser typically blocks direct read access to the response data unless explicit permission is granted by the target server. Write actions (like sending form data) might sometimes be allowed, but reading the response is restricted.\n\n## Browser APIs Affected by SOP\nSOP primarily applies to interactions that allow scripts to read data from another origin. This includes:\n1.  **JavaScript access to DOM of other origins**: A script loaded from `example.com` cannot directly access the content (e.g., elements, forms) within an `<iframe>` whose source is `anothersite.com`.\n2.  **XMLHttpRequest (XHR) and Fetch API**: Network requests made via `XMLHttpRequest` or `fetch()` to a different origin are blocked from reading the response unless the server explicitly allows it using CORS headers.\n3.  **Web Storage (localStorage, sessionStorage)**: Data stored in `localStorage` or `sessionStorage` is scoped to its origin and cannot be accessed by scripts from other origins.\n4.  **WebSockets**: While WebSocket connections are technically a different protocol, the initial handshake often follows SOP, and the server must explicitly allow cross-origin connections.\n5.  **`canvas` (tainting)**: If an image from a different origin is loaded onto a `<canvas>`, the canvas becomes 'tainted', and its content cannot be read back by JavaScript. This prevents sensitive image data from being stolen.\n\n## How to Bypass SOP: Cross-Origin Resource Sharing (CORS)\nCORS is a W3C standard that allows a server to explicitly grant permission for cross-origin requests. It works by adding special HTTP headers to responses:\n-   `Access-Control-Allow-Origin`: Specifies which origins are allowed to access the resource (e.g., `*` for any origin, or a specific domain like `http://example.com`).\n-   `Access-Control-Allow-Methods`: Specifies which HTTP methods (GET, POST, PUT, DELETE, etc.) are allowed.\n-   `Access-Control-Allow-Headers`: Specifies which HTTP headers are allowed in the request.\n-   `Access-Control-Allow-Credentials`: Indicates whether the server allows credentials (cookies, HTTP authentication) to be sent with the request.\n-   **Preflight Requests**: For certain 'complex' requests (e.g., those using HTTP methods other than GET/POST/HEAD, or custom headers), the browser will automatically send an `OPTIONS` preflight request *before* the actual request. This preflight checks if the server is willing to accept the actual request. The server must respond to the `OPTIONS` request with appropriate CORS headers.",
          "examples": [
            {
              "id": "example_sop_1",
              "title": "SOP Blocking XHR Request",
              "code": "// Script running on http://example.com\n\n// Attempt to fetch data from a different origin (http://api.anothersite.com)\nfetch('http://api.anothersite.com/data')\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.error('Fetch error:', error));\n\n// Without proper CORS headers on api.anothersite.com, this will result in a \n// 'Cross-Origin Request Blocked' error in the browser console, and the script\n// will not be able to read the response.\n",
              "explanation": "This example demonstrates how SOP blocks a `fetch` request to a different origin by default. The browser will prevent the client-side JavaScript from accessing the response if the `api.anothersite.com` server does not send the necessary `Access-Control-Allow-Origin` header.",
              "language": "javascript"
            },
            {
              "id": "example_sop_2",
              "title": "Server-Side CORS Configuration (Node.js/Express)",
              "code": "// Example of server-side CORS configuration using Express.js\nconst express = require('express');\nconst app = express();\n\napp.use((req, res, next) => {\n  // Allow requests from a specific origin\n  res.setHeader('Access-Control-Allow-Origin', 'http://example.com'); \n  // Or allow all origins (less secure for sensitive data)\n  // res.setHeader('Access-Control-Allow-Origin', '*');\n\n  // Allow specific methods\n  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');\n\n  // Allow specific headers\n  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n\n  // Allow credentials (cookies, HTTP auth)\n  res.setHeader('Access-Control-Allow-Credentials', 'true');\n\n  // Handle preflight requests\n  if (req.method === 'OPTIONS') {\n    res.sendStatus(200);\n  } else {\n    next();\n  }\n});\n\napp.get('/data', (req, res) => {\n  res.json({ message: 'Data from cross-origin!' });\n});\n\napp.listen(3000, () => console.log('Server running on port 3000'));\n",
              "explanation": "This Node.js/Express example demonstrates how a server can send CORS headers to allow cross-origin requests. By setting `Access-Control-Allow-Origin` to `http://example.com`, only requests from that specific origin will be permitted to read the response. It also shows how to handle `OPTIONS` preflight requests.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [],
          "relatedTasks": [],
          "tags": [
            "Security",
            "SOP",
            "CORS",
            "Browser Security",
            "HTTP",
            "Frontend Security",
            "Web APIs"
          ],
          "technology": "HTTP, Browser Security, JavaScript",
          "prerequisites": [
            "HTTP Protocol",
            "Web Security Basics",
            "Fetch API"
          ],
          "complexity": 8,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "requiredFor": [
            "API Integration",
            "Web Application Security",
            "Backend Development"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_user_search_1",
          "topic": "React Component Structure and Hooks",
          "level": "easy",
          "type": "mcq",
          "question": "Which React hook is primarily used in the `UserSearch` component to manage the search input value and the filtered list of users?",
          "answer": "`useState`",
          "options": [
            "`useReducer`",
            "`useState`",
            "`useContext`",
            "`useEffect`"
          ],
          "analysisPoints": [
            "`useState` is used for managing component-local state like input values (`searchText`) and data lists (`users`).",
            "`useEffect` is for side effects, often triggered by state changes, but not for direct state definition.",
            "`useReducer` is for more complex state logic, and `useContext` for global state."
          ],
          "keyConcepts": [
            "React Hooks",
            "State Management",
            "Functional Components"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental React hooks",
            "Correct identification of hook purpose"
          ],
          "example": "```typescript\nimport React, { useState } from 'react';\n\nfunction MyComponent() {\n  const [count, setCount] = useState(0);\n  const [name, setName] = useState('');\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n      <input type=\"text\" value={name} onChange={e => setName(e.target.value)} />\n    </div>\n  );\n}\n```",
          "tags": [
            "React",
            "useState",
            "Hooks",
            "Beginner"
          ],
          "prerequisites": [
            "React Basics",
            "JavaScript Variables"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_user_search_2",
          "topic": "React useEffect and Debouncing",
          "level": "medium",
          "type": "open",
          "question": "The `UserSearch` component uses `useEffect` with a `setTimeout` and `clearTimeout` for its search logic. Explain why this pattern is used and what problem it solves.",
          "answer": "This pattern is known as **debouncing**. It is used to delay the execution of a function until a certain amount of time has passed without any further invocations. In the `UserSearch` component, it's applied to the search input.\n\n**Problem Solved**: When a user types into a search box, the `onChange` event fires rapidly for every keystroke. Without debouncing, each keystroke would trigger an immediate search operation (e.g., a filter on local data or an API call).\n\n*   **Excessive Operations**: This leads to an excessive number of search operations, which is inefficient and can cause performance issues (e.g., too many network requests, high CPU usage).\n*   **Poor User Experience**: The UI might feel sluggish or jumpy if re-renders happen too frequently.\n\n**How `setTimeout` and `clearTimeout` solve it**: The `useEffect` hook sets a timer (`setTimeout`) whenever the `searchText` changes. If `searchText` changes again before the timer expires, the previous timer is cleared (`clearTimeout`) and a new one is set. The search logic (filtering `allUsers`) only executes when the user pauses typing for the specified debounce duration (e.g., 500ms). This ensures the search operation runs only once per pause in typing, significantly optimizing performance and improving user experience.",
          "analysisPoints": [
            "Identifies 'debouncing' as the pattern.",
            "Explains the problem of frequent re-renders/API calls without debouncing.",
            "Describes how `setTimeout` and `clearTimeout` work together to delay and cancel previous operations.",
            "Connects the solution back to performance and user experience benefits."
          ],
          "keyConcepts": [
            "Debouncing",
            "React useEffect Hook",
            "Performance Optimization",
            "Event Handling"
          ],
          "evaluationCriteria": [
            "Understanding of debouncing concept",
            "Ability to explain the mechanism of `setTimeout` and `clearTimeout` for debouncing",
            "Insight into performance implications in React applications"
          ],
          "example": "See `example_react_user_search_3` in `theory_react_user_search` for a practical code example.",
          "tags": [
            "React",
            "useEffect",
            "Performance",
            "Debouncing",
            "JavaScript"
          ],
          "prerequisites": [
            "React Hooks",
            "JavaScript Timers",
            "Event Loop"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_user_search_3",
          "topic": "Conditional and List Rendering in React",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of the `key` prop when rendering a list of elements in React, as seen with `users.map(...)` in `UserSearch`?",
          "answer": "The `key` prop helps React identify which items have changed, are added, or are removed. Keys should be unique among siblings to help React efficiently update the UI, improving performance and preventing bugs, especially when list items change order or are dynamically added/removed.",
          "analysisPoints": [
            "Identifies the primary role of `key` in reconciliation.",
            "Emphasizes uniqueness among siblings.",
            "Mentions performance and bug prevention (e.g., incorrect state updates, reordering issues)."
          ],
          "keyConcepts": [
            "React List Rendering",
            "Reconciliation",
            "Key Prop"
          ],
          "evaluationCriteria": [
            "Recall of fundamental React list rendering rules",
            "Understanding of `key`'s role in React's internal processes"
          ],
          "example": null,
          "tags": [
            "React",
            "List Rendering",
            "Key Prop",
            "Flashcard"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_user_search_4",
          "topic": "React State vs Props",
          "level": "medium",
          "type": "mcq",
          "question": "If the `UserSearch` component were to receive the initial list of `allUsers` from a parent component, how would this data typically be passed, and why is that method preferred over using `useState` for `allUsers` directly within `UserSearch`?",
          "answer": "As a prop; because props are immutable and passed from parent to child, representing external data, whereas state is mutable internal data.",
          "options": [
            "As a prop; because props are immutable and passed from parent to child, representing external data, whereas state is mutable internal data.",
            "As a state variable; because state is the only way to manage data that changes over time.",
            "Via `useContext`; because `allUsers` is likely a global resource.",
            "By directly importing `allUsers` from a data file; because it avoids prop drilling."
          ],
          "analysisPoints": [
            "Correctly identifies 'prop' as the mechanism for passing external data.",
            "Distinguishes between props (immutable, external) and state (mutable, internal).",
            "Highlights the one-way data flow in React.",
            "Incorrect options confuse state with props or suggest less common/appropriate methods for this scenario."
          ],
          "keyConcepts": [
            "React Props",
            "React State",
            "Data Flow"
          ],
          "evaluationCriteria": [
            "Understanding of React's data flow principles",
            "Ability to differentiate between props and state usage"
          ],
          "example": "```typescript\n// ParentComponent.tsx\nfunction ParentComponent() {\n  const usersData = [...]; // Data coming from API or elsewhere\n  return <UserSearch allUsers={usersData} />;\n}\n\n// UserSearch.tsx\ninterface UserSearchProps {\n  allUsers: User[];\n}\n\nfunction UserSearch({ allUsers }: UserSearchProps) {\n  const [searchText, setSearchText] = useState('');\n  // ... useEffect to filter allUsers based on searchText ...\n  // allUsers is received as a prop, not managed as state here.\n}\n```",
          "tags": [
            "React",
            "Props",
            "State",
            "Data Flow"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dom_events_1",
          "topic": "DOM Events: mouseleave vs mouseout",
          "level": "easy",
          "type": "mcq",
          "question": "What is the principal difference between the `mouseleave` and `mouseout` events?",
          "answer": "`mouseout` fires when the mouse pointer moves out of an element or any of its children; `mouseleave` fires only when the mouse pointer moves out of the bounds of the element it is registered on and does not bubble.",
          "options": [
            "`mouseleave` bubbles, `mouseout` does not.",
            "`mouseout` fires when the mouse pointer moves out of an element or any of its children; `mouseleave` fires only when the mouse pointer moves out of the bounds of the element it is registered on and does not bubble.",
            "`mouseleave` is deprecated, `mouseout` is preferred.",
            "There is no practical difference; they are interchangeable."
          ],
          "analysisPoints": [
            "Correctly identifies the difference in behavior concerning child elements.",
            "Highlights the bubbling nature of `mouseout` and the non-bubbling nature of `mouseleave`.",
            "Emphasizes `mouseleave` for specific UI scenarios like tooltips.",
            "Incorrect options contain false information about deprecation or interchangeability."
          ],
          "keyConcepts": [
            "DOM Events",
            "Event Bubbling",
            "Event Target"
          ],
          "evaluationCriteria": [
            "Understanding of specific event behaviors",
            "Knowledge of event propagation"
          ],
          "example": "```html\n<div id=\"parent\" style=\"border: 1px solid black; padding: 20px;\">\n  Parent\n  <div id=\"child\" style=\"border: 1px solid red; padding: 10px; margin-top: 10px;\">Child</div>\n</div>\n<script>\nconst parent = document.getElementById('parent');\nparent.addEventListener('mouseout', () => console.log('Parent mouseout')); // Fires Parent->Child\nparent.addEventListener('mouseleave', () => console.log('Parent mouseleave')); // Only fires Parent->Outside\n</script>\n```",
          "tags": [
            "DOM",
            "Events",
            "JavaScript",
            "Beginner"
          ],
          "prerequisites": [
            "JavaScript Events"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_dom_events_2",
          "topic": "DOM Event Processing Order",
          "level": "easy",
          "type": "flashcard",
          "question": "In what order are user events typically processed in the DOM (e.g., click, mouseover)? FIFO or LIFO?",
          "answer": "FIFO (First-In, First-Out). Events are added to an event queue and processed one by one in the order they occurred.",
          "analysisPoints": [
            "Correctly states FIFO.",
            "Briefly explains the role of the event queue and event loop."
          ],
          "keyConcepts": [
            "Event Loop",
            "Event Queue",
            "DOM Events"
          ],
          "evaluationCriteria": [
            "Recall of event queue behavior",
            "Basic understanding of the event loop"
          ],
          "example": null,
          "tags": [
            "DOM",
            "Events",
            "Event Loop",
            "Flashcard"
          ],
          "prerequisites": [
            "JavaScript Event Loop"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_dom_events_3",
          "topic": "DOM Event Bubbling and Capturing",
          "level": "medium",
          "type": "open",
          "question": "Describe the Event bubbling and Event capturing phases in the HTML DOM. Provide a scenario where understanding both phases is critical.",
          "answer": "Event bubbling and capturing are two phases of event propagation in the HTML DOM, describing the order in which event listeners are triggered on an element's ancestors and descendants.\n\n**Capturing Phase**: When an event occurs on an element, the browser first checks for event listeners starting from the `window` object, then `document`, `<html>`, `<body>`, and down to the parent of the target element. Listeners registered with the `useCapture` argument set to `true` (e.g., `addEventListener('click', handler, true)`) are executed during this phase.\n\n**Target Phase**: The event reaches the actual target element where it originated.\n\n**Bubbling Phase**: After the target phase, the event 'bubbles up' from the target element's parent, through its ancestors, all the way up to the `window` object. Most event handlers are registered for this phase by default (when `useCapture` is `false` or omitted).\n\n**Scenario where understanding both is critical**: **Event Delegation**. If you have a large list of dynamically added or removed items (e.g., `<ul>` with many `<li>`s) and you want to attach a click listener to each `<li>`. Instead of attaching hundreds of listeners, you can attach a single listener to the `<ul>` (the parent). To make event delegation work reliably and handle specific scenarios (e.g., stopping an event that was triggered by a child from affecting a parent's capturing listener), understanding which phase an event is in, and thus which listener will fire first, is crucial. For instance, if you want a `click` on a `li` to trigger a specific action but prevent a general `click` handler on the `body` from also firing (perhaps for a modal close), you need to know if the `body` listener is capturing or bubbling and use `stopPropagation` accordingly.",
          "analysisPoints": [
            "Clearly defines capturing and bubbling phases.",
            "Explains the direction of event flow for each phase.",
            "Mentions the `useCapture` argument in `addEventListener`.",
            "Provides a relevant and practical scenario (event delegation) where this knowledge is critical.",
            "Connects the phases to real-world problem-solving."
          ],
          "keyConcepts": [
            "DOM Events",
            "Event Propagation",
            "Event Bubbling",
            "Event Capturing",
            "Event Delegation"
          ],
          "evaluationCriteria": [
            "Comprehensive explanation of event phases",
            "Ability to provide a practical application of the concepts",
            "Clarity and accuracy of definitions"
          ],
          "example": "```html\n<div id=\"ancestor\">\n  <div id=\"parent\">\n    <button id=\"child\">Click Me</button>\n  </div>\n</div>\n<script>\n  const ancestor = document.getElementById('ancestor');\n  const parent = document.getElementById('parent');\n  const child = document.getElementById('child');\n\n  ancestor.addEventListener('click', (e) => console.log('Ancestor (Capturing)'), true);\n  parent.addEventListener('click', (e) => console.log('Parent (Capturing)'), true);\n  child.addEventListener('click', (e) => console.log('Child (Target)')); // Target/Bubbling default\n  parent.addEventListener('click', (e) => console.log('Parent (Bubbling)'), false);\n  ancestor.addEventListener('click', (e) => console.log('Ancestor (Bubbling)'), false);\n\n  // Clicking 'Click Me' button will output:\n  // Ancestor (Capturing)\n  // Parent (Capturing)\n  // Child (Target)\n  // Parent (Bubbling)\n  // Ancestor (Bubbling)\n</script>\n```",
          "tags": [
            "DOM",
            "Events",
            "Event Propagation",
            "JavaScript"
          ],
          "prerequisites": [
            "JavaScript Events",
            "DOM Structure"
          ],
          "complexity": 6,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dom_events_4",
          "topic": "Controlling Event Propagation",
          "level": "medium",
          "type": "mcq",
          "question": "You have a button with two click listeners attached to it. The first listener calls `event.stopPropagation()`. The button is inside a `div` element, which also has a click listener. What will happen when the button is clicked?",
          "answer": "The first button listener will execute, the second button listener will execute, but the div listener will NOT execute.",
          "options": [
            "Only the first button listener will execute, and no other listeners.",
            "The first button listener will execute, the second button listener will execute, but the div listener will NOT execute.",
            "All three listeners (both button listeners and the div listener) will execute.",
            "The first button listener will execute, but the second button listener and the div listener will NOT execute."
          ],
          "analysisPoints": [
            "Correctly identifies that `stopPropagation()` prevents propagation to *parent/ancestor elements*.",
            "Crucially, it recognizes that `stopPropagation()` *does not* prevent other listeners on the *same element* from running.",
            "Distinguishes `stopPropagation()` from `stopImmediatePropagation()` implicitly."
          ],
          "keyConcepts": [
            "DOM Events",
            "Event Propagation",
            "`stopPropagation()`",
            "`stopImmediatePropagation()`"
          ],
          "evaluationCriteria": [
            "Precise understanding of `stopPropagation()` behavior",
            "Ability to differentiate its effect from `stopImmediatePropagation()`",
            "Predicting event flow in a complex scenario"
          ],
          "example": "```html\n<div id=\"myDiv\">\n  <button id=\"myButton\">Click me</button>\n</div>\n<script>\n  const myButton = document.getElementById('myButton');\n  const myDiv = document.getElementById('myDiv');\n\n  myButton.addEventListener('click', (e) => {\n    console.log('Button Listener 1');\n    e.stopPropagation(); // Stops bubbling to myDiv\n  });\n\n  myButton.addEventListener('click', (e) => {\n    console.log('Button Listener 2'); // This still runs!\n  });\n\n  myDiv.addEventListener('click', (e) => {\n    console.log('Div Listener'); // This will NOT run\n  });\n</script>\n```",
          "tags": [
            "DOM",
            "Events",
            "JavaScript",
            "Event Propagation"
          ],
          "prerequisites": [
            "JavaScript Events",
            "DOM Manipulation"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_dom_events_5",
          "topic": "Event Delegation",
          "level": "hard",
          "type": "code",
          "question": "Implement an event delegation mechanism for a dynamically generated list. The task is to create an unordered list (`<ul>`) and add 10 list items (`<li>`) to it. Each `<li>` should have a unique ID and display 'Item X'. When any `<li>` is clicked, log its ID to the console. You must use only *one* event listener on the `<ul>` element, not individual listeners on each `<li>`.",
          "answer": "```typescript\n// HTML Setup (add this to your HTML body)\n// <ul id=\"myList\"></ul>\n\n// JavaScript solution:\nconst ulElement = document.getElementById('myList');\n\n// Generate list items dynamically\nfor (let i = 1; i <= 10; i++) {\n  const li = document.createElement('li');\n  li.id = `item-${i}`;\n  li.textContent = `Item ${i}`;\n  ulElement.appendChild(li);\n}\n\n// Implement event delegation\nulElement.addEventListener('click', (event) => {\n  // Check if the clicked element is an <li> or a descendant of an <li>\n  const targetLi = event.target.closest('li');\n  \n  // Ensure a valid <li> was clicked within the ul\n  if (targetLi && ulElement.contains(targetLi)) {\n    console.log(`Clicked item ID: ${targetLi.id}`);\n  }\n});\n```",
          "analysisPoints": [
            "Demonstrates understanding of event delegation.",
            "Correctly attaches the listener to the parent `<ul>`.",
            "Uses `event.target` to identify the actual clicked element.",
            "Leverages `closest()` to find the nearest `<li>` ancestor, handling clicks on child elements within an `<li>`.",
            "Includes a check (`ulElement.contains(targetLi)`) to ensure the `<li>` belongs to the correct `<ul>` (though `closest` implicitly handles this in simple cases, it's good practice for robustness).",
            "Dynamically generates elements, showing the benefit of delegation."
          ],
          "keyConcepts": [
            "Event Delegation",
            "DOM Manipulation",
            "Event Object",
            "`event.target`",
            "`closest()`"
          ],
          "evaluationCriteria": [
            "Correct implementation of event delegation.",
            "Effective use of DOM manipulation methods.",
            "Proper handling of `event.target` and `closest()`.",
            "Code cleanliness and efficiency."
          ],
          "example": "```html\n<ul id=\"myList\"></ul>\n```\n```typescript\nconst ul = document.getElementById('myList');\nfor (let i = 0; i < 5; i++) {\n  const li = document.createElement('li');\n  li.textContent = `List Item ${i}`; \n  li.id = `item-${i}`;\n  ul.appendChild(li);\n}\n\nul.addEventListener('click', (event) => {\n  if (event.target.tagName === 'LI') { // Simple check, but closest() is more robust\n    console.log(`Clicked on: ${event.target.id}`);\n  }\n});\n```",
          "tags": [
            "DOM",
            "Events",
            "JavaScript",
            "Coding Challenge",
            "Event Delegation"
          ],
          "prerequisites": [
            "JavaScript DOM Manipulation",
            "Event Listeners"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_a11y_1",
          "topic": "Web Accessibility Fundamentals",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary goal of Web Accessibility (a11y)?",
          "answer": "To design and develop websites, tools, and technologies so that people with disabilities (auditory, cognitive, neurological, physical, speech, visual) can use them effectively and have equal access.",
          "analysisPoints": [
            "Highlights inclusivity as the core.",
            "Mentions different types of disabilities.",
            "Focuses on equal access and effective use."
          ],
          "keyConcepts": [
            "Web Accessibility",
            "Inclusive Design",
            "Disability"
          ],
          "evaluationCriteria": [
            "Basic definition recall",
            "Understanding of core purpose"
          ],
          "example": null,
          "tags": [
            "Accessibility",
            "A11y",
            "Flashcard"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_a11y_2",
          "topic": "Web Accessibility: Alt Attributes",
          "level": "easy",
          "type": "mcq",
          "question": "Why is it important to include an `alt` attribute for images in HTML, and what should it contain?",
          "answer": "It provides a text alternative for screen readers and when images fail to load; it should contain a concise description of the image's content or purpose.",
          "options": [
            "It provides a text alternative for screen readers and when images fail to load; it should contain a concise description of the image's content or purpose.",
            "It's primarily for SEO purposes and should contain keywords related to the image.",
            "It is only necessary for decorative images to hide them from screen readers.",
            "It acts as a tooltip when the user hovers over the image."
          ],
          "analysisPoints": [
            "Correctly identifies the primary purpose for accessibility (screen readers) and fallbacks (image load failure).",
            "Stresses the importance of descriptive content.",
            "Debunks common misconceptions about SEO, decorative images, and tooltips."
          ],
          "keyConcepts": [
            "Accessibility",
            "Alt Text",
            "Semantic HTML",
            "Screen Readers"
          ],
          "evaluationCriteria": [
            "Understanding of `alt` attribute's role in accessibility",
            "Knowledge of best practices for `alt` text content"
          ],
          "example": "```html\n<!-- Good alt text -->\n<img src=\"chart.png\" alt=\"Bar chart showing quarterly sales, Q1: 100, Q2: 150, Q3: 120, Q4: 180\">\n\n<!-- Bad alt text (just keywords or too generic) -->\n<img src=\"chart.png\" alt=\"chart sales data trend analytics\">\n\n<!-- Decorative image (empty alt for screen readers to ignore) -->\n<img src=\"decorative-border.png\" alt=\"\">\n```",
          "tags": [
            "Accessibility",
            "HTML",
            "A11y"
          ],
          "prerequisites": [
            "HTML Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_a11y_3",
          "topic": "Web Accessibility: Keyboard Navigation & ARIA",
          "level": "medium",
          "type": "open",
          "question": "Beyond `alt` attributes and semantic HTML, what are two other critical aspects of web accessibility, and how can ARIA attributes contribute to them?",
          "answer": "**1. Keyboard Navigability**: Ensuring that all interactive elements and content are accessible and operable using only a keyboard (e.g., `Tab`, `Enter`, `Space` keys). This is vital for users who cannot use a mouse, such as those with motor impairments or screen reader users.\n   *   **ARIA Contribution**: ARIA roles and properties can enhance keyboard navigability for custom widgets. For example:\n      *   `aria-expanded`: Indicates if a collapsible section (like a dropdown menu) is currently expanded or collapsed, assisting users in understanding its state.\n      *   `aria-haspopup`: Indicates that an element, when activated, will trigger a popup (e.g., a menu or dialog), informing screen reader users what to expect.\n      *   `role=\"tablist\"`, `role=\"tab\"`, `role=\"tabpanel\"`: Defines the structure and behavior of a tab interface, allowing screen readers to convey the correct keyboard interactions (e.g., arrow keys to switch tabs).\n      *   `tabindex`: While a native HTML attribute, ARIA often works in conjunction with `tabindex` to manage focus for non-interactive elements that need to be focusable or for custom focus traps.\n\n**2. Sufficient Color Contrast**: Ensuring there's enough contrast between foreground (text) and background colors to make content readable for users with visual impairments (e.g., color blindness) or in challenging lighting conditions.\n   *   **ARIA Contribution**: ARIA attributes generally *do not directly* address color contrast. Color contrast is primarily a CSS and design concern, measured against WCAG guidelines (e.g., WCAG 2.1 AA or AAA levels). While ARIA doesn't provide a direct solution, a well-structured and semantically rich page (aided by ARIA) ensures that even if contrast is suboptimal, other accessibility features (like screen readers) can still provide information. However, developers must ensure contrast is met through design and CSS.",
          "analysisPoints": [
            "Identifies keyboard navigability and color contrast as critical aspects.",
            "Provides clear explanations for each aspect.",
            "Articulates how specific ARIA attributes enhance keyboard navigability and convey state for custom components.",
            "Accurately clarifies that ARIA doesn't directly solve color contrast but works with other techniques.",
            "Demonstrates a nuanced understanding of ARIA's role."
          ],
          "keyConcepts": [
            "Accessibility",
            "Keyboard Navigation",
            "Color Contrast",
            "ARIA Attributes",
            "WCAG"
          ],
          "evaluationCriteria": [
            "Depth of understanding of accessibility principles.",
            "Knowledge of specific ARIA attributes and their practical application.",
            "Ability to distinguish responsibilities between ARIA and other web technologies (e.g., CSS for contrast).",
            "Clarity and completeness of explanations."
          ],
          "example": "See `example_a11y_2` in `theory_web_accessibility` for ARIA usage.",
          "tags": [
            "Accessibility",
            "A11y",
            "ARIA",
            "Keyboard Navigation",
            "WCAG",
            "CSS"
          ],
          "prerequisites": [
            "HTML Semantic Elements",
            "Basic CSS"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_virtual_dom_1",
          "topic": "Virtual DOM Fundamentals",
          "level": "medium",
          "type": "mcq",
          "question": "Which statement accurately describes the primary reason for using a Virtual DOM in frameworks like React?",
          "answer": "To minimize direct manipulations of the actual browser DOM by batching and optimizing updates, leading to better performance.",
          "options": [
            "To allow direct manipulation of the DOM in a declarative way without re-rendering.",
            "To fully replace the browser's DOM, making it unnecessary.",
            "To minimize direct manipulations of the actual browser DOM by batching and optimizing updates, leading to better performance.",
            "To enable server-side rendering exclusively without client-side JavaScript."
          ],
          "analysisPoints": [
            "Correctly identifies the core benefit: performance optimization through minimized and batched DOM operations.",
            "Highlights the VDOM's role as an *abstract representation*, not a replacement.",
            "Distinguishes VDOM from declarative DOM manipulation *without* optimization or server-side rendering."
          ],
          "keyConcepts": [
            "Virtual DOM",
            "Reconciliation",
            "Performance Optimization",
            "Real DOM"
          ],
          "evaluationCriteria": [
            "Understanding of VDOM's purpose and mechanism.",
            "Ability to differentiate VDOM from other web concepts."
          ],
          "example": "See `example_virtual_dom_1` in `theory_virtual_dom` for a conceptual flow.",
          "tags": [
            "Virtual DOM",
            "React",
            "Performance",
            "Frontend Architecture"
          ],
          "prerequisites": [
            "DOM Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_virtual_dom_2",
          "topic": "Virtual DOM vs Real DOM",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the 'diffing' process in the context of the Virtual DOM?",
          "answer": "The 'diffing' process (also known as reconciliation) is when the VDOM library compares the new Virtual DOM tree (after a state/prop update) with the previous VDOM snapshot to identify the minimal set of changes needed to update the actual browser DOM.",
          "analysisPoints": [
            "Defines diffing as the comparison of VDOM trees.",
            "Mentions its goal: finding minimal changes for the real DOM.",
            "Links it to state/prop updates."
          ],
          "keyConcepts": [
            "Virtual DOM",
            "Reconciliation",
            "Diffing Algorithm"
          ],
          "evaluationCriteria": [
            "Recall of VDOM core concepts",
            "Understanding of the reconciliation step"
          ],
          "example": null,
          "tags": [
            "Virtual DOM",
            "React",
            "Flashcard",
            "Performance"
          ],
          "prerequisites": [
            "Virtual DOM Basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_virtual_dom_3",
          "topic": "Virtual DOM Benefits and Trade-offs",
          "level": "medium",
          "type": "open",
          "question": "While the Virtual DOM is highly beneficial for performance in most modern web applications, can you describe a scenario where its benefits might be less pronounced, or even where direct DOM manipulation could be equally or more efficient?",
          "answer": "The Virtual DOM provides significant performance benefits by batching and optimizing updates to the real DOM. However, its benefits might be less pronounced, or direct DOM manipulation could be equally or more efficient, in the following scenarios:\n\n1.  **Very Small, Infrequent, or Isolated Updates**: For a static website with minimal interactivity, or if you only need to make a single, isolated change to a specific part of the DOM (e.g., updating a single text node without affecting its siblings or parents), the overhead of creating a VDOM, diffing it, and then applying changes might actually be slightly more expensive than directly manipulating that one element. The VDOM shines when many changes occur in rapid succession or across different parts of the UI.\n\n2.  **Performance-Critical Animations/High-Frequency Updates**: For highly optimized animations or games where every millisecond matters, or where DOM elements are changing at a very high frequency (e.g., 60 frames per second), bypassing the VDOM and directly manipulating the DOM (often using `requestAnimationFrame` for synchronization) might offer finer control and potentially better raw performance. Frameworks like React typically provide escape hatches (e.g., `useRef` for direct DOM access) for such niche performance-critical scenarios.\n\n3.  **Simple, Non-Interactive Websites**: For a simple informational website with no dynamic components or user interactions that change the UI, the overhead of a VDOM library and its runtime can be unnecessary. Plain HTML, CSS, and minimal JavaScript would be more efficient to load and render.\n\nIn essence, the VDOM introduces a layer of abstraction and computation (diffing) that, while amortized over many changes, adds a small fixed cost per update. For applications where this fixed cost outweighs the benefits of batching and optimized diffing (i.e., very few or extremely controlled changes), its advantages diminish.",
          "analysisPoints": [
            "Identifies scenarios where VDOM overhead might be an issue (small, infrequent updates).",
            "Discusses performance-critical animations/games as an edge case.",
            "Mentions simple, static websites where VDOM might be overkill.",
            "Explains the trade-off: VDOM's fixed cost vs. batching benefits.",
            "Shows a nuanced understanding of VDOM's optimization strategy."
          ],
          "keyConcepts": [
            "Virtual DOM Trade-offs",
            "Performance Optimization",
            "Direct DOM Manipulation",
            "Reconciliation Overhead"
          ],
          "evaluationCriteria": [
            "Critical thinking about technology choices.",
            "Understanding of the underlying mechanisms that make VDOM efficient or less efficient.",
            "Ability to articulate edge cases for VDOM use.",
            "Completeness of the explanation."
          ],
          "example": null,
          "tags": [
            "Virtual DOM",
            "Performance",
            "Trade-offs",
            "Advanced React",
            "Frontend Architecture"
          ],
          "prerequisites": [
            "Virtual DOM Basics",
            "DOM Manipulation",
            "Web Performance"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_service_workers_1",
          "topic": "Service Workers: Fetch Event",
          "level": "medium",
          "type": "mcq",
          "question": "For what purpose can the event listener `self.addEventListener('fetch', event => {})` be used within a Service Worker?",
          "answer": "To intercept network requests made from pages it controls and respond with cached assets, network responses, or dynamically generated content.",
          "options": [
            "To listen for changes in the browser's history and update the URL.",
            "To intercept network requests made from pages it controls and respond with cached assets, network responses, or dynamically generated content.",
            "To handle user interface events like clicks and form submissions directly in the background.",
            "To execute JavaScript only when the browser tab is not active, saving CPU cycles."
          ],
          "analysisPoints": [
            "Correctly identifies the primary function of the `fetch` event: network interception.",
            "Highlights the flexibility of responding (cache, network, dynamic).",
            "Distinguishes `fetch` event from other types of events or general background execution."
          ],
          "keyConcepts": [
            "Service Workers",
            "Fetch Event",
            "Network Interception",
            "Caching",
            "PWA"
          ],
          "evaluationCriteria": [
            "Understanding of Service Worker's core capabilities.",
            "Knowledge of the `fetch` event's specific role."
          ],
          "example": "```typescript\n// sw.js\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request).then(response => {\n      return response || fetch(event.request);\n    })\n  );\n});\n// This implements a cache-first strategy: try cache, then network.\n```",
          "tags": [
            "Service Workers",
            "PWA",
            "Caching",
            "Frontend Architecture"
          ],
          "prerequisites": [
            "JavaScript Promises",
            "Fetch API"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_service_workers_2",
          "topic": "Service Worker Lifecycle",
          "level": "medium",
          "type": "flashcard",
          "question": "Name and briefly describe the three main phases of a Service Worker's lifecycle after registration.",
          "answer": "**Install**: The Service Worker is downloaded and the `install` event is fired. This is where pre-caching of assets often occurs.\n**Activate**: After installation, the Service Worker activates. The `activate` event is fired, often used for cleaning up old caches.\n**Controlled**: The Service Worker takes control of the pages within its scope, intercepting network requests via the `fetch` event.",
          "analysisPoints": [
            "Correctly names install, activate, and controlled phases.",
            "Provides a concise description of each phase's purpose or common actions.",
            "Demonstrates understanding of the sequential nature of the lifecycle."
          ],
          "keyConcepts": [
            "Service Workers",
            "Lifecycle",
            "Caching",
            "PWA"
          ],
          "evaluationCriteria": [
            "Recall of Service Worker lifecycle stages.",
            "Understanding of typical operations in each stage."
          ],
          "example": null,
          "tags": [
            "Service Workers",
            "PWA",
            "Lifecycle",
            "Flashcard"
          ],
          "prerequisites": [
            "Service Workers Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_perf_opt_1",
          "topic": "Web Page Performance Optimization Approaches",
          "level": "medium",
          "type": "open",
          "question": "List and briefly explain at least four distinct approaches to optimizing web page performance, including examples for each.",
          "answer": "Here are four distinct approaches to optimizing web page performance:\n\n1.  **Optimizing Assets**: This involves reducing the file size of resources without compromising their quality.\n    *   **Explanation**: Smaller file sizes mean faster download times and less data consumed by users.\n    *   **Examples**: Compressing images (e.g., using WebP format, image optimizers), minifying CSS, JavaScript, and HTML files (removing unnecessary whitespace, comments), and tree-shaking JavaScript bundles to remove unused code.\n\n2.  **Browser Caching**: Leveraging the browser's ability to store resources locally so they don't need to be re-downloaded on subsequent visits.\n    *   **Explanation**: This drastically speeds up repeat visits as many assets can be served directly from the user's local cache.\n    *   **Examples**: Setting appropriate `Cache-Control` headers (e.g., `Cache-Control: max-age=31536000, public`) for static assets, using `ETags` for conditional requests to validate cached content.\n\n3.  **Lazy Loading**: Deferring the loading of non-critical resources (like images, videos, or components) until they are actually needed, typically when they enter the user's viewport.\n    *   **Explanation**: This improves the initial page load time and reduces initial bandwidth consumption, especially for pages with a lot of content below the fold.\n    *   **Examples**: Using the `loading=\"lazy\"` attribute on `<img>` or `<iframe>` tags, or implementing custom lazy loading with the `IntersectionObserver` API for React components or larger content blocks.\n\n4.  **Minimizing HTTP Requests & Bundling**: Reducing the number of distinct files (and thus network requests) a browser needs to download to render a page.\n    *   **Explanation**: Each HTTP request incurs overhead (DNS lookup, TCP handshake, SSL negotiation). Fewer requests mean less overhead.\n    *   **Examples**: Concatenating multiple CSS or JavaScript files into a single bundle, using CSS sprites for small icons, or embedding very small critical CSS/JS directly into the HTML.",
          "analysisPoints": [
            "Lists at least four distinct approaches.",
            "Provides a clear and concise explanation for each.",
            "Includes practical and specific examples for each approach.",
            "Demonstrates knowledge across different optimization categories (asset, network, rendering)."
          ],
          "keyConcepts": [
            "Web Performance",
            "Asset Optimization",
            "Caching",
            "Lazy Loading",
            "HTTP Requests",
            "Bundling"
          ],
          "evaluationCriteria": [
            "Breadth of knowledge in performance optimization.",
            "Ability to explain concepts clearly.",
            "Providing relevant and actionable examples.",
            "Understanding of the 'why' behind each technique."
          ],
          "example": null,
          "tags": [
            "Web Performance",
            "Optimization",
            "Frontend Engineering"
          ],
          "prerequisites": [
            "HTML Basics",
            "CSS Basics",
            "JavaScript Fundamentals",
            "HTTP Protocol"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_perf_opt_2",
          "topic": "Critical Rendering Path",
          "level": "hard",
          "type": "open",
          "question": "Explain the concept of the Critical Rendering Path (CRP) and how optimizing it contributes to perceived web page performance. What are two common techniques to optimize the CRP?",
          "answer": "The **Critical Rendering Path (CRP)** is the sequence of steps the browser goes through to convert HTML, CSS, and JavaScript into pixels on the screen. Optimizing the CRP means prioritizing the display of content that's visible to the user as quickly as possible (above-the-fold content).\n\n**How it contributes to perceived performance**: By optimizing the CRP, you reduce the time it takes for the browser to render the initial view of the page, leading to a faster **First Contentful Paint (FCP)** and **Largest Contentful Paint (LCP)**. This makes the page *feel* faster to the user, even if the entire page hasn't finished loading. Perceived performance is often more important than actual raw load time for user satisfaction.\n\n**Two common techniques to optimize the CRP**:\n\n1.  **Minimizing Render-Blocking Resources**: By default, CSS and JavaScript are render-blocking. The browser cannot render any content until it has downloaded, parsed, and executed all render-blocking CSS and JavaScript in the `<head>`.\n    *   **Technique**: Place `<link>` tags for CSS in the `<head>` (but keep CSS small and inline critical CSS) and use `defer` or `async` attributes for non-critical `<script>` tags, or place them at the end of the `<body>`.\n    *   **Example**: ` <script src=\"non-critical.js\" defer></script>` or `<link rel=\"preload\" href=\"critical.css\" as=\"style\" onload=\"this.rel='stylesheet'\">`.\n\n2.  **Inlining Critical CSS**: For above-the-fold content, the small amount of CSS required to render it immediately can be inlined directly into the `<head>` of the HTML document.\n    *   **Technique**: Use build tools (like Webpack's mini-css-extract-plugin with critical CSS plugins) to extract the CSS needed for the initial viewport and embed it. This avoids an extra network request for the initial render.\n    *   **Example**: `<style>body { font-family: sans-serif; } .header { color: blue; }</style>` in the `<head>`.\n\nOther techniques include server-side rendering (SSR) or static site generation (SSG) to deliver pre-rendered HTML, reducing client-side rendering work.",
          "analysisPoints": [
            "Clear definition of CRP.",
            "Explanation of its impact on perceived performance and Core Web Vitals (FCP, LCP).",
            "Detailed explanation of two specific optimization techniques: minimizing render-blocking resources and inlining critical CSS.",
            "Provides concrete examples for each technique."
          ],
          "keyConcepts": [
            "Critical Rendering Path",
            "Perceived Performance",
            "Render-Blocking Resources",
            "Inline CSS",
            "Core Web Vitals",
            "`defer`",
            "`async`"
          ],
          "evaluationCriteria": [
            "In-depth understanding of browser rendering processes.",
            "Ability to connect technical details to user experience.",
            "Knowledge of advanced performance optimization techniques.",
            "Clarity and structure of the explanation."
          ],
          "example": null,
          "tags": [
            "Web Performance",
            "Optimization",
            "Browser Internals",
            "Frontend Architecture"
          ],
          "prerequisites": [
            "Browser Rendering",
            "HTML Parsing",
            "CSSOM",
            "DOM"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_same_origin_policy_1",
          "topic": "Same-Origin Policy Fundamentals",
          "level": "medium",
          "type": "mcq",
          "question": "Which combination defines an 'origin' in the context of the Same-Origin Policy (SOP)?",
          "answer": "Protocol, hostname, and port",
          "options": [
            "Protocol and hostname only",
            "Hostname and path only",
            "Protocol, hostname, and port",
            "Hostname, port, and file extension"
          ],
          "analysisPoints": [
            "Correctly identifies the three components of an origin: protocol, hostname, and port.",
            "Distinguishes the strictness of SOP from less precise definitions.",
            "Incorrect options include irrelevant components or omit critical ones."
          ],
          "keyConcepts": [
            "Same-Origin Policy",
            "Web Security",
            "Origin Definition"
          ],
          "evaluationCriteria": [
            "Accurate recall of SOP definition.",
            "Understanding of the components that determine an origin."
          ],
          "example": "```\n// Same Origin:\n// http://example.com/path/a\n// http://example.com/path/b (Same protocol, host, default port 80)\n\n// Different Origin:\n// https://example.com/ (Different protocol)\n// http://sub.example.com/ (Different hostname)\n// http://example.com:8080/ (Different port)\n```",
          "tags": [
            "Security",
            "SOP",
            "HTTP",
            "Flashcard"
          ],
          "prerequisites": [
            "Basic HTTP"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_same_origin_policy_2",
          "topic": "Same-Origin Policy and Browser APIs",
          "level": "medium",
          "type": "open",
          "question": "The Same-Origin Policy is implemented in the browser to enhance security. Beyond `XMLHttpRequest`/`fetch`, name two other browser APIs or contexts where SOP applies, and explain the restriction.",
          "answer": "Here are two other browser APIs/contexts where SOP applies:\n\n1.  **JavaScript access to DOM of other origins (e.g., `<iframe>` content)**:\n    *   **Restriction**: A script loaded from `http://mysite.com` cannot directly read or manipulate the content (e.g., elements, styles, forms) of an `<iframe>` whose `src` is set to `http://anothersite.com`. This prevents a malicious script from an embedded advertisement, for instance, from stealing user data from the parent page or vice-versa.\n    *   **Bypass**: Limited communication is possible via `postMessage` for specific, controlled data exchange.\n\n2.  **Web Storage (`localStorage`, `sessionStorage`)**:\n    *   **Restriction**: Data stored in `localStorage` or `sessionStorage` is strictly scoped to its origin. A script from `http://app.example.com` cannot access data stored by `http://auth.example.com` in either `localStorage` or `sessionStorage`. This ensures that sensitive user data stored client-side by one application is not accessible to other, potentially malicious, applications on different origins.\n\nAnother relevant example is the **`canvas` element tainting**: If you load an image from a different origin onto a `<canvas>` element using `drawImage()`, the canvas becomes 'tainted'. Once tainted, you cannot read pixel data back from the canvas using methods like `toDataURL()` or `getImageData()`. This prevents a malicious site from loading an image from a user's bank statement, for example, and then reading its contents pixel by pixel.",
          "analysisPoints": [
            "Clearly identifies `<iframe>` content and Web Storage as affected by SOP.",
            "Explains the specific restriction for each identified context.",
            "Articulates the security rationale behind each restriction.",
            "Mentions `canvas` tainting as an additional relevant example, showing breadth of knowledge."
          ],
          "keyConcepts": [
            "Same-Origin Policy",
            "Web Security",
            "DOM",
            "<iframe>",
            "Web Storage",
            "localStorage",
            "sessionStorage",
            "canvas"
          ],
          "evaluationCriteria": [
            "Detailed knowledge of SOP's application across various APIs.",
            "Ability to explain specific restrictions and their security implications.",
            "Demonstrates comprehensive understanding of browser security mechanisms."
          ],
          "example": null,
          "tags": [
            "Security",
            "SOP",
            "Browser APIs",
            "Frontend Security"
          ],
          "prerequisites": [
            "Browser APIs",
            "Web Security"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_same_origin_policy_3",
          "topic": "CORS and Preflight Requests",
          "level": "hard",
          "type": "open",
          "question": "Explain how Cross-Origin Resource Sharing (CORS) allows bypassing the Same-Origin Policy. Specifically, describe what a 'preflight request' is, when it occurs, and its purpose in the CORS mechanism.",
          "answer": "Cross-Origin Resource Sharing (CORS) is a mechanism that uses additional HTTP headers to tell browsers to give a web application running at one origin access to selected resources from a different origin. It's the standard way to allow cross-origin requests that would otherwise be blocked by the Same-Origin Policy.\n\n**How CORS Bypasses SOP**: When a browser makes a cross-origin request, it automatically includes an `Origin` header indicating where the request is coming from. The server, if configured for CORS, responds with `Access-Control-Allow-Origin` (and potentially other `Access-Control-Allow-*` headers). If the `Origin` header in the request matches the allowed origins specified by the server, the browser allows the client-side JavaScript to access the response.\n\n**Preflight Request**:\n*   **What it is**: A preflight request is an `OPTIONS` HTTP request sent by the browser to the server *before* the actual cross-origin request. It's a 'pre-check' to ensure that the server understands the CORS protocol and that the actual request it's about to send is safe and allowed by the server.\n*   **When it occurs**: A preflight request is automatically triggered by the browser for 'complex' HTTP requests. Complex requests are those that:\n    1.  Use HTTP methods other than `GET`, `POST`, or `HEAD` (e.g., `PUT`, `DELETE`).\n    2.  Include custom headers (headers not on the 'CORS-safelisted request-header' list, like `X-Custom-Header`).\n    3.  Have a `Content-Type` header value other than `application/x-www-form-urlencoded`, `multipart/form-data`, or `text/plain` (e.g., `application/json`).\n*   **Purpose**: The preflight request's purpose is to ask the server about the intended actual request's characteristics (method, headers). The server's response to the `OPTIONS` request (containing `Access-Control-Allow-Methods`, `Access-Control-Allow-Headers`, `Access-Control-Max-Age` etc.) informs the browser whether it is safe to proceed with the actual request. If the preflight fails (e.g., the server doesn't respond with appropriate CORS headers for the proposed actual request), the actual request is never sent, and the browser throws a CORS error.",
          "analysisPoints": [
            "Defines CORS as a mechanism for allowing cross-origin requests.",
            "Explains how `Access-Control-Allow-Origin` header grants permission.",
            "Provides a comprehensive explanation of preflight requests: what they are, when they occur (conditions for 'complex' requests), and their purpose in the security model.",
            "Highlights the role of the `OPTIONS` method for preflights.",
            "Demonstrates a deep understanding of browser-server interaction for CORS."
          ],
          "keyConcepts": [
            "CORS",
            "Same-Origin Policy",
            "Preflight Request",
            "HTTP Headers",
            "Web Security",
            "OPTIONS Method"
          ],
          "evaluationCriteria": [
            "Thorough explanation of CORS and its relationship to SOP.",
            "Accurate and detailed description of preflight requests.",
            "Clarity on the conditions triggering preflights.",
            "Understanding of the security implications and flow."
          ],
          "example": null,
          "tags": [
            "Security",
            "CORS",
            "HTTP",
            "Frontend Security",
            "Networking"
          ],
          "prerequisites": [
            "HTTP Methods",
            "HTTP Headers",
            "Same-Origin Policy"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "expert"
        }
      ],
      "tasks": [
        {
          "id": "task_react_user_search_1",
          "title": "Enhance User Search with Pagination",
          "description": "\nEnhance the `UserSearch` component to include basic client-side pagination. Instead of showing all filtered results at once, display only a subset of users per page. Include controls to navigate between pages.\n\n**Requirements:**\n1.  Add new state variables for `currentPage` (starts at 1) and `usersPerPage` (e.g., 5).\n2.  Modify the filtering logic within `useEffect` to also slice the `users` array based on `currentPage` and `usersPerPage`.\n3.  Render pagination controls (e.g., 'Previous', 'Next' buttons or page numbers) below the user list.\n4.  Disable 'Previous' if on the first page, 'Next' if on the last page.\n5.  Ensure that when the `searchText` changes, the `currentPage` resets to 1.\n6.  Handle the 'No results found' message appropriately, even with pagination.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect, useMemo } from 'react';\n\n// Assume this data is either imported or fetched from an API\nconst allUsersData = [\n  { id: 1, name: 'Alice Smith', email: 'alice@example.com', address: '123 Pine St', zipCode: '10001', purchased: ['Laptop', 'Mouse'] },\n  { id: 2, name: 'Bob Johnson', email: 'bob@example.com', address: '456 Oak Ave', zipCode: '20002', purchased: ['Keyboard', 'Monitor', 'Webcam'] },\n  { id: 3, name: 'Charlie Brown', email: 'charlie@example.com', address: '789 Elm Rd', zipCode: '30003', purchased: ['Headphones'] },\n  { id: 4, name: 'Diana Prince', email: 'diana@example.com', address: '101 Maple Ln', zipCode: '40004', purchased: ['Tablet', 'Stylus'] },\n  { id: 5, name: 'Eve Adams', email: 'eve@example.com', address: '202 Birch Dr', zipCode: '50005', purchased: ['Smartwatch'] },\n  { id: 6, name: 'Frank White', email: 'frank@example.com', address: '303 Cedar Ct', zipCode: '60006', purchased: ['Printer', 'Ink'] },\n  { id: 7, name: 'Grace Lee', email: 'grace@example.com', address: '404 Willow Way', zipCode: '70007', purchased: ['Router'] },\n  { id: 8, name: 'Henry Green', email: 'henry@example.com', address: '505 Poplar Pl', zipCode: '80008', purchased: ['SSD', 'RAM'] },\n  { id: 9, name: 'Ivy King', email: 'ivy@example.com', address: '606 Spruce Sq', zipCode: '90009', purchased: ['Microphone'] },\n  { id: 10, name: 'Jack Miller', email: 'jack@example.com', address: '707 Fir Fld', zipCode: '10010', purchased: ['Speaker', 'Amplifier'] },\n  { id: 11, name: 'Karen Davis', email: 'karen@example.com', address: '808 Palm Pk', zipCode: '11011', purchased: ['E-reader'] },\n  { id: 12, name: 'Liam Scott', email: 'liam@example.com', address: '909 Oak Gr', zipCode: '12012', purchased: ['Gaming Console', 'Controller'] }\n];\n\nfunction UserSearch() {\n  const [searchText, setSearchText] = useState('');\n  const [users, setUsers] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setIsLoading(true);\n    setError(null);\n\n    const handler = setTimeout(() => {\n      try {\n        const filteredUsers = allUsersData.filter(user =>\n          user.name.toLowerCase().includes(searchText.toLowerCase())\n        );\n        setUsers(filteredUsers);\n      } catch (err) {\n        setError('Failed to filter users.');\n        console.error(err);\n      } finally {\n        setIsLoading(false);\n      }\n    }, 500); // Debounce for 500ms\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchText]);\n\n  return (\n    <div className=\"user-search-container\">\n      <h1>User Search</h1>\n      <input\n        type=\"text\"\n        placeholder=\"Search users by name...\"\n        value={searchText}\n        onChange={(e) => setSearchText(e.target.value)}\n        className=\"search-input\"\n      />\n\n      <div className=\"user-list-section\">\n        {isLoading ? (\n          <div className=\"loading\">Loading...</div>\n        ) : error ? (\n          <div className=\"error\">Error: {error}</div>\n        ) : (\n          <div className=\"user-cards-container\">\n            {users.length > 0 ? (\n              users.map((user) => (\n                <div key={user.id} className=\"user-card\">\n                  <h3>{user.name}</h3>\n                  <p>Email: {user.email}</p>\n                  <div className=\"user-details\">\n                    <div>Address: {user.address}</div>\n                    <div>Zip: {user.zipCode}</div>\n                    <div>Purchased: {user.purchased.join(', ')}</div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found</div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearch;\n",
          "solutionCode": "import React, { useState, useEffect, useMemo } from 'react';\n\nconst allUsersData = [\n  { id: 1, name: 'Alice Smith', email: 'alice@example.com', address: '123 Pine St', zipCode: '10001', purchased: ['Laptop', 'Mouse'] },\n  { id: 2, name: 'Bob Johnson', email: 'bob@example.com', address: '456 Oak Ave', zipCode: '20002', purchased: ['Keyboard', 'Monitor', 'Webcam'] },\n  { id: 3, name: 'Charlie Brown', email: 'charlie@example.com', address: '789 Elm Rd', zipCode: '30003', purchased: ['Headphones'] },\n  { id: 4, name: 'Diana Prince', email: 'diana@example.com', address: '101 Maple Ln', zipCode: '40004', purchased: ['Tablet', 'Stylus'] },\n  { id: 5, name: 'Eve Adams', email: 'eve@example.com', address: '202 Birch Dr', zipCode: '50005', purchased: ['Smartwatch'] },\n  { id: 6, name: 'Frank White', email: 'frank@example.com', address: '303 Cedar Ct', zipCode: '60006', purchased: ['Printer', 'Ink'] },\n  { id: 7, name: 'Grace Lee', email: 'grace@example.com', address: '404 Willow Way', zipCode: '70007', purchased: ['Router'] },\n  { id: 8, name: 'Henry Green', email: 'henry@example.com', address: '505 Poplar Pl', zipCode: '80008', purchased: ['SSD', 'RAM'] },\n  { id: 9, name: 'Ivy King', email: 'ivy@example.com', address: '606 Spruce Sq', zipCode: '90009', purchased: ['Microphone'] },\n  { id: 10, name: 'Jack Miller', email: 'jack@example.com', address: '707 Fir Fld', zipCode: '10010', purchased: ['Speaker', 'Amplifier'] },\n  { id: 11, name: 'Karen Davis', email: 'karen@example.com', address: '808 Palm Pk', zipCode: '11011', purchased: ['E-reader'] },\n  { id: 12, name: 'Liam Scott', email: 'liam@example.com', address: '909 Oak Gr', zipCode: '12012', purchased: ['Gaming Console', 'Controller'] }\n];\n\nfunction UserSearch() {\n  const [searchText, setSearchText] = useState('');\n  const [filteredUsers, setFilteredUsers] = useState([]); // Store all filtered users\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  \n  const [currentPage, setCurrentPage] = useState(1); // New state for current page\n  const usersPerPage = 5; // New constant for users per page\n\n  // Effect to filter users based on search text\n  useEffect(() => {\n    setIsLoading(true);\n    setError(null);\n    setCurrentPage(1); // Reset page to 1 on search text change\n\n    const handler = setTimeout(() => {\n      try {\n        const newFilteredUsers = allUsersData.filter(user =>\n          user.name.toLowerCase().includes(searchText.toLowerCase())\n        );\n        setFilteredUsers(newFilteredUsers); // Update the full filtered list\n      } catch (err) {\n        setError('Failed to filter users.');\n        console.error(err);\n      } finally {\n        setIsLoading(false);\n      }\n    }, 500); // Debounce for 500ms\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchText]);\n\n  // Calculate users for the current page\n  const indexOfLastUser = currentPage * usersPerPage;\n  const indexOfFirstUser = indexOfLastUser - usersPerPage;\n  const currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\n\n  const totalPages = Math.ceil(filteredUsers.length / usersPerPage);\n\n  const handlePageChange = (pageNumber) => {\n    setCurrentPage(pageNumber);\n  };\n\n  return (\n    <div className=\"user-search-container\">\n      <h1>User Search</h1>\n      <input\n        type=\"text\"\n        placeholder=\"Search users by name...\"\n        value={searchText}\n        onChange={(e) => setSearchText(e.target.value)}\n        className=\"search-input\"\n      />\n\n      <div className=\"user-list-section\">\n        {isLoading ? (\n          <div className=\"loading\">Loading...</div>\n        ) : error ? (\n          <div className=\"error\">Error: {error}</div>\n        ) : (\n          <div className=\"user-cards-container\">\n            {currentUsers.length > 0 ? (\n              currentUsers.map((user) => (\n                <div key={user.id} className=\"user-card\">\n                  <h3>{user.name}</h3>\n                  <p>Email: {user.email}</p>\n                  <div className=\"user-details\">\n                    <div>Address: {user.address}</div>\n                    <div>Zip: {user.zipCode}</div>\n                    <div>Purchased: {user.purchased.join(', ')}</div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div className=\"no-results\">No results found</div>\n            )}\n          </div>\n        )}\n\n        {/* Pagination Controls */}\n        {!isLoading && !error && filteredUsers.length > 0 && (\n          <div className=\"pagination-controls\">\n            <button\n              onClick={() => handlePageChange(currentPage - 1)}\n              disabled={currentPage === 1}\n            >\n              Previous\n            </button>\n            <span>Page {currentPage} of {totalPages}</span>\n            <button\n              onClick={() => handlePageChange(currentPage + 1)}\n              disabled={currentPage === totalPages}\n            >\n              Next\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default UserSearch;\n",
          "testCases": [
            "Search for 'Alice': Only Alice should appear on page 1.",
            "Search for 'a': Verify pagination is enabled, and only the correct number of users appear per page.",
            "Navigate to the last page: Ensure 'Next' button is disabled.",
            "Navigate to the first page: Ensure 'Previous' button is disabled.",
            "Search for 'nonexistentuser': Verify 'No results found' message appears correctly, and pagination controls are hidden.",
            "Change search text while on page 3: `currentPage` should reset to 1."
          ],
          "hints": [
            "You'll need two new `useState` variables for pagination: `currentPage` and `usersPerPage` (or a constant).",
            "The `slice()` method of arrays will be useful for extracting the users for the current page.",
            "Remember to reset `currentPage` to 1 whenever the `searchText` changes to ensure fresh results start from the beginning.",
            "Calculate `totalPages` using `Math.ceil()` on the total number of filtered users divided by `usersPerPage`."
          ],
          "tags": [
            "React",
            "Hooks",
            "State Management",
            "Pagination",
            "List Rendering",
            "Frontend Interview"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "React Hooks",
            "Array Methods (slice, map, filter)",
            "Conditional Rendering"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Infinite Scroll",
            "Server-Side Pagination"
          ]
        },
        {
          "id": "task_dom_event_delegation_1",
          "title": "Implement a Clickable List with Event Delegation and Contextual Actions",
          "description": "\nCreate an interactive task list using event delegation. The list items should be dynamically added. When a list item is clicked, its text should be logged. Additionally, implement a 'Delete' button within each list item. Clicking this 'Delete' button should remove its parent list item from the DOM, but *not* trigger the list item's general click logging.\n\n**Requirements:**\n1.  Create an HTML structure with an empty `<ul>` and an 'Add Task' button.\n2.  When 'Add Task' is clicked, a new `<li>` element is added to the `<ul>`. Each `<li>` should contain text 'Task X' and a `<button>` with text 'Delete'.\n3.  Implement **only one** click event listener on the `<ul>` element to handle both `<li>` clicks (logging text) and 'Delete' button clicks (removing the `<li>`).\n4.  Ensure that clicking the 'Delete' button *only* deletes the item and *does not* trigger the `<li>`'s click logging.\n5.  Use `event.target` and `closest()` for robust event delegation.\n",
          "difficulty": "medium",
          "startingCode": "<!-- HTML: index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Event Delegation Task List</title>\n  <style>\n    body { font-family: sans-serif; margin: 20px; }\n    ul { list-style: none; padding: 0; border: 1px solid #eee; min-height: 100px; }\n    li { padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }\n    li:last-child { border-bottom: none; }\n    button { margin-left: 10px; padding: 5px 10px; cursor: pointer; }\n  </style>\n</head>\n<body>\n  <h1>My Tasks</h1>\n  <button id=\"addTaskButton\">Add Task</button>\n  <ul id=\"taskList\"></ul>\n\n  <script src=\"script.js\"></script>\n</body>\n</html>\n\n// JavaScript: script.js\n// TODO: Implement the task here\nlet taskCounter = 0;\nconst addTaskButton = document.getElementById('addTaskButton');\nconst taskList = document.getElementById('taskList');\n\naddTaskButton.addEventListener('click', () => {\n  taskCounter++;\n  const li = document.createElement('li');\n  li.textContent = `Task ${taskCounter}`;\n  const deleteButton = document.createElement('button');\n  deleteButton.textContent = 'Delete';\n  deleteButton.className = 'delete-btn'; // Add a class for identification\n  li.appendChild(deleteButton);\n  taskList.appendChild(li);\n});\n\n// Your event delegation logic goes here\n// taskList.addEventListener('click', (event) => { /* ... */ });\n",
          "solutionCode": "<!-- HTML: index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Event Delegation Task List</title>\n  <style>\n    body { font-family: sans-serif; margin: 20px; }\n    ul { list-style: none; padding: 0; border: 1px solid #eee; min-height: 100px; }\n    li { padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }\n    li:hover { background-color: #f9f9f9; }\n    li:last-child { border-bottom: none; }\n    button { margin-left: 10px; padding: 5px 10px; cursor: pointer; background-color: #f44336; color: white; border: none; border-radius: 4px; }\n    button:hover { background-color: #d32f2f; }\n  </style>\n</head>\n<body>\n  <h1>My Tasks</h1>\n  <button id=\"addTaskButton\">Add Task</button>\n  <ul id=\"taskList\"></ul>\n\n  <script src=\"script.js\"></script>\n</body>\n</html>\n\n// JavaScript: script.js\nlet taskCounter = 0;\nconst addTaskButton = document.getElementById('addTaskButton');\nconst taskList = document.getElementById('taskList');\n\naddTaskButton.addEventListener('click', () => {\n  taskCounter++;\n  const li = document.createElement('li');\n  li.id = `task-${taskCounter}`;\n  li.textContent = `Task ${taskCounter}`;\n  const deleteButton = document.createElement('button');\n  deleteButton.textContent = 'Delete';\n  deleteButton.className = 'delete-btn';\n  li.appendChild(deleteButton);\n  taskList.appendChild(li);\n});\n\ntaskList.addEventListener('click', (event) => {\n  // Determine the actual element that was clicked\n  const clickedElement = event.target;\n\n  // Case 1: Delete button clicked\n  if (clickedElement.classList.contains('delete-btn')) {\n    const listItemToDelete = clickedElement.closest('li');\n    if (listItemToDelete) {\n      listItemToDelete.remove();\n      console.log(`Deleted item: ${listItemToDelete.id}`);\n      event.stopPropagation(); // Stop the event from bubbling up to the <li> itself\n    }\n  } \n  // Case 2: List item (or its text) clicked\n  else {\n    const listItem = clickedElement.closest('li');\n    // Ensure the click originated from an <li> within our taskList\n    if (listItem && taskList.contains(listItem)) {\n      // Check if it's not the delete button that was initially clicked AND it's a list item\n      // (event.target.tagName can be 'LI' or text content's parent)\n      console.log(`Clicked task: ${listItem.textContent.replace('Delete', '').trim()}`);\n    }\n  }\n});\n",
          "testCases": [
            "Click 'Add Task' multiple times: Verify new items appear with 'Delete' buttons.",
            "Click on the text of a list item: Verify its text is logged to console, and the item is not deleted.",
            "Click on a 'Delete' button: Verify the corresponding list item is removed from the DOM.",
            "Click on a 'Delete' button: Verify only the item is deleted, and its text is NOT logged to the console (i.e., `stopPropagation` worked).",
            "Click on the `<ul>` background (not an `<li>`): Verify no action occurs.",
            "Add and delete items, then add more: Ensure the delegation logic still works for new elements."
          ],
          "hints": [
            "The `event.target` property will tell you exactly which element was clicked.",
            "The `closest()` method is useful for finding the nearest ancestor element matching a selector.",
            "To prevent an event from bubbling up and triggering other listeners (like the `<li>`'s implied click), use `event.stopPropagation()`."
          ],
          "tags": [
            "DOM",
            "Events",
            "Event Delegation",
            "JavaScript",
            "Frontend Interview",
            "Manipulation"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "JavaScript DOM Manipulation",
            "Event Listeners",
            "Event Bubbling",
            "`event.target`",
            "`closest()`"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Event Capturing",
            "Synthetic Events (in React)"
          ]
        },
        {
          "id": "task_a11y_1",
          "title": "Make a Custom Star Rating Component Accessible",
          "description": "\nYou are given a non-accessible HTML and CSS structure for a star rating component. Your task is to make it fully accessible using semantic HTML, ARIA attributes, and JavaScript for keyboard interaction.\n\n**HTML Structure:**\n```html\n<div class=\"star-rating\">\n  <span class=\"star\" data-value=\"1\">&#9733;</span>\n  <span class=\"star\" data-value=\"2\">&#9733;</span>\n  <span class=\"star\" data-value=\"3\">&#9733;</span>\n  <span class=\"star\" data-value=\"4\">&#9733;</span>\n  <span class=\"star\" data-value=\"5\">&#9733;</span>\n</div>\n<div id=\"ratingValue\">Current Rating: 0 stars</div>\n```\n\n**Requirements:**\n1.  **Semantic HTML**: Wrap the star-rating in a more appropriate semantic element for a form control (e.g., `<fieldset>` and `<legend>`).\n2.  **ARIA Roles**: Apply appropriate ARIA roles to convey its purpose (e.g., `role=\"radiogroup\"` for the container, `role=\"radio\"` for each star).\n3.  **ARIA Properties**: Use `aria-checked` to indicate the currently selected rating and `aria-label` to describe each star (e.g., \"1 star rating\").\n4.  **Keyboard Navigation**: Ensure users can:\n    *   `Tab` into the star rating component.\n    *   Use `ArrowLeft`/`ArrowRight` keys to navigate between stars and change the selected rating.\n    *   `Space`/`Enter` key to select a star.\n5.  **Focus Management**: Only one star should be focusable at a time when tabbing into the component. When navigating with arrow keys, focus should move between stars.\n6.  **Visual Feedback**: Maintain visual focus indicators for keyboard users.\n7.  Update the `id=\"ratingValue\"` div with the current selected rating.",
          "difficulty": "hard",
          "startingCode": "<!-- HTML: index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Accessible Star Rating</title>\n  <style>\n    body { font-family: sans-serif; margin: 20px; }\n    .star-rating {\n      font-size: 2em;\n      color: #ccc; /* Unfilled star color */\n      display: inline-block;\n      margin-bottom: 10px;\n    }\n    .star {\n      cursor: pointer;\n      user-select: none;\n    }\n    .star.selected,\n    .star.hovered { /* Use hovered for visual feedback on mouseover/keyboard focus */\n      color: gold; /* Filled star color */\n    }\n    .star:focus { outline: 2px solid blue; }\n    /* Remove .star-rating:focus, as individual stars are focusable */\n  </style>\n</head>\n<body>\n  <h1>Rate our Product</h1>\n  <!-- Original non-accessible structure -->\n  <div class=\"star-rating\">\n    <span class=\"star\" data-value=\"1\">&#9733;</span>\n    <span class=\"star\" data-value=\"2\">&#9733;</span>\n    <span class=\"star\" data-value=\"3\">&#9733;</span>\n    <span class=\"star\" data-value=\"4\">&#9733;</span>\n    <span class=\"star\" data-value=\"5\">&#9733;</span>\n  </div>\n  <div id=\"ratingValue\">Current Rating: 0 stars</div>\n\n  <script src=\"script.js\"></script>\n</body>\n</html>\n\n// JavaScript: script.js\n// Your JavaScript will go here to add event listeners and manage accessibility.\nconst starsContainer = document.querySelector('.star-rating');\nconst stars = document.querySelectorAll('.star-rating .star');\nconst ratingValueDisplay = document.getElementById('ratingValue');\nlet currentRating = 0;\n\nstars.forEach(star => {\n  star.addEventListener('click', (e) => {\n    currentRating = parseInt(e.target.dataset.value);\n    updateStars();\n    updateRatingDisplay();\n  });\n\n  star.addEventListener('mouseover', (e) => {\n    const hoverValue = parseInt(e.target.dataset.value);\n    updateHoverStars(hoverValue);\n  });\n\n  star.addEventListener('mouseout', () => {\n    updateHoverStars(0);\n  });\n});\n\nfunction updateStars() {\n  stars.forEach(star => {\n    const value = parseInt(star.dataset.value);\n    if (value <= currentRating) {\n      star.classList.add('selected');\n    } else {\n      star.classList.remove('selected');\n    }\n  });\n}\n\nfunction updateHoverStars(hoverValue) {\n  stars.forEach(star => {\n    const value = parseInt(star.dataset.value);\n    if (value <= hoverValue && value > currentRating) {\n      star.classList.add('hovered');\n    } else {\n      star.classList.remove('hovered');\n    }\n  });\n}\n\nfunction updateRatingDisplay() {\n  ratingValueDisplay.textContent = `Current Rating: ${currentRating} stars`;\n}\n\nupdateStars(); // Initial call to set state\n",
          "solutionCode": "<!-- HTML: index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Accessible Star Rating</title>\n  <style>\n    body { font-family: sans-serif; margin: 20px; }\n    .star-rating-fieldset {\n      border: none;\n      padding: 0;\n      margin: 0;\n      margin-bottom: 10px;\n      display: inline-block;\n    }\n    .star-rating-legend {\n      font-weight: bold;\n      margin-bottom: 5px;\n    }\n    .star-container {\n      font-size: 2em;\n      color: #ccc; /* Unfilled star color */\n      display: inline-block;\n    }\n    .star {\n      cursor: pointer;\n      user-select: none;\n      /* Focus styling - important for a11y */\n      outline: 2px solid transparent; /* default invisible outline */\n      outline-offset: 2px;\n      transition: outline-color 0.1s ease-in-out;\n    }\n    .star:focus {\n      outline-color: dodgerblue; /* Visible focus indicator */\n    }\n    .star.selected,\n    .star.hovered { /* Use hovered for visual feedback on mouseover/keyboard focus */\n      color: gold; /* Filled star color */\n    }\n  </style>\n</head>\n<body>\n  <h1>Rate our Product</h1>\n  \n  <!-- Accessible Structure -->\n  <fieldset class=\"star-rating-fieldset\">\n    <legend class=\"star-rating-legend\">Rate the product out of 5 stars</legend>\n    <div class=\"star-container\" role=\"radiogroup\" aria-label=\"Product rating\">\n      <span class=\"star\" data-value=\"1\" tabindex=\"0\" role=\"radio\" aria-label=\"1 star rating\">&#9733;</span>\n      <span class=\"star\" data-value=\"2\" tabindex=\"-1\" role=\"radio\" aria-label=\"2 star rating\">&#9733;</span>\n      <span class=\"star\" data-value=\"3\" tabindex=\"-1\" role=\"radio\" aria-label=\"3 star rating\">&#9733;</span>\n      <span class=\"star\" data-value=\"4\" tabindex=\"-1\" role=\"radio\" aria-label=\"4 star rating\">&#9733;</span>\n      <span class=\"star\" data-value=\"5\" tabindex=\"-1\" role=\"radio\" aria-label=\"5 star rating\">&#9733;</span>\n    </div>\n  </fieldset>\n  <div id=\"ratingValue\" aria-live=\"polite\">Current Rating: 0 stars</div>\n\n  <script src=\"script.js\"></script>\n</body>\n</html>\n\n// JavaScript: script.js\nconst starsContainer = document.querySelector('.star-container');\nconst stars = Array.from(document.querySelectorAll('.star-container .star')); // Convert NodeList to Array\nconst ratingValueDisplay = document.getElementById('ratingValue');\nlet currentRating = 0;\n\n// Helper to update ARIA properties and visual state\nfunction updateStarAccessibility(selectedRating) {\n  stars.forEach(star => {\n    const value = parseInt(star.dataset.value);\n    const isSelected = value === selectedRating;\n    \n    star.classList.toggle('selected', value <= selectedRating);\n    star.setAttribute('aria-checked', isSelected ? 'true' : 'false');\n    star.setAttribute('tabindex', isSelected ? '0' : '-1'); // Only selected star is tab-focusable\n  });\n  // If no star is selected (rating is 0), make the first star tab-focusable\n  if (selectedRating === 0 && stars.length > 0) {\n    stars[0].setAttribute('tabindex', '0');\n  }\n}\n\nfunction updateRatingDisplay() {\n  ratingValueDisplay.textContent = `Current Rating: ${currentRating} stars`;\n}\n\n// Handle click events\nstarsContainer.addEventListener('click', (e) => {\n  const targetStar = e.target.closest('.star');\n  if (targetStar) {\n    currentRating = parseInt(targetStar.dataset.value);\n    updateStarAccessibility(currentRating);\n    updateRatingDisplay();\n    targetStar.focus(); // Keep focus on the clicked star\n  }\n});\n\n// Handle keyboard navigation (Arrow keys, Space, Enter)\nstarsContainer.addEventListener('keydown', (e) => {\n  const focusedStar = document.activeElement;\n  if (!focusedStar || !focusedStar.classList.contains('star')) return;\n\n  let newIndex = stars.indexOf(focusedStar);\n  const currentFocusedValue = parseInt(focusedStar.dataset.value);\n\n  switch (e.key) {\n    case 'ArrowRight':\n      newIndex = Math.min(newIndex + 1, stars.length - 1);\n      stars[newIndex].focus();\n      e.preventDefault(); // Prevent page scrolling\n      break;\n    case 'ArrowLeft':\n      newIndex = Math.max(newIndex - 1, 0);\n      stars[newIndex].focus();\n      e.preventDefault(); // Prevent page scrolling\n      break;\n    case 'Enter':\n    case 'Space':\n      currentRating = parseInt(focusedStar.dataset.value);\n      updateStarAccessibility(currentRating);\n      updateRatingDisplay();\n      e.preventDefault(); // Prevent default space/enter behavior\n      break;\n    case 'Home': // Optional: go to first star\n      stars[0].focus();\n      e.preventDefault();\n      break;\n    case 'End': // Optional: go to last star\n      stars[stars.length - 1].focus();\n      e.preventDefault();\n      break;\n  }\n\n  // For arrow key navigation, update the visual hover state as focus moves\n  // Also update aria-checked for the currently focused star (even if not 'selected')\n  // so screen readers announce it as 'checked' when focused.\n  stars.forEach((star, index) => {\n    if (index === newIndex) {\n      star.classList.add('hovered'); // Visual feedback on keyboard navigation\n      star.setAttribute('aria-checked', 'true'); // For screen reader focus\n    } else {\n      star.classList.remove('hovered');\n      star.setAttribute('aria-checked', 'false');\n    }\n  });\n});\n\n// Handle focus leaving the container (remove hovered class)\nstarsContainer.addEventListener('focusout', () => {\n  stars.forEach(star => star.classList.remove('hovered'));\n  // Re-establish correct aria-checked for the *selected* star after focusout\n  updateStarAccessibility(currentRating);\n});\n\n// Mouse hover logic (optional, for visual feedback)\nstarsContainer.addEventListener('mouseover', (e) => {\n  const hoverTarget = e.target.closest('.star');\n  if (hoverTarget) {\n    const hoverValue = parseInt(hoverTarget.dataset.value);\n    stars.forEach(star => {\n      const value = parseInt(star.dataset.value);\n      star.classList.toggle('hovered', value <= hoverValue);\n    });\n  }\n});\n\nstarsContainer.addEventListener('mouseout', () => {\n  stars.forEach(star => star.classList.remove('hovered'));\n});\n\n// Initialize on load\nupdateStarAccessibility(currentRating);\nupdateRatingDisplay();\n",
          "testCases": [
            "**Semantic Structure**: Inspect HTML to confirm `<fieldset>`, `<legend>`, `role=\"radiogroup\"` are used.",
            "**ARIA Attributes**: Verify `role=\"radio\"`, `aria-label`, `aria-checked` are present and updated correctly on stars.",
            "**Initial Focus**: Press `Tab` – only the first star (or initially selected if any) should receive focus.",
            "**Arrow Navigation**: With focus on a star, press `ArrowRight`/`ArrowLeft` – focus should move between stars.",
            "**Selection with Keyboard**: With focus on a star, press `Space` or `Enter` – that star should be selected, and its `aria-checked` should be true. The `ratingValue` div should update.",
            "**Mouse Click**: Click a star – it should be selected, `ratingValue` updates, and `aria-checked` is correct.",
            "**Screen Reader Test (manual)**: Use a screen reader (e.g., NVDA, VoiceOver) to navigate and interact with the component. Verify announcements are meaningful (e.g., \"1 star rating, radio button, not checked\", \"3 star rating, radio button, checked\").",
            "**Focus Loop**: Ensure `Tab` does not get stuck inside the component and `ArrowLeft`/`ArrowRight` wrap around or stop at ends."
          ],
          "hints": [
            "Start by wrapping the `div.star-rating` in a `fieldset` and adding a `legend` for semantic grouping.",
            "Apply `role=\"radiogroup\"` to the container of the stars and `role=\"radio\"` to each individual star.",
            "For keyboard navigation like arrow keys within a radio group, typically only *one* radio button is `tabindex=\"0\"` (the currently selected one, or the first if none are selected). Others are `tabindex=\"-1\"`.",
            "Use `aria-checked=\"true\"` or `\"false\"` to indicate the selected state to assistive technologies.",
            "Remember to call `event.preventDefault()` for keyboard events like `ArrowLeft`, `ArrowRight`, `Space`, `Enter` to prevent default browser behavior (like scrolling)."
          ],
          "tags": [
            "Accessibility",
            "A11y",
            "ARIA",
            "Keyboard Navigation",
            "DOM Manipulation",
            "JavaScript",
            "Frontend Interview",
            "UI Component"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "HTML Semantic Elements",
            "CSS Selectors",
            "JavaScript DOM Events",
            "Basic Understanding of ARIA"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "WCAG Guidelines",
            "Custom Widget Accessibility",
            "Focus Management"
          ]
        },
        {
          "id": "task_service_worker_offline_cache_1",
          "title": "Implement a Basic Service Worker for Offline Caching",
          "description": "\nCreate a simple web application with an `index.html`, `style.css`, and `app.js` file. Implement a Service Worker (`sw.js`) that precaches these core assets and serves them using a 'Cache First' strategy.\n\n**Requirements:**\n1.  **`index.html`**: Link `style.css` and `app.js`.\n2.  **`app.js`**: Register the Service Worker (`sw.js`). Log success/failure.\n3.  **`sw.js`**: Implement the Service Worker lifecycle:\n    *   **Install Phase**: Open a cache named `my-app-v1` and add `index.html`, `style.css`, and `app.js` to it. Log a message on successful installation.\n    *   **Fetch Phase**: Intercept all network requests. Try to serve responses from the cache first. If a resource is not in the cache, fetch it from the network, cache the response, and then return it.\n    *   **Activate Phase**: Clean up any old caches (e.g., `my-app-v0`) to ensure only the current version of the cache is active.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Offline App</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <h1>Welcome to my Offline App!</h1>\n  <p>This page should work even when you're offline.</p>\n  <img src=\"https://via.placeholder.com/150\" alt=\"Placeholder Image\" class=\"placeholder-image\">\n  <script src=\"app.js\"></script>\n</body>\n</html>\n\n/* style.css */\nbody { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background-color: #f0f0f0; }\nh1 { color: #333; }\np { color: #555; text-align: center; }\n.placeholder-image { border: 2px solid #ccc; border-radius: 8px; }\n\n/* app.js */\n// TODO: Register Service Worker here\nconsole.log('App script loaded.');\n\n/* sw.js */\n// TODO: Implement Service Worker lifecycle events here\nconsole.log('Service Worker script loaded.');\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Offline App</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <h1>Welcome to my Offline App!</h1>\n  <p>This page should work even when you're offline.</p>\n  <img src=\"https://via.placeholder.com/150\" alt=\"Placeholder Image\" class=\"placeholder-image\">\n  <script src=\"app.js\"></script>\n</body>\n</html>\n\n/* style.css */\nbody { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; background-color: #f0f0f0; }\nh1 { color: #333; }\np { color: #555; text-align: center; }\n.placeholder-image { border: 2px solid #ccc; border-radius: 8px; }\n\n/* app.js */\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/sw.js')\n      .then(registration => {\n        console.log('Service Worker registered with scope:', registration.scope);\n      })\n      .catch(error => {\n        console.error('Service Worker registration failed:', error);\n      });\n  });\n}\nconsole.log('App script loaded.');\n\n/* sw.js */\nconst CACHE_NAME = 'my-app-v1'; // Define cache name\nconst urlsToCache = [\n  '/', // The root path, often points to index.html\n  '/index.html',\n  '/style.css',\n  '/app.js',\n  'https://via.placeholder.com/150' // Also cache the external image\n];\n\n// Install event: Precache static assets\nself.addEventListener('install', (event) => {\n  console.log('[Service Worker] Installing...');\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then((cache) => {\n        console.log('[Service Worker] Caching app shell');\n        return cache.addAll(urlsToCache);\n      })\n      .catch(error => {\n        console.error('[Service Worker] Caching failed:', error);\n      })\n  );\n});\n\n// Fetch event: Serve from cache first, then network, and cache new responses\nself.addEventListener('fetch', (event) => {\n  console.log(`[Service Worker] Fetching: ${event.request.url}`);\n  event.respondWith(\n    caches.match(event.request)\n      .then((response) => {\n        // Cache hit - return cached response\n        if (response) {\n          console.log('[Service Worker] Serving from cache:', event.request.url);\n          return response;\n        }\n\n        // No cache hit - fetch from network\n        console.log('[Service Worker] Fetching from network:', event.request.url);\n        return fetch(event.request)\n          .then((networkResponse) => {\n            // Check if we received a valid response\n            if (!networkResponse || networkResponse.status !== 200 || networkResponse.type !== 'basic') {\n              return networkResponse;\n            }\n\n            // IMPORTANT: Clone the response. A response is a stream\n            // and can only be consumed once. We must clone it so that\n            // we can consume the original and send one to the browser.\n            const responseToCache = networkResponse.clone();\n            caches.open(CACHE_NAME)\n              .then((cache) => {\n                cache.put(event.request, responseToCache);\n                console.log('[Service Worker] Cached new resource:', event.request.url);\n              });\n\n            return networkResponse;\n          })\n          .catch(error => {\n            console.error('[Service Worker] Network fetch failed:', event.request.url, error);\n            // This is where you could return an offline fallback page/image\n            // return caches.match('/offline.html');\n          });\n      })\n  );\n});\n\n// Activate event: Clean up old caches\nself.addEventListener('activate', (event) => {\n  console.log('[Service Worker] Activating...');\n  const cacheWhitelist = [CACHE_NAME];\n\n  event.waitUntil(\n    caches.keys().then((cacheNames) => {\n      return Promise.all(\n        cacheNames.map((cacheName) => {\n          if (cacheWhitelist.indexOf(cacheName) === -1) {\n            console.log('[Service Worker] Deleting old cache:', cacheName);\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n  // Optional: Force immediate control of clients. Useful during development.\n  self.clients.claim();\n  console.log('[Service Worker] Activated and claiming clients.');\n});\n\nconsole.log('Service Worker script loaded.');\n",
          "testCases": [
            "**First Load**: Load `index.html` in a clean browser profile/incognito window. Check DevTools Network tab: verify all assets (html, css, js, image) are fetched from network (status 200). Check Application -> Service Workers and Cache Storage tabs: verify `sw.js` is active and `my-app-v1` cache exists with all specified assets.",
            "**Offline Test**: Put browser in offline mode (DevTools Network tab -> Offline checkbox). Refresh the page. Verify the page loads completely and correctly, with all assets served from Service Worker (status 'from ServiceWorker').",
            "**Image Caching**: Verify the `placeholder.com` image is also cached and served offline.",
            "**Cache Update (Manual)**: Change a small piece of text in `style.css` and the `CACHE_NAME` in `sw.js` (e.g., `my-app-v2`). Refresh `index.html` twice. Check DevTools: `my-app-v1` should be deleted, `my-app-v2` should be active and contain new assets.",
            "**Console Logs**: Check browser console for Service Worker lifecycle messages (installing, caching, fetching, activating, deleting old cache)."
          ],
          "hints": [
            "Remember that the `install` event is your chance to pre-cache static assets.",
            "The `fetch` event listener is where you decide *how* to respond to network requests. `event.respondWith()` is key here.",
            "To implement 'Cache First', use `caches.match(event.request)` first, and only if it fails, then `fetch(event.request)`.",
            "When fetching a response from the network and putting it in the cache, remember to `clone()` the response, as a response stream can only be consumed once.",
            "The `activate` event is the ideal place to clean up old caches using `caches.keys()` and `caches.delete()`."
          ],
          "tags": [
            "Service Workers",
            "PWA",
            "Offline",
            "Caching",
            "Frontend Interview",
            "JavaScript"
          ],
          "timeEstimate": 75,
          "prerequisites": [
            "JavaScript Promises",
            "Fetch API",
            "Basic HTTP Concepts"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Background Sync",
            "Push Notifications",
            "Workbox"
          ]
        }
      ]
    }
  },
  {
    "id": "83f753cd-3157-413f-95d7-78fdd3f0a630",
    "startLine": 16900,
    "endLine": 16999,
    "processedDate": "2025-06-17T15:37:55.995Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_sop_cors",
          "title": "Same-Origin Policy (SOP) and Cross-Origin Resource Sharing (CORS)",
          "content": "The **Same-Origin Policy (SOP)** is a fundamental security mechanism in web browsers that restricts how documents or scripts loaded from one origin can interact with resources from another origin. An 'origin' is defined by the combination of protocol, host, and port. For example, `http://example.com:80/page` has the origin `http://example.com:80`.\n\n## Key Restrictions Imposed by SOP\n- **Cross-origin reads**: Scripts from one origin cannot directly read data from responses originating from another origin via `XMLHttpRequest` or `Fetch` API calls, unless explicitly allowed by CORS headers.\n- **Cross-origin writes**: While typically allowed (e.g., form submissions, redirects, `<img>` tags, `<script>` tags), the browser still enforces the same-origin policy on the data returned from such requests.\n- **Cross-origin embedding**: Embedding resources (like images, CSS, scripts) is generally allowed, but a script from `http://example.com` cannot directly read data from `http://api.another.com`.\n- **Specific APIs**: Access to certain browser APIs and data stores is also restricted:\n    - **Cookies**: Typically scoped to an origin, meaning cookies set by `example.com` cannot be accessed by `another.com`.\n    - **LocalStorage and IndexedDB**: Data stored in `LocalStorage` and `IndexedDB` is strictly confined to its origin.\n    - **CSS `getComputedStyle` and certain Canvas operations**: Information leakage can occur if these operations are performed on cross-origin content without proper security measures.\n\n## Cross-Origin Resource Sharing (CORS)\n**CORS** is a browser mechanism that allows web servers to explicitly permit cross-origin requests. It provides a flexible way for servers to specify which origins are permitted to access their resources. This is achieved using HTTP headers:\n- **`Access-Control-Allow-Origin`**: Specifies one or more origins that are allowed to access the resource. A value of `*` allows access from any origin (less secure).\n- **Preflight Requests**: For certain types of cross-origin requests (e.g., requests with custom headers, non-GET/POST methods like PUT/DELETE, or specific MIME types), browsers send an `OPTIONS` HTTP request (a \"preflight\" request) to the server before the actual request. This preflight checks if the server is willing to accept the actual request method and headers. The server must respond to the `OPTIONS` request with appropriate CORS headers (`Access-Control-Allow-Methods`, `Access-Control-Allow-Headers`, `Access-Control-Max-Age`).\n\nBy leveraging CORS, developers can build secure web applications that interact with APIs hosted on different domains, while still maintaining the fundamental security benefits of the Same-Origin Policy.",
          "examples": [
            {
              "id": "example_sop_cors_1",
              "title": "CORS Restricted Fetch Example",
              "code": "// Client-side JavaScript (e.g., from http://example.com)\nfetch('http://api.another.com/data')\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.error('Fetch error:', error));\n\n// Server-side response from http://api.another.com (without CORS headers)\n// HTTP/1.1 200 OK\n// Content-Type: application/json\n// {\"message\": \"Some data\"}\n\n// Expected browser console error on http://example.com:\n// Access to fetch at 'http://api.another.com/data' from origin 'http://example.com' \n// has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present \n// on the requested resource.",
              "explanation": "This example demonstrates a common CORS error. A `fetch` request from `http://example.com` to `http://api.another.com` will be blocked by the Same-Origin Policy if the `api.another.com` server does not include the `Access-Control-Allow-Origin` header in its response. The browser prevents the script from reading the cross-origin response.",
              "language": "typescript"
            },
            {
              "id": "example_sop_cors_2",
              "title": "CORS Enabled Server Response Example",
              "code": "// Server-side response from http://api.another.com (with CORS headers)\n// HTTP/1.1 200 OK\n// Access-Control-Allow-Origin: http://example.com\n// Access-Control-Allow-Methods: GET, POST\n// Access-Control-Allow-Headers: Content-Type, Authorization\n// Content-Type: application/json\n// {\"message\": \"Data allowed by CORS\"}",
              "explanation": "To allow the `fetch` request from `http://example.com` to succeed, the server at `http://api.another.com` must include the `Access-Control-Allow-Origin` header in its response, specifying `http://example.com` as an allowed origin. This header signals to the browser that the cross-origin request is permissible.",
              "language": "http"
            }
          ],
          "relatedQuestions": [
            "question_sop_cors_1",
            "question_sop_cors_2",
            "question_sop_cors_3",
            "question_sop_cors_4"
          ],
          "relatedTasks": [
            "task_cors_simulation"
          ],
          "tags": [
            "security",
            "networking",
            "browser-apis",
            "http",
            "frontend-basics"
          ],
          "technology": "Web",
          "prerequisites": [
            "http_basics",
            "javascript_fetch_api"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "api_integration",
            "web_security"
          ]
        },
        {
          "id": "theory_browser_storage",
          "title": "Browser Data Storage Mechanisms",
          "content": "Web browsers provide several mechanisms for storing data on the client-side. Each has distinct characteristics regarding storage capacity, persistence, accessibility, and primary use cases.\n\n## Available Storage Options\n1.  **Cookies**:\n    *   **Description**: Small text data stored by the browser, sent with every HTTP request to the domain.\n    *   **Capacity**: Very limited, typically max ~4KB per domain (including name, value, attributes).\n    *   **Persistence**: Can be session-based (deleted when browser closes) or persistent (with an expiry date/max-age).\n    *   **Accessibility**: Accessible by both client-side JavaScript (`document.cookie`) and server-side HTTP headers.\n    *   **Use Cases**: Session management (e.g., login status), user tracking, small preferences.\n    *   **Security**: Vulnerable to Cross-Site Scripting (XSS) and Cross-Site Request Forgery (CSRF) if not handled securely (e.g., `HttpOnly`, `SameSite` attributes).\n\n2.  **LocalStorage**:\n    *   **Description**: Stores key-value pairs (always strings).\n    *   **Capacity**: Larger than cookies, typically 5-10MB per origin.\n    *   **Persistence**: Persistent; data remains even after the browser is closed, until explicitly cleared by the user or code.\n    *   **Accessibility**: Synchronous API, accessible only by client-side JavaScript (`window.localStorage`). Not sent with HTTP requests.\n    *   **Use Cases**: User preferences (e.g., theme settings), application state that needs to persist across sessions, offline data caching.\n\n3.  **SessionStorage**:\n    *   **Description**: Similar to LocalStorage, stores key-value pairs (strings).\n    *   **Capacity**: Similar to LocalStorage, typically 5-10MB per origin.\n    *   **Persistence**: Data lasts only for the duration of the page session (until the tab or browser window is closed). Each new tab/window gets its own `SessionStorage` instance.\n    *   **Accessibility**: Synchronous API, accessible only by client-side JavaScript (`window.sessionStorage`). Not sent with HTTP requests.\n    *   **Use Cases**: Storing temporary data relevant only for the current session (e.g., form input data before submission, wizard steps).\n\n4.  **IndexedDB**:\n    *   **Description**: A transactional NoSQL database for storing significant amounts of structured data (JSON objects, files like `Blob`, `ArrayBuffer`). Provides an object store model.\n    *   **Capacity**: Much larger than LocalStorage, typically user-agent dependent, often 50MB to unlimited (with user permission).\n    *   **Persistence**: Persistent; data remains until explicitly cleared.\n    *   **Accessibility**: Asynchronous API, accessed via events and callbacks/Promises (`indexedDB` global object).\n    *   **Use Cases**: Offline applications, caching large volumes of data, storing complex structured data, client-side data synchronization.\n\n5.  **Web SQL (Deprecated)**:\n    *   **Description**: SQL database interface (SQLite based).\n    *   **Status**: Deprecated and not recommended for new projects. While some browsers still support it, it's not a W3C standard.\n    *   **Use Cases**: Historically used for structured data, but superseded by IndexedDB.\n\n6.  **Cache API (Service Workers)**:\n    *   **Description**: Part of the Service Worker specification, designed for storing network request/response pairs.\n    *   **Capacity**: Large, similar to IndexedDB, but focused on caching network resources.\n    *   **Persistence**: Persistent, controlled by Service Worker lifecycle.\n    *   **Accessibility**: Asynchronous API, typically used within Service Workers but can be accessed from the main thread.\n    *   **Use Cases**: Enabling offline capabilities, improving performance by serving cached assets.\n\n## Comparison Summary\n| Feature           | Cookies               | LocalStorage          | SessionStorage        | IndexedDB             | Cache API            |\n|-------------------|-----------------------|-----------------------|-----------------------|-----------------------|----------------------|\n| **Capacity**      | ~4KB                  | 5-10MB                | 5-10MB                | 50MB+ (user-agent dependent) | Large (user-agent dependent) |\n| **Persistence**   | Configurable (session/persistent) | Persistent            | Session-only          | Persistent            | Persistent           |\n| **API**           | Synchronous (`document.cookie`), HTTP headers | Synchronous (`localStorage`) | Synchronous (`sessionStorage`) | Asynchronous (`indexedDB`) | Asynchronous (`caches`) |\n| **Data Type**     | String                | Strings               | Strings               | Any structured data (JSON, Blob, ArrayBuffer) | Request/Response objects |\n| **Sent with HTTP**| Yes                   | No                    | No                    | No                    | No                   |\n| **Use Case**      | Session, tracking     | User preferences, app state | Temporary session data | Offline apps, large structured data | Offline apps, network caching |\n| **Security**      | HttpOnly, SameSite req'd | XSS vulnerable        | XSS vulnerable        | XSS vulnerable        | Managed by SW        |",
          "examples": [
            {
              "id": "example_browser_storage_1",
              "title": "LocalStorage and Cookies Basic Usage",
              "code": "// LocalStorage Example\nlocalStorage.setItem('theme', 'dark');\nconst currentTheme = localStorage.getItem('theme');\nconsole.log('Current theme (LocalStorage):', currentTheme); // Output: dark\n\n// Cookies Example\n// Setting a cookie (client-side) with an expiry\ndocument.cookie = 'user=john_doe; expires=' + new Date(Date.now() + 86400 * 1000).toUTCString() + '; path=/';\n\n// Reading cookies (client-side) - this returns all cookies as one string\nconsole.log('All cookies:', document.cookie); // Output: user=john_doe; theme=dark (if theme cookie existed)",
              "explanation": "This example demonstrates setting and retrieving data using `localStorage` and `document.cookie`. `localStorage.setItem` is straightforward for key-value string storage. `document.cookie` is more complex, requiring careful string manipulation for setting attributes like expiry or path. Reading `document.cookie` returns a single string containing all cookies, which then needs to be parsed.",
              "language": "typescript"
            },
            {
              "id": "example_browser_storage_2",
              "title": "SessionStorage Basic Usage",
              "code": "// SessionStorage Example\nsessionStorage.setItem('tempData', JSON.stringify({ items: [1, 2, 3], timestamp: Date.now() }));\nconst retrievedTempData = JSON.parse(sessionStorage.getItem('tempData'));\nconsole.log('Temporary session data:', retrievedTempData);\n\n// Data will be cleared when the tab/browser is closed.",
              "explanation": "This demonstrates `sessionStorage`, which behaves identically to `localStorage` but has a session-limited lifespan. It's suitable for temporary data that doesn't need to persist beyond the current browsing session.",
              "language": "typescript"
            },
            {
              "id": "example_browser_storage_3",
              "title": "IndexedDB Basic Setup (Conceptual)",
              "code": "// IndexedDB Conceptual Example (Simplified)\nconst request = indexedDB.open('myDatabase', 1);\n\nrequest.onupgradeneeded = event => {\n  const db = event.target.result;\n  if (!db.objectStoreNames.contains('books')) {\n    db.createObjectStore('books', { keyPath: 'isbn' });\n  }\n};\n\nrequest.onsuccess = event => {\n  const db = event.target.result;\n  const transaction = db.transaction(['books'], 'readwrite');\n  const objectStore = transaction.objectStore('books');\n  \n  objectStore.add({ isbn: '978-1234567890', title: 'My Awesome Book' });\n  \n  transaction.oncomplete = () => console.log('Book added to IndexedDB.');\n  transaction.onerror = error => console.error('Error adding book:', error);\n};\n\nrequest.onerror = error => console.error('IndexedDB error:', error);",
              "explanation": "This conceptual example outlines the basic steps for interacting with IndexedDB: opening a database, handling `onupgradeneeded` for schema changes (like creating object stores), and performing a transaction to add data. IndexedDB's asynchronous nature requires event handlers or Promises (often wrapped for easier use).",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_browser_storage_1",
            "question_browser_storage_2",
            "question_browser_storage_3",
            "question_browser_storage_4"
          ],
          "relatedTasks": [
            "task_user_preference_manager"
          ],
          "tags": [
            "browser-apis",
            "data-storage",
            "web-development",
            "offline-first"
          ],
          "technology": "Web",
          "prerequisites": [
            "javascript_basics",
            "dom_manipulation"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "offline_applications",
            "web_performance"
          ]
        },
        {
          "id": "theory_web_workers",
          "title": "Web Workers: Running Scripts in Background Threads",
          "content": "Web Workers enable JavaScript to run scripts in background threads, separate from the main UI thread of the browser. This is crucial for performing long, CPU-intensive computations without blocking the main thread, thus preventing the UI from becoming unresponsive (freezing).\n\n## Types of Web Workers\n1.  **Dedicated Workers**:\n    *   **Scope**: Communicate with a single main thread context (e.g., one tab or iframe).\n    *   **Communication**: Use `postMessage()` to send data from the main thread to the worker and vice-versa. The worker listens for messages using an `onmessage` event handler.\n    *   **Data Transfer**: By default, data passed via `postMessage` is **copied** using the structured cloning algorithm. This means a duplicate of the data is created, which can be slow and memory-intensive for large objects.\n\n2.  **Shared Workers**:\n    *   **Scope**: Can be accessed by multiple browser contexts (tabs, iframes, even other workers) from the same origin.\n    *   **Communication**: Each context connects to the Shared Worker via a `Port` object. Communication happens using `port.postMessage()` and `port.onmessage` on both sides.\n    *   **Life Cycle**: A Shared Worker instance is shared among all connected contexts from the same origin. It stays alive as long as at least one connection is open.\n\n## Key Characteristics\n-   **No DOM Access**: Web Workers do not have direct access to the DOM, `window` object, or `document` object. They operate in a separate global scope (`self` or `WorkerGlobalScope`).\n-   **Limited APIs**: They have access to a subset of global JavaScript features, including `XMLHttpRequest`, `fetch`, `IndexedDB`, `setTimeout`/`setInterval`, and the `self` global object, among others.\n-   **Error Handling**: Errors within a worker can be handled by listening for the `error` event on the worker object in the main thread.\n\n## Performance Benefit\nBy offloading heavy tasks (like complex calculations, data processing, or large network operations) to a Web Worker, the main thread remains free to handle UI updates, user interactions, and rendering, leading to a smoother and more responsive user experience.",
          "examples": [
            {
              "id": "example_web_workers_1",
              "title": "Dedicated Worker Basic Communication",
              "code": "// main.js (Main Thread)\nconst myWorker = new Worker('worker.js');\n\nmyWorker.postMessage({ command: 'start', data: 1000000 }); // Send data to worker\n\nmyWorker.onmessage = event => {\n  console.log('Message from worker:', event.data);\n  // Output: Message from worker: { result: 500000500000, processedBy: 'Worker' }\n};\n\nmyWorker.onerror = error => {\n  console.error('Worker error:', error.message);\n};\n\nconsole.log('Main thread continues to run...');\n\n// worker.js (Dedicated Worker)\nself.onmessage = event => {\n  const { command, data } = event.data;\n  if (command === 'start') {\n    let sum = 0;\n    for (let i = 0; i <= data; i++) {\n      sum += i;\n    }\n    self.postMessage({ result: sum, processedBy: 'Worker' }); // Send result back\n  }\n};",
              "explanation": "This example shows a dedicated worker (`worker.js`) performing a sum calculation. The main thread creates the worker, sends a message with input data using `postMessage`, and receives the result via the `onmessage` event. The main thread remains responsive while the worker performs the computation.",
              "language": "typescript"
            },
            {
              "id": "example_web_workers_2",
              "title": "Shared Worker Basic Setup (Conceptual)",
              "code": "// main.js or otherTab.js (Main Thread / Other Tab)\nconst sharedWorker = new SharedWorker('shared-worker.js');\n\n// Establish a connection to the shared worker\nsharedWorker.port.start(); // Necessary to begin listening for messages\n\nsharedWorker.port.postMessage('Hello from a context!');\n\nsharedWorker.port.onmessage = event => {\n  console.log('Message from shared worker:', event.data);\n};\n\n// shared-worker.js (Shared Worker)\nself.onconnect = event => {\n  const port = event.ports[0]; // Get the port for the connection\n  \n  port.onmessage = e => {\n    const message = e.data;\n    console.log('Shared Worker received:', message);\n    port.postMessage(`Echo: ${message} (from shared worker)`);\n  };\n\n  // Handle disconnects if needed\n  port.onmessageerror = error => console.error('Shared Worker message error:', error);\n};\n",
              "explanation": "This conceptual example illustrates a shared worker. Multiple browser contexts can connect to the same shared worker instance via `SharedWorker('path').port`. Each context gets a `MessagePort` object to communicate with the worker using `port.postMessage` and `port.onmessage`. The `onconnect` event is crucial in the shared worker to establish communication with newly connected ports.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_web_workers_1",
            "question_web_workers_2",
            "question_web_workers_3",
            "question_web_workers_4"
          ],
          "relatedTasks": [
            "task_heavy_computation_offloader"
          ],
          "tags": [
            "web-workers",
            "performance",
            "concurrency",
            "browser-apis"
          ],
          "technology": "Web",
          "prerequisites": [
            "javascript_async",
            "event_loop"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "complex_web_applications",
            "web_performance_optimization"
          ]
        },
        {
          "id": "theory_transferable_objects",
          "title": "Transferable Objects: Efficient Data Transfer in Web Workers",
          "content": "When data is passed between the main thread and a Web Worker (or between different Workers) using `postMessage()`, it is typically copied using the structured cloning algorithm. This process can be slow and memory-intensive, especially for large datasets, as it involves creating a complete duplicate of the data.\n\n**Transferable Objects** provide a solution to this performance bottleneck. They are a special type of object whose ownership can be transferred from one execution context to another with near-zero cost.\n\n## How Transferable Objects Work\n-   **Transfer of Ownership**: Instead of copying, the underlying memory buffer of the object is transferred. This means the original object in the sending context becomes **unusable (neutered)** after the transfer. It's like moving a file from one folder to another instead of copying it.\n-   **Performance Benefit**: For large data structures, transferring ownership is significantly faster than structured cloning because it avoids the overhead of memory allocation and data serialization/deserialization.\n\n## Examples of Transferable Objects\nCommon examples of objects that can be transferred include:\n-   **`ArrayBuffer`**: A raw binary data buffer. This is the most common use case for transferring large numerical arrays.\n-   **`MessagePort`**: Used for direct communication channels between contexts.\n-   **`ImageBitmap`**: An opaque object representing a bitmap image, suitable for drawing to a canvas without decoding on the main thread.\n-   **`OffscreenCanvas`**: A canvas that can be rendered in a Web Worker, allowing complex graphics operations to be offloaded.\n\n## Syntax for Transfer\nTo transfer an object, you pass it as the second argument (an array of transferable objects) to `postMessage()`:\n```typescript\nworker.postMessage(data, [transferableObject1, transferableObject2]);\n```\nAfter this call, `transferableObject1` and `transferableObject2` (and any other objects in the transferable array) will be \"neutered\" in the sending context.",
          "examples": [
            {
              "id": "example_transferable_objects_1",
              "title": "Transferring an ArrayBuffer",
              "code": "// main.js (Main Thread)\nconst myData = new Uint32Array(1000000); // 4MB array\nfor (let i = 0; i < myData.length; i++) {\n  myData[i] = i;\n}\n\nconsole.log('Main thread before transfer: myData[0] =', myData[0]); // Output: 0\n\nconst worker = new Worker('worker.js');\n\n// Transfer myData.buffer (the underlying ArrayBuffer)\nworker.postMessage({ arrayBuffer: myData.buffer }, [myData.buffer]);\n\n// After transfer, myData's underlying ArrayBuffer is neutered.\n// Any attempts to access myData will result in an error or unexpected behavior.\ntry {\n  console.log('Main thread after transfer: myData[0] =', myData[0]);\n} catch (e) {\n  console.error('Error accessing neutered ArrayBuffer:', e.message);\n  // Output: Error accessing neutered ArrayBuffer: ArrayBuffer has been detached\n}\n\n// worker.js\nself.onmessage = event => {\n  const receivedArrayBuffer = event.data.arrayBuffer;\n  const receivedData = new Uint32Array(receivedArrayBuffer);\n  \n  console.log('Worker received data: receivedData[0] =', receivedData[0]); // Output: 0\n  \n  // Perform operations on receivedData...\n  receivedData[0] = 999;\n  \n  // Transfer it back if needed\n  self.postMessage({ modifiedArrayBuffer: receivedData.buffer }, [receivedData.buffer]);\n};\n",
              "explanation": "This example demonstrates transferring a large `Uint32Array`'s underlying `ArrayBuffer` to a worker. Immediately after `postMessage`, the original `myData.buffer` (and thus `myData`) in the main thread becomes neutered. The worker receives the ownership and can then create its own `Uint32Array` view to work with the data. This avoids copying the 4MB data, providing significant performance gains.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_transferable_objects_1",
            "question_transferable_objects_2",
            "question_transferable_objects_3",
            "question_transferable_objects_4"
          ],
          "relatedTasks": [
            "task_large_array_processing_transferable"
          ],
          "tags": [
            "web-workers",
            "performance",
            "memory-management",
            "binary-data"
          ],
          "technology": "Web",
          "prerequisites": [
            "web_workers",
            "javascript_typed_arrays"
          ],
          "complexity": 8,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "requiredFor": [
            "high_performance_computing",
            "realtime_applications"
          ]
        },
        {
          "id": "theory_js_performance_optimization",
          "title": "Optimizing JavaScript Execution for Rendering Performance",
          "content": "Efficient JavaScript execution is critical for maintaining a smooth and responsive user interface. Long-running JavaScript tasks can block the main thread, leading to janky animations, unresponsive inputs, and a poor user experience. Here are several techniques to optimize resource-intensive JavaScript operations:\n\n1.  **Web Workers**: Offload heavy, CPU-bound computations (e.g., complex algorithms, large data processing) to a background thread using Web Workers. This ensures the main UI thread remains free to handle rendering and user interactions.\n\n2.  **Debouncing and Throttling**: These techniques limit the frequency at which a function is called, especially for events that fire rapidly (e.g., `resize`, `scroll`, `mousemove`, `input`).\n    *   **Debouncing**: Delays the execution of a function until a certain amount of time has passed since the last time it was invoked. Useful for search suggestions (only call API after user stops typing).\n    *   **Throttling**: Limits how often a function can be called to at most once in a given period. Useful for scroll events (update UI only every 100ms).\n\n3.  **`requestAnimationFrame` (rAF)**: This API is specifically designed for performing animations and visual updates. It schedules a function to run just before the browser's next repaint cycle, typically at 60 frames per second. This synchronizes updates with the browser's rendering engine, leading to smoother animations and avoiding layout thrashing.\n\n4.  **Task Chunking / Yielding to Main Thread**: Break down long-running synchronous tasks into smaller, manageable chunks. After each chunk, yield control back to the main thread, allowing the browser to render updates or process user input.\n    *   **`setTimeout(..., 0)`**: Placing a task in a `setTimeout` with a delay of 0 effectively puts it at the end of the current event loop queue, giving the browser a chance to render.\n    *   **`requestIdleCallback`**: Schedules a function to be run when the browser is idle. This is less urgent than `setTimeout(0)` and is ideal for non-essential, background work.\n\n5.  **Virtual DOM / Incremental DOM**: Libraries like React and Vue use a Virtual DOM (or similar concepts like Incremental DOM) to minimize direct DOM manipulations. Instead of updating the real DOM immediately, they build an in-memory representation, compare it with the previous state (diffing), and then batch the minimal necessary changes to the actual DOM. This reduces expensive reflows and repaints.\n\n6.  **Code Splitting / Lazy Loading**: Load JavaScript code only when it is needed, rather than loading everything upfront. This reduces the initial bundle size, speeding up page load times. Commonly used with routing (load component JS when route is activated) or for features accessed less frequently.\n\n7.  **Memoization**: Cache the results of expensive function calls. If the same inputs occur again, return the cached result instead of re-executing the function. This is particularly useful for pure functions with computationally intensive logic.\n\nBy strategically applying these techniques, developers can significantly improve the perceived performance and responsiveness of their web applications.",
          "examples": [
            {
              "id": "example_js_performance_1",
              "title": "Debouncing an Input Field",
              "code": "// Debounce function\nfunction debounce(func, delay) {\n  let timeoutId;\n  return function(...args) {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => {\n      func.apply(this, args);\n    }, delay);\n  };\n}\n\n// Example usage with a search input\nconst searchInput = document.getElementById('search-input');\n\nfunction performSearch(query) {\n  console.log(`Searching for: ${query}`);\n  // In a real app, this would be an API call\n}\n\nconst debouncedSearch = debounce(performSearch, 500);\n\nsearchInput.addEventListener('input', (event) => {\n  debouncedSearch(event.target.value);\n});",
              "explanation": "This example shows how to debounce an input event. The `performSearch` function (which might be an expensive API call) is only executed after the user has paused typing for 500 milliseconds. This prevents excessive function calls for every keystroke, optimizing performance.",
              "language": "typescript"
            },
            {
              "id": "example_js_performance_2",
              "title": "Using requestAnimationFrame for Animation",
              "code": "// Get the animated element\nconst box = document.getElementById('animated-box');\nlet position = 0;\n\nfunction animateBox() {\n  position += 2; // Move 2 pixels per frame\n  box.style.transform = `translateX(${position}px)`;\n\n  if (position < 200) { // Stop animation after 200px\n    requestAnimationFrame(animateBox);\n  }\n}\n\n// Start the animation\nrequestAnimationFrame(animateBox);",
              "explanation": "This demonstrates `requestAnimationFrame` for a smooth animation. Instead of using `setTimeout` or `setInterval` which can lead to janky animations, `requestAnimationFrame` ensures that the `animateBox` function runs precisely when the browser is ready to paint, synchronizing with the browser's refresh rate for optimal smoothness.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_js_perf_opt_1",
            "question_js_perf_opt_2",
            "question_js_perf_opt_3",
            "question_js_perf_opt_4"
          ],
          "relatedTasks": [
            "task_optimized_search_input",
            "task_heavy_computation_offloader"
          ],
          "tags": [
            "performance",
            "javascript",
            "browser-rendering",
            "optimization",
            "user-experience"
          ],
          "technology": "Web",
          "prerequisites": [
            "javascript_async",
            "event_loop"
          ],
          "complexity": 8,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "requiredFor": [
            "high_performance_applications",
            "web_vitals"
          ]
        },
        {
          "id": "theory_resize_observer",
          "title": "ResizeObserver API: Reacting to Element Size Changes",
          "content": "The **`ResizeObserver` API** provides a performant way to react to changes in the dimensions of a DOM element's content or border box. Unlike the `window.onresize` event, which only fires when the browser window changes size, `ResizeObserver` can monitor any specific DOM element and trigger a callback when its size changes, regardless of the cause (e.g., CSS changes, content changes, window resize).\n\n## Key Features and Timing\n-   **Observing Elements**: You create a `ResizeObserver` instance and then use its `observe()` method to register one or more target elements.\n-   **Callback Function**: The `ResizeObserver` constructor takes a callback function that will be executed whenever the size of an observed element changes. The callback receives an array of `ResizeObserverEntry` objects, each containing information about the changed dimensions of an observed element.\n-   **Timing of Notifications**: `ResizeObserver` delivers notifications **after** layout but **before** paint.\n    -   **After Layout**: The browser has already calculated the new dimensions and position of elements.\n    -   **Before Paint**: The browser has not yet painted these changes to the screen.\n\n## Why this Timing is Crucial\nThis specific timing is a significant performance advantage. By receiving notifications after layout but before paint, the observer can make further changes to the observed elements (or other parts of the DOM) *within the same rendering frame*. If these changes affect layout, the browser can recalculate the layout *once more* before painting. This avoids:\n-   **Layout Thrashing (or reflows)**: Repeated, synchronous forced recalculations of layout, which are expensive.\n-   **Visual Jank**: Unnecessary multiple redraws or flickering that might occur if changes were made after the browser had already painted.\n\nThis behavior allows for highly responsive components that can adjust their internal layout, font sizes, or other styles based on their new dimensions efficiently, without causing additional layout passes or visible performance hiccups.",
          "examples": [
            {
              "id": "example_resize_observer_1",
              "title": "Basic ResizeObserver Usage",
              "code": "// HTML:\n// <div id=\"my-resizable-box\" style=\"width: 200px; height: 100px; border: 1px solid black;\"></div>\n\nconst myBox = document.getElementById('my-resizable-box');\n\nconst resizeObserver = new ResizeObserver(entries => {\n  for (let entry of entries) {\n    // contentRect provides the size of the element's content box\n    const { width, height } = entry.contentRect;\n    console.log(`Box size changed to: ${width}px x ${height}px`);\n    \n    // Example: Adjust font size based on width\n    if (width < 250) {\n      entry.target.style.fontSize = '12px';\n    } else {\n      entry.target.style.fontSize = '20px';\n    }\n  }\n});\n\n// Start observing the element\nresizeObserver.observe(myBox);\n\n// You can change the size programmatically to test:\n// myBox.style.width = '300px';\n// myBox.style.height = '150px';\n\n// Or resize the browser window if the element has fluid width/height",
              "explanation": "This example sets up a `ResizeObserver` to monitor a `div` element. Whenever the `div`'s size changes (e.g., if its `width` CSS property is altered or if the browser window is resized causing its fluid width to change), the callback function executes, logging the new dimensions and dynamically adjusting the font size of the element based on its width. This demonstrates how responsive components can be built efficiently.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_resize_observer_1",
            "question_resize_observer_2",
            "question_resize_observer_3"
          ],
          "relatedTasks": [
            "task_responsive_card_component"
          ],
          "tags": [
            "browser-apis",
            "responsive-design",
            "performance",
            "dom"
          ],
          "technology": "Web",
          "prerequisites": [
            "javascript_events",
            "dom_manipulation"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "ui_components",
            "responsive_web_design"
          ]
        },
        {
          "id": "theory_drag_drop_file_reading",
          "title": "Drag and Drop File Reading with FileReader API",
          "content": "Implementing drag-and-drop file functionality allows users to easily interact with files directly from their desktop or file system. This typically involves handling a sequence of DOM events and utilizing the `FileReader` API to access file contents.\n\n## Algorithm for Reading a Dropped Text File\n1.  **Identify Drop Target**: Designate a specific DOM element (e.g., a `div`, `section`) to act as the drop zone.\n\n2.  **Prevent Default Browser Behavior**: Browsers have default behaviors for drag-and-drop (e.g., opening a dragged file in a new tab). These must be prevented to enable custom handling:\n    *   Attach an `event listener` for the `dragover` event to the drop target. Inside the handler, call `event.preventDefault()`. This indicates that the drop target is valid and allows a drop.\n    *   Attach an `event listener` for the `drop` event to the drop target. Inside the handler, call `event.preventDefault()` again to prevent the browser from processing the dropped file.\n\n3.  **Handle `dragover` (Optional Visual Feedback)**:\n    *   While not strictly necessary for functionality, it's good practice to provide visual feedback (e.g., changing border style, adding a class) when a draggable item is over the valid drop zone. Use `dragenter` and `dragleave` events for this.\n\n4.  **Handle `drop` Event and Access Files**:\n    *   In the `drop` event handler, the dropped files are accessible via `event.dataTransfer.files`. This property returns a `FileList` object, which is an array-like list of `File` objects.\n    *   Each `File` object contains properties like `name`, `size`, and `type` (MIME type).\n\n5.  **Validate File Type**: Before attempting to read, check if the dropped file is of the expected type (e.g., `text/plain` for `.txt` files). You can check `file.type` or `file.name`.\n\n6.  **Read File Content with `FileReader` API**:\n    *   If the file type is valid, create a new instance of `FileReader`.\n    *   Use one of `FileReader`'s methods to read the file:\n        *   `readAsText(file, [encoding])`: Reads the contents of the specified `Blob` or `File` as a text string. The `encoding` parameter is optional.\n        *   `readAsDataURL(file)`: Reads the contents as a data URL (Base64 encoded string).\n        *   `readAsArrayBuffer(file)`: Reads the contents as an `ArrayBuffer`.\n        *   `readAsBinaryString(file)`: Reads the contents as a raw binary string (deprecated).\n    *   Listen for the `onload` event on the `FileReader` instance. When the file has been successfully read, `event.target.result` will contain the file's content.\n\n7.  **Process/Display Content**: Once the content is available in `fileReader.onload`, you can display it in a `textarea`, `div`, or process it as needed by your application.\n\nThis robust approach ensures a user-friendly and functional drag-and-drop file interaction.",
          "examples": [
            {
              "id": "example_drag_drop_file_reading_1",
              "title": "Drag and Drop Text File Reader",
              "code": "// HTML structure (index.html):\n// <div id=\"drop-zone\" style=\"border: 2px dashed #ccc; padding: 20px; text-align: center; font-family: sans-serif; height: 100px; line-height: 100px;\">\n//   Drag & Drop .txt files here\n// </div>\n// <pre id=\"file-content\" style=\"margin-top: 20px; border: 1px solid #eee; padding: 10px; background-color: #f9f9f9; white-space: pre-wrap; word-wrap: break-word;\"></pre>\n\n// JavaScript (script.js):\nconst dropZone = document.getElementById('drop-zone');\nconst fileContentDisplay = document.getElementById('file-content');\n\ndropZone.addEventListener('dragover', (e) => {\n  e.preventDefault(); // Prevent default to allow drop\n  dropZone.style.borderColor = 'green'; // Visual feedback\n});\n\ndropZone.addEventListener('dragleave', () => {\n  dropZone.style.borderColor = '#ccc'; // Reset visual feedback\n});\n\ndropZone.addEventListener('drop', (e) => {\n  e.preventDefault(); // Prevent browser from opening file\n  dropZone.style.borderColor = '#ccc'; // Reset visual feedback\n\n  const files = e.dataTransfer.files; // Get the FileList\n\n  if (files.length > 0) {\n    const file = files[0]; // Get the first dropped file\n\n    if (file.type === 'text/plain' || file.name.endsWith('.txt')) {\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        // Display the file content\n        fileContentDisplay.textContent = event.target.result;\n      };\n\n      reader.onerror = (error) => {\n        console.error('Error reading file:', error);\n        fileContentDisplay.textContent = 'Error reading file.';\n      };\n\n      reader.readAsText(file); // Read the file as text\n    } else {\n      fileContentDisplay.textContent = 'Please drop a .txt file.';\n    }\n  }\n});",
              "explanation": "This example implements the described algorithm. It sets up a `div` as a drop zone. On `dragover`, it prevents default behavior and provides visual feedback. On `drop`, it retrieves the file, validates it as a `.txt` file, uses `FileReader.readAsText()` to get its content, and then displays it in a `pre` tag. Error handling for the `FileReader` is also included.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_drag_drop_file_1",
            "question_drag_drop_file_2",
            "question_drag_drop_file_3",
            "question_drag_drop_file_4"
          ],
          "relatedTasks": [
            "task_text_file_viewer"
          ],
          "tags": [
            "dom-events",
            "file-api",
            "drag-and-drop",
            "browser-apis",
            "user-experience"
          ],
          "technology": "Web",
          "prerequisites": [
            "javascript_events",
            "dom_manipulation"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "file_upload_interfaces",
            "rich_text_editors"
          ]
        },
        {
          "id": "theory_shadow_dom",
          "title": "Shadow DOM: Encapsulated DOM and Styles",
          "content": "The **Shadow DOM** is a web standard that allows for the encapsulation of DOM structure and CSS styles within a web component. When you inspect an HTML page in browser developer tools and see `#shadow-root (open)` or `#shadow-root (closed)`, it indicates the presence of a Shadow DOM.\n\n## Key Concepts\n-   **Shadow Host**: A regular DOM element to which a shadow tree is attached. This element acts as the container for the encapsulated content.\n-   **Shadow Tree**: The isolated DOM tree that is rendered by the browser instead of the shadow host's regular light DOM children. Its content is not part of the main document's DOM tree.\n-   **Shadow Root**: The root node of the shadow tree. It's the entry point to the encapsulated DOM. It can be `open` or `closed`.\n    -   **`open` Shadow Root**: The shadow root can be accessed via JavaScript from the main document (e.g., `element.shadowRoot`). This is common for custom elements that expose internal parts for styling or scripting.\n    -   **`closed` Shadow Root**: The shadow root cannot be accessed from outside JavaScript. This provides stronger encapsulation, typically used by built-in browser elements (like `<video>` controls) for security reasons.\n\n## Benefits of Shadow DOM\n1.  **Encapsulation of DOM**: The internal DOM structure of a component is hidden from the main document's DOM. Queries like `document.querySelector()` will not pierce into the shadow tree.\n2.  **Style Encapsulation**: CSS styles defined within the shadow tree are scoped only to that tree and do not leak out to the main document. Conversely, styles from the main document generally do not leak into the shadow tree (with some exceptions like inherited properties).\n3.  **Modularity and Reusability**: Promotes the creation of truly self-contained and reusable UI components. Developers can be confident that a component's internal structure or styles won't conflict with other parts of the page or break when integrated into different projects.\n4.  **Simplified Development**: Reduces the mental overhead of managing CSS specificity and avoiding naming collisions in large applications.\n\n## Use Cases\n-   **Web Components**: Shadow DOM is a cornerstone of the Web Components specification, particularly for defining custom elements that have their own encapsulated UI.\n-   **Built-in Elements**: Many standard HTML elements like `<video>`, `<audio>`, `<input type=\"range\">`, and others use Shadow DOM internally to render their complex controls, ensuring their styling and functionality are consistent across websites.",
          "examples": [
            {
              "id": "example_shadow_dom_1",
              "title": "Native Element with Shadow DOM",
              "code": "// Inspect a native <video> element in your browser's developer tools.\n// You will typically see a structure similar to this:\n\n// <video controls src=\"your-video.mp4\">\n//   #shadow-root (open)\n//     <div id=\"container\">\n//       <div id=\"controls\">\n//         <button id=\"play-button\"></button>\n//         <input type=\"range\" id=\"timeline\">\n//         <!-- ... other video controls ... -->\n//       </div>\n//     </div>\n// </video>\n\n// Explanation: The complex UI for video controls (play button, timeline, volume etc.) \n// is rendered inside an open shadow root attached to the <video> element. \n// This allows the browser to style and manage these controls internally \n// without them interfering with your page's CSS or JavaScript.",
              "explanation": "This conceptual example shows how standard HTML elements like `<video>` use Shadow DOM. The browser hides the complex internal structure of the video player controls within a shadow root, ensuring their functionality and styling are isolated from the main document.",
              "language": "html"
            },
            {
              "id": "example_shadow_dom_2",
              "title": "Creating a Simple Custom Element with Shadow DOM",
              "code": "// HTML:\n// <my-shadow-component></my-shadow-component>\n\n// JavaScript:\nclass MyShadowComponent extends HTMLElement {\n  constructor() {\n    super();\n    const shadowRoot = this.attachShadow({ mode: 'open' }); // Create an open shadow root\n\n    // Add content to the shadow DOM\n    shadowRoot.innerHTML = `\n      <style>\n        /* Styles here are scoped ONLY to this component */\n        :host {\n          display: block;\n          border: 1px solid blue;\n          padding: 10px;\n          background-color: lightblue;\n        }\n        p {\n          color: darkblue;\n          font-family: sans-serif;\n        }\n      </style>\n      <p>This content is inside the Shadow DOM.</p>\n      <button>Click Me</button>\n    `;\n\n    // You can also add event listeners to elements inside the shadow DOM\n    shadowRoot.querySelector('button').addEventListener('click', () => {\n      alert('Button clicked inside Shadow DOM!');\n    });\n  }\n}\n\ncustomElements.define('my-shadow-component', MyShadowComponent);",
              "explanation": "This example demonstrates how to create a custom element that uses Shadow DOM. By calling `this.attachShadow({ mode: 'open' })`, an isolated DOM tree is created. Styles defined within the `<style>` tag inside the shadow root are confined to this component, preventing them from affecting the main document and vice-versa, showcasing the powerful encapsulation.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_shadow_dom_1",
            "question_shadow_dom_2",
            "question_shadow_dom_3",
            "question_shadow_dom_4"
          ],
          "relatedTasks": [
            "task_reusable_alert_component"
          ],
          "tags": [
            "web-components",
            "dom",
            "css",
            "encapsulation",
            "front-end-architecture"
          ],
          "technology": "Web",
          "prerequisites": [
            "html_basics",
            "css_basics"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "web_components_development",
            "framework_agnostic_components"
          ]
        },
        {
          "id": "theory_custom_elements",
          "title": "Custom Elements: Defining Your Own HTML Tags",
          "content": "Custom Elements are a fundamental part of the Web Components specification, allowing developers to define their own fully-featured HTML tags with custom templates, encapsulated styles (often using Shadow DOM), and JavaScript-driven behavior. They extend the capabilities of HTML itself.\n\n## How Custom Elements Work\nCustom Elements are built upon the `HTMLElement` interface and registered with the browser's `CustomElementRegistry` (`customElements` global object).\n\n1.  **Defining the Class**: You create a JavaScript class that extends `HTMLElement`.\n2.  **Attaching Behavior**: Inside this class, you can define:\n    *   **Constructor**: Used for initial setup. Best practice is to set up Shadow DOM and attach event listeners here.\n    *   **Lifecycle Callbacks**: Special methods that are automatically called by the browser at different stages of the element's life:\n        *   `connectedCallback()`: Invoked when the custom element is first connected to the document's DOM.\n        *   `disconnectedCallback()`: Invoked when the custom element is disconnected from the document's DOM.\n        *   `attributeChangedCallback(name, oldValue, newValue)`: Invoked when one of the custom element's observed attributes is added, removed, or changed. You must define `static get observedAttributes()` to specify which attributes to observe.\n        *   `adoptedCallback()`: Invoked when the custom element is moved to a new document (e.g., in an `<iframe>`).\n3.  **Registering the Element**: You register your custom element with the browser using `customElements.define(tagName, elementClass, [options])`. The `tagName` must contain a hyphen (`-`) to avoid conflicts with future HTML elements (e.g., `my-button`, `date-picker`).\n\n## Types of Custom Elements\n-   **Autonomous Custom Elements**: Standalone elements that do not inherit from standard HTML elements. They are entirely new elements (e.g., `<my-modal>`).\n-   **Customized Built-in Elements**: Elements that extend existing HTML elements (e.g., `<button is=\"my-fancy-button\">`). These are less commonly used due to complexity and browser support.\n\n## Benefits and Use Cases\n1.  **Reusability**: Create encapsulated UI components (like a custom date picker, a modal dialog, or a notification banner) that can be easily reused across different projects or shared within an organization.\n2.  **Encapsulation**: When combined with Shadow DOM, Custom Elements provide strong encapsulation of their internal DOM structure and styles, preventing conflicts with the rest of the page. This leads to more robust and predictable components.\n3.  **Interoperability**: As a native web platform standard, Custom Elements can be used with any JavaScript framework (React, Vue, Angular) or even with no framework at all. They are future-proof and highly interoperable.\n4.  **Semantic HTML**: Define elements that have clear, domain-specific meaning, improving the readability and maintainability of your HTML markup.\n5.  **Maintainability**: Break down complex user interfaces into smaller, self-contained, and easier-to-manage components.\n6.  **Progressive Enhancement**: Custom elements can degrade gracefully if JavaScript is disabled or fails to load, allowing basic content to still be rendered.",
          "examples": [
            {
              "id": "example_custom_elements_1",
              "title": "Basic Custom Element Definition and Usage",
              "code": "// HTML:\n// <hello-world name=\"Alice\"></hello-world>\n// <hello-world name=\"Bob\"></hello-world>\n\n// JavaScript:\nclass HelloWorld extends HTMLElement {\n  // Define observed attributes for attributeChangedCallback\n  static get observedAttributes() {\n    return ['name'];\n  }\n\n  constructor() {\n    super(); // Always call super() first in the constructor\n    this.attachShadow({ mode: 'open' }); // Attach a shadow DOM for encapsulation\n    this._render(); // Initial render\n  }\n\n  connectedCallback() {\n    console.log('hello-world element added to DOM.');\n    // Add event listeners or fetch data here\n  }\n\n  disconnectedCallback() {\n    console.log('hello-world element removed from DOM.');\n    // Clean up event listeners or resources\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'name' && oldValue !== newValue) {\n      console.log(`Name attribute changed from ${oldValue} to ${newValue}`);\n      this._render(); // Re-render when name changes\n    }\n  }\n\n  _render() {\n    const name = this.getAttribute('name') || 'World';\n    this.shadowRoot.innerHTML = `\n      <style>\n        p { color: #333; font-family: sans-serif; }\n        span { font-weight: bold; color: blue; }\n      </style>\n      <p>Hello, <span>${name}</span>!</p>\n    `;\n  }\n}\n\n// Define the custom element\ncustomElements.define('hello-world', HelloWorld);\n\n// Example of changing attribute programmatically\n// const el = document.querySelector('hello-world');\n// el.setAttribute('name', 'Charlie');",
              "explanation": "This example defines a simple `<hello-world>` custom element. It extends `HTMLElement`, uses a `constructor` to set up Shadow DOM, and implements `connectedCallback` and `attributeChangedCallback` to react to DOM attachment and attribute changes. The `_render` method updates the Shadow DOM content. The `customElements.define` call registers the element with the browser, making `<hello-world>` available as a valid HTML tag.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_custom_elements_1",
            "question_custom_elements_2",
            "question_custom_elements_3",
            "question_custom_elements_4"
          ],
          "relatedTasks": [
            "task_reusable_alert_component"
          ],
          "tags": [
            "web-components",
            "html",
            "javascript",
            "modularity",
            "front-end-architecture"
          ],
          "technology": "Web",
          "prerequisites": [
            "html_basics",
            "javascript_classes",
            "dom_manipulation",
            "shadow_dom"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "web_components_development",
            "framework_agnostic_components",
            "design_systems"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_sop_cors_1",
          "topic": "Same-Origin Policy",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary security principle behind the Same-Origin Policy?",
          "answer": "The Same-Origin Policy prevents a document or script loaded from one origin from interacting with a resource from another origin.",
          "options": [],
          "analysisPoints": [
            "Defines 'origin' as protocol, host, and port.",
            "Crucial for preventing malicious scripts from accessing sensitive data from other sites.",
            "Acts as a foundational browser security model."
          ],
          "keyConcepts": [
            "Same-Origin Policy",
            "Origin",
            "Browser Security"
          ],
          "evaluationCriteria": [
            "Understanding of fundamental principles",
            "Ability to define key terms"
          ],
          "example": "",
          "tags": [
            "security",
            "networking",
            "browser"
          ],
          "prerequisites": [
            "http_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_sop_cors_2",
          "topic": "CORS and SOP Restrictions",
          "level": "medium",
          "type": "open",
          "question": "The Same-Origin Policy restricts `XMLHttpRequest` and `Fetch` calls by default. Name two other browser features or data storage mechanisms that are typically scoped to an origin due to SOP, and briefly explain why.",
          "answer": "Two other browser features/data storage mechanisms scoped to an origin due to SOP are:\n\n1.  **Cookies**: Cookies are typically scoped to a domain (and path/protocol) to prevent one website from reading cookies set by another. If `siteA.com` could read `siteB.com`'s cookies, it could potentially steal session tokens or other sensitive user data, leading to session hijacking or privacy breaches.\n2.  **LocalStorage and IndexedDB**: Data stored in `LocalStorage` and `IndexedDB` is strictly confined to its origin. This means that data stored by `app.example.com` cannot be accessed by `another.com`. This prevents malicious scripts from reading or modifying data that belongs to other applications or websites, ensuring data isolation and preventing cross-site data leakage.",
          "options": [],
          "analysisPoints": [
            "Identifies Cookies, LocalStorage, or IndexedDB.",
            "Explains the security rationale for each restriction.",
            "Demonstrates understanding of data isolation."
          ],
          "keyConcepts": [
            "Same-Origin Policy",
            "Cookies",
            "LocalStorage",
            "IndexedDB",
            "Data Isolation",
            "Security"
          ],
          "evaluationCriteria": [
            "Identification of restricted features",
            "Ability to explain the 'why' behind security restrictions",
            "Understanding of common web vulnerabilities"
          ],
          "example": "",
          "tags": [
            "security",
            "browser-apis",
            "data-storage"
          ],
          "prerequisites": [
            "same_origin_policy",
            "browser_storage"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_sop_cors_3",
          "topic": "CORS Headers",
          "level": "medium",
          "type": "mcq",
          "question": "A frontend application hosted at `https://app.example.com` needs to make `POST` requests to an API server at `https://api.thirdparty.net`. If the requests are being blocked by the Same-Origin Policy, which HTTP response header must `https://api.thirdparty.net` include to allow `app.example.com` to make these requests?",
          "answer": "`Access-Control-Allow-Origin: https://app.example.com`",
          "options": [
            "`Content-Type: application/json`",
            "`Access-Control-Allow-Methods: POST`",
            "`Access-Control-Allow-Origin: https://app.example.com`",
            "`X-Requested-With: XMLHttpRequest`"
          ],
          "analysisPoints": [
            "Correctly identifies `Access-Control-Allow-Origin` as the primary header for allowing cross-origin requests.",
            "Understands that the value of `Access-Control-Allow-Origin` must match the requesting origin (or be `*`).",
            "Distinguishes `Access-Control-Allow-Origin` from other CORS-related headers like `Access-Control-Allow-Methods` (which is also needed for `POST` in preflight but doesn't grant fundamental origin permission).",
            "Recognizes that `Content-Type` and `X-Requested-With` are standard request/response headers, not CORS enforcement headers."
          ],
          "keyConcepts": [
            "CORS",
            "Access-Control-Allow-Origin",
            "HTTP Headers",
            "Same-Origin Policy"
          ],
          "evaluationCriteria": [
            "Knowledge of CORS specific headers",
            "Ability to apply CORS concepts to a practical scenario"
          ],
          "example": "The `Access-Control-Allow-Origin` header is fundamental for allowing cross-origin requests. If a server at `api.thirdparty.net` includes `Access-Control-Allow-Origin: https://app.example.com` in its response headers, the browser will permit the JavaScript code from `app.example.com` to read the response from `api.thirdparty.net`. While `Access-Control-Allow-Methods: POST` would also be necessary for the preflight `OPTIONS` request for a `POST` method, it's `Access-Control-Allow-Origin` that determines if the origin itself is permitted to access the resource.",
          "tags": [
            "cors",
            "http",
            "security",
            "networking"
          ],
          "prerequisites": [
            "same_origin_policy"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_sop_cors_4",
          "topic": "CORS Preflight Requests",
          "level": "hard",
          "type": "open",
          "question": "Explain what a CORS 'preflight' request is, when it occurs, and why it's necessary. What HTTP method is typically used for a preflight request, and what headers does the server need to respond with?",
          "answer": "A CORS 'preflight' request is an `OPTIONS` HTTP request that the browser automatically sends to a server before the actual cross-origin request. It's necessary for \"non-simple\" requests to determine if the server is willing to accept the actual request with its specified method, headers, and origin.\n\n**When it occurs:**\nPreflight requests occur for cross-origin requests that are not considered \"simple\" by the CORS specification. A request is simple if all of the following conditions are met:\n1.  Method is `GET`, `HEAD`, or `POST`.\n2.  Headers only include CORS-safelisted request-headers (e.g., `Accept`, `Accept-Language`, `Content-Language`, `Content-Type` with values `application/x-www-form-urlencoded`, `multipart/form-data`, or `text/plain`).\n3.  No `ReadableStream` object is used in the request.\n\nExamples of non-simple requests include `PUT`, `DELETE`, requests with custom headers (like `Authorization`), or `POST` requests with `Content-Type: application/json`.\n\n**Why it's necessary:**\nIt's a security mechanism. For non-simple requests, the browser needs to ensure the server understands and explicitly grants permission for the more complex or potentially destructive operations before sending the actual data. Without a preflight, a malicious script could trick a browser into sending a `PUT` or `DELETE` request to another origin, which might have side effects, even if the script can't read the response.\n\n**HTTP Method and Server Response:**\n-   The HTTP method used for a preflight request is always **`OPTIONS`**.\n-   The server must respond with the following CORS headers to indicate it's safe to proceed with the actual request:\n    -   `Access-Control-Allow-Origin`: Specifies the origin(s) allowed.\n    -   `Access-Control-Allow-Methods`: Specifies the HTTP methods allowed for the actual request (e.g., `GET, POST, PUT, DELETE`).\n    -   `Access-Control-Allow-Headers`: Specifies the non-safelisted headers allowed for the actual request (e.g., `Content-Type, Authorization`).\n    -   `Access-Control-Max-Age` (optional): Indicates how long the results of a preflight request can be cached, reducing subsequent preflight requests.",
          "options": [],
          "analysisPoints": [
            "Defines preflight request and its purpose.",
            "Lists conditions for when a preflight request is triggered.",
            "Explains the security rationale (preventing side effects without explicit permission).",
            "Identifies `OPTIONS` as the method.",
            "Lists necessary `Access-Control` response headers."
          ],
          "keyConcepts": [
            "CORS Preflight",
            "OPTIONS Method",
            "Access-Control-Allow-Origin",
            "Access-Control-Allow-Methods",
            "Access-Control-Allow-Headers",
            "HTTP Security"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of complex CORS mechanism",
            "Ability to articulate security implications",
            "Detailed knowledge of HTTP headers"
          ],
          "example": "",
          "tags": [
            "cors",
            "http",
            "security",
            "networking",
            "advanced"
          ],
          "prerequisites": [
            "same_origin_policy",
            "http_headers"
          ],
          "complexity": 9,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_browser_storage_1",
          "topic": "Browser Data Storage Comparison",
          "level": "medium",
          "type": "open",
          "question": "You need to store user preferences (e.g., dark theme preference) and also temporarily save form data as a user fills out a multi-step form before final submission. Which two browser storage mechanisms would you choose for each scenario, and why? Explain their key differences relevant to these use cases.",
          "answer": "For user preferences (e.g., dark theme preference), I would choose **LocalStorage**.\n\n*   **Why LocalStorage for preferences**: LocalStorage provides persistent storage, meaning the data remains even after the user closes and reopens the browser. User preferences are typically expected to last across sessions, making LocalStorage ideal. It also has a relatively large capacity (5-10MB) and a simple, synchronous API for key-value string storage.\n\nFor temporarily saving form data during a multi-step form, I would choose **SessionStorage**.\n\n*   **Why SessionStorage for temporary form data**: SessionStorage is designed for session-specific data. The data persists as long as the browser tab or window is open, but is automatically cleared when the session ends (tab closed). This is perfect for multi-step forms where the data is only relevant for the current user interaction and does not need to persist once the form is submitted or the user navigates away and closes the tab. It also shares the same synchronous key-value API as LocalStorage, making it easy to use.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies LocalStorage for preferences due to persistence.",
            "Correctly identifies SessionStorage for temporary form data due to session-only persistence.",
            "Articulates the key difference in persistence between LocalStorage and SessionStorage.",
            "Mentions other relevant characteristics like API type (synchronous) or capacity."
          ],
          "keyConcepts": [
            "LocalStorage",
            "SessionStorage",
            "Persistence",
            "Browser Storage",
            "Use Cases"
          ],
          "evaluationCriteria": [
            "Ability to choose appropriate storage based on requirements",
            "Clear comparison of storage mechanisms",
            "Understanding of practical application of browser APIs"
          ],
          "example": "",
          "tags": [
            "data-storage",
            "frontend-architecture",
            "user-experience"
          ],
          "prerequisites": [
            "browser_storage"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_browser_storage_2",
          "topic": "Browser Data Storage Features",
          "level": "easy",
          "type": "flashcard",
          "question": "Which browser storage mechanism is typically limited to ~4KB and is sent with every HTTP request to its domain?",
          "answer": "Cookies",
          "options": [],
          "analysisPoints": [
            "Recalls the capacity limitation of Cookies.",
            "Recalls the HTTP header transmission characteristic of Cookies."
          ],
          "keyConcepts": [
            "Cookies",
            "Capacity",
            "HTTP Request"
          ],
          "evaluationCriteria": [
            "Quick recall of facts",
            "Identification of key characteristics"
          ],
          "example": "",
          "tags": [
            "cookies",
            "data-storage",
            "http"
          ],
          "prerequisites": [
            "browser_storage"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_browser_storage_3",
          "topic": "IndexedDB Use Cases",
          "level": "medium",
          "type": "mcq",
          "question": "Your web application needs to store a large amount of structured data (e.g., hundreds of JSON objects representing product catalog data) locally on the client-side for offline access. Which browser storage API is best suited for this requirement?",
          "answer": "IndexedDB",
          "options": [
            "Cookies",
            "LocalStorage",
            "SessionStorage",
            "IndexedDB"
          ],
          "analysisPoints": [
            "Identifies the need for large capacity and structured data.",
            "Recognizes IndexedDB as a transactional NoSQL database suitable for such requirements.",
            "Understands limitations of other options (small capacity for Cookies, string-only and smaller capacity for Local/SessionStorage)."
          ],
          "keyConcepts": [
            "IndexedDB",
            "Offline Applications",
            "Structured Data",
            "Browser Storage Capacity"
          ],
          "evaluationCriteria": [
            "Ability to select appropriate technology based on specific needs",
            "Understanding of API capabilities and limitations"
          ],
          "example": "IndexedDB is the most suitable choice here. Unlike Cookies (very small, sent with every request), LocalStorage, and SessionStorage (both limited to strings and typically 5-10MB), IndexedDB is a full-fledged transactional NoSQL database designed for storing large amounts of structured data, including JSON objects, Blobs, and ArrayBuffers. Its asynchronous API is built to handle significant data operations without blocking the main thread, making it ideal for offline-first applications and complex client-side data management.",
          "tags": [
            "indexeddb",
            "data-storage",
            "offline-first",
            "browser-apis"
          ],
          "prerequisites": [
            "browser_storage"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_browser_storage_4",
          "topic": "Cache API and Service Workers",
          "level": "hard",
          "type": "open",
          "question": "Beyond storing user preferences or structured data, what is the primary purpose of the Cache API in conjunction with Service Workers, and how does it contribute to web application performance and user experience?",
          "answer": "The primary purpose of the **Cache API** in conjunction with **Service Workers** is to enable robust **offline capabilities** and significantly **improve performance** by intercepting and serving network requests from a cache.\n\n**How it works and contributes:**\n1.  **Network Request Interception**: Service Workers act as a programmable proxy between the browser and the network. They can intercept all outgoing network requests made by the page.\n2.  **Caching Responses**: The Cache API allows Service Workers to store network request-response pairs. When a request is made, the Service Worker can check its cache first. If a matching response is found, it can serve it immediately from the cache, without going to the network.\n3.  **Offline Access**: By caching essential assets (HTML, CSS, JavaScript, images) and even dynamic API responses, the application can load and function even when the user is offline or has an unreliable network connection.\n4.  **Performance Improvement**: Serving assets from the local cache is much faster than fetching them from the network. This drastically reduces page load times, especially on repeat visits, providing an instant-loading experience and improving Core Web Vitals.",
          "options": [],
          "analysisPoints": [
            "Identifies Cache API's role with Service Workers.",
            "Explains its primary purpose as offline capability and performance enhancement.",
            "Details how it achieves this (network interception, caching request/response pairs).",
            "Connects it to user experience (faster loading, offline access)."
          ],
          "keyConcepts": [
            "Cache API",
            "Service Workers",
            "Offline First",
            "Web Performance",
            "Network Interception"
          ],
          "evaluationCriteria": [
            "Understanding of advanced browser APIs and their synergy",
            "Ability to explain architectural patterns for web performance",
            "Insight into user experience benefits"
          ],
          "example": "",
          "tags": [
            "service-workers",
            "cache-api",
            "offline",
            "performance"
          ],
          "prerequisites": [
            "browser_storage",
            "web_workers"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_web_workers_1",
          "topic": "Web Workers Purpose",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary benefit of using Web Workers in a web application?",
          "answer": "Web Workers allow JavaScript to run in a background thread, preventing the main UI thread from being blocked by heavy computations, thus keeping the UI responsive.",
          "options": [],
          "analysisPoints": [
            "Focuses on non-blocking UI.",
            "Mentions background thread execution."
          ],
          "keyConcepts": [
            "Web Workers",
            "UI Responsiveness",
            "Background Threads",
            "Main Thread"
          ],
          "evaluationCriteria": [
            "Understanding core benefit",
            "Concise explanation"
          ],
          "example": "",
          "tags": [
            "web-workers",
            "performance",
            "concurrency"
          ],
          "prerequisites": [
            "javascript_async"
          ],
          "complexity": 5,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_workers_2",
          "topic": "Web Workers Communication",
          "level": "medium",
          "type": "open",
          "question": "Describe how data is transferred between a dedicated Web Worker and the main thread. What is the default mechanism, and what is its potential drawback for large data?",
          "answer": "Data is transferred between a dedicated Web Worker and the main thread using the `postMessage()` method to send data and an `onmessage` event handler to receive it.\n\nBy default, the mechanism for data transfer is **structured cloning**. This means that when data is sent via `postMessage()`, a complete copy of the data is created in the receiving context. The original object in the sending context remains unchanged.\n\nThe potential drawback for large data is **performance overhead**. Copying large amounts of data can be slow and memory-intensive, as it involves serialization in the sending thread and deserialization in the receiving thread, potentially blocking the main thread for a noticeable duration if the data is substantial.",
          "options": [],
          "analysisPoints": [
            "Explains `postMessage` and `onmessage`.",
            "Identifies 'structured cloning' as the default mechanism.",
            "Highlights performance and memory overhead as drawbacks for large data due to copying."
          ],
          "keyConcepts": [
            "Web Workers",
            "postMessage",
            "onmessage",
            "Structured Cloning",
            "Performance",
            "Data Transfer"
          ],
          "evaluationCriteria": [
            "Understanding of worker communication API",
            "Knowledge of underlying data transfer mechanisms",
            "Ability to identify performance bottlenecks"
          ],
          "example": "",
          "tags": [
            "web-workers",
            "performance",
            "data-transfer",
            "javascript"
          ],
          "prerequisites": [
            "web_workers"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_workers_3",
          "topic": "Dedicated vs. Shared Workers",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following statements accurately describes a key difference between a Dedicated Worker and a Shared Worker?",
          "answer": "A Shared Worker can be accessed by multiple browsing contexts (e.g., different tabs or iframes) from the same origin, while a Dedicated Worker communicates with only one.",
          "options": [
            "Dedicated Workers have access to the DOM, while Shared Workers do not.",
            "Shared Workers use `postMessage()` for communication, while Dedicated Workers use `port.postMessage()`.",
            "A Shared Worker can be accessed by multiple browsing contexts (e.g., different tabs or iframes) from the same origin, while a Dedicated Worker communicates with only one.",
            "Dedicated Workers are suitable for long-running tasks, but Shared Workers are not."
          ],
          "analysisPoints": [
            "Correctly identifies the multi-context access of Shared Workers versus single-context of Dedicated Workers.",
            "Debunks the false claim about DOM access (neither has direct DOM access).",
            "Clarifies that both use `postMessage`-like mechanisms, but Shared Workers use it via a `Port` object.",
            "Correctly implies both are suitable for long-running tasks."
          ],
          "keyConcepts": [
            "Dedicated Workers",
            "Shared Workers",
            "Web Workers Comparison",
            "Browsing Contexts",
            "Communication"
          ],
          "evaluationCriteria": [
            "Distinguishing characteristics of different worker types",
            "Understanding of worker scope and access",
            "Accuracy of technical details"
          ],
          "example": "The key distinction between Dedicated and Shared Workers lies in their scope. A Dedicated Worker is bound to the script that created it, communicating exclusively with that single browsing context (e.g., one tab). A Shared Worker, conversely, can establish connections with multiple browsing contexts (such as different tabs, windows, or iframes) that share the same origin. This makes Shared Workers ideal for coordinating tasks or sharing state across multiple parts of a web application.",
          "tags": [
            "web-workers",
            "architecture",
            "concurrency"
          ],
          "prerequisites": [
            "web_workers"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_workers_4",
          "topic": "Web Workers API Access",
          "level": "hard",
          "type": "open",
          "question": "While Web Workers are powerful for offloading computations, they have limitations regarding browser API access. List three significant browser APIs or global objects that Web Workers *do not* have direct access to, and explain why this restriction exists.",
          "answer": "Web Workers operate in a separate global scope and do not have direct access to:\n\n1.  **The DOM (Document Object Model)**: This means they cannot directly manipulate HTML elements (`document`, `window.document`, `getElementById`, `querySelector`, etc.). This restriction exists because DOM manipulation is inherently a main-thread activity, and allowing workers to directly modify the DOM would introduce complex synchronization issues and potential race conditions between the worker and the main thread, leading to a janky or broken UI.\n2.  **The `window` object (and its properties like `alert`, `confirm`, `location`, `history`)**: Workers do not have access to the main `window` object or its direct properties/methods. This is because the `window` object represents the browser's main thread environment and its visual aspects. Allowing workers to control `window` properties would break the isolation model and could lead to unpredictable behavior and security vulnerabilities.\n3.  **Direct access to `localStorage` and `sessionStorage`**: While workers can access `IndexedDB` (which is asynchronous), they cannot directly access `localStorage` or `sessionStorage` (which are synchronous APIs tied to the main thread's `window` object). This restriction ensures that these synchronous storage APIs do not block the main thread, and prevents workers from directly causing UI freezes by performing blocking storage operations.",
          "options": [],
          "analysisPoints": [
            "Identifies DOM, `window`, `localStorage`/`sessionStorage` as restricted APIs.",
            "Explains the rationale for each restriction (e.g., preventing UI blocking, synchronization issues, security, isolation model).",
            "Demonstrates a deeper understanding of the worker's execution environment."
          ],
          "keyConcepts": [
            "Web Workers Limitations",
            "DOM Access",
            "Window Object",
            "LocalStorage",
            "SessionStorage",
            "Thread Isolation"
          ],
          "evaluationCriteria": [
            "Knowledge of worker API restrictions",
            "Ability to explain the underlying reasons for these restrictions",
            "Understanding of browser architecture"
          ],
          "example": "",
          "tags": [
            "web-workers",
            "browser-apis",
            "limitations",
            "architecture"
          ],
          "prerequisites": [
            "web_workers"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_transferable_objects_1",
          "topic": "Transferable Objects Definition",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary benefit of using Transferable Objects when communicating with Web Workers?",
          "answer": "Transferable Objects allow data to be passed between execution contexts (like main thread and worker) with near-zero copying cost, improving performance for large datasets.",
          "options": [],
          "analysisPoints": [
            "Highlights performance gain.",
            "Mentions 'near-zero copying cost' or 'transfer of ownership'."
          ],
          "keyConcepts": [
            "Transferable Objects",
            "Performance",
            "Web Workers",
            "Data Transfer"
          ],
          "evaluationCriteria": [
            "Quick recall of core benefit",
            "Concise explanation"
          ],
          "example": "",
          "tags": [
            "performance",
            "web-workers",
            "memory"
          ],
          "prerequisites": [
            "web_workers"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_transferable_objects_2",
          "topic": "Transferable Object State",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following JavaScript code snippet:\n\n```typescript\nconst myBuffer = new ArrayBuffer(1024);\nconst worker = new Worker('my-worker.js');\n\nworker.postMessage({ buffer: myBuffer }, [myBuffer]);\n\n// What is the state of `myBuffer` immediately after the postMessage call in the main thread?\nconsole.log(myBuffer.byteLength);\n```\n\nWhat will be the output of `console.log(myBuffer.byteLength)` in the main thread after the `postMessage` call?",
          "answer": "0",
          "options": [
            "1024",
            "0",
            "An error will be thrown",
            "undefined"
          ],
          "analysisPoints": [
            "Correctly understands that `ArrayBuffer` is a Transferable Object.",
            "Knows that a transferred `ArrayBuffer` becomes 'neutered' in the sending context.",
            "Connects 'neutered' to its `byteLength` becoming 0."
          ],
          "keyConcepts": [
            "Transferable Objects",
            "ArrayBuffer",
            "Neutered",
            "Ownership Transfer",
            "postMessage"
          ],
          "evaluationCriteria": [
            "Detailed understanding of Transferable Objects' behavior",
            "Ability to predict side effects of API calls"
          ],
          "example": "When an `ArrayBuffer` is transferred via `postMessage` using the second argument (the `transferList`), its ownership is moved to the receiving context (the worker). In the sending context (the main thread), the `ArrayBuffer` becomes 'neutered', meaning its internal data pointer is detached, and its `byteLength` property becomes 0. Any attempt to access or modify the `ArrayBuffer` or any `TypedArray` views on it in the original context will typically result in an error or undefined behavior.",
          "tags": [
            "web-workers",
            "performance",
            "memory",
            "arraybuffer"
          ],
          "prerequisites": [
            "transferable_objects",
            "typed_arrays"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_transferable_objects_3",
          "topic": "Transferable Object Types",
          "level": "medium",
          "type": "open",
          "question": "Besides `ArrayBuffer`, name two other types of objects that are commonly supported as Transferable Objects. For each, briefly describe a use case where transferring it would be beneficial.",
          "answer": "Two other types of objects commonly supported as Transferable Objects are:\n\n1.  **`MessagePort`**: A `MessagePort` represents one end of a communication channel. You can create a `MessageChannel` and then transfer one of its ports to a worker (or another window/iframe). This is beneficial when you need to establish a direct, dedicated communication line between two contexts without necessarily going through the main `Worker` instance's `postMessage` (e.g., setting up a direct communication between two workers, or between a worker and a nested iframe).\n2.  **`ImageBitmap`**: An `ImageBitmap` is an opaque object representing a bitmap image, which can be created from various sources like `<img>` elements, `Blob`s, or `CanvasImageSource`. Transferring `ImageBitmap`s is beneficial when you want to perform image processing or rendering on an `OffscreenCanvas` within a Web Worker. Instead of serializing raw pixel data (which would be slow), the `ImageBitmap` can be transferred efficiently, allowing the worker to directly use it for drawing without blocking the main thread.",
          "options": [],
          "analysisPoints": [
            "Identifies `MessagePort` and `ImageBitmap` (or `OffscreenCanvas`).",
            "Provides a valid use case for each, demonstrating understanding of their purpose.",
            "Highlights the performance benefit of transferring each type."
          ],
          "keyConcepts": [
            "Transferable Objects",
            "MessagePort",
            "ImageBitmap",
            "OffscreenCanvas",
            "Use Cases",
            "Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of various Transferable Object types",
            "Ability to articulate practical use cases and benefits"
          ],
          "example": "",
          "tags": [
            "web-workers",
            "performance",
            "image-processing",
            "communication"
          ],
          "prerequisites": [
            "web_workers",
            "transferable_objects"
          ],
          "complexity": 8,
          "interviewFrequency": 5,
          "learningPath": "advanced"
        },
        {
          "id": "question_transferable_objects_4",
          "topic": "Transferable Objects vs. Structured Cloning",
          "level": "hard",
          "type": "open",
          "question": "Compare the performance implications of transferring a large `ArrayBuffer` using `postMessage(data, [data.buffer])` versus simply sending a regular JavaScript array of numbers `postMessage(data)` that implicitly uses structured cloning. Why is the former significantly more performant for large datasets?",
          "answer": "When sending data via `postMessage`:\n\n1.  **Structured Cloning (`postMessage(data)`)**:\n    *   **Mechanism**: The browser creates a deep copy of the JavaScript array. For large arrays, this involves iterating over every element, allocating new memory, and copying the value to the new location.\n    *   **Performance Implications**: This process can be computationally expensive and time-consuming for large datasets. It consumes significant CPU cycles and memory on both the sending (serialization) and receiving (deserialization) threads. If done on the main thread, it can lead to UI freezes and jank.\n\n2.  **Transferable Objects (`postMessage({ buffer: data.buffer }, [data.buffer])`)**:\n    *   **Mechanism**: The ownership of the underlying raw binary data buffer (`ArrayBuffer`) is *transferred* from the sending context to the receiving context. The actual memory is not copied. Instead, internal pointers are updated.\n    *   **Performance Implications**: This is a near-zero-cost operation. It's extremely fast regardless of the size of the `ArrayBuffer` because no serialization or deserialization of the large data occurs. The primary overhead is just updating references and metadata. The original `ArrayBuffer` in the sending context becomes \"neutered\" (unusable).\n\n**Why the former is significantly more performant for large datasets:**\nThe key difference is the avoidance of data copying. Structured cloning is akin to making a duplicate of a large file, which takes time proportional to the file size. Transferring an `ArrayBuffer` is like simply changing the owner of that file without duplicating it; the file itself doesn't move, and the operation's time is constant, regardless of the file's size. For multi-megabyte or gigabyte datasets, this difference translates into orders of magnitude faster transfer times and avoids blocking the main thread.",
          "options": [],
          "analysisPoints": [
            "Clearly describes structured cloning as a deep copy mechanism.",
            "Clearly describes Transferable Objects as an ownership transfer mechanism.",
            "Highlights the 'no copying' aspect as the core performance differentiator.",
            "Explains the impact on CPU, memory, and main thread blocking for both."
          ],
          "keyConcepts": [
            "Transferable Objects",
            "Structured Cloning",
            "ArrayBuffer",
            "Performance Optimization",
            "Memory Management",
            "Web Workers"
          ],
          "evaluationCriteria": [
            "Deep technical understanding of data transfer mechanisms",
            "Ability to articulate performance trade-offs",
            "Comparison and contrast skills"
          ],
          "example": "",
          "tags": [
            "web-workers",
            "performance",
            "memory",
            "arraybuffer",
            "optimization"
          ],
          "prerequisites": [
            "transferable_objects",
            "web_workers"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_js_perf_opt_1",
          "topic": "JavaScript Performance Optimization Techniques",
          "level": "easy",
          "type": "flashcard",
          "question": "Which JavaScript API is specifically designed to synchronize animations and visual updates with the browser's repaint cycle?",
          "answer": "`requestAnimationFrame`",
          "options": [],
          "analysisPoints": [
            "Identifies the specific API for animations.",
            "Mentions its role in synchronization with repaint."
          ],
          "keyConcepts": [
            "requestAnimationFrame",
            "Animation",
            "Browser Rendering"
          ],
          "evaluationCriteria": [
            "Quick recall",
            "Understanding of API purpose"
          ],
          "example": "",
          "tags": [
            "performance",
            "animation",
            "browser"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_js_perf_opt_2",
          "topic": "Debouncing vs. Throttling",
          "level": "medium",
          "type": "open",
          "question": "Explain the difference between debouncing and throttling. Provide a practical web development scenario where each technique would be more appropriate.",
          "answer": "Both debouncing and throttling are techniques used to control the frequency of function execution, primarily for events that fire rapidly (e.g., `scroll`, `resize`, `input`).\n\n1.  **Debouncing**:\n    *   **Mechanism**: Delays the execution of a function until a certain amount of time has passed *since the last time it was invoked*. If the function is called again within the delay period, the timer is reset.\n    *   **Goal**: Ensure a function is only called *after* a period of inactivity.\n    *   **Scenario**: A search input field with live suggestions. You want to make an API call to fetch suggestions, but only after the user has stopped typing for a short duration (e.g., 300ms). Debouncing prevents an API call on every single keystroke, saving resources and improving responsiveness.\n\n2.  **Throttling**:\n    *   **Mechanism**: Limits how often a function can be called to at most once within a specified time window. If the function is called multiple times within that window, subsequent calls are ignored until the window expires.\n    *   **Goal**: Ensure a function is called *at most* once per interval.\n    *   **Scenario**: Handling a `scroll` event to update an element's position (e.g., parallax scrolling) or load more content. You want to update the UI regularly but not excessively. Throttling to, say, 100ms means the UI updates will occur smoothly without overwhelming the browser or causing jank, even if the user scrolls very fast.",
          "options": [],
          "analysisPoints": [
            "Clearly distinguishes the mechanisms of debouncing (after inactivity) and throttling (at most once per interval).",
            "Provides relevant and distinct practical scenarios for each.",
            "Highlights the specific goals of each technique."
          ],
          "keyConcepts": [
            "Debouncing",
            "Throttling",
            "Event Handling",
            "Performance Optimization",
            "User Experience"
          ],
          "evaluationCriteria": [
            "Precise definitions of both concepts",
            "Ability to apply concepts to real-world problems",
            "Understanding of performance implications"
          ],
          "example": "",
          "tags": [
            "performance",
            "event-handling",
            "javascript",
            "optimization"
          ],
          "prerequisites": [
            "javascript_functions",
            "event_listeners"
          ],
          "complexity": 7,
          "interviewFrequency": 10,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_perf_opt_3",
          "topic": "Offloading Heavy Tasks",
          "level": "medium",
          "type": "mcq",
          "question": "A web application performs a complex mathematical calculation that takes several seconds to complete, causing the UI to become unresponsive. Which optimization technique is *most effective* for preventing the UI from freezing while this calculation runs?",
          "answer": "Offloading the calculation to a Web Worker",
          "options": [
            "Debouncing the calculation function",
            "Throttling the calculation function",
            "Using `requestAnimationFrame` for the calculation",
            "Offloading the calculation to a Web Worker"
          ],
          "analysisPoints": [
            "Identifies the core problem: UI freezing due to long synchronous task.",
            "Recognizes that only Web Workers execute code in a separate thread, truly preventing main thread blocking.",
            "Understands that debouncing/throttling reduce frequency, not solve blocking; `requestAnimationFrame` is for visual updates, not heavy computation."
          ],
          "keyConcepts": [
            "Web Workers",
            "Performance Optimization",
            "UI Responsiveness",
            "Main Thread Blocking"
          ],
          "evaluationCriteria": [
            "Ability to diagnose performance problems",
            "Selection of the most appropriate solution for a given problem",
            "Understanding of the core mechanism of each technique"
          ],
          "example": "When a complex mathematical calculation takes several seconds, it's a CPU-bound task that will block the main thread. To prevent the UI from freezing, the most effective solution is to move this computation off the main thread entirely by running it in a **Web Worker**. Debouncing and throttling only control *when* a function runs, not *where* it runs, and `requestAnimationFrame` is for visual synchronization, not general computation.",
          "tags": [
            "web-workers",
            "performance",
            "optimization",
            "concurrency"
          ],
          "prerequisites": [
            "web_workers",
            "js_performance_optimization"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_js_perf_opt_4",
          "topic": "Task Chunking",
          "level": "hard",
          "type": "open",
          "question": "You have a long, synchronous JavaScript function that processes a large array of data. While it's not feasible to move this task to a Web Worker, you need to prevent it from blocking the UI entirely. Describe how you can use 'task chunking' with `setTimeout(..., 0)` to make the UI more responsive, and explain the underlying principle.",
          "answer": "To prevent a long, synchronous JavaScript function from blocking the UI, you can employ 'task chunking' by breaking the large task into smaller, manageable pieces and processing each piece in a separate turn of the event loop using `setTimeout(..., 0)`.\n\n**Algorithm:**\n1.  **Divide the Task**: Split the large array (or computation) into smaller chunks.\n2.  **Process Chunks Iteratively**: Create a recursive or iterative function that processes one chunk at a time.\n3.  **Yield Control**: After processing each chunk, instead of immediately processing the next one, schedule the processing of the next chunk using `setTimeout(myFunctionForNextChunk, 0)`.\n\n**Underlying Principle (Event Loop):**\nJavaScript runs on a single thread with an **event loop**. When `setTimeout(..., 0)` is called, it doesn't execute the callback immediately. Instead, it places the callback function at the end of the current task queue (or macrotask queue). This allows the browser to:\n-   Complete the current task (the processing of the *current* chunk).\n-   Check the event queue for other pending tasks, including rendering updates, user input events, and network responses.\n-   Execute any microtasks (like Promise callbacks) that were scheduled.\n-   Then, pick up the `setTimeout` callback from the task queue.\n\nBy yielding control back to the event loop with `setTimeout(0)`, you effectively give the browser opportunities to process other events, paint updates, and respond to user interactions between each chunk of your long-running task. This creates an illusion of responsiveness, even though the overall task might take the same amount of time or slightly longer due to the overhead of `setTimeout` scheduling.",
          "options": [],
          "analysisPoints": [
            "Defines task chunking as breaking down and processing in parts.",
            "Explains the role of `setTimeout(0)` in yielding control.",
            "Details how `setTimeout(0)` interacts with the event loop.",
            "Articulates how this prevents UI blocking (allows browser to render/handle input)."
          ],
          "keyConcepts": [
            "Task Chunking",
            "Event Loop",
            "setTimeout(0)",
            "UI Responsiveness",
            "JavaScript Performance",
            "Macrotasks"
          ],
          "evaluationCriteria": [
            "In-depth understanding of JavaScript event loop",
            "Ability to describe complex optimization patterns",
            "Clarity in explaining the 'why' and 'how'"
          ],
          "example": "```typescript\nfunction processLargeArrayInChunks(dataArray, chunkSize = 100) {\n  let index = 0;\n\n  function processNextChunk() {\n    const end = Math.min(index + chunkSize, dataArray.length);\n    for (let i = index; i < end; i++) {\n      // Simulate heavy computation\n      console.log(`Processing item ${i}: ${dataArray[i]}`);\n      // For example, dataArray[i] = dataArray[i] * 2;\n    }\n    index = end;\n\n    if (index < dataArray.length) {\n      // Schedule next chunk processing in the next event loop tick\n      setTimeout(processNextChunk, 0);\n    } else {\n      console.log('Finished processing all chunks.');\n    }\n  }\n\n  // Start processing the first chunk\n  processNextChunk();\n}\n\nconst largeData = Array.from({ length: 5000 }, (_, i) => i + 1);\nconsole.log('Starting long operation...');\nprocessLargeArrayInChunks(largeData);\nconsole.log('UI remains responsive while processing... (e.g., you can still click buttons)');\n```",
          "tags": [
            "performance",
            "javascript",
            "event-loop",
            "optimization"
          ],
          "prerequisites": [
            "js_performance_optimization",
            "javascript_async"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_resize_observer_1",
          "topic": "ResizeObserver Timing",
          "level": "medium",
          "type": "flashcard",
          "question": "Regarding the browser's rendering pipeline, when does `ResizeObserver` typically deliver its notifications?",
          "answer": "`ResizeObserver` delivers notifications after layout but before paint.",
          "options": [],
          "analysisPoints": [
            "Accurate recall of the specific timing relative to rendering phases.",
            "Indicates understanding of the rendering pipeline."
          ],
          "keyConcepts": [
            "ResizeObserver",
            "Rendering Pipeline",
            "Layout",
            "Paint"
          ],
          "evaluationCriteria": [
            "Precise factual recall",
            "Knowledge of browser internals"
          ],
          "example": "",
          "tags": [
            "browser-apis",
            "performance",
            "rendering"
          ],
          "prerequisites": [
            "resize_observer"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_resize_observer_2",
          "topic": "ResizeObserver Benefits of Timing",
          "level": "hard",
          "type": "open",
          "question": "Why is the specific timing of `ResizeObserver` notifications (after layout but before paint) beneficial for performance and preventing visual jank?",
          "answer": "The timing of `ResizeObserver` notifications (after layout but before paint) is crucial for performance and preventing visual jank for the following reasons:\n\n1.  **Prevents Layout Thrashing/Multiple Reflows**: When a `ResizeObserver`'s callback is triggered after layout, the browser has already calculated all the dimensions and positions of elements. If the callback then makes changes to the DOM or styles that affect layout, the browser can perform *another* layout pass immediately. Since both the initial layout change and any subsequent layout changes from the observer's callback occur within the same animation frame, the browser only needs to perform one repaint at the end of the frame. This prevents costly 'layout thrashing' (repeated, synchronous forced layout calculations) which occurs when JavaScript reads layout information then immediately writes new layout information, forcing recalculations mid-frame.\n2.  **Synchronized Visual Updates**: By allowing changes *before* paint, the observer can adjust the element's appearance (e.g., font size, aspect ratio, internal component arrangement) or other related elements' layouts based on the new dimensions. These adjustments will then be incorporated into the *single* upcoming paint operation for that frame. If the changes were made *after* paint, it would necessitate a separate, additional repaint cycle, leading to visible flickering or 'jank'.\n3.  **Efficiency for Responsive Components**: This timing makes `ResizeObserver` highly efficient for building responsive UI components that self-adjust. They can react to their own size changes, or the size changes of parent elements, and perform necessary layout adjustments in a single, optimized browser cycle, ensuring smooth and seamless user experience.",
          "options": [],
          "analysisPoints": [
            "Explains how it prevents layout thrashing/multiple reflows.",
            "Details how changes made in the callback are incorporated into a single paint.",
            "Contrasts with what would happen if timing were different (jank, extra repaints).",
            "Connects to efficient responsive component design."
          ],
          "keyConcepts": [
            "ResizeObserver",
            "Rendering Pipeline",
            "Layout Thrashing",
            "Reflow",
            "Repaint",
            "Performance Optimization",
            "Visual Jank"
          ],
          "evaluationCriteria": [
            "Deep understanding of browser rendering mechanisms",
            "Ability to explain the performance implications of API design choices",
            "Detailed articulation of benefits"
          ],
          "example": "",
          "tags": [
            "performance",
            "browser-apis",
            "rendering",
            "responsive-design"
          ],
          "prerequisites": [
            "resize_observer",
            "js_performance_optimization"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_resize_observer_3",
          "topic": "ResizeObserver vs. Window Resize",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following scenarios is `ResizeObserver` primarily designed to handle more efficiently than traditional `window.onresize` event listeners?",
          "answer": "Dynamically adjusting a custom component's internal layout when its parent container changes size.",
          "options": [
            "Detecting when the browser tab is closed.",
            "Responding to changes in the overall browser window dimensions.",
            "Monitoring network connection status changes.",
            "Dynamically adjusting a custom component's internal layout when its parent container changes size."
          ],
          "analysisPoints": [
            "Identifies `ResizeObserver`'s unique capability to observe specific element sizes, not just the window.",
            "Recognizes that `window.onresize` is for global window size changes, not individual element changes.",
            "Excludes irrelevant options like tab closing or network status."
          ],
          "keyConcepts": [
            "ResizeObserver",
            "Window.onresize",
            "Responsive Components",
            "Element Sizing"
          ],
          "evaluationCriteria": [
            "Understanding of API's specific use case",
            "Comparison of related APIs",
            "Ability to identify appropriate tools for a task"
          ],
          "example": "`window.onresize` only triggers when the entire browser window is resized. However, a component's size might change for many other reasons, such as its parent container shrinking, content within it changing, or CSS layout properties being altered. `ResizeObserver` is specifically designed to efficiently observe and react to these *element-level* size changes, making it far superior for building truly responsive and adaptable UI components, such as a component that adjusts its font size or image layout based on its own dynamically computed width or height.",
          "tags": [
            "browser-apis",
            "responsive-design",
            "ui-components"
          ],
          "prerequisites": [
            "resize_observer"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_drag_drop_file_1",
          "topic": "Drag and Drop Basics",
          "level": "easy",
          "type": "flashcard",
          "question": "What two core DOM events must you `preventDefault()` for when implementing custom drag-and-drop file functionality?",
          "answer": "`dragover` and `drop`",
          "options": [],
          "analysisPoints": [
            "Recalls the specific events required for custom drag-and-drop handling.",
            "Emphasizes the necessity of `preventDefault()` for these events."
          ],
          "keyConcepts": [
            "Drag and Drop",
            "DOM Events",
            "preventDefault"
          ],
          "evaluationCriteria": [
            "Factual recall",
            "Understanding of event handling basics"
          ],
          "example": "",
          "tags": [
            "dom-events",
            "drag-and-drop",
            "javascript"
          ],
          "prerequisites": [
            "dom_manipulation"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_drag_drop_file_2",
          "topic": "FileReader API",
          "level": "medium",
          "type": "mcq",
          "question": "After a user drags and drops a text file onto your web page, you access the `File` object. Which `FileReader` method would you use to read the file's content as a plain text string?",
          "answer": "`readAsText(file)`",
          "options": [
            "`readFile(file)`",
            "`readAsDataURL(file)`",
            "`readAsText(file)`",
            "`readAsBlob(file)`"
          ],
          "analysisPoints": [
            "Correctly identifies `readAsText` as the method for plain text.",
            "Differentiates it from other `FileReader` methods like `readAsDataURL`.",
            "Knows the correct method signature (takes `file` object)."
          ],
          "keyConcepts": [
            "FileReader API",
            "File Object",
            "readAsText",
            "Drag and Drop"
          ],
          "evaluationCriteria": [
            "Knowledge of FileReader API methods",
            "Ability to select appropriate method for specific data type"
          ],
          "example": "The `FileReader.readAsText()` method is specifically designed to read the contents of a `File` or `Blob` object as a text string. `readAsDataURL()` would return a Base64 encoded string, `readAsArrayBuffer()` would return an `ArrayBuffer`, and `readFile()` is not a standard `FileReader` method. Therefore, `readAsText(file)` is the correct choice for obtaining plain text content.",
          "tags": [
            "file-api",
            "javascript",
            "browser-apis"
          ],
          "prerequisites": [
            "drag_drop_file_reading"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_drag_drop_file_3",
          "topic": "Drag and Drop File Access",
          "level": "medium",
          "type": "open",
          "question": "When handling the `drop` event for a drag-and-drop file upload, how do you access the dropped files in JavaScript? What type of object is returned, and what properties might you check on it?",
          "answer": "When handling the `drop` event, you can access the dropped files via `event.dataTransfer.files`.\n\nThis property returns a **`FileList`** object. A `FileList` is an array-like object (but not a true array) containing `File` objects.\n\nEach `File` object in the `FileList` represents a dropped file and has several useful properties that you might check:\n-   **`name`**: The name of the file (e.g., `document.txt`). Useful for displaying the filename or checking the file extension.\n-   **`type`**: The MIME type of the file (e.g., `text/plain`, `image/png`, `application/pdf`). Crucial for validating the type of file dropped.\n-   **`size`**: The size of the file in bytes. Useful for displaying file size or enforcing size limits.\n-   **`lastModified`**: The last modified date of the file as a Unix timestamp.\n-   **`lastModifiedDate`**: The last modified date of the file as a `Date` object (deprecated).",
          "options": [],
          "analysisPoints": [
            "Correctly identifies `event.dataTransfer.files`.",
            "States that a `FileList` object is returned.",
            "Lists and explains relevant properties of the `File` object (`name`, `type`, `size`)."
          ],
          "keyConcepts": [
            "Drag and Drop",
            "Drop Event",
            "FileList",
            "File Object",
            "dataTransfer"
          ],
          "evaluationCriteria": [
            "Knowledge of event object properties",
            "Understanding of File API objects",
            "Ability to describe practical usage"
          ],
          "example": "",
          "tags": [
            "dom-events",
            "file-api",
            "javascript"
          ],
          "prerequisites": [
            "drag_drop_file_reading"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_drag_drop_file_4",
          "topic": "Drag and Drop Error Handling",
          "level": "hard",
          "type": "coding",
          "question": "You are implementing a drag-and-drop functionality for image files only. Provide the JavaScript code snippet for the `drop` event handler that:\n1.  Prevents the browser's default behavior.\n2.  Retrieves the first dropped file.\n3.  Checks if the file's MIME type starts with 'image/' (e.g., 'image/png', 'image/jpeg').\n4.  If it's an image, logs 'Image file dropped: [filename]'.\n5.  If it's not an image, logs 'Error: Please drop an image file.'.",
          "answer": "```typescript\ndropZone.addEventListener('drop', (e) => {\n  e.preventDefault(); // 1. Prevent default browser behavior\n\n  const files = e.dataTransfer.files;\n\n  if (files.length > 0) {\n    const file = files[0]; // 2. Retrieve the first dropped file\n\n    // 3. Check if the file's MIME type starts with 'image/'\n    if (file.type.startsWith('image/')) {\n      // 4. If it's an image, log filename\n      console.log(`Image file dropped: ${file.name}`);\n      // In a real app, you would then read and display the image\n    } else {\n      // 5. If it's not an image, log an error\n      console.log('Error: Please drop an image file.');\n    }\n  } else {\n    console.log('No files were dropped.');\n  }\n});\n```",
          "options": [],
          "analysisPoints": [
            "Correct use of `e.preventDefault()`.",
            "Accesses `e.dataTransfer.files` correctly.",
            "Properly selects the first file.",
            "Uses `file.type.startsWith('image/')` for robust MIME type validation.",
            "Provides distinct console outputs for success and error cases."
          ],
          "keyConcepts": [
            "Drag and Drop",
            "Drop Event",
            "File API",
            "MIME Type Validation",
            "Error Handling"
          ],
          "evaluationCriteria": [
            "Correct API usage for drag and drop",
            "Robust input validation",
            "Clear conditional logic",
            "Adherence to problem requirements"
          ],
          "example": "",
          "tags": [
            "coding-challenge",
            "dom-events",
            "file-api",
            "validation"
          ],
          "prerequisites": [
            "drag_drop_file_reading"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_shadow_dom_1",
          "topic": "Shadow DOM Identification",
          "level": "easy",
          "type": "flashcard",
          "question": "What does `#shadow-root` in the browser's developer tools inspector indicate?",
          "answer": "It indicates the root of a Shadow DOM, which is an isolated DOM tree attached to an element, encapsulating its structure and styles.",
          "options": [],
          "analysisPoints": [
            "Identifies `shadow-root` with Shadow DOM.",
            "Mentions encapsulation and isolated tree."
          ],
          "keyConcepts": [
            "Shadow DOM",
            "Developer Tools",
            "Encapsulation"
          ],
          "evaluationCriteria": [
            "Quick recall",
            "Understanding of visual cue"
          ],
          "example": "",
          "tags": [
            "shadow-dom",
            "web-components",
            "dev-tools"
          ],
          "prerequisites": [
            "shadow_dom"
          ],
          "complexity": 4,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_shadow_dom_2",
          "topic": "Shadow DOM Encapsulation",
          "level": "medium",
          "type": "open",
          "question": "Explain how Shadow DOM provides encapsulation for both DOM structure and CSS styles within a web component. Why is this beneficial for component development?",
          "answer": "Shadow DOM provides encapsulation in two primary ways:\n\n1.  **DOM Structure Encapsulation**: The internal DOM structure of a component placed within a Shadow DOM is isolated from the main document's DOM. This means that selectors used in the main document's JavaScript (e.g., `document.querySelector`, `getElementById`) or CSS (e.g., `div p`) cannot pierce into the shadow tree to accidentally select or modify elements within the component. Conversely, elements inside the shadow tree cannot accidentally select or modify elements in the light DOM outside of the component.\n\n2.  **CSS Style Encapsulation**: Styles defined within the Shadow DOM are scoped only to that shadow tree. They do not leak out to affect elements in the main document. Similarly, with few exceptions (like inherited CSS properties such as `font-family` or `color`), styles from the main document generally do not leak into the shadow tree. This is achieved because the browser re-scopes CSS selectors to only apply within the shadow boundary.\n\n**Benefits for component development:**\n-   **Modularity and Reusability**: Developers can create self-contained components without worrying about naming conflicts (e.g., duplicate `id`s or class names) or style collisions with other components or the host page. This makes components truly plug-and-play and highly reusable across different projects.\n-   **Predictability**: The component's internal behavior and appearance remain consistent regardless of where it's used, as its environment is strictly controlled.\n-   **Maintainability**: Reduces the complexity of CSS specificity management and makes debugging easier, as styles are localized to where they are defined.",
          "options": [],
          "analysisPoints": [
            "Details DOM isolation (selectors don't pierce).",
            "Details CSS isolation (styles don't leak in or out, mostly).",
            "Explains benefits like modularity, reusability, predictability, and maintainability.",
            "Demonstrates understanding of core Shadow DOM purpose."
          ],
          "keyConcepts": [
            "Shadow DOM",
            "Encapsulation",
            "DOM Isolation",
            "CSS Scoping",
            "Web Components",
            "Modularity"
          ],
          "evaluationCriteria": [
            "Comprehensive explanation of encapsulation mechanisms",
            "Articulation of benefits for component architecture",
            "Understanding of technical implementation (e.g., selector scoping)"
          ],
          "example": "",
          "tags": [
            "shadow-dom",
            "web-components",
            "css",
            "dom",
            "architecture"
          ],
          "prerequisites": [
            "shadow_dom"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_shadow_dom_3",
          "topic": "Shadow DOM Modes",
          "level": "medium",
          "type": "mcq",
          "question": "You're attaching a Shadow DOM to a custom element with `this.attachShadow({ mode: 'closed' })`. Which of the following statements is true regarding this configuration?",
          "answer": "The shadow root and its contents cannot be accessed directly from JavaScript in the main document.",
          "options": [
            "Styles from the main document will fully override styles within the shadow root.",
            "The shadow root and its contents cannot be accessed directly from JavaScript in the main document.",
            "The custom element can only be styled using external stylesheets linked from the main document.",
            "Events dispatched from within the shadow DOM will not bubble out to the light DOM."
          ],
          "analysisPoints": [
            "Correctly identifies the effect of `mode: 'closed'` (inaccessibility from main document JS).",
            "Understands that Shadow DOM style encapsulation generally prevents main document styles from overriding unless explicitly inherited.",
            "Knows that events generally *do* retarget and bubble out (unless specifically stopped), even from closed shadow roots.",
            "Differentiates from other aspects of Shadow DOM."
          ],
          "keyConcepts": [
            "Shadow DOM",
            "Closed Mode",
            "Open Mode",
            "Encapsulation",
            "JavaScript Access",
            "Event Bubbling"
          ],
          "evaluationCriteria": [
            "Knowledge of Shadow DOM modes and their implications",
            "Understanding of encapsulation boundaries",
            "Accuracy regarding event behavior"
          ],
          "example": "When a Shadow DOM is attached with `mode: 'closed'`, it means that the shadow root (and thus its internal DOM structure and styles) cannot be directly accessed or manipulated by JavaScript from the main document using `element.shadowRoot` or similar methods. This provides a stronger level of encapsulation, commonly used by built-in browser elements. Styles from the main document do not easily override shadow DOM styles, and events generally *do* retarget and bubble out (e.g., a click on a button inside a shadow DOM will still be detectable on a parent element in the light DOM, though the `event.target` will be the shadow host).",
          "tags": [
            "shadow-dom",
            "web-components",
            "javascript",
            "security"
          ],
          "prerequisites": [
            "shadow_dom"
          ],
          "complexity": 7,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_shadow_dom_4",
          "topic": "Shadow DOM Use Cases",
          "level": "hard",
          "type": "open",
          "question": "Provide two distinct examples of when using Shadow DOM would be highly beneficial, one involving a native HTML element and one involving a custom component you might build. Explain why it's beneficial in each case.",
          "answer": "1.  **Native HTML Element Example: `<video>` element**\n    *   **Description**: When you embed a `<video>` tag with the `controls` attribute, the browser renders a complex set of UI controls (play/pause button, timeline, volume slider, fullscreen button, etc.) for it. If you inspect a `<video>` element in dev tools, you'll see a `#shadow-root` containing all these internal elements.\n    *   **Benefit**: Shadow DOM isolates the internal structure and default styling of these video controls from the rest of your webpage. This means your global CSS rules won't accidentally break the video player's appearance, and the browser ensures consistent functionality across all websites without developers needing to re-implement or re-style complex native controls. It also prevents the numerous internal elements (buttons, sliders, divs) from polluting the main document's DOM and potentially clashing with global JavaScript queries.\n\n2.  **Custom Component Example: A `<custom-date-picker>` component**\n    *   **Description**: Imagine building a `<custom-date-picker>` element for a design system. This component would likely contain multiple internal elements (input fields, buttons for navigation, a grid for days, etc.) and specific styling to make it visually consistent across an application.\n    *   **Benefit**: By attaching a Shadow DOM to `<custom-date-picker>`, all its internal HTML and CSS are encapsulated. This prevents:\n        *   **Style Conflicts**: Your application's global CSS (e.g., `input { border: none; }`) from unintentionally styling the date picker's internal inputs.\n        *   **DOM Pollution**: The internal structure (e.g., `<div>`s, `<span>`s, `<button>`s) from appearing in the main document's DOM, which could lead to accidental selection by global JavaScript queries or rendering performance issues in extremely large applications. It guarantees that the component renders and behaves consistently regardless of the page it's embedded in.",
          "options": [],
          "analysisPoints": [
            "Provides a native HTML element example (`<video>`, `<input type='range'>`).",
            "Provides a plausible custom component example (`date-picker`, `modal`, `alert`).",
            "Articulates specific benefits (e.g., style isolation, DOM pollution prevention, consistency, reusability) for each example.",
            "Demonstrates real-world understanding of Shadow DOM's application."
          ],
          "keyConcepts": [
            "Shadow DOM",
            "Native Elements",
            "Custom Components",
            "Encapsulation",
            "Modularity",
            "Reusability"
          ],
          "evaluationCriteria": [
            "Practical application knowledge of Shadow DOM",
            "Ability to articulate specific advantages in real-world scenarios",
            "Clarity and conciseness of explanations"
          ],
          "example": "",
          "tags": [
            "shadow-dom",
            "web-components",
            "design-systems",
            "architecture",
            "use-cases"
          ],
          "prerequisites": [
            "shadow_dom"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_custom_elements_1",
          "topic": "Custom Elements Definition",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the name of the base class that a Custom Element's JavaScript class must extend?",
          "answer": "`HTMLElement`",
          "options": [],
          "analysisPoints": [
            "Recalls the correct base class.",
            "Connects it to the Custom Elements API."
          ],
          "keyConcepts": [
            "Custom Elements",
            "HTMLElement",
            "Web Components"
          ],
          "evaluationCriteria": [
            "Factual recall",
            "Knowledge of basic API structure"
          ],
          "example": "",
          "tags": [
            "web-components",
            "javascript",
            "html"
          ],
          "prerequisites": [
            "custom_elements"
          ],
          "complexity": 4,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_custom_elements_2",
          "topic": "Custom Elements Benefits",
          "level": "medium",
          "type": "open",
          "question": "Beyond simply defining new HTML tags, what are two significant benefits of using Custom Elements in modern web development?",
          "answer": "Two significant benefits of using Custom Elements are:\n\n1.  **Reusability and Modularity**: Custom Elements allow developers to create truly self-contained, reusable UI components. Once defined, a custom element can be used anywhere in your HTML (`<my-button>`, `<user-avatar>`) just like native HTML tags. This promotes a modular architecture, making code easier to manage, share, and maintain across different parts of an application or even across multiple projects.\n2.  **Interoperability and Future-Proofing**: As a native web platform standard, Custom Elements are framework-agnostic. This means they can be used seamlessly with any JavaScript framework (React, Vue, Angular, Svelte) or even in projects with no framework at all. This provides a high degree of interoperability and makes your components more resilient to changes in the JavaScript framework ecosystem, ensuring they have a longer lifespan.",
          "options": [],
          "analysisPoints": [
            "Identifies reusability/modularity.",
            "Identifies interoperability/framework-agnostic nature.",
            "Explains how each benefit contributes to development (e.g., easier maintenance, longer lifespan)."
          ],
          "keyConcepts": [
            "Custom Elements",
            "Reusability",
            "Modularity",
            "Interoperability",
            "Framework-Agnostic",
            "Web Components"
          ],
          "evaluationCriteria": [
            "Understanding of architectural benefits",
            "Ability to articulate advantages beyond basic definition",
            "Insight into long-term development considerations"
          ],
          "example": "",
          "tags": [
            "web-components",
            "architecture",
            "modularity",
            "frontend-basics"
          ],
          "prerequisites": [
            "custom_elements"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_custom_elements_3",
          "topic": "Custom Elements Registration",
          "level": "medium",
          "type": "mcq",
          "question": "Which global object and method are used to register a new Custom Element with the browser?",
          "answer": "`customElements.define()`",
          "options": [
            "`document.registerElement()`",
            "`window.createCustomElement()`",
            "`customElements.define()`",
            "`HTMLElement.register()`"
          ],
          "analysisPoints": [
            "Correctly identifies `customElements` as the global registry.",
            "Identifies `define()` as the method for registration.",
            "Distinguishes from deprecated or non-existent methods."
          ],
          "keyConcepts": [
            "Custom Elements",
            "customElements",
            "define",
            "Web Components API"
          ],
          "evaluationCriteria": [
            "Knowledge of specific API calls for Custom Elements",
            "Accuracy of method names and objects"
          ],
          "example": "To register a new Custom Element, you use the static method `define()` on the `customElements` global object (which is an instance of `CustomElementRegistry`). The `define()` method takes two required arguments: the tag name for your custom element (which must contain a hyphen) and the JavaScript class that defines its behavior. For example: `customElements.define('my-component', MyComponentClass);`.",
          "tags": [
            "web-components",
            "javascript",
            "api-usage"
          ],
          "prerequisites": [
            "custom_elements"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_custom_elements_4",
          "topic": "Custom Elements Lifecycle",
          "level": "hard",
          "type": "open",
          "question": "Describe the purpose of the `connectedCallback()` and `attributeChangedCallback()` lifecycle methods in a Custom Element. What additional static method is required for `attributeChangedCallback()` to function correctly, and why?",
          "answer": "1.  **`connectedCallback()`**:\n    *   **Purpose**: This method is invoked by the browser each time the custom element is added to the document's DOM (or connected to it, which includes initial parsing, appending to a parent, or moving from one parent to another). It's a good place to perform initial setup that relies on the element being in the document, such as:\n        *   Attaching event listeners.\n        *   Fetching data.\n        *   Performing initial rendering if it depends on light DOM children.\n\n2.  **`attributeChangedCallback(name, oldValue, newValue)`**:\n    *   **Purpose**: This method is invoked when one of the custom element's observed attributes is added, removed, or changed. It receives the attribute's `name`, its `oldValue`, and its `newValue`.\n    *   **Use Case**: It allows the custom element to react dynamically to changes in its attributes, updating its internal state or re-rendering its UI accordingly (e.g., changing a `src` attribute on an `<img>` within the component).\n\n**Additional static method for `attributeChangedCallback()`:**\nFor `attributeChangedCallback()` to function, you *must* define a `static get observedAttributes()` method in your custom element class.\n\n**Why it's required:**\nThis static getter must return an array of strings, where each string is the name of an attribute that the custom element should observe for changes. The browser will *only* call `attributeChangedCallback()` for attributes listed in this array. This mechanism improves performance by allowing the browser to avoid unnecessary observation and callback invocations for attributes that your component doesn't care about, making the attribute change detection explicit and efficient.",
          "options": [],
          "analysisPoints": [
            "Clearly explains `connectedCallback`'s purpose and typical uses.",
            "Clearly explains `attributeChangedCallback`'s purpose and parameters.",
            "Identifies `static get observedAttributes()` as the required method.",
            "Explains *why* `observedAttributes` is needed (performance, explicit observation)."
          ],
          "keyConcepts": [
            "Custom Elements",
            "Lifecycle Callbacks",
            "connectedCallback",
            "attributeChangedCallback",
            "observedAttributes",
            "DOM Events",
            "Performance"
          ],
          "evaluationCriteria": [
            "In-depth knowledge of Custom Elements lifecycle",
            "Understanding of method parameters and return values",
            "Ability to explain the rationale behind API design"
          ],
          "example": "```typescript\nclass MyComponentWithLifecycle extends HTMLElement {\n  static get observedAttributes() {\n    return ['color', 'size']; // Only 'color' and 'size' changes will trigger attributeChangedCallback\n  }\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' });\n    this.shadowRoot.innerHTML = `<p style=\"font-size: 16px; color: black;\">Hello</p>`;\n  }\n\n  connectedCallback() {\n    console.log('MyComponentWithLifecycle added to the DOM.');\n    // Initial setup, e.g., applying initial attribute values\n    this._updateStyle();\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    console.log(`Attribute ${name} changed from ${oldValue} to ${newValue}.`);\n    if (oldValue !== newValue) {\n      this._updateStyle();\n    }\n  }\n\n  _updateStyle() {\n    const p = this.shadowRoot.querySelector('p');\n    p.style.color = this.getAttribute('color') || 'black';\n    p.style.fontSize = (this.getAttribute('size') || '16') + 'px';\n  }\n}\ncustomElements.define('my-component-with-lifecycle', MyComponentWithLifecycle);\n\n// Example Usage:\n// <my-component-with-lifecycle color=\"red\"></my-component-with-lifecycle>\n// const el = document.querySelector('my-component-with-lifecycle');\n// el.setAttribute('size', '24'); // This will trigger attributeChangedCallback\n// el.setAttribute('data-test', 'abc'); // This will NOT trigger attributeChangedCallback\n```",
          "tags": [
            "web-components",
            "javascript",
            "lifecycle",
            "api-design",
            "performance"
          ],
          "prerequisites": [
            "custom_elements"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_cors_simulation",
          "title": "Client-Side CORS Error Handling Simulation",
          "description": "\nImplement a client-side JavaScript application that simulates a cross-origin `fetch` request and handles a potential CORS error gracefully. Since you cannot set up a server for this task, simulate the CORS error condition by checking the `response.ok` property and the `response.status` code, and provide a user-friendly message when a CORS-like error occurs.\n\n**Requirements:**\n1.  Create an HTML page with a button and a `div` to display messages.\n2.  When the button is clicked, initiate a `fetch` request to a mock API endpoint (e.g., `https://jsonplaceholder.typicode.com/posts/1`).\n3.  In the `fetch` `.then()` block, check the `response.ok` property and `response.status`. While `jsonplaceholder` doesn't *typically* cause CORS issues for `GET` requests, for the purpose of this simulation, if `response.ok` is `false` or `response.status` is, for example, `403` (Forbidden) which might imply a CORS-like access issue, display a 'CORS error' message.\n4.  If the fetch is successful (e.g., `response.ok` is true and status is 200), parse the JSON and display some data.\n5.  Use a `catch` block to handle actual network errors (e.g., no internet connection).\n6.  Display all messages in the designated `div` element.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>CORS Simulation</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        #message-display { border: 1px solid #ccc; padding: 10px; min-height: 50px; margin-top: 10px; background-color: #f9f9f9; }\n        .error { color: red; font-weight: bold; }\n        .success { color: green; }\n    </style>\n</head>\n<body>\n    <h1>Fetch CORS Simulation</h1>\n    <button id=\"fetch-button\">Fetch Data</button>\n    <div id=\"message-display\"></div>\n\n    <script>\n        const fetchButton = document.getElementById('fetch-button');\n        const messageDisplay = document.getElementById('message-display');\n\n        fetchButton.addEventListener('click', async () => {\n            messageDisplay.textContent = 'Fetching data...';\n            messageDisplay.className = '';\n            const apiUrl = 'https://jsonplaceholder.typicode.com/posts/1'; // A typical API endpoint\n            // For simulating a CORS error, you might imagine fetching from 'http://example.invalid-cors.com/data'\n            // but since that's not possible in a static task, we'll use status checks.\n\n            try {\n                const response = await fetch(apiUrl);\n                \n                if (!response.ok) {\n                    // Simulate a CORS-like error for demonstration purposes if status is not 2xx\n                    if (response.status === 403 || response.status === 0) { // status 0 for network/CORS issues\n                        messageDisplay.textContent = `Error: Access to resource blocked (CORS-like issue, Status: ${response.status}). Check server configuration.`;\n                        messageDisplay.className = 'error';\n                    } else {\n                        messageDisplay.textContent = `HTTP Error: ${response.status} ${response.statusText}`;\n                        messageDisplay.className = 'error';\n                    }\n                } else {\n                    const data = await response.json();\n                    messageDisplay.textContent = `Success! Data fetched: ${JSON.stringify(data.title)}`;\n                    messageDisplay.className = 'success';\n                }\n            } catch (error) {\n                // This catch block handles network errors (e.g., offline, DNS issues)\n                messageDisplay.textContent = `Network Error: ${error.message}. Please check your internet connection.`;\n                messageDisplay.className = 'error';\n            }\n        });\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>CORS Simulation</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        #message-display { border: 1px solid #ccc; padding: 10px; min-height: 50px; margin-top: 10px; background-color: #f9f9f9; }\n        .error { color: red; font-weight: bold; }\n        .success { color: green; }\n    </style>\n</head>\n<body>\n    <h1>Fetch CORS Simulation</h1>\n    <button id=\"fetch-button\">Fetch Data</button>\n    <div id=\"message-display\"></div>\n\n    <script>\n        const fetchButton = document.getElementById('fetch-button');\n        const messageDisplay = document.getElementById('message-display');\n\n        fetchButton.addEventListener('click', async () => {\n            messageDisplay.textContent = 'Fetching data...';\n            messageDisplay.className = '';\n            \n            // For a real CORS error, you'd try to fetch from a different origin \n            // that doesn't send Access-Control-Allow-Origin headers.\n            // For this task, we'll simulate based on status codes.\n            const mockApiUrl = 'https://jsonplaceholder.typicode.com/posts/1'; // This typically works (200 OK)\n            // To simulate a 'CORS-like' error, you could try fetching from a non-existent domain or a domain \n            // that you know will return specific HTTP errors, or modify the URL to a bad endpoint.\n            // For a robust test, we'll try to trigger a 404/500 and classify it.\n            const errorApiUrl = 'https://jsonplaceholder.typicode.com/nonexistent-path'; // This will return 404\n\n            try {\n                // Choose which URL to test by commenting/uncommenting\n                const response = await fetch(mockApiUrl); // Test success case\n                // const response = await fetch(errorApiUrl); // Test error case\n                \n                if (!response.ok) {\n                    // A browser blocking a CORS request due to missing headers will often\n                    // result in a network error (caught by .catch) or a status of 0.\n                    // Since we're using a public API that usually has CORS, we simulate\n                    // general access issues with common HTTP error codes.\n                    if (response.status >= 400 && response.status < 500) {\n                        messageDisplay.textContent = `Client Error: ${response.status} ${response.statusText}. Check request parameters or access permissions.`;\n                        messageDisplay.className = 'error';\n                    } else if (response.status >= 500) {\n                        messageDisplay.textContent = `Server Error: ${response.status} ${response.statusText}. Please try again later.`;\n                        messageDisplay.className = 'error';\n                    } else {\n                         // Catch-all for other non-ok responses, including actual CORS errors\n                         // which often appear as network errors (status 0) caught by the catch block\n                         messageDisplay.textContent = `Fetch failed with status: ${response.status} ${response.statusText}. Potential cross-origin access issue.`;\n                         messageDisplay.className = 'error';\n                    }\n                } else {\n                    const data = await response.json();\n                    messageDisplay.textContent = `Success! Data fetched: ${JSON.stringify(data.title)}`;\n                    messageDisplay.className = 'success';\n                }\n            } catch (error) {\n                // This catch block handles actual network errors (e.g., DNS, no internet, CORS preflight failures)\n                // For actual CORS issues where the browser blocks the request entirely,\n                // the fetch promise will reject with a TypeError (status 0).\n                if (error instanceof TypeError && error.message.includes('Failed to fetch')) {\n                    messageDisplay.textContent = `Network or CORS Error: Could not reach the server or access was denied. ${error.message}`;\n                } else {\n                    messageDisplay.textContent = `An unexpected error occurred: ${error.message}`;\n                }\n                messageDisplay.className = 'error';\n            }\n        });\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Click the button: Should display 'Fetching data...' then 'Success!' with fetched data.",
            "Modify `mockApiUrl` to 'https://jsonplaceholder.typicode.com/nonexistent-path' and click: Should display a client error (e.g., 404).",
            "Disable network connection and click: Should display a 'Network or CORS Error' message (TypeError: Failed to fetch).",
            "Ensure CSS classes are applied correctly for success and error messages."
          ],
          "hints": [
            "Remember that a `fetch` request's promise only rejects for network errors, not for HTTP error statuses (like 404 or 500). You need to check `response.ok` and `response.status` inside the first `.then()` block.",
            "A true CORS blocking error often manifests as a `TypeError: Failed to fetch` or similar network error in the `catch` block, sometimes with `response.status` being 0 (though this can also indicate other network issues).",
            "Consider using `async/await` with `try/catch` for cleaner asynchronous error handling."
          ],
          "tags": [
            "cors",
            "fetch-api",
            "error-handling",
            "networking",
            "frontend-basics"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "theory_sop_cors",
            "javascript_fetch_api",
            "javascript_async"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "same_origin_policy",
            "cors_headers",
            "http_status_codes"
          ]
        },
        {
          "id": "task_user_preference_manager",
          "title": "User Preference Manager with LocalStorage",
          "description": "\nCreate a simple web application that allows a user to select a preferred theme (e.g., 'light', 'dark', 'system') and a preferred language (e.g., 'en', 'es', 'fr'). These preferences should persist across browser sessions.\n\n**Requirements:**\n1.  Create an HTML page with:\n    *   A heading displaying the current active theme and language.\n    *   Three radio buttons or a select dropdown for theme selection.\n    *   Three radio buttons or a select dropdown for language selection.\n    *   A button to 'Clear All Preferences'.\n2.  Implement JavaScript to:\n    *   **Load Preferences**: On page load, check `localStorage` for saved theme and language preferences. If found, apply them to the UI and display them.\n    *   **Save Preferences**: When a user selects a new theme or language, save the new preference to `localStorage`.\n    *   **Apply Theme/Language**: Dynamically update the page's appearance (e.g., change `body` background/text color for theme) and the displayed language text based on the selections.\n    *   **Clear Preferences**: When the 'Clear All Preferences' button is clicked, remove both theme and language preferences from `localStorage` and reset the UI to default settings.\n3.  Ensure that changes persist even if the browser tab is closed and reopened.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>User Preferences</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; transition: background-color 0.3s, color 0.3s; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        .option-group { margin-bottom: 15px; }\n        label { display: block; margin-bottom: 5px; font-weight: bold; }\n        input[type=\"radio\"] { margin-right: 5px; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n        button:hover { background-color: #0056b3; }\n\n        /* Theme styles */\n        body.light-theme { background-color: #f0f0f0; color: #333; }\n        body.dark-theme { background-color: #333; color: #f0f0f0; }\n        body.system-theme { background-color: white; color: black; } /* Default */\n    </style>\n</head>\n<body class=\"system-theme\">\n    <div class=\"container\">\n        <h1>User Preference Manager</h1>\n        <p>Current Theme: <span id=\"current-theme\">System</span></p>\n        <p>Current Language: <span id=\"current-language\">English</span></p>\n\n        <div class=\"option-group\">\n            <label>Select Theme:</label>\n            <input type=\"radio\" name=\"theme\" value=\"light\" id=\"theme-light\"> <label for=\"theme-light\">Light</label>\n            <input type=\"radio\" name=\"theme\" value=\"dark\" id=\"theme-dark\"> <label for=\"theme-dark\">Dark</label>\n            <input type=\"radio\" name=\"theme\" value=\"system\" id=\"theme-system\"> <label for=\"theme-system\">System Default</label>\n        </div>\n\n        <div class=\"option-group\">\n            <label>Select Language:</label>\n            <input type=\"radio\" name=\"language\" value=\"en\" id=\"lang-en\"> <label for=\"lang-en\">English</label>\n            <input type=\"radio\" name=\"language\" value=\"es\" id=\"lang-es\"> <label for=\"lang-es\">Spanish</label>\n            <input type=\"radio\" name=\"language\" value=\"fr\" id=\"lang-fr\"> <label for=\"lang-fr\">French</label>\n        </div>\n\n        <button id=\"clear-preferences\">Clear All Preferences</button>\n    </div>\n\n    <script>\n        const currentThemeSpan = document.getElementById('current-theme');\n        const currentLanguageSpan = document.getElementById('current-language');\n        const themeRadios = document.querySelectorAll('input[name=\"theme\"]');\n        const languageRadios = document.querySelectorAll('input[name=\"language\"]');\n        const clearButton = document.getElementById('clear-preferences');\n\n        // Default values\n        const defaultTheme = 'system';\n        const defaultLanguage = 'en';\n\n        const langMap = { // Mapping for display purposes\n            'en': 'English',\n            'es': 'Spanish',\n            'fr': 'French'\n        };\n\n        function applyTheme(theme) {\n            document.body.className = ''; // Clear existing themes\n            document.body.classList.add(`${theme}-theme`);\n            currentThemeSpan.textContent = theme.charAt(0).toUpperCase() + theme.slice(1); // Capitalize first letter\n            // Set radio button\n            document.getElementById(`theme-${theme}`).checked = true;\n        }\n\n        function applyLanguage(lang) {\n            currentLanguageSpan.textContent = langMap[lang] || 'Unknown';\n            // Set radio button\n            document.getElementById(`lang-${lang}`).checked = true;\n            // In a real app, this would change text content on the page\n        }\n\n        function loadPreferences() {\n            const savedTheme = localStorage.getItem('userTheme');\n            const savedLanguage = localStorage.getItem('userLanguage');\n\n            applyTheme(savedTheme || defaultTheme);\n            applyLanguage(savedLanguage || defaultLanguage);\n        }\n\n        function saveTheme(theme) {\n            localStorage.setItem('userTheme', theme);\n            applyTheme(theme);\n        }\n\n        function saveLanguage(lang) {\n            localStorage.setItem('userLanguage', lang);\n            applyLanguage(lang);\n        }\n\n        function clearPreferences() {\n            localStorage.removeItem('userTheme');\n            localStorage.removeItem('userLanguage');\n            loadPreferences(); // Reset to defaults\n        }\n\n        // Event Listeners\n        themeRadios.forEach(radio => {\n            radio.addEventListener('change', (event) => {\n                saveTheme(event.target.value);\n            });\n        });\n\n        languageRadios.forEach(radio => {\n            radio.addEventListener('change', (event) => {\n                saveLanguage(event.target.value);\n            });\n        });\n\n        clearButton.addEventListener('click', clearPreferences);\n\n        // Initial load\n        document.addEventListener('DOMContentLoaded', loadPreferences);\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>User Preferences</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; transition: background-color 0.3s, color 0.3s; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        .option-group { margin-bottom: 15px; }\n        label { display: block; margin-bottom: 5px; font-weight: bold; }\n        input[type=\"radio\"] { margin-right: 5px; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n        button:hover { background-color: #0056b3; }\n\n        /* Theme styles */\n        body.light-theme { background-color: #f0f0f0; color: #333; }\n        body.dark-theme { background-color: #333; color: #f0f0f0; }\n        body.system-theme { background-color: white; color: black; } /* Default */\n    </style>\n</head>\n<body class=\"system-theme\">\n    <div class=\"container\">\n        <h1>User Preference Manager</h1>\n        <p>Current Theme: <span id=\"current-theme\">System</span></p>\n        <p>Current Language: <span id=\"current-language\">English</span></p>\n\n        <div class=\"option-group\">\n            <label>Select Theme:</label>\n            <input type=\"radio\" name=\"theme\" value=\"light\" id=\"theme-light\"> <label for=\"theme-light\">Light</label>\n            <input type=\"radio\" name=\"theme\" value=\"dark\" id=\"theme-dark\"> <label for=\"theme-dark\">Dark</label>\n            <input type=\"radio\" name=\"theme\" value=\"system\" id=\"theme-system\"> <label for=\"theme-system\">System Default</label>\n        </div>\n\n        <div class=\"option-group\">\n            <label>Select Language:</label>\n            <input type=\"radio\" name=\"language\" value=\"en\" id=\"lang-en\"> <label for=\"lang-en\">English</label>\n            <input type=\"radio\" name=\"language\" value=\"es\" id=\"lang-es\"> <label for=\"lang-es\">Spanish</label>\n            <input type=\"radio\" name=\"language\" value=\"fr\" id=\"lang-fr\"> <label for=\"lang-fr\">French</label>\n        </div>\n\n        <button id=\"clear-preferences\">Clear All Preferences</button>\n    </div>\n\n    <script>\n        const currentThemeSpan = document.getElementById('current-theme');\n        const currentLanguageSpan = document.getElementById('current-language');\n        const themeRadios = document.querySelectorAll('input[name=\"theme\"]');\n        const languageRadios = document.querySelectorAll('input[name=\"language\"]');\n        const clearButton = document.getElementById('clear-preferences');\n\n        const defaultTheme = 'system';\n        const defaultLanguage = 'en';\n\n        const langMap = {\n            'en': 'English',\n            'es': 'Spanish',\n            'fr': 'French'\n        };\n\n        function applyTheme(theme) {\n            document.body.className = ''; // Remove existing classes\n            document.body.classList.add(`${theme}-theme`);\n            currentThemeSpan.textContent = theme.charAt(0).toUpperCase() + theme.slice(1); // Capitalize for display\n            const themeRadio = document.getElementById(`theme-${theme}`);\n            if (themeRadio) {\n                themeRadio.checked = true;\n            }\n        }\n\n        function applyLanguage(lang) {\n            currentLanguageSpan.textContent = langMap[lang] || 'Unknown';\n            const langRadio = document.getElementById(`lang-${lang}`);\n            if (langRadio) {\n                langRadio.checked = true;\n            }\n        }\n\n        function loadPreferences() {\n            const savedTheme = localStorage.getItem('userTheme');\n            const savedLanguage = localStorage.getItem('userLanguage');\n\n            applyTheme(savedTheme || defaultTheme);\n            applyLanguage(savedLanguage || defaultLanguage);\n        }\n\n        function savePreference(key, value, applyFn) {\n            try {\n                localStorage.setItem(key, value);\n                applyFn(value);\n            } catch (e) {\n                console.error(`Error saving preference '${key}':`, e);\n                alert('Storage limit exceeded or access denied. Cannot save preference.');\n            }\n        }\n\n        function clearPreferences() {\n            try {\n                localStorage.removeItem('userTheme');\n                localStorage.removeItem('userLanguage');\n                loadPreferences(); // Reset to defaults\n                alert('All preferences cleared!');\n            } catch (e) {\n                console.error('Error clearing preferences:', e);\n                alert('Error clearing preferences.');\n            }\n        }\n\n        // Event Listeners\n        themeRadios.forEach(radio => {\n            radio.addEventListener('change', (event) => {\n                savePreference('userTheme', event.target.value, applyTheme);\n            });\n        });\n\n        languageRadios.forEach(radio => {\n            radio.addEventListener('change', (event) => {\n                savePreference('userLanguage', event.target.value, applyLanguage);\n            });\n        });\n\n        clearButton.addEventListener('click', clearPreferences);\n\n        // Initial load when the DOM is fully loaded\n        document.addEventListener('DOMContentLoaded', loadPreferences);\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Load the page: Should display default theme and language, and corresponding radio buttons checked.",
            "Select 'Dark' theme: Page background/text should change, 'Current Theme' text should update, and 'Dark' radio should be checked.",
            "Select 'Spanish' language: 'Current Language' text should update, and 'Spanish' radio should be checked.",
            "Refresh the page: Previously selected theme and language should persist and be applied.",
            "Close and reopen the browser tab: Previously selected theme and language should still persist.",
            "Click 'Clear All Preferences': Page should revert to default theme/language, and `localStorage` should be empty (verify in Dev Tools Application tab).",
            "Test with invalid localStorage access (e.g., in incognito mode with 'Block third-party cookies' enabled for some browsers): `savePreference` should catch the error."
          ],
          "hints": [
            "Use `localStorage.setItem(key, value)` to save and `localStorage.getItem(key)` to retrieve.",
            "Remember that `localStorage` only stores strings. For more complex data, you might need `JSON.stringify()` and `JSON.parse()`.",
            "Consider using a `DOMContentLoaded` event listener to ensure your JavaScript runs after the HTML is fully parsed.",
            "For styling, you can toggle CSS classes on the `body` element based on the selected theme.",
            "Wrap `localStorage` calls in `try...catch` blocks to handle potential `QuotaExceededError` or `SecurityError` (e.g., if storage is full or disabled)."
          ],
          "tags": [
            "local-storage",
            "frontend-basics",
            "data-persistence",
            "dom-manipulation",
            "user-interface"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_browser_storage",
            "javascript_dom",
            "html_forms"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "session_storage",
            "browser_api_security",
            "web_usability"
          ]
        },
        {
          "id": "task_heavy_computation_offloader",
          "title": "Heavy Computation Offloader with Web Worker",
          "description": "\nCreate a web page that demonstrates how to offload a CPU-intensive task to a Web Worker to keep the main UI thread responsive. The task will be calculating the Nth Fibonacci number, which can be computationally expensive for large N.\n\n**Requirements:**\n1.  **HTML Structure**:\n    *   An input field for the user to enter a number `N`.\n    *   A button to 'Calculate Fibonacci'.\n    *   A `div` to display the result.\n    *   A simple animation (e.g., a spinning loader icon or a changing background color) that continuously runs on the main thread.\n2.  **JavaScript (Main Thread)**:\n    *   When the 'Calculate Fibonacci' button is clicked, disable the button, show the loading animation, and send the input `N` to a Web Worker using `postMessage()`.\n    *   Listen for messages from the Web Worker. When a result is received, display it in the result `div`, hide the loading animation, and re-enable the button.\n    *   Handle potential errors from the worker (e.g., for very large N leading to computation overflow).\n3.  **JavaScript (Worker Thread - `fibonacciWorker.js`)**:\n    *   Define a function to calculate the Nth Fibonacci number (e.g., a recursive or iterative implementation).\n    *   Listen for `message` events from the main thread.\n    *   Upon receiving `N`, calculate the Fibonacci number.\n    *   Send the result back to the main thread using `postMessage()`.\n    *   Implement error handling for cases where N is too large or invalid.\n4.  **Demonstrate Responsiveness**: Ensure that the loading animation continues to run smoothly while the worker is busy calculating, proving that the main thread is not blocked.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Web Worker Fibonacci</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        input[type=\"number\"] { padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n        button:disabled { background-color: #a0c9ff; cursor: not-allowed; }\n        #result { margin-top: 20px; padding: 10px; border: 1px dashed #ddd; min-height: 30px; }\n        #loading-animation { \n            width: 30px; height: 30px; border: 4px solid #f3f3f3; border-top: 4px solid #3498db; \n            border-radius: 50%; animation: spin 1s linear infinite; display: none; margin: 10px auto;\n        }\n        @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Fibonacci Calculator (Web Worker)</h1>\n        <p>Enter a number N to calculate the Nth Fibonacci number:</p>\n        <input type=\"number\" id=\"fib-input\" value=\"40\" min=\"0\">\n        <button id=\"calculate-button\">Calculate Fibonacci</button>\n        <div id=\"loading-animation\"></div>\n        <div id=\"result\"></div>\n    </div>\n\n    <script>\n        const fibInput = document.getElementById('fib-input');\n        const calculateButton = document.getElementById('calculate-button');\n        const loadingAnimation = document.getElementById('loading-animation');\n        const resultDiv = document.getElementById('result');\n\n        let fibWorker;\n\n        function initWorker() {\n            if (fibWorker) {\n                fibWorker.terminate(); // Terminate existing worker if any\n            }\n            fibWorker = new Worker('fibonacciWorker.js');\n\n            fibWorker.onmessage = (event) => {\n                const { result, error } = event.data;\n                loadingAnimation.style.display = 'none';\n                calculateButton.disabled = false;\n\n                if (error) {\n                    resultDiv.textContent = `Error: ${error}`;\n                    resultDiv.style.color = 'red';\n                } else {\n                    resultDiv.textContent = `Fibonacci(${fibInput.value}) = ${result}`;\n                    resultDiv.style.color = 'green';\n                }\n            };\n\n            fibWorker.onerror = (error) => {\n                loadingAnimation.style.display = 'none';\n                calculateButton.disabled = false;\n                resultDiv.textContent = `Worker Error: ${error.message}`;\n                resultDiv.style.color = 'red';\n                console.error('Worker error:', error);\n            };\n        }\n\n        calculateButton.addEventListener('click', () => {\n            const n = parseInt(fibInput.value);\n            if (isNaN(n) || n < 0) {\n                resultDiv.textContent = 'Please enter a valid non-negative number.';\n                resultDiv.style.color = 'orange';\n                return;\n            }\n\n            calculateButton.disabled = true;\n            loadingAnimation.style.display = 'block';\n            resultDiv.textContent = '';\n            resultDiv.style.color = 'black';\n\n            if (!fibWorker) {\n                initWorker();\n            }\n            fibWorker.postMessage(n);\n        });\n\n        // Initialize worker on page load\n        document.addEventListener('DOMContentLoaded', initWorker);\n\n        // Visual responsiveness check: main thread 'animation'\n        // This function will continuously update the body background color\n        // If the UI freezes during calculation, this animation will stop.\n        let hue = 0;\n        function animateBackground() {\n            document.body.style.backgroundColor = `hsl(${hue}, 70%, 90%)`;\n            hue = (hue + 1) % 360;\n            requestAnimationFrame(animateBackground);\n        }\n        requestAnimationFrame(animateBackground);\n    </script>\n</body>\n</html>\n\n<!-- fibonacciWorker.js -->\n// This file will be created by the solution\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Web Worker Fibonacci</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; transition: background-color 0.1s; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        input[type=\"number\"] { padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }\n        button:disabled { background-color: #a0c9ff; cursor: not-allowed; }\n        #result { margin-top: 20px; padding: 10px; border: 1px dashed #ddd; min-height: 30px; }\n        #loading-animation { \n            width: 30px; height: 30px; border: 4px solid #f3f3f3; border-top: 4px solid #3498db; \n            border-radius: 50%; animation: spin 1s linear infinite; display: none; margin: 10px auto;\n        }\n        @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Fibonacci Calculator (Web Worker)</h1>\n        <p>Enter a number N to calculate the Nth Fibonacci number:</p>\n        <input type=\"number\" id=\"fib-input\" value=\"40\" min=\"0\">\n        <button id=\"calculate-button\">Calculate Fibonacci</button>\n        <div id=\"loading-animation\"></div>\n        <div id=\"result\"></div>\n    </div>\n\n    <script>\n        const fibInput = document.getElementById('fib-input');\n        const calculateButton = document.getElementById('calculate-button');\n        const loadingAnimation = document.getElementById('loading-animation');\n        const resultDiv = document.getElementById('result');\n\n        let fibWorkerInstance;\n\n        // Function to create/re-initialize the worker\n        function getFibWorker() {\n            if (fibWorkerInstance) {\n                fibWorkerInstance.terminate(); // Ensure previous worker is terminated\n            }\n            fibWorkerInstance = new Worker('fibonacciWorker.js');\n\n            fibWorkerInstance.onmessage = (event) => {\n                const { result, error } = event.data;\n                loadingAnimation.style.display = 'none';\n                calculateButton.disabled = false;\n\n                if (error) {\n                    resultDiv.textContent = `Error: ${error}`;\n                    resultDiv.style.color = 'red';\n                } else {\n                    // Use BigInt for potentially very large Fibonacci numbers\n                    resultDiv.textContent = `Fibonacci(${fibInput.value}) = ${result.toString()}`;\n                    resultDiv.style.color = 'green';\n                }\n            };\n\n            fibWorkerInstance.onerror = (error) => {\n                loadingAnimation.style.display = 'none';\n                calculateButton.disabled = false;\n                resultDiv.textContent = `Worker Error: ${error.message || 'An unknown worker error occurred.'}`;\n                resultDiv.style.color = 'red';\n                console.error('Worker error:', error);\n            };\n            return fibWorkerInstance;\n        }\n\n        calculateButton.addEventListener('click', () => {\n            const n = parseInt(fibInput.value);\n            if (isNaN(n) || n < 0) {\n                resultDiv.textContent = 'Please enter a valid non-negative number.';\n                resultDiv.style.color = 'orange';\n                return;\n            }\n            if (n > 100) { // Practical limit for BigInt Fibonacci without excessive wait\n                resultDiv.textContent = 'Input number is too large for practical calculation. Try <= 100.';\n                resultDiv.style.color = 'orange';\n                return;\n            }\n\n            calculateButton.disabled = true;\n            loadingAnimation.style.display = 'block';\n            resultDiv.textContent = 'Calculating...';\n            resultDiv.style.color = 'black';\n\n            const worker = getFibWorker();\n            worker.postMessage(n);\n        });\n\n        // --- Main thread animation to prove responsiveness ---\n        let hue = 0;\n        function animateBackground() {\n            document.body.style.backgroundColor = `hsl(${hue}, 70%, 90%)`;\n            hue = (hue + 2) % 360;\n            requestAnimationFrame(animateBackground);\n        }\n        \n        // Start the background animation on page load\n        requestAnimationFrame(animateBackground);\n    </script>\n</body>\n</html>\n\n<!-- fibonacciWorker.js -->\nself.onmessage = (event) => {\n    const n = event.data;\n\n    function fibonacci(num) {\n        // Handle edge cases for negative or non-integer input in worker as well\n        if (num < 0 || !Number.isInteger(num)) {\n            return 'Invalid input: Please provide a non-negative integer.';\n        }\n        if (num === 0) return 0n; // Use BigInt for potentially large numbers\n        if (num === 1) return 1n;\n\n        let a = 0n, b = 1n;\n        for (let i = 2; i <= num; i++) {\n            let temp = a + b;\n            a = b;\n            b = temp;\n        }\n        return b;\n    }\n\n    try {\n        const result = fibonacci(n);\n        self.postMessage({ result: result.toString() }); // Send BigInt as string\n    } catch (e) {\n        self.postMessage({ error: e.message || 'An error occurred during calculation.' });\n    }\n};\n",
          "testCases": [
            "Enter `N=10` and click Calculate: Should quickly show result. Animation should run smoothly.",
            "Enter `N=40` and click Calculate: Calculation will take a noticeable time, but the background animation (or other UI elements) should continue to run smoothly, demonstrating no UI freeze.",
            "Enter `N=0` or `N=1`: Should return correct base cases (0 and 1).",
            "Enter `N=-5` or a non-integer like `3.5`: Should display an error message for invalid input.",
            "Enter `N=90` (or higher if your machine is fast): Should take significant time but UI remains responsive. The result will be a very large number, handled by BigInt.",
            "After calculation, change `N` and click again: Should perform new calculation, demonstrating worker reusability or termination/re-initialization."
          ],
          "hints": [
            "The Fibonacci sequence calculation (especially naive recursive ones) is a good candidate for demonstrating CPU-bound tasks.",
            "Remember to use `new Worker('path/to/worker.js')` in the main thread and `self.onmessage` / `self.postMessage` in the worker.",
            "For very large Fibonacci numbers, regular JavaScript numbers (doubles) lose precision. Consider using `BigInt` for accurate results for N > ~78.",
            "Ensure your loading animation runs on the main thread (e.g., using `requestAnimationFrame`) to visually prove responsiveness."
          ],
          "tags": [
            "web-workers",
            "performance",
            "asynchronous-javascript",
            "concurrency",
            "algorithms"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "theory_web_workers",
            "javascript_async",
            "dom_manipulation"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "event_loop",
            "main_thread_blocking",
            "bigint"
          ]
        },
        {
          "id": "task_large_array_processing_transferable",
          "title": "Large Array Processing with Transferable Objects",
          "description": "\nDemonstrate the performance benefit of `Transferable Objects` (specifically `ArrayBuffer`) when processing a large dataset in a Web Worker compared to standard data copying. You will implement two modes of operation: one using structured cloning (implicit copying) and one using explicit transfer of an `ArrayBuffer`.\n\n**Requirements:**\n1.  **HTML Structure**:\n    *   An input field to specify the size of the array (e.g., `10,000,000`).\n    *   Two buttons: 'Process (Copy)' and 'Process (Transfer)'.\n    *   A `div` to display processing time and results.\n    *   A simple animation (e.g., a pulsing square) to show main thread responsiveness.\n2.  **JavaScript (Main Thread)**:\n    *   Create a `Web Worker` (`dataProcessor.js`).\n    *   **'Process (Copy)' Mode**: Generate a large `Array` of numbers. Send it to the worker using `worker.postMessage(dataArray)`. Measure and display the round-trip time.\n    *   **'Process (Transfer)' Mode**: Generate a large `ArrayBuffer` (e.g., using `Uint32Array`). Send its underlying buffer to the worker using `worker.postMessage({ buffer: myBuffer }, [myBuffer])`. Measure and display the round-trip time. Observe that the original `myBuffer` becomes neutered.\n    *   Display a visual indicator (e.g., a loading spinner/animation) that continues running during worker processing to confirm main thread responsiveness.\n3.  **JavaScript (Worker Thread - `dataProcessor.js`)**:\n    *   Listen for messages from the main thread.\n    *   Upon receiving data, perform a simple operation on it (e.g., double each number, sum all numbers) to simulate processing.\n    *   Send the processed data (or result) back to the main thread.\n    *   Ensure the worker can correctly handle both a copied array and a transferred `ArrayBuffer`.\n4.  **Comparison**: The goal is to visually demonstrate (and measure) that 'Process (Transfer)' is significantly faster for large datasets than 'Process (Copy)'.\n",
          "difficulty": "hard",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Transferable Objects Demo</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        .container { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        input[type=\"number\"] { padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; }\n        button:disabled { background-color: #a0c9ff; cursor: not-allowed; }\n        #results { margin-top: 20px; padding: 10px; border: 1px dashed #ddd; min-height: 80px; }\n        #animation-box { width: 50px; height: 50px; background-color: #f00; margin: 20px auto; animation: pulse 1s infinite alternate; }\n        @keyframes pulse {\n            from { transform: scale(0.8); opacity: 0.5; }\n            to { transform: scale(1.2); opacity: 1; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Large Array Processing: Copy vs. Transfer</h1>\n        <p>Enter array size: <input type=\"number\" id=\"array-size\" value=\"5000000\" min=\"1000\"></p>\n        <button id=\"process-copy\">Process (Copy)</button>\n        <button id=\"process-transfer\">Process (Transfer)</button>\n        <div id=\"results\"></div>\n        <div id=\"animation-box\"></div>\n    </div>\n\n    <script>\n        const arraySizeInput = document.getElementById('array-size');\n        const processCopyBtn = document.getElementById('process-copy');\n        const processTransferBtn = document.getElementById('process-transfer');\n        const resultsDiv = document.getElementById('results');\n        const animationBox = document.getElementById('animation-box');\n\n        let dataWorker = new Worker('dataProcessor.js');\n        let startTime;\n\n        dataWorker.onmessage = (event) => {\n            const { processedData, type } = event.data;\n            const endTime = performance.now();\n            const duration = (endTime - startTime).toFixed(2);\n\n            let originalBufferState = '';\n            if (type === 'transfer') {\n                // This part is challenging to demonstrate neutering directly here\n                // as the original reference `myBuffer` is not easily captured\n                // in a simple variable outside the function scope after transfer.\n                // We rely on the concept that it *is* neutered.\n            }\n            resultsDiv.innerHTML = `\n                <h3>${type.toUpperCase()} Mode</h3>\n                <p>Processed ${processedData.length || 'array'} items in: <strong>${duration} ms</strong></p>\n                <p>First item (after processing): ${processedData[0] || 'N/A'}</p>\n                <p>Original buffer state: ${originalBufferState}</p>\n            `;\n            enableButtons();\n        };\n\n        dataWorker.onerror = (error) => {\n            console.error('Worker error:', error);\n            resultsDiv.textContent = `Error: ${error.message}`; \n            enableButtons();\n        };\n\n        function disableButtons() {\n            processCopyBtn.disabled = true;\n            processTransferBtn.disabled = true;\n        }\n\n        function enableButtons() {\n            processCopyBtn.disabled = false;\n            processTransferBtn.disabled = false;\n        }\n\n        processCopyBtn.addEventListener('click', () => {\n            const size = parseInt(arraySizeInput.value);\n            if (isNaN(size) || size <= 0) { alert('Please enter a valid array size.'); return; }\n            \n            disableButtons();\n            resultsDiv.textContent = 'Processing (Copy)...';\n            \n            // Create a regular JavaScript array\n            const data = Array.from({ length: size }, (_, i) => i);\n            \n            startTime = performance.now();\n            dataWorker.postMessage({ type: 'copy', data: data });\n        });\n\n        processTransferBtn.addEventListener('click', () => {\n            const size = parseInt(arraySizeInput.value);\n            if (isNaN(size) || size <= 0) { alert('Please enter a valid array size.'); return; }\n\n            disableButtons();\n            resultsDiv.textContent = 'Processing (Transfer)...';\n\n            // Create a TypedArray and get its underlying ArrayBuffer\n            const typedArray = new Uint32Array(size);\n            for (let i = 0; i < size; i++) {\n                typedArray[i] = i;\n            }\n            const bufferToTransfer = typedArray.buffer;\n            \n            startTime = performance.now();\n            // Send the ArrayBuffer and mark it for transfer\n            dataWorker.postMessage({ type: 'transfer', data: bufferToTransfer }, [bufferToTransfer]);\n\n            // IMPORTANT: After transfer, bufferToTransfer is neutered in main thread.\n            // Attempting to access typedArray will cause an error.\n            try {\n                console.log('Original typedArray[0] after transfer:', typedArray[0]);\n            } catch (e) {\n                console.error('Expected error accessing neutered ArrayBuffer:', e.message);\n                // You might update resultsDiv with this message if desired\n            }\n        });\n\n        // Main thread animation to demonstrate responsiveness\n        function animatePulse() {\n            // The CSS animation will handle this directly, no JS needed here\n            requestAnimationFrame(animatePulse); // Keep the loop running for other potential updates\n        }\n        requestAnimationFrame(animatePulse);\n\n    </script>\n</body>\n</html>\n\n<!-- dataProcessor.js -->\n// This file will be created by the solution\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Transferable Objects Demo</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        .container { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        input[type=\"number\"] { padding: 8px; margin-right: 10px; border: 1px solid #ccc; border-radius: 4px; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px; }\n        button:disabled { background-color: #a0c9ff; cursor: not-allowed; }\n        #results { margin-top: 20px; padding: 10px; border: 1px dashed #ddd; min-height: 80px; }\n        #animation-box { width: 50px; height: 50px; background-color: #f00; margin: 20px auto; animation: pulse 1s infinite alternate; }\n        @keyframes pulse {\n            from { transform: scale(0.8); opacity: 0.5; }\n            to { transform: scale(1.2); opacity: 1; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Large Array Processing: Copy vs. Transfer</h1>\n        <p>Enter array size (e.g., 5,000,000 for noticeable difference): <input type=\"number\" id=\"array-size\" value=\"5000000\" min=\"1000\"></p>\n        <button id=\"process-copy\">Process (Copy)</button>\n        <button id=\"process-transfer\">Process (Transfer)</button>\n        <div id=\"results\"></div>\n        <div id=\"animation-box\"></div>\n    </div>\n\n    <script>\n        const arraySizeInput = document.getElementById('array-size');\n        const processCopyBtn = document.getElementById('process-copy');\n        const processTransferBtn = document.getElementById('process-transfer');\n        const resultsDiv = document.getElementById('results');\n        const animationBox = document.getElementById('animation-box');\n\n        let dataWorker;\n        let startTime;\n        let originalTypedArrayRef; // To check neutered state after transfer\n\n        function initializeWorker() {\n            if (dataWorker) {\n                dataWorker.terminate();\n            }\n            dataWorker = new Worker('dataProcessor.js');\n\n            dataWorker.onmessage = (event) => {\n                const { processedData, type } = event.data;\n                const endTime = performance.now();\n                const duration = (endTime - startTime).toFixed(2);\n\n                let originalBufferState = '';\n                if (type === 'transfer' && originalTypedArrayRef) {\n                    // Check if the original ArrayBuffer is neutered (byteLength will be 0)\n                    originalBufferState = `Original ArrayBuffer.byteLength after transfer: ${originalTypedArrayRef.buffer.byteLength}`;\n                }\n                \n                resultsDiv.innerHTML = `\n                    <h3>${type.toUpperCase()} Mode</h3>\n                    <p>Processed ${processedData ? processedData.length : 'N/A'} items in: <strong>${duration} ms</strong></p>\n                    <p>First item (after processing): ${processedData ? processedData[0] : 'N/A'}</p>\n                    <p>${originalBufferState}</p>\n                `;\n                enableButtons();\n            };\n\n            dataWorker.onerror = (error) => {\n                console.error('Worker error:', error);\n                resultsDiv.textContent = `Error: ${error.message}`; \n                enableButtons();\n            };\n        }\n\n        function disableButtons() {\n            processCopyBtn.disabled = true;\n            processTransferBtn.disabled = true;\n        }\n\n        function enableButtons() {\n            processCopyBtn.disabled = false;\n            processTransferBtn.disabled = false;\n        }\n\n        // Initialize worker on page load\n        document.addEventListener('DOMContentLoaded', initializeWorker);\n\n        processCopyBtn.addEventListener('click', () => {\n            const size = parseInt(arraySizeInput.value);\n            if (isNaN(size) || size <= 0) { alert('Please enter a valid array size.'); return; }\n            \n            disableButtons();\n            resultsDiv.textContent = 'Processing (Copying data)...';\n            \n            // Create a regular JavaScript array for copying\n            const data = Array.from({ length: size }, (_, i) => i);\n            \n            startTime = performance.now();\n            dataWorker.postMessage({ type: 'copy', data: data });\n        });\n\n        processTransferBtn.addEventListener('click', () => {\n            const size = parseInt(arraySizeInput.value);\n            if (isNaN(size) || size <= 0) { alert('Please enter a valid array size.'); return; }\n\n            disableButtons();\n            resultsDiv.textContent = 'Processing (Transferring data)...';\n\n            // Create a TypedArray and get its underlying ArrayBuffer\n            const typedArray = new Uint32Array(size);\n            for (let i = 0; i < size; i++) {\n                typedArray[i] = i;\n            }\n            const bufferToTransfer = typedArray.buffer;\n            originalTypedArrayRef = typedArray; // Keep reference to check neutered state\n            \n            startTime = performance.now();\n            // Send the ArrayBuffer and mark it for transfer\n            dataWorker.postMessage({ type: 'transfer', data: bufferToTransfer }, [bufferToTransfer]);\n\n            // IMPORTANT: After transfer, bufferToTransfer is neutered in main thread.\n            // Attempting to access typedArray will cause an error or yield 0s.\n            // This console.error will confirm the neutering.\n            setTimeout(() => {\n                try {\n                    console.log('Original typedArray[0] after transfer:', typedArray[0]);\n                } catch (e) {\n                    console.error('Expected error accessing neutered ArrayBuffer:', e.message);\n                }\n                 console.log('Original ArrayBuffer.byteLength after transfer:', typedArray.buffer.byteLength);\n            }, 0);\n           \n        });\n\n        // Main thread animation to demonstrate responsiveness\n        function animatePulse() {\n            // The CSS animation ensures this is running independently\n            requestAnimationFrame(animatePulse);\n        }\n        requestAnimationFrame(animatePulse);\n    </script>\n</body>\n</html>\n\n<!-- dataProcessor.js -->\nself.onmessage = (event) => {\n    const { type, data } = event.data;\n\n    let processedData;\n\n    if (type === 'copy') {\n        // Received a copied array\n        processedData = data.map(item => item * 2); // Example processing\n    } else if (type === 'transfer') {\n        // Received an ArrayBuffer. Create a TypedArray view to work with it.\n        const typedArray = new Uint32Array(data);\n        processedData = typedArray.map(item => item * 2); // Example processing\n\n        // If you wanted to transfer it back, you'd do:\n        // self.postMessage({ processedData: processedData.buffer, type: 'transfer' }, [processedData.buffer]);\n    }\n    \n    self.postMessage({ processedData, type });\n};\n",
          "testCases": [
            "Enter `100000` (smaller size) for array: 'Process (Copy)' and 'Process (Transfer)' should both be relatively fast. Animation should run smoothly.",
            "Enter `5000000` (medium size): 'Process (Copy)' should be noticeably slower than 'Process (Transfer)'. Observe the animation during both. The `byteLength` of the original `ArrayBuffer` in the console after transfer should be 0.",
            "Enter `20000000` (large size): The difference between 'Copy' and 'Transfer' should become very significant, with 'Copy' potentially causing brief UI jank and taking much longer. The animation should remain smooth for 'Transfer'.",
            "Test with invalid array size (e.g., 0, negative, non-number): Should show an alert message and not proceed.",
            "Ensure `original ArrayBuffer.byteLength after transfer: 0` is logged in the console after the 'Process (Transfer)' button is clicked."
          ],
          "hints": [
            "For the 'Copy' mode, a regular `Array` (or even a `TypedArray` without specifying a transfer list) will be copied via structured cloning.",
            "For the 'Transfer' mode, you need to explicitly create an `ArrayBuffer` (e.g., using `new Uint32Array(size).buffer`) and pass it as the second argument to `postMessage`.",
            "To measure time, use `performance.now()` before sending the message and after receiving the result.",
            "Remember that `ArrayBuffer` itself is just raw binary data; you need `TypedArray` views (like `Uint32Array`) to easily manipulate the numbers within it.",
            "Confirm the neutering effect by trying to access the `TypedArray` after `postMessage` in the main thread (it should become detached or its `byteLength` should be 0)."
          ],
          "tags": [
            "web-workers",
            "transferable-objects",
            "performance",
            "memory-management",
            "javascript-optimization",
            "typed-arrays"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_transferable_objects",
            "theory_web_workers",
            "javascript_typed_arrays"
          ],
          "complexity": 8,
          "interviewRelevance": 7,
          "learningPath": "advanced",
          "relatedConcepts": [
            "structured_cloning",
            "main_thread_blocking",
            "event_loop"
          ]
        },
        {
          "id": "task_optimized_search_input",
          "title": "Optimized Search Input with Debouncing",
          "description": "\nImplement a search input field that simulates making an API call for suggestions as the user types. To optimize performance and reduce unnecessary network requests, you must implement debouncing on the input event.\n\n**Requirements:**\n1.  **HTML Structure**:\n    *   An `input` field (`type=\"text\"`) for search queries.\n    *   A `div` or `ul` to display search results/suggestions.\n    *   A small indicator (e.g., text like 'Typing...' or 'Searching...') to show when the debounced function is active/waiting.\n2.  **JavaScript (Main Thread)**:\n    *   Implement a `debounce` utility function that takes a function and a delay as arguments and returns a debounced version of the function.\n    *   Create a `simulateApiCall(query)` function. This function should: `console.log` the query and a timestamp, and return a Promise that resolves after a short delay (e.g., 300ms) to mimic network latency. For this task, it doesn't need to return actual data, just confirm the call happened.\n    *   Attach an `input` event listener to the search field.\n    *   Inside the event listener, call the `debouncedSimulateApiCall` function with the current input value.\n    *   Manage the 'Typing...'/'Searching...' indicator: show it when typing starts, hide it when the debounced function actually executes.\n3.  **Behavior**:\n    *   Rapid typing should trigger the debounced function only once, after the user pauses.\n    *   If the user types, pauses, and then types again quickly, the timer should reset, and the function should execute only after the *last* pause.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Debounced Search</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        input[type=\"text\"] { width: calc(100% - 20px); padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; }\n        #status-indicator { font-style: italic; color: #666; margin-bottom: 10px; }\n        #results-display { border: 1px dashed #ddd; padding: 10px; min-height: 50px; background-color: #f9f9f9; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Debounced Search Input</h1>\n        <p>Type into the search box to see debouncing in action. The \"API call\" will only trigger after a short pause.</p>\n        <input type=\"text\" id=\"search-input\" placeholder=\"Start typing...\">\n        <div id=\"status-indicator\"></div>\n        <div id=\"results-display\"></div>\n    </div>\n\n    <script>\n        const searchInput = document.getElementById('search-input');\n        const statusIndicator = document.getElementById('status-indicator');\n        const resultsDisplay = document.getElementById('results-display');\n\n        // Your debounce utility function here\n        function debounce(func, delay) {\n            let timeoutId;\n            return function(...args) {\n                clearTimeout(timeoutId);\n                statusIndicator.textContent = 'Typing...';\n                timeoutId = setTimeout(() => {\n                    statusIndicator.textContent = 'Searching...';\n                    func.apply(this, args);\n                }, delay);\n            };\n        }\n\n        // Simulate an API call\n        function simulateApiCall(query) {\n            return new Promise(resolve => {\n                setTimeout(() => {\n                    console.log(`API call for: \"${query}\" at ${new Date().toLocaleTimeString()}`);\n                    resultsDisplay.textContent = `Results for: \"${query}\" (simulated API call)`;\n                    statusIndicator.textContent = ''; // Clear indicator after call\n                    resolve();\n                }, 300); // Simulate network latency\n            });\n        }\n\n        // Debounced version of the API call\n        const debouncedSearch = debounce(simulateApiCall, 500); // 500ms debounce delay\n\n        searchInput.addEventListener('input', (event) => {\n            debouncedSearch(event.target.value);\n        });\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Debounced Search</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        input[type=\"text\"] { width: calc(100% - 20px); padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; font-size: 16px; }\n        #status-indicator { font-style: italic; color: #666; margin-bottom: 10px; }\n        #results-display { border: 1px dashed #ddd; padding: 10px; min-height: 50px; background-color: #f9f9f9; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Debounced Search Input</h1>\n        <p>Type into the search box to see debouncing in action. The \"API call\" will only trigger after a short pause.</p>\n        <input type=\"text\" id=\"search-input\" placeholder=\"Start typing...\">\n        <div id=\"status-indicator\"></div>\n        <div id=\"results-display\"></div>\n    </div>\n\n    <script>\n        const searchInput = document.getElementById('search-input');\n        const statusIndicator = document.getElementById('status-indicator');\n        const resultsDisplay = document.getElementById('results-display');\n\n        /**\n         * Debounce utility function\n         * @param {function} func The function to debounce.\n         * @param {number} delay The delay in milliseconds before the function is invoked.\n         * @returns {function} A debounced version of the function.\n         */\n        function debounce(func, delay) {\n            let timeoutId; // Stores the timer ID\n            let isWaiting = false; // Flag to track if we're in a waiting state\n\n            return function(...args) {\n                // Clear any existing timer to reset the debounce countdown\n                clearTimeout(timeoutId);\n                \n                // Show typing indicator immediately if not already showing\n                if (!isWaiting) {\n                    statusIndicator.textContent = 'Typing...';\n                    isWaiting = true;\n                }\n\n                timeoutId = setTimeout(() => {\n                    // When the delay passes, execute the original function\n                    func.apply(this, args);\n                    isWaiting = false;\n                    statusIndicator.textContent = ''; // Clear indicator after execution\n                }, delay);\n            };\n        }\n\n        /**\n         * Simulates an API call to fetch search suggestions.\n         * @param {string} query The search query.\n         * @returns {Promise<void>}\n         */\n        function simulateApiCall(query) {\n            statusIndicator.textContent = 'Searching...'; // Change status when actual call is made\n            return new Promise(resolve => {\n                setTimeout(() => {\n                    console.log(`API call for: \"${query}\" at ${new Date().toLocaleTimeString()}`);\n                    resultsDisplay.textContent = `Results for: \"${query}\" (simulated API call)`;\n                    resolve();\n                }, 300); // Simulate network latency\n            });\n        }\n\n        // Create a debounced version of the API call function with a 500ms delay\n        const debouncedSearch = debounce(simulateApiCall, 500); \n\n        // Attach the debounced function to the input event\n        searchInput.addEventListener('input', (event) => {\n            debouncedSearch(event.target.value);\n        });\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Type 'hello' slowly (pause between letters): Each letter should update 'Typing...' then eventually trigger 'Searching...' and the result.",
            "Type 'world' very quickly without pausing: 'Typing...' should appear, but 'Searching...' and the result should only appear once after you stop typing, demonstrating the debounce effect.",
            "Type 'apple', pause, then type 'banana' quickly: The first 'apple' search should trigger, and then the 'banana' search should trigger after its own pause, resetting the timer correctly.",
            "Clear the input field: The indicator should clear or return to default state after the debounce delay.",
            "Ensure the console logs match the debounced behavior (fewer API calls than key presses)."
          ],
          "hints": [
            "The `debounce` function needs to maintain a `timeoutId` using a closure.",
            "Each time the debounced function is called, `clearTimeout` should be used to cancel any pending executions.",
            "The actual function call should only occur inside the `setTimeout` callback.",
            "The `statusIndicator` should change between 'Typing...' (immediately on input) and 'Searching...' (when the debounced function actually fires)."
          ],
          "tags": [
            "debouncing",
            "performance-optimization",
            "event-handling",
            "javascript",
            "user-experience"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "theory_js_performance_optimization",
            "javascript_closures",
            "javascript_timers"
          ],
          "complexity": 7,
          "interviewRelevance": 10,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "throttling",
            "event_listeners",
            "api_calls"
          ]
        },
        {
          "id": "task_responsive_card_component",
          "title": "Responsive Card Component with ResizeObserver",
          "description": "\nCreate a responsive card component that dynamically adjusts its internal layout and font sizes based on its own width, using the `ResizeObserver` API. This demonstrates how elements can self-adapt without relying on global window resize events.\n\n**Requirements:**\n1.  **HTML Structure**:\n    *   A main `div` with the ID `resizable-card`. This card should have a fluid width (e.g., `width: 80%; max-width: 600px; min-width: 250px; margin: 20px auto;`) so its size changes when the browser window is resized.\n    *   Inside the card, include a `h2` for the title and a `p` for the content.\n    *   (Optional but recommended) Add a `div` that visually shows the card's current `contentRect` dimensions.\n2.  **CSS**: Provide basic styling for the card and its internal elements. Define different font sizes or flex directions that will be applied by JavaScript based on width.\n3.  **JavaScript**:\n    *   Create a `ResizeObserver` instance.\n    *   Observe the `resizable-card` element.\n    *   In the `ResizeObserver` callback:\n        *   Read the `contentRect.width` of the observed entry.\n        *   Implement logic to change the `font-size` of the `h2` and `p` elements based on the card's width (e.g., smaller font for `width < 350px`, larger for `width >= 350px`).\n        *   (Optional) Implement logic to change the `flex-direction` of an internal container from `column` to `row` or vice-versa based on width.\n        *   Update the `div` displaying current dimensions.\n4.  **Demonstration**: Resize the browser window to observe the card's width changing and its internal content dynamically adapting without a page refresh.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Responsive Card with ResizeObserver</title>\n    <style>\n        body { font-family: sans-serif; margin: 0; background-color: #f4f4f4; }\n        .resizable-card {\n            width: 80%;\n            max-width: 600px;\n            min-width: 250px;\n            margin: 20px auto;\n            padding: 20px;\n            border: 1px solid #ccc;\n            border-radius: 8px;\n            box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n            background-color: white;\n            display: flex; /* For optional flex-direction change */\n            flex-direction: column; /* Default flex direction */\n            transition: font-size 0.2s, flex-direction 0.2s; /* Smooth transitions */\n        }\n        .card-content {\n            flex-grow: 1;\n        }\n        h2 { margin-top: 0; font-size: 24px; }\n        p { font-size: 16px; line-height: 1.5; }\n        .dimensions-display { margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-size: 14px; color: #555; }\n    </style>\n</head>\n<body>\n    <div id=\"resizable-card\" class=\"resizable-card\">\n        <div class=\"card-content\">\n            <h2 id=\"card-title\">Dynamic Card Title</h2>\n            <p id=\"card-text\">This content will adjust its font size and potentially layout based on the card's width. Resize your browser window to see the effect.</p>\n        </div>\n        <div class=\"dimensions-display\">\n            Current Width: <span id=\"current-width\"></span>px<br>\n            Current Height: <span id=\"current-height\"></span>px\n        </div>\n    </div>\n\n    <script>\n        const card = document.getElementById('resizable-card');\n        const cardTitle = document.getElementById('card-title');\n        const cardText = document.getElementById('card-text');\n        const currentWidthSpan = document.getElementById('current-width');\n        const currentHeightSpan = document.getElementById('current-height');\n\n        const resizeObserver = new ResizeObserver(entries => {\n            for (let entry of entries) {\n                if (entry.target === card) {\n                    const { width, height } = entry.contentRect;\n\n                    currentWidthSpan.textContent = Math.round(width);\n                    currentHeightSpan.textContent = Math.round(height);\n\n                    // Adjust font sizes based on width\n                    if (width < 350) {\n                        cardTitle.style.fontSize = '18px';\n                        cardText.style.fontSize = '13px';\n                        card.style.flexDirection = 'column'; // Example: stack content\n                    } else if (width >= 350 && width < 500) {\n                        cardTitle.style.fontSize = '22px';\n                        cardText.style.fontSize = '15px';\n                        card.style.flexDirection = 'column';\n                    } else {\n                        cardTitle.style.fontSize = '26px';\n                        cardText.style.fontSize = '17px';\n                        card.style.flexDirection = 'row'; // Example: side-by-side content\n                    }\n                }\n            }\n        });\n\n        // Start observing the card element\n        resizeObserver.observe(card);\n\n        // Optional: Trigger initial observation manually if needed for immediate display\n        // const initialEntry = [{ target: card, contentRect: card.getBoundingClientRect() }];\n        // resizeObserver.callback(initialEntry, resizeObserver); // This is not how you call it directly.\n        // It is called automatically on first observe, and then when resize occurs.\n\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Responsive Card with ResizeObserver</title>\n    <style>\n        body { font-family: sans-serif; margin: 0; background-color: #f4f4f4; }\n        .resizable-card {\n            width: 80%;\n            max-width: 600px;\n            min-width: 250px;\n            margin: 20px auto;\n            padding: 20px;\n            border: 1px solid #ccc;\n            border-radius: 8px;\n            box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n            background-color: white;\n            display: flex; \n            flex-direction: column; /* Default flex direction */\n            transition: font-size 0.2s, flex-direction 0.2s; /* Smooth transitions */\n        }\n        .card-content {\n            flex-grow: 1;\n        }\n        h2 { margin-top: 0; font-size: 24px; transition: font-size 0.2s; }\n        p { font-size: 16px; line-height: 1.5; transition: font-size 0.2s; }\n        .dimensions-display { margin-top: 15px; padding-top: 10px; border-top: 1px dashed #eee; font-size: 14px; color: #555; }\n        \n        /* Additional class for row layout for demonstration */\n        .resizable-card.row-layout {\n            flex-direction: row;\n            align-items: center;\n        }\n        .resizable-card.row-layout .card-content {\n            margin-right: 15px;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"resizable-card\" class=\"resizable-card\">\n        <div class=\"card-content\">\n            <h2 id=\"card-title\">Dynamic Card Title</h2>\n            <p id=\"card-text\">This content will adjust its font size and potentially layout based on the card's width. Resize your browser window to see the effect.</p>\n        </div>\n        <div class=\"dimensions-display\">\n            Current Width: <span id=\"current-width\"></span>px<br>\n            Current Height: <span id=\"current-height\"></span>px\n        </div>\n    </div>\n\n    <script>\n        const card = document.getElementById('resizable-card');\n        const cardTitle = document.getElementById('card-title');\n        const cardText = document.getElementById('card-text');\n        const currentWidthSpan = document.getElementById('current-width');\n        const currentHeightSpan = document.getElementById('current-height');\n\n        const resizeObserver = new ResizeObserver(entries => {\n            for (let entry of entries) {\n                if (entry.target === card) {\n                    // contentRect provides the size of the element's content box\n                    const { width, height } = entry.contentRect;\n\n                    currentWidthSpan.textContent = Math.round(width);\n                    currentHeightSpan.textContent = Math.round(height);\n\n                    // Adjust font sizes based on width\n                    if (width < 350) {\n                        cardTitle.style.fontSize = '18px';\n                        cardText.style.fontSize = '13px';\n                        card.classList.remove('row-layout');\n                    } else if (width >= 350 && width < 500) {\n                        cardTitle.style.fontSize = '22px';\n                        cardText.style.fontSize = '15px';\n                        card.classList.remove('row-layout');\n                    } else { // width >= 500\n                        cardTitle.style.fontSize = '26px';\n                        cardText.style.fontSize = '17px';\n                        card.classList.add('row-layout'); // Apply row layout for larger width\n                    }\n                }\n            }\n        });\n\n        // Start observing the card element\n        resizeObserver.observe(card);\n\n        // Initial update might be needed if the card is already at a certain size on load\n        // The `observe` call itself triggers the first callback entry, so explicit call is often not necessary.\n        // However, if styles or content load async, you might want to call `resizeObserver.disconnect()` then `observe()` again.\n        // Or, for immediate visual, manually trigger update on load if needed:\n        // window.addEventListener('load', () => {\n        //     const initialRect = card.getBoundingClientRect();\n        //     resizeObserver.disconnect(); // Disconnect to ensure re-observe triggers new callback\n        //     resizeObserver.observe(card); \n        // });\n\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Load the page: The card should display its initial dimensions and font sizes.",
            "Resize the browser window from very wide to very narrow: Observe that the card's width and height reported dynamically update.",
            "Observe font size changes: As the card crosses the `350px` and `500px` width thresholds, the title and paragraph font sizes should change accordingly.",
            "Observe layout changes (if implemented): The `flex-direction` should change as the card crosses the `500px` threshold (e.g., from `column` to `row`).",
            "Test with different initial window sizes: The component should render correctly with appropriate styling based on its initial width.",
            "Ensure transitions are smooth and no visual jank occurs during resizing."
          ],
          "hints": [
            "The `ResizeObserver` callback receives an array of `ResizeObserverEntry` objects. Each entry has a `target` (the observed element) and `contentRect` (a `DOMRectReadOnly` object with `width`, `height`, etc.).",
            "You can modify element styles directly (e.g., `element.style.fontSize = '...'`) or toggle CSS classes based on width thresholds.",
            "Ensure your `resizable-card` has a responsive width (e.g., percentage width) so it actually changes size when the window is resized.",
            "CSS transitions can make the size/layout changes appear smoother."
          ],
          "tags": [
            "resize-observer",
            "responsive-design",
            "dom-manipulation",
            "css",
            "user-interface"
          ],
          "timeEstimate": 75,
          "prerequisites": [
            "theory_resize_observer",
            "css_flexbox",
            "dom_events"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "web_performance",
            "layout_thrashing",
            "css_media_queries"
          ]
        },
        {
          "id": "task_text_file_viewer",
          "title": "Text File Viewer via Drag and Drop",
          "description": "\nDevelop a web page that allows users to drag and drop a `.txt` file into a designated area. Upon dropping, the content of the `.txt` file should be read and displayed in a `textarea` or `pre` element on the page.\n\n**Requirements:**\n1.  **HTML Structure**:\n    *   A `div` element with a clear visual border and text indicating it's a 'Drop Zone'.\n    *   A `textarea` or `pre` element to display the file content.\n    *   A `div` to display error messages (e.g., if a non-text file is dropped).\n2.  **CSS**: Style the drop zone to make it visually distinct and provide feedback (e.g., change border color on `dragover`).\n3.  **JavaScript**:\n    *   **Prevent Default**: Add event listeners for `dragover` and `drop` on the drop zone, and call `event.preventDefault()` inside both handlers.\n    *   **Handle `dragenter`/`dragleave` (Optional)**: Change drop zone styling on `dragenter` and reset on `dragleave`.\n    *   **Handle `drop`**: Access dropped files using `event.dataTransfer.files`.\n    *   **File Validation**: Check if the first dropped file is a plain text file (`file.type === 'text/plain'` or `file.name.endsWith('.txt')`).\n    *   **Read File**: If valid, use `FileReader.readAsText(file)`.\n    *   **Display Content**: On `FileReader.onload`, display `event.target.result` in the content display area.\n    *   **Error Handling**: If a non-text file is dropped, display an appropriate error message in the error display area.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Drag & Drop Text File Viewer</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; background-color: #f4f4f4; }\n        .container { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); background-color: white; }\n        #drop-zone {\n            border: 2px dashed #ccc;\n            padding: 40px;\n            text-align: center;\n            font-size: 1.2em;\n            color: #666;\n            cursor: pointer;\n            transition: border-color 0.2s, background-color 0.2s;\n            margin-bottom: 20px;\n        }\n        #drop-zone.dragover { border-color: #007bff; background-color: #e6f7ff; }\n        #file-content {\n            width: calc(100% - 22px); /* Account for padding/border */\n            min-height: 200px;\n            border: 1px solid #ddd;\n            padding: 10px;\n            font-family: 'Courier New', Courier, monospace;\n            font-size: 14px;\n            resize: vertical;\n            background-color: #fafafa;\n        }\n        #error-message { color: red; margin-top: 10px; font-weight: bold; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Drag & Drop Text File Viewer</h1>\n        <div id=\"drop-zone\">Drag & Drop your .txt file here</div>\n        <textarea id=\"file-content\" placeholder=\"File content will appear here...\"></textarea>\n        <div id=\"error-message\"></div>\n    </div>\n\n    <script>\n        const dropZone = document.getElementById('drop-zone');\n        const fileContentDisplay = document.getElementById('file-content');\n        const errorMessageDisplay = document.getElementById('error-message');\n\n        // Prevent default drag behaviors\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n            dropZone.addEventListener(eventName, preventDefaults, false);\n        });\n\n        function preventDefaults(e) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n\n        // Add/remove dragover class for visual feedback\n        ['dragenter', 'dragover'].forEach(eventName => {\n            dropZone.addEventListener(eventName, () => dropZone.classList.add('dragover'), false);\n        });\n\n        ['dragleave', 'drop'].forEach(eventName => {\n            dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'), false);\n        });\n\n        dropZone.addEventListener('drop', handleDrop, false);\n\n        function handleDrop(e) {\n            const dt = e.dataTransfer;\n            const files = dt.files;\n\n            fileContentDisplay.value = ''; // Clear previous content\n            errorMessageDisplay.textContent = ''; // Clear previous errors\n\n            if (files.length === 0) {\n                errorMessageDisplay.textContent = 'No files dropped.';\n                return;\n            }\n\n            const file = files[0]; // Get the first file\n\n            // Validate file type\n            if (file.type === 'text/plain' || file.name.endsWith('.txt')) {\n                const reader = new FileReader();\n\n                reader.onload = (event) => {\n                    fileContentDisplay.value = event.target.result; // Display content\n                };\n\n                reader.onerror = () => {\n                    errorMessageDisplay.textContent = 'Error reading the file.';\n                    console.error('FileReader error:', reader.error);\n                };\n\n                reader.readAsText(file); // Read as text\n            } else {\n                errorMessageDisplay.textContent = 'Please drop a .txt file. Other file types are not supported.';\n            }\n        }\n\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Drag & Drop Text File Viewer</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; background-color: #f4f4f4; }\n        .container { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #eee; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); background-color: white; }\n        #drop-zone {\n            border: 2px dashed #ccc;\n            padding: 40px;\n            text-align: center;\n            font-size: 1.2em;\n            color: #666;\n            cursor: pointer;\n            transition: border-color 0.2s, background-color 0.2s;\n            margin-bottom: 20px;\n        }\n        #drop-zone.dragover { border-color: #007bff; background-color: #e6f7ff; }\n        #file-content {\n            width: calc(100% - 22px); /* Account for padding/border */\n            min-height: 200px;\n            border: 1px solid #ddd;\n            padding: 10px;\n            font-family: 'Courier New', Courier, monospace;\n            font-size: 14px;\n            resize: vertical;\n            background-color: #fafafa;\n        }\n        #error-message { color: red; margin-top: 10px; font-weight: bold; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Drag & Drop Text File Viewer</h1>\n        <div id=\"drop-zone\">Drag & Drop your .txt file here</div>\n        <textarea id=\"file-content\" placeholder=\"File content will appear here...\"></textarea>\n        <div id=\"error-message\"></div>\n    </div>\n\n    <script>\n        const dropZone = document.getElementById('drop-zone');\n        const fileContentDisplay = document.getElementById('file-content');\n        const errorMessageDisplay = document.getElementById('error-message');\n\n        // Step 1: Prevent default drag behaviors for all necessary events\n        // This is crucial to allow custom drop handling and prevent browser's default file opening\n        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {\n            dropZone.addEventListener(eventName, preventDefaults, false);\n        });\n\n        function preventDefaults(e) {\n            e.preventDefault();\n            e.stopPropagation(); // Stop propagation to prevent parent elements from handling\n        }\n\n        // Step 2: Add/remove 'dragover' class for visual feedback\n        ['dragenter', 'dragover'].forEach(eventName => {\n            dropZone.addEventListener(eventName, () => dropZone.classList.add('dragover'), false);\n        });\n\n        ['dragleave', 'drop'].forEach(eventName => {\n            dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'), false);\n        });\n\n        // Step 3: Handle the 'drop' event\n        dropZone.addEventListener('drop', handleDrop, false);\n\n        function handleDrop(e) {\n            // Clear previous content and errors\n            fileContentDisplay.value = ''; \n            errorMessageDisplay.textContent = ''; \n\n            const files = e.dataTransfer.files; // Get the FileList object\n\n            if (files.length === 0) {\n                errorMessageDisplay.textContent = 'No files dropped.';\n                return;\n            }\n\n            const file = files[0]; // Get the first dropped file\n\n            // Step 4: Validate file type (text/plain or .txt extension)\n            if (file.type === 'text/plain' || file.name.toLowerCase().endsWith('.txt')) {\n                const reader = new FileReader();\n\n                // Step 5: Read file content using FileReader\n                reader.onload = (event) => {\n                    // Step 6: Display the file content\n                    fileContentDisplay.value = event.target.result; \n                };\n\n                reader.onerror = () => {\n                    errorMessageDisplay.textContent = 'Error reading the file. Please try again.';\n                    console.error('FileReader error:', reader.error);\n                };\n\n                reader.readAsText(file); // Read the file as text\n            } else {\n                errorMessageDisplay.textContent = 'Invalid file type. Please drop a .txt file.';\n            }\n        }\n\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Drag and drop a valid `.txt` file: The file's content should appear in the `textarea`.",
            "Drag and drop a file that is NOT a `.txt` file (e.g., an image, a PDF, a `.docx`): An error message should appear in the `error-message` div, stating it's an invalid file type.",
            "Drag and drop multiple files: Only the first file's content should be processed and displayed (as per requirement, though the prompt implies only one). Ensure no errors from handling multiple.",
            "Test `dragover` visual feedback: The drop zone border/background should change when a file is dragged over it and reset when dragged away or dropped.",
            "Attempt to drop no files (e.g., just drag and release without a file): Should gracefully handle and perhaps display 'No files dropped.'",
            "Test an empty `.txt` file: Should display an empty `textarea`."
          ],
          "hints": [
            "Remember to call `e.preventDefault()` in both `dragover` and `drop` events to enable custom handling.",
            "`event.dataTransfer.files` gives you a `FileList` object.",
            "Use `FileReader.readAsText(file)` to get the content as a string, and attach an `onload` event listener to the `FileReader` instance.",
            "The `file.type` property is useful for MIME type validation (e.g., `'text/plain'`). You can also check `file.name.endsWith('.txt')` for robustness.",
            "Clear previous messages/content before processing a new drop."
          ],
          "tags": [
            "drag-and-drop",
            "file-api",
            "dom-events",
            "javascript",
            "user-interface"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "theory_drag_drop_file_reading",
            "dom_manipulation",
            "javascript_events"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "input_file_element",
            "blob_api",
            "event_bubbling"
          ]
        },
        {
          "id": "task_reusable_alert_component",
          "title": "Reusable Alert Component with Custom Elements and Shadow DOM",
          "description": "\nCreate a reusable web component `<my-alert>` using Custom Elements and Shadow DOM. This component should display a message and an optional type (e.g., 'info', 'warning', 'error') which affects its styling. It should also have a close button.\n\n**Requirements:**\n1.  **Custom Element Definition**:\n    *   Define a JavaScript class `MyAlert` that extends `HTMLElement`.\n    *   Register the element as `<my-alert>` using `customElements.define()`.\n2.  **Shadow DOM Encapsulation**:\n    *   Attach a Shadow DOM (`mode: 'open'`) in the component's constructor.\n    *   Place all internal HTML structure and CSS styles within the Shadow DOM.\n3.  **Attributes and Content**:\n    *   The alert should accept a `type` attribute (defaulting to 'info') and display its content from a `slot` element (allowing light DOM content).\n    *   Implement `static get observedAttributes()` to observe changes to the `type` attribute.\n    *   Implement `attributeChangedCallback()` to react to `type` changes and update styling.\n4.  **Styling**:\n    *   Provide default styles for the alert.\n    *   Change background color, border color, or icon based on the `type` attribute (e.g., blue for 'info', yellow for 'warning', red for 'error'). Use `:host` and `:host-context()` (or simpler class-based styling).\n5.  **Close Button**:\n    *   Include a close button (`×` icon or text) inside the Shadow DOM.\n    *   When clicked, the button should remove the `<my-alert>` element from the DOM (e.g., `this.remove()`).\n6.  **Example Usage**:\n    *   Demonstrate usage of `<my-alert>` with different `type` attributes and content in the main HTML.\n",
          "difficulty": "hard",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Custom Alert Component</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; background-color: #f0f0f0; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }\n        my-alert { margin-bottom: 15px; display: block; } /* Essential for custom elements */\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Custom Alert Component Demo</h1>\n\n        <my-alert type=\"info\">\n            This is an **info** alert! It provides general information.\n        </my-alert>\n\n        <my-alert type=\"warning\">\n            <strong>Warning!</strong> Something might be wrong, please check.\n        </my-alert>\n\n        <my-alert type=\"error\">\n            Oh no! An <span>error</span> occurred. Please try again.\n        </my-alert>\n\n        <my-alert>\n            This is a default alert (info type assumed).\n        </my-alert>\n\n    </div>\n\n    <script>\n        // Define the Custom Element class\n        class MyAlert extends HTMLElement {\n            static get observedAttributes() {\n                return ['type']; // Observe 'type' attribute changes\n            }\n\n            constructor() {\n                super();\n                // Attach Shadow DOM\n                const shadowRoot = this.attachShadow({ mode: 'open' });\n\n                // Internal HTML for the component\n                shadowRoot.innerHTML = `\n                    <style>\n                        /* Component-specific styles */\n                        :host {\n                            display: flex;\n                            align-items: center;\n                            padding: 10px 15px;\n                            border-radius: 5px;\n                            font-family: sans-serif;\n                            box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n                        }\n                        .alert-content {\n                            flex-grow: 1;\n                            margin-right: 10px;\n                        }\n                        .close-btn {\n                            background: none;\n                            border: none;\n                            font-size: 1.2em;\n                            cursor: pointer;\n                            line-height: 1;\n                            padding: 0;\n                            color: inherit; /* Inherit color from host for consistency */\n                        }\n\n                        /* Type-specific styles */\n                        :host([type=\"info\"]) {\n                            background-color: #e7f3fe;\n                            border-left: 5px solid #2196F3;\n                            color: #2196F3;\n                        }\n                        :host([type=\"warning\"]) {\n                            background-color: #fff3e0;\n                            border-left: 5px solid #ff9800;\n                            color: #ff9800;\n                        }\n                        :host([type=\"error\"]) {\n                            background-color: #ffe0e0;\n                            border-left: 5px solid #f44336;\n                            color: #f44336;\n                        }\n                        \n                        /* Slot styling */\n                        ::slotted(span) { /* Example of styling slotted content */\n                            font-weight: bold;\n                        }\n                    </style>\n                    <div class=\"alert-content\">\n                        <slot></slot>\n                    </div>\n                    <button class=\"close-btn\">×</button>\n                `;\n\n                // Add event listener for the close button\n                this.shadowRoot.querySelector('.close-btn').addEventListener('click', () => {\n                    this.remove(); // Remove the component from the DOM\n                });\n\n                // Initial attribute application\n                this._updateType(this.getAttribute('type') || 'info');\n            }\n\n            attributeChangedCallback(name, oldValue, newValue) {\n                if (name === 'type' && oldValue !== newValue) {\n                    this._updateType(newValue || 'info');\n                }\n            }\n\n            _updateType(newType) {\n                // This function simply ensures the :host styles are applied correctly\n                // by re-setting the attribute if it was null, or just letting CSS handle it.\n                // The :host selector in CSS handles the actual styling based on attribute presence.\n                if (!this.hasAttribute('type') && newType === 'info') {\n                    // If no type is specified, and default is 'info', do nothing specific\n                    // as the CSS :host rule for info will apply via default type.\n                } else {\n                    this.setAttribute('type', newType);\n                }\n            }\n\n            // Optional: connectedCallback for when the element is added to DOM\n            connectedCallback() {\n                 console.log('MyAlert connected to DOM:', this.getAttribute('type'));\n                 // Ensure default type is set if none provided\n                 if (!this.hasAttribute('type')) {\n                    this.setAttribute('type', 'info');\n                 }\n            }\n\n             // Optional: disconnectedCallback for when the element is removed from DOM\n            disconnectedCallback() {\n                console.log('MyAlert disconnected from DOM.');\n            }\n        }\n\n        // Register the custom element\n        customElements.define('my-alert', MyAlert);\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Custom Alert Component</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; background-color: #f0f0f0; }\n        .container { max-width: 600px; margin: 0 auto; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }\n        my-alert { margin-bottom: 15px; display: block; } /* Essential for custom elements to render correctly */\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>Custom Alert Component Demo</h1>\n\n        <my-alert type=\"info\">\n            This is an **info** alert! It provides general information.\n        </my-alert>\n\n        <my-alert type=\"warning\">\n            <strong>Warning!</strong> Something might be wrong, please check.\n        </my-alert>\n\n        <my-alert type=\"error\">\n            Oh no! An <span>error</span> occurred. Please try again.\n        </my-alert>\n\n        <my-alert>\n            This is a default alert (info type assumed).\n        </my-alert>\n\n        <button id=\"add-alert-button\">Add New Info Alert</button>\n\n    </div>\n\n    <script>\n        // Define the Custom Element class\n        class MyAlert extends HTMLElement {\n            // 1. Observe 'type' attribute for changes\n            static get observedAttributes() {\n                return ['type']; \n            }\n\n            constructor() {\n                super(); // Always call super() first in the constructor\n                // 2. Attach Shadow DOM in 'open' mode for encapsulation\n                const shadowRoot = this.attachShadow({ mode: 'open' });\n\n                // Internal HTML and CSS for the component\n                shadowRoot.innerHTML = `\n                    <style>\n                        /* Component-specific styles */\n                        :host {\n                            display: flex; /* Ensures flex layout for content and close button */\n                            align-items: center;\n                            padding: 10px 15px;\n                            border-radius: 5px;\n                            font-family: sans-serif;\n                            box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n                            transition: background-color 0.3s, border-left-color 0.3s, color 0.3s;\n                        }\n                        .alert-content {\n                            flex-grow: 1; /* Content takes up available space */\n                            margin-right: 10px;\n                            line-height: 1.4;\n                        }\n                        .close-btn {\n                            background: none;\n                            border: none;\n                            font-size: 1.5em; /* Larger 'x' */\n                            cursor: pointer;\n                            line-height: 1;\n                            padding: 0;\n                            color: inherit; /* Inherit text color for consistency */\n                            margin-left: auto; /* Push to right */\n                            opacity: 0.7;\n                            transition: opacity 0.2s;\n                        }\n                        .close-btn:hover {\n                            opacity: 1;\n                        }\n\n                        /* Type-specific styles using :host-context() or :host() based on attribute */\n                        :host([type=\"info\"]) {\n                            background-color: #e7f3fe;\n                            border-left: 5px solid #2196F3;\n                            color: #2196F3;\n                        }\n                        :host([type=\"warning\"]) {\n                            background-color: #fff3e0;\n                            border-left: 5px solid #ff9800;\n                            color: #ff9800;\n                        }\n                        :host([type=\"error\"]) {\n                            background-color: #ffe0e0;\n                            border-left: 5px solid #f44336;\n                            color: #f44336;\n                        }\n                        \n                        /* Styling for slotted content, demonstrating ::slotted() */\n                        ::slotted(strong) {\n                            font-weight: bold;\n                            color: inherit; /* Ensure strong text color matches alert color */\n                        }\n                        ::slotted(span) {\n                            font-style: italic;\n                        }\n                    </style>\n                    <div class=\"alert-content\">\n                        <slot></slot> <!-- Slot for light DOM content -->\n                    </div>\n                    <button class=\"close-btn\">×</button>\n                `;\n\n                // Add event listener for the close button\n                this.shadowRoot.querySelector('.close-btn').addEventListener('click', () => {\n                    this.remove(); // Remove the component from the DOM\n                    console.log('Alert removed.');\n                });\n            }\n\n            // Invoked when the custom element is added to the document's DOM\n            connectedCallback() {\n                 console.log('MyAlert connected to DOM:', this.getAttribute('type') || 'default');\n                 // Set default 'type' if not provided\n                 if (!this.hasAttribute('type')) {\n                    this.setAttribute('type', 'info');\n                 }\n                 // Apply initial styling based on attributes, if needed (CSS :host handles this typically)\n                 this._updateStylesBasedOnType();\n            }\n\n            // Invoked when the custom element is disconnected from the document's DOM\n            disconnectedCallback() {\n                console.log('MyAlert disconnected from DOM.');\n            }\n\n            // Invoked when one of the observed attributes is added, removed, or changed\n            attributeChangedCallback(name, oldValue, newValue) {\n                if (name === 'type' && oldValue !== newValue) {\n                    console.log(`Attribute 'type' changed from ${oldValue} to ${newValue}.`);\n                    this._updateStylesBasedOnType(); // Re-apply styles if type changes\n                }\n            }\n\n            // Helper to ensure styles are updated (CSS :host takes care of most of it,\n            // but this method can be extended for more complex JS-driven style logic if needed)\n            _updateStylesBasedOnType() {\n                // In this setup, the CSS `:host([type=\"...\"])` rules handle the styling automatically\n                // when the 'type' attribute is set or changed. No explicit JS style manipulation needed here.\n                // This function serves as a placeholder for more complex attribute-based logic.\n                const currentType = this.getAttribute('type');\n                // For instance, if you had different icons per type:\n                // const iconElement = this.shadowRoot.querySelector('.icon');\n                // if (iconElement) { iconElement.textContent = getIconForType(currentType); }\n            }\n        }\n\n        // Register the custom element with the browser\n        customElements.define('my-alert', MyAlert);\n\n        // Example of dynamically adding an alert\n        document.getElementById('add-alert-button').addEventListener('click', () => {\n            const newAlert = document.createElement('my-alert');\n            newAlert.setAttribute('type', 'info');\n            newAlert.textContent = `Dynamically added alert! (${new Date().toLocaleTimeString()})`;\n            document.querySelector('.container').appendChild(newAlert);\n        });\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Load the page: All four alerts should render with correct default (info) or specified `type` styling.",
            "Click the close button on each alert: The alert should disappear from the page.",
            "Inspect elements in Dev Tools: Verify that `<my-alert>` has a `#shadow-root` and its internal structure/styles are encapsulated.",
            "Change the `type` attribute of a rendered alert using Dev Tools (e.g., `document.querySelector('my-alert[type=\"info\"]').setAttribute('type', 'error')`): The alert's styling should dynamically update based on the new type.",
            "Add a new alert using the 'Add New Info Alert' button: The new alert should appear with default info styling and be closable.",
            "Verify `::slotted` content is styled correctly (e.g., 'strong' text in warning alert)."
          ],
          "hints": [
            "Start by creating the `MyAlert` class extending `HTMLElement` and calling `super()` in the constructor.",
            "Use `this.attachShadow({ mode: 'open' })` to create the Shadow DOM.",
            "The `<slot></slot>` element inside the Shadow DOM is crucial for rendering the 'light DOM' content placed inside your custom element (e.g., `This is an alert.`).",
            "Use `:host` CSS pseudo-class in your Shadow DOM stylesheet to style the custom element itself.",
            "Use `:host([type=\"info\"])` to apply type-specific styles based on the `type` attribute.",
            "Remember to define `static get observedAttributes()` to make `attributeChangedCallback` work.",
            "The close button's click handler should call `this.remove()` to remove the component."
          ],
          "tags": [
            "web-components",
            "custom-elements",
            "shadow-dom",
            "encapsulation",
            "reusability",
            "frontend-architecture"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_custom_elements",
            "theory_shadow_dom",
            "javascript_classes",
            "css_selectors"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "component_design",
            "design_systems",
            "html_slots"
          ]
        }
      ]
    }
  },
  {
    "id": "d232b8b8-83f4-4108-9e64-d2b27dc41e25",
    "startLine": 17000,
    "endLine": 17099,
    "processedDate": "2025-06-17T15:45:54.894Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_html_whitespace_minification",
          "title": "HTML Whitespace Minification and Page Load Performance",
          "content": "Minification is the process of removing unnecessary characters from code without changing its functionality. For HTML, this primarily involves eliminating extra whitespace characters (spaces, tabs, newlines) and comments. While modern web browsers are robust in parsing HTML and will collapse multiple spaces into a single space for display, the presence of these extra characters directly impacts the file size of the HTML document.\n\n### Impact on Performance\n1.  **Faster Download Time**: A smaller file size means fewer bytes need to be transferred over the network. This directly reduces the time it takes for the browser to download the HTML document, which is a critical factor for initial page loading metrics like Time to First Byte (TTFB) and overall page load time.\n2.  **Reduced Bandwidth Consumption**: Smaller file sizes conserve network bandwidth for users, which is particularly beneficial for those on limited data plans or slower connections. For server operators, it translates to reduced data transfer costs.\n\n### Browser Parsing vs. Network Transfer\nIt's important to distinguish between how browsers *parse* HTML and how the HTML file is *transferred*. Browsers are indeed efficient at parsing, and extra whitespace might not significantly affect the *rendering* phase once the document is fully downloaded and the DOM is constructed. However, the time spent *downloading* the file, including all its characters (visible or not), is a separate and often more critical bottleneck for initial page load performance. Therefore, minification is a standard and effective optimization practice.\n\n### Common Misconception\nThe original statement in the markdown content, \"removing extra whitespace characters (and newline characters) in HTML not affect the final page loading performance\" is generally incorrect. While the visual rendering might appear the same, the underlying network transfer performance is indeed affected positively by minification. The perceived negligible difference might only apply to extremely small HTML documents where network latency overshadows the download time difference.",
          "examples": [
            {
              "id": "example_html_whitespace_1",
              "title": "Unminified vs. Minified HTML",
              "code": "<!-- Unminified HTML -->\n<!DOCTYPE html>\n<html>\n<head>\n    <title>   My Page   </title>\n</head>\n<body>\n    <p>\n        Hello     World\n    </p>\n    <!-- This is a comment -->\n    <div>\n\n        Another section with   lots of space.\n\n    </div>\n</body>\n</html>\n\n<!-- Minified HTML -->\n<!DOCTYPE html><html><head><title>My Page</title></head><body><p>Hello World</p><div>Another section with lots of space.</div></body></html>",
              "explanation": "This example clearly shows the difference in character count between unminified and minified HTML. The minified version eliminates all unnecessary spaces, tabs, newlines, and comments, resulting in a significantly smaller file size. This reduction directly leads to faster download times over the network, improving initial page load performance.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_html_whitespace_1",
            "question_html_whitespace_2",
            "question_html_whitespace_3",
            "question_html_whitespace_4"
          ],
          "relatedTasks": [
            "task_html_minify_calculator"
          ],
          "tags": [
            "HTML",
            "Performance Optimization",
            "Minification",
            "Web Performance",
            "Frontend Optimization"
          ],
          "technology": "HTML",
          "prerequisites": [
            "Networking Basics",
            "HTTP Fundamentals"
          ],
          "complexity": 5,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "requiredFor": [
            "Web Performance Auditing",
            "Build Process Optimization"
          ]
        },
        {
          "id": "theory_canvas_rendering_context",
          "title": "Canvas Rendering Contexts",
          "content": "A canvas rendering context is an object that provides methods and properties for drawing and manipulating graphics on an HTML `<canvas>` element. You obtain this context by calling the `getContext()` method on a canvas element, specifying the type of context you want.\n\n### Types of Canvas Contexts\n\n1.  **`'2d'` (CanvasRenderingContext2D)**:\n    *   **Purpose**: This is the most widely used context for drawing two-dimensional shapes, paths, text, images, and animations. It provides a rich API for basic drawing operations.\n    *   **Usage**: Ideal for charts, graphs, simple games, and custom UI elements.\n    *   **Example**: Drawing rectangles, circles, lines, filling areas with colors or gradients, adding text.\n\n2.  **`'webgl'` and `'webgl2'` (WebGLRenderingContext, WebGL2RenderingContext)**:\n    *   **Purpose**: These contexts are used for rendering hardware-accelerated 3D (and complex 2D) graphics. They are based on OpenGL ES, allowing direct interaction with the GPU for high-performance rendering.\n    *   **Usage**: Complex 3D visualizations, advanced games, real-time data visualization, virtual reality applications.\n    *   **Differences**: WebGL2 is a newer version based on OpenGL ES 3.0, offering more advanced features, improved performance, and better access to modern GPU capabilities compared to WebGL1 (based on OpenGL ES 2.0).\n\n3.  **`'bitmaprenderer'` (ImageBitmapRenderingContext)**:\n    *   **Purpose**: This context is designed for efficient, low-overhead transfer and display of `ImageBitmap` objects onto the canvas. It's particularly useful when you need to quickly render pre-processed image data, often from an `OffscreenCanvas` or image decoding operations without traditional drawing commands.\n    *   **Usage**: High-performance image processing pipelines, displaying frames from video streams, transferring images between web workers and the main thread.\n\n4.  **`'webgpu'` (GPUCanvasContext - Experimental/Future)**:\n    *   **Purpose**: WebGPU is a modern web API (still experimental and under development) that aims to be the successor to WebGL. It provides a more explicit and low-level API for interacting with the GPU, closely mapping to modern native graphics APIs like Vulkan, Metal, and Direct3D 12.\n    *   **Benefits**: Offers better performance, more control over the rendering pipeline, and access to more powerful GPU features compared to WebGL, making it suitable for even more demanding graphics applications.\n    *   **Usage**: Future-proof 3D applications, compute shaders, machine learning inference on the GPU.\n\nEach context type provides a specialized set of APIs tailored to its specific rendering domain.",
          "examples": [
            {
              "id": "example_canvas_context_2d",
              "title": "Basic 2D Canvas Drawing",
              "code": "const canvas = document.getElementById('myCanvas');\nconst ctx2d = canvas.getContext('2d');\n\nif (ctx2d) {\n  ctx2d.fillStyle = 'red';\n  ctx2d.fillRect(10, 10, 100, 50); // Draws a red rectangle\n\n  ctx2d.strokeStyle = 'blue';\n  ctx2d.lineWidth = 3;\n  ctx2d.strokeRect(30, 70, 80, 40); // Draws a blue stroked rectangle\n\n  ctx2d.font = '20px Arial';\n  ctx2d.fillStyle = 'black';\n  ctx2d.fillText('Hello Canvas!', 10, 150); // Draws text\n} else {\n  console.error('2D context not supported');\n}",
              "explanation": "This example demonstrates how to obtain a '2d' rendering context and use its basic methods to draw a filled rectangle, a stroked rectangle, and text. It shows the typical workflow for 2D graphics programming on the canvas.",
              "language": "javascript"
            },
            {
              "id": "example_canvas_context_webgl",
              "title": "Initializing WebGL Context",
              "code": "const canvas = document.getElementById('myCanvas');\nconst gl = canvas.getContext('webgl');\n\nif (gl) {\n  gl.clearColor(0.0, 0.0, 0.0, 1.0); // Set clear color to black\n  gl.clear(gl.COLOR_BUFFER_BIT); // Clear the canvas\n  console.log('WebGL context initialized successfully.');\n  // Further WebGL drawing logic would go here, involving shaders, buffers, etc.\n} else {\n  console.error('WebGL context not supported or failed to initialize.');\n  alert('Your browser does not support WebGL!');\n}",
              "explanation": "This example shows the initialization of a 'webgl' context. Unlike '2d', WebGL requires more complex setup involving shaders and buffers for drawing, but this snippet demonstrates the initial step of getting the context and clearing the canvas.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_canvas_context_1",
            "question_canvas_context_2",
            "question_canvas_context_3",
            "question_canvas_context_4",
            "question_canvas_context_5",
            "question_canvas_context_6"
          ],
          "relatedTasks": [
            "task_draw_shapes_2d_canvas",
            "task_webgl_context_check"
          ],
          "tags": [
            "HTML Canvas",
            "Graphics",
            "2D Graphics",
            "3D Graphics",
            "WebGL",
            "WebGPU",
            "Frontend API"
          ],
          "technology": "HTML, JavaScript",
          "prerequisites": [
            "DOM Manipulation",
            "Basic JavaScript"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "requiredFor": [
            "Interactive Graphics Development",
            "Game Development (Web)",
            "Data Visualization"
          ]
        },
        {
          "id": "theory_frontend_architecture",
          "title": "Front-End Application Architecture and Structure",
          "content": "A well-structured front-end application is crucial for maintainability, scalability, and collaboration, especially as the application grows in complexity. The goal is to separate concerns effectively, making different parts of the codebase independent and easy to understand, test, and modify.\n\n### Core Structure Principles\n1.  **Feature-based Organization (Domains/Modules)**: Instead of organizing by type (e.g., all components in one folder, all services in another), group files by feature. Each feature (e.g., 'user', 'product', 'cart') gets its own directory containing all related components, state, services, and logic. This enhances discoverability and cohesion.\n2.  **Clear Separation of Concerns**: Divide the application into distinct layers responsible for specific functionalities:\n    *   **UI Components**: Responsible solely for rendering and user interaction.\n    *   **Business Logic**: Contains the core rules and operations of the application.\n    *   **Data Access**: Handles communication with APIs and data persistence.\n3.  **Consistent Naming Conventions and Folder Structure**: Adhering to a standardized naming and directory structure across the project makes it predictable and easier for new team members to onboard and navigate.\n\n### Key Layers in a Front-End Application\nWhile naming conventions can vary, a common architectural pattern includes:\n1.  **UI Layer (Presentation Layer)**:\n    *   **Contents**: Reusable UI components (buttons, inputs, cards), page-level components (layouts, views), styling.\n    *   **Responsibility**: How the application looks and how users interact with it. Should be as 'dumb' as possible, focusing on presentation.\n    *   **Example**: `components/`, `pages/`, `assets/styles/`\n2.  **Application Layer (Service Layer / State Management)**:\n    *   **Contents**: Global state management (e.g., Redux stores, React Contexts, Zustand, Vuex), application-specific services that orchestrate operations between the UI and domain layers.\n    *   **Responsibility**: Manages application flow, orchestrates domain logic, handles shared state, and coordinates data fetching and updates.\n    *   **Example**: `store/`, `contexts/`, `hooks/` (for custom hooks encapsulating app logic)\n3.  **Domain Layer (Business Logic Layer)**:\n    *   **Contents**: Core business logic, data models, validation rules, utility functions specific to the domain.\n    *   **Responsibility**: Encapsulates the 'what' and 'how' of the business rules, independent of UI or data persistence details.\n    *   **Example**: `models/`, `utils/`, `domain/`, `lib/`\n4.  **Infrastructure Layer (Data Access Layer)**:\n    *   **Contents**: API clients, services for data fetching (e.g., `axios` instances, `fetch` wrappers), authentication tokens handling, local storage interactions.\n    *   **Responsibility**: Handles external integrations, data persistence, and communication with backend services.\n    *   **Example**: `api/`, `services/`, `config/`\n\n### Cross-Cutting Concerns\nThese are functionalities that are relevant across multiple layers or features and need to be handled consistently:\n*   **Authentication/Authorization**: User login, session management, access control.\n*   **Error Handling**: Centralized error reporting, displaying user-friendly messages.\n*   **Logging**: Tracking application events and user actions.\n*   **Performance Monitoring**: Metrics collection for performance analysis.\n*   **Internationalization (i18n)**: Supporting multiple languages.\n\n### Best Practices\n*   **Atomic Design for Components**: A methodology for crafting design systems. It breaks UI into atoms (basic HTML tags), molecules (groups of atoms), organisms (groups of molecules), templates (page-level objects), and pages (instances of templates). This promotes reusability and consistency.\n*   **Container/Presentational Component Pattern**: Separates components into 'presentational' (dumb, concerned with how things look) and 'container' (smart, concerned with how things work, data fetching, logic). Though less strictly adhered to with Hooks, the underlying principle of separating concerns remains vital.\n*   **Code Splitting and Lazy Loading**: Optimizes initial load time by deferring the loading of non-critical JavaScript, CSS, and other assets until they are needed.\n*   **Testing Strategy**: Implement a comprehensive testing strategy (unit, integration, end-to-end) across all layers.\n*   **Dependency Injection/Inversion of Control**: For managing dependencies and increasing testability.\n\nAdopting these principles leads to a more robust, scalable, and maintainable front-end application.",
          "examples": [
            {
              "id": "example_frontend_structure_1",
              "title": "Feature-Based Directory Structure (Conceptual)",
              "code": "src/\n├── features/\n│   ├── auth/\n│   │   ├── components/\n│   │   │   ├── LoginForm.tsx\n│   │   │   └── AuthProvider.tsx\n│   │   ├── hooks/\n│   │   │   └── useAuth.ts\n│   │   ├── services/\n│   │   │   └── authApi.ts\n│   │   └── pages/\n│   │       └── LoginPage.tsx\n│   ├── products/\n│   │   ├── components/\n│   │   │   ├── ProductCard.tsx\n│   │   │   └── ProductList.tsx\n│   │   ├── hooks/\n│   │   │   └── useProducts.ts\n│   │   ├── services/\n│   │   │   └── productsApi.ts\n│   │   └── pages/\n│   │       └── ProductsPage.tsx\n├── components/ (shared UI components)\n│   ├── Button.tsx\n│   └── Modal.tsx\n├── hooks/ (shared application hooks)\n│   └── useDebounce.ts\n├── services/ (shared infrastructure services)\n│   └── apiClient.ts\n├── styles/\n│   ├── global.css\n│   └── variables.css\n├── utils/\n│   └── validators.ts\n├── App.tsx\n├── index.tsx",
              "explanation": "This conceptual directory structure illustrates a feature-based organization. Each major feature (e.g., `auth`, `products`) has its own encapsulated folder containing all related components, hooks (application logic), services (data access), and pages. Shared resources like generic UI components, global styles, or common utilities reside at the root level, promoting modularity and easier navigation.",
              "language": "shell"
            }
          ],
          "relatedQuestions": [
            "question_frontend_architecture_1",
            "question_frontend_architecture_2",
            "question_frontend_architecture_3",
            "question_frontend_architecture_4",
            "question_frontend_architecture_5",
            "question_frontend_architecture_6"
          ],
          "relatedTasks": [
            "task_refactor_ecommerce_app"
          ],
          "tags": [
            "Frontend Architecture",
            "Software Design",
            "Scalability",
            "Maintainability",
            "Modularity",
            "Design Patterns",
            "React",
            "Vue",
            "Angular"
          ],
          "technology": "General Frontend",
          "prerequisites": [
            "JavaScript Fundamentals",
            "Component-Based UI"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "Lead Frontend Developer",
            "Architecting Large-Scale Applications"
          ]
        },
        {
          "id": "theory_image_lazy_loading",
          "title": "Image Lazy Loading for Performance Optimization",
          "content": "Lazy loading images is a performance optimization technique where images are loaded only when they are needed, typically when they are about to enter or are within the user's viewport. This contrasts with eager loading, where all images on a page are downloaded immediately upon page load. The primary benefits of lazy loading are:\n\n1.  **Faster Initial Page Load**: Reduces the number of requests and the amount of data transferred on initial page load, leading to quicker Time to Interactive (TTI) and overall page load times.\n2.  **Reduced Bandwidth Consumption**: Saves data for users, especially on mobile devices or limited data plans, by only loading images that are actually seen.\n3.  **Improved Core Web Vitals**: Positively impacts metrics like Largest Contentful Paint (LCP) by prioritizing visible content and deferring off-screen images.\n\n### Implementation Techniques\n\n1.  **Native Browser Lazy Loading (`loading='lazy'`)**:\n    *   **Description**: Modern browsers (Chrome, Firefox, Edge, Safari since iOS 15/macOS Monterey) provide a native `loading` attribute for `<img>` and `<iframe>` elements.\n    *   **Usage**: Set `loading='lazy'` on the `<img>` tag. The browser automatically handles the intersection observation and loading logic.\n    *   **Pros**: Simplest implementation, no JavaScript required, efficient, handled directly by the browser.\n    *   **Cons**: Not supported by all older browsers (though widely supported now).\n\n    ```html\n    <img src=\"placeholder.jpg\" loading=\"lazy\" data-src=\"actual-image.jpg\" alt=\"Description\">\n    ```\n    *Note: While `loading=\"lazy\"` handles the lazy loading behavior, you might still use a `placeholder.jpg` for initial display and `data-src` for the actual image path, which would then be swapped in by JavaScript if `loading=\"lazy\"` isn't fully robust for edge cases or specific fallback requirements.* However, the `src` attribute itself should typically point to the actual image for native lazy loading, or `data-src` if you're managing the `src` swap yourself with JS for older browser compatibility.\n\n2.  **Intersection Observer API**:\n    *   **Description**: A JavaScript API that provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with the top-level document's viewport.\n    *   **Usage**: Create an `IntersectionObserver` instance, provide a callback function, and observe target elements. When an element intersects (enters the viewport), the callback fires, and you can then update its `src` attribute.\n    *   **Pros**: Highly performant as it avoids polling, flexible, good browser support (polyfills available for older browsers).\n    *   **Cons**: Requires JavaScript, more complex to implement than native lazy loading.\n\n    ```javascript\n    document.addEventListener(\"DOMContentLoaded\", function() {\n      const lazyImages = document.querySelectorAll(\"img[data-src]\");\n      \n      const imageObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            const img = entry.target; // The <img> element being observed\n            img.src = img.dataset.src; // Set the actual image source\n            img.removeAttribute(\"data-src\"); // Remove data-src to prevent re-processing\n            observer.unobserve(img); // Stop observing once loaded\n          }\n        });\n      }, {\n        rootMargin: '0px 0px 50px 0px' // Load images 50px before they enter viewport\n      });\n      \n      lazyImages.forEach(img => imageObserver.observe(img));\n    });\n    ```\n\n3.  **React-Specific Implementation (using Hooks)**:\n    *   **Description**: In component-based frameworks like React, you can encapsulate lazy loading logic within a reusable component, often using `useState`, `useRef`, and `useEffect` hooks along with `IntersectionObserver`.\n    *   **Usage**: Create a `LazyImage` component that conditionally renders the actual image once it's in view.\n    *   **Pros**: Reusable, fits into component-based architecture, allows for placeholder states and error handling.\n    *   **Cons**: Requires React, adds component overhead.\n\n    ```typescript\n    import { useEffect, useRef, useState } from \"react\";\n\n    interface LazyImageProps {\n      src: string;\n      alt: string;\n      placeholder?: string;\n    }\n\n    function LazyImage({ src, alt, placeholder }: LazyImageProps) {\n      const [isLoaded, setIsLoaded] = useState(false);\n      const [imgSrc, setImgSrc] = useState(placeholder || ''); // Start with placeholder or empty\n      const imgRef = useRef<HTMLImageElement>(null);\n      \n      useEffect(() => {\n        if (!imgRef.current) return;\n\n        const observer = new IntersectionObserver(\n          (entries) => {\n            entries.forEach((entry) => {\n              if (entry.isIntersecting && !isLoaded) {\n                setImgSrc(src); // Set actual image source\n                setIsLoaded(true);\n                observer.unobserve(entry.target); // Stop observing\n              }\n            });\n          },\n          { rootMargin: '0px 0px 100px 0px' } // Load 100px before entering viewport\n        );\n\n        observer.observe(imgRef.current);\n\n        return () => {\n          if (imgRef.current) {\n            observer.unobserve(imgRef.current);\n          }\n        };\n      }, [src, isLoaded]); // Re-run effect if src changes or image becomes loaded\n\n      const handleImageLoad = () => {\n        setIsLoaded(true);\n      };\n\n      return (\n        <img\n          ref={imgRef}\n          src={imgSrc}\n          alt={alt}\n          onLoad={handleImageLoad}\n          style={{ opacity: isLoaded ? 1 : 0, transition: 'opacity 0.3s ease-in-out' }}\n        />\n      );\n    }\n\n    // Example usage:\n    // <LazyImage src=\"actual-high-res.jpg\" alt=\"A beautiful landscape\" placeholder=\"low-res-placeholder.jpg\" />\n    ```\n    *Note: The provided markdown snippet for React was incomplete. I've completed it to demonstrate a functional lazy loading component.*",
          "examples": [
            {
              "id": "example_lazy_loading_native",
              "title": "Native Lazy Loading Example",
              "code": "<!-- Simple native lazy loading -->\n<img src=\"https://via.placeholder.com/600x400/FF0000/FFFFFF?text=Placeholder\" \n     data-actual-src=\"https://source.unsplash.com/random/600x400?nature\" \n     alt=\"Random Nature Image\" \n     loading=\"lazy\" \n     style=\"width: 100%; height: auto; display: block; margin-bottom: 20px;\">\n\n<!-- Another lazy image -->\n<img src=\"https://via.placeholder.com/600x400/0000FF/FFFFFF?text=Placeholder\" \n     data-actual-src=\"https://source.unsplash.com/random/600x400?city\" \n     alt=\"Random City Image\" \n     loading=\"lazy\" \n     style=\"width: 100%; height: auto; display: block; margin-bottom: 20px;\">",
              "explanation": "This example shows the `loading=\"lazy\"` attribute in action. Modern browsers will automatically defer loading these images until they are close to the viewport. The `src` here is a placeholder, and `data-actual-src` is a common pattern for JavaScript fallbacks if native support isn't present or if more control is desired over the source swap. For pure native lazy loading, the `src` attribute itself would typically hold the high-res image and the browser would manage its loading.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_lazy_loading_1",
            "question_lazy_loading_2",
            "question_lazy_loading_3",
            "question_lazy_loading_4",
            "question_lazy_loading_5"
          ],
          "relatedTasks": [
            "task_implement_lazy_loading_observer"
          ],
          "tags": [
            "Performance Optimization",
            "Lazy Loading",
            "Images",
            "Intersection Observer API",
            "React",
            "Frontend Performance",
            "Core Web Vitals"
          ],
          "technology": "HTML, JavaScript, React",
          "prerequisites": [
            "DOM Manipulation",
            "JavaScript Event Listeners",
            "Asynchronous JavaScript"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "Web Performance Optimization",
            "Building High-Performance Websites"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_html_whitespace_1",
          "topic": "HTML Minification Performance",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary benefit of minifying HTML files?",
          "answer": "Reduced file size, leading to faster download times.",
          "analysisPoints": [
            "Minification removes unnecessary characters like whitespace and comments.",
            "Smaller file size directly impacts network transfer time.",
            "Faster download time contributes to better page loading performance metrics like TTFB."
          ],
          "keyConcepts": [
            "HTML Minification",
            "File Size",
            "Download Time",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Ability to recall core benefit",
            "Understanding of basic web performance concepts"
          ],
          "example": "",
          "tags": [
            "HTML",
            "Performance",
            "Minification",
            "Basics"
          ],
          "prerequisites": [
            "HTML Fundamentals"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_html_whitespace_2",
          "topic": "HTML Whitespace Impact",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following statements is **most accurate** regarding the effect of extra whitespace characters in HTML on final page loading performance?",
          "answer": "Extra whitespace increases file size, leading to slower download times.",
          "options": [
            "Extra whitespace increases file size, leading to slower download times.",
            "Extra whitespace has no impact on performance because browsers ignore it during parsing.",
            "Extra whitespace improves readability for developers but degrades rendering speed significantly.",
            "Extra whitespace causes layout shifts and poor user experience, but doesn't affect download time."
          ],
          "analysisPoints": [
            "The correct answer highlights the impact on file size and download time, which is the primary performance concern with unminified HTML.",
            "Browsers do ignore extra whitespace during *parsing for rendering*, but they still have to *download* it, which takes time and bandwidth.",
            "Readability is a benefit of unminified code, but performance is the inverse.",
            "Layout shifts are usually due to dynamic content or image loading issues, not static whitespace."
          ],
          "keyConcepts": [
            "HTML Minification",
            "Network Performance",
            "File Size",
            "Browser Parsing"
          ],
          "evaluationCriteria": [
            "Understanding the difference between parsing/rendering and network transfer.",
            "Ability to identify the core performance bottleneck related to whitespace."
          ],
          "example": "The key distinction is that while browsers are good at collapsing whitespace for display, the actual bytes of whitespace still need to be transferred over the network. More bytes, even 'invisible' ones, means longer download times. Minification addresses this network transfer overhead.",
          "tags": [
            "HTML",
            "Performance",
            "Minification",
            "Network"
          ],
          "prerequisites": [
            "HTTP Fundamentals",
            "Web Browsers"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_html_whitespace_3",
          "topic": "HTML Performance Practices",
          "level": "hard",
          "type": "open",
          "question": "Discuss how various types of content minification (HTML, CSS, JavaScript) contribute to overall web performance. What specific metrics are most impacted by these practices, and are there any scenarios where aggressive minification might have negative side effects?",
          "answer": "Minification across HTML, CSS, and JavaScript significantly reduces file sizes, leading to faster download times and lower bandwidth consumption. This primarily impacts network-related performance metrics such as:\n\n*   **Time to First Byte (TTFB)**: While not directly impacted by client-side minification (TTFB measures server response time for the initial document), if the HTML document itself is large due to lack of minification, the *full download time* for the HTML will be longer.\n*   **First Contentful Paint (FCP)** and **Largest Contentful Paint (LCP)**: Faster download of critical HTML, CSS, and JS (especially render-blocking resources) means these paints can occur sooner.\n*   **Total Blocking Time (TBT)**: Minified JavaScript can reduce parsing and execution time, indirectly reducing TBT.\n*   **Speed Index**: Overall visual completion speed.\n\nMinification benefits user experience by making pages load quicker, especially on slower networks. It also reduces server load and bandwidth costs for websites.\n\n**Potential Negative Side Effects of Aggressive Minification:**\n\n1.  **Debugging Difficulty**: Minified code is very difficult to read and debug in development tools. Source maps are essential to mitigate this by mapping the minified code back to the original source.\n2.  **Build Process Complexity**: Integrating minification into the build pipeline adds a step, and if not configured correctly, can lead to errors or broken deployments (e.g., if a minifier incorrectly removes critical code).\n3.  **Potential for Errors**: While rare with mature minifiers, extremely aggressive settings or bugs in the minifier could theoretically alter code behavior, though this is highly unlikely for HTML/CSS and less common for JS with standard tools like Terser/UglifyJS.",
          "analysisPoints": [
            "Comprehensive understanding of minification's benefits across different file types.",
            "Knowledge of relevant performance metrics (TTFB, FCP, LCP, TBT, Speed Index).",
            "Ability to identify potential downsides and mitigation strategies (source maps).",
            "Understanding of the trade-offs between performance and development experience."
          ],
          "keyConcepts": [
            "Minification",
            "Web Performance",
            "Performance Metrics",
            "Source Maps",
            "Build Process",
            "Debugging"
          ],
          "evaluationCriteria": [
            "Depth of knowledge on minification's impact.",
            "Accuracy in correlating minification to specific metrics.",
            "Awareness of practical challenges and solutions.",
            "Structured and comprehensive explanation."
          ],
          "example": "",
          "tags": [
            "Performance",
            "Minification",
            "HTML",
            "CSS",
            "JavaScript",
            "Web Vitals",
            "Optimization"
          ],
          "prerequisites": [
            "Web Performance Concepts",
            "Build Tools"
          ],
          "complexity": 8,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_html_whitespace_4",
          "topic": "Browser vs. Network for Whitespace",
          "level": "medium",
          "type": "flashcard",
          "question": "True or False: Browsers are efficient at handling extra whitespace, so network transfer time is not affected by it.",
          "answer": "False",
          "analysisPoints": [
            "While browsers are efficient at parsing and collapsing whitespace for *display*, they still have to *download* all the bytes.",
            "The network transfer time is directly proportional to the file size.",
            "Minification reduces file size, which in turn reduces network transfer time, thus improving initial page load performance."
          ],
          "keyConcepts": [
            "Network Transfer",
            "Browser Parsing",
            "File Size",
            "Performance"
          ],
          "evaluationCriteria": [
            "Ability to distinguish network vs. parsing impact",
            "Correctly identifying false statement reason"
          ],
          "example": "",
          "tags": [
            "HTML",
            "Performance",
            "Network",
            "Browser"
          ],
          "prerequisites": [
            "HTTP Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_canvas_context_1",
          "topic": "Canvas Rendering Context Definition",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of a canvas rendering context?",
          "answer": "It's an object with properties and methods that allow you to draw graphics onto an HTML `<canvas>` element.",
          "analysisPoints": [
            "A canvas context provides the API for interacting with the canvas.",
            "It's obtained via the `getContext()` method."
          ],
          "keyConcepts": [
            "HTML Canvas",
            "Rendering Context",
            "Drawing API"
          ],
          "evaluationCriteria": [
            "Recall of fundamental definition"
          ],
          "example": "",
          "tags": [
            "HTML Canvas",
            "Graphics",
            "Basics"
          ],
          "prerequisites": [
            "HTML Canvas Element"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_canvas_context_2",
          "topic": "Canvas Context Types",
          "level": "medium",
          "type": "mcq",
          "question": "Which `getContext()` argument is used for drawing hardware-accelerated 3D graphics on an HTML canvas?",
          "answer": "`'webgl'` or `'webgl2'`",
          "options": [
            "`'2d'`",
            "`'webgl'` or `'webgl2'`",
            "`'3d'`",
            "`'canvas-3d'`"
          ],
          "analysisPoints": [
            "The `'webgl'` and `'webgl2'` contexts are specifically designed for 3D graphics, leveraging OpenGL ES.",
            "`'2d'` is for 2D graphics.",
            "Options like `'3d'` or `'canvas-3d'` are not standard canvas context types."
          ],
          "keyConcepts": [
            "HTML Canvas",
            "WebGL",
            "3D Graphics",
            "Rendering Context"
          ],
          "evaluationCriteria": [
            "Knowledge of specific canvas context types.",
            "Ability to differentiate between 2D and 3D contexts."
          ],
          "example": "The `webgl` context exposes the `WebGLRenderingContext` API, which provides low-level functions for interacting with the GPU, such as setting up shaders, buffers, and textures to render 3D scenes. `webgl2` is its updated version with more features.",
          "tags": [
            "HTML Canvas",
            "WebGL",
            "3D",
            "Graphics"
          ],
          "prerequisites": [
            "Canvas Context Basics"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_canvas_context_3",
          "topic": "Canvas 2D Drawing",
          "level": "easy",
          "type": "code",
          "question": "Write JavaScript code to draw a blue square of size 50x50 pixels at coordinates (20, 20) on an HTML canvas with the ID `myCanvas`.",
          "answer": "```javascript\nconst canvas = document.getElementById('myCanvas');\nconst ctx = canvas.getContext('2d');\n\nif (ctx) {\n  ctx.fillStyle = 'blue';\n  ctx.fillRect(20, 20, 50, 50);\n} else {\n  console.error('2D canvas context not available.');\n}\n```",
          "analysisPoints": [
            "Correctly identifies the `getContext('2d')` method.",
            "Uses `fillStyle` to set the color.",
            "Uses `fillRect()` to draw a filled rectangle with specified position and dimensions.",
            "Includes basic error handling for context availability."
          ],
          "keyConcepts": [
            "HTML Canvas",
            "2D Context",
            "Drawing Shapes",
            "JavaScript DOM Manipulation"
          ],
          "evaluationCriteria": [
            "Ability to apply basic canvas drawing commands.",
            "Correct syntax for `getContext()`, `fillStyle`, `fillRect()`."
          ],
          "example": "",
          "tags": [
            "HTML Canvas",
            "JavaScript",
            "2D Graphics",
            "Coding"
          ],
          "prerequisites": [
            "Basic JavaScript",
            "DOM Manipulation"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_canvas_context_4",
          "topic": "WebGPU vs. WebGL",
          "level": "hard",
          "type": "open",
          "question": "Compare and contrast WebGL and WebGPU. What are the key advantages WebGPU aims to offer over WebGL, and in what scenarios would a developer choose one over the other?",
          "answer": "**WebGL** is an older API (based on OpenGL ES 2.0/3.0) that provides a JavaScript API for rendering interactive 2D and 3D graphics within any compatible web browser without the use of plug-ins. It's widely supported and has a mature ecosystem.\n\n**WebGPU** is a newer, still experimental, web standard that aims to replace WebGL. It offers a more modern, lower-level API for GPU access, designed to map more closely to contemporary native graphics APIs like Vulkan, Metal, and Direct3D 12.\n\n**Key Advantages of WebGPU over WebGL:**\n\n1.  **Performance**: WebGPU offers more explicit control over the GPU, leading to potentially higher performance, especially for complex scenes and compute-intensive tasks, due to its closer mapping to modern GPU architectures.\n2.  **Modern API Design**: It moves away from the stateful OpenGL API to a more explicit, object-oriented, and less error-prone API, making it easier to optimize and debug.\n3.  **Compute Shaders**: WebGPU supports compute shaders, allowing developers to perform general-purpose computations on the GPU, which is highly beneficial for tasks like machine learning, physics simulations, and advanced image processing.\n4.  **Multi-threading**: Designed with multi-threading in mind, enabling better utilization of modern CPUs and potentially allowing some GPU work to be prepared in web workers.\n5.  **Texture Formats and Features**: Supports more modern texture formats and features, offering greater flexibility and efficiency.\n\n**Scenario Choices:**\n\n*   **Choose WebGL if:**\n    *   Broad browser compatibility (including older browsers) is a strict requirement.\n    *   The project involves simpler 2D or 3D graphics that don't push the limits of GPU performance.\n    *   Existing codebase is in WebGL, and migration costs are high.\n    *   Immediate production deployment is needed, as WebGL is stable and widely deployed.\n\n*   **Choose WebGPU if:**\n    *   Cutting-edge performance for demanding 3D applications (e.g., AAA web games, complex simulations, professional design tools) is critical.\n    *   Compute shaders and GPU compute capabilities are required.\n    *   The project is forward-looking and can tolerate experimental API status or requires the latest GPU features.\n    *   Development involves porting from modern native graphics APIs (Vulkan, Metal, D3D12), as WebGPU's design aligns better.\n    *   The target audience uses modern browsers that support WebGPU (currently Chrome, Edge, Firefox Nightly).",
          "analysisPoints": [
            "In-depth comparison of WebGL and WebGPU, covering their underlying philosophies.",
            "Clear articulation of WebGPU's advantages (performance, modern API, compute shaders, multi-threading).",
            "Ability to recommend the appropriate API based on project requirements (compatibility vs. performance/features).",
            "Demonstrates awareness of current browser support for WebGPU."
          ],
          "keyConcepts": [
            "WebGL",
            "WebGPU",
            "3D Graphics",
            "GPU Computing",
            "Graphics API",
            "Performance",
            "Browser Compatibility"
          ],
          "evaluationCriteria": [
            "Comprehensive knowledge of graphics APIs.",
            "Ability to analyze trade-offs.",
            "Strategic decision-making for technology adoption."
          ],
          "example": "",
          "tags": [
            "WebGL",
            "WebGPU",
            "Graphics",
            "Performance",
            "Architecture",
            "Future"
          ],
          "prerequisites": [
            "Advanced JavaScript",
            "Computer Graphics Concepts"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "expert"
        },
        {
          "id": "question_canvas_context_5",
          "topic": "ImageBitmapRenderingContext Purpose",
          "level": "medium",
          "type": "flashcard",
          "question": "What is the primary use case for the `'bitmaprenderer'` context?",
          "answer": "To efficiently transfer and display `ImageBitmap` objects onto the canvas with low overhead, often for pre-processed image data or offscreen rendering.",
          "analysisPoints": [
            "The `'bitmaprenderer'` context is optimized for displaying `ImageBitmap` objects.",
            "It's useful for scenarios where image data is already prepared (e.g., from `createImageBitmap` or `OffscreenCanvas`).",
            "Its focus is on low-overhead, quick display, not general drawing."
          ],
          "keyConcepts": [
            "HTML Canvas",
            "ImageBitmap",
            "Performance",
            "OffscreenCanvas"
          ],
          "evaluationCriteria": [
            "Understanding of specialized canvas contexts",
            "Knowledge of `ImageBitmap`"
          ],
          "example": "",
          "tags": [
            "HTML Canvas",
            "Performance",
            "Image Processing",
            "Web Workers"
          ],
          "prerequisites": [
            "HTML Canvas",
            "Image Processing Basics"
          ],
          "complexity": 6,
          "interviewFrequency": 5,
          "learningPath": "intermediate"
        },
        {
          "id": "question_canvas_context_6",
          "topic": "Canvas Context Availability",
          "level": "easy",
          "type": "code",
          "question": "Consider the following HTML: `<canvas id=\"myDrawingCanvas\"></canvas>`. Write JavaScript code to check if a `'2d'` context is available for this canvas, and if not, log an appropriate message to the console.",
          "answer": "```javascript\nconst canvas = document.getElementById('myDrawingCanvas');\n\nif (canvas) {\n  const ctx = canvas.getContext('2d');\n  if (ctx) {\n    console.log('2D canvas context is available.');\n    // You can now proceed with 2D drawing operations using 'ctx'\n  } else {\n    console.error('2D canvas context is not available on this browser.');\n  }\n} else {\n  console.error('Canvas element with ID \"myDrawingCanvas\" not found.');\n}\n```",
          "analysisPoints": [
            "Correctly retrieves the canvas element by ID.",
            "Properly uses `getContext('2d')`.",
            "Includes a check for the existence of the canvas element itself.",
            "Provides clear console messages for success and failure scenarios."
          ],
          "keyConcepts": [
            "HTML Canvas",
            "getContext",
            "Browser Compatibility",
            "Error Handling"
          ],
          "evaluationCriteria": [
            "Ability to safely access DOM elements.",
            "Correct application of `getContext()`.",
            "Robustness through availability checks."
          ],
          "example": "",
          "tags": [
            "HTML Canvas",
            "JavaScript",
            "DOM",
            "Error Handling"
          ],
          "prerequisites": [
            "DOM Manipulation"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_frontend_architecture_1",
          "topic": "Frontend Application Structure",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the main benefit of organizing a front-end application by features (domains/modules)?",
          "answer": "It enhances discoverability and cohesion, as all related files for a specific feature are grouped together, making it easier to find and manage.",
          "analysisPoints": [
            "Feature-based organization improves modularity.",
            "Reduces cognitive load when navigating the codebase.",
            "Supports independent development and deployment of features."
          ],
          "keyConcepts": [
            "Frontend Architecture",
            "Modularity",
            "Feature-Based Development"
          ],
          "evaluationCriteria": [
            "Recall of core architectural principle"
          ],
          "example": "",
          "tags": [
            "Architecture",
            "Structure",
            "Modularity",
            "Basics"
          ],
          "prerequisites": [
            "Basic Software Development Concepts"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_frontend_architecture_2",
          "topic": "Frontend Application Layers",
          "level": "medium",
          "type": "mcq",
          "question": "In a well-structured front-end application, which layer is primarily responsible for handling API communication and data persistence?",
          "answer": "Infrastructure Layer",
          "options": [
            "UI Layer",
            "Application Layer",
            "Domain Layer",
            "Infrastructure Layer"
          ],
          "analysisPoints": [
            "The Infrastructure Layer is where external integrations, such as API clients and data persistence mechanisms (like local storage), are managed.",
            "UI Layer focuses on presentation.",
            "Application Layer manages state and orchestrates flow.",
            "Domain Layer encapsulates business logic and models."
          ],
          "keyConcepts": [
            "Frontend Architecture",
            "Layered Architecture",
            "Infrastructure Layer",
            "Data Access"
          ],
          "evaluationCriteria": [
            "Understanding of responsibilities of different architectural layers.",
            "Ability to correctly categorize data access concerns."
          ],
          "example": "The Infrastructure Layer might contain files like `apiClient.ts` for making HTTP requests, `localStorageService.ts` for handling local storage, or `websocketClient.ts` for real-time communication. Its role is to provide data to the layers above without concerning itself with how that data is displayed or processed by business rules.",
          "tags": [
            "Architecture",
            "Layers",
            "API",
            "Data"
          ],
          "prerequisites": [
            "Software Design Principles"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_frontend_architecture_3",
          "topic": "Cross-Cutting Concerns",
          "level": "medium",
          "type": "open",
          "question": "Identify and explain three examples of 'cross-cutting concerns' in a typical front-end application. How would you generally approach implementing one of these concerns (e.g., error handling) across your application to ensure consistency and maintainability?",
          "answer": "Three examples of cross-cutting concerns are:\n\n1.  **Authentication/Authorization**: Managing user login, session, and access control across different parts of the application.\n2.  **Error Handling**: Catching and processing errors, displaying user-friendly messages, and logging issues.\n3.  **Logging**: Recording events, user interactions, and debug information for monitoring and analysis.\n\n**Implementing Centralized Error Handling:**\n\nTo ensure consistency and maintainability, centralized error handling is crucial. Here's a general approach:\n\n*   **Global Error Boundaries/Catchers**: For UI frameworks like React, use Error Boundaries (for React component errors) or a global `window.onerror` and `unhandledrejection` event listeners (for unhandled JavaScript errors and promise rejections). These act as a safety net, preventing the entire application from crashing and allowing a fallback UI to be displayed.\n*   **Centralized Error Service/Module**: Create a dedicated service or module (e.g., `errorService.ts`) responsible for:\n    *   **Normalization**: Transforming various error types (network errors, validation errors, unexpected errors) into a consistent format.\n    *   **Reporting**: Sending errors to a logging service (e.g., Sentry, LogRocket) for monitoring and debugging.\n    *   **Notification**: Displaying user-friendly messages (toasts, modals) to the user based on the error type and severity.\n*   **API Error Interceptors**: For network requests, implement interceptors (e.g., with `axios`) to catch HTTP errors globally, refresh tokens if needed, and route specific error codes to the central error service.\n*   **Custom Error Classes**: Define custom error classes (e.g., `NetworkError`, `ValidationError`) to provide more specific context and make error handling more semantic within the application.\n*   **Controlled Error Propagation**: Encourage developers to throw specific errors at lower levels and catch them at higher, more appropriate levels (e.g., in an application service or component responsible for user interaction) to handle them gracefully.\n\nThis approach ensures that errors are consistently caught, processed, and reported, improving both user experience and developer debugging efficiency.",
          "analysisPoints": [
            "Correctly identifies and explains cross-cutting concerns.",
            "Provides a detailed, practical approach to implementing error handling.",
            "Covers different levels of error handling (global, service, API, custom).",
            "Demonstrates understanding of maintainability and consistency goals."
          ],
          "keyConcepts": [
            "Cross-Cutting Concerns",
            "Error Handling",
            "Authentication",
            "Logging",
            "Frontend Architecture",
            "Design Patterns"
          ],
          "evaluationCriteria": [
            "Breadth of examples for cross-cutting concerns.",
            "Depth and practicality of implementation strategy.",
            "Understanding of benefits of centralized approaches."
          ],
          "example": "",
          "tags": [
            "Architecture",
            "Design Patterns",
            "Error Handling",
            "Security",
            "Best Practices"
          ],
          "prerequisites": [
            "Software Design",
            "JavaScript Asynchronicity"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_frontend_architecture_4",
          "topic": "Atomic Design",
          "level": "medium",
          "type": "flashcard",
          "question": "Briefly explain the 'Atomic Design' methodology in the context of front-end component organization.",
          "answer": "Atomic Design breaks UI into five stages: atoms (basic HTML tags/styles), molecules (groups of atoms forming simple components like search forms), organisms (groups of molecules forming complex sections like headers), templates (page-level object layouts), and pages (specific instances of templates with real content). It promotes reusability, consistency, and scalable design systems.",
          "analysisPoints": [
            "Defines the five levels of Atomic Design.",
            "Explains the progression from simple to complex components.",
            "Highlights the benefits of the methodology."
          ],
          "keyConcepts": [
            "Atomic Design",
            "Component-Based Architecture",
            "Design Systems",
            "UI/UX"
          ],
          "evaluationCriteria": [
            "Recall of design methodology",
            "Ability to explain its purpose"
          ],
          "example": "",
          "tags": [
            "Architecture",
            "Components",
            "Design System",
            "UI"
          ],
          "prerequisites": [
            "Component-Based Development"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_frontend_architecture_5",
          "topic": "Container/Presentational Pattern",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following best describes the role of a 'Presentational Component' in the Container/Presentational component pattern?",
          "answer": "It is primarily concerned with *how things look*, receiving data and callbacks via props and rendering UI.",
          "options": [
            "It is primarily concerned with *how things look*, receiving data and callbacks via props and rendering UI.",
            "It manages application state, fetches data, and contains business logic.",
            "It directly interacts with APIs and handles data persistence.",
            "It orchestrates communication between different modules and services."
          ],
          "analysisPoints": [
            "Presentational components are 'dumb' components focused on UI, styling, and rendering based on props.",
            "Container components (not presentational) handle state, data fetching, and business logic.",
            "API interaction belongs to the infrastructure layer.",
            "Orchestration belongs to the application layer or container components."
          ],
          "keyConcepts": [
            "Container/Presentational Pattern",
            "Component Design",
            "Separation of Concerns",
            "React"
          ],
          "evaluationCriteria": [
            "Understanding of component pattern roles.",
            "Ability to differentiate component types based on responsibility."
          ],
          "example": "A `Button` component that just renders a button and takes `onClick` and `text` props is a presentational component. It doesn't know where the click comes from or what it does, just that it needs to show text and react to clicks. A `UserListContainer` that fetches user data, filters it, and passes it to a `UserList` (presentational) would be a container.",
          "tags": [
            "Architecture",
            "Components",
            "Design Pattern",
            "React"
          ],
          "prerequisites": [
            "Component-Based UI"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_frontend_architecture_6",
          "topic": "Architectural Benefits",
          "level": "easy",
          "type": "flashcard",
          "question": "Name two key benefits of having a well-structured front-end application architecture.",
          "answer": "Maintainability and Scalability (others include testability, collaboration, readability, faster onboarding).",
          "analysisPoints": [
            "A clear structure makes code easier to understand and modify.",
            "It allows the application to grow in size and complexity without becoming unmanageable.",
            "Good architecture facilitates parallel development by multiple teams."
          ],
          "keyConcepts": [
            "Frontend Architecture",
            "Maintainability",
            "Scalability"
          ],
          "evaluationCriteria": [
            "Recall of core benefits"
          ],
          "example": "",
          "tags": [
            "Architecture",
            "Benefits",
            "Foundations"
          ],
          "prerequisites": [
            "Software Engineering Principles"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_lazy_loading_1",
          "topic": "Lazy Loading Benefit",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary performance benefit of lazy loading images?",
          "answer": "Faster initial page load time and reduced bandwidth consumption.",
          "analysisPoints": [
            "Lazy loading defers loading of non-critical assets.",
            "This reduces the initial payload size and the number of HTTP requests.",
            "Resulting in quicker rendering of above-the-fold content."
          ],
          "keyConcepts": [
            "Lazy Loading",
            "Performance Optimization",
            "Page Load Time",
            "Bandwidth"
          ],
          "evaluationCriteria": [
            "Recall of fundamental benefit"
          ],
          "example": "",
          "tags": [
            "Performance",
            "Lazy Loading",
            "Images",
            "Basics"
          ],
          "prerequisites": [
            "Web Performance Concepts"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_lazy_loading_2",
          "topic": "Native Lazy Loading",
          "level": "medium",
          "type": "mcq",
          "question": "Which HTML attribute enables native browser lazy loading for images?",
          "answer": "`loading=\"lazy\"`",
          "options": [
            "`data-lazy=\"true\"`",
            "`lazyload=\"true\"`",
            "`loading=\"lazy\"`",
            "`defer=\"image\"`"
          ],
          "analysisPoints": [
            "The `loading` attribute with value `lazy` is the standard HTML attribute.",
            "Other options are either non-standard or relate to different concepts (like `defer` for scripts)."
          ],
          "keyConcepts": [
            "Native Lazy Loading",
            "HTML Attributes",
            "Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of modern HTML features",
            "Correct attribute identification"
          ],
          "example": "```html\n<img src=\"placeholder.jpg\" loading=\"lazy\" alt=\"Example image\">\n```\nThis simple attribute tells the browser to defer loading the image until it is deemed to be within a calculated distance from the viewport.",
          "tags": [
            "HTML",
            "Performance",
            "Lazy Loading",
            "Native"
          ],
          "prerequisites": [
            "HTML Image Element"
          ],
          "complexity": 5,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_lazy_loading_3",
          "topic": "Intersection Observer API for Lazy Loading",
          "level": "medium",
          "type": "code",
          "question": "Given an HTML structure where images have a `data-src` attribute for their actual source and a placeholder `src`. Complete the JavaScript code using `IntersectionObserver` to lazy load these images. Assume the images have the class `lazy-img`.",
          "answer": "```javascript\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  const lazyImages = document.querySelectorAll(\"img.lazy-img[data-src]\");\n  \n  const imageObserver = new IntersectionObserver((entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        const img = entry.target; // The <img> element\n        img.src = img.dataset.src; // Set actual source\n        img.removeAttribute(\"data-src\"); // Clean up\n        observer.unobserve(img); // Stop observing\n      }\n    });\n  }, {\n    rootMargin: '0px 0px 50px 0px' // Option: Load 50px before entering viewport\n  });\n  \n  lazyImages.forEach(img => imageObserver.observe(img));\n});\n```",
          "analysisPoints": [
            "Correctly selects target images using `querySelectorAll`.",
            "Initializes `IntersectionObserver` with a callback.",
            "Iterates over `entries` to check `isIntersecting`.",
            "Sets the `src` attribute from `dataset.src`.",
            "Removes `data-src` and `unobserve`s the element after loading for efficiency.",
            "Demonstrates optional `rootMargin` for pre-loading."
          ],
          "keyConcepts": [
            "Intersection Observer API",
            "Lazy Loading",
            "DOM Manipulation",
            "JavaScript Events"
          ],
          "evaluationCriteria": [
            "Correct use of `IntersectionObserver` API.",
            "Understanding of `isIntersecting` and `unobserve`.",
            "Efficient DOM manipulation for lazy loading."
          ],
          "example": "```html\n<img class=\"lazy-img\" src=\"placeholder.gif\" data-src=\"https://source.unsplash.com/random/400x300?forest\" alt=\"Forest image\">\n<img class=\"lazy-img\" src=\"placeholder.gif\" data-src=\"https://source.unsplash.com/random/400x300?mountain\" alt=\"Mountain image\">\n<!-- ... more images ... -->\n```",
          "tags": [
            "JavaScript",
            "Performance",
            "Lazy Loading",
            "Intersection Observer",
            "Coding"
          ],
          "prerequisites": [
            "DOM Manipulation",
            "Asynchronous JavaScript"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_lazy_loading_4",
          "topic": "Lazy Loading and Core Web Vitals",
          "level": "hard",
          "type": "open",
          "question": "Explain how lazy loading images can positively impact Google's Core Web Vitals, specifically Largest Contentful Paint (LCP) and Cumulative Layout Shift (CLS). Are there any edge cases or best practices to consider to avoid negative impacts on these metrics?",
          "answer": "Lazy loading images primarily impacts Core Web Vitals in the following ways:\n\n*   **Largest Contentful Paint (LCP)**: LCP measures when the largest content element in the viewport becomes visible. By deferring off-screen images, lazy loading reduces the overall page weight and the number of critical resources the browser needs to download and render initially. This allows the browser to prioritize and render above-the-fold content, including the LCP element, more quickly. A smaller initial payload means less network contention and faster rendering for critical elements.\n\n*   **Cumulative Layout Shift (CLS)**: CLS measures the sum of all individual layout shift scores for every unexpected layout shift that occurs during the entire lifespan of the page. Lazy loading, if implemented without proper care, can *negatively* impact CLS. If images are loaded without reserving space for them (i.e., specifying their `width` and `height`), they will cause content below them to jump around when they finally load, leading to a high CLS score.\n\n**Edge Cases and Best Practices for Avoiding Negative Impacts:**\n\n1.  **Always specify `width` and `height` (or aspect-ratio) for images**: This is crucial to prevent CLS. Even if the actual image is lazy-loaded, the browser will reserve the correct amount of space, preventing layout shifts when the image appears.\n2.  **Use `loading=\"lazy\"` for most images**: It's the most efficient and performant method, handled directly by the browser. It automatically preloads images when they are just outside the viewport, often before a user scrolls.\n3.  **Don't lazy load LCP image**: The LCP image (the largest image in the initial viewport) should *not* be lazy-loaded. It should be loaded eagerly (or preloaded) to ensure it appears as quickly as possible, as lazy loading would delay its render and negatively impact LCP.\n4.  **Consider a small `rootMargin` for `IntersectionObserver`**: If using `IntersectionObserver`, setting a positive `rootMargin` (e.g., `'0px 0px 200px 0px'`) ensures images start loading slightly *before* they enter the viewport, improving the user experience and reducing the chance of a visible loading state.\n5.  **Provide low-quality image placeholders (LQIP) or blurred placeholders**: For a better user experience and to avoid blank spaces, use small, low-resolution placeholders that are replaced by the high-resolution image when it loads. This can also help with CLS if the placeholder has the correct dimensions.",
          "analysisPoints": [
            "Detailed explanation of lazy loading's impact on LCP and CLS.",
            "Identifies both positive (LCP) and potential negative (CLS) impacts.",
            "Provides actionable best practices and edge case considerations.",
            "Demonstrates a nuanced understanding of Core Web Vitals."
          ],
          "keyConcepts": [
            "Lazy Loading",
            "Core Web Vitals",
            "LCP",
            "CLS",
            "Performance Optimization",
            "Image Optimization",
            "User Experience"
          ],
          "evaluationCriteria": [
            "In-depth knowledge of web performance metrics.",
            "Ability to analyze practical implications of optimization techniques.",
            "Provision of concrete best practices.",
            "Holistic understanding of user experience and technical implementation."
          ],
          "example": "",
          "tags": [
            "Performance",
            "Lazy Loading",
            "Web Vitals",
            "Optimization",
            "Images",
            "Best Practices"
          ],
          "prerequisites": [
            "Core Web Vitals",
            "Image Optimization"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "expert"
        },
        {
          "id": "question_lazy_loading_5",
          "topic": "Lazy Loading React Component",
          "level": "medium",
          "type": "code",
          "question": "Create a `LazyImage` React component that accepts `src` (the actual image URL) and `alt` props. The component should initially render a blank space or placeholder and use `IntersectionObserver` to load the `src` image when it enters the viewport. Include a `useState` for loading state and `useRef` for the image element.",
          "answer": "```typescript\nimport React, { useEffect, useRef, useState } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  alt: string;\n  placeholder?: string; // Optional placeholder image URL\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nconst LazyImage: React.FC<LazyImageProps> = ({\n  src,\n  alt,\n  placeholder = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=', // Tiny transparent GIF as default placeholder\n  className,\n  style\n}) => {\n  const [imageSrc, setImageSrc] = useState(placeholder);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const imgRef = useRef<HTMLImageElement>(null);\n\n  useEffect(() => {\n    if (!imgRef.current) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting && !isLoaded) {\n            setImageSrc(src); // Start loading the actual image\n            // No setIsLoaded(true) here yet, as image might still be loading\n            observer.unobserve(entry.target); // Stop observing once trigger to load\n          }\n        });\n      },\n      { rootMargin: '100px 0px' } // Load when 100px from viewport\n    );\n\n    observer.observe(imgRef.current);\n\n    // Cleanup function\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n    };\n  }, [src, isLoaded]); // Depend on src changing and isLoaded state for effect re-runs\n\n  const handleImageLoad = () => {\n    setIsLoaded(true);\n  };\n\n  return (\n    <img\n      ref={imgRef}\n      src={imageSrc}\n      alt={alt}\n      onLoad={handleImageLoad}\n      className={className}\n      style={{\n        ...style,\n        opacity: isLoaded ? 1 : 0.7, // Visual feedback for loading\n        transition: 'opacity 0.3s ease-in-out',\n      }}\n    />\n  );\n};\n\nexport default LazyImage;\n```",
          "analysisPoints": [
            "Correctly uses `useState` to manage the image source and loading status.",
            "Properly utilizes `useRef` to get a reference to the DOM image element.",
            "Implements `useEffect` to create, observe, and clean up the `IntersectionObserver` instance.",
            "Sets the `src` attribute only when the image enters the viewport.",
            "Handles `onLoad` event to update the `isLoaded` state, providing a visual transition.",
            "Includes a default placeholder and optional styling/classname passing.",
            "Proper cleanup of the observer on component unmount."
          ],
          "keyConcepts": [
            "React Hooks",
            "Lazy Loading",
            "Intersection Observer API",
            "Component Design",
            "State Management"
          ],
          "evaluationCriteria": [
            "Proficient use of React Hooks (`useEffect`, `useState`, `useRef`).",
            "Correct implementation of `IntersectionObserver` in a React context.",
            "Clean component design and proper prop handling.",
            "Attention to lifecycle and cleanup."
          ],
          "example": "```typescript jsx\n// Usage Example\nimport LazyImage from './LazyImage';\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Scroll down to see images load</h1>\n      <div style={{ height: '100vh', background: '#eee' }}>\n        Scroll past this section\n      </div>\n      <LazyImage \n        src=\"https://source.unsplash.com/random/800x600?nature,landscape\" \n        alt=\"A beautiful nature landscape\"\n        placeholder=\"https://via.placeholder.com/800x600/CCCCCC/FFFFFF?text=Loading...\"\n        style={{ width: '100%', height: 'auto', display: 'block', marginBottom: '20px' }}\n      />\n      <LazyImage \n        src=\"https://source.unsplash.com/random/800x600?city,skyline\" \n        alt=\"A vibrant city skyline\"\n        style={{ width: '100%', height: 'auto', display: 'block', marginBottom: '20px' }}\n      />\n      <div style={{ height: '100vh', background: '#eee' }}>\n        End of page\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n```",
          "tags": [
            "React",
            "JavaScript",
            "Performance",
            "Lazy Loading",
            "Intersection Observer",
            "Coding"
          ],
          "prerequisites": [
            "React Fundamentals",
            "Intersection Observer API"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_html_minify_calculator",
          "title": "HTML Minification Size Calculator",
          "description": "\nImplement a JavaScript function that takes an unminified HTML string as input and returns an object containing:\n1.  The minified HTML string.\n2.  The original size (in bytes) of the unminified HTML.\n3.  The minified size (in bytes) of the minified HTML.\n4.  The percentage reduction in size.\n\nFor minification, remove all HTML comments (`<!-- ... -->`), and replace sequences of whitespace characters (spaces, tabs, newlines) with a single space. Be careful not to remove whitespace characters within text content or within HTML attributes if they are semantically important (e.g., `&nbsp;` or spaces in a `title` attribute). For simplicity, you can focus on collapsing multiple whitespace characters outside of tags and removing comments.\n",
          "difficulty": "medium",
          "startingCode": "function calculateHtmlMinification(htmlString) {\n  // Implement minification logic here\n  // 1. Remove HTML comments\n  // 2. Collapse multiple whitespace characters (including newlines and tabs) to a single space.\n  //    Be careful with spaces inside tags (e.g., attributes) or text content.\n  //    For this task, a simpler approach of replacing all sequences of non-tag whitespace\n  //    and comments is acceptable, but mention limitations.\n\n  let minifiedHtml = htmlString;\n\n  // Step 1: Remove HTML comments\n  minifiedHtml = minifiedHtml.replace(/<!--[\\s\\S]*?-->/g, '');\n\n  // Step 2: Collapse multiple whitespaces (including newlines/tabs) to single space\n  // This regex targets sequences of whitespace characters that are NOT inside a HTML tag's attributes\n  // For simplicity, we'll do a general whitespace collapse, acknowledging it might be imperfect\n  // minifiedHtml = minifiedHtml.replace(/\\s+/g, ' ').trim(); // Simple but potentially aggressive\n  // A more robust approach would require a proper HTML parser or more complex regex, but for interview, this can be discussed.\n\n  // Let's try a slightly better regex that avoids collapsing spaces inside attribute values \n  // and also removes leading/trailing whitespace around block elements more carefully.\n  // For simplicity in this task, let's use a common minification strategy:\n  minifiedHtml = minifiedHtml.replace(/>\\s+</g, '><'); // Remove spaces between tags\n  minifiedHtml = minifiedHtml.replace(/\\s+/g, ' '); // Collapse all remaining multiple spaces to single space\n  minifiedHtml = minifiedHtml.trim(); // Trim leading/trailing whitespace of the whole document\n\n  // Calculate sizes\n  const originalSize = new TextEncoder().encode(htmlString).length;\n  const minifiedSize = new TextEncoder().encode(minifiedHtml).length;\n\n  const reductionPercentage = ((originalSize - minifiedSize) / originalSize) * 100;\n\n  return {\n    minifiedHtml,\n    originalSize,\n    minifiedSize,\n    reductionPercentage: isNaN(reductionPercentage) ? 0 : parseFloat(reductionPercentage.toFixed(2))\n  };\n}\n\n// Example usage:\n// const unminified = `\n//   <!DOCTYPE html>\n//   <html>\n//   <head>\n//       <title>My   Page</title>\n//   </head>\n//   <body>\n//       <!-- A test comment -->\n//       <p>\n//           Hello     World\n//       </p>\n//   </body>\n//   </html>\n// `;\n// console.log(calculateHtmlMinification(unminified));\n",
          "solutionCode": "function calculateHtmlMinification(htmlString) {\n  let minifiedHtml = htmlString;\n\n  // 1. Remove HTML comments (multiline and single line)\n  minifiedHtml = minifiedHtml.replace(/<!--[\\s\\S]*?-->/g, '');\n\n  // 2. Remove whitespace between HTML tags\n  // This ensures that `<div>   <p>` becomes `<div><p>`\n  minifiedHtml = minifiedHtml.replace(/>\\s+</g, '><');\n\n  // 3. Collapse multiple whitespace characters (including newlines and tabs) to a single space.\n  // This applies to whitespace within text nodes but also removes unnecessary spaces.\n  // This regex carefully avoids collapsing spaces within attribute values (e.g. title=\"my title\")\n  // For simplicity in a regex-based approach, we'll mostly target spaces not within angle brackets.\n  // A common approach for production minifiers is to use an HTML parser.\n  // For this task, we can use a simpler, effective regex for common cases:\n  minifiedHtml = minifiedHtml.replace(/\\s\\s+/g, ' '); // Replace 2+ spaces with a single space\n\n  // 4. Trim leading/trailing whitespace from the entire document\n  minifiedHtml = minifiedHtml.trim();\n\n  // Calculate sizes in bytes using TextEncoder for accurate byte length\n  const originalSize = new TextEncoder().encode(htmlString).length;\n  const minifiedSize = new TextEncoder().encode(minifiedHtml).length;\n\n  const reductionPercentage = ((originalSize - minifiedSize) / originalSize) * 100;\n\n  return {\n    minifiedHtml,\n    originalSize,\n    minifiedSize,\n    reductionPercentage: isNaN(reductionPercentage) || originalSize === 0 ? 0 : parseFloat(reductionPercentage.toFixed(2))\n  };\n}",
          "testCases": [
            "Test with simple HTML: `calculateHtmlMinification('  <p>  Hello  World  </p>  ')` should return `minifiedHtml: '<p>Hello World</p>'` and correct sizes.",
            "Test with HTML comments: `calculateHtmlMinification('<div><!-- comment --><span>text</span></div>')` should remove the comment.",
            "Test with newlines and tabs: `calculateHtmlMinification('<div>\\n\\t<span>Item 1</span>\\n</div>')` should collapse internal whitespace.",
            "Test with empty string: `calculateHtmlMinification('')` should return 0 sizes and 0% reduction.",
            "Test with HTML containing inline spaces that should be preserved (e.g., in a `title` attribute or `alt` text): `calculateHtmlMinification('<img title=\"my image title\" alt=\"An image with spaces\">')` should preserve spaces within attributes.",
            "Test with complex, multi-line HTML with mixed content and comments to ensure comprehensive minification.",
            "Test HTML with `<pre>` or `<textarea>` tags if applicable (though often minifiers avoid these or require special handling, for this task, a general regex is fine if its limitations are noted)."
          ],
          "hints": [
            "Regular expressions are your friend for pattern matching and replacement. Look into `String.prototype.replace()`.",
            "Consider using `TextEncoder` to get the byte length of strings accurately, as `String.length` counts code units, not bytes.",
            "The `.trim()` method can be useful for removing leading and trailing whitespace from the entire document.",
            "Be careful with whitespace removal between `>` and `<` tags to prevent issues, and ensure spaces within actual text content are preserved correctly (e.g., 'Hello World' should not become 'HelloWorld')."
          ],
          "tags": [
            "HTML",
            "String Manipulation",
            "Performance",
            "Minification",
            "Regex",
            "Utility"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "JavaScript Strings",
            "Regular Expressions"
          ],
          "complexity": 7,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Web Performance Optimization",
            "Build Tools"
          ]
        },
        {
          "id": "task_draw_shapes_2d_canvas",
          "title": "Interactive 2D Canvas Drawing Application",
          "description": "\nCreate a simple HTML page with a `<canvas>` element and JavaScript. Implement the following features:\n\n1.  **Canvas Setup**: Initialize a 2D rendering context for the canvas.\n2.  **Draw a Rectangle**: Draw a solid blue rectangle (100x70 pixels) at position (50, 50).\n3.  **Draw a Circle**: Draw a red circle with a radius of 40 pixels, centered at (200, 100).\n4.  **Draw Text**: Display the text \"Canvas Fun!\" in black, 30px Arial font, at position (50, 200).\n5.  **Clear Canvas Button**: Add an HTML button. When clicked, it should clear the entire canvas.\n6.  **Bonus: Mouse Drawing**: Allow the user to draw freehand lines on the canvas when the mouse is clicked and dragged. The lines should be green and 2 pixels wide.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Canvas Drawing App</title>\n    <style>\n        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 20px; }\n        canvas { border: 1px solid black; background-color: #f0f0f0; }\n        button { margin-top: 10px; padding: 10px 20px; cursor: pointer; }\n    </style>\n</head>\n<body>\n    <h1>Simple Canvas Drawing</h1>\n    <canvas id=\"myCanvas\" width=\"600\" height=\"400\"></canvas>\n    <button id=\"clearCanvasBtn\">Clear Canvas</button>\n\n    <script>\n        const canvas = document.getElementById('myCanvas');\n        const ctx = canvas.getContext('2d');\n        const clearBtn = document.getElementById('clearCanvasBtn');\n\n        // 1. Initial Drawings (Rectangle, Circle, Text)\n        function drawInitialShapes() {\n          if (!ctx) return console.error('2D canvas context not supported');\n          \n          // Your code for drawing rectangle, circle, text here\n          // ctx.fillStyle = 'blue';\n          // ctx.fillRect(50, 50, 100, 70);\n          // ...\n        }\n\n        // 2. Clear Canvas Functionality\n        clearBtn.addEventListener('click', () => {\n            // Your code to clear canvas here\n            // ctx.clearRect(0, 0, canvas.width, canvas.height);\n        });\n\n        // 3. Bonus: Mouse Drawing\n        let isDrawing = false;\n        let lastX = 0;\n        let lastY = 0;\n\n        canvas.addEventListener('mousedown', (e) => {\n            // Your code here\n        });\n\n        canvas.addEventListener('mousemove', (e) => {\n            // Your code here\n        });\n\n        canvas.addEventListener('mouseup', () => {\n            // Your code here\n        });\n\n        canvas.addEventListener('mouseout', () => {\n            // Your code here\n        });\n\n        drawInitialShapes(); // Call to draw initial shapes on load\n\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Canvas Drawing App</title>\n    <style>\n        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 20px; }\n        canvas { border: 1px solid black; background-color: #f0f0f0; }\n        button { margin-top: 10px; padding: 10px 20px; cursor: pointer; }\n    </style>\n</head>\n<body>\n    <h1>Simple Canvas Drawing</h1>\n    <canvas id=\"myCanvas\" width=\"600\" height=\"400\"></canvas>\n    <button id=\"clearCanvasBtn\">Clear Canvas</button>\n\n    <script>\n        const canvas = document.getElementById('myCanvas');\n        const ctx = canvas.getContext('2d');\n        const clearBtn = document.getElementById('clearCanvasBtn');\n\n        // 1. Initial Drawings (Rectangle, Circle, Text)\n        function drawInitialShapes() {\n          if (!ctx) return console.error('2D canvas context not supported');\n          \n          // Draw a Rectangle\n          ctx.fillStyle = 'blue';\n          ctx.fillRect(50, 50, 100, 70);\n\n          // Draw a Circle\n          ctx.beginPath(); // Start a new path\n          ctx.arc(200, 100, 40, 0, Math.PI * 2, true); // (x, y, radius, startAngle, endAngle, anticlockwise)\n          ctx.fillStyle = 'red';\n          ctx.fill(); // Fill the circle\n          ctx.closePath(); // Close the path\n\n          // Draw Text\n          ctx.font = '30px Arial';\n          ctx.fillStyle = 'black';\n          ctx.fillText('Canvas Fun!', 50, 200);\n        }\n\n        // 2. Clear Canvas Functionality\n        clearBtn.addEventListener('click', () => {\n            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clears the entire canvas\n            drawInitialShapes(); // Redraw initial shapes after clearing\n        });\n\n        // 3. Bonus: Mouse Drawing\n        let isDrawing = false;\n        let lastX = 0;\n        let lastY = 0;\n\n        function draw(e) {\n            if (!isDrawing) return; // Stop the fn from running when they are not moused down\n            if (!ctx) return;\n\n            ctx.beginPath();\n            ctx.moveTo(lastX, lastY);\n            ctx.lineTo(e.offsetX, e.offsetY);\n            ctx.strokeStyle = 'green';\n            ctx.lineWidth = 2;\n            ctx.stroke();\n            [lastX, lastY] = [e.offsetX, e.offsetY];\n        }\n\n        canvas.addEventListener('mousedown', (e) => {\n            isDrawing = true;\n            [lastX, lastY] = [e.offsetX, e.offsetY]; // Set starting point\n        });\n\n        canvas.addEventListener('mousemove', draw);\n\n        canvas.addEventListener('mouseup', () => isDrawing = false);\n        canvas.addEventListener('mouseout', () => isDrawing = false); // Stop drawing if mouse leaves canvas\n\n        drawInitialShapes(); // Call to draw initial shapes on load\n\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Verify blue rectangle is drawn at (50, 50) with dimensions 100x70.",
            "Verify red circle is drawn at (200, 100) with radius 40.",
            "Verify \"Canvas Fun!\" text is displayed in black, 30px Arial at (50, 200).",
            "Clicking 'Clear Canvas' button should erase all drawings.",
            "After clearing, the initial shapes should reappear (as per `drawInitialShapes` call in solution).",
            "Dragging the mouse on the canvas should draw continuous green lines.",
            "Releasing the mouse or moving it off the canvas should stop drawing."
          ],
          "hints": [
            "For drawing paths (like lines or circles), remember `ctx.beginPath()`, `ctx.moveTo()`, `ctx.lineTo()`, `ctx.arc()`, `ctx.stroke()`, and `ctx.fill()`.",
            "To clear the canvas, `ctx.clearRect(x, y, width, height)` is the standard method.",
            "For mouse drawing, track a `isDrawing` boolean state and capture mouse coordinates (e.g., `e.offsetX`, `e.offsetY`).",
            "Make sure to set `strokeStyle` and `lineWidth` for lines.",
            "Don't forget to call `drawInitialShapes()` when the page loads and after clearing if you want them to persist/redraw."
          ],
          "tags": [
            "HTML Canvas",
            "JavaScript",
            "DOM Events",
            "2D Graphics",
            "Interactive UI"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "HTML Basics",
            "JavaScript DOM Manipulation",
            "Basic Canvas API"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Event Handling",
            "State Management (simple)"
          ]
        },
        {
          "id": "task_webgl_context_check",
          "title": "WebGL Context Availability and Capabilities Check",
          "description": "\nCreate an HTML page with a canvas. Implement JavaScript to:\n\n1.  Attempt to get a `'webgl'` context. If successful, log \"WebGL is supported!\".\n2.  If `'webgl'` is not available, try to get a `'webgl2'` context. If successful, log \"WebGL2 is supported!\".\n3.  If neither is available, log \"WebGL is not supported in this browser.\"\n4.  If a WebGL context (either 1 or 2) is obtained, also log some basic capabilities of that context, such as `MAX_TEXTURE_SIZE` and `MAX_VIEWPORT_DIMS`.\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>WebGL Capability Check</title>\n    <style>\n        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 20px; }\n        canvas { border: 1px solid black; background-color: #f0f0f0; width: 300px; height: 200px; }\n    </style>\n</head>\n<body>\n    <h1>WebGL Capability Check</h1>\n    <canvas id=\"webglCanvas\"></canvas>\n    <p>Check console for WebGL capabilities.</p>\n\n    <script>\n        const canvas = document.getElementById('webglCanvas');\n        let gl = null;\n\n        // Try to get WebGL context\n        gl = canvas.getContext('webgl');\n\n        if (gl) {\n            console.log('WebGL is supported!');\n            // Log capabilities here\n            // const maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n            // console.log(`Max Texture Size: ${maxTextureSize}`);\n        } else {\n            // Try to get WebGL2 context if WebGL1 failed\n            gl = canvas.getContext('webgl2');\n            if (gl) {\n                console.log('WebGL2 is supported!');\n                // Log capabilities here\n            } else {\n                console.log('WebGL is not supported in this browser.');\n            }\n        }\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>WebGL Capability Check</title>\n    <style>\n        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin-top: 20px; }\n        canvas { border: 1px solid black; background-color: #f0f0f0; width: 300px; height: 200px; }\n    </style>\n</head>\n<body>\n    <h1>WebGL Capability Check</h1>\n    <canvas id=\"webglCanvas\"></canvas>\n    <p>Check console for WebGL capabilities.</p>\n\n    <script>\n        const canvas = document.getElementById('webglCanvas');\n        let gl = null;\n\n        // Try to get WebGL context options (e.g., enable antialias)\n        const contextOptions = { antialias: true, alpha: false };\n\n        // 1. Try to get WebGL (version 1) context\n        gl = canvas.getContext('webgl', contextOptions) || canvas.getContext('experimental-webgl', contextOptions);\n\n        if (gl) {\n            console.log('WebGL is supported!');\n        } else {\n            // 2. If WebGL1 failed, try to get WebGL2 context\n            gl = canvas.getContext('webgl2', contextOptions);\n            if (gl) {\n                console.log('WebGL2 is supported!');\n            } else {\n                // 3. Neither WebGL1 nor WebGL2 supported\n                console.log('WebGL is not supported in this browser.');\n            }\n        }\n\n        // 4. Log capabilities if a context was obtained\n        if (gl) {\n            console.log(`Max Texture Size: ${gl.getParameter(gl.MAX_TEXTURE_SIZE)}`);\n            console.log(`Max Viewport Dims: ${gl.getParameter(gl.MAX_VIEWPORT_DIMS)}`);\n            console.log(`Max Vertex Uniform Vectors: ${gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS)}`);\n            console.log(`Drawing Buffer Width: ${gl.drawingBufferWidth}`);\n            console.log(`Drawing Buffer Height: ${gl.drawingBufferHeight}`);\n\n            // Basic clear to show context is active\n            gl.clearColor(0.0, 0.0, 0.0, 1.0); // Clear to black, opaque\n            gl.clear(gl.COLOR_BUFFER_BIT); // Clear the color buffer\n        }\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Run in a modern browser (e.g., Chrome, Firefox, Edge) with WebGL enabled: Should log \"WebGL is supported!\" or \"WebGL2 is supported!\" and show capabilities.",
            "Run in an older browser or environment without WebGL support (e.g., by disabling it in browser flags if possible): Should log \"WebGL is not supported in this browser.\"",
            "Verify that `MAX_TEXTURE_SIZE` and `MAX_VIEWPORT_DIMS` are correctly logged as numbers.",
            "Check if `gl.drawingBufferWidth` and `gl.drawingBufferHeight` match the canvas dimensions if a context is obtained."
          ],
          "hints": [
            "The `getContext()` method returns `null` if the requested context type is not supported.",
            "Remember to try `'webgl'` first, then `'webgl2'`. Some browsers historically used `'experimental-webgl'` for the first version.",
            "Once you have a `gl` (WebGLRenderingContext or WebGL2RenderingContext) object, you can access various system capabilities using `gl.getParameter(gl.CONSTANT_NAME)`.",
            "Common constants to check include `gl.MAX_TEXTURE_SIZE`, `gl.MAX_VIEWPORT_DIMS`, `gl.MAX_RENDERBUFFER_SIZE`."
          ],
          "tags": [
            "WebGL",
            "WebGL2",
            "HTML Canvas",
            "Browser Compatibility",
            "Graphics",
            "Hardware Acceleration"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "HTML Canvas Basics",
            "JavaScript Fundamentals"
          ],
          "complexity": 5,
          "interviewRelevance": 6,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Feature Detection",
            "Error Handling"
          ]
        },
        {
          "id": "task_refactor_ecommerce_app",
          "title": "Refactor E-commerce Product Listing (Architectural Principles)",
          "description": "\nYou are given a simplified React application that displays a list of products. Currently, all logic (data fetching, state management, component rendering) is tightly coupled within a single `ProductList` component or its parent `App` component.\n\nYour task is to refactor this application by applying good frontend architectural principles, specifically focusing on:\n\n1.  **Separation of Concerns**: Distribute logic into appropriate layers (UI, Application/State, Infrastructure/API).\n2.  **Feature-Based Organization**: If there were more features, how would you structure `products` feature?\n3.  **Container/Presentational Pattern (or similar for Hooks)**: Separate data-fetching/logic from pure rendering concerns for `ProductList`.\n\n**Requirements:**\n*   Create a `ProductCard` component (presentational) that displays a single product.\n*   Create a `ProductList` component (presentational) that renders a list of `ProductCard`s.\n*   Create a custom hook `useProducts` (application layer) responsible for fetching products and managing loading/error states.\n*   Create a `productApi` service (infrastructure layer) that handles the actual `fetch` call to the mock API.\n*   The main `App` component should orchestrate by using the `useProducts` hook and passing data to the `ProductList`.\n\n**Mock API Endpoint:** `https://fakestoreapi.com/products?limit=5`\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState, useEffect } from 'react';\nimport './App.css';\n\ninterface Product {\n  id: number;\n  title: string;\n  price: number;\n  description: string;\n  category: string;\n  image: string;\n}\n\n// Current monolithic approach (all in one place)\nfunction ProductListMonolithic() {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch('https://fakestoreapi.com/products?limit=5');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data: Product[] = await response.json();\n        setProducts(data);\n      } catch (e: any) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  if (loading) return <div>Loading products...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div className=\"product-list-container\">\n      {products.map((product) => (\n        <div key={product.id} className=\"product-card-monolithic\">\n          <img src={product.image} alt={product.title} style={{ width: '100px', height: '100px', objectFit: 'cover' }} />\n          <h3>{product.title}</h3>\n          <p>${product.price.toFixed(2)}</p>\n          <p>{product.description.substring(0, 100)}...</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <h1>Our Products (Monolithic)</h1>\n      <ProductListMonolithic />\n    </div>\n  );\n}\n\nexport default App;\n\n// Minimal App.css\n/* .App { text-align: center; padding: 20px; }\n.product-list-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }\n.product-card-monolithic { border: 1px solid #ccc; padding: 15px; border-radius: 8px; width: 250px; text-align: left; } */\n",
          "solutionCode": "import React, { useState, useEffect, useCallback } from 'react';\nimport './App.css'; // Assume App.css provides basic styling\n\n// --- 1. Domain Layer: Product Model --- (Implicit in interface, explicit if complex validation needed)\ninterface Product {\n  id: number;\n  title: string;\n  price: number;\n  description: string;\n  category: string;\n  image: string;\n}\n\n// --- 2. Infrastructure Layer: productApi Service ---\nconst productApi = {\n  fetchProducts: async (limit: number = 5): Promise<Product[]> => {\n    const response = await fetch(`https://fakestoreapi.com/products?limit=${limit}`);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch products: ${response.statusText}`);\n    }\n    return response.json();\n  },\n};\n\n// --- 3. Application Layer: useProducts Custom Hook ---\nconst useProducts = (limit?: number) => {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadProducts = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        const data = await productApi.fetchProducts(limit);\n        setProducts(data);\n      } catch (e: any) {\n        setError(e.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadProducts();\n  }, [limit]); // Re-fetch if limit changes\n\n  return { products, loading, error };\n};\n\n// --- 4. UI Layer: Presentational Components ---\n\ninterface ProductCardProps {\n  product: Product;\n}\n\nconst ProductCard: React.FC<ProductCardProps> = React.memo(({ product }) => {\n  console.log(`Rendering ProductCard: ${product.title}`);\n  return (\n    <div className=\"product-card\">\n      <img src={product.image} alt={product.title} style={{ width: '100px', height: '100px', objectFit: 'cover' }} />\n      <h3>{product.title}</h3>\n      <p>${product.price.toFixed(2)}</p>\n      <p>{product.description.substring(0, 70)}...</p>\n    </div>\n  );\n});\n\ninterface ProductListProps {\n  products: Product[];\n}\n\nconst ProductList: React.FC<ProductListProps> = React.memo(({ products }) => {\n  console.log('Rendering ProductList');\n  return (\n    <div className=\"product-list-container\">\n      {products.map((product) => (\n        <ProductCard key={product.id} product={product} />\n      ))}\n    </div>\n  );\n});\n\n// --- 5. Main Application Orchestration --- (App Component)\nfunction App() {\n  const { products, loading, error } = useProducts(5); // Fetch 5 products\n\n  if (loading) return <div className=\"app-status\">Loading products...</div>;\n  if (error) return <div className=\"app-status\">Error: {error}</div>;\n\n  return (\n    <div className=\"App\">\n      <h1>Our Products (Refactored)</h1>\n      <ProductList products={products} />\n    </div>\n  );\n}\n\nexport default App;\n\n/* App.css (for reference, assume basic styles exist) */\n/*\n.App { text-align: center; padding: 20px; }\n.app-status { margin-top: 20px; font-size: 1.2em; color: #555; }\n.product-list-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 20px; }\n.product-card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; width: 280px; text-align: left; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; flex-direction: column; align-items: flex-start; }\n.product-card img { border-radius: 4px; margin-bottom: 10px; }\n.product-card h3 { font-size: 1.1em; margin: 0 0 5px; color: #333; }\n.product-card p { font-size: 0.9em; color: #666; margin: 0; }\n*/\n",
          "testCases": [
            "Application loads successfully and displays 5 products.",
            "Loading state is shown while data is being fetched.",
            "Error message is displayed if the API call fails (e.g., by changing the API URL to an invalid one).",
            "`ProductCard` and `ProductList` are pure presentational components, receiving data via props.",
            "`useProducts` hook encapsulates data fetching logic and state.",
            "`productApi` service handles the direct `fetch` call.",
            "Ensure `ProductCard` and `ProductList` use `React.memo` for performance optimization, demonstrating awareness of common React best practices for presentational components."
          ],
          "hints": [
            "Start by defining your `Product` interface (model).",
            "Create the `productApi` object with a `fetchProducts` method first. This is your infrastructure layer.",
            "Then, build the `useProducts` custom hook. It will utilize `useState` and `useEffect` and call `productApi.fetchProducts`. This is your application layer.",
            "Next, create the `ProductCard` component. It should be a functional component that accepts a `product` prop and renders its details. Think about making it a `React.memo` component.",
            "Similarly, create the `ProductList` component. It should accept an array of `products` and map over them to render `ProductCard` components. Also consider `React.memo` here.",
            "Finally, update your `App` component to use the `useProducts` hook and pass the `products` to the `ProductList` component.",
            "For the file structure, imagine a `features/products/` directory containing `components/ProductCard.tsx`, `components/ProductList.tsx`, `hooks/useProducts.ts`, and `services/productApi.ts`."
          ],
          "tags": [
            "React",
            "Architecture",
            "Design Patterns",
            "Hooks",
            "API Integration",
            "Refactoring",
            "State Management"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React Components",
            "React Hooks",
            "Asynchronous JavaScript (Fetch API)"
          ],
          "complexity": 8,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Modular Programming",
            "Dependency Injection",
            "Single Responsibility Principle"
          ]
        },
        {
          "id": "task_implement_lazy_loading_observer",
          "title": "Implement Lazy Loading for Image Gallery (IntersectionObserver)",
          "description": "\nBuild a simple HTML page with a gallery of images. Implement lazy loading for these images using the `IntersectionObserver` API.\n\n**Requirements:**\n1.  **HTML Structure**: Create at least 10 `<img>` tags. Each image should initially have a low-resolution placeholder `src` (e.g., a tiny GIF or data URL) and the actual high-resolution image URL stored in a `data-src` attribute.\n    *   Example: `<img src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/400x300?landscape&sig=1\" alt=\"Random Image\" class=\"lazy-img\">`\n2.  **CSS for Scrollability**: Ensure there's enough content on the page (e.g., using `height: 100vh` on `div`s before some images) so that images are initially off-screen and require scrolling to become visible.\n3.  **JavaScript Logic**: Implement `IntersectionObserver`:\n    *   Select all images with the class `lazy-img`.\n    *   For each image, observe its intersection with the viewport.\n    *   When an image becomes intersecting (`entry.isIntersecting` is true):\n        *   Set its `src` attribute to the value from its `data-src` attribute.\n        *   Remove the `data-src` attribute to prevent re-processing.\n        *   Stop observing the image (using `observer.unobserve()`) to free up resources.\n4.  **Placeholder/Loading Feedback**: Optionally, add a visual effect (e.g., a smooth opacity transition or a subtle background color) to indicate when an image loads.\n5.  **Robustness**: Ensure the script runs only after the DOM is fully loaded (`DOMContentLoaded`).\n",
          "difficulty": "medium",
          "startingCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lazy Load Image Gallery</title>\n    <style>\n        body { font-family: sans-serif; text-align: center; margin: 0; padding: 0; }\n        .intro-section { height: 100vh; display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; font-size: 2em; }\n        .image-gallery { display: flex; flex-direction: column; align-items: center; padding: 20px; }\n        .lazy-img {\n            width: 80%; /* Adjust as needed */\n            max-width: 600px;\n            height: 300px; /* Fixed height to demonstrate layout shift if not careful */\n            background-color: #eee;\n            margin-bottom: 30px;\n            opacity: 0.7; /* Initial slight opacity */\n            transition: opacity 0.5s ease-in-out; /* Smooth transition */\n        }\n        .lazy-img.loaded {\n            opacity: 1;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"intro-section\">Scroll Down to See Images Load!</div>\n\n    <div class=\"image-gallery\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?nature&sig=1\" alt=\"Nature 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?city&sig=2\" alt=\"City 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?animals&sig=3\" alt=\"Animals 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?food&sig=4\" alt=\"Food 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?travel&sig=5\" alt=\"Travel 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?ocean&sig=6\" alt=\"Ocean 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?mountains&sig=7\" alt=\"Mountains 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?deserts&sig=8\" alt=\"Deserts 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?forests&sig=9\" alt=\"Forests 1\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?lakes&sig=10\" alt=\"Lakes 1\">\n    </div>\n\n    <script>\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            const lazyImages = document.querySelectorAll(\"img.lazy-img\");\n\n            const imageObserver = new IntersectionObserver((entries, observer) => {\n                entries.forEach(entry => {\n                    if (entry.isIntersecting) {\n                        // Implement the logic to load the actual image\n                        const img = entry.target;\n                        // img.src = img.dataset.src;\n                        // img.removeAttribute('data-src');\n                        // img.classList.add('loaded');\n                        // observer.unobserve(img);\n                    }\n                });\n            }, {\n                // Optional: set a rootMargin to load images a bit before they hit the viewport\n                // rootMargin: '0px 0px 50px 0px'\n            });\n\n            lazyImages.forEach(img => {\n                imageObserver.observe(img);\n            });\n        });\n    </script>\n</body>\n</html>\n",
          "solutionCode": "<!-- index.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Lazy Load Image Gallery</title>\n    <style>\n        body { font-family: sans-serif; text-align: center; margin: 0; padding: 0; }\n        .intro-section { height: 100vh; display: flex; align-items: center; justify-content: center; background-color: #f5f5f5; font-size: 2em; color: #333; }\n        .image-gallery { display: flex; flex-direction: column; align-items: center; padding: 20px; }\n        .lazy-img {\n            width: 80%; /* Adjust as needed */\n            max-width: 600px;\n            height: 300px; /* Fixed height to reserve space and prevent CLS */\n            background-color: #eee;\n            margin-bottom: 30px;\n            opacity: 0.7; /* Initial slight opacity */\n            transition: opacity 0.5s ease-in-out, background-color 0.5s ease-in-out; /* Smooth transition for opacity and background */\n        }\n        .lazy-img.loaded {\n            opacity: 1;\n            background-color: transparent; /* Remove placeholder background after load */\n        }\n        /* Ensure images take up their space initially to avoid CLS */\n        .lazy-img[data-src] {\n            /* You can add a placeholder image here or use a background-image */\n            /* For a better UX, consider aspect-ratio padding-bottom trick */\n            /* Or simply ensure width/height are set in HTML or CSS */\n        }\n    </style>\n</head>\n<body>\n    <div class=\"intro-section\">Scroll Down to See Images Load!</div>\n\n    <div class=\"image-gallery\">\n        <!-- Note: Added width/height for better CLS prevention, even if using CSS height -->\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?nature&sig=1\" alt=\"Nature 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?city&sig=2\" alt=\"City 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?animals&sig=3\" alt=\"Animals 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?food&sig=4\" alt=\"Food 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?travel&sig=5\" alt=\"Travel 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?ocean&sig=6\" alt=\"Ocean 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?mountains&sig=7\" alt=\"Mountains 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?deserts&sig=8\" alt=\"Deserts 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?forests&sig=9\" alt=\"Forests 1\" width=\"600\" height=\"300\">\n        <img class=\"lazy-img\" src=\"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\" data-src=\"https://source.unsplash.com/random/600x300?lakes&sig=10\" alt=\"Lakes 1\" width=\"600\" height=\"300\">\n    </div>\n\n    <script>\n        document.addEventListener(\"DOMContentLoaded\", function() {\n            const lazyImages = document.querySelectorAll(\"img.lazy-img\");\n\n            const imageObserver = new IntersectionObserver((entries, observer) => {\n                entries.forEach(entry => {\n                    if (entry.isIntersecting) {\n                        const img = entry.target; // The <img> element that intersected\n                        const dataSrc = img.getAttribute('data-src');\n\n                        if (dataSrc) { // Ensure data-src exists\n                            img.src = dataSrc; // Set the actual image source\n                            img.removeAttribute('data-src'); // Remove data-src once loaded\n                            img.onload = () => {\n                                img.classList.add('loaded'); // Add 'loaded' class for visual feedback\n                            };\n                        }\n                        observer.unobserve(img); // Stop observing this image\n                    }\n                });\n            }, {\n                // Optional: rootMargin loads images earlier, e.g., 50px before entering viewport\n                rootMargin: '0px 0px 50px 0px'\n            });\n\n            lazyImages.forEach(img => {\n                imageObserver.observe(img);\n            });\n        });\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "Initially, only the 'Scroll Down' section is visible, and images below are not loaded (check network tab).",
            "Scrolling down the page causes images to load as they approach the viewport (check network tab and visual appearance).",
            "The `src` attribute of loaded images should match their original `data-src` value.",
            "The `data-src` attribute should be removed from images once they are loaded.",
            "Images should transition smoothly (opacity) as they load.",
            "No significant layout shifts should occur when images load (due to `width` and `height` attributes or CSS preventing content reflow)."
          ],
          "hints": [
            "Use `document.querySelectorAll()` to get a NodeList of all your target images.",
            "The `IntersectionObserver` constructor takes a callback function and an optional `options` object.",
            "Inside the callback, `entries` is an array of `IntersectionObserverEntry` objects. Check `entry.isIntersecting`.",
            "Once an image is loaded, call `observer.unobserve(entry.target)` to stop watching it; this is crucial for performance.",
            "Remember to set both `width` and `height` attributes directly on the `<img>` tags or use CSS to reserve space to prevent Cumulative Layout Shift (CLS)."
          ],
          "tags": [
            "Lazy Loading",
            "Performance",
            "Intersection Observer API",
            "JavaScript",
            "DOM Manipulation",
            "Frontend Optimization"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "HTML Basics",
            "CSS Layout",
            "JavaScript DOM Events",
            "Asynchronous JavaScript"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Core Web Vitals",
            "Image Optimization",
            "User Experience"
          ]
        }
      ]
    }
  },
  {
    "id": "76447370-0415-49aa-916f-aec1cb21075c",
    "startLine": 17100,
    "endLine": 17199,
    "processedDate": "2025-06-17T15:48:23.494Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_lazy_loading_images_intersection_observer",
          "title": "Lazy Loading Images with Intersection Observer",
          "content": "Lazy loading is a technique that defers the loading of non-critical resources at page load time. Instead, these resources are loaded at the moment of need. For images, this means loading them only when they are about to enter the viewport, saving bandwidth and improving initial page load performance.\n\nThe `IntersectionObserver` API provides a way to asynchronously observe changes in the intersection of a target element with an ancestor element or with the top-level document's viewport. It's a highly efficient way to implement lazy loading because it avoids constant polling or event listeners (like `scroll` or `resize`), which can be performance heavy.\n\n## Key Concepts\n*   **`IntersectionObserver`**: A browser API that reports when an element (target) enters or exits the viewport (or another element).\n*   **Callback function**: A function that `IntersectionObserver` executes whenever the target element crosses one of the specified thresholds.\n*   **`IntersectionObserverEntry`**: Objects passed to the callback, each describing the intersection change of one observed target.\n    *   `isIntersecting`: A boolean indicating if the target element is currently intersecting with the root.\n*   **`observer.observe(targetElement)`**: Starts observing a target element.\n*   **`observer.disconnect()`**: Stops observing all target elements for a given observer.\n*   **Placeholder Image**: A lightweight, often blurry or low-resolution image shown immediately to improve perceived performance while the actual image loads.",
          "examples": [
            {
              "id": "example_lazy_loading_image_1",
              "title": "React Component for Lazy Loading Images",
              "code": "import React, { useRef, useEffect, useState } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  placeholder: string;\n  alt: string;\n}\n\nfunction LazyImage({ src, placeholder, alt }: LazyImageProps) {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting) {\n          setIsLoaded(true);\n          observer.disconnect(); // Stop observing once loaded\n        }\n      },\n      { rootMargin: '0px 0px 50px 0px' } // Load when 50px from bottom of viewport\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    // Clean up observer on component unmount\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n      observer.disconnect();\n    };\n  }, []); // Empty dependency array means this effect runs once on mount\n\n  return (\n    <img\n      ref={imgRef}\n      src={isLoaded ? src : placeholder}\n      alt={alt}\n      style={{ opacity: isLoaded ? 1 : 0.5, transition: 'opacity 0.3s ease-in-out' }} // Visual transition\n    />\n  );\n}",
              "explanation": "This React component demonstrates lazy loading using `IntersectionObserver`. It takes a `src` (the actual image), `placeholder` (a low-res initial image), and `alt` text. Initially, it displays the `placeholder`. Once the `imgRef` element enters the viewport (or is within 50px of it due to `rootMargin`), `isLoaded` is set to `true`, switching the `src` to the high-resolution image. The observer is then disconnected to prevent further observations and save resources. The `useEffect` cleanup function ensures the observer is properly disconnected when the component unmounts.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_lazy_loading_1",
            "question_lazy_loading_2",
            "question_lazy_loading_3",
            "question_lazy_loading_4"
          ],
          "relatedTasks": [
            "task_lazy_loading_1"
          ],
          "tags": [
            "React",
            "Performance",
            "Lazy Loading",
            "IntersectionObserver",
            "Frontend",
            "Web APIs"
          ],
          "technology": "React, TypeScript, Web APIs",
          "prerequisites": [
            "react_basics",
            "dom_manipulation",
            "javascript_async"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "performance_optimization",
            "complex_ui_patterns"
          ]
        },
        {
          "id": "theory_web_application_optimization",
          "title": "Web Application Performance Optimization Strategies",
          "content": "Optimizing a web application's performance is crucial for user experience, SEO, and business success. It involves a multi-faceted approach targeting various layers of the application stack.\n\n## 1. Front-end Optimization\nFocuses on improving the client-side rendering and interaction speed.\n*   **Minimize HTTP requests**: Combine and concatenate CSS/JS files, use CSS sprites, and inline small assets (e.g., SVGs, base64 images).\n*   **Implement code splitting and lazy loading**: Load only the necessary JavaScript, CSS, and images for the initial view. Defer loading of modules, components, or routes until they are needed.\n*   **Use efficient CSS selectors and reduce unused CSS**: Avoid overly complex or deeply nested selectors. Utilize tools to identify and remove dead CSS code (e.g., PurgeCSS, UnCSS).\n*   **Optimize critical rendering path**: Prioritize the content and resources needed to render the above-the-fold content first. Defer non-critical CSS/JS.\n*   **Implement responsive images with `srcset`/`sizes`**: Serve different image resolutions and formats based on the user's device, viewport size, and pixel density. Use `<picture>` for art direction.\n\n## 2. Back-end Optimization\nEnsures the server responds quickly and efficiently.\n*   **Implement server-side caching**: Cache frequently accessed data, database queries, and rendered HTML fragments to reduce processing load.\n*   **Optimize database queries**: Use indexes, avoid N+1 queries, use efficient joins, and select only necessary columns.\n*   **Use connection pooling**: Reuse database connections instead of establishing new ones for each request, reducing overhead.\n*   **Implement pagination for large data sets**: Retrieve and display data in chunks rather than loading entire datasets, which can overwhelm both server and client.\n*   **Consider serverless architecture for scaling**: Utilize services like AWS Lambda, Azure Functions, or Google Cloud Functions for auto-scaling and cost efficiency, especially for sporadic workloads.\n\n## 3. Network Optimization\nAims to reduce the time it takes for data to travel between client and server.\n*   **Enable HTTP/2 or HTTP/3**: These protocols offer multiplexing, header compression, server push, and other features that improve concurrent request handling over a single connection.\n*   **Use CDNs (Content Delivery Networks) for static assets**: Distribute static files (images, CSS, JS) closer to users geographically, reducing latency.\n*   **Implement proper cache headers**: Utilize `Cache-Control`, `Expires`, and `ETag` headers to instruct browsers and proxies on how long to cache resources, reducing subsequent requests.\n*   **Minimize cookie size**: Large cookies are sent with every HTTP request, increasing overhead. Keep them lean.\n*   **Enable Brotli/Gzip compression**: Compress text-based assets (HTML, CSS, JS, SVG) before sending them over the network, significantly reducing transfer size.\n\n## 4. Asset Optimization\nFocuses on making individual files smaller and more efficient.\n*   **Minify and compress JavaScript, CSS, HTML**: Remove unnecessary characters (whitespace, comments) and shorten variable names to reduce file size.\n*   **Optimize images (WebP format, proper sizing)**: Convert images to modern formats like WebP (or AVIF) for better compression. Ensure images are sized correctly for their display dimensions to avoid downloading excessively large files.\n*   **Use `font-display` property for text rendering**: Control how fonts are loaded and displayed, preventing Flash of Invisible Text (FOIT) or Flash of Unstyled Text (FOUT). Common values include `swap`, `fallback`, `optional`, `block`.\n*   **Implement resource hints (preload, prefetch)**: `preload` fetches a resource that is needed in the current navigation but might not be discovered immediately. `prefetch` fetches a resource that might be needed for a future navigation.\n\n## 5. Measuring Performance\nTools and metrics to identify bottlenecks and track improvements.\n*   **Use Lighthouse for auditing**: A Google tool that audits web pages for performance, accessibility, best practices, and SEO, providing actionable recommendations.\n*   **Monitor Core Web Vitals**: A set of user-centric metrics (LCP, FID, CLS) that quantify key aspects of the user experience, reflecting real-world usage.\n    *   **LCP (Largest Contentful Paint)**: Measures perceived load speed, marking the point when the page's main content has likely loaded.\n    *   **FID (First Input Delay)**: Measures responsiveness, quantifying the time from when a user first interacts with a page to when the browser is actually able to begin processing event handlers.\n    *   **CLS (Cumulative Layout Shift)**: Measures visual stability, quantifying unexpected layout shifts during the loading phase.\n*   **Implement Real User Monitoring (RUM)**: Collects performance data from actual users visiting your website, providing insights into real-world performance under various network conditions and device types.\n*   **Set up performance budgets**: Define thresholds for key metrics (e.g., JavaScript bundle size, image size, initial load time) and use automated tools to ensure these budgets are not exceeded during development and deployment.",
          "examples": [
            {
              "id": "example_performance_srcset",
              "title": "Responsive Images with srcset",
              "code": "<img\n  src=\"image-small.jpg\"\n  srcset=\"image-small.jpg 480w, image-medium.jpg 800w, image-large.jpg 1200w\"\n  sizes=\"(max-width: 600px) 480px, (max-width: 1000px) 800px, 1200px\"\n  alt=\"Descriptive Alt Text\"\n/>",
              "explanation": "This HTML snippet demonstrates responsive images using `srcset` and `sizes`. `srcset` provides a list of image candidates with their intrinsic widths (`w`). `sizes` tells the browser what width the image will occupy at different viewport sizes. The browser then intelligently selects the most appropriate image from `srcset` based on the `sizes` attribute and its own internal heuristics (like pixel density, network speed), improving load times by serving smaller images to smaller screens.",
              "language": "html"
            },
            {
              "id": "example_performance_font_display",
              "title": "Using font-display in CSS",
              "code": "@font-face {\n  font-family: 'Open Sans';\n  src: url('/fonts/OpenSans-Regular.woff2') format('woff2');\n  font-weight: 400;\n  font-display: swap; /* Most common and recommended value */\n}",
              "explanation": "The `font-display: swap;` property tells the browser how to render text while a web font is loading. With `swap`, the browser will immediately render text using a fallback font. Once the custom font loads, it will swap out the fallback font for the custom one. This prevents Flash of Invisible Text (FOIT) and improves perceived performance, although it might cause a Flash of Unstyled Text (FOUT).",
              "language": "css"
            },
            {
              "id": "example_performance_resource_hints",
              "title": "Resource Hints: Preload and Prefetch",
              "code": "<!-- Preload a critical CSS file that is discovered later in the HTML -->\n<link rel=\"preload\" href=\"/styles/critical.css\" as=\"style\">\n\n<!-- Prefetch a resource (e.g., JavaScript for a future route) -->\n<link rel=\"prefetch\" href=\"/js/next-route-bundle.js\" as=\"script\">",
              "explanation": "`<link rel=\"preload\">` tells the browser to fetch a resource immediately that is critical for the current page, even if it's not discovered until later in the parsing process (e.g., fonts, background images in CSS). `as=\"style\"` or `as=\"script\"` specifies the type of resource. `<link rel=\"prefetch\">` suggests to the browser that a resource might be needed for a future navigation, so it can be fetched in the background with low priority when the browser is idle.",
              "language": "html"
            }
          ],
          "relatedQuestions": [
            "question_performance_1",
            "question_performance_2",
            "question_performance_3",
            "question_performance_4",
            "question_performance_5",
            "question_performance_6",
            "question_performance_7",
            "question_performance_8",
            "question_performance_9"
          ],
          "relatedTasks": [
            "task_performance_1",
            "task_performance_2",
            "task_performance_3"
          ],
          "tags": [
            "Performance",
            "Optimization",
            "Frontend",
            "Backend",
            "Network",
            "Assets",
            "Core Web Vitals",
            "Lighthouse",
            "SEO"
          ],
          "technology": "Web Performance, HTTP, CSS, JavaScript, HTML, Databases",
          "prerequisites": [
            "html_basics",
            "css_basics",
            "javascript_basics",
            "http_basics",
            "browser_rendering"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "requiredFor": [
            "senior_frontend",
            "fullstack_development",
            "devops_frontend"
          ]
        },
        {
          "id": "theory_server_side_rendering",
          "title": "Server-Side Rendering (SSR)",
          "content": "Server-Side Rendering (SSR) is a technique where the initial rendering of web pages occurs on the server, generating a fully-formed HTML document that is then sent to the client's browser. This contrasts with Client-Side Rendering (CSR), where the browser receives a minimal HTML shell and relies on JavaScript to fetch data and construct the DOM.\n\n## Key Aspects of SSR\n\n### 1. Performance Benefits\n*   **Faster First Contentful Paint (FCP)**: Users see content much faster because the browser receives ready-to-render HTML immediately, reducing the blank screen time associated with CSR.\n*   **Better Time to Interactive (TTI)**: While FCP is faster, the page might not be interactive until client-side JavaScript loads and 'hydrates' the page. However, for many users, seeing content quickly is paramount.\n*   **Improved Core Web Vitals scores**: SSR generally contributes positively to metrics like LCP and CLS due to pre-rendered content.\n\n### 2. SEO Advantages\n*   **Search engines can easily index content**: Bots often struggle with JavaScript-heavy CSR applications. SSR provides a fully rendered HTML snapshot, making it much easier for search engine crawlers (like Googlebot) to parse and index the content, improving search rankings.\n*   **Better social media sharing previews**: When a link to an SSR page is shared on platforms like Facebook or Twitter, the social media crawlers can easily access and generate accurate link previews (opengraph tags, titles, descriptions) because they receive static HTML.\n\n### 3. Implementation Approaches\n*   **Traditional server templating**: Old-school approach using languages like PHP (Blade, Twig), Ruby on Rails (ERB), Python (Django templates), or Java (JSP) to render HTML on the server.\n*   **Modern JavaScript frameworks (Next.js, Nuxt.js)**: Frameworks built on React (Next.js), Vue (Nuxt.js), or Angular (Angular Universal) enable developers to write universal (isomorphic) JavaScript code that runs both on the server and the client, simplifying SSR setup for SPA frameworks.\n*   **Universal JavaScript applications**: Applications where the same JavaScript code can run both on the server and in the browser, allowing for shared logic and components.\n\n### 4. Tradeoffs\n*   **Higher server load**: The server has to do more work by rendering each page, which can increase server costs and potentially require more robust server infrastructure.\n*   **More complex development setup**: Debugging can be more challenging, and managing server-side specific logic (e.g., Node.js environment vs. browser environment) adds complexity.\n*   **Potentially slower Time to First Byte (TTFB)**: While FCP is faster, the TTFB can be slower than CSR because the server needs to fetch data, render the page, and then send the full HTML, which takes time. For CSR, the initial HTML is minimal and sent quickly.\n\n### 5. Hydration\n*   **Definition**: Hydration is the process by which client-side JavaScript takes over a server-rendered HTML page. It involves attaching event listeners, making the components interactive, and reconstructing the component tree in the browser. Without hydration, the server-rendered HTML would be static and unresponsive to user input.\n*   **How it works**: The server sends HTML and possibly initial state. The client then loads the JavaScript bundle. This JavaScript re-renders the component (often into a virtual DOM) and compares it with the existing server-rendered HTML. It then attaches event handlers to the corresponding DOM elements, making the page interactive without re-rendering the entire visible content.\n*   **Challenges**: Hydration can sometimes lead to a period where the page looks ready but isn't interactive (known as 'TBT' - Total Blocking Time, a Core Web Vital related to interactivity). Mismatch between server and client rendering can also cause issues.",
          "examples": [
            {
              "id": "example_ssr_nextjs_getserversideprops",
              "title": "Next.js SSR with getServerSideProps",
              "code": "// pages/posts/[id].tsx\nimport { GetServerSideProps } from 'next';\n\ninterface PostProps {\n  post: { id: number; title: string; content: string };\n}\n\nfunction Post({ post }: PostProps) {\n  return (\n    <div>\n      <h1>{post.title}</h1>\n      <p>{post.content}</p>\n    </div>\n  );\n}\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  const { id } = context.params as { id: string };\n  // Fetch data on the server-side before rendering\n  const res = await fetch(`https://api.example.com/posts/${id}`);\n  const post = await res.json();\n\n  if (!post) {\n    return {\n      notFound: true,\n    };\n  }\n\n  return {\n    props: { post }, // Will be passed to the page component as props\n  };\n};\n\nexport default Post;",
              "explanation": "This Next.js example demonstrates `getServerSideProps` for SSR. The `getServerSideProps` function runs exclusively on the server at request time. It fetches data (e.g., from an API) and then passes this data as `props` to the React component. The page is then rendered to HTML on the server with this data, and the full HTML is sent to the client. This ensures the content is present for SEO and fast FCP.",
              "language": "typescript"
            },
            {
              "id": "example_ssr_conceptual_hydration",
              "title": "Conceptual Hydration Process",
              "code": "<!-- Server-rendered HTML received by client -->\n<div id=\"app\">\n  <button>Click Me (Static)</button>\n</div>\n\n// Client-side JavaScript\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nfunction App() {\n  const [count, setCount] = React.useState(0);\n  return (\n    <div>\n      <button onClick={() => setCount(count + 1)}>Click Me ({count})</button>\n    </div>\n  );\n}\n\n// Instead of ReactDOM.render, use ReactDOM.hydrate\n// This tells React to attach event listeners and make the server-rendered HTML interactive\nReactDOM.hydrate(<App />, document.getElementById('app'));",
              "explanation": "This conceptual example shows how hydration works. The server sends the initial HTML containing a `<button>`. On the client, instead of re-rendering everything from scratch with `ReactDOM.render`, `ReactDOM.hydrate` is used. This function instructs React to 'take over' the existing HTML, re-use its structure, and attach event handlers (like the `onClick` for the button) to make it interactive, without re-drawing the entire DOM.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_ssr_1",
            "question_ssr_2",
            "question_ssr_3",
            "question_ssr_4",
            "question_ssr_5"
          ],
          "relatedTasks": [
            "task_ssr_1"
          ],
          "tags": [
            "SSR",
            "CSR",
            "Next.js",
            "React",
            "Performance",
            "SEO",
            "Hydration",
            "Frontend Architecture"
          ],
          "technology": "React, Next.js, Node.js",
          "prerequisites": [
            "react_basics",
            "web_performance",
            "frontend_architecture"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "senior_frontend",
            "solution_architect",
            "performance_engineer"
          ]
        },
        {
          "id": "theory_react_application_deployment",
          "title": "Deploying a React Application to Production",
          "content": "Deploying a React application to production involves several critical steps to ensure it is secure, performant, and reliable. The process typically goes beyond simply building the application and includes environment setup, configuration, and continuous deployment practices.\n\n## Key Steps for React Application Deployment\n\n1.  **Build the application**: The first step is to generate optimized production-ready static assets. This usually involves running a build command, e.g., `npm run build` or `yarn build`, which uses tools like Webpack, Rollup, or Vite to transpile, minify, bundle, and optimize your JavaScript, CSS, and other assets.\n\n2.  **Configure environment variables**: Production environments often require different API endpoints, keys, or configurations than development. Use environment variables (e.g., `process.env.NODE_ENV`, `.env` files with `dotenv`, or platform-specific variables) to manage these differences without hardcoding sensitive information.\n\n3.  **Choose a hosting platform**: Select a suitable platform for serving your static assets. Popular choices include:\n    *   **Static Site Hosts**: Netlify, Vercel (ideal for Next.js/Gatsby), GitHub Pages, Surge.sh. These offer easy setup, CDNs, and often CI/CD.\n    *   **Cloud Object Storage**: AWS S3 with CloudFront, Google Cloud Storage, Azure Blob Storage. Highly scalable and cost-effective for static files.\n    *   **Traditional Web Servers**: Nginx, Apache. Requires manual configuration for serving static files and handling routing.\n    *   **Containerization**: Docker can package your React app (and a web server like Nginx) into a portable image, deployable to Kubernetes, ECS, or other container orchestration services.\n\n4.  **Configure routing for SPAs**: React applications are often Single Page Applications (SPAs). This means client-side routing. On a web server, if a user directly navigates to a sub-route (e.g., `/about`), the server needs to be configured to return the main `index.html` file for all routes not matching static assets, allowing the client-side router to take over. This is often done with a 'fallback' or 'rewrite' rule (e.g., Nginx `try_files` directive).\n\n5.  **Set up Continuous Integration/Continuous Deployment (CI/CD)**: Automate the build, test, and deployment process. Tools like GitHub Actions, GitLab CI/CD, Jenkins, Travis CI, or Netlify/Vercel's built-in CI/CD pipelines can automatically deploy your application whenever changes are pushed to your main branch. This ensures faster, more reliable, and consistent deployments.\n\n6.  **Implement Caching and CDN**: Leverage CDNs to distribute your static assets globally and reduce latency for users worldwide. Configure appropriate HTTP caching headers (`Cache-Control`, `ETag`) to ensure browsers cache assets effectively and re-download only when necessary.\n\n7.  **Monitor and Logging**: After deployment, set up monitoring tools (e.g., Sentry for error tracking, Google Analytics for usage, performance monitoring tools like Lighthouse, RUM) and logging (e.g., for server-side issues, API errors) to track application health and identify issues quickly.\n\n8.  **Security Best Practices**: Implement HTTPS, sanitize user inputs, secure API keys, and manage dependencies to avoid vulnerabilities. Ensure `package-lock.json` (or `yarn.lock`) is committed and up-to-date.\n\n9.  **Pre-rendering/SSR/SSG (Optional but Recommended)**: For better SEO and initial load performance, consider pre-rendering (e.g., React Snap), Server-Side Rendering (e.g., Next.js `getServerSideProps`), or Static Site Generation (e.g., Next.js `getStaticProps`, Gatsby).\n\nBy following these steps, you can ensure a robust and efficient deployment pipeline for your React application.",
          "examples": [
            {
              "id": "example_react_deployment_build_script",
              "title": "Package.json Build Script",
              "code": "{\n  \"name\": \"my-react-app\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"react-scripts\": \"5.0.1\"\n  },\n  \"browserslist\": {\n    \"production\": [\n      \">0.2%\",\n      \"not dead\",\n      \"not op_mini all\"\n    ],\n    \"development\": [\n      \"last 1 chrome version\",\n      \"last 1 firefox version\",\n      \"last 1 safari version\"\n    ]\n  }\n}",
              "explanation": "This `package.json` snippet from a Create React App project shows the standard `build` script. Running `npm run build` (or `yarn build`) executes `react-scripts build`. This command bundles the React application into static files (HTML, CSS, JS, images) inside a `build` directory, optimized for production. These static files are then ready for deployment to a web server or static hosting service.",
              "language": "json"
            },
            {
              "id": "example_react_deployment_nginx_config",
              "title": "Nginx Configuration for React SPA",
              "code": "server {\n    listen 80;\n    server_name yourdomain.com;\n\n    root /usr/share/nginx/html; # Path to your built React app (e.g., /app/build)\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n\n    # Optional: Cache static assets\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        expires 1y;\n        add_header Cache-Control \"public, immutable\";\n    }\n\n    error_page 404 /index.html;\n}",
              "explanation": "This Nginx configuration demonstrates how to serve a React SPA. The `root` directive points to where your compiled React application files (from the `build` folder) are located. The crucial part is `try_files $uri $uri/ /index.html;`. This tells Nginx to first try to serve the requested URI as a static file, then as a directory. If neither exists, it falls back to serving `index.html`. This ensures that client-side routes (e.g., `/about`) are handled by React Router after `index.html` is loaded. The optional `location` block for static assets sets long caching headers for performance.",
              "language": "nginx"
            }
          ],
          "relatedQuestions": [
            "question_react_deployment_1",
            "question_react_deployment_2",
            "question_react_deployment_3",
            "question_react_deployment_4",
            "question_react_deployment_5"
          ],
          "relatedTasks": [
            "task_react_deployment_1",
            "task_react_deployment_2"
          ],
          "tags": [
            "React",
            "Deployment",
            "CI/CD",
            "Web Hosting",
            "Nginx",
            "Webpack",
            "Performance",
            "Security",
            "Frontend"
          ],
          "technology": "React, Node.js, Webpack, Nginx, CI/CD, Cloud Platforms",
          "prerequisites": [
            "react_basics",
            "webpack_basics",
            "http_basics",
            "command_line"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "senior_frontend",
            "devops_frontend",
            "fullstack_development"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_lazy_loading_1",
          "topic": "Lazy Loading Images with Intersection Observer",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary benefit of lazy loading images?",
          "answer": "Reduces initial page load time and bandwidth consumption by only loading images when they are needed (e.g., enter the viewport).",
          "analysisPoints": [
            "Focus on initial page load improvement.",
            "Highlight bandwidth saving as a key benefit."
          ],
          "keyConcepts": [
            "Lazy Loading",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Understanding of basic performance concepts."
          ],
          "example": "N/A",
          "tags": [
            "Lazy Loading",
            "Performance",
            "Flashcard"
          ],
          "prerequisites": [
            "web_performance_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_lazy_loading_2",
          "topic": "IntersectionObserver API",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following is NOT a valid option for configuring an `IntersectionObserver`?",
          "answer": "`offset`",
          "options": [
            "`root`",
            "`rootMargin`",
            "`threshold`",
            "`offset`"
          ],
          "analysisPoints": [
            "Identifies common `IntersectionObserver` options.",
            "Tests knowledge of API configuration."
          ],
          "keyConcepts": [
            "IntersectionObserver",
            "Web APIs"
          ],
          "evaluationCriteria": [
            "Knowledge of `IntersectionObserver` API.",
            "Ability to distinguish valid from invalid configuration properties."
          ],
          "example": "The `IntersectionObserver` constructor accepts an `options` object with `root`, `rootMargin`, and `threshold`. `offset` is not a standard option for configuring it. `root` specifies the element that is used as the viewport for checking intersection. `rootMargin` allows shrinking or growing the root's bounding box. `threshold` is a single number or an array of numbers that indicate at what percentage of the target's visibility the observer's callback should be executed.",
          "tags": [
            "IntersectionObserver",
            "Web APIs",
            "MCQ"
          ],
          "prerequisites": [
            "javascript_dom"
          ],
          "complexity": 6,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_lazy_loading_3",
          "topic": "React Hooks and IntersectionObserver Cleanup",
          "level": "medium",
          "type": "open",
          "question": "In the provided `LazyImage` React component, why is `observer.disconnect()` called inside the `useEffect` cleanup function, and also immediately after `setIsLoaded(true)`?",
          "answer": "The `observer.disconnect()` call inside the `useEffect` cleanup function (`return () => observer.disconnect();`) ensures that the `IntersectionObserver` instance is properly cleaned up when the `LazyImage` component unmounts from the DOM. This prevents memory leaks and ensures that the observer doesn't continue to observe an element that no longer exists.\n\nThe `observer.disconnect()` call immediately after `setIsLoaded(true)` (inside the observer's callback) is a specific optimization for lazy loading. Once the image is loaded, there's no need to continue observing it. Disconnecting immediately saves browser resources by stopping unnecessary observation checks, as the image's source has already been updated.",
          "analysisPoints": [
            "Distinguish between `useEffect` cleanup for unmounting and specific logical cleanup.",
            "Explain memory leak prevention.",
            "Explain resource optimization."
          ],
          "keyConcepts": [
            "React Hooks",
            "useEffect",
            "Cleanup Functions",
            "IntersectionObserver",
            "Performance Optimization",
            "Memory Management"
          ],
          "evaluationCriteria": [
            "Understanding of `useEffect` lifecycle and cleanup.",
            "Knowledge of `IntersectionObserver` behavior.",
            "Ability to explain practical performance optimizations."
          ],
          "example": "N/A",
          "tags": [
            "React",
            "Hooks",
            "IntersectionObserver",
            "Performance",
            "Open-Ended"
          ],
          "prerequisites": [
            "react_hooks",
            "javascript_closures"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_lazy_loading_4",
          "topic": "Lazy Loading Component Enhancement",
          "level": "hard",
          "type": "code",
          "question": "Enhance the `LazyImage` component to include an error state if the `src` image fails to load. When an error occurs, display an `errorPlaceholder` image instead. Provide the modified component and relevant CSS.",
          "answer": "```typescript\nimport React, { useRef, useEffect, useState } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  placeholder: string;\n  errorPlaceholder: string; // New prop for error state\n  alt: string;\n}\n\nfunction LazyImage({ src, placeholder, errorPlaceholder, alt }: LazyImageProps) {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [hasError, setHasError] = useState(false); // New state for error\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting) {\n          setIsLoaded(true);\n          observer.disconnect();\n        }\n      },\n      { rootMargin: '0px 0px 50px 0px' }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n      observer.disconnect();\n    };\n  }, []);\n\n  const handleImageError = () => {\n    setHasError(true); // Set error state on image load failure\n  };\n\n  const currentSrc = hasError ? errorPlaceholder : (isLoaded ? src : placeholder);\n\n  return (\n    <img\n      ref={imgRef}\n      src={currentSrc}\n      alt={alt}\n      onError={handleImageError} // Add onError handler\n      style={{\n        opacity: isLoaded || hasError ? 1 : 0.5, \n        transition: 'opacity 0.3s ease-in-out'\n      }}\n    />\n  );\n}\n```\n\n**Explanation:**\n1.  **`hasError` State**: A new state `hasError` is introduced, initialized to `false`.\n2.  **`errorPlaceholder` Prop**: A new prop `errorPlaceholder` is added to receive the URL for the image to display on error.\n3.  **`handleImageError` Function**: This function is called when the `onError` event of the `<img>` tag fires. It sets `hasError` to `true`.\n4.  **Dynamic `src`**: The `currentSrc` variable now dynamically selects the image source based on `hasError` (highest priority), then `isLoaded`, and finally `placeholder`.\n5.  **`onError` Attribute**: The `onError` attribute is added to the `<img>` tag, pointing to `handleImageError`. This intrinsic HTML attribute is triggered when an error occurs during image loading (e.g., broken URL, corrupted file).",
          "analysisPoints": [
            "Proper use of `useState` for managing component state.",
            "Correct handling of `onError` event on `<img>` tag.",
            "Conditional rendering of image sources.",
            "Demonstrates robust component design."
          ],
          "keyConcepts": [
            "React State",
            "Event Handling",
            "Conditional Rendering",
            "Error Handling",
            "Component Design"
          ],
          "evaluationCriteria": [
            "Ability to extend existing React components.",
            "Understanding of error handling in React.",
            "Implementation of new features in a clean, functional way."
          ],
          "example": "N/A",
          "tags": [
            "React",
            "Lazy Loading",
            "Error Handling",
            "Code Challenge"
          ],
          "prerequisites": [
            "react_hooks",
            "javascript_events"
          ],
          "complexity": 8,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_performance_1",
          "topic": "Web Performance Optimization Basics",
          "level": "easy",
          "type": "flashcard",
          "question": "List two common techniques for minimizing HTTP requests in a web application.",
          "answer": "Bundling/concatenating CSS/JS files and using CSS sprites.",
          "analysisPoints": [
            "Basic understanding of HTTP overhead.",
            "Knowledge of common bundling techniques."
          ],
          "keyConcepts": [
            "HTTP Requests",
            "Bundling",
            "Performance Optimization"
          ],
          "evaluationCriteria": [
            "Recall of fundamental optimization strategies."
          ],
          "example": "N/A",
          "tags": [
            "Performance",
            "HTTP",
            "Flashcard"
          ],
          "prerequisites": [
            "web_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_performance_2",
          "topic": "Responsive Images",
          "level": "medium",
          "type": "mcq",
          "question": "Which HTML attributes are primarily used together to implement responsive images that serve different image resolutions based on screen size and pixel density?",
          "answer": "`srcset` and `sizes`",
          "options": [
            "`src` and `alt`",
            "`srcset` and `sizes`",
            "`width` and `height`",
            "`media` and `src`"
          ],
          "analysisPoints": [
            "Correctly identifies attributes for responsive images.",
            "Distinguishes from basic image attributes."
          ],
          "keyConcepts": [
            "Responsive Images",
            "srcset",
            "sizes",
            "HTML"
          ],
          "evaluationCriteria": [
            "Understanding of modern HTML image techniques."
          ],
          "example": "The `srcset` attribute provides a list of image sources along with their intrinsic widths or pixel densities. The `sizes` attribute informs the browser about the rendered size of the image at different viewport widths. Together, these attributes allow the browser to pick the most appropriate image for the current viewing context, optimizing bandwidth and image quality.",
          "tags": [
            "HTML",
            "Images",
            "Performance",
            "MCQ"
          ],
          "prerequisites": [
            "html_basics",
            "css_media_queries"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_performance_3",
          "topic": "Core Web Vitals",
          "level": "medium",
          "type": "open",
          "question": "Explain the three Core Web Vitals metrics and their significance for user experience and SEO.",
          "answer": "The three Core Web Vitals are:\n\n1.  **Largest Contentful Paint (LCP)**: Measures perceived loading performance. It reports the render time of the largest image or text block visible within the viewport. A good LCP score is less than 2.5 seconds. Significance: A faster LCP means users see the main content of the page quicker, leading to a better perceived loading experience and reducing bounce rates.\n2.  **First Input Delay (FID)**: Measures interactivity. It quantifies the time from when a user first interacts with a page (e.g., clicks a button, taps a link) to when the browser is actually able to begin processing event handlers in response to that interaction. A good FID score is less than 100 milliseconds. Significance: A low FID ensures the page responds quickly to user input, providing a smooth and engaging user experience.\n3.  **Cumulative Layout Shift (CLS)**: Measures visual stability. It quantifies the sum of all unexpected layout shifts that occur during the entire lifespan of a page. A good CLS score is less than 0.1. Significance: Low CLS means content doesn't unexpectedly move around while the user is trying to interact with it, preventing frustrating experiences like clicking the wrong button or losing their place while reading.",
          "analysisPoints": [
            "Accurate definition of each metric.",
            "Correct thresholds for 'good' scores.",
            "Clear explanation of user experience impact.",
            "Mention of SEO relevance."
          ],
          "keyConcepts": [
            "Core Web Vitals",
            "LCP",
            "FID",
            "CLS",
            "Performance Metrics",
            "User Experience",
            "SEO"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of Core Web Vitals.",
            "Ability to articulate their impact.",
            "Knowledge of performance measurement."
          ],
          "example": "N/A",
          "tags": [
            "Performance",
            "Core Web Vitals",
            "SEO",
            "Open-Ended"
          ],
          "prerequisites": [
            "web_performance"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_performance_4",
          "topic": "Asset Optimization: font-display",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following CSS:\n\n```css\n@font-face {\n  font-family: 'CustomFont';\n  src: url('/fonts/CustomFont.woff2') format('woff2');\n  font-display: swap;\n}\n```\n\nWhat is the primary effect of using `font-display: swap;`?",
          "answer": "The browser will render text using a fallback font immediately, then swap to 'CustomFont' once it loads.",
          "options": [
            "The browser will block rendering of text until 'CustomFont' loads.",
            "The browser will render text transparently until 'CustomFont' loads, then show the text.",
            "The browser will render text using a fallback font immediately, then swap to 'CustomFont' once it loads.",
            "The browser will only use 'CustomFont' if it's already in the cache, otherwise it will use a fallback."
          ],
          "analysisPoints": [
            "Tests understanding of `font-display: swap`.",
            "Distinguishes `swap` from `block` (FOIT) and `fallback`.",
            "Focuses on perceived performance benefits."
          ],
          "keyConcepts": [
            "font-display",
            "FOIT",
            "FOUT",
            "Web Fonts",
            "Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of CSS font loading strategies.",
            "Understanding of visual stability implications."
          ],
          "example": "The `font-display` property controls how a font face is displayed based on whether and when it is downloaded and ready to use. `swap` provides an immediate fallback font, preventing a 'Flash of Invisible Text' (FOIT). Once the custom font is ready, it swaps in, potentially causing a 'Flash of Unstyled Text' (FOUT). This generally improves perceived performance as users don't see blank text.",
          "tags": [
            "CSS",
            "Performance",
            "Web Fonts",
            "MCQ"
          ],
          "prerequisites": [
            "css_typography"
          ],
          "complexity": 7,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_performance_5",
          "topic": "Network Optimization: HTTP/2",
          "level": "medium",
          "type": "flashcard",
          "question": "Name two key features of HTTP/2 that improve web performance.",
          "answer": "Multiplexing (allowing multiple requests/responses over a single TCP connection) and Header Compression (HPACK). Server Push is another key feature.",
          "analysisPoints": [
            "Identifies core HTTP/2 advantages.",
            "Focuses on how it reduces latency and overhead."
          ],
          "keyConcepts": [
            "HTTP/2",
            "Multiplexing",
            "Header Compression",
            "Server Push",
            "Network Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of modern web protocols."
          ],
          "example": "N/A",
          "tags": [
            "HTTP",
            "Network",
            "Performance",
            "Flashcard"
          ],
          "prerequisites": [
            "http_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_performance_6",
          "topic": "Performance Budgets",
          "level": "hard",
          "type": "open",
          "question": "What are performance budgets, and how can they be implemented and maintained in a frontend development workflow?",
          "answer": "Performance budgets are thresholds set for various performance metrics (e.g., JavaScript bundle size, image size, initial load time, Lighthouse scores, Core Web Vitals) that a web application should not exceed. They act as a guardrail to prevent performance regressions as new features are added.\n\n**Implementation and Maintenance:**\n1.  **Define Metrics**: Identify key performance metrics relevant to your application and users (e.g., LCP < 2.5s, JS bundle < 200KB, image count < 10).\n2.  **Set Baselines and Budgets**: Measure current performance to establish baselines. Set realistic, aspirational budgets based on these baselines and user expectations.\n3.  **Tooling Integration**: Integrate performance budget tools into your development and CI/CD workflow:\n    *   **Webpack/Rollup**: Plugins like `webpack-bundle-analyzer` or `performance-budgets` can fail builds if size limits are exceeded.\n    *   **Lighthouse CI**: Run Lighthouse audits in your CI/CD pipeline and fail builds if scores drop below a threshold or metrics like LCP/FID/CLS are too high.\n    *   **Bundle Size Tools**: Tools like `bundle-analyzer`, `Source Map Explorer` can visualize bundle contents.\n    *   **Image Optimization Tools**: Use image compression and optimization tools (e.g., ImageOptim, imagemin plugins) as part of the build process.\n4.  **Automated Checks**: Automate budget checks in pre-commit hooks (e.g., with Husky and lint-staged) or, more effectively, in CI/CD pipelines.\n5.  **Monitoring**: Continuously monitor real user performance (RUM) in production to see if budgets align with actual user experience and adjust as needed.\n6.  **Education and Buy-in**: Ensure all team members understand the importance of performance budgets and how their work impacts them. Make performance a shared responsibility.\n7.  **Regular Review**: Performance budgets are not static. Review and adjust them periodically as the application evolves, user expectations change, and new technologies emerge.",
          "analysisPoints": [
            "Clear definition of performance budgets.",
            "Practical steps for setting and measuring budgets.",
            "Specific tools and integration points (CI/CD, build tools).",
            "Emphasis on continuous monitoring and team involvement."
          ],
          "keyConcepts": [
            "Performance Budgets",
            "CI/CD",
            "Lighthouse",
            "Bundle Size",
            "Web Performance Metrics",
            "Development Workflow"
          ],
          "evaluationCriteria": [
            "Depth of knowledge on performance governance.",
            "Ability to describe practical implementation steps.",
            "Understanding of integration with development tools."
          ],
          "example": "N/A",
          "tags": [
            "Performance",
            "DevOps",
            "CI/CD",
            "Optimization",
            "Open-Ended"
          ],
          "prerequisites": [
            "web_performance",
            "build_tools",
            "ci_cd_basics"
          ],
          "complexity": 9,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_performance_7",
          "topic": "Resource Hints",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the difference between `preload` and `prefetch` resource hints?",
          "answer": "`preload` fetches a resource needed for the current page load with high priority, while `prefetch` fetches a resource needed for a future navigation with low priority.",
          "analysisPoints": [
            "Clear distinction between immediate vs. future need.",
            "Difference in priority (high vs. low)."
          ],
          "keyConcepts": [
            "Preload",
            "Prefetch",
            "Resource Hints",
            "Performance"
          ],
          "evaluationCriteria": [
            "Recall of specific HTML performance features."
          ],
          "example": "N/A",
          "tags": [
            "HTML",
            "Performance",
            "Flashcard"
          ],
          "prerequisites": [
            "html_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_performance_8",
          "topic": "Compression Techniques",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following compression algorithms is generally considered superior to Gzip for text-based content and is supported by modern browsers?",
          "answer": "Brotli",
          "options": [
            "Deflate",
            "LZMA",
            "Brotli",
            "LZO"
          ],
          "analysisPoints": [
            "Identifies modern compression standards.",
            "Tests knowledge of current best practices."
          ],
          "keyConcepts": [
            "Compression",
            "Brotli",
            "Gzip",
            "HTTP Optimization"
          ],
          "evaluationCriteria": [
            "Knowledge of network optimization techniques."
          ],
          "example": "Brotli is a newer open-source compression algorithm developed by Google, generally offering better compression ratios than Gzip, especially for web assets like HTML, CSS, and JavaScript. It's supported by all major modern browsers.",
          "tags": [
            "Network",
            "Performance",
            "Compression",
            "MCQ"
          ],
          "prerequisites": [
            "http_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_performance_9",
          "topic": "Optimizing CSS",
          "level": "medium",
          "type": "flashcard",
          "question": "How can you reduce the size of CSS delivered to the client and improve its parsing speed?",
          "answer": "Minify CSS (remove whitespace, comments), use tools to remove unused CSS (e.g., PurgeCSS, UnCSS), and optimize CSS selectors for efficiency.",
          "analysisPoints": [
            "Focus on both file size and parse time.",
            "Mention specific tools/techniques."
          ],
          "keyConcepts": [
            "CSS Optimization",
            "Minification",
            "Unused CSS",
            "Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of CSS best practices for performance."
          ],
          "example": "N/A",
          "tags": [
            "CSS",
            "Performance",
            "Flashcard"
          ],
          "prerequisites": [
            "css_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_ssr_1",
          "topic": "Server-Side Rendering (SSR) vs. Client-Side Rendering (CSR)",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following is a primary benefit of Server-Side Rendering (SSR) over Client-Side Rendering (CSR) for a public-facing website?",
          "answer": "Improved SEO and faster First Contentful Paint (FCP)",
          "options": [
            "Reduced server load and simpler development setup",
            "Improved SEO and faster First Contentful Paint (FCP)",
            "Always faster Time to Interactive (TTI) compared to CSR",
            "Better support for dynamic data fetching on the client side"
          ],
          "analysisPoints": [
            "Highlights the key advantages of SSR (SEO, FCP).",
            "Identifies common misconceptions about SSR (server load, TTI guarantee).",
            "Contrasts with CSR strengths."
          ],
          "keyConcepts": [
            "SSR",
            "CSR",
            "SEO",
            "FCP",
            "Performance"
          ],
          "evaluationCriteria": [
            "Understanding of the core trade-offs between rendering approaches.",
            "Knowledge of performance metrics."
          ],
          "example": "SSR sends fully rendered HTML, making it easy for search engine crawlers to index content, thus boosting SEO. By rendering content on the server, the browser receives the full HTML markup sooner, leading to a much faster First Contentful Paint (FCP) where users see meaningful content quickly, even if the page isn't fully interactive yet.",
          "tags": [
            "SSR",
            "CSR",
            "Performance",
            "SEO",
            "MCQ"
          ],
          "prerequisites": [
            "web_rendering_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "intermediate"
        },
        {
          "id": "question_ssr_2",
          "topic": "SSR Hydration",
          "level": "medium",
          "type": "open",
          "question": "What is 'hydration' in the context of Server-Side Rendering (SSR) with a JavaScript framework like React, and why is it important?",
          "answer": "In SSR, hydration is the process where client-side JavaScript 'takes over' the server-rendered HTML. It involves parsing the JavaScript bundle, rebuilding the virtual DOM, and attaching event listeners to the existing DOM elements that were pre-rendered by the server. This makes the static server-rendered page interactive and allows it to behave like a regular Single Page Application (SPA).\n\nHydration is crucial because without it, the server-rendered page would remain static and unresponsive to user interactions. It bridges the gap between the fast initial content display (from SSR) and the rich interactivity expected from a modern web application (provided by the client-side framework). It ensures that the user experience is seamless, moving from a static view to a fully functional application without a full page reload or a 'blank screen' moment.",
          "analysisPoints": [
            "Accurate definition of hydration (taking over static HTML, attaching event listeners).",
            "Explains the 'why' (making interactive, bridging SSR and SPA benefits).",
            "Mentions the seamless user experience.",
            "Connects to virtual DOM concepts."
          ],
          "keyConcepts": [
            "Hydration",
            "SSR",
            "React",
            "Virtual DOM",
            "Interactivity",
            "User Experience"
          ],
          "evaluationCriteria": [
            "Comprehensive understanding of post-SSR client-side process.",
            "Ability to explain its purpose and significance.",
            "Knowledge of framework-specific rendering lifecycles."
          ],
          "example": "N/A",
          "tags": [
            "SSR",
            "React",
            "Hydration",
            "Open-Ended"
          ],
          "prerequisites": [
            "react_lifecycle",
            "ssr_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_ssr_3",
          "topic": "SSR Trade-offs",
          "level": "hard",
          "type": "open",
          "question": "A team is debating whether to implement SSR for a new e-commerce platform built with React. Discuss the main tradeoffs they should consider when opting for SSR versus a purely client-side rendered (CSR) approach.",
          "answer": "When deciding between SSR and CSR for an e-commerce platform, the team should consider the following tradeoffs:\n\n**Advantages of SSR (over CSR):**\n1.  **SEO**: E-commerce heavily relies on search engine visibility. SSR ensures all product pages, categories, and static content are fully crawlable by search engines immediately, leading to better indexing and higher rankings.\n2.  **Performance (Initial Load)**: Users get a faster First Contentful Paint (FCP) and Largest Contentful Paint (LCP) because the server sends pre-rendered HTML. This is critical for e-commerce, as slow loading times can lead to high bounce rates and lost sales.\n3.  **Social Media Previews**: Shared product links will have accurate and rich previews on social media platforms.\n4.  **Accessibility**: Content is available sooner for users with slower connections or older devices.\n\n**Disadvantages/Tradeoffs of SSR (compared to CSR):**\n1.  **Increased Server Load/Costs**: The server must render each page on every request, consuming more CPU and memory. For a high-traffic e-commerce site, this can significantly increase hosting costs and require more robust server infrastructure.\n2.  **Slower Time to First Byte (TTFB)**: While FCP is faster, the server needs to fetch data, render the page, and then send it. This can mean a slightly longer TTFB compared to CSR, which sends a minimal HTML shell very quickly.\n3.  **More Complex Development/Debugging**: Developing with universal JavaScript adds complexity. Developers need to be mindful of server-side (Node.js) vs. client-side (browser) environments, ensuring code is compatible with both. Debugging can be trickier.\n4.  **Hydration Issues**: The hydration process can sometimes lead to a period where the page appears interactive but isn't (blocking time). Mismatches between server-rendered and client-rendered content can also cause re-rendering issues.\n5.  **Caching Complexity**: Caching strategies on the server-side for dynamic content can be more complex to implement and invalidate effectively.\n\n**Recommendation for E-commerce**: Given the critical importance of SEO and initial load performance for e-commerce (directly impacting sales and user acquisition), SSR (or Static Site Generation for less dynamic pages) is generally the preferred approach, with solutions like Next.js being excellent choices to mitigate some of the complexity tradeoffs.",
          "analysisPoints": [
            "Comprehensive analysis of both pros and cons.",
            "Relates tradeoffs specifically to e-commerce context (SEO, sales).",
            "Discusses server burden, TTFB vs FCP nuances.",
            "Acknowledges development complexity and hydration challenges.",
            "Provides an informed recommendation.",
            "Highlights frameworks like Next.js as solutions."
          ],
          "keyConcepts": [
            "SSR",
            "CSR",
            "Trade-offs",
            "E-commerce",
            "SEO",
            "Performance Metrics",
            "Server Load",
            "Hydration",
            "Development Complexity"
          ],
          "evaluationCriteria": [
            "Ability to perform a detailed architectural comparison.",
            "Critical thinking about real-world application scenarios.",
            "Understanding of impact on various stakeholders (users, developers, business).",
            "Capability to articulate nuanced differences."
          ],
          "example": "N/A",
          "tags": [
            "SSR",
            "CSR",
            "Architecture",
            "Performance",
            "SEO",
            "Open-Ended"
          ],
          "prerequisites": [
            "ssr_basics",
            "frontend_architecture"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "expert"
        },
        {
          "id": "question_ssr_4",
          "topic": "Next.js SSR",
          "level": "medium",
          "type": "flashcard",
          "question": "Which function in Next.js is used to fetch data for Server-Side Rendering (SSR) on a page component?",
          "answer": "`getServerSideProps`",
          "analysisPoints": [
            "Specific Next.js data fetching method.",
            "Connects function to SSR purpose."
          ],
          "keyConcepts": [
            "Next.js",
            "SSR",
            "getServerSideProps",
            "Data Fetching"
          ],
          "evaluationCriteria": [
            "Recall of framework-specific SSR mechanisms."
          ],
          "example": "N/A",
          "tags": [
            "Next.js",
            "SSR",
            "Flashcard"
          ],
          "prerequisites": [
            "nextjs_basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_ssr_5",
          "topic": "Universal JavaScript",
          "level": "easy",
          "type": "flashcard",
          "question": "What is meant by 'Universal JavaScript applications' in the context of SSR?",
          "answer": "Applications where the same JavaScript code can run both on the server (e.g., Node.js) and in the browser (client-side).",
          "analysisPoints": [
            "Focus on code reusability across environments.",
            "Link to server-side Node.js and client-side browser execution."
          ],
          "keyConcepts": [
            "Universal JavaScript",
            "Isomorphic JavaScript",
            "SSR",
            "Node.js"
          ],
          "evaluationCriteria": [
            "Understanding of core SSR architectural concepts."
          ],
          "example": "N/A",
          "tags": [
            "SSR",
            "JavaScript",
            "Architecture",
            "Flashcard"
          ],
          "prerequisites": [
            "javascript_environments"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_deployment_1",
          "topic": "React Deployment Steps",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the very first step to prepare a React application for production deployment?",
          "answer": "Running the build command (e.g., `npm run build` or `yarn build`) to generate optimized static assets.",
          "analysisPoints": [
            "Highlights the importance of the build process.",
            "Emphasizes optimization for production."
          ],
          "keyConcepts": [
            "React Build",
            "Deployment",
            "Static Assets"
          ],
          "evaluationCriteria": [
            "Understanding of basic deployment workflow."
          ],
          "example": "N/A",
          "tags": [
            "React",
            "Deployment",
            "Flashcard"
          ],
          "prerequisites": [
            "react_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_deployment_2",
          "topic": "SPA Routing on Servers",
          "level": "medium",
          "type": "mcq",
          "question": "When deploying a React Single Page Application (SPA) to a traditional web server like Nginx or Apache, what special configuration is typically required to handle client-side routing (e.g., direct access to `/about` page)?",
          "answer": "Configuring the server to return `index.html` for all non-existent paths (fallback routing)",
          "options": [
            "Rewriting all URLs to `index.html` using a 301 redirect",
            "Configuring the server to return `index.html` for all non-existent paths (fallback routing)",
            "Installing a server-side React router on Nginx/Apache",
            "Ensuring every client-side route has a corresponding static HTML file on the server"
          ],
          "analysisPoints": [
            "Identifies the correct server-side handling for SPAs.",
            "Distinguishes from incorrect or inefficient methods.",
            "Tests understanding of client-side routing in a static context."
          ],
          "keyConcepts": [
            "SPA Routing",
            "Nginx",
            "Apache",
            "Fallback Routing",
            "Deployment"
          ],
          "evaluationCriteria": [
            "Knowledge of server configurations for SPAs.",
            "Understanding of how client-side routing interacts with web servers."
          ],
          "example": "For SPAs, if a user directly accesses a route like `yourdomain.com/products/123`, the web server needs to be configured to return the `index.html` file of your React application, rather than a 404 error. The client-side React router then takes over, parses the URL, and renders the correct component. This is commonly achieved using `try_files` in Nginx or `mod_rewrite` in Apache.",
          "tags": [
            "React",
            "Deployment",
            "SPA",
            "Nginx",
            "MCQ"
          ],
          "prerequisites": [
            "react_router_dom",
            "http_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_deployment_3",
          "topic": "CI/CD for React Applications",
          "level": "hard",
          "type": "open",
          "question": "Describe a typical Continuous Integration/Continuous Deployment (CI/CD) pipeline for a React application, outlining the key stages and benefits.",
          "answer": "A typical CI/CD pipeline for a React application automates the process of building, testing, and deploying the application, ensuring faster, more reliable, and consistent releases.\n\n**Key Stages:**\n1.  **Source Code Commit**: Developers push code changes to a version control system (e.g., Git on GitHub, GitLab, Bitbucket).\n2.  **Continuous Integration (CI) - Build Stage**: The CI server (e.g., GitHub Actions, GitLab CI, Jenkins, Travis CI) detects the new commit and triggers the pipeline:\n    *   **Install Dependencies**: `npm install` or `yarn install` to fetch project dependencies.\n    *   **Linting/Static Analysis**: Run linters (ESLint, Stylelint) to enforce code style and identify potential issues early.\n    *   **Testing**: Run unit tests (Jest, React Testing Library), integration tests, and possibly end-to-end (E2E) tests (Cypress, Playwright). If tests fail, the pipeline stops, providing immediate feedback.\n    *   **Build Application**: Execute the production build command (`npm run build`) to compile, minify, and bundle the React application into static assets.\n    *   **Artifact Generation**: The built assets (e.g., `build/` folder) are stored as artifacts for the next stage.\n    *   **Performance Audits (Optional but Recommended)**: Run tools like Lighthouse CI to ensure performance budgets are met.\n3.  **Continuous Deployment (CD) - Deploy Stage**: If all CI stages pass, the CD process is triggered:\n    *   **Environment Configuration**: Fetch environment variables specific to the deployment environment (staging, production).\n    *   **Deployment**: The built static assets are uploaded to the chosen hosting platform (e.g., AWS S3, Netlify, Vercel, Nginx server).\n    *   **Cache Invalidation**: Invalidate CDN caches (e.g., CloudFront) to ensure users receive the latest version of the application.\n    *   **Smoke Tests (Optional)**: Run a quick set of tests on the deployed application to ensure basic functionality.\n4.  **Monitoring and Rollback (Post-Deployment)**: After deployment, monitoring tools track application health. If critical issues arise, the pipeline should support quick rollbacks to a previous stable version.\n\n**Benefits:**\n*   **Faster Release Cycles**: Automates manual steps, allowing for more frequent deployments.\n*   **Improved Code Quality**: Automated testing and linting catch bugs and style issues early.\n*   **Reduced Risk**: Consistent, repeatable deployments minimize human error.\n*   **Faster Feedback**: Developers get immediate feedback on code changes.\n*   **Better Collaboration**: Establishes a clear, automated process for integrating and deploying code.",
          "analysisPoints": [
            "Comprehensive description of CI and CD stages.",
            "Lists specific tools/commands for each stage.",
            "Explains the rationale and benefits of automation.",
            "Covers testing, building, deployment, and post-deployment monitoring.",
            "Emphasizes speed, quality, and reliability."
          ],
          "keyConcepts": [
            "CI/CD",
            "Continuous Integration",
            "Continuous Deployment",
            "React Deployment",
            "Automated Testing",
            "Build Process",
            "Version Control",
            "DevOps"
          ],
          "evaluationCriteria": [
            "In-depth knowledge of modern development workflows.",
            "Ability to articulate the value proposition of CI/CD.",
            "Familiarity with common CI/CD tools and practices.",
            "Demonstrates architectural thinking."
          ],
          "example": "N/A",
          "tags": [
            "React",
            "Deployment",
            "CI/CD",
            "DevOps",
            "Open-Ended"
          ],
          "prerequisites": [
            "git_basics",
            "build_tools",
            "web_hosting"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "expert"
        },
        {
          "id": "question_react_deployment_4",
          "topic": "Environment Variables",
          "level": "medium",
          "type": "flashcard",
          "question": "Why is it important to manage environment variables for a React application during deployment, and how is it typically done?",
          "answer": "It's important to manage environment variables because configurations (like API endpoints, secret keys) often differ between development, staging, and production environments. Hardcoding them is insecure and inflexible. It's typically done using `.env` files (e.g., with `dotenv` or Create React App's built-in support) during development, and by setting environment variables directly on the hosting platform (e.g., Netlify UI, Docker ENV, server config) during deployment.",
          "analysisPoints": [
            "Security and flexibility as key reasons.",
            "Mention of `.env` files for dev.",
            "Mention of platform-specific methods for production.",
            "Link to build time vs. runtime variables."
          ],
          "keyConcepts": [
            "Environment Variables",
            "Deployment",
            "Security",
            ".env",
            "Build Process"
          ],
          "evaluationCriteria": [
            "Understanding of configuration management in production."
          ],
          "example": "N/A",
          "tags": [
            "React",
            "Deployment",
            "Security",
            "Configuration",
            "Flashcard"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_deployment_5",
          "topic": "React Deployment Platforms",
          "level": "easy",
          "type": "mcq",
          "question": "Which of the following is typically NOT a primary hosting option for deploying a static React application's `build` output?",
          "answer": "MongoDB Atlas",
          "options": [
            "Netlify",
            "AWS S3 (with CloudFront)",
            "Vercel",
            "MongoDB Atlas"
          ],
          "analysisPoints": [
            "Identifies common static hosting platforms.",
            "Distinguishes hosting platforms from database services.",
            "Tests knowledge of deployment ecosystem."
          ],
          "keyConcepts": [
            "React Deployment",
            "Hosting",
            "Static Sites",
            "CDN"
          ],
          "evaluationCriteria": [
            "Basic knowledge of deployment environments."
          ],
          "example": "Netlify, Vercel, and AWS S3 (especially with CloudFront CDN) are all excellent and common choices for deploying the static output of a React application. MongoDB Atlas is a database-as-a-service and is not used for hosting frontend static files.",
          "tags": [
            "React",
            "Deployment",
            "Hosting",
            "MCQ"
          ],
          "prerequisites": [
            "web_hosting_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        }
      ],
      "tasks": [
        {
          "id": "task_lazy_loading_1",
          "title": "Implement a Lazy-Loaded Image Gallery",
          "description": "\nCreate a React component `ImageGallery` that displays a list of images. Each image should be lazy-loaded using the `IntersectionObserver` API.\n\n**Requirements:**\n1.  Create a `LazyImage` sub-component similar to the theory's example that accepts `src`, `placeholder`, and `alt` props.\n2.  The `LazyImage` should use `IntersectionObserver` to load the `src` image only when it enters the viewport.\n3.  Ensure the observer is disconnected once the image is loaded.\n4.  Implement proper cleanup for the `IntersectionObserver` when the component unmounts.\n5.  The `ImageGallery` component should render a list of `LazyImage` components, each with unique `src`, `placeholder`, and `alt` values.\n6.  Add a visual transition (e.g., opacity fade-in) when the image loads.\n7.  (Bonus) Implement an `errorPlaceholder` prop for `LazyImage` to show an image if `src` fails to load.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useRef, useEffect, useState } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  placeholder: string;\n  alt: string;\n  // Bonus: errorPlaceholder?: string;\n}\n\n// TODO: Implement LazyImage component\nfunction LazyImage({ src, placeholder, alt }: LazyImageProps) {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  // Bonus: const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    // TODO: Implement IntersectionObserver logic\n    // Remember to observe, disconnect, and cleanup\n  }, []);\n\n  const currentSrc = isLoaded ? src : placeholder; // TODO: Adjust for errorPlaceholder\n\n  return (\n    <img\n      ref={imgRef}\n      src={currentSrc}\n      alt={alt}\n      // TODO: Add onError handler for bonus\n      style={{ transition: 'opacity 0.3s ease-in-out' }}\n    />\n  );\n}\n\n// Main Gallery Component\ninterface ImageGalleryProps {\n  images: { id: number; src: string; placeholder: string; alt: string; error?: boolean }[];\n}\n\nfunction ImageGallery({ images }: ImageGalleryProps) {\n  return (\n    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '20px' }}>\n      <h2>Image Gallery</h2>\n      {images.map(image => (\n        <div key={image.id} style={{ height: '250px', backgroundColor: '#f0f0f0', display: 'flex', alignItems: 'center', justifyContent: 'center', overflow: 'hidden' }}>\n          <LazyImage\n            src={image.src}\n            placeholder={image.placeholder}\n            alt={image.alt}\n            // Bonus: errorPlaceholder={image.error ? 'https://via.placeholder.com/200/FF0000/FFFFFF?text=Error' : undefined}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// Example Usage (in App.tsx or similar)\nconst dummyImages = Array.from({ length: 20 }, (_, i) => ({\n  id: i,\n  src: `https://picsum.photos/id/${10 + i}/400/300`,\n  placeholder: `https://picsum.photos/id/${10 + i}/20/15`,\n  alt: `Random image ${i + 1}`,\n  error: i === 5 || i === 12 // Simulate some errors\n}));\n\n// Render this component:\n// <ImageGallery images={dummyImages} />\n",
          "solutionCode": "import React, { useRef, useEffect, useState } from 'react';\n\ninterface LazyImageProps {\n  src: string;\n  placeholder: string;\n  alt: string;\n  errorPlaceholder?: string;\n}\n\nfunction LazyImage({ src, placeholder, alt, errorPlaceholder }: LazyImageProps) {\n  const imgRef = useRef<HTMLImageElement>(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting) {\n          setIsLoaded(true);\n          observer.disconnect();\n        }\n      },\n      { rootMargin: '0px 0px 50px 0px' }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n      observer.disconnect();\n    };\n  }, []);\n\n  const handleImageError = () => {\n    setHasError(true);\n  };\n\n  const currentSrc = hasError ? errorPlaceholder || placeholder : (isLoaded ? src : placeholder);\n\n  return (\n    <img\n      ref={imgRef}\n      src={currentSrc}\n      alt={alt}\n      onError={handleImageError}\n      style={{\n        display: 'block',\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n        opacity: (isLoaded && !hasError) ? 1 : 0.5,\n        transition: 'opacity 0.3s ease-in-out'\n      }}\n    />\n  );\n}\n\ninterface ImageGalleryProps {\n  images: { id: number; src: string; placeholder: string; alt: string; error?: boolean }[];\n}\n\nfunction ImageGallery({ images }: ImageGalleryProps) {\n  return (\n    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))', gap: '20px' }}>\n      <h2>Image Gallery</h2>\n      {images.map(image => (\n        <div key={image.id} style={{ height: '250px', backgroundColor: '#f0f0f0', display: 'flex', alignItems: 'center', justifyContent: 'center', overflow: 'hidden' }}>\n          <LazyImage\n            src={image.src}\n            placeholder={image.placeholder}\n            alt={image.alt}\n            errorPlaceholder={image.error ? 'https://via.placeholder.com/200/FF0000/FFFFFF?text=Error' : undefined}\n          />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nconst dummyImages = Array.from({ length: 20 }, (_, i) => ({\n  id: i,\n  src: `https://picsum.photos/id/${10 + i}/400/300`,\n  placeholder: `https://picsum.photos/id/${10 + i}/20/15`,\n  alt: `Random image ${i + 1}`,\n  error: i === 5 || i === 12\n}));\n\n// Example of how to use it:\n// function App() {\n//   return <ImageGallery images={dummyImages} />;\n// }\n// export default App;\n",
          "testCases": [
            "Images far from viewport should initially show placeholders.",
            "Images entering viewport should transition to high-resolution `src`.",
            "Scrolling quickly through images should still trigger loading correctly.",
            "Component unmount should disconnect observer gracefully (check console for warnings).",
            "Images with invalid `src` should display `errorPlaceholder` (if bonus implemented).",
            "Performance: Observer callback should not fire excessively, indicating efficient use."
          ],
          "hints": [
            "Remember to use `useRef` to get a direct reference to the `<img>` DOM element.",
            "The `IntersectionObserver` callback provides an array of `IntersectionObserverEntry` objects. Check `entry.isIntersecting`.",
            "The cleanup function of `useEffect` is crucial for preventing memory leaks, especially with event listeners or observers.",
            "For the bonus, the `<img>` element has an `onError` event handler.",
            "Consider using `object-fit: cover;` and `width: 100%; height: 100%;` on the image style for better visual consistency within the gallery items."
          ],
          "tags": [
            "React",
            "Lazy Loading",
            "IntersectionObserver",
            "Performance",
            "Frontend",
            "Hooks"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "react_hooks",
            "javascript_dom",
            "intersection_observer_api"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "web_performance_optimization",
            "component_lifecycle",
            "state_management"
          ]
        },
        {
          "id": "task_performance_1",
          "title": "Optimize an Image Asset Delivery",
          "description": "\nGiven a scenario where an application serves high-resolution images to all users, implement a solution to optimize image delivery using responsive image techniques.\n\n**Requirements:**\n1.  Create an HTML structure for an `<img>` tag.\n2.  Utilize the `srcset` and `sizes` attributes to provide multiple image candidates for different screen widths.\n3.  Ensure a fallback `src` is provided for browsers that don't support `srcset`.\n4.  (Bonus) Use the `<picture>` element for 'art direction' to serve a completely different image when the viewport is very narrow (e.g., mobile screens).\n\n**Image URLs to use (simulated):**\n*   Small (480px wide): `https://via.placeholder.com/480x300.png?text=Small`\n*   Medium (800px wide): `https://via.placeholder.com/800x500.png?text=Medium`\n*   Large (1200px wide): `https://via.placeholder.com/1200x750.png?text=Large`\n*   (Bonus for Picture) Mobile specific (e.g., taller aspect ratio): `https://via.placeholder.com/300x600.png?text=Mobile`\n",
          "difficulty": "medium",
          "startingCode": "<!-- Starting HTML structure -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Responsive Image Task</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        img { max-width: 100%; height: auto; border: 1px solid #ccc; display: block; margin-top: 20px; }\n    </style>\n</head>\n<body>\n    <h1>Image Optimization with srcset/sizes</h1>\n\n    <!-- TODO: Implement the responsive image here -->\n    <img src=\"https://via.placeholder.com/1200x750.png?text=DefaultFallback\" alt=\"A placeholder image\">\n\n    <h2>Bonus: Art Direction with &lt;picture&gt;</h2>\n    <!-- TODO: Implement the <picture> element here -->\n\n</body>\n</html>\n",
          "solutionCode": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Responsive Image Task Solution</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        img { max-width: 100%; height: auto; border: 1px solid #ccc; display: block; margin-top: 20px; }\n    </style>\n</head>\n<body>\n    <h1>Image Optimization with srcset/sizes</h1>\n\n    <img \n      src=\"https://via.placeholder.com/480x300.png?text=SmallFallback\" \n      srcset=\"\n        https://via.placeholder.com/480x300.png?text=Small 480w,\n        https://via.placeholder.com/800x500.png?text=Medium 800w,\n        https://via.placeholder.com/1200x750.png?text=Large 1200w\n      \" \n      sizes=\"\n        (max-width: 600px) 480px,\n        (max-width: 1000px) 800px,\n        1200px\n      \" \n      alt=\"A descriptive image demonstrating srcset and sizes\">\n\n    <h2>Bonus: Art Direction with &lt;picture&gt;</h2>\n    <picture>\n        <source media=\"(max-width: 500px)\" srcset=\"https://via.placeholder.com/300x600.png?text=MobileSpecific\">\n        <source media=\"(min-width: 501px) and (max-width: 900px)\" srcset=\"https://via.placeholder.com/800x500.png?text=TabletSpecific\">\n        <img \n          src=\"https://via.placeholder.com/1200x750.png?text=DesktopFallback\" \n          alt=\"A descriptive image demonstrating picture element for art direction\">\n    </picture>\n\n</body>\n</html>\n",
          "testCases": [
            "Resize browser window: Verify the image source changes based on viewport width (using dev tools network tab or inspecting element's `currentSrc`).",
            "Test on a very small viewport (e.g., 320px wide): Ensure `Small` image is loaded.",
            "Test on a medium viewport (e.g., 850px wide): Ensure `Medium` image is loaded.",
            "Test on a large viewport (e.g., 1400px wide): Ensure `Large` image is loaded.",
            "For bonus, test with a viewport <= 500px: Ensure the `MobileSpecific` image is loaded. Test with viewport > 500px and <= 900px for `TabletSpecific`.",
            "Verify fallback `src` works (e.g., by intentionally breaking `srcset`)."
          ],
          "hints": [
            "The `srcset` attribute accepts a comma-separated list of image URLs followed by a 'width descriptor' (e.g., `480w`).",
            "The `sizes` attribute specifies the image's display width at different viewport sizes using media queries (e.g., `(max-width: 600px) 480px`).",
            "The browser evaluates `sizes` first, then picks the best image from `srcset`.",
            "For `<picture>`, use `<source>` elements with `media` attributes, and always include a fallback `<img>` at the end.",
            "Use browser developer tools (Network tab) to verify which image resource is actually loaded."
          ],
          "tags": [
            "HTML",
            "Images",
            "Performance",
            "Responsive Design",
            "Optimization"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "html_basics",
            "css_media_queries"
          ],
          "complexity": 6,
          "interviewRelevance": 7,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "asset_optimization",
            "front_end_optimization"
          ]
        },
        {
          "id": "task_performance_2",
          "title": "Implement a Basic Font Loading Strategy with `font-display`",
          "description": "\nDemonstrate how to load a custom web font efficiently using the `font-display` CSS property to prevent Flash of Invisible Text (FOIT).\n\n**Requirements:**\n1.  Define a `@font-face` rule for a custom font. You can use a dummy font file or a public one like Google Fonts' 'Open Sans' via `url()`.\n2.  Apply `font-display: swap;` to the `@font-face` rule.\n3.  Create an HTML page that uses this custom font in a heading and paragraph.\n4.  (Simulate) a slow font load: You can artificially delay the font file in a local server or pretend it's slow to verify fallback behavior.\n\n**Font URL (simulated):**\n*   `https://fonts.googleapis.com/css2?family=Open+Sans&display=swap` (or download a `woff2` and serve locally)\n",
          "difficulty": "easy",
          "startingCode": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Font Loading Task</title>\n    <style>\n        /* TODO: Define @font-face rule here */\n        /* Example structure */\n        /*\n        @font-face {\n            font-family: 'MyCustomFont';\n            src: url('path/to/mycustomfont.woff2') format('woff2');\n            font-weight: normal;\n            font-style: normal;\n            \n            /* TODO: Add font-display property */\n        }\n        */\n\n        body {\n            font-family: sans-serif; /* Fallback */\n            margin: 20px;\n        }\n        h1 {\n            font-size: 2.5em;\n            /* TODO: Apply your custom font */\n        }\n        p {\n            font-size: 1.2em;\n            line-height: 1.6;\n            /* TODO: Apply your custom font */\n        }\n    </style>\n</head>\n<body>\n    <h1>This is a heading with a custom font.</h1>\n    <p>This paragraph also uses the custom font. Observe how the text renders initially before the font is fully loaded, especially if you simulate a slow network connection.</p>\n</body>\n</html>\n",
          "solutionCode": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Font Loading Task Solution</title>\n    <style>\n        @font-face {\n            font-family: 'Open Sans';\n            src: url('https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-DpfimhnxOyPUo.woff2') format('woff2');\n            font-weight: 400;\n            font-style: normal;\n            font-display: swap; /* Crucial for preventing FOIT */\n        }\n\n        body {\n            font-family: sans-serif; /* Fallback font */\n            margin: 20px;\n        }\n        h1 {\n            font-family: 'Open Sans', sans-serif; /* Use custom font, with fallback */\n            font-size: 2.5em;\n        }\n        p {\n            font-family: 'Open Sans', sans-serif;\n            font-size: 1.2em;\n            line-height: 1.6;\n        }\n    </style>\n</head>\n<body>\n    <h1>This is a heading with a custom font.</h1>\n    <p>This paragraph also uses the custom font. Observe how the text renders initially before the font is fully loaded, especially if you simulate a slow network connection.</p>\n</body>\n</html>\n",
          "testCases": [
            "Load the page with a fast network: Verify the font loads and applies quickly.",
            "Simulate slow network (e.g., 'Fast 3G' in Chrome DevTools): Observe that the text appears using the fallback `sans-serif` font *before* 'Open Sans' loads, then 'swaps' to 'Open Sans' once loaded. This confirms FOIT prevention.",
            "Verify the `font-family` property in dev tools computed styles after font has loaded."
          ],
          "hints": [
            "The `font-display` property should be placed inside the `@font-face` rule.",
            "`swap` is generally the most recommended value for `font-display` as it prioritizes content display.",
            "Remember to provide a generic fallback font in your `font-family` stack (e.g., `sans-serif`).",
            "Use your browser's developer tools (Network tab, then filter by 'Fonts') to observe font loading behavior and experiment with network throttling."
          ],
          "tags": [
            "CSS",
            "Performance",
            "Web Fonts",
            "Optimization",
            "Frontend"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "css_basics",
            "web_fonts"
          ],
          "complexity": 5,
          "interviewRelevance": 6,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "asset_optimization",
            "critical_rendering_path"
          ]
        },
        {
          "id": "task_performance_3",
          "title": "Analyze and Suggest Performance Improvements with Lighthouse",
          "description": "\nGiven a (simulated) web page, use Google Lighthouse to audit its performance. Then, based on the report, identify at least three specific areas for improvement and propose concrete solutions that align with web performance best practices.\n\n**Requirements:**\n1.  **Select a webpage:** Use any public-facing website (e.g., a news site, an e-commerce site, or even your personal portfolio). If you don't have one, `https://www.google.com` or `https://www.wikipedia.org` are fine for analysis, though your proposed solutions might be more generic.\n2.  **Run Lighthouse Audit:** Execute a Lighthouse audit (e.g., in Chrome DevTools or via web.dev/measure).\n3.  **Analyze Report:** Examine the 'Performance' section of the Lighthouse report.\n4.  **Identify Bottlenecks:** Pick at least three distinct performance issues reported by Lighthouse.\n5.  **Propose Solutions:** For each identified issue, suggest a specific and actionable solution from the web application optimization strategies discussed (Front-end, Back-end, Network, Asset).\n\n**Example Output Format:**\n\n**Website Analyzed:** `[URL of the website]`\n\n**Lighthouse Performance Score:** `[Score]`\n\n**Identified Issues & Proposed Solutions:**\n\n1.  **Issue (Lighthouse Says):** `[e.g., Reduce unused JavaScript]`\n    **Explanation:** `[Briefly explain what this means]`\n    **Proposed Solution:** `[e.g., Implement code splitting using dynamic imports for routes or components. Use a tool like Webpack Bundle Analyzer to identify large chunks, and then apply lazy loading (React.lazy + Suspense) or route-based splitting.]`\n\n2.  **Issue (Lighthouse Says):** `[e.g., Serve images in next-gen formats]`\n    **Explanation:** `[Briefly explain what this means]`\n    **Proposed Solution:** `[e.g., Convert images to WebP or AVIF formats. Use a CDN that supports image optimization, or implement a build step to convert existing images during deployment. Use the <picture> element for broader browser compatibility.]`\n\n3.  **Issue (Lighthouse Says):** `[e.g., Ensure text remains visible during webfont load]`\n    **Explanation:** `[Briefly explain what this means]`\n    **Proposed Solution:** `[e.g., Apply 'font-display: swap;' in the @font-face rule of the CSS to allow the browser to render text with a fallback font immediately, preventing Flash of Invisible Text (FOIT) while the custom font loads.]`\n",
          "difficulty": "hard",
          "startingCode": "/* No starting code, this is a conceptual/analysis task */\n\n// Use Chrome DevTools (Lighthouse tab) or web.dev/measure to run the audit.\n// Then, structure your answer as described in the problem description.\n",
          "solutionCode": "/* Example Solution Structure (content will vary based on website analyzed) */\n\n**Website Analyzed:** `https://www.example.com` (Replace with your chosen URL)\n\n**Lighthouse Performance Score:** `72` (Example score)\n\n**Identified Issues & Proposed Solutions:**\n\n1.  **Issue (Lighthouse Says):** `Eliminate render-blocking resources`\n    **Explanation:** This refers to stylesheets and scripts that the browser must download, parse, and execute before it can render any content on the screen. This delays the First Contentful Paint (FCP).\n    **Proposed Solution:**\n    *   **CSS:** Identify critical CSS needed for above-the-fold content and inline it directly into the HTML. Defer non-critical CSS by loading it asynchronously (e.g., using `<link rel=\"preload\" as=\"style\" onload=\"this.rel='stylesheet'\">`).\n    *   **JavaScript:** Defer non-critical JavaScript by adding `defer` or `async` attributes to script tags. For very small, critical scripts, consider inlining them.\n\n2.  **Issue (Lighthouse Says):** `Serve static assets with an efficient cache policy`\n    **Explanation:** The server is not instructing browsers to cache static assets (like images, CSS, JS) for a sufficiently long period, leading to browsers re-downloading these assets on subsequent visits, increasing load times.\n    **Proposed Solution:** Configure the web server (e.g., Nginx, Apache, or CDN) to send appropriate `Cache-Control` headers (e.g., `Cache-Control: public, max-age=31536000, immutable`) for static assets. This allows browsers and CDNs to cache these files for a year, drastically reducing network requests on repeat visits.\n\n3.  **Issue (Lighthouse Says):** `Minimize main-thread work`\n    **Explanation:** The browser's main thread is busy parsing, compiling, and executing JavaScript, style, and layout work for a prolonged period, which can delay interactivity and make the page feel sluggish (impacts FID and TTI).\n    **Proposed Solution:**\n    *   **Reduce JavaScript Bundle Size:** Implement code splitting and lazy loading for non-critical JavaScript. Remove unused JavaScript (tree-shaking).\n    *   **Optimize Long Tasks:** Break up long-running JavaScript tasks into smaller, asynchronous chunks using `setTimeout`, `requestIdleCallback`, or Web Workers.\n    *   **Debounce/Throttle Event Handlers:** Reduce the frequency of expensive computations tied to user interactions (e.g., scroll, resize, input).\n\n4.  **Issue (Lighthouse Says):** `Avoid chaining critical requests`\n    **Explanation:** This means there are multiple nested dependencies (e.g., HTML loads CSS, which loads a font, which loads an image) that form a long chain, delaying the rendering of critical content.\n    **Proposed Solution:** Use `rel=\"preload\"` resource hints for critical resources discovered late in the HTML parsing process (e.g., fonts, critical background images referenced in CSS). This tells the browser to fetch them earlier with high priority.\n",
          "testCases": [
            "The analysis should clearly state the chosen website's URL.",
            "The Lighthouse performance score should be provided.",
            "At least three distinct Lighthouse issues from the 'Performance' section should be identified.",
            "For each issue, a clear and concise explanation should be given.",
            "For each issue, a specific, actionable, and relevant solution must be proposed, demonstrating knowledge of optimization techniques."
          ],
          "hints": [
            "Focus on the 'Opportunities' and 'Diagnostics' sections of the Lighthouse report. They provide actionable insights.",
            "Categorize issues into Front-end, Back-end, Network, or Asset optimization where possible.",
            "For each suggestion, think about *how* you would implement it in a real project (e.g., specific code attributes, build tool configurations, server settings).",
            "Common issues include large images, render-blocking CSS/JS, inefficient caching, slow server response times, and excessive main-thread work.",
            "Remember the Core Web Vitals and how different optimizations might impact them."
          ],
          "tags": [
            "Performance",
            "Lighthouse",
            "Optimization",
            "Analysis",
            "Frontend",
            "Consulting"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "web_performance_optimization",
            "core_web_vitals",
            "http_basics"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "expert",
          "relatedConcepts": [
            "measuring_performance",
            "performance_budgets",
            "critical_rendering_path"
          ]
        },
        {
          "id": "task_ssr_1",
          "title": "Implement a Basic Server-Side Rendering (SSR) Setup with Node.js and Express",
          "description": "\nCreate a very simple server-side rendered (SSR) React application using Node.js and Express. The goal is to demonstrate the fundamental concept of rendering a React component to a string on the server and sending it as HTML.\n\n**Requirements:**\n1.  Set up a basic Node.js Express server.\n2.  Create a simple React functional component (e.g., `App`) that displays a dynamic message (e.g., 'Hello from SSR!').\n3.  On the server, use `ReactDOMServer.renderToString()` to render the React component to an HTML string.\n4.  Embed this rendered HTML string into a full HTML document template.\n5.  Serve this full HTML document from an Express route.\n6.  (Bonus) Include a client-side bundle that `hydrates` the server-rendered HTML, making the React component interactive (e.g., add a button that increments a counter).\n\n**Assumptions:**\n*   You have Node.js and npm/yarn installed.\n*   You can create a basic `package.json` and install dependencies (`express`, `react`, `react-dom`).\n",
          "difficulty": "hard",
          "startingCode": "// server/index.js\nconst express = require('express');\nconst React = require('react');\nconst ReactDOMServer = require('react-dom/server');\n\n// TODO: Import your React App component (if in a separate file)\n// const App = require('../src/App').default; \n\nconst app = express();\nconst PORT = 3000;\n\napp.get('/', (req, res) => {\n  // TODO: Create a simple React App component (or use the one from src/App.js)\n  // Example: \n  const App = () => <h1>Hello from SSR!</h1>;\n\n  // TODO: Render the React component to a string\n  const appHtml = ReactDOMServer.renderToString(<App />);\n\n  // TODO: Create a full HTML document with the rendered appHtml embedded\n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>Basic SSR React App</title>\n      </head>\n      <body>\n        <div id=\"root\">${appHtml}</div>\n        <!-- TODO: Add client-side bundle for hydration (Bonus) -->\n        <script src=\"/static/bundle.js\"></script>\n      </body>\n    </html>\n  `;\n\n  res.send(html);\n});\n\n// TODO: Serve static files (e.g., the client-side bundle) (Bonus)\n// app.use('/static', express.static('public'));\n\napp.listen(PORT, () => {\n  console.log(`Server listening on port ${PORT}`);\n});\n\n// --- Client-side (src/App.js) for Bonus --- (Create this file if doing bonus)\n/*\nimport React, { useState } from 'react';\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  return (\n    <div>\n      <h1>Hello from SSR! Count: {count}</h1>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n    </div>\n  );\n}\n\nexport default App;\n*/\n\n// --- Client-side entry (src/index.js) for Bonus --- (Create this file if doing bonus)\n/*\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n// Use hydrate instead of render for SSRed content\nReactDOM.hydrate(<App />, document.getElementById('root'));\n*/\n\n// --- webpack.config.js for Bonus --- (Create this file if doing bonus, requires webpack, webpack-cli, babel-loader, @babel/preset-env, @babel/preset-react)\n/*\nconst path = require('path');\n\nmodule.exports = {\n  mode: 'development',\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, 'public'),\n    filename: 'bundle.js',\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(js|jsx)$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env', '@babel/preset-react'],\n          },\n        },\n      },\n    ],\n  },\n  resolve: {\n    extensions: ['.js', '.jsx'],\n  },\n};\n*/\n",
          "solutionCode": "// server/index.js\nconst express = require('express');\nconst React = require('react');\nconst ReactDOMServer = require('react-dom/server');\n\n// Assuming src/App.js exists and exports default\nconst App = require('../src/App').default;\n\nconst app = express();\nconst PORT = 3000;\n\n// Serve static files from the 'public' directory (for the client-side bundle)\napp.use('/static', express.static('public'));\n\napp.get('/', (req, res) => {\n  // Render the React component to a string\n  const appHtml = ReactDOMServer.renderToString(<App />);\n\n  // Create a full HTML document with the rendered appHtml embedded\n  const html = `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>Basic SSR React App</title>\n      </head>\n      <body>\n        <div id=\"root\">${appHtml}</div>\n        <!-- The client-side bundle for hydration -->\n        <script src=\"/static/bundle.js\"></script>\n      </body>\n    </html>\n  `;\n\n  res.send(html);\n});\n\napp.listen(PORT, () => {\n  console.log(`Server listening on port ${PORT}`);\n  console.log(`Visit http://localhost:${PORT}`);\n});\n\n\n// --- src/App.js ---\n/*\nimport React, { useState } from 'react';\n\nfunction App() {\n  const [count, setCount] = useState(0);\n  console.log('App component rendered or hydrated. Current count:', count);\n  return (\n    <div>\n      <h1>Hello from SSR! Count: {count}</h1>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n    </div>\n  );\n}\n\nexport default App;\n*/\n\n// --- src/index.js ---\n/*\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n// Use hydrate instead of render for SSRed content\n// Only run on client-side\nif (typeof window !== 'undefined') {\n  ReactDOM.hydrate(<App />, document.getElementById('root'));\n}\n*/\n\n// --- webpack.config.js ---\n/*\nconst path = require('path');\n\nmodule.exports = {\n  mode: 'development',\n  entry: './src/index.js',\n  output: {\n    path: path.resolve(__dirname, 'public'), // Output client bundle to 'public' folder\n    filename: 'bundle.js',\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(js|jsx)$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env', ['@babel/preset-react', { runtime: 'automatic' }]],\n          },\n        },\n      },\n    ],\n  },\n  resolve: {\n    extensions: ['.js', '.jsx'],\n  },\n  devtool: 'eval-source-map', // For easier debugging\n};\n*/\n\n/*\n** Steps to Run the Solution (assuming solution files are in correct folders):**\n1.  **Install dependencies**: `npm init -y` (if not done) then `npm install express react react-dom @babel/core @babel/preset-env @babel/preset-react babel-loader webpack webpack-cli`\n2.  **Add build script to package.json**: `\"scripts\": { \"build:client\": \"webpack --config webpack.config.js\", \"start:server\": \"node server/index.js\" }`\n3.  **Run client build**: `npm run build:client`\n4.  **Start server**: `npm run start:server`\n5.  **Open in browser**: Go to `http://localhost:3000`\n*/\n",
          "testCases": [
            "Navigate to `http://localhost:3000` in a browser.",
            "View page source: Verify that the `<h1>Hello from SSR!</h1>` text is present directly in the HTML received from the server (not just in a script tag).",
            "Disable JavaScript in browser: Verify the initial text is still visible.",
            "Enable JavaScript and click the 'Increment' button (Bonus): Verify that the counter increments and the button becomes interactive, demonstrating hydration.",
            "Check console logs (Bonus): Verify 'App component rendered or hydrated' log appears only once on the client side after the page loads, indicating hydration, not a full re-render."
          ],
          "hints": [
            "Remember to `require` React and `ReactDOMServer` at the top of your server file.",
            "`ReactDOMServer.renderToString()` is used on the server, while `ReactDOM.hydrate()` (or `ReactDOM.render()` for client-only) is used on the client.",
            "For the bonus, you'll need to set up a simple Webpack configuration to bundle your client-side React code.",
            "Express's `express.static()` middleware is essential for serving your client-side JavaScript bundle.",
            "Ensure your React component is pure (doesn't rely on browser-specific APIs) when rendered on the server."
          ],
          "tags": [
            "SSR",
            "React",
            "Node.js",
            "Express",
            "Hydration",
            "Frontend Architecture",
            "Build Tools"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "react_basics",
            "node_js_basics",
            "express_basics",
            "webpack_basics"
          ],
          "complexity": 9,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "server_side_rendering",
            "universal_javascript",
            "frontend_build_process",
            "deployment"
          ]
        },
        {
          "id": "task_react_deployment_1",
          "title": "Configure Nginx for a React SPA and Serve Static Assets",
          "description": "\nConfigure an Nginx server block to correctly serve a production-built React Single Page Application (SPA) and handle its client-side routing. This task simulates a common production deployment scenario.\n\n**Requirements:**\n1.  Create an Nginx server block configuration.\n2.  Set the `root` directive to point to a hypothetical directory where the React build output (`index.html`, `static/js`, `static/css`, etc.) would reside (e.g., `/usr/share/nginx/html`).\n3.  Implement a `location /` block that ensures client-side routes are handled correctly by serving `index.html` as a fallback for any non-existent paths.\n4.  Add a separate `location` block for static assets (e.g., JavaScript, CSS, images) to apply long-term caching headers.\n\n**Note:** You don't need to actually set up an Nginx server or build a React app for this task. Provide the Nginx configuration file content as the solution.\n",
          "difficulty": "medium",
          "startingCode": "```nginx\n# Nginx Configuration for React SPA\nserver {\n    listen 80;\n    server_name yourdomain.com;\n\n    # TODO: Set the root directory for your built React application\n    root /path/to/your/react/build;\n\n    # Index file\n    index index.html index.htm;\n\n    # TODO: Implement the main location block for SPA routing fallback\n    location / {\n        # Try to serve file, then directory, then fallback to index.html\n    }\n\n    # TODO: Implement location block for static assets with caching\n    # Example: .js, .css, .png, .jpg, .jpeg, .gif, .ico, .svg, .woff, .woff2, .ttf, .eot\n    location ~* \\.(some|asset|extensions)$ {\n        # Set long cache headers\n    }\n\n    # Optional: Error page for 404 (often redirects to index.html for SPAs)\n    # error_page 404 /index.html;\n}\n```",
          "solutionCode": "```nginx\n# Nginx Configuration for React SPA\nserver {\n    listen 80;\n    server_name yourdomain.com; # Replace with your actual domain\n\n    # Root directory where your React app's build output resides\n    root /usr/share/nginx/html; # Common path, or /app/build\n\n    # Index file to serve when accessing root or directories\n    index index.html index.htm;\n\n    # Main location block for handling client-side routing in SPAs\n    # This tries to serve the requested file, then a directory, \n    # and if neither is found, it serves index.html (allowing React Router to take over)\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n\n    # Location block for static assets (JavaScript, CSS, images, fonts etc.)\n    # Sets aggressive caching headers for these files.\n    location ~* \\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\n        expires 1y; # Cache for 1 year\n        add_header Cache-Control \"public, immutable\"; # Indicate public cache, immutable content\n        access_log off; # Turn off access logging for static assets for performance\n        log_not_found off;\n    }\n\n    # Optional: Custom 404 error page fallback to index.html for SPA consistency\n    error_page 404 /index.html;\n}\n```",
          "testCases": [
            "Configuration should be syntactically correct Nginx.",
            "The `root` directive should be present and point to a valid (hypothetical) build directory.",
            "The main `location /` block must include `try_files $uri $uri/ /index.html;` to ensure SPA routing fallback.",
            "A separate `location` block for static assets should correctly use `expires` and `add_header Cache-Control` for long-term caching.",
            "The static asset `location` block regex should cover common file types (js, css, image, font files)."
          ],
          "hints": [
            "The `try_files` directive is crucial for SPAs. It tells Nginx to look for files in a specific order.",
            "Using `location ~* \\.(...)` allows you to match specific file extensions for different caching policies.",
            "`expires 1y;` is a strong caching directive. `add_header Cache-Control \"public, immutable\";` further enhances this for CDN and browser caching.",
            "Remember that Nginx processes `location` blocks in a specific order (exact matches first, then regex matches, then prefix matches)."
          ],
          "tags": [
            "Nginx",
            "Deployment",
            "React",
            "SPA",
            "Caching",
            "Web Server",
            "Frontend Infrastructure"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "http_basics",
            "web_hosting_basics",
            "react_router_dom"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "react_application_deployment",
            "network_optimization"
          ]
        },
        {
          "id": "task_react_deployment_2",
          "title": "Automate React Build and Deployment with a CI/CD Script",
          "description": "\nWrite a conceptual CI/CD pipeline script (e.g., using YAML syntax common in GitHub Actions, GitLab CI, etc.) that automates the build, test, and deployment process for a simple React application.\n\n**Requirements:**\n1.  **Trigger:** The pipeline should be triggered on push to the `main` branch.\n2.  **Stages:** Define distinct stages for 'Build', 'Test', and 'Deploy'.\n3.  **Build Stage:**\n    *   Install Node.js.\n    *   Install project dependencies.\n    *   Run the React build command (`npm run build`).\n    *   Save the build output as an artifact.\n4.  **Test Stage:**\n    *   Install Node.js.\n    *   Install project dependencies.\n    *   Run unit tests (`npm test`).\n5.  **Deploy Stage:**\n    *   This stage should only run if the 'Build' and 'Test' stages succeed.\n    *   Simulate a deployment step (e.g., a `deploy.sh` script or a command to upload artifacts).\n    *   (Bonus) Include steps for linting before testing, and a performance audit (e.g., Lighthouse CI) after building.\n\n**Note:** This is a conceptual task; actual execution requires a CI/CD platform. Focus on the logical flow and commands.\n",
          "difficulty": "hard",
          "startingCode": "```yaml\n# .github/workflows/deploy.yml or .gitlab-ci.yml\n\nname: React CI/CD Pipeline\n\non: \n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  # TODO: Define the Build stage\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      # Checkout code\n      - uses: actions/checkout@v3\n      \n      # Setup Node.js\n      # - uses: actions/setup-node@v3\n      #   with:\n      #     node-version: '18'\n\n      # TODO: Install dependencies\n      # TODO: Run React build command\n      # TODO: Upload build artifacts\n\n  # TODO: Define the Test stage (depends on build)\n  test:\n    needs: build\n    runs-on: ubuntu-latest\n    steps:\n      # Checkout code (or download artifacts from build stage)\n      - uses: actions/checkout@v3\n      # - uses: actions/download-artifact@v3\n      #   with:\n      #     name: react-build\n\n      # Setup Node.js\n      # - uses: actions/setup-node@v3\n      #   with:\n      #     node-version: '18'\n\n      # TODO: Install dependencies\n      # TODO: Run tests\n\n  # TODO: Define the Deploy stage (depends on test)\n  deploy:\n    needs: test\n    if: github.ref == 'refs/heads/main' # Only deploy main branch pushes\n    runs-on: ubuntu-latest\n    steps:\n      # Download artifacts from build stage\n      # - uses: actions/download-artifact@v3\n      #   with:\n      #     name: react-build\n      \n      # TODO: Simulate deployment (e.g., a simple echo command or placeholder for actual deploy)\n```",
          "solutionCode": "```yaml\n# .github/workflows/deploy.yml\n\nname: React CI/CD Pipeline\n\non: \n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  # Stage 1: Build\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v3\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n\n      - name: Install dependencies\n        run: npm ci # Use npm ci for clean installs in CI environments\n\n      - name: Run ESLint (Bonus)\n        run: npm run lint # Assuming you have a 'lint' script\n\n      - name: Build React application\n        run: npm run build\n\n      - name: Upload build artifacts\n        uses: actions/upload-artifact@v3\n        with:\n          name: react-build\n          path: build/ # Path to your React build output directory\n\n      - name: Run Lighthouse CI (Bonus)\n        # Requires Lighthouse CI server and config. This is a placeholder.\n        run: | \n          echo \"Running Lighthouse audit...\"\n          # npx @lhci/cli audit --upload-url=http://localhost:9000\n\n  # Stage 2: Test\n  test:\n    needs: build # This job depends on the 'build' job completing successfully\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v3\n\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n\n      - name: Install dependencies\n        run: npm ci\n\n      - name: Run unit and integration tests\n        run: npm test -- --coverage --passWithNoTests # Example for Jest\n\n  # Stage 3: Deploy\n  deploy:\n    needs: test # This job depends on the 'test' job completing successfully\n    if: github.ref == 'refs/heads/main' # Only deploy if the push is to the main branch\n    runs-on: ubuntu-latest\n    environment: production # Designate this as a production deployment environment\n    steps:\n      - name: Download build artifacts\n        uses: actions/download-artifact@v3\n        with:\n          name: react-build\n          path: ./build # Download artifacts to a specific path\n\n      - name: Simulate deployment to hosting (e.g., Netlify, Vercel, S3)\n        run: | \n          echo \"Deploying React app to production...\"\n          # Replace with actual deployment commands, e.g.:\n          # npx netlify deploy --dir=./build --prod\n          # aws s3 sync ./build s3://your-bucket-name --delete\n          echo \"Deployment complete!\"\n```",
          "testCases": [
            "The YAML syntax should be valid.",
            "The `on` trigger should correctly specify push to `main`.",
            "Distinct jobs for `build`, `test`, and `deploy` should be present.",
            "`test` job should explicitly `need` `build`.",
            "`deploy` job should explicitly `need` `test` and have a conditional trigger for `main` branch.",
            "Build stage should include Node.js setup, dependency installation (`npm ci`), and `npm run build`.",
            "Build stage should use `actions/upload-artifact` to save the `build` directory.",
            "Test stage should include Node.js setup, dependency installation, and `npm test`.",
            "Deploy stage should include `actions/download-artifact` and a placeholder for deployment commands.",
            "(Bonus) Linting step (`npm run lint`) before build/test.",
            "(Bonus) Placeholder for Lighthouse CI execution after build."
          ],
          "hints": [
            "Use `uses: actions/checkout@v3` to get your repository code.",
            "Use `uses: actions/setup-node@v3` to configure Node.js environment.",
            "`npm ci` is preferred over `npm install` in CI environments for reproducibility.",
            "`needs: [job_id]` specifies dependencies between jobs.",
            "`if: github.ref == 'refs/heads/main'` is a common way to gate deployments to the main branch.",
            "`actions/upload-artifact` and `actions/download-artifact` are used to pass files between jobs.",
            "For actual deployment, you would replace the `echo` command in the deploy step with commands specific to your hosting provider (e.g., Netlify CLI, AWS CLI, rsync to a server)."
          ],
          "tags": [
            "React",
            "CI/CD",
            "Deployment",
            "DevOps",
            "Automation",
            "YAML",
            "GitHub Actions"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "git_basics",
            "command_line",
            "npm_basics"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "react_application_deployment",
            "web_performance_optimization"
          ]
        }
      ]
    }
  },
  {
    "id": "14eaab9c-4864-4090-a403-69a74653ee18",
    "startLine": 17200,
    "endLine": 17299,
    "processedDate": "2025-06-17T15:52:39.259Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_web_app_production_readiness",
          "title": "Web Application Production Readiness: Build, Performance, Deployment, CI/CD, and Monitoring",
          "content": "Preparing a web application for production involves several critical steps to ensure it is optimized, performant, reliable, and maintainable. This encompasses build processes, performance enhancements, deployment strategies, continuous integration/continuous delivery (CI/CD) pipelines, and robust monitoring and logging.\n\n## 1. Production Build Optimization\nBefore deployment, the application's source code needs to be transformed into an optimized production-ready bundle. This typically involves:\n- **Building the application**: Running build commands (e.g., `npm run build` for React/Vue/Angular) to compile source code, transpile JavaScript (e.g., TypeScript/ES6+ to ES5), and bundle assets.\n- **Environment Variables**: Configuring proper environment variables (e.g., `NODE_ENV=production`) to ensure production-specific settings are applied, such as API endpoints or feature flags.\n- **Code Splitting**: Breaking down the large JavaScript bundle into smaller chunks that can be loaded on demand. This reduces the initial load time as users only download code necessary for the current view.\n- **Tree Shaking**: Eliminating dead code (unused exports) from the final bundle. This is crucial for reducing bundle size, especially when using libraries that might include features not utilized by the application.\n\n## 2. Performance Considerations\nOptimizing application performance is crucial for user experience and SEO. Key strategies include:\n- **Caching Strategies**: Implementing HTTP caching (browser-level caching via headers like `Cache-Control`, `Expires`, `ETag`, `Last-Modified`) and Service Worker caching (programmable caching enabling offline capabilities).\n- **Content Delivery Network (CDN)**: Using a CDN for static assets (images, CSS, JS bundles) to serve content from geographically distributed servers closer to the user, reducing latency.\n- **Compression**: Enabling Brotli or Gzip compression for text-based assets (HTML, CSS, JavaScript) to reduce their transfer size over the network.\n- **Image and Font Loading Optimization**: \n    - **Image Optimization**: Compressing images, using modern formats (WebP, AVIF), responsive images (`srcset`), and lazy loading.\n    - **Font Optimization**: Self-hosting fonts, preloading critical fonts, and using `font-display: swap` to prevent invisible text during font loading.\n\n## 3. Deployment Options\nChoosing the right deployment strategy depends on application complexity, scalability needs, and budget:\n- **Static Hosting**: Ideal for single-page applications (SPAs) or static sites. Services like Netlify, Vercel, and GitHub Pages offer seamless deployment, automatic SSL, and CDN integration.\n- **Container-based Deployment (Docker + Kubernetes)**: For complex, microservices-based applications requiring high scalability and fault tolerance. Docker containers package the application and its dependencies, while Kubernetes orchestrates their deployment, scaling, and management.\n- **Platform-as-a-Service (PaaS)**: Services like Heroku or AWS Amplify abstract away infrastructure management, allowing developers to focus on code. They provide environments for various programming languages, databases, and often include CI/CD features.\n- **Server with Reverse Proxy (Nginx + Node.js)**: A common setup for server-rendered applications or APIs. Nginx acts as a reverse proxy, handling incoming requests, SSL termination, load balancing, and serving static files, while forwarding dynamic requests to a Node.js (or other backend) application.\n\n## 4. CI/CD Pipeline\nA Continuous Integration/Continuous Delivery (CI/CD) pipeline automates the software delivery process, from code commit to deployment:\n- **Automated Testing**: Running unit, integration, and end-to-end tests automatically before deployment to catch bugs early.\n- **Blue-Green Deployment Strategy**: A deployment technique that minimizes downtime by running two identical production environments (Blue and Green). New releases are deployed to the inactive environment (Green), tested, and then traffic is switched to it. The old environment (Blue) is kept as a rollback option.\n- **Rollback Capabilities**: The ability to quickly revert to a previous stable version of the application in case of issues with a new deployment. This is crucial for maintaining application availability.\n\n## 5. Monitoring and Logging\nPost-deployment, continuous monitoring and logging are essential for identifying and resolving issues, understanding user behavior, and tracking performance:\n- **Error Tracking**: Tools like Sentry or LogRocket capture and report errors in real-time, providing detailed stack traces and context to aid debugging.\n- **Analytics Implementation**: Integrating analytics platforms (e.g., Google Analytics, Mixpanel) to track user interactions, traffic sources, and conversion rates.\n- **Performance Monitoring**: Using tools (e.g., Lighthouse, WebPageTest, New Relic, Datadog) to continuously monitor application performance metrics (e.g., loading times, rendering performance, API response times) in production.\n\nThese practices collectively contribute to a robust, performant, and reliable web application ready for production environments.",
          "examples": [
            {
              "id": "example_prod_build_env_vars",
              "title": "Production Environment Variables",
              "code": "// webpack.config.js (or similar build configuration)\nconst webpack = require('webpack');\n\nmodule.exports = {\n  mode: 'production',\n  plugins: [\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify('production'),\n      'process.env.API_BASE_URL': JSON.stringify('https://api.your-prod-domain.com')\n    })\n  ]\n};",
              "explanation": "This Webpack configuration snippet demonstrates how to define `process.env.NODE_ENV` as 'production' and set a production-specific API base URL during the build process. This ensures that the application uses the correct configurations when deployed.",
              "language": "javascript"
            },
            {
              "id": "example_nginx_reverse_proxy",
              "title": "Nginx Reverse Proxy Configuration",
              "code": "# /etc/nginx/sites-available/your_app\nserver {\n    listen 80;\n    server_name your_domain.com www.your_domain.com;\n\n    location / {\n        proxy_pass http://localhost:3000; # Proxy to your Node.js app running on port 3000\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host $host;\n        proxy_cache_bypass $http_upgrade;\n    }\n\n    location /static/ {\n        alias /var/www/your_app/static/;\n        expires 30d;\n        add_header Cache-Control \"public, max-age=2592000\";\n    }\n}",
              "explanation": "This Nginx configuration sets up a reverse proxy. Requests to the root path (`/`) are forwarded to a Node.js application running on `localhost:3000`. It also includes a `location /static/` block to serve static files directly from the Nginx server with appropriate caching headers, reducing the load on the Node.js application and improving static asset delivery.",
              "language": "nginx"
            }
          ],
          "relatedQuestions": [
            "question_web_app_prod_1",
            "question_web_app_prod_2",
            "question_web_app_prod_3",
            "question_web_app_prod_4",
            "question_web_app_prod_5",
            "question_web_app_prod_6",
            "question_web_app_prod_7",
            "question_web_app_prod_8"
          ],
          "relatedTasks": [
            "task_optimize_bundle_size",
            "task_implement_cdn_caching"
          ],
          "tags": [
            "frontend",
            "deployment",
            "performance",
            "CI/CD",
            "monitoring",
            "optimization",
            "production"
          ],
          "technology": "Web",
          "prerequisites": [
            "javascript_basics",
            "node_npm",
            "web_development_fundamentals"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "devops_frontend",
            "senior_frontend_engineer"
          ]
        },
        {
          "id": "theory_service_workers",
          "title": "Service Workers vs. Web Workers: Background JavaScript Execution",
          "content": "Service Workers and Web Workers are powerful JavaScript APIs that enable scripts to run in the background, separate from the main browser thread. While both improve responsiveness and performance, they serve distinct purposes and have different capabilities.\n\n## Service Workers\nService Workers are essentially programmable network proxies that sit between the web application, the browser, and the network. They are a core component of Progressive Web Apps (PWAs) and provide advanced capabilities:\n\n- **Offline Functionality & Caching**: The most prominent feature. Service Workers can intercept network requests and serve cached responses, enabling web applications to work reliably even when offline or on flaky networks. They offer fine-grained control over caching strategies.\n- **Progressive Web App (PWA) Foundation**: They power key PWA features like installability (Add to Home Screen) and a native-like user experience.\n- **Background Sync**: Allow deferred network requests to be sent when connectivity is restored, improving reliability for operations like sending messages or uploading data.\n- **Push Notifications**: Enable web applications to receive push messages from a server even when the user is not actively using the application, delivering timely updates or alerts.\n- **Persistence**: Unlike regular scripts, Service Workers persist beyond page refreshes and can even start when the browser is closed (e.g., for push notifications).\n- **Network Request Control**: They can intercept, modify, and respond to network requests programmatically, offering powerful control over how resources are fetched.\n\n**Lifecycle**: A Service Worker goes through an install and activate phase. It's registered via `navigator.serviceWorker.register()`, installs itself (e.g., caches initial assets), and then activates. It only controls pages opened *after* its activation. Updates involve fetching a new version, installing it, and waiting for all controlled clients to unload before activating the new version, or forcing activation.\n\n## Web Workers\nWeb Workers are designed for running CPU-intensive operations in a separate thread, preventing the main thread from becoming blocked and keeping the user interface responsive.\n\n- **UI Thread Blocking Prevention**: They offload heavy computations (e.g., complex calculations, large data processing, image manipulation, encryption) from the main thread, ensuring the UI remains smooth and interactive.\n- **DOM and Window Object Access**: Web Workers *cannot* directly access the DOM (`document` object), the `window` object, or many other browser APIs. This is a key limitation that ensures they remain isolated and cannot inadvertently block the UI.\n- **Message Passing Communication**: Communication between the main thread and a Web Worker occurs through a message-passing API (`postMessage()` and `onmessage` event listener). Data passed is copied, not shared, ensuring thread safety.\n- **Termination**: A Web Worker is tied to the page that created it and terminates automatically when that page closes. They do not persist across page refreshes.\n- **Types of Web Workers**: `Dedicated Workers` (one-to-one communication), `Shared Workers` (multiple scripts can access the same worker), and `Service Workers` (a specific type of worker with network proxy capabilities).\n\n## Key Differences Summary\n| Feature           | Service Worker                                   | Web Worker                                      |\n| :---------------- | :----------------------------------------------- | :---------------------------------------------- |\n| **Primary Use**   | Network proxy, offline support, PWAs, push     | Offload CPU-intensive tasks from main thread    |\n| **Network Access**| Intercepts and controls network requests         | Can make network requests (e.g., `fetch`) but doesn't intercept browser's main requests |\n| **DOM Access**    | No direct DOM access                             | No direct DOM access                            |\n| **Lifecycle**     | Persists, active even when app is closed, installation/activation phases | Tied to creating page, terminates when page closes |\n| **Scope**         | Defined by path, can control multiple pages within its scope | Limited to the script that created it           |\n| **Protocol**      | Requires HTTPS (for production), localhost for dev | No specific protocol requirement                |\n| **Notifications** | Enables Push API for notifications               | No direct support for Push API                  |\n| **Background Sync**| Yes                                              | No                                              |",
          "examples": [
            {
              "id": "example_service_worker_registration",
              "title": "Basic Service Worker Registration",
              "code": "if ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker.register('/service-worker.js', { scope: '/' })\n      .then(registration => {\n        console.log('Service Worker registered successfully with scope:', registration.scope);\n      })\n      .catch(error => {\n        console.error('Service Worker registration failed:', error);\n      });\n  });\n}",
              "explanation": "This JavaScript code snippet demonstrates the basic way to register a Service Worker. It checks if `serviceWorker` is supported by the browser, then registers the `/service-worker.js` file when the page has fully loaded. The `scope` option defines the URL path that the Service Worker controls; here, it controls the entire origin.",
              "language": "javascript"
            },
            {
              "id": "example_web_worker_communication",
              "title": "Web Worker Communication",
              "code": "// main.js\nif (window.Worker) {\n  const myWorker = new Worker('worker.js');\n\n  myWorker.postMessage({ data: [1, 2, 3, 4, 5], operation: 'sum' });\n  console.log('Message posted to worker');\n\n  myWorker.onmessage = function(e) {\n    console.log('Message received from worker:', e.data);\n  };\n\n  myWorker.onerror = function(error) {\n    console.error('Worker error:', error);\n  };\n}\n\n// worker.js\nonmessage = function(e) {\n  console.log('Message received in worker:', e.data);\n  const { data, operation } = e.data;\n  if (operation === 'sum') {\n    const sum = data.reduce((acc, num) => acc + num, 0);\n    postMessage({ result: sum, originalOperation: operation });\n  }\n};",
              "explanation": "This example shows basic communication between the main thread and a Web Worker. `main.js` creates a new `Worker` instance, sends a message (an array and an operation) using `postMessage`, and listens for messages back from the worker using `onmessage`. `worker.js` receives the message, performs a calculation (summation in this case), and sends the result back to the main thread using its own `postMessage`.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_service_worker_1",
            "question_service_worker_2",
            "question_service_worker_3",
            "question_service_worker_4",
            "question_worker_type_diff_1",
            "question_worker_type_diff_2",
            "question_web_worker_1",
            "question_web_worker_2"
          ],
          "relatedTasks": [
            "task_implement_offline_page",
            "task_background_computation"
          ],
          "tags": [
            "service-workers",
            "web-workers",
            "pwa",
            "offline",
            "performance",
            "background-tasks",
            "browser-apis"
          ],
          "technology": "Web API",
          "prerequisites": [
            "javascript_async",
            "event_listeners",
            "dom_manipulation_basics"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "requiredFor": [
            "pwa_development",
            "performance_optimization"
          ]
        },
        {
          "id": "theory_client_side_caching",
          "title": "Client-Side Caching Strategies for Web Performance",
          "content": "Client-side caching is a fundamental technique for improving web application performance, reducing server load, and enhancing user experience by storing resources locally in the user's browser. By serving cached content, applications can load faster, especially on repeat visits or unstable network conditions. Various strategies can be employed, often in combination, to achieve optimal caching behavior.\n\n## 1. HTTP Caching (Browser Cache)\nThis is the most basic and widely used form of caching, managed by the browser based on HTTP headers sent by the server.\n- **`Cache-Control` Headers**: The primary header to define caching policies. Examples include:\n    - `no-store`: Never cache, fetch from server every time.\n    - `no-cache`: Cache, but revalidate with server before using.\n    - `public`: Can be cached by any cache (browser, CDN).\n    - `private`: Can only be cached by the user's browser.\n    - `max-age=<seconds>`: Resource is fresh for `seconds`.\n    - `s-maxage=<seconds>`: Similar to `max-age` but for shared caches (CDNs).\n    - `immutable`: Indicates the resource will never change, allowing browsers to cache it indefinitely without revalidation (useful for versioned URLs).\n- **`Expires` Header**: An older, HTTP/1.0 header that specifies an absolute expiration date/time. Less flexible than `Cache-Control`'s `max-age`.\n- **`ETag` (Entity Tag)**: A unique identifier (hash) for a specific version of a resource. The browser sends this tag in an `If-None-Match` header on subsequent requests. If the ETag matches, the server returns a `304 Not Modified` status, indicating the cached version is still valid.\n- **`Last-Modified` Header**: Indicates the last time the resource was modified. The browser sends this in an `If-Modified-Since` header. Similar to ETag, if the resource hasn't changed, a `304 Not Modified` is returned.\n- **Versioned URLs (Cache Busting)**: Appending a hash or version number to static asset filenames (e.g., `bundle.1a2b3c.js`, `style.v1.css`). When the file content changes, its URL changes, forcing the browser to fetch the new version and bypass the old cache. This is the most reliable way to ensure users get the latest version of critical assets.\n\n## 2. Service Worker Caching (Cache API)\nService Workers provide programmatic control over caching using the Cache API, enabling powerful offline capabilities and custom caching strategies.\n- **Cache-First Strategy**: For static assets (CSS, JS, images). The Service Worker first tries to serve the response from its cache. If not found, it goes to the network and then caches the response for future use. This provides immediate loading for cached assets.\n- **Network-First Strategy**: For frequently changing data like API requests. The Service Worker first attempts to fetch from the network. If successful, it caches the new response. If the network fails, it falls back to a cached version if available. This ensures freshness while providing offline resilience.\n- **Stale-While-Revalidate**: A balanced approach. The Service Worker immediately returns a cached response (stale) while simultaneously fetching the latest version from the network (revalidate). Once the network response is received, it updates the cache for future requests. This provides instant feedback with eventual consistency.\n- **Cache Fallback for Offline Functionality**: If both cache and network requests fail (e.g., completely offline), the Service Worker can serve a generic offline page or a fallback asset (e.g., a placeholder image).\n\n## 3. Application Data Caching\nBeyond static assets, applications often need to cache dynamic data for performance and offline access.\n- **`localStorage` / `sessionStorage`**: Web Storage APIs for small amounts of key-value pair data. `localStorage` persists across browser sessions; `sessionStorage` is cleared when the session ends. Suitable for user preferences, simple settings, or session tokens.\n- **IndexedDB**: A low-level API for client-side storage of large amounts of structured data, including binary data. It's an object-oriented database within the browser, suitable for complex application data, large datasets, or offline data synchronization.\n- **Memory Caching (JavaScript Map/Object)**: Storing data in JavaScript objects or Maps directly in memory during the application's runtime. This is the fastest form of caching but is volatile and cleared upon page refresh. Useful for frequently accessed computed values or data that changes often but is only needed for the current session.\n\n## 4. Library/Framework Specific Caching (e.g., React Query / SWR)\nModern data fetching libraries often include built-in caching mechanisms that handle common patterns for fetching, caching, and revalidating data from APIs.\n- **Automatic Revalidation**: Libraries like React Query and SWR automatically revalidate cached data in the background on events like window focus, network reconnect, or interval polling. This keeps the UI updated with fresh data while providing an instant initial render from the cache.\n- **Cache Invalidation**: Provide mechanisms to manually invalidate specific cache entries, forcing a re-fetch when data is known to be outdated (e.g., after a mutation).\n\nEffective client-side caching requires a multi-faceted approach, combining browser-level controls, Service Worker logic, and application-specific data storage strategies.",
          "examples": [
            {
              "id": "example_http_cache_control",
              "title": "HTTP Cache-Control Header Example",
              "code": "// Node.js Express server example\napp.get('/static/bundle.js', (req, res) => {\n  res.set('Cache-Control', 'public, max-age=31536000, immutable');\n  res.sendFile(path.join(__dirname, 'public', 'bundle.js'));\n});\n\napp.get('/api/data', (req, res) => {\n  // For dynamic data, less aggressive caching\n  res.set('Cache-Control', 'no-cache, must-revalidate');\n  res.json({ message: 'Dynamic data' });\n});",
              "explanation": "This Express.js example demonstrates setting `Cache-Control` headers. For a static JS bundle, `public, max-age=31536000, immutable` tells browsers and CDNs to cache it for one year and never revalidate because its URL will change if content changes. For dynamic API data, `no-cache, must-revalidate` instructs the browser to always revalidate with the server before using a cached response, ensuring data freshness.",
              "language": "javascript"
            },
            {
              "id": "example_service_worker_cache_first",
              "title": "Service Worker: Cache-First Strategy",
              "code": "// service-worker.js\nconst CACHE_NAME = 'my-app-cache-v1';\nconst urlsToCache = [\n  '/',\n  '/styles.css',\n  '/script.js',\n  '/images/logo.png'\n];\n\nself.addEventListener('install', event => {\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then(cache => {\n        console.log('Opened cache');\n        return cache.addAll(urlsToCache);\n      })\n  );\n});\n\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request)\n      .then(response => {\n        // Cache hit - return response\n        if (response) {\n          return response;\n        }\n        // No cache hit - fetch from network\n        return fetch(event.request);\n      })\n  );\n});",
              "explanation": "This Service Worker implements a cache-first strategy. During the `install` event, it opens a cache and adds predefined static assets. During the `fetch` event, it intercepts network requests. It first attempts to `match` the request in its cache. If a match is found (`response`), it returns the cached version immediately. Otherwise, it proceeds to `fetch` the resource from the network.",
              "language": "javascript"
            },
            {
              "id": "example_indexeddb_basic",
              "title": "IndexedDB Basic Usage",
              "code": "// JavaScript (client-side)\nconst DB_NAME = 'myDatabase';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'myObjectStore';\n\nlet db;\n\nfunction openDB() {\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onerror = event => {\n      console.error('IndexedDB error:', event.target.errorCode);\n      reject('IndexedDB error');\n    };\n\n    request.onsuccess = event => {\n      db = event.target.result;\n      console.log('IndexedDB opened successfully');\n      resolve(db);\n    };\n\n    request.onupgradeneeded = event => {\n      db = event.target.result;\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });\n        console.log('Object store created');\n      }\n    };\n  });\n}\n\nasync function addData(data) {\n  await openDB();\n  const transaction = db.transaction([STORE_NAME], 'readwrite');\n  const store = transaction.objectStore(STORE_NAME);\n  const request = store.add(data);\n\n  request.onsuccess = () => console.log('Data added:', data);\n  request.onerror = () => console.error('Error adding data');\n}\n\n// Usage\naddData({ name: 'Alice', age: 30 });\naddData({ name: 'Bob', age: 25 });",
              "explanation": "This example demonstrates basic IndexedDB operations: opening a database, creating an object store (if it doesn't exist during an upgrade), and adding data. IndexedDB is asynchronous and uses an event-driven API. `openDB` handles database initialization and upgrades, while `addData` creates a transaction to add new records to the `myObjectStore`.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_caching_1",
            "question_caching_2",
            "question_caching_3",
            "question_caching_4",
            "question_caching_5",
            "question_caching_6",
            "question_caching_7",
            "question_caching_8",
            "question_caching_9"
          ],
          "relatedTasks": [
            "task_implement_offline_page",
            "task_implement_cache_strategies",
            "task_data_cache_with_indexeddb"
          ],
          "tags": [
            "caching",
            "performance",
            "http-headers",
            "service-workers",
            "localStorage",
            "IndexedDB",
            "frontend",
            "optimization"
          ],
          "technology": "Web",
          "prerequisites": [
            "http_protocols",
            "javascript_async",
            "browser_storage"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "requiredFor": [
            "pwa_development",
            "performance_engineering",
            "senior_frontend_engineer"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_web_app_prod_1",
          "topic": "Production Build Optimization",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary purpose of running `npm run build` in a frontend project before deployment?",
          "answer": "To create an optimized production-ready bundle of the application, often involving compilation, minification, and bundling.",
          "options": [],
          "analysisPoints": [
            "Focus on the 'optimized' aspect of the build process.",
            "Mention common transformations like minification and bundling."
          ],
          "keyConcepts": [
            "production build",
            "optimization",
            "bundling"
          ],
          "evaluationCriteria": [
            "Basic understanding of build process"
          ],
          "example": null,
          "tags": [
            "build-process",
            "optimization",
            "production"
          ],
          "prerequisites": [
            "node_npm"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_web_app_prod_2",
          "topic": "Performance Optimization",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following techniques is primarily used to reduce the initial load time of a web application by breaking down a large JavaScript bundle into smaller, on-demand chunks?",
          "answer": "Code Splitting",
          "options": [
            "Tree Shaking",
            "Brotli Compression",
            "Code Splitting",
            "HTTP Caching"
          ],
          "analysisPoints": [
            "Tree Shaking removes unused code, reducing total bundle size, but not necessarily splitting it.",
            "Brotli Compression reduces transfer size but doesn't split the bundle.",
            "HTTP Caching speeds up subsequent loads, not necessarily the initial load for a new user.",
            "Code Splitting directly addresses the problem of large initial bundles by segmenting them."
          ],
          "keyConcepts": [
            "code splitting",
            "performance optimization",
            "bundle size"
          ],
          "evaluationCriteria": [
            "Distinguishing between build optimization techniques",
            "Understanding the impact on initial load time"
          ],
          "example": "Code splitting divides your application into logical chunks (e.g., by route or component) that are loaded only when needed. For instance, if you have an admin dashboard and a public-facing page, their code can be split, so a user on the public page doesn't download the admin dashboard's code.",
          "tags": [
            "performance",
            "optimization",
            "webpack",
            "code-splitting"
          ],
          "prerequisites": [
            "javascript_modules",
            "bundlers"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_app_prod_3",
          "topic": "Deployment Options",
          "level": "medium",
          "type": "open",
          "question": "You are deploying a Single-Page Application (SPA) with no backend services, only static assets. What deployment option would you choose and why?",
          "answer": "I would choose static hosting platforms like Netlify, Vercel, or GitHub Pages. \n\n**Reasons:**\n1.  **Simplicity**: They are designed for deploying static sites and SPAs, making setup and deployment straightforward, often integrating directly with Git repositories.\n2.  **Performance**: They typically provide built-in CDN services, ensuring fast global content delivery.\n3.  **Cost-Effectiveness**: Many offer generous free tiers suitable for personal projects or small-to-medium applications.\n4.  **Automatic SSL & CI/CD**: They often include automatic SSL certificate management and simple CI/CD features (e.g., build on push to Git branch).\n5.  **Scalability**: They inherently scale well as they mostly serve pre-built static files.",
          "options": [],
          "analysisPoints": [
            "Identification of appropriate deployment type (static hosting).",
            "Justification with multiple benefits (simplicity, performance, cost, features)."
          ],
          "keyConcepts": [
            "static hosting",
            "SPA deployment",
            "Netlify",
            "Vercel",
            "GitHub Pages"
          ],
          "evaluationCriteria": [
            "Knowledge of deployment strategies",
            "Ability to justify choices based on application characteristics"
          ],
          "example": null,
          "tags": [
            "deployment",
            "SPA",
            "static-hosting",
            "cloud"
          ],
          "prerequisites": [
            "web_hosting_concepts"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_app_prod_4",
          "topic": "CI/CD Pipeline",
          "level": "hard",
          "type": "open",
          "question": "Explain the concept of Blue-Green deployment and discuss its advantages and disadvantages in the context of a frontend application deployment.",
          "answer": "Blue-Green deployment is a strategy that minimizes downtime by running two identical production environments, let's call them 'Blue' and 'Green'. At any given time, only one environment is live (e.g., Blue) and serving user traffic. When a new version of the application is to be deployed, it is deployed to the inactive environment (Green). Once the new version is thoroughly tested in Green, traffic is switched from Blue to Green, making Green the new live environment. The old Blue environment is kept as a standby for quick rollback or for future deployments.\n\n**Advantages for Frontend Applications:**\n1.  **Zero Downtime Deployment**: Users experience no interruption as traffic is seamlessly switched between environments.\n2.  **Instant Rollback**: If issues are detected post-switch, traffic can be immediately routed back to the old 'Blue' environment, minimizing impact.\n3.  **Safe Testing**: New versions can be tested in a production-like environment (the inactive 'Green' one) without affecting live users.\n4.  **Reduced Risk**: The isolation between environments reduces the risk of new deployments introducing breaking changes to the live application.\n5.  **A/B Testing Potential**: Can be adapted for simple A/B testing by routing a small percentage of users to the new 'Green' environment.\n\n**Disadvantages for Frontend Applications:**\n1.  **Infrastructure Cost**: Requires maintaining two full production environments, doubling infrastructure costs.\n2.  **Complexity**: Managing two environments, synchronizing databases (if applicable for stateful parts), and orchestrating the switch adds complexity to the CI/CD pipeline.\n3.  **State Management**: For applications with persistent user sessions or real-time connections (like WebSockets), careful consideration is needed to ensure a smooth transition without dropping user state.\n4.  **Database Migrations**: If the frontend deployment is tightly coupled with backend changes that require database migrations, coordinating these can be challenging, as the Blue environment might still be relying on the old database schema while the Green requires the new one.\n5.  **Asset Cache Invalidation**: While the deployment itself is smooth, ensuring browsers fetch new assets and not stale cached ones requires proper cache busting strategies (e.g., versioned URLs) regardless of the deployment method.",
          "options": [],
          "analysisPoints": [
            "Clear definition of Blue-Green deployment.",
            "Comprehensive list of advantages relevant to frontend.",
            "Comprehensive list of disadvantages relevant to frontend, including infrastructure, complexity, and specific frontend concerns like caching and state.",
            "Demonstrates understanding of deployment strategies beyond basic hosting."
          ],
          "keyConcepts": [
            "blue-green deployment",
            "CI/CD",
            "downtime",
            "rollback",
            "deployment strategies"
          ],
          "evaluationCriteria": [
            "In-depth understanding of advanced deployment patterns",
            "Ability to articulate pros and cons specific to frontend context",
            "Critical thinking about operational challenges"
          ],
          "example": null,
          "tags": [
            "CI/CD",
            "deployment",
            "devops",
            "advanced-topics",
            "scalability"
          ],
          "prerequisites": [
            "web_hosting_concepts",
            "server_architecture"
          ],
          "complexity": 9,
          "interviewFrequency": 7,
          "learningPath": "advanced"
        },
        {
          "id": "question_web_app_prod_5",
          "topic": "Monitoring and Logging",
          "level": "easy",
          "type": "flashcard",
          "question": "Name two types of monitoring that are crucial for a production web application.",
          "answer": "Error tracking and performance monitoring.",
          "options": [],
          "analysisPoints": [
            "Recall common monitoring categories."
          ],
          "keyConcepts": [
            "monitoring",
            "error tracking",
            "performance monitoring"
          ],
          "evaluationCriteria": [
            "Basic recall of monitoring types"
          ],
          "example": null,
          "tags": [
            "monitoring",
            "production",
            "operations"
          ],
          "prerequisites": [],
          "complexity": 2,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_web_app_prod_6",
          "topic": "Production Build",
          "level": "medium",
          "type": "mcq",
          "question": "What is the primary benefit of 'Tree Shaking' in a frontend build process?",
          "answer": "It eliminates unused code from the final bundle, reducing its size.",
          "options": [
            "It splits the code into smaller, asynchronously loaded chunks.",
            "It transpiles modern JavaScript into older, compatible versions.",
            "It eliminates unused code from the final bundle, reducing its size.",
            "It caches assets in the browser for faster subsequent loads."
          ],
          "analysisPoints": [
            "Option A describes Code Splitting.",
            "Option B describes Transpilation (e.g., Babel).",
            "Option D describes Caching.",
            "The correct answer directly defines Tree Shaking's function."
          ],
          "keyConcepts": [
            "tree shaking",
            "bundle size",
            "optimization"
          ],
          "evaluationCriteria": [
            "Understanding of build process specifics",
            "Distinguishing between optimization techniques"
          ],
          "example": "If a library exports functions A, B, and C, but your application only imports and uses function A, tree shaking will remove functions B and C from your final JavaScript bundle, leading to a smaller file size.",
          "tags": [
            "optimization",
            "build-process",
            "webpack"
          ],
          "prerequisites": [
            "bundlers"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_app_prod_7",
          "topic": "Performance Considerations",
          "level": "medium",
          "type": "open",
          "question": "Why is using a CDN (Content Delivery Network) important for static assets in a globally distributed web application?",
          "answer": "A CDN is crucial for globally distributed web applications because it significantly improves the delivery speed of static assets (like images, CSS, JavaScript files) to users worldwide.\n\n**Key reasons:**\n1.  **Reduced Latency**: CDNs have servers (Points of Presence or PoPs) located in various geographical regions. When a user requests an asset, the CDN serves it from the PoP closest to them, minimizing the physical distance data has to travel.\n2.  **Improved Availability**: If one CDN PoP goes down, traffic can be automatically routed to another healthy PoP, ensuring high availability of assets.\n3.  **Reduced Server Load**: By offloading static asset delivery to the CDN, the origin server (where your application runs) experiences less traffic, freeing up resources for dynamic content and API requests.\n4.  **Scalability**: CDNs are built to handle massive amounts of traffic, scaling automatically to accommodate spikes in demand without impacting your origin server.\n5.  **Enhanced Security**: Many CDNs offer additional security features like DDoS protection and WAF (Web Application Firewall) that protect your assets and potentially your origin server from malicious attacks.",
          "options": [],
          "analysisPoints": [
            "Explanation of CDN's core function (geographic distribution).",
            "Detailed benefits: reduced latency, availability, server load, scalability, security."
          ],
          "keyConcepts": [
            "CDN",
            "static assets",
            "latency",
            "performance"
          ],
          "evaluationCriteria": [
            "Understanding of network infrastructure",
            "Ability to explain performance benefits"
          ],
          "example": null,
          "tags": [
            "performance",
            "CDN",
            "network",
            "deployment"
          ],
          "prerequisites": [
            "web_performance_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_web_app_prod_8",
          "topic": "CI/CD Pipeline",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary goal of implementing automated testing in a CI/CD pipeline?",
          "answer": "To catch bugs and regressions early in the development cycle, ensuring code quality and stability before deployment.",
          "options": [],
          "analysisPoints": [
            "Focus on 'early detection' and 'quality assurance'."
          ],
          "keyConcepts": [
            "CI/CD",
            "automated testing",
            "quality assurance"
          ],
          "evaluationCriteria": [
            "Basic understanding of CI/CD principles"
          ],
          "example": null,
          "tags": [
            "CI/CD",
            "testing",
            "automation"
          ],
          "prerequisites": [
            "software_testing_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_service_worker_1",
          "topic": "Service Workers",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the main capability of a Service Worker that enables offline functionality?",
          "answer": "Its ability to act as a programmable network proxy and cache network requests.",
          "options": [],
          "analysisPoints": [
            "Highlight the proxy and caching roles."
          ],
          "keyConcepts": [
            "service worker",
            "offline",
            "caching",
            "network proxy"
          ],
          "evaluationCriteria": [
            "Core function of Service Worker"
          ],
          "example": null,
          "tags": [
            "service-workers",
            "pwa",
            "offline",
            "caching"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_service_worker_2",
          "topic": "Service Workers",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following is NOT a capability of a Service Worker?",
          "answer": "Directly manipulate the DOM elements of the main page.",
          "options": [
            "Intercepting and controlling network requests.",
            "Enabling push notifications.",
            "Providing offline functionality through caching.",
            "Directly manipulate the DOM elements of the main page."
          ],
          "analysisPoints": [
            "Service Workers run in a separate thread and cannot directly access the DOM, similar to Web Workers.",
            "The other options are core features of Service Workers."
          ],
          "keyConcepts": [
            "service worker",
            "dom access",
            "limitations"
          ],
          "evaluationCriteria": [
            "Understanding of Service Worker capabilities and limitations",
            "Distinguishing from main thread JavaScript"
          ],
          "example": "Service Workers operate in their own context and communicate with the main thread via `postMessage`. This isolation prevents them from blocking the UI thread but also restricts direct DOM manipulation.",
          "tags": [
            "service-workers",
            "pwa",
            "limitations",
            "dom"
          ],
          "prerequisites": [
            "javascript_async"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_service_worker_3",
          "topic": "Service Workers",
          "level": "medium",
          "type": "open",
          "question": "Describe the lifecycle of a Service Worker from registration to activation, and explain why it's important for ensuring updated content.",
          "answer": "The Service Worker lifecycle involves several stages:\n\n1.  **Registration**: The main thread JavaScript initiates the process by calling `navigator.serviceWorker.register('/service-worker.js')`. The browser downloads the Service Worker script.\n2.  **Installation**: Once downloaded, the `install` event is fired in the Service Worker. During this phase, it typically performs initial caching of static assets using `event.waitUntil()` and `caches.addAll()`. If caching fails, the installation fails.\n3.  **Activation**: After successful installation, the `activate` event is fired. This is where the Service Worker takes control of its registered scope (e.g., all pages under a specific URL path). During activation, it might clean up old caches from previous versions using `caches.keys()` and `cache.delete()`.\n\n**Why it's important for updated content (updating a Service Worker):**\nWhen you deploy a new version of your `service-worker.js` file, the browser detects the byte-difference. It then downloads the new version in the background and attempts to install it. This new version is called the 'waiting' Service Worker. It will only 'activate' and take control once all previously controlled tabs for the old Service Worker are closed or navigated away from (or if `self.skipWaiting()` is called). This ensures a smooth transition: a user won't suddenly get a mixed version of your app (old HTML, new JS, etc.). The old Service Worker continues to serve content until no clients are using it, then the new one activates, ensuring content consistency.",
          "options": [],
          "analysisPoints": [
            "Accurate description of registration, installation, and activation steps.",
            "Clear explanation of how updates work and why it ensures content consistency.",
            "Mention of `event.waitUntil()` and `self.skipWaiting()` (optional but good).",
            "Understanding of the controlled client concept."
          ],
          "keyConcepts": [
            "service worker lifecycle",
            "installation",
            "activation",
            "updating service workers",
            "cache management"
          ],
          "evaluationCriteria": [
            "Detailed understanding of Service Worker operation",
            "Ability to explain practical implications for updates"
          ],
          "example": null,
          "tags": [
            "service-workers",
            "pwa",
            "lifecycle",
            "caching",
            "updates"
          ],
          "prerequisites": [
            "javascript_async",
            "event_listeners"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_service_worker_4",
          "topic": "Service Workers",
          "level": "medium",
          "type": "code",
          "question": "Write a `service-worker.js` snippet that implements a 'network-first with cache fallback' strategy for non-HTML requests.",
          "answer": "```javascript\n// service-worker.js\nconst CACHE_NAME = 'dynamic-data-cache-v1';\n\nself.addEventListener('fetch', event => {\n  // Only apply this strategy to non-HTML requests (e.g., API calls, images, fonts)\n  // HTML requests often benefit more from cache-first or network-only\n  if (event.request.mode === 'navigate') { // This checks if it's a navigation request (for HTML pages)\n    return; // Let the browser handle it normally or apply a different strategy\n  }\n\n  event.respondWith(\n    fetch(event.request)\n      .then(networkResponse => {\n        // If network request succeeds, clone the response to store in cache\n        // A response can only be consumed once, so clone if you want to also return it.\n        const responseToCache = networkResponse.clone();\n        caches.open(CACHE_NAME)\n          .then(cache => {\n            cache.put(event.request, responseToCache);\n          });\n        return networkResponse;\n      })\n      .catch(() => {\n        // Network failed, try to get from cache\n        return caches.match(event.request);\n      })\n  );\n});\n\nself.addEventListener('activate', event => {\n  event.waitUntil(\n    caches.keys().then(cacheNames => {\n      return Promise.all(\n        cacheNames.map(cacheName => {\n          if (cacheName !== CACHE_NAME) {\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n});\n```",
          "options": [],
          "analysisPoints": [
            "Correct implementation of `fetch` listener.",
            "Demonstrates network-first logic (try `fetch` first, then `catch` for cache).",
            "Uses `response.clone()` correctly for caching network responses.",
            "Includes a basic `activate` event listener for cache cleanup (good practice).",
            "Distinguishes between navigation requests and other asset requests (optional but good for specific strategies)."
          ],
          "keyConcepts": [
            "service worker",
            "caching strategies",
            "fetch event",
            "cache api",
            "network-first"
          ],
          "evaluationCriteria": [
            "Ability to implement Service Worker caching logic",
            "Understanding of network-first pattern",
            "Correct use of `caches` API and `response.clone()`"
          ],
          "example": null,
          "tags": [
            "service-workers",
            "caching",
            "pwa",
            "code-challenge"
          ],
          "prerequisites": [
            "javascript_promises",
            "fetch_api"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "advanced"
        },
        {
          "id": "question_worker_type_diff_1",
          "topic": "Service Workers vs. Web Workers",
          "level": "medium",
          "type": "mcq",
          "question": "What is a key difference between a Service Worker and a Web Worker regarding their access to the DOM?",
          "answer": "Neither Service Workers nor Web Workers can directly access the DOM.",
          "options": [
            "Service Workers can access the DOM, but Web Workers cannot.",
            "Web Workers can access the DOM, but Service Workers cannot.",
            "Both Service Workers and Web Workers can directly access the DOM.",
            "Neither Service Workers nor Web Workers can directly access the DOM."
          ],
          "analysisPoints": [
            "Both worker types run in separate threads to avoid blocking the main thread.",
            "Direct DOM access from background threads would violate this isolation principle.",
            "Communication is always via message passing."
          ],
          "keyConcepts": [
            "service worker",
            "web worker",
            "dom access",
            "isolation"
          ],
          "evaluationCriteria": [
            "Understanding the core limitations of background workers",
            "Ability to distinguish worker types based on capabilities"
          ],
          "example": "If a Web Worker or Service Worker needed to update the UI, it would send a message to the main thread. The main thread would then receive the message and perform the DOM manipulation.",
          "tags": [
            "service-workers",
            "web-workers",
            "comparison",
            "dom"
          ],
          "prerequisites": [],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_worker_type_diff_2",
          "topic": "Service Workers vs. Web Workers",
          "level": "hard",
          "type": "open",
          "question": "You have a web application that needs to perform a complex image processing task (e.g., applying multiple filters) without freezing the UI, and also needs to send push notifications and enable offline access. Which type(s) of background workers would you use for each functionality, and why?",
          "answer": "For this scenario, I would use both a Web Worker and a Service Worker, as they serve distinct purposes:\n\n1.  **For Complex Image Processing (e.g., applying multiple filters):** I would use a **Web Worker**.\n    *   **Reasoning**: Web Workers are specifically designed to run CPU-intensive tasks in a separate thread, preventing the main browser thread (and thus the UI) from becoming unresponsive. Image processing can be very computationally demanding, making it a perfect candidate for a Web Worker. It communicates with the main thread via message passing, sending the processed image data back once completed.\n\n2.  **For Push Notifications and Offline Access:** I would use a **Service Worker**.\n    *   **Reasoning**: Service Workers are purpose-built for these capabilities. They act as a network proxy, allowing them to intercept requests and serve cached content for offline access. They also implement the Push API, enabling the application to receive messages from a server and display notifications even when the user is not actively on the page or the browser is closed. These features require the Service Worker's persistent and network-interception abilities, which Web Workers do not possess.\n\nIn summary, the Web Worker handles the intensive, synchronous-like computation, keeping the UI fluid, while the Service Worker manages network-related tasks like caching and background communication for push notifications and offline mode.",
          "options": [],
          "analysisPoints": [
            "Correctly identifies Web Worker for CPU-intensive task and provides reasoning.",
            "Correctly identifies Service Worker for network/PWA features and provides reasoning.",
            "Demonstrates understanding of the unique strengths and limitations of each worker type.",
            "Shows ability to apply theoretical knowledge to a practical, multi-functional scenario."
          ],
          "keyConcepts": [
            "service worker",
            "web worker",
            "use cases",
            "offline",
            "push notifications",
            "performance",
            "ui responsiveness"
          ],
          "evaluationCriteria": [
            "Deep understanding of worker types' roles",
            "Ability to choose appropriate technology for specific problems",
            "Justification of choices with technical reasoning"
          ],
          "example": null,
          "tags": [
            "service-workers",
            "web-workers",
            "pwa",
            "architecture",
            "performance",
            "expert"
          ],
          "prerequisites": [
            "theory_service_workers"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_web_worker_1",
          "topic": "Web Workers",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the main benefit of using a Web Worker?",
          "answer": "To run CPU-intensive operations in a background thread, preventing the main UI thread from blocking.",
          "options": [],
          "analysisPoints": [
            "Focus on 'CPU-intensive' and 'non-blocking UI'."
          ],
          "keyConcepts": [
            "web worker",
            "performance",
            "ui blocking"
          ],
          "evaluationCriteria": [
            "Basic understanding of Web Worker's purpose"
          ],
          "example": null,
          "tags": [
            "web-workers",
            "performance",
            "background-tasks"
          ],
          "prerequisites": [],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        },
        {
          "id": "question_web_worker_2",
          "topic": "Web Workers",
          "level": "medium",
          "type": "code",
          "question": "Implement a simple Web Worker that takes an array of numbers and returns their sum. Show both the main thread code and the worker script.",
          "answer": "```javascript\n// main.js\nfunction calculateSumInWorker(numbers) {\n  return new Promise((resolve, reject) => {\n    if (typeof Worker === 'undefined') {\n      reject('Web Workers are not supported in this browser.');\n      return;\n    }\n\n    const sumWorker = new Worker('sumWorker.js');\n\n    sumWorker.onmessage = function(event) {\n      console.log('Main thread: Received sum from worker:', event.data.sum);\n      sumWorker.terminate(); // Terminate worker after receiving result\n      resolve(event.data.sum);\n    };\n\n    sumWorker.onerror = function(error) {\n      console.error('Main thread: Worker error:', error);\n      sumWorker.terminate();\n      reject(error);\n    };\n\n    console.log('Main thread: Sending numbers to worker:', numbers);\n    sumWorker.postMessage({ numbers: numbers });\n  });\n}\n\n// Example usage:\ncalculateSumInWorker([1, 2, 3, 4, 5])\n  .then(sum => console.log('Final Sum:', sum))\n  .catch(err => console.error(err));\n\ncalculateSumInWorker([100, 200, 300])\n  .then(sum => console.log('Final Sum:', sum))\n  .catch(err => console.error(err));\n\n\n// sumWorker.js\nonmessage = function(event) {\n  const numbers = event.data.numbers;\n  console.log('Worker: Received numbers:', numbers);\n  let sum = 0;\n  for (let i = 0; i < numbers.length; i++) {\n    sum += numbers[i];\n  }\n  console.log('Worker: Calculated sum:', sum);\n  postMessage({ sum: sum });\n};\n```",
          "options": [],
          "analysisPoints": [
            "Correct `Worker` instantiation in main thread.",
            "Proper use of `postMessage` for sending data to worker.",
            "Correct `onmessage` listener in main thread for receiving results.",
            "Correct `onmessage` listener in worker for receiving data.",
            "Proper use of `postMessage` in worker for sending results back.",
            "Basic error handling and worker termination.",
            "Demonstrates data copying (not sharing) implicitly."
          ],
          "keyConcepts": [
            "web worker",
            "message passing",
            "postMessage",
            "onmessage",
            "background processing"
          ],
          "evaluationCriteria": [
            "Ability to implement basic Web Worker communication",
            "Understanding of asynchronous worker patterns",
            "Correct separation of concerns between main thread and worker"
          ],
          "example": null,
          "tags": [
            "web-workers",
            "code-challenge",
            "javascript",
            "performance"
          ],
          "prerequisites": [
            "javascript_async_promises"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_caching_1",
          "topic": "Client-Side Caching Strategies",
          "level": "easy",
          "type": "flashcard",
          "question": "Name two common HTTP caching headers.",
          "answer": "`Cache-Control`, `ETag`, `Last-Modified`, `Expires` (any two).",
          "options": [],
          "analysisPoints": [
            "Recall standard HTTP caching headers."
          ],
          "keyConcepts": [
            "http caching",
            "cache-control",
            "etag",
            "last-modified"
          ],
          "evaluationCriteria": [
            "Basic recall of HTTP caching"
          ],
          "example": null,
          "tags": [
            "caching",
            "http",
            "performance"
          ],
          "prerequisites": [
            "http_basics"
          ],
          "complexity": 3,
          "interviewFrequency": 8,
          "learningPath": "beginner"
        },
        {
          "id": "question_caching_2",
          "topic": "Client-Side Caching Strategies",
          "level": "medium",
          "type": "mcq",
          "question": "Which `Cache-Control` directive instructs the browser to always revalidate a cached resource with the server before using it, even if it's still considered fresh?",
          "answer": "`no-cache`",
          "options": [
            "`no-store`",
            "`max-age=0`",
            "`must-revalidate`",
            "`no-cache`"
          ],
          "analysisPoints": [
            "`no-store` means don't cache at all.",
            "`max-age=0` means it's immediately stale, requiring revalidation, but `no-cache` explicitly forces revalidation regardless of freshness.",
            "`must-revalidate` is used *in conjunction* with `max-age` to say 'don't use stale copies', but `no-cache` is the primary directive for 'always revalidate'."
          ],
          "keyConcepts": [
            "http caching",
            "cache-control",
            "no-cache",
            "revalidation"
          ],
          "evaluationCriteria": [
            "Precise understanding of Cache-Control directives",
            "Ability to distinguish subtle differences between similar directives"
          ],
          "example": "A server might send `Cache-Control: no-cache` for an API response that needs to be fresh, but also shouldn't be re-fetched on every single request if the user navigates back to the page very quickly. The browser will check `If-None-Match` or `If-Modified-Since` on the server.",
          "tags": [
            "caching",
            "http",
            "performance"
          ],
          "prerequisites": [
            "http_headers"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_caching_3",
          "topic": "Client-Side Caching Strategies",
          "level": "medium",
          "type": "open",
          "question": "Explain the 'stale-while-revalidate' caching strategy in the context of Service Workers and provide a scenario where it would be beneficial.",
          "answer": "The 'stale-while-revalidate' caching strategy is a Service Worker pattern where the Service Worker immediately returns a cached response (which might be 'stale' or outdated) to the client while simultaneously making a network request in the background to fetch the freshest version of the resource. Once the fresh network response is received, it updates the cache for future requests.\n\n**Scenario where it would be beneficial:**\nConsider a news feed or a social media application. Users expect to see content quickly, but they also want to see the most up-to-date information. If a user has previously visited the page, the Service Worker can:\n1.  **Immediately display the cached news feed** (stale content), giving the user instant feedback and a responsive UI.\n2.  **Concurrently fetch the latest news articles from the network**.\n3.  **Update the cache** with the new articles and, potentially, notify the user or refresh a specific section of the UI with the fresh data.\n\nThis strategy provides an excellent balance between performance (instant load from cache) and data freshness (eventual consistency with network data), enhancing the user experience, especially on slow or intermittent network connections.",
          "options": [],
          "analysisPoints": [
            "Clear definition of stale-while-revalidate.",
            "Demonstrates understanding of its mechanics (return stale, revalidate in background, update cache).",
            "Provides a relevant and detailed scenario demonstrating its benefits (news feed, social media) focusing on speed and freshness.",
            "Articulates the balance between performance and freshness."
          ],
          "keyConcepts": [
            "service worker",
            "caching strategies",
            "stale-while-revalidate",
            "performance",
            "user experience"
          ],
          "evaluationCriteria": [
            "In-depth knowledge of Service Worker caching patterns",
            "Ability to apply strategy to real-world problems",
            "Explanation of trade-offs and benefits"
          ],
          "example": null,
          "tags": [
            "service-workers",
            "caching",
            "performance",
            "pwa",
            "strategy"
          ],
          "prerequisites": [
            "theory_service_workers",
            "theory_client_side_caching"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_caching_4",
          "topic": "Application Data Caching",
          "level": "medium",
          "type": "code",
          "question": "When would you choose `IndexedDB` over `localStorage` for client-side data storage, and provide a simple JavaScript code example for a basic `localStorage` operation.",
          "answer": "I would choose `IndexedDB` over `localStorage` in the following scenarios:\n\n*   **Larger Data Volumes**: `localStorage` is designed for small key-value pairs (typically 5-10 MB limit per origin). `IndexedDB` is a full-fledged, transactional object-oriented database within the browser, capable of storing much larger amounts of structured data (hundreds of MBs to GBs depending on browser/device).\n*   **Structured Data / Complex Queries**: `localStorage` only supports string key-value pairs, requiring manual serialization/deserialization for objects. `IndexedDB` can store JavaScript objects directly, supports indexes for efficient querying, and transactions for reliable operations.\n*   **Offline Data Synchronization**: For complex offline-first applications that need to manage large datasets, synchronize with a backend, or perform sophisticated data manipulations, `IndexedDB` is the appropriate choice.\n*   **Binary Data Storage**: `IndexedDB` can store binary data (like `ArrayBuffer`, `Blob`, `File`), which `localStorage` cannot.\n\n`localStorage` remains suitable for simple, small pieces of data like user preferences, session tokens, or theme settings due to its synchronous, easy-to-use API.\n\n**Simple `localStorage` operation example:**\n\n```javascript\n// Store data\nlocalStorage.setItem('username', 'Alice');\nlocalStorage.setItem('user_settings', JSON.stringify({ theme: 'dark', notifications: true }));\n\n// Retrieve data\nconst username = localStorage.getItem('username');\nconst userSettingsString = localStorage.getItem('user_settings');\nconst userSettings = userSettingsString ? JSON.parse(userSettingsString) : {};\n\nconsole.log(`Username: ${username}`); // Output: Username: Alice\nconsole.log(`User Theme: ${userSettings.theme}`); // Output: User Theme: dark\n\n// Remove data\n// localStorage.removeItem('username');\n// localStorage.clear(); // Clears all data for the current origin\n\n// Check if item exists\nif (localStorage.getItem('username')) {\n  console.log('Username is stored.');\n}\n```",
          "options": [],
          "analysisPoints": [
            "Clear distinction between IndexedDB and localStorage based on data volume, structure, and use cases.",
            "Provides specific examples for when each would be preferred.",
            "Correct and runnable `localStorage` example including set, get, and parse/stringify.",
            "Mention of `removeItem` and `clear` for completeness."
          ],
          "keyConcepts": [
            "localStorage",
            "IndexedDB",
            "client-side storage",
            "data caching",
            "web storage"
          ],
          "evaluationCriteria": [
            "Understanding of different browser storage mechanisms",
            "Ability to choose the right tool for the job",
            "Practical coding example demonstrating usage"
          ],
          "example": null,
          "tags": [
            "caching",
            "browser-storage",
            "localStorage",
            "IndexedDB",
            "code-example"
          ],
          "prerequisites": [
            "javascript_basics"
          ],
          "complexity": 7,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_caching_5",
          "topic": "Client-Side Caching Strategies",
          "level": "hard",
          "type": "open",
          "question": "Discuss the problem of 'cache busting' and explain at least two common techniques used to solve it in frontend development.",
          "answer": "Cache busting is the process of ensuring that a web browser fetches the latest version of a resource (like a JavaScript file, CSS file, or image) from the server, rather than serving an outdated version from its local cache, even if the browser's cache headers suggest the old version is still valid. This problem arises because browsers aggressively cache static assets to improve performance, but when those assets change on the server, developers need a reliable way to force clients to download the new version.\n\n**Common Techniques for Cache Busting:**\n\n1.  **Versioned URLs (Fingerprinting / Hashing)**:\n    *   **Explanation**: This is the most robust and widely used method. It involves appending a unique identifier (often a hash of the file's content or a version number) to the filename or as a query parameter in the URL of the resource. For example: `app.js?v=1.2.3` or `app.1a2b3c.js`.\n    *   **Mechanism**: When the content of `app.js` changes, its hash (or version number) also changes, resulting in a completely new URL (`app.4d5e6f.js`). From the browser's perspective, this is a brand new resource, so it bypasses its cache and fetches the new file from the server. The old, un-versioned or differently versioned file remains in cache but is never requested again by the application.\n    *   **Implementation**: Build tools like Webpack, Rollup, and Parcel automate this process by generating unique hashes for bundled assets during the build step.\n    *   **Pros**: Highly effective, leverages browser's default caching behavior (long `Cache-Control: max-age` can be used for versioned files), works well with CDNs.\n    *   **Cons**: Requires a build step; can make inspecting source files in browser dev tools slightly harder due to hash in filenames.\n\n2.  **`Cache-Control: no-cache` or `max-age=0, must-revalidate` (with ETag/Last-Modified)**:\n    *   **Explanation**: While `no-cache` literally means 'do not cache', its true meaning is 'cache the resource, but always revalidate it with the origin server before using it'. When the browser makes a request for a `no-cache` resource, it includes `If-None-Match` (with ETag) or `If-Modified-Since` (with Last-Modified date).\n    *   **Mechanism**: If the server determines the resource hasn't changed (based on ETag or Last-Modified), it responds with a `304 Not Modified` status, telling the browser to use its cached version. If the resource has changed, the server sends the new resource with a `200 OK` status. This ensures freshness without necessarily downloading the entire resource if it hasn't changed.\n    *   **Pros**: Simpler to implement on the server side; good for dynamic resources that need freshness but can still benefit from conditional caching.\n    *   **Cons**: Still involves a network request (though smaller for 304); can introduce a slight delay compared to directly serving from cache; not as aggressive for ensuring *all* users get the *very latest* version instantly as versioned URLs for critical static assets.",
          "options": [],
          "analysisPoints": [
            "Clear definition of cache busting problem.",
            "Detailed explanation of versioned URLs, including mechanism, implementation tools, pros, and cons.",
            "Detailed explanation of `no-cache` strategy with ETag/Last-Modified, including mechanism, pros, and cons.",
            "Demonstrates comprehensive understanding of caching and its challenges.",
            "Compares and contrasts the effectiveness of different techniques."
          ],
          "keyConcepts": [
            "cache busting",
            "http caching",
            "versioned urls",
            "etag",
            "last-modified",
            "cache-control",
            "frontend build"
          ],
          "evaluationCriteria": [
            "Expert-level understanding of caching challenges",
            "Ability to articulate and compare solutions",
            "Knowledge of build tool implications"
          ],
          "example": null,
          "tags": [
            "caching",
            "performance",
            "http",
            "build-process",
            "hard"
          ],
          "prerequisites": [
            "http_protocols",
            "frontend_build_tools"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_caching_6",
          "topic": "Service Worker Caching",
          "level": "medium",
          "type": "flashcard",
          "question": "What Service Worker caching strategy prioritizes serving an asset immediately from cache, then fetching an updated version from the network for future requests?",
          "answer": "Stale-while-revalidate.",
          "options": [],
          "analysisPoints": [
            "Accurate identification of the strategy based on its behavior."
          ],
          "keyConcepts": [
            "service worker",
            "caching strategies",
            "stale-while-revalidate"
          ],
          "evaluationCriteria": [
            "Recall of Service Worker caching patterns"
          ],
          "example": null,
          "tags": [
            "service-workers",
            "caching",
            "pwa"
          ],
          "prerequisites": [
            "theory_service_workers"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_caching_7",
          "topic": "Application Data Caching",
          "level": "medium",
          "type": "mcq",
          "question": "You need to store a user's large, structured application data (e.g., a complex document or a list of items with multiple properties) client-side for offline access. Which browser storage API is the most appropriate choice?",
          "answer": "IndexedDB",
          "options": [
            "localStorage",
            "sessionStorage",
            "Cookies",
            "IndexedDB"
          ],
          "analysisPoints": [
            "localStorage and sessionStorage are limited to small, string key-value pairs.",
            "Cookies are primarily for server communication and have very small storage limits.",
            "IndexedDB is designed for large volumes of structured data and asynchronous operations, making it ideal for this use case."
          ],
          "keyConcepts": [
            "indexeddb",
            "localstorage",
            "sessionstorage",
            "client-side storage",
            "offline data"
          ],
          "evaluationCriteria": [
            "Knowledge of browser storage APIs",
            "Ability to select the best API based on data characteristics and requirements"
          ],
          "example": "For a note-taking application that needs to save user notes with titles, content, tags, and last-modified dates, and support offline editing, IndexedDB would be chosen due to its ability to store structured objects and support queries.",
          "tags": [
            "caching",
            "indexeddb",
            "offline",
            "data-storage"
          ],
          "prerequisites": [
            "browser_storage"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_caching_8",
          "topic": "HTTP Caching",
          "level": "medium",
          "type": "open",
          "question": "How do `ETag` and `Last-Modified` headers work together to optimize subsequent requests for a resource?",
          "answer": "`ETag` and `Last-Modified` headers are both mechanisms for **conditional requests** in HTTP caching, used by the server to determine if a cached resource held by the client is still fresh, avoiding the need to re-send the entire resource if it hasn't changed. They work during the revalidation phase of caching (when `Cache-Control: no-cache` or `max-age=0` is used):\n\n1.  **Initial Request (Resource Not Cached / Stale):**\n    *   The client requests a resource (e.g., `GET /script.js`).\n    *   The server responds with a `200 OK` status and includes the `Last-Modified` header (timestamp of last change) and/or an `ETag` header (a unique identifier, often a hash of the content).\n    *   The browser caches the resource along with these headers.\n\n2.  **Subsequent Request (Revalidation):**\n    *   When the client requests the same resource again, and its cached copy is deemed 'stale' (e.g., `max-age` expired, or `no-cache` is set), the browser sends a **conditional GET request**.\n    *   It includes the `If-Modified-Since` header with the value from the `Last-Modified` header it previously received.\n    *   It also includes the `If-None-Match` header with the value from the `ETag` header it previously received.\n\n3.  **Server Response:**\n    *   The server checks the `If-Modified-Since` and/or `If-None-Match` headers against its current version of the resource.\n    *   **If the resource has NOT changed**: The server responds with a `304 Not Modified` status. This response contains no body, signaling the browser to use its existing cached copy. This is highly efficient as it saves bandwidth.\n    *   **If the resource HAS changed**: The server responds with a `200 OK` status, includes the *new* resource body, and updated `Last-Modified` and `ETag` headers. The browser then replaces its old cached copy with the new one.\n\n`ETag` is generally preferred over `Last-Modified` because it is more precise (e.g., `Last-Modified` might not change if content changes but timestamp doesn't, or vice-versa with small non-functional changes) and can handle changes that don't affect the modification date. They can be used together, with `ETag` usually taking precedence if both are present.",
          "options": [],
          "analysisPoints": [
            "Explains the purpose of both headers in conditional requests.",
            "Details the flow from initial request to subsequent revalidation.",
            "Clearly states the `If-Modified-Since` and `If-None-Match` request headers.",
            "Explains the `304 Not Modified` response and its benefit.",
            "Highlights the precision advantage of `ETag` over `Last-Modified`."
          ],
          "keyConcepts": [
            "http caching",
            "etag",
            "last-modified",
            "conditional requests",
            "304 not modified",
            "revalidation"
          ],
          "evaluationCriteria": [
            "Deep understanding of HTTP caching mechanisms",
            "Ability to explain the request/response flow",
            "Comparison of header strengths"
          ],
          "example": null,
          "tags": [
            "http",
            "caching",
            "performance",
            "networking",
            "advanced"
          ],
          "prerequisites": [
            "http_methods_headers"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_caching_9",
          "topic": "React Query / SWR Caching",
          "level": "easy",
          "type": "flashcard",
          "question": "What is 'automatic revalidation' in the context of libraries like React Query or SWR?",
          "answer": "Automatically re-fetching data from the server in the background (and updating cache) when certain events occur, like window focus or network reconnect.",
          "options": [],
          "analysisPoints": [
            "Focus on automatic background re-fetching and common triggers."
          ],
          "keyConcepts": [
            "react query",
            "swr",
            "caching",
            "revalidation"
          ],
          "evaluationCriteria": [
            "Basic understanding of library-specific caching"
          ],
          "example": null,
          "tags": [
            "react-query",
            "swr",
            "caching",
            "frontend-libraries"
          ],
          "prerequisites": [
            "react_basics"
          ],
          "complexity": 4,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        }
      ],
      "tasks": [
        {
          "id": "task_optimize_bundle_size",
          "title": "Optimize Webpack Configuration for Production Bundle Size",
          "description": "\nGiven a minimal Webpack configuration, extend it to include common production optimizations aimed at reducing the final JavaScript bundle size and improving load performance. Specifically, implement configurations for:\n\n1.  **Code Splitting**: Split the application into separate chunks (e.g., vendors, main application, and dynamic imports).\n2.  **Tree Shaking**: Ensure unused exports from libraries are removed.\n3.  **Minification**: Minify JavaScript and CSS.\n4.  **Environment Variables**: Inject `process.env.NODE_ENV` as 'production'.\n\nYour goal is to demonstrate how these settings are applied in a Webpack setup.\n",
          "difficulty": "medium",
          "startingCode": "const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\n\nmodule.exports = {\n  mode: 'development', // Change to 'production' for this task\n  entry: './src/index.js',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env', '@babel/preset-react'],\n          },\n        },\n      },\n      {\n        test: /\\.css$/,\n        use: ['style-loader', 'css-loader'],\n      },\n    ],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n  ],\n};\n\n// src/index.js (Example App)\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Hello Webpack Optimization!</h1>\n      <button onClick={() => import('./dynamicComponent').then(module => {\n        const DynamicComponent = module.default;\n        alert('Dynamic Component Loaded!');\n        // In a real app, you'd render it here\n      })}>Load Dynamic Component</button>\n    </div>\n  );\n};\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n\n// src/index.css\nbody {\n  font-family: sans-serif;\n  background-color: #f0f0f0;\n}\n\n/* src/dynamicComponent.js (This file should be lazy-loaded) */\nexport default function DynamicComponent() {\n  return <h2>I'm a dynamically loaded component!</h2>;\n}\n\n/* public/index.html */\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Webpack App</title>\n</head>\n<body>\n    <div id=\"root\"></div>\n</body>\n</html>\n",
          "solutionCode": "const path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst CssMinimizerPlugin = require('css-minimizer-webpack-plugin');\nconst TerserPlugin = require('terser-webpack-plugin');\nconst webpack = require('webpack');\n\nmodule.exports = {\n  mode: 'production', // CRITICAL: Set mode to production\n  entry: './src/index.js',\n  output: {\n    filename: '[name].[contenthash].js', // Use contenthash for cache busting\n    path: path.resolve(__dirname, 'dist'),\n    clean: true, // Clean the dist folder before each build\n    chunkFilename: '[name].[contenthash].js', // For dynamic imports\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /node_modules/,\n        use: {\n          loader: 'babel-loader',\n          options: {\n            presets: ['@babel/preset-env', '@babel/preset-react'],\n          },\n        },\n      },\n      {\n        test: /\\.css$/,\n        use: [MiniCssExtractPlugin.loader, 'css-loader'], // Use MiniCssExtractPlugin for production CSS\n      },\n    ],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      template: './public/index.html',\n    }),\n    new MiniCssExtractPlugin({\n      filename: '[name].[contenthash].css', // Use contenthash for cache busting\n    }),\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify('production'), // Inject production env variable\n    }),\n  ],\n  optimization: {\n    minimize: true, // Enable minification\n    minimizer: [\n      new TerserPlugin(), // Minify JavaScript\n      new CssMinimizerPlugin(), // Minify CSS\n    ],\n    splitChunks: {\n      chunks: 'all', // Apply code splitting to all chunks\n      // Optional: more granular control for caching groups\n      cacheGroups: {\n        vendor: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          name: 'vendors',\n          chunks: 'all',\n        },\n      },\n    },\n    usedExports: true, // Enable tree shaking (Webpack does this by default in 'production' mode, but good to be explicit)\n  },\n};\n\n// src/index.js (Example App)\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\n\n// Make sure to use named imports for tree shaking benefit\nimport { SomeUnusedFunction } from './utility'; // This should be tree-shaken\n\nconst App = () => {\n  return (\n    <div>\n      <h1>Hello Webpack Optimization!</h1>\n      <button onClick={() => import('./dynamicComponent').then(module => {\n        const DynamicComponent = module.default;\n        alert('Dynamic Component Loaded!');\n        // In a real app, you'd render it here\n      })}>Load Dynamic Component</button>\n    </div>\n  );\n};\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n\n// src/index.css\nbody {\n  font-family: sans-serif;\n  background-color: #f0f0f0;\n}\n\n/* src/dynamicComponent.js (This file should be lazy-loaded) */\nexport default function DynamicComponent() {\n  return <h2>I'm a dynamically loaded component!</h2>;\n}\n\n// src/utility.js (New file to demonstrate tree shaking)\nexport function SomeUsedFunction() {\n  console.log('This function is used.');\n}\n\nexport function SomeUnusedFunction() {\n  console.log('This function is NOT used and should be tree-shaken.');\n}\n\n/* public/index.html */\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Webpack App</title>\n</head>\n<body>\n    <div id=\"root\"></div>\n</body>\n</html>\n",
          "testCases": [
            "Run `npm run build` and inspect the `dist` folder: Verify multiple `.js` and `.css` files with `contenthash` are generated (main bundle, vendor bundle, dynamic component bundle).",
            "Inspect the generated JavaScript files: Confirm that the `SomeUnusedFunction` from `utility.js` is not present in the final main bundle (evidence of tree shaking).",
            "Inspect the generated `.js` and `.css` files: Confirm they are minified (no whitespace, short variable names).",
            "Serve the `dist` folder and check developer tools: Observe that the `dynamicComponent.js` chunk is only loaded when the button is clicked, not on initial page load (evidence of code splitting).",
            "Check browser console for `process.env.NODE_ENV`: Ensure it is 'production' when the app runs."
          ],
          "hints": [
            "Remember to set `mode: 'production'` in your Webpack config, as it enables many optimizations by default.",
            "For CSS extraction and minification, you'll need `mini-css-extract-plugin` and `css-minimizer-webpack-plugin`.",
            "`optimization.splitChunks` is key for code splitting.",
            "To effectively demonstrate tree shaking, ensure you have unused `export` functions/variables and use named imports where possible."
          ],
          "tags": [
            "webpack",
            "optimization",
            "production",
            "build-process",
            "code-splitting",
            "tree-shaking",
            "minification"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "webpack_basics",
            "javascript_modules"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_web_app_production_readiness"
          ]
        },
        {
          "id": "task_implement_cdn_caching",
          "title": "Simulate CDN and HTTP Caching for Static Assets",
          "description": "\nCreate a simple Node.js Express server that serves static assets (e.g., `index.html`, `app.js`, `style.css`) and configures appropriate HTTP `Cache-Control` headers for them. The goal is to simulate how a CDN or a well-configured web server would handle caching of static files.\n\n**Requirements:**\n1.  Serve `index.html` with a `Cache-Control` header indicating `no-cache` or `max-age=0, must-revalidate` (as HTML pages often need to be fresh).\n2.  Serve `app.js` and `style.css` (simulating versioned assets) with a `Cache-Control` header for aggressive caching, e.g., `public, max-age=31536000, immutable`.\n3.  Include a basic `app.js` and `style.css` that can be loaded by `index.html`.\n4.  Optionally, include `ETag` or `Last-Modified` headers for the `index.html` to demonstrate revalidation.\n\n**Bonus:** Implement a dynamic API endpoint `/api/data` that serves JSON and has `Cache-Control: no-store` to demonstrate completely preventing caching for sensitive data.\n",
          "difficulty": "medium",
          "startingCode": "// server.js\nconst express = require('express');\nconst path = require('path');\nconst app = express();\nconst PORT = 3000;\n\n// Basic static file serving (needs modification)\napp.use(express.static(path.join(__dirname, 'public')));\n\n// Start the server\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n});\n\n// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Caching Demo</title>\n    <link rel=\"stylesheet\" href=\"/style.css\">\n</head>\n<body>\n    <h1>HTTP Caching Demo</h1>\n    <p>Check network tab for cache headers!</p>\n    <script src=\"/app.js\"></script>\n</body>\n</html>\n\n// public/app.js\nconsole.log('App script loaded!');\n\n// public/style.css\nbody {\n    background-color: lightblue;\n}\n",
          "solutionCode": "// server.js\nconst express = require('express');\nconst path = require('path');\nconst fs = require('fs');\nconst crypto = require('crypto');\nconst app = express();\nconst PORT = 3000;\n\nconst publicPath = path.join(__dirname, 'public');\n\n// Middleware for ETag generation (for index.html)\napp.use((req, res, next) => {\n  if (req.path === '/index.html' || req.path === '/') {\n    const filePath = path.join(publicPath, 'index.html');\n    fs.readFile(filePath, (err, data) => {\n      if (err) {\n        return next(err);\n      }\n      const hash = crypto.createHash('md5').update(data).digest('hex');\n      res.setHeader('ETag', `\"${hash}\"`);\n      res.setHeader('Last-Modified', new Date().toUTCString()); // Use current time for simplicity\n      next();\n    });\n  } else {\n    next();\n  }\n});\n\n// 1. Serve index.html (or root path) with no-cache strategy\napp.get('/', (req, res) => {\n  res.setHeader('Cache-Control', 'no-cache, must-revalidate'); // Always revalidate\n  // Check for conditional request headers if ETag/Last-Modified are used\n  if (req.fresh) { // Express's req.fresh checks If-None-Match and If-Modified-Since\n    return res.sendStatus(304); // Send Not Modified if browser's cache is still valid\n  }\n  res.sendFile(path.join(publicPath, 'index.html'));\n});\n\n// 2. Serve versioned assets (app.js, style.css) with aggressive caching\napp.get('/app.js', (req, res) => {\n  res.setHeader('Cache-Control', 'public, max-age=31536000, immutable'); // Cache for 1 year, never revalidate\n  res.sendFile(path.join(publicPath, 'app.js'));\n});\n\napp.get('/style.css', (req, res) => {\n  res.setHeader('Cache-Control', 'public, max-age=31536000, immutable'); // Cache for 1 year, never revalidate\n  res.sendFile(path.join(publicPath, 'style.css'));\n});\n\n// 4. Bonus: Dynamic API endpoint with no-store\napp.get('/api/data', (req, res) => {\n  res.setHeader('Cache-Control', 'no-store'); // Never cache this response\n  res.json({ timestamp: new Date().toISOString(), message: 'Sensitive dynamic data' });\n});\n\n// Serve other static files (optional, for robustness)\napp.use(express.static(publicPath));\n\n// Start the server\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n  console.log('Open http://localhost:3000 in your browser and check the Network tab.');\n  console.log('Reload the page multiple times to observe caching behavior.');\n});\n\n// public/index.html (Note: scripts and links paths assume they are served directly at root or with path segments)\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Caching Demo</title>\n    <link rel=\"stylesheet\" href=\"/style.css\">\n</head>\n<body>\n    <h1>HTTP Caching Demo</h1>\n    <p>Check network tab for cache headers!</p>\n    <script src=\"/app.js\"></script>\n    <button id=\"fetchApi\">Fetch API Data</button>\n    <div id=\"api-data\"></div>\n    <script>\n        document.getElementById('fetchApi').addEventListener('click', async () => {\n            const response = await fetch('/api/data');\n            const data = await response.json();\n            document.getElementById('api-data').innerText = JSON.stringify(data, null, 2);\n        });\n    </script>\n</body>\n</html>\n\n// public/app.js\nconsole.log('App script loaded! Version 1.0'); // Add a version to easily see if it changes\n\n// public/style.css\nbody {\n    background-color: lightblue;\n}\n",
          "testCases": [
            "Access `http://localhost:3000` in your browser. Open developer tools (Network tab).",
            "Observe the initial load: `index.html` should show `200 OK` with `Cache-Control: no-cache, must-revalidate`. `app.js` and `style.css` should show `200 OK` with `Cache-Control: public, max-age=31536000, immutable`.",
            "Perform a hard refresh (Ctrl+Shift+R or Cmd+Shift+R): `index.html` should still be `200 OK` (full revalidation). `app.js` and `style.css` should show `200 OK` (CDN-like re-fetch for hard refresh, but ideally `from memory/disk cache` for soft refresh).",
            "Perform a soft refresh (F5 or Cmd+R): `index.html` should show `304 Not Modified` (if ETag/Last-Modified logic is correctly applied and content hasn't changed). `app.js` and `style.css` should show `200 OK` or `from disk cache` or `from memory cache` (not a network request) for aggressive caching.",
            "Click the 'Fetch API Data' button: The `/api/data` request should always show `200 OK` and `Cache-Control: no-store`.",
            "Modify `public/app.js` (e.g., change the console log message). Restart the server. Reload the page. Verify the new `app.js` content is loaded (simulating a new version in a real CDN).",
            "Clear browser cache completely, then reload. Observe fresh downloads of all resources."
          ],
          "hints": [
            "Use `express.static` for basic static file serving, but you'll need custom `app.get` routes for specific header control.",
            "Use `res.setHeader('Cache-Control', '...')` to set the headers.",
            "For `index.html` revalidation, you can leverage Express's `req.fresh` property after setting `ETag` or `Last-Modified` headers.",
            "Ensure your `index.html` links to `/app.js` and `/style.css` without explicit versioning in the URL for this test, to show header-based caching.",
            "Remember to clear your browser cache between tests to get a clean slate."
          ],
          "tags": [
            "http",
            "caching",
            "performance",
            "node.js",
            "express.js",
            "frontend-deployment"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "node_npm",
            "express_js",
            "http_protocols"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_web_app_production_readiness",
            "theory_client_side_caching"
          ]
        },
        {
          "id": "task_implement_offline_page",
          "title": "Implement a Basic Offline Page with Service Worker",
          "description": "\nCreate a simple web application that displays an offline page when the user loses network connectivity. This task requires implementing a Service Worker to intercept network requests and serve cached content.\n\n**Requirements:**\n1.  Create an `index.html` and a basic `style.css`.\n2.  Create an `offline.html` page that will be displayed when offline.\n3.  Register a `service-worker.js`.\n4.  In the `service-worker.js`:\n    *   During the `install` event, cache `index.html`, `style.css`, and `offline.html`.\n    *   During the `fetch` event, implement a **network-first with cache fallback** strategy for *all* requests. If the network request fails, serve the `offline.html`.\n\n**Testing:**\nServe the application, visit it, then go offline (e.g., disable Wi-Fi, use Chrome DevTools 'Offline' mode). Try to navigate or refresh.\n",
          "difficulty": "medium",
          "startingCode": "// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline App</title>\n    <link rel=\"stylesheet\" href=\"/style.css\">\n</head>\n<body>\n    <h1>Welcome to My Offline-Enabled App!</h1>\n    <p>This is the main page.</p>\n    <p>Try going offline and refreshing or navigating.</p>\n\n    <script>\n        if ('serviceWorker' in navigator) {\n            window.addEventListener('load', () => {\n                navigator.serviceWorker.register('/service-worker.js')\n                    .then(registration => {\n                        console.log('Service Worker registered:', registration);\n                    })\n                    .catch(error => {\n                        console.error('Service Worker registration failed:', error);\n                    });\n            });\n        }\n    </script>\n</body>\n</html>\n\n// public/style.css\nbody {\n    font-family: sans-serif;\n    text-align: center;\n    padding: 20px;\n    background-color: #f4f4f4;\n    color: #333;\n}\n\nh1 {\n    color: #007bff;\n}\n\n// public/offline.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>You are Offline!</title>\n    <style>\n        body {\n            font-family: sans-serif;\n            text-align: center;\n            padding: 50px;\n            background-color: #ffe0b2; /* Light orange */\n            color: #d32f2f; /* Dark red */\n        }\n        h1 {\n            color: #ef6c00; /* Orange */\n        }\n        p {\n            font-size: 1.2em;\n        }\n    </style>\n</head>\n<body>\n    <h1>Oops! You're Offline.</h1>\n    <p>It looks like you're not connected to the internet.</p>\n    <p>Don't worry, you can still use some features!</p>\n</body>\n</html>\n\n// service-worker.js (Empty - needs to be implemented)\n",
          "solutionCode": "// server.js (for serving files, if not using a static host)\nconst express = require('express');\nconst path = require('path');\nconst app = express();\nconst PORT = 3000;\n\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n  console.log('Visit http://localhost:3000');\n  console.log('Then try going offline (DevTools -> Network -> Offline) and refresh/navigate.');\n});\n\n// public/index.html (Same as starting code)\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline App</title>\n    <link rel=\"stylesheet\" href=\"/style.css\">\n</head>\n<body>\n    <h1>Welcome to My Offline-Enabled App!</h1>\n    <p>This is the main page.</p>\n    <p>Try going offline and refreshing or navigating.</p>\n\n    <script>\n        if ('serviceWorker' in navigator) {\n            window.addEventListener('load', () => {\n                navigator.serviceWorker.register('/service-worker.js', { scope: '/' })\n                    .then(registration => {\n                        console.log('Service Worker registered:', registration);\n                    })\n                    .catch(error => {\n                        console.error('Service Worker registration failed:', error);\n                    });\n            });\n        }\n    </script>\n</body>\n</html>\n\n// public/style.css (Same as starting code)\nbody {\n    font-family: sans-serif;\n    text-align: center;\n    padding: 20px;\n    background-color: #f4f4f4;\n    color: #333;\n}\n\nh1 {\n    color: #007bff;\n}\n\n// public/offline.html (Same as starting code)\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>You are Offline!</title>\n    <style>\n        body {\n            font-family: sans-serif;\n            text-align: center;\n            padding: 50px;\n            background-color: #ffe0b2; /* Light orange */\n            color: #d32f2f; /* Dark red */\n        }\n        h1 {\n            color: #ef6c00; /* Orange */\n        }\n        p {\n            font-size: 1.2em;\n        }\n    </style>\n</head>\n<body>\n    <h1>Oops! You're Offline.</h1>\n    <p>It looks like you're not connected to the internet.</p>\n    <p>Don't worry, you can still use some features!</p>\n</body>\n</html>\n\n// public/service-worker.js\nconst CACHE_NAME = 'offline-fallback-cache-v1';\nconst OFFLINE_URL = '/offline.html';\nconst ASSETS_TO_CACHE = [\n  '/', // '/' represents index.html\n  '/index.html',\n  '/style.css',\n  OFFLINE_URL\n];\n\nself.addEventListener('install', event => {\n  event.waitUntil(\n    caches.open(CACHE_NAME)\n      .then(cache => {\n        console.log('[Service Worker] Caching critical assets for offline use.');\n        return cache.addAll(ASSETS_TO_CACHE);\n      })\n      .catch(error => console.error('[Service Worker] Failed to cache assets during install:', error))\n  );\n});\n\nself.addEventListener('activate', event => {\n  event.waitUntil(\n    // Clean up old caches if any\n    caches.keys().then(cacheNames => {\n      return Promise.all(\n        cacheNames.map(cacheName => {\n          if (cacheName !== CACHE_NAME) {\n            console.log('[Service Worker] Deleting old cache:', cacheName);\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n  // Take control of uncontrolled clients immediately\n  self.clients.claim();\n  console.log('[Service Worker] Activated and claimed clients.');\n});\n\nself.addEventListener('fetch', event => {\n  // Handle navigation requests (e.g., direct page loads) and other requests\n  event.respondWith(\n    fetch(event.request)\n      .then(networkResponse => {\n        // If network is successful, cache the new response and return it\n        // Make sure the response is valid before caching\n        if (!networkResponse || networkResponse.status !== 200 || networkResponse.type !== 'basic') {\n          return networkResponse; // Don't cache opaque responses or errors\n        }\n        const responseToCache = networkResponse.clone();\n        caches.open(CACHE_NAME)\n          .then(cache => {\n            cache.put(event.request, responseToCache);\n          });\n        return networkResponse;\n      })\n      .catch(() => {\n        // Network failed (e.g., offline or network error)\n        // Try to serve from cache first\n        return caches.match(event.request)\n          .then(cachedResponse => {\n            if (cachedResponse) {\n              console.log('[Service Worker] Serving from cache:', event.request.url);\n              return cachedResponse;\n            }\n            // If not in cache, fallback to the offline page for navigation requests\n            if (event.request.mode === 'navigate') {\n                console.log('[Service Worker] Network failed and not in cache, serving offline page for navigation.');\n                return caches.match(OFFLINE_URL);\n            }\n            // For other asset requests (images, scripts, etc.), return a generic error or nothing\n            return new Response('Network error or not found in cache.', { status: 503, statusText: 'Service Unavailable' });\n          });\n      })\n  );\n});\n",
          "testCases": [
            "**Initial Load (Online):** Visit `http://localhost:3000`. Observe in DevTools Network tab that `index.html` and `style.css` are fetched normally (status 200). `service-worker.js` should register.",
            "**Verify Cache:** Go to DevTools -> Application -> Cache Storage. Expand `offline-fallback-cache-v1` and confirm `index.html`, `style.css`, and `offline.html` are present.",
            "**Go Offline and Refresh:** In DevTools Network tab, check 'Offline'. Refresh the page. The `offline.html` content should be displayed instead of `index.html` (even though `index.html` is cached, the strategy prioritizes network first for navigations, and upon failure, falls back to the specified offline URL).",
            "**Go Offline and Navigate:** With 'Offline' checked, try navigating to an un-cached URL (e.g., `http://localhost:3000/nonexistent.html`). The `offline.html` should be displayed.",
            "**Go Online Again:** Uncheck 'Offline'. Refresh. The main `index.html` content should return."
          ],
          "hints": [
            "Remember that Service Workers require HTTPS or `localhost` for development.",
            "The `install` event is where you typically precache core assets.",
            "The `fetch` event listener is where you define your caching strategy.",
            "Use `event.respondWith()` to intercept and handle network requests.",
            "The `caches.open()` and `cache.addAll()` methods are for precaching.",
            "For network-first with fallback, use `fetch().catch()` to handle network failures, and then `caches.match()` for the fallback.",
            "Don't forget to cache the `offline.html` itself during installation.",
            "`self.clients.claim()` in the `activate` event helps the new Service Worker take immediate control of existing open tabs."
          ],
          "tags": [
            "service-workers",
            "pwa",
            "offline",
            "caching",
            "frontend"
          ],
          "timeEstimate": 75,
          "prerequisites": [
            "javascript_promises",
            "fetch_api",
            "basic_web_server_setup"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_service_workers",
            "theory_client_side_caching"
          ]
        },
        {
          "id": "task_background_computation",
          "title": "Implement a Fibonacci Sequence Calculator with a Web Worker",
          "description": "\nCreate a web page that calculates the Nth Fibonacci number. Implement the calculation logic in a Web Worker to ensure the main thread (UI) remains responsive, even for large N values that would otherwise block the page.\n\n**Requirements:**\n1.  Create an `index.html` with an input field for 'N', a button to trigger calculation, a display area for the result, and a simple UI element (e.g., a spinning loader or an incrementing counter) that updates frequently on the main thread.\n2.  Create a `worker.js` file to perform the Fibonacci calculation (recursive or iterative).\n3.  In `index.html`, register and communicate with the `worker.js`:\n    *   Send the input `N` to the worker when the button is clicked.\n    *   Display the result received from the worker.\n    *   Ensure the UI element (spinner/counter) remains responsive *while* the calculation is ongoing in the worker.\n\n**Fibonacci Calculation (Nth number):**\n- `fib(0) = 0`\n- `fib(1) = 1`\n- `fib(n) = fib(n-1) + fib(n-2)` for `n > 1`\n\nChoose a recursive implementation for simplicity, as it demonstrates blocking behavior well if not in a worker (or use an iterative one if recursion depth is a concern for large N).\n",
          "difficulty": "medium",
          "startingCode": "// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Fibonacci Worker</title>\n    <style>\n        body { font-family: sans-serif; text-align: center; padding: 20px; }\n        input, button { margin: 10px; padding: 8px; }\n        #counter { font-size: 2em; margin-top: 20px; color: green; }\n        #result { font-size: 1.5em; margin-top: 20px; color: blue; }\n    </style>\n</head>\n<body>\n    <h1>Fibonacci Calculator (Web Worker Demo)</h1>\n    <div>\n        <label for=\"fib-input\">Calculate Fibonacci for N:</label>\n        <input type=\"number\" id=\"fib-input\" value=\"40\">\n        <button id=\"calculate-btn\">Calculate</button>\n    </div>\n    <p id=\"result\">Result: </p>\n    <p id=\"counter\">Counter: 0</p>\n\n    <script>\n        const fibInput = document.getElementById('fib-input');\n        const calculateBtn = document.getElementById('calculate-btn');\n        const resultDiv = document.getElementById('result');\n        const counterDiv = document.getElementById('counter');\n        let counter = 0;\n\n        // Simple counter to prove UI responsiveness\n        setInterval(() => {\n            counter++;\n            counterDiv.textContent = `Counter: ${counter}`;\n        }, 100);\n\n        calculateBtn.addEventListener('click', () => {\n            const n = parseInt(fibInput.value, 10);\n            if (isNaN(n) || n < 0) {\n                alert('Please enter a valid positive number for N.');\n                return;\n            }\n            resultDiv.textContent = 'Result: Calculating...';\n            // TODO: Implement Web Worker logic here\n            // For now, a blocking call (remove later):\n            // resultDiv.textContent = `Result: ${fibonacci(n)}`;\n        });\n\n        // Blocking Fibonacci function (for comparison/initial test)\n        // function fibonacci(num) {\n        //     if (num <= 1) return num;\n        //     return fibonacci(num - 1) + fibonacci(num - 2);\n        // }\n\n        // TODO: Create worker.js and integrate\n    </script>\n</body>\n</html>\n\n// worker.js (Empty - needs to be implemented)\n",
          "solutionCode": "// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Fibonacci Worker</title>\n    <style>\n        body { font-family: sans-serif; text-align: center; padding: 20px; }\n        input, button { margin: 10px; padding: 8px; }\n        #counter { font-size: 2em; margin-top: 20px; color: green; }\n        #result { font-size: 1.5em; margin-top: 20px; color: blue; }\n    </style>\n</head>\n<body>\n    <h1>Fibonacci Calculator (Web Worker Demo)</h1>\n    <div>\n        <label for=\"fib-input\">Calculate Fibonacci for N:</label>\n        <input type=\"number\" id=\"fib-input\" value=\"40\">\n        <button id=\"calculate-btn\">Calculate</button>\n    </div>\n    <p id=\"result\">Result: </p>\n    <p id=\"counter\">Counter: 0</p>\n\n    <script>\n        const fibInput = document.getElementById('fib-input');\n        const calculateBtn = document.getElementById('calculate-btn');\n        const resultDiv = document.getElementById('result');\n        const counterDiv = document.getElementById('counter');\n        let counter = 0;\n\n        // Simple counter to prove UI responsiveness\n        setInterval(() => {\n            counter++;\n            counterDiv.textContent = `Counter: ${counter}`;\n        }, 100);\n\n        // Web Worker integration\n        if (window.Worker) {\n            const fibWorker = new Worker('/worker.js'); // Path to your worker script\n\n            fibWorker.onmessage = function(event) {\n                const { result, n } = event.data;\n                resultDiv.textContent = `Result for fib(${n}): ${result}`;\n                console.log(`Calculation for fib(${n}) completed in worker.`);\n            };\n\n            fibWorker.onerror = function(error) {\n                console.error('Worker error:', error);\n                resultDiv.textContent = 'Result: Error during calculation.';\n            };\n\n            calculateBtn.addEventListener('click', () => {\n                const n = parseInt(fibInput.value, 10);\n                if (isNaN(n) || n < 0) {\n                    alert('Please enter a valid positive number for N.');\n                    return;\n                }\n                resultDiv.textContent = 'Result: Calculating... (Check Counter for responsiveness)';\n                console.log(`Sending fib(${n}) to worker...`);\n                fibWorker.postMessage({ n: n }); // Send data to the worker\n            });\n        } else {\n            resultDiv.textContent = 'Web Workers are not supported in this browser.';\n            calculateBtn.disabled = true;\n        }\n    </script>\n</body>\n</html>\n\n// public/worker.js\n// Fibonacci calculation function\nfunction fibonacci(num) {\n    if (num <= 1) return num;\n    let a = 0, b = 1, temp;\n    for (let i = 2; i <= num; i++) {\n        temp = a + b;\n        a = b;\n        b = temp;\n    }\n    return b;\n    // Recursive (more demonstrative of blocking if not in worker, but less efficient for large N)\n    // if (num <= 1) return num;\n    // return fibonacci(num - 1) + fibonacci(num - 2);\n}\n\n// Listen for messages from the main thread\nonmessage = function(event) {\n    const n = event.data.n;\n    console.log(`Worker: Calculating fib(${n})...`);\n    const result = fibonacci(n);\n    console.log(`Worker: Finished fib(${n}) = ${result}.`);\n    // Send the result back to the main thread\n    postMessage({ result: result, n: n });\n};\n",
          "testCases": [
            "**UI Responsiveness Test:**\n    *   Start the server and open the page.\n    *   Enter a large number for N (e.g., 40-45 for recursive, or 100,000 for iterative) into the input field.\n    *   Click 'Calculate'.\n    *   Observe the 'Counter' text: It should continue incrementing smoothly while the Fibonacci calculation is running in the background. If it freezes, the worker is not correctly implemented or the calculation is still on the main thread.",
            "**Calculation Accuracy Test:**\n    *   Test with `N = 0`, expected result `0`.\n    *   Test with `N = 1`, expected result `1`.\n    *   Test with `N = 10`, expected result `55`.\n    *   Test with `N = 20`, expected result `6765`.\n    *   Test with a large N (e.g., 40-45) and verify the correct (large) number appears in the result area.",
            "**Error Handling (Optional):**\n    *   Enter a non-numeric or negative value for N and ensure the alert message appears correctly without breaking the application.",
            "**Worker Termination (Implicit):**\n    *   After a calculation, the worker will be idle. In a more complex app, you might explicitly `terminate()` it when no longer needed to free resources."
          ],
          "hints": [
            "Remember that Web Workers cannot directly access the DOM. All communication must be done via `postMessage` and `onmessage`.",
            "The `Worker` constructor takes the path to your worker script.",
            "Ensure your `worker.js` file is accessible from the root of your served application.",
            "For the Fibonacci function, an iterative approach is much more efficient for large N than a recursive one, though the recursive one highlights blocking better for smaller N if run on the main thread."
          ],
          "tags": [
            "web-workers",
            "performance",
            "background-tasks",
            "javascript",
            "algorithms"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "javascript_async",
            "dom_manipulation",
            "basic_algorithms"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "theory_service_workers"
          ]
        },
        {
          "id": "task_implement_cache_strategies",
          "title": "Implement Multiple Service Worker Caching Strategies",
          "description": "\nEnhance a `service-worker.js` file to demonstrate multiple caching strategies based on the type of request.\n\n**Requirements:**\n1.  **Cache-First for Static Assets:** Implement a strategy where the Service Worker first attempts to serve `index.html` and `style.css` from cache. If not found, it fetches from the network and caches the response.\n2.  **Network-First for API Requests:** For requests to a dummy API endpoint (e.g., `/api/data`), implement a network-first strategy. Try the network first; if it fails, fall back to a cached version. (You'll need a simple Express route for this API).\n3.  **Stale-While-Revalidate for Images:** For image requests (e.g., `.png`, `.jpg`), implement stale-while-revalidate. Serve a cached image immediately while fetching a fresh one in the background.\n4.  **Offline Fallback:** Ensure `index.html` and `offline.html` are always available for navigation fallback.\n\n**Test Setup:**\n*   `index.html` (main page)\n*   `style.css` (CSS)\n*   `offline.html` (fallback page)\n*   `sample.png` (an image file)\n*   A Node.js Express server to serve these static files and the `/api/data` endpoint.\n",
          "difficulty": "hard",
          "startingCode": "// server.js\nconst express = require('express');\nconst path = require('path');\nconst app = express();\nconst PORT = 3000;\n\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.get('/api/data', (req, res) => {\n  // Simulate an API call\n  setTimeout(() => {\n    res.json({ message: 'Hello from API!', timestamp: new Date().toISOString() });\n  }, 500);\n});\n\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n  console.log('Visit http://localhost:3000');\n});\n\n// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Multi-Strategy Caching</title>\n    <link rel=\"stylesheet\" href=\"/style.css\">\n</head>\n<body>\n    <h1>Multi-Strategy Caching Demo</h1>\n    <img src=\"/sample.png\" alt=\"Sample Image\" width=\"200\">\n    <button id=\"fetchApi\">Fetch API Data</button>\n    <div id=\"api-data\"></div>\n\n    <script>\n        if ('serviceWorker' in navigator) {\n            window.addEventListener('load', () => {\n                navigator.serviceWorker.register('/service-worker.js')\n                    .then(registration => console.log('SW registered:', registration))\n                    .catch(error => console.error('SW registration failed:', error));\n            });\n        }\n\n        document.getElementById('fetchApi').addEventListener('click', async () => {\n            const response = await fetch('/api/data');\n            const data = await response.json();\n            document.getElementById('api-data').innerText = JSON.stringify(data, null, 2);\n        });\n    </script>\n</body>\n</html>\n\n// public/style.css\nbody { font-family: sans-serif; text-align: center; padding: 20px; }\nimg { border: 2px solid #ccc; margin: 20px; }\nbutton { padding: 10px 20px; }\n#api-data { margin-top: 20px; border: 1px solid #eee; padding: 10px; }\n\n// public/offline.html (Same as previous task's)\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>You are Offline!</title>\n    <style>\n        body {\n            font-family: sans-serif;\n            text-align: center;\n            padding: 50px;\n            background-color: #ffe0b2; /* Light orange */\n            color: #d32f2f; /* Dark red */\n        }\n        h1 {\n            color: #ef6c00; /* Orange */\n        }\n        p {\n            font-size: 1.2em;\n        }\n    </style>\n</head>\n<body>\n    <h1>Oops! You're Offline.</h1>\n    <p>It looks like you're not connected to the internet.</p>\n    <p>Don't worry, you can still use some features!</p>\n</body>\n</html>\n\n// public/sample.png (Any small image file)\n\n// public/service-worker.js (Empty - needs implementation)\n",
          "solutionCode": "// server.js (Same as starting code, ensures static files and API are served)\nconst express = require('express');\nconst path = require('path');\nconst app = express();\nconst PORT = 3000;\n\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.get('/api/data', (req, res) => {\n  // Simulate an API call\n  setTimeout(() => {\n    res.json({ message: 'Hello from API!', timestamp: new Date().toISOString() });\n  }, 500);\n});\n\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n  console.log('Visit http://localhost:3000');\n});\n\n// public/index.html (Same as starting code)\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Multi-Strategy Caching</title>\n    <link rel=\"stylesheet\" href=\"/style.css\">\n</head>\n<body>\n    <h1>Multi-Strategy Caching Demo</h1>\n    <img src=\"/sample.png\" alt=\"Sample Image\" width=\"200\">\n    <button id=\"fetchApi\">Fetch API Data</button>\n    <div id=\"api-data\"></div>\n\n    <script>\n        if ('serviceWorker' in navigator) {\n            window.addEventListener('load', () => {\n                navigator.serviceWorker.register('/service-worker.js')\n                    .then(registration => console.log('SW registered:', registration))\n                    .catch(error => console.error('SW registration failed:', error));\n            });\n        }\n\n        document.getElementById('fetchApi').addEventListener('click', async () => {\n            const response = await fetch('/api/data');\n            const data = await response.json();\n            document.getElementById('api-data').innerText = JSON.stringify(data, null, 2);\n        });\n    </script>\n</body>\n</html>\n\n// public/style.css (Same as starting code)\nbody { font-family: sans-serif; text-align: center; padding: 20px; }\nimg { border: 2px solid #ccc; margin: 20px; }\nbutton { padding: 10px 20px; }\n#api-data { margin-top: 20px; border: 1px solid #eee; padding: 10px; }\n\n// public/offline.html (Same as previous task's solution)\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>You are Offline!</title>\n    <style>\n        body {\n            font-family: sans-serif;\n            text-align: center;\n            padding: 50px;\n            background-color: #ffe0b2; /* Light orange */\n            color: #d32f2f; /* Dark red */\n        }\n        h1 {\n            color: #ef6c00; /* Orange */\n        }\n        p {\n            font-size: 1.2em;\n        }\n    </style>\n</head>\n<body>\n    <h1>Oops! You're Offline.</h1>\n    <p>It looks like you're not connected to the internet.</p>\n    <p>Don't worry, you can still use some features!</p>\n</body>\n</html>\n\n// public/sample.png (Any small image file, ensure it exists)\n\n// public/service-worker.js\nconst CACHE_NAME_STATIC = 'static-assets-cache-v1';\nconst CACHE_NAME_DYNAMIC = 'dynamic-data-cache-v1';\nconst CACHE_NAME_IMAGES = 'images-cache-v1';\nconst OFFLINE_URL = '/offline.html';\n\nconst staticAssetsToCache = [\n  '/',\n  '/index.html',\n  '/style.css',\n  OFFLINE_URL\n];\n\nself.addEventListener('install', event => {\n  event.waitUntil(\n    Promise.all([\n      caches.open(CACHE_NAME_STATIC).then(cache => cache.addAll(staticAssetsToCache)),\n      // Pre-cache common images if desired, otherwise let stale-while-revalidate handle it\n      // caches.open(CACHE_NAME_IMAGES).then(cache => cache.addAll(['/sample.png']))\n    ]).then(() => {\n      console.log('[Service Worker] Installation successful. Static assets cached.');\n    }).catch(error => {\n      console.error('[Service Worker] Installation failed:', error);\n    })\n  );\n});\n\nself.addEventListener('activate', event => {\n  event.waitUntil(\n    caches.keys().then(cacheNames => {\n      return Promise.all(\n        cacheNames.map(cacheName => {\n          if (![CACHE_NAME_STATIC, CACHE_NAME_DYNAMIC, CACHE_NAME_IMAGES].includes(cacheName)) {\n            console.log('[Service Worker] Deleting old cache:', cacheName);\n            return caches.delete(cacheName);\n          }\n        })\n      );\n    })\n  );\n  self.clients.claim(); // Take control of uncontrolled clients\n  console.log('[Service Worker] Activated and claimed clients.');\n});\n\nself.addEventListener('fetch', event => {\n  const requestUrl = new URL(event.request.url);\n  const requestPath = requestUrl.pathname;\n  const isNavigation = event.request.mode === 'navigate';\n\n  // 1. Cache-First for Static HTML/CSS (and navigation requests fallback)\n  if (isNavigation || staticAssetsToCache.includes(requestPath)) {\n    event.respondWith(\n      caches.match(event.request).then(cachedResponse => {\n        if (cachedResponse) {\n          console.log(`[Cache-First] Serving ${requestPath} from cache.`);\n          return cachedResponse;\n        }\n        console.log(`[Cache-First] Fetching ${requestPath} from network.`);\n        return fetch(event.request).then(networkResponse => {\n          return caches.open(CACHE_NAME_STATIC).then(cache => {\n            cache.put(event.request, networkResponse.clone());\n            return networkResponse;\n          });\n        }).catch(() => {\n          // Fallback for navigation requests if network and cache fail\n          if (isNavigation) {\n            console.log('[Fallback] Network and cache failed for navigation, serving offline page.');\n            return caches.match(OFFLINE_URL);\n          }\n          return new Response('Offline and not in cache.', { status: 503 });\n        });\n      })\n    );\n    return;\n  }\n\n  // 2. Network-First for API Requests\n  if (requestPath.startsWith('/api/data')) {\n    event.respondWith(\n      fetch(event.request).then(networkResponse => {\n        console.log(`[Network-First] Fetching API ${requestPath} from network.`);\n        return caches.open(CACHE_NAME_DYNAMIC).then(cache => {\n          cache.put(event.request, networkResponse.clone());\n          return networkResponse;\n        });\n      }).catch(() => {\n        console.log(`[Network-First] Network failed for API ${requestPath}, serving from cache.`);\n        return caches.match(event.request);\n      })\n    );\n    return;\n  }\n\n  // 3. Stale-While-Revalidate for Images\n  if (requestPath.match(/\\.(png|jpg|jpeg|gif|webp)$/i)) {\n    event.respondWith(\n      caches.match(event.request).then(cachedResponse => {\n        const fetchPromise = fetch(event.request).then(networkResponse => {\n          console.log(`[Stale-While-Revalidate] Fetching image ${requestPath} from network.`);\n          return caches.open(CACHE_NAME_IMAGES).then(cache => {\n            cache.put(event.request, networkResponse.clone());\n            return networkResponse;\n          });\n        }).catch(error => {\n            console.error(`[Stale-While-Revalidate] Network revalidation failed for image ${requestPath}:`, error);\n            return new Response('Image network error.', { status: 503 });\n        });\n\n        if (cachedResponse) {\n          console.log(`[Stale-While-Revalidate] Serving image ${requestPath} from cache.`);\n          return cachedResponse; // Return cached response immediately\n        }\n        return fetchPromise; // If no cached, wait for network\n      })\n    );\n    return;\n  }\n\n  // Default: Go to network for anything else\n  event.respondWith(fetch(event.request));\n});\n",
          "testCases": [
            "**Static Asset (Cache-First) Test:**\n    *   Load `http://localhost:3000` (online).\n    *   Go to DevTools -> Application -> Cache Storage. Verify `index.html` and `style.css` are in `static-assets-cache-v1`.\n    *   Go 'Offline' in DevTools. Reload the page. `index.html` and `style.css` should load instantly from cache, without any network requests failing.",
            "**API (Network-First) Test:**\n    *   Load `http://localhost:3000` (online). Click 'Fetch API Data'. Observe a slight delay, then data appears. Verify API response is cached in `dynamic-data-cache-v1`.\n    *   Go 'Offline'. Click 'Fetch API Data' again. Data should appear *instantly* from cache. (The network request will still appear in DevTools but show as failed/from Service Worker).",
            "**Image (Stale-While-Revalidate) Test:**\n    *   Load `http://localhost:3000` (online). Image appears. Go to DevTools -> Application -> Cache Storage. Verify `sample.png` is in `images-cache-v1`.\n    *   Go 'Offline'. Refresh the page. The image should appear instantly. The DevTools Network tab might show a failed network request for the image, but it's served from cache.",
            "**Offline Fallback Test:**\n    *   Clear all caches in DevTools -> Application -> Cache Storage.\n    *   Go 'Offline'. Try to visit `http://localhost:3000`. The `offline.html` page should be displayed (as `index.html` wasn't cached yet, and network failed)."
          ],
          "hints": [
            "Use `event.request.url`, `event.request.destination`, or `event.request.mode` to differentiate request types inside the `fetch` event.",
            "For `stale-while-revalidate`, you need to `match` from cache and return immediately, but *also* kick off a `fetch` and `put` the new response into cache.",
            "Remember to `clone()` network responses before putting them into cache, as a `Response` object can only be consumed once.",
            "Clear browser cache and unregister Service Workers in DevTools -> Application -> Service Workers frequently during testing to ensure fresh installations."
          ],
          "tags": [
            "service-workers",
            "caching",
            "pwa",
            "offline",
            "frontend",
            "architecture",
            "advanced"
          ],
          "timeEstimate": 120,
          "prerequisites": [
            "theory_service_workers",
            "theory_client_side_caching",
            "node_express"
          ],
          "complexity": 9,
          "interviewRelevance": 10,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_service_workers",
            "theory_client_side_caching"
          ]
        },
        {
          "id": "task_data_cache_with_indexeddb",
          "title": "Implement a Simple Note-Taking App with IndexedDB for Offline Data",
          "description": "\nDevelop a basic web-based note-taking application that stores user notes using `IndexedDB`. The application should allow users to add new notes and view existing notes. All data should persist across browser sessions and be available offline.\n\n**Requirements:**\n1.  **HTML Structure**: Create an `index.html` with:\n    *   An input field for the note title.\n    *   A textarea for the note content.\n    *   A 'Save Note' button.\n    *   A section to display the list of saved notes.\n2.  **IndexedDB Setup**: Implement JavaScript to:\n    *   Open an IndexedDB database.\n    *   Create an object store for notes (e.g., `notes` object store with `id` as keyPath and `autoIncrement`).\n    *   Handle `upgradeneeded` events for database versioning.\n3.  **CRUD Operations (Basic)**:\n    *   **Add Note**: On 'Save Note' button click, take input values and add a new note object to the `notes` object store. Include `title`, `content`, and `timestamp` fields.\n    *   **Display Notes**: When the page loads, fetch all notes from IndexedDB and display them in the dedicated section. Notes should be displayed with their title, content, and save time.\n4.  **Error Handling**: Include basic `onerror` and `onsuccess` handlers for IndexedDB operations.\n\n**Optional (Advanced):**\n*   Add a delete button for each note.\n*   Implement a Service Worker to cache `index.html` and its dependencies so the app itself is available offline (this task focuses on IndexedDB, but combining with Service Worker is a common pattern for PWA).\n",
          "difficulty": "hard",
          "startingCode": "// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline Notes</title>\n    <style>\n        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }\n        #note-form { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; }\n        input[type=\"text\"], textarea { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; cursor: pointer; }\n        .note-item { border: 1px solid #eee; padding: 15px; margin-bottom: 10px; background-color: #f9f9f9; }\n        .note-item h3 { margin-top: 0; color: #333; }\n        .note-item p { font-size: 0.9em; color: #666; }\n    </style>\n</head>\n<body>\n    <h1>Offline Note-Taking App</h1>\n\n    <div id=\"note-form\">\n        <h2>Add New Note</h2>\n        <input type=\"text\" id=\"note-title\" placeholder=\"Note Title\" required>\n        <textarea id=\"note-content\" placeholder=\"Note Content\" rows=\"5\" required></textarea>\n        <button id=\"save-note-btn\">Save Note</button>\n    </div>\n\n    <div id=\"notes-list\">\n        <h2>Your Notes</h2>\n        <!-- Notes will be loaded here -->\n        <p id=\"no-notes-message\">No notes yet. Start by adding one!</p>\n    </div>\n\n    <script>\n        // TODO: Implement IndexedDB logic here\n        const noteTitleInput = document.getElementById('note-title');\n        const noteContentInput = document.getElementById('note-content');\n        const saveNoteBtn = document.getElementById('save-note-btn');\n        const notesListDiv = document.getElementById('notes-list');\n        const noNotesMessage = document.getElementById('no-notes-message');\n\n        // Example (replace with IndexedDB calls)\n        saveNoteBtn.addEventListener('click', () => {\n            const title = noteTitleInput.value;\n            const content = noteContentInput.value;\n            if (title && content) {\n                const newNote = document.createElement('div');\n                newNote.className = 'note-item';\n                newNote.innerHTML = `<h3>${title}</h3><p>${content}</p><p><em>Saved: ${new Date().toLocaleString()}</em></p>`;\n                notesListDiv.prepend(newNote);\n                noNotesMessage.style.display = 'none';\n                noteTitleInput.value = '';\n                noteContentInput.value = '';\n            } else {\n                alert('Please enter both title and content.');\n            }\n        });\n\n        // Initial load of notes (replace with IndexedDB fetch)\n        // if (notesListDiv.children.length === 1) { // Only the h2 is there\n        //     noNotesMessage.style.display = 'block';\n        // }\n    </script>\n</body>\n</html>\n",
          "solutionCode": "// server.js (for serving files, if not using a static host)\nconst express = require('express');\nconst path = require('path');\nconst app = express();\nconst PORT = 3000;\n\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n  console.log('Visit http://localhost:3000');\n  console.log('Add some notes, then close and reopen your browser or go offline.');\n});\n\n// public/index.html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline Notes</title>\n    <style>\n        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }\n        #note-form { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; }\n        input[type=\"text\"], textarea { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; }\n        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; cursor: pointer; }\n        .note-item { border: 1px solid #eee; padding: 15px; margin-bottom: 10px; background-color: #f9f9f9; display: flex; justify-content: space-between; align-items: flex-start; }\n        .note-item .content { flex-grow: 1; }\n        .note-item h3 { margin-top: 0; color: #333; }\n        .note-item p { font-size: 0.9em; color: #666; }\n        .note-item button.delete-btn { background-color: #dc3545; margin-left: 10px; border-radius: 4px; }\n    </style>\n</head>\n<body>\n    <h1>Offline Note-Taking App</h1>\n\n    <div id=\"note-form\">\n        <h2>Add New Note</h2>\n        <input type=\"text\" id=\"note-title\" placeholder=\"Note Title\" required>\n        <textarea id=\"note-content\" placeholder=\"Note Content\" rows=\"5\" required></textarea>\n        <button id=\"save-note-btn\">Save Note</button>\n    </div>\n\n    <div id=\"notes-list\">\n        <h2>Your Notes</h2>\n        <!-- Notes will be loaded here -->\n        <p id=\"no-notes-message\">No notes yet. Start by adding one!</p>\n    </div>\n\n    <script>\n        const DB_NAME = 'OfflineNotesDB';\n        const DB_VERSION = 1;\n        const STORE_NAME = 'notes';\n\n        let db; // Global variable for the IndexedDB database instance\n\n        const noteTitleInput = document.getElementById('note-title');\n        const noteContentInput = document.getElementById('note-content');\n        const saveNoteBtn = document.getElementById('save-note-btn');\n        const notesListDiv = document.getElementById('notes-list');\n        const noNotesMessage = document.getElementById('no-notes-message');\n\n        // 2. IndexedDB Setup: Open database and create object store\n        function openDatabase() {\n            return new Promise((resolve, reject) => {\n                const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n                request.onerror = event => {\n                    console.error('IndexedDB error:', event.target.errorCode);\n                    reject('Error opening database');\n                };\n\n                request.onsuccess = event => {\n                    db = event.target.result;\n                    console.log('Database opened successfully');\n                    resolve(db);\n                };\n\n                request.onupgradeneeded = event => {\n                    db = event.target.result;\n                    if (!db.objectStoreNames.contains(STORE_NAME)) {\n                        const objectStore = db.createObjectStore(STORE_NAME, { keyPath: 'id', autoIncrement: true });\n                        // Optionally create indexes if you need to query by other fields\n                        objectStore.createIndex('timestamp', 'timestamp', { unique: false });\n                        console.log('Object store created/upgraded');\n                    }\n                };\n            });\n        }\n\n        // 3. Add Note operation\n        async function addNote(title, content) {\n            if (!db) await openDatabase();\n\n            const transaction = db.transaction([STORE_NAME], 'readwrite');\n            const objectStore = transaction.objectStore(STORE_NAME);\n            const newNote = {\n                title: title,\n                content: content,\n                timestamp: new Date().toISOString()\n            };\n\n            const request = objectStore.add(newNote);\n\n            request.onsuccess = () => {\n                console.log('Note added successfully:', newNote);\n                displayNotes(); // Refresh list after adding\n                noteTitleInput.value = '';\n                noteContentInput.value = '';\n            };\n\n            request.onerror = event => {\n                console.error('Error adding note:', event.target.error);\n                alert('Error saving note.');\n            };\n        }\n\n        // 3. Display Notes operation\n        async function displayNotes() {\n            if (!db) await openDatabase();\n\n            // Clear existing notes from display\n            const existingNoteItems = notesListDiv.querySelectorAll('.note-item');\n            existingNoteItems.forEach(item => item.remove());\n\n            const transaction = db.transaction([STORE_NAME], 'readonly');\n            const objectStore = transaction.objectStore(STORE_NAME);\n            const request = objectStore.getAll(); // Get all notes\n\n            request.onsuccess = event => {\n                const notes = event.target.result;\n                if (notes.length === 0) {\n                    noNotesMessage.style.display = 'block';\n                } else {\n                    noNotesMessage.style.display = 'none';\n                    // Sort notes by timestamp in descending order (latest first)\n                    notes.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\n\n                    notes.forEach(note => {\n                        const noteElement = document.createElement('div');\n                        noteElement.className = 'note-item';\n                        noteElement.dataset.id = note.id; // Store ID for delete operation\n                        noteElement.innerHTML = `\n                            <div class=\"content\">\n                                <h3>${note.title}</h3>\n                                <p>${note.content}</p>\n                                <p><em>Saved: ${new Date(note.timestamp).toLocaleString()}</em></p>\n                            </div>\n                            <button class=\"delete-btn\">Delete</button>\n                        `;\n                        notesListDiv.appendChild(noteElement);\n\n                        // Optional: Add delete button listener\n                        noteElement.querySelector('.delete-btn').addEventListener('click', () => deleteNote(note.id));\n                    });\n                }\n            };\n\n            request.onerror = event => {\n                console.error('Error fetching notes:', event.target.error);\n                alert('Error loading notes.');\n            };\n        }\n\n        // Optional: Delete Note operation\n        async function deleteNote(id) {\n            if (!db) await openDatabase();\n\n            const transaction = db.transaction([STORE_NAME], 'readwrite');\n            const objectStore = transaction.objectStore(STORE_NAME);\n            const request = objectStore.delete(id);\n\n            request.onsuccess = () => {\n                console.log('Note deleted:', id);\n                displayNotes(); // Refresh list after deleting\n            };\n\n            request.onerror = event => {\n                console.error('Error deleting note:', event.target.error);\n                alert('Error deleting note.');\n            };\n        }\n\n        // Event listener for saving note\n        saveNoteBtn.addEventListener('click', () => {\n            const title = noteTitleInput.value.trim();\n            const content = noteContentInput.value.trim();\n            if (title && content) {\n                addNote(title, content);\n            } else {\n                alert('Please enter both title and content.');\n            }\n        });\n\n        // Initialize database and display notes on page load\n        window.addEventListener('DOMContentLoaded', async () => {\n            try {\n                await openDatabase();\n                displayNotes();\n            } catch (error) {\n                console.error('Initialization failed:', error);\n                alert('Failed to initialize note app. IndexedDB might be unavailable.');\n            }\n        });\n    </script>\n</body>\n</html>\n",
          "testCases": [
            "**Add and Persist:**\n    *   Open `http://localhost:3000`.\n    *   Add several notes using the form.\n    *   Close the browser tab/window completely (not just refresh).\n    *   Reopen the page. All previously added notes should be displayed.",
            "**Offline Access:**\n    *   Add some notes while online.\n    *   Go offline (e.g., disable Wi-Fi, use Chrome DevTools 'Offline' mode).\n    *   Refresh the page. The notes should still be displayed, demonstrating offline data availability.\n    *   Try adding a new note while offline. It should still save and appear in the list.",
            "**Data Structure:**\n    *   Inspect IndexedDB using browser DevTools (Application -> IndexedDB). Verify that notes are stored as objects with `id`, `title`, `content`, and `timestamp` fields.",
            "**Optional (Delete):**\n    *   Add notes, then click the 'Delete' button on a note. Verify it disappears from the list and is removed from IndexedDB.",
            "**Error Handling:**\n    *   Try to save an empty note (only title or only content) and ensure the alert message appears."
          ],
          "hints": [
            "IndexedDB operations are asynchronous and use requests and events (e.g., `request.onsuccess`, `request.onerror`). You can wrap these in Promises for easier `async/await` usage.",
            "The `onupgradeneeded` event is crucial for creating and updating object stores when the database version changes.",
            "Remember to create a `transaction` before performing operations on an `objectStore` (`'readonly'` for reading, `'readwrite'` for modifying).",
            "To get all items from an object store, you can use `objectStore.getAll()` or `objectStore.openCursor()`."
          ],
          "tags": [
            "indexeddb",
            "offline",
            "data-storage",
            "frontend",
            "pwa",
            "crud",
            "javascript"
          ],
          "timeEstimate": 150,
          "prerequisites": [
            "javascript_promises",
            "dom_manipulation",
            "basic_data_structures"
          ],
          "complexity": 9,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "theory_client_side_caching"
          ]
        }
      ]
    }
  },
  {
    "id": "b3e19102-619b-40ca-9c46-a39d7f0c7bd3",
    "startLine": 17300,
    "endLine": 17399,
    "processedDate": "2025-06-17T15:55:40.197Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_serviceworker_caching_deduplication",
          "title": "Service Worker: Caching and Request Deduplication",
          "content": "Service Workers act as a programmable proxy between the browser and the network, enabling powerful features like offline experiences, push notifications, and background data synchronization. They run in a separate thread and can intercept network requests, allowing developers to control how resources are fetched and cached.\n\n## Key Concepts\n\n### Cache-First Strategy\nThe cache-first strategy is a common caching pattern where a Service Worker first checks if a requested resource is available in its cache. If found, it serves the cached version immediately. If not, it falls back to fetching the resource from the network. This approach prioritizes speed and offline availability. The example provided demonstrates a basic cache-first strategy.\n\n### Background Refetching (Stale-While-Revalidate)\nWhile not explicitly shown in the provided example, 'Background refetching' typically refers to patterns like \"Stale-While-Revalidate\". In this strategy:\n1.  The Service Worker immediately serves a cached response if available.\n2.  In the background, it fetches the latest version of the resource from the network.\n3.  Once the new version is successfully fetched, it updates the cache for future requests.\nThis provides the best of both worlds: fast loading times from cache and up-to-date content from the network.\n\n### Deduplication of Requests\nDeduplication of requests involves preventing multiple identical network requests from being sent simultaneously, especially when a resource is requested multiple times in quick succession (e.g., a user rapidly clicks a button, or a component mounts multiple times). A Service Worker can implement deduplication by holding pending promises for ongoing fetches and returning the same promise for subsequent identical requests until the initial fetch resolves.",
          "examples": [
            {
              "id": "example_serviceworker_cache_first",
              "title": "Service Worker Cache-First Strategy",
              "code": "self.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request).then(cachedResponse => {\n      if (cachedResponse) {\n        return cachedResponse;\n      }\n      return fetch(event.request).then(response => {\n        if (!response || response.status !== 200 || response.type !== 'basic') {\n          return response;\n        }\n        \n        const responseToCache = response.clone();\n        caches.open('v1').then(cache => {\n          cache.put(event.request, responseToCache);\n        });\n        \n        return response;\n      });\n    })\n  );\n});",
              "explanation": "This Service Worker code demonstrates a basic 'cache-first' strategy. When a fetch event occurs, it first attempts to find a matching request in the `v1` cache. If a match is found (`cachedResponse` exists), it returns the cached response immediately. If not, it proceeds to fetch the resource from the network. Upon a successful network fetch (status 200, type 'basic'), it clones the response (as a response body can only be consumed once), stores the clone in the cache, and then returns the original network response to the browser. This ensures that subsequent requests for the same resource will be served from the cache, improving performance and enabling offline capabilities.",
              "language": "javascript"
            },
            {
              "id": "example_serviceworker_deduplication_concept",
              "title": "Conceptual Service Worker Request Deduplication",
              "code": "const fetchPromises = new Map();\n\nself.addEventListener('fetch', event => {\n  const requestUrl = event.request.url;\n\n  // Check if a fetch for this URL is already in progress\n  if (fetchPromises.has(requestUrl)) {\n    event.respondWith(fetchPromises.get(requestUrl));\n    return;\n  }\n\n  // If not, perform the fetch and store its promise\n  const fetchPromise = fetch(event.request)\n    .then(response => {\n      // Clone response for caching if needed\n      const responseToCache = response.clone(); \n      // Cache logic here (e.g., caches.open('v1').then(cache => cache.put(event.request, responseToCache))) \n      return response;\n    })\n    .finally(() => {\n      // Remove the promise from the map once resolved or rejected\n      fetchPromises.delete(requestUrl);\n    });\n  \n  fetchPromises.set(requestUrl, fetchPromise);\n  event.respondWith(fetchPromise);\n});",
              "explanation": "This conceptual example illustrates how a Service Worker could implement request deduplication. It uses a `Map` to store promises for ongoing fetches, keyed by their request URL. When a `fetch` event comes in, it checks if there's already a pending promise for that URL. If so, it returns the existing promise, effectively deduplicating the request. If not, it initiates a new fetch, stores its promise, and then removes it from the map once the fetch completes (successfully or with an error). This ensures that only one network request for a given URL is active at any time, preventing redundant fetches.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_serviceworker_purpose_1",
            "question_serviceworker_cache_first_mcq_1",
            "question_serviceworker_response_clone_1",
            "question_serviceworker_deduplication_open_1",
            "question_serviceworker_stale_revalidate_1"
          ],
          "relatedTasks": [
            "task_serviceworker_offline_cache",
            "task_serviceworker_stale_while_revalidate"
          ],
          "tags": [
            "Service Worker",
            "PWA",
            "Caching",
            "Offline First",
            "Web Performance",
            "Network Requests",
            "Background Sync",
            "Deduplication"
          ],
          "technology": "Web APIs",
          "prerequisites": [
            "JavaScript Async/Await",
            "Promises",
            "Web API Fundamentals",
            "HTTP Basics"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "requiredFor": [
            "Progressive Web Apps",
            "Offline Capabilities",
            "Performance Optimization"
          ]
        },
        {
          "id": "theory_security_cors",
          "title": "Security: Cross-Origin Resource Sharing (CORS)",
          "content": "Cross-Origin Resource Sharing (CORS) is a security mechanism implemented by web browsers that allows web applications running at one domain to access resources from a server at a different domain. It's a crucial part of web security, extending and relaxing the 'Same-Origin Policy' under controlled conditions.\n\n## Key Aspects\n\n### 1. Same-Origin Policy (SOP)\nBrowsers enforce the Same-Origin Policy (SOP) as a fundamental security measure. SOP restricts a web page from making requests to a different origin (defined by scheme, host, and port) than the one that served the page. This prevents malicious scripts loaded from one site from interacting with resources from another site (e.g., stealing sensitive data or performing unauthorized actions).\n\n### 2. CORS Headers\nCORS works by adding new HTTP headers that allow servers to explicitly specify which origins are permitted to access their resources. When a browser detects a cross-origin request, it checks for these headers in the server's response. If the headers indicate permission, the request is allowed; otherwise, it's blocked.\n\n*   `Access-Control-Allow-Origin`: Specifies which origins (e.g., `https://allowed-origin.com` or `*` for any origin) are allowed to access the resource. Most critical CORS header.\n*   `Access-Control-Allow-Methods`: Lists the HTTP methods (e.g., `GET`, `POST`, `PUT`, `DELETE`, `OPTIONS`) that are allowed for cross-origin requests.\n*   `Access-Control-Allow-Headers`: Indicates which custom HTTP headers (e.g., `Content-Type`, `Authorization`) can be used in the actual request.\n*   `Access-Control-Allow-Credentials`: A boolean (`true`) that indicates whether the response to the request can be exposed when the request's `credentials` mode is `include`. This is necessary for sending cookies, HTTP authentication, or client-side SSL certificates.\n*   `Access-Control-Expose-Headers`: Allows the server to whitelist response headers that the browser should make available to the client (by default, only a few simple response headers are exposed).\n*   `Access-Control-Max-Age`: Indicates how long the results of a preflight request (see below) can be cached by the browser, reducing the number of preflight requests.\n\n### 3. Types of Requests\n\n*   **Simple Requests**: These are cross-origin requests that meet certain criteria (e.g., `GET`, `HEAD`, `POST` methods with specific `Content-Type` headers like `application/x-www-form-urlencoded`, `multipart/form-data`, or `text/plain`). For simple requests, the browser sends the actual request directly, adding an `Origin` header. The server then responds with appropriate `Access-Control-Allow-Origin` (and other `Access-Control-Allow-*`) headers. If these headers permit the request, the response is exposed to the client.\n\n*   **Preflight Requests**: For non-simple requests (e.g., requests using `PUT`, `DELETE`, custom headers, or `application/json` `Content-Type` for `POST`), the browser first sends an `OPTIONS` request, known as a 'preflight' request, to the server. This preflight request checks with the server to see if the actual request is safe to send. The server responds to the `OPTIONS` request with the allowed methods, headers, and origins. If the preflight response indicates permission, the browser then sends the actual request. If not, the request is blocked before the actual data transfer, preventing potential harmful operations.\n\n### 4. Implementation on the Server\nCORS is primarily configured on the server-side, as the server is responsible for setting the `Access-Control-*` headers that browsers read. Frameworks like Express.js (Node.js) or Spring Boot (Java) provide middleware or configuration options to easily manage CORS policies.",
          "examples": [
            {
              "id": "example_cors_expressjs_implementation",
              "title": "Express.js Server-Side CORS Configuration",
              "code": "const express = require('express');\nconst app = express();\n\napp.use((req, res, next) => {\n  // Set the allowed origin. Use '*' for any origin (less secure for production).\n  res.header('Access-Control-Allow-Origin', 'https://allowed-origin.com'); \n  \n  // Set allowed HTTP methods\n  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n  \n  // Set allowed request headers\n  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n  \n  // Handle preflight requests (OPTIONS method)\n  if (req.method === 'OPTIONS') {\n    return res.sendStatus(200); // Respond with 200 OK for preflight\n  }\n  \n  next(); // Continue to the next middleware/route handler\n});\n\n// Example route\napp.get('/data', (req, res) => {\n  res.json({ message: 'Data from server' });\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on port 3000');\n});",
              "explanation": "This Express.js snippet demonstrates how to configure CORS headers on a server. The middleware (`app.use`) intercepts all incoming requests. It sets `Access-Control-Allow-Origin` to restrict access to a specific domain (or `*` for all), `Access-Control-Allow-Methods` for permitted HTTP actions, and `Access-Control-Allow-Headers` for allowed custom headers. Crucially, it includes logic to handle `OPTIONS` requests (preflight requests) by simply sending a `200 OK` status, indicating that the server is ready to accept the actual request. This setup ensures that browsers can successfully make cross-origin requests from the specified origin.",
              "language": "javascript"
            },
            {
              "id": "example_cors_fetch_client_side",
              "title": "Client-Side Fetch Request (Implicit CORS Handling)",
              "code": "async function fetchData() {\n  try {\n    // This fetch request will trigger CORS if the origin of the client\n    // differs from the origin of the server (e.g., client on localhost:3001, server on localhost:3000).\n    const response = await fetch('http://localhost:3000/data', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer some_token'\n      },\n      body: JSON.stringify({ item: 'new item' })\n    });\n\n    if (!response.ok) {\n      // If the server doesn't send proper CORS headers, the browser will block this.\n      // The error will often be a Network Error, not a specific CORS error.\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    console.log('Data fetched successfully:', data);\n  } catch (error) {\n    console.error('Fetch error (possibly CORS issue):', error);\n  }\n}\n\nfetchData();",
              "explanation": "This client-side JavaScript code initiates a `fetch` request. Since it's making a `POST` request with `Content-Type: application/json` and a custom `Authorization` header, it will trigger a preflight `OPTIONS` request if the client's origin (e.g., `http://localhost:3001`) is different from the server's origin (`http://localhost:3000`). The browser implicitly handles the CORS negotiation based on the server's `Access-Control-*` headers. If the server does not send the correct CORS headers, the browser will block the response, resulting in a network error on the client side, even if the server processed the request successfully.",
              "language": "javascript"
            }
          ],
          "relatedQuestions": [
            "question_cors_definition_1",
            "question_cors_same_origin_policy_1",
            "question_cors_preflight_vs_simple_1",
            "question_cors_headers_mcq_1",
            "question_cors_troubleshooting_open_1"
          ],
          "relatedTasks": [
            "task_cors_server_config",
            "task_cors_client_test_and_fix"
          ],
          "tags": [
            "Security",
            "CORS",
            "Same-Origin Policy",
            "HTTP Headers",
            "Web Security",
            "Frontend",
            "Backend",
            "Networking"
          ],
          "technology": "Web Security, HTTP",
          "prerequisites": [
            "HTTP Basics",
            "Web Browser Architecture",
            "Client-Server Communication"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "API Integration",
            "Secure Web Development",
            "Troubleshooting Network Issues"
          ]
        },
        {
          "id": "theory_react_hoc",
          "title": "React Concepts: Higher-Order Components (HOCs)",
          "content": "Higher-Order Components (HOCs) are an advanced pattern in React for reusing component logic. An HOC is a function that takes a component as an argument and returns a new component with enhanced capabilities (e.g., additional props, state, or behavior). They are a form of component composition.\n\n## Key Characteristics\n\n### 1. Component Composition\nHOCs achieve code reuse through composition, meaning they wrap components rather than modifying them directly (inheritance is generally discouraged in React for this purpose). This allows for a clear separation of concerns, where the HOC handles the reusable logic and the wrapped component focuses on rendering its UI.\n\n### 2. Pure Function\nAn HOC should ideally be a 'pure function' in the sense that it does not modify the input component. Instead, it creates and returns a *new* component. This ensures predictability and prevents unintended side effects on the original component.\n\n### 3. Naming Convention\nBy convention, HOCs are typically named with the prefix \"with\" (e.g., `withAuth`, `withData`, `withRouter`, `withLoading`). This convention clearly indicates that the function is a Higher-Order Component that 'enhances' another component.\n\n## Use Cases for HOCs\nHOCs are useful for a variety of cross-cutting concerns:\n*   **Code Reusability**: Sharing common logic (e.g., authentication, data fetching, logging) across multiple components without duplicating code.\n*   **Logic Abstraction**: Abstracting away complex logic from presentational components.\n*   **Prop Manipulation**: Adding, modifying, or removing props passed to the wrapped component.\n*   **State Abstraction**: Managing shared state or exposing state-related methods.\n*   **Render Hijacking**: While less common and more complex, HOCs can control rendering by wrapping the `render` method of the `WrappedComponent`.\n\n## HOCs vs. Hooks\nWhile HOCs are a powerful pattern, React Hooks (introduced in React 16.8) have become the preferred way to reuse stateful logic in function components. Hooks offer a more direct and often simpler way to share logic without introducing additional component nesting or the complexities sometimes associated with HOCs (like prop name clashes or ref forwarding).\n\nHowever, HOCs still have their place, especially in older codebases or when dealing with class components, or for specific patterns like render hijacking which are harder to achieve with Hooks alone.",
          "examples": [
            {
              "id": "example_react_hoc_withloading",
              "title": "HOC for Loading State (`withLoading`)",
              "code": "import React, { useState } from 'react';\n\n// HOC definition\nfunction withLoading(WrappedComponent) {\n  function WithLoading(props) { // This is the new component returned by the HOC\n    const [isLoading, setIsLoading] = useState(false);\n    \n    const startLoading = () => setIsLoading(true);\n    const stopLoading = () => setIsLoading(false);\n    \n    // Render the WrappedComponent, passing new props (isLoading, startLoading, stopLoading)\n    // along with any original props (spread via {...props})\n    return (\n      <WrappedComponent\n        isLoading={isLoading}\n        startLoading={startLoading}\n        stopLoading={stopLoading}\n        {...props}\n      />\n    );\n  }\n\n  // For easier debugging in React DevTools\n  WithLoading.displayName = `withLoading(${getDisplayName(WrappedComponent)})`;\n  return WithLoading;\n}\n\n// Helper to get component's display name\nfunction getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n\n// Usage Example Component\nfunction MyDataLoader({ isLoading, startLoading, stopLoading, data }) {\n  const fetchData = async () => {\n    startLoading();\n    console.log('Fetching data...');\n    await new Promise(resolve => setTimeout(resolve, 2000)); // Simulate API call\n    // In a real app, you'd fetch data here\n    console.log('Data fetched:', data || 'No data provided');\n    stopLoading();\n  };\n\n  return (\n    <div>\n      <p>{isLoading ? 'Loading data...' : 'Data is ready.'}</p>\n      <button onClick={fetchData} disabled={isLoading}>\n        {isLoading ? 'Loading...' : 'Load Data'}\n      </button>\n      {data && !isLoading && <p>Received: {data}</p>}\n    </div>\n  );\n}\n\n// Apply the HOC\nconst MyEnhancedDataLoader = withLoading(MyDataLoader);\n\n// How it would be used in a parent component:\n// <MyEnhancedDataLoader data=\"Sample HOC Data\" />",
              "explanation": "This example demonstrates a `withLoading` HOC. It takes `WrappedComponent` as an argument and returns a new functional component, `WithLoading`. `WithLoading` manages its own `isLoading` state and provides `startLoading` and `stopLoading` functions. These state and functions are then passed as props to the `WrappedComponent` along with any original props. The `MyDataLoader` component then consumes these props, allowing it to display a loading message and disable its button during a simulated data fetch. The `displayName` helper is a best practice for better debugging in React DevTools.",
              "language": "typescript"
            },
            {
              "id": "example_react_hoc_withauth_concept",
              "title": "Conceptual HOC for Authentication (`withAuth`)",
              "code": "import React, { useEffect, useState } from 'react';\n\nfunction withAuth(WrappedComponent) {\n  return function WithAuth(props) {\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const [user, setUser] = useState(null);\n\n    useEffect(() => {\n      // Simulate auth check, e.g., token validation, API call\n      const token = localStorage.getItem('authToken');\n      if (token) {\n        // In a real app, validate token on server\n        setIsAuthenticated(true);\n        setUser({ name: 'John Doe', role: 'admin' });\n      } else {\n        setIsAuthenticated(false);\n        setUser(null);\n      }\n    }, []);\n\n    if (!isAuthenticated) {\n      // Redirect to login or render a login message\n      return <p>Please log in to view this content.</p>;\n    }\n\n    // Pass auth status and user info to the wrapped component\n    return (\n      <WrappedComponent\n        isAuthenticated={isAuthenticated}\n        user={user}\n        {...props}\n      />\n    );\n  };\n}\n\n// Usage Example:\n// function AdminDashboard({ isAuthenticated, user }) {\n//   if (!isAuthenticated) return null; // Should be handled by HOC, but good for type safety\n//   return (\n//     <div>\n//       <h1>Welcome, {user.name} ({user.role})!</h1>\n//       <p>This is your admin dashboard content.</p>\n//     </div>\n//   );\n// }\n\n// const ProtectedAdminDashboard = withAuth(AdminDashboard);\n",
              "explanation": "This conceptual `withAuth` HOC demonstrates how to wrap a component to add authentication logic. It manages an `isAuthenticated` state and `user` data. Inside a `useEffect`, it simulates an authentication check (e.g., looking for a token in `localStorage`). If the user is not authenticated, it can render a fallback UI (like a login message or redirect). Otherwise, it renders the `WrappedComponent`, injecting `isAuthenticated` and `user` as props. This pattern centralizes authentication logic and allows multiple components to easily become 'protected' by simply wrapping them with `withAuth`.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_react_hoc_definition_1",
            "question_react_hoc_benefits_open_1",
            "question_react_hoc_drawbacks_1",
            "question_react_hoc_vs_hooks_1",
            "question_react_hoc_naming_convention_1"
          ],
          "relatedTasks": [
            "task_react_hoc_withlogger",
            "task_react_hoc_withformvalidation"
          ],
          "tags": [
            "React",
            "Higher-Order Components",
            "HOC",
            "Component Patterns",
            "Code Reusability",
            "Composition",
            "Frontend Architecture",
            "React Hooks"
          ],
          "technology": "React",
          "prerequisites": [
            "React Components (functional and class)",
            "React Props",
            "React State",
            "JavaScript Functions as First-Class Citizens"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "Advanced React Patterns",
            "Legacy React Codebases",
            "Understanding React Evolution"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_serviceworker_purpose_1",
          "topic": "Service Workers",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary role of a Service Worker in a web application?",
          "answer": "To act as a programmable network proxy, intercepting and managing network requests, enabling offline capabilities and performance enhancements.",
          "analysisPoints": [
            "Understanding of Service Worker's core function.",
            "Ability to articulate its primary benefit (offline, performance)."
          ],
          "keyConcepts": [
            "Service Worker",
            "Network Proxy",
            "Offline Capabilities"
          ],
          "evaluationCriteria": [
            "Accuracy",
            "Conciseness"
          ],
          "example": "",
          "tags": [
            "Service Worker",
            "PWA",
            "Fundamentals"
          ],
          "prerequisites": [
            "Web API Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_serviceworker_cache_first_mcq_1",
          "topic": "Service Worker Caching",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following Service Worker fetch event listener. What is the primary caching strategy implemented here?",
          "answer": "Cache-First, then Network",
          "options": [
            "Network-First, then Cache",
            "Cache-First, then Network",
            "Stale-While-Revalidate",
            "Cache-Only"
          ],
          "analysisPoints": [
            "Ability to interpret Service Worker caching logic.",
            "Distinguishing between different caching strategies."
          ],
          "keyConcepts": [
            "Service Worker",
            "Cache-First",
            "Fetch Event",
            "Caching Strategies"
          ],
          "evaluationCriteria": [
            "Understanding of Service Worker event flow",
            "Correct identification of caching pattern"
          ],
          "example": "```javascript\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request).then(cachedResponse => {\n      if (cachedResponse) {\n        return cachedResponse; // Cache-First: returns cached response if found\n      }\n      return fetch(event.request).then(response => {\n        // Network fallback: fetches from network if not in cache\n        if (!response || response.status !== 200 || response.type !== 'basic') {\n          return response;\n        }\n        const responseToCache = response.clone();\n        caches.open('v1').then(cache => {\n          cache.put(event.request, responseToCache);\n        });\n        return response;\n      });\n    })\n  );\n});\n```\n\nExplanation: The code first attempts `caches.match(event.request)`. If `cachedResponse` is found, it's returned immediately. This is the hallmark of a Cache-First strategy. Only if the cache miss occurs does it proceed to `fetch(event.request)` from the network.",
          "tags": [
            "Service Worker",
            "Caching",
            "MCQ",
            "Web Performance"
          ],
          "prerequisites": [
            "Service Worker Basics",
            "Promises"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_serviceworker_response_clone_1",
          "topic": "Service Worker: Response Object",
          "level": "medium",
          "type": "open",
          "question": "In the provided Service Worker example, why is `response.clone()` called before putting the response into the cache?",
          "answer": "The `Response` object streams its body, meaning it can only be consumed once. To use the response for both sending back to the browser and caching, it must be cloned. One copy is sent to the browser, and the cloned copy is used for caching.",
          "analysisPoints": [
            "Understanding of the `Response` object's stream nature.",
            "Recognizing the necessity of cloning for dual consumption (browser + cache).",
            "Implications of not cloning (e.g., fetch body already consumed error)."
          ],
          "keyConcepts": [
            "Service Worker",
            "Response Object",
            "Streams",
            "Caching",
            "Cloning"
          ],
          "evaluationCriteria": [
            "Clarity of explanation",
            "Completeness of reasoning",
            "Technical accuracy"
          ],
          "example": "",
          "tags": [
            "Service Worker",
            "Web APIs",
            "HTTP",
            "Performance"
          ],
          "prerequisites": [
            "JavaScript Streams",
            "HTTP Response Body"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_serviceworker_deduplication_open_1",
          "topic": "Service Worker: Deduplication",
          "level": "hard",
          "type": "open",
          "question": "Explain how a Service Worker can implement request deduplication and why this is beneficial for web performance.",
          "answer": "A Service Worker can implement request deduplication by maintaining a map or object of pending network requests, typically using the request URL as a key and the `Promise` of the fetch operation as the value. When a `fetch` event occurs, the Service Worker first checks this map. If a promise for that URL already exists, it returns the existing promise, preventing a new network request for the same resource. Once the initial promise resolves or rejects, it's removed from the map. This is beneficial for web performance because it avoids redundant network fetches, reducing bandwidth usage, server load, and improving perceived load times, especially in scenarios with rapid, identical requests.",
          "analysisPoints": [
            "Ability to describe the mechanism (using a map/promise cache).",
            "Understanding the benefits (reduced network traffic, server load, improved performance).",
            "Consideration of edge cases (e.g., removing promise after resolution/rejection)."
          ],
          "keyConcepts": [
            "Service Worker",
            "Deduplication",
            "Promises",
            "Caching",
            "Web Performance"
          ],
          "evaluationCriteria": [
            "Detail of technical explanation",
            "Clear articulation of benefits",
            "Demonstration of practical understanding"
          ],
          "example": "",
          "tags": [
            "Service Worker",
            "Performance Optimization",
            "Advanced"
          ],
          "prerequisites": [
            "Service Worker Lifecycle",
            "Promises",
            "Maps in JS"
          ],
          "complexity": 8,
          "interviewFrequency": 6,
          "learningPath": "advanced"
        },
        {
          "id": "question_serviceworker_stale_revalidate_1",
          "topic": "Service Worker Caching",
          "level": "medium",
          "type": "flashcard",
          "question": "Briefly describe the 'Stale-While-Revalidate' caching strategy in the context of Service Workers.",
          "answer": "Serve content immediately from cache (stale), and then asynchronously fetch an updated version from the network to update the cache for future requests (revalidate).",
          "analysisPoints": [
            "Understanding of the two-phase nature (serve stale, then revalidate).",
            "Recognition of its balance between speed and freshness."
          ],
          "keyConcepts": [
            "Service Worker",
            "Stale-While-Revalidate",
            "Caching Strategy"
          ],
          "evaluationCriteria": [
            "Accuracy",
            "Conciseness"
          ],
          "example": "",
          "tags": [
            "Service Worker",
            "Caching",
            "Performance"
          ],
          "prerequisites": [
            "Service Worker Basics"
          ],
          "complexity": 5,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_cors_definition_1",
          "topic": "CORS",
          "level": "easy",
          "type": "flashcard",
          "question": "What does CORS stand for, and what is its fundamental purpose?",
          "answer": "CORS stands for Cross-Origin Resource Sharing. Its fundamental purpose is a security mechanism that allows or restricts web applications from making requests to a different domain than the one that served the application, overriding the Same-Origin Policy under controlled conditions.",
          "analysisPoints": [
            "Correct expansion of CORS.",
            "Understanding of its role in cross-origin communication."
          ],
          "keyConcepts": [
            "CORS",
            "Security",
            "Same-Origin Policy"
          ],
          "evaluationCriteria": [
            "Accuracy",
            "Clarity"
          ],
          "example": "",
          "tags": [
            "CORS",
            "Security",
            "Networking"
          ],
          "prerequisites": [
            "HTTP Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 9,
          "learningPath": "beginner"
        },
        {
          "id": "question_cors_same_origin_policy_1",
          "topic": "CORS / Same-Origin Policy",
          "level": "medium",
          "type": "open",
          "question": "Explain the Same-Origin Policy (SOP) and how CORS relates to it.",
          "answer": "The Same-Origin Policy (SOP) is a critical browser security mechanism that restricts a web page from making requests to a different 'origin' (defined by scheme, host, and port) than its own. This prevents malicious scripts from accessing sensitive data on other sites. CORS (Cross-Origin Resource Sharing) is a mechanism that _relaxes_ the SOP by allowing servers to explicitly specify which origins are permitted to access their resources through a set of HTTP headers. Without CORS, almost all cross-origin requests would be blocked by SOP.",
          "analysisPoints": [
            "Accurate definition of SOP and its purpose.",
            "Clear explanation of CORS as an extension/relaxation of SOP.",
            "Understanding of the security implications."
          ],
          "keyConcepts": [
            "Same-Origin Policy",
            "CORS",
            "Web Security",
            "Origin"
          ],
          "evaluationCriteria": [
            "Completeness of explanation",
            "Understanding of security implications",
            "Clarity of relationship between SOP and CORS"
          ],
          "example": "",
          "tags": [
            "CORS",
            "Security",
            "SOP"
          ],
          "prerequisites": [
            "HTTP Basics",
            "Web Browser Architecture"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_cors_preflight_vs_simple_1",
          "topic": "CORS Request Types",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following HTTP requests would typically trigger a CORS preflight request?",
          "answer": "A POST request with `Content-Type: application/json`",
          "options": [
            "A GET request to `http://api.example.com/data`",
            "A POST request with `Content-Type: application/x-www-form-urlencoded`",
            "A POST request with `Content-Type: application/json`",
            "A GET request with no custom headers"
          ],
          "analysisPoints": [
            "Knowledge of what constitutes a 'simple' CORS request.",
            "Identification of factors that trigger preflight requests (e.g., non-standard methods, custom headers, certain `Content-Type`)."
          ],
          "keyConcepts": [
            "CORS",
            "Preflight Request",
            "Simple Request",
            "HTTP Methods",
            "Content-Type"
          ],
          "evaluationCriteria": [
            "Correct identification of preflight trigger",
            "Understanding of HTTP request characteristics"
          ],
          "example": "Explanation: Simple requests are limited to `GET`, `HEAD`, `POST` with `Content-Type` being `application/x-www-form-urlencoded`, `multipart/form-data`, or `text/plain`. A `POST` request with `Content-Type: application/json` is NOT a simple request and thus requires a preflight `OPTIONS` request to check server permissions before the actual request is sent.",
          "tags": [
            "CORS",
            "Security",
            "HTTP",
            "MCQ"
          ],
          "prerequisites": [
            "HTTP Methods",
            "HTTP Headers"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_cors_headers_mcq_1",
          "topic": "CORS Headers",
          "level": "medium",
          "type": "mcq",
          "question": "Which HTTP response header is primarily used by a server to indicate which origins are permitted to access its resources in a CORS context?",
          "answer": "`Access-Control-Allow-Origin`",
          "options": [
            "`Content-Security-Policy`",
            "`Access-Control-Allow-Methods`",
            "`Access-Control-Allow-Origin`",
            "`X-Content-Type-Options`"
          ],
          "analysisPoints": [
            "Correct identification of the core CORS header.",
            "Distinguishing CORS headers from other security headers."
          ],
          "keyConcepts": [
            "CORS",
            "HTTP Headers",
            "Access-Control-Allow-Origin"
          ],
          "evaluationCriteria": [
            "Knowledge of essential CORS headers",
            "Accuracy in identifying header purpose"
          ],
          "example": "Explanation: `Access-Control-Allow-Origin` is the most crucial CORS header, explicitly stating which origins are allowed to make cross-origin requests to the resource. `Access-Control-Allow-Methods` specifies allowed HTTP methods, and `Content-Security-Policy` is a different security header related to preventing XSS and data injection attacks.",
          "tags": [
            "CORS",
            "HTTP Headers",
            "MCQ"
          ],
          "prerequisites": [
            "HTTP Headers"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_cors_troubleshooting_open_1",
          "topic": "CORS Troubleshooting",
          "level": "hard",
          "type": "open",
          "question": "You are developing a frontend application on `http://localhost:3000` and trying to fetch data from an API on `http://localhost:8080`. You get a CORS error in the browser console. Describe common reasons for this error and how you would troubleshoot and fix it.",
          "answer": "Common reasons for a CORS error in this scenario include:\n1.  **Missing `Access-Control-Allow-Origin` header:** The API server at `http://localhost:8080` is not sending this header, or it's not configured to include `http://localhost:3000`.\n2.  **Incorrect `Access-Control-Allow-Methods` or `Access-Control-Allow-Headers`:** If the request is a preflight request (e.g., `PUT`, `DELETE`, or a `POST` with `application/json`), the server might not be explicitly allowing the method or headers used.\n3.  **No handling for `OPTIONS` preflight requests:** The server might not be correctly responding to the `OPTIONS` request with a `200 OK` status and the necessary `Access-Control-*` headers.\n4.  **`Access-Control-Allow-Credentials` not set:** If the client is sending cookies or authorization headers (`withCredentials`), and the server doesn't respond with `Access-Control-Allow-Credentials: true` along with a specific (non-wildcard) `Access-Control-Allow-Origin`.\n\n**Troubleshooting steps:**\n1.  **Check Browser Developer Tools:** Look at the 'Network' tab. Examine the preflight `OPTIONS` request (if any) and the actual request. Check their response headers for `Access-Control-Allow-Origin`, `Access-Control-Allow-Methods`, etc. The console error message often provides clues.\n2.  **Verify Server-Side Configuration:** On the API server, ensure CORS middleware or configuration is correctly set up to allow requests from `http://localhost:3000`. This involves setting `res.header('Access-Control-Allow-Origin', 'http://localhost:3000')`, appropriate methods and headers, and handling `OPTIONS` requests.\n3.  **Test with Tools:** Use `curl` or Postman to mimic the browser's request and inspect headers, verifying server responses independently of the browser's CORS enforcement.\n\n**Fixing the error:** The most common fix is to configure the backend API to include the necessary `Access-Control-Allow-Origin` header (e.g., `http://localhost:3000` or `*` for development) and other `Access-Control-*` headers (`Methods`, `Headers`, `Credentials`) as required by the client request, and ensure `OPTIONS` requests are handled.",
          "analysisPoints": [
            "Comprehensive understanding of CORS error causes.",
            "Systematic approach to troubleshooting using browser tools and server configuration.",
            "Knowledge of specific server-side fixes."
          ],
          "keyConcepts": [
            "CORS",
            "Troubleshooting",
            "HTTP Headers",
            "Preflight Requests",
            "Server Configuration"
          ],
          "evaluationCriteria": [
            "Depth of knowledge about CORS issues",
            "Practical troubleshooting skills",
            "Ability to propose effective solutions"
          ],
          "example": "",
          "tags": [
            "CORS",
            "Security",
            "Troubleshooting",
            "Networking",
            "Debugging"
          ],
          "prerequisites": [
            "HTTP Basics",
            "Client-Server Architecture"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_hoc_definition_1",
          "topic": "React HOCs",
          "level": "easy",
          "type": "flashcard",
          "question": "What is a Higher-Order Component (HOC) in React?",
          "answer": "A Higher-Order Component (HOC) is a function that takes a component and returns a new component with enhanced props or behavior, serving as a pattern for reusing component logic.",
          "analysisPoints": [
            "Correct definition of HOC.",
            "Understanding its role as a function that transforms components."
          ],
          "keyConcepts": [
            "HOC",
            "React",
            "Component Pattern",
            "Code Reusability"
          ],
          "evaluationCriteria": [
            "Accuracy",
            "Conciseness"
          ],
          "example": "",
          "tags": [
            "React",
            "HOC",
            "Fundamentals"
          ],
          "prerequisites": [
            "React Components"
          ],
          "complexity": 4,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_hoc_benefits_open_1",
          "topic": "React HOCs",
          "level": "medium",
          "type": "open",
          "question": "List and explain at least three benefits of using Higher-Order Components in React applications.",
          "answer": "Three benefits of using Higher-Order Components (HOCs) in React are:\n1.  **Code Reusability:** HOCs allow you to extract and share common component logic (e.g., data fetching, authentication, logging, state management) across multiple components without duplicating code. This promotes the DRY (Don't Repeat Yourself) principle.\n2.  **Separation of Concerns:** They help separate presentational logic (what a component renders) from behavioral logic (how a component works or fetches data). The HOC handles the shared behavior, and the wrapped component focuses solely on UI rendering, leading to cleaner and more maintainable code.\n3.  **Prop Manipulation and Injection:** HOCs can easily add, modify, or remove props that are passed to the wrapped component. This allows injecting common data, functions, or state derived from the HOC's logic directly into the components that need them, simplifying their interface.",
          "analysisPoints": [
            "Ability to identify core advantages.",
            "Clear explanation of each benefit.",
            "Demonstration of practical use cases."
          ],
          "keyConcepts": [
            "HOC",
            "Code Reusability",
            "Separation of Concerns",
            "Prop Injection",
            "React Patterns"
          ],
          "evaluationCriteria": [
            "Completeness and accuracy of benefits listed",
            "Quality of explanation for each benefit",
            "Relevance to real-world React development"
          ],
          "example": "",
          "tags": [
            "React",
            "HOC",
            "Architecture"
          ],
          "prerequisites": [
            "React Component Basics"
          ],
          "complexity": 6,
          "interviewFrequency": 7,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_hoc_drawbacks_1",
          "topic": "React HOCs",
          "level": "medium",
          "type": "flashcard",
          "question": "What are some common drawbacks or challenges when using Higher-Order Components?",
          "answer": "Common drawbacks include: prop name collisions, ref forwarding issues (requires `React.forwardRef`), increased component tree nesting (leading to 'wrapper hell' in DevTools), and difficulties in explicitly knowing what props an HOC injects.",
          "analysisPoints": [
            "Knowledge of HOC limitations.",
            "Ability to quickly recall common problems.",
            "Awareness of solutions (e.g., `forwardRef`)."
          ],
          "keyConcepts": [
            "HOC",
            "Drawbacks",
            "Ref Forwarding",
            "Prop Collisions",
            "Wrapper Hell"
          ],
          "evaluationCriteria": [
            "Accuracy",
            "Conciseness"
          ],
          "example": "",
          "tags": [
            "React",
            "HOC",
            "Challenges"
          ],
          "prerequisites": [
            "React Props",
            "React Refs"
          ],
          "complexity": 6,
          "interviewFrequency": 6,
          "learningPath": "intermediate"
        },
        {
          "id": "question_react_hoc_vs_hooks_1",
          "topic": "React HOCs vs. Hooks",
          "level": "hard",
          "type": "open",
          "question": "Compare and contrast Higher-Order Components (HOCs) with React Hooks for reusing stateful logic. When might you still prefer an HOC?",
          "answer": "HOCs and Hooks both address the problem of reusing stateful logic in React, but they do so differently:\n\n**HOCs:**\n*   **Composition:** Wrap a component, taking it as an argument and returning a new, enhanced component.\n*   **Mechanism:** Rely on prop injection and component wrapping.\n*   **Drawbacks:** Can lead to 'wrapper hell' (nested components in DevTools), prop name collisions, ref forwarding complexities, and less intuitive prop flow.\n*   **Applicability:** Work with both class and functional components (though typically seen with class components).\n\n**Hooks:**\n*   **Composition:** Use pure JavaScript functions that 'hook into' React state and lifecycle features.\n*   **Mechanism:** Allow direct access to state and lifecycle from functional components without introducing new component layers.\n*   **Benefits:** Avoid wrapper hell, more explicit data flow, simpler to compose multiple pieces of logic, better TypeScript inference.\n*   **Applicability:** Exclusively for functional components.\n\n**When to prefer an HOC:**\nDespite Hooks being the modern preferred approach, you might still prefer an HOC in specific scenarios:\n1.  **Legacy Codebases:** When working with existing class components where refactoring to hooks might be too disruptive.\n2.  **Render Hijacking:** For advanced use cases where you need to completely control or replace the wrapped component's rendering logic, which is more complex to achieve directly with Hooks.\n3.  **Strict Component Control:** When you want to ensure a component strictly receives certain props, as HOCs explicitly pass props down.",
          "analysisPoints": [
            "Clear differentiation based on mechanics and advantages/disadvantages.",
            "Understanding of the core problem each solves.",
            "Identification of niche scenarios where HOCs still make sense.",
            "Awareness of React's evolution (Hooks being newer/preferred)."
          ],
          "keyConcepts": [
            "HOC",
            "React Hooks",
            "Code Reusability",
            "Component Composition",
            "Stateful Logic",
            "Render Hijacking"
          ],
          "evaluationCriteria": [
            "Thorough comparison with accurate details",
            "Insightful discussion of when to choose one over the other",
            "Demonstration of deep React architectural understanding"
          ],
          "example": "",
          "tags": [
            "React",
            "HOC",
            "React Hooks",
            "Architecture",
            "Advanced"
          ],
          "prerequisites": [
            "React Hooks",
            "React Components",
            "Component Lifecycle"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_hoc_naming_convention_1",
          "topic": "React HOCs",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the common naming convention for Higher-Order Components in React?",
          "answer": "HOCs are typically prefixed with \"with\" (e.g., `withAuth`, `withData`, `withLoading`) to indicate they enhance a component.",
          "analysisPoints": [
            "Knowledge of common React community practices.",
            "Ability to recall the naming convention."
          ],
          "keyConcepts": [
            "HOC",
            "Naming Convention",
            "React Best Practices"
          ],
          "evaluationCriteria": [
            "Accuracy",
            "Conciseness"
          ],
          "example": "",
          "tags": [
            "React",
            "HOC",
            "Best Practices"
          ],
          "prerequisites": [
            "React Basics"
          ],
          "complexity": 3,
          "interviewFrequency": 6,
          "learningPath": "beginner"
        }
      ],
      "tasks": [
        {
          "id": "task_serviceworker_offline_cache",
          "title": "Implement a Service Worker for Offline Caching",
          "description": "\nImplement a Service Worker that applies a 'cache-first' strategy for static assets (like HTML, CSS, JS, and images) and a 'network-first' strategy for API calls. Ensure basic offline capability for your application shell.\n\n**Requirements:**\n1.  **Service Worker Registration:** Register the Service Worker in `index.html` or a main JS file.\n2.  **Caching Static Assets:** On `install` event, cache an application shell (e.g., `index.html`, `style.css`, `app.js`, `image.png`). On `fetch` events, use a 'cache-first' strategy for these assets.\n3.  **API Caching (Network-First):** For requests to `/api/data`, implement a 'network-first, then cache' strategy. If the network is unavailable, fall back to the cache.\n4.  **Cache Management:** Include a basic `activate` event listener to clean up old caches.\n5.  **Offline Message:** The `index.html` should initially show an 'Online' message, which changes to 'Offline' if the Service Worker serves content from cache due to network unavailability.\n",
          "difficulty": "medium",
          "startingCode": "// index.html (client-side):\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline App</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <h1>Welcome to Offline First App!</h1>\n    <p id=\"status\">Online</p>\n    <img src=\"image.png\" alt=\"Placeholder Image\" width=\"100\">\n    <button id=\"fetchData\">Fetch API Data</button>\n    <pre id=\"apiOutput\"></pre>\n\n    <script src=\"app.js\"></script>\n    <script>\n        if ('serviceWorker' in navigator) {\n            window.addEventListener('load', () => {\n                navigator.serviceWorker.register('/sw.js')\n                    .then(registration => {\n                        console.log('Service Worker registered:', registration);\n                    })\n                    .catch(error => {\n                        console.error('Service Worker registration failed:', error);\n                    });\n            });\n        }\n    </script>\n</body>\n</html>\n\n// style.css:\nbody { font-family: sans-serif; margin: 20px; }\nh1 { color: #333; }\n#status { font-weight: bold; }\n\n// app.js (client-side):\ndocument.getElementById('fetchData').addEventListener('click', async () => {\n    const apiOutput = document.getElementById('apiOutput');\n    apiOutput.textContent = 'Fetching data...';\n    try {\n        const response = await fetch('/api/data');\n        const data = await response.json();\n        apiOutput.textContent = JSON.stringify(data, null, 2);\n    } catch (error) {\n        apiOutput.textContent = 'Failed to fetch API data: ' + error.message;\n        document.getElementById('status').textContent = 'Offline (API fallback)';\n    }\n});\n\n// sw.js (Service Worker file):\nconst CACHE_STATIC_NAME = 'static-v1';\nconst CACHE_API_NAME = 'api-v1';\nconst STATIC_ASSETS = [\n  '/',\n  'index.html',\n  'style.css',\n  'app.js',\n  'image.png' // Assume this image exists\n];\n\nself.addEventListener('install', event => {\n  console.log('[Service Worker] Installing Service Worker ...', event);\n  event.waitUntil(\n    caches.open(CACHE_STATIC_NAME)\n      .then(cache => {\n        console.log('[Service Worker] Pre-caching App Shell');\n        return cache.addAll(STATIC_ASSETS);\n      })\n  );\n});\n\nself.addEventListener('activate', event => {\n  console.log('[Service Worker] Activating Service Worker ....', event);\n  // TODO: Clean up old caches here\n  return self.clients.claim();\n});\n\nself.addEventListener('fetch', event => {\n  const url = new URL(event.request.url);\n\n  // TODO: Implement cache-first for static assets\n\n  // TODO: Implement network-first, then cache for /api/data\n\n});\n",
          "solutionCode": "// sw.js (Service Worker file):\nconst CACHE_STATIC_NAME = 'static-v1';\nconst CACHE_API_NAME = 'api-v1';\nconst STATIC_ASSETS = [\n  '/',\n  'index.html',\n  'style.css',\n  'app.js',\n  'image.png' \n];\n\nself.addEventListener('install', event => {\n  console.log('[Service Worker] Installing Service Worker ...', event);\n  event.waitUntil(\n    caches.open(CACHE_STATIC_NAME)\n      .then(cache => {\n        console.log('[Service Worker] Pre-caching App Shell');\n        return cache.addAll(STATIC_ASSETS);\n      })\n  );\n});\n\nself.addEventListener('activate', event => {\n  console.log('[Service Worker] Activating Service Worker ....', event);\n  event.waitUntil(\n    caches.keys().then(keyList => {\n      return Promise.all(keyList.map(key => {\n        if (key !== CACHE_STATIC_NAME && key !== CACHE_API_NAME) {\n          console.log('[Service Worker] Removing old cache:', key);\n          return caches.delete(key);\n        }\n      }))\n    })\n  );\n  return self.clients.claim();\n});\n\nself.addEventListener('fetch', event => {\n  const url = new URL(event.request.url);\n\n  if (STATIC_ASSETS.includes(url.pathname) || url.origin === location.origin) {\n    // Cache-First for static assets (and same-origin navigation/assets)\n    event.respondWith(\n      caches.match(event.request)\n        .then(cachedResponse => {\n          if (cachedResponse) {\n            // Update status message on client if served from cache\n            event.request.mode === 'navigate' && self.clients.matchAll().then(clients => {\n                clients.forEach(client => client.postMessage('offline'));\n            });\n            return cachedResponse;\n          }\n          return fetch(event.request)\n            .then(response => {\n              if (!response || response.status !== 200 || response.type !== 'basic') {\n                return response;\n              }\n              const responseToCache = response.clone();\n              caches.open(CACHE_STATIC_NAME)\n                .then(cache => {\n                  cache.put(event.request, responseToCache);\n                });\n              return response;\n            })\n            .catch(err => {\n              // Fallback for network issues even for static assets\n              // For real apps, you'd serve an offline page here\n              console.log('[Service Worker] Fetch failed for static asset, trying cache:', err);\n              return caches.match(event.request);\n            });\n        })\n    );\n  } else if (url.pathname.startsWith('/api/data')) {\n    // Network-First, then Cache for API calls\n    event.respondWith(\n      fetch(event.request)\n        .then(response => {\n          // If fetch successful, cache it and return\n          if (!response || response.status !== 200 || response.type !== 'basic') {\n            return response;\n          }\n          const responseToCache = response.clone();\n          caches.open(CACHE_API_NAME)\n            .then(cache => {\n              cache.put(event.request, responseToCache);\n            });\n          return response;\n        })\n        .catch(err => {\n          // If network fails, try to return from cache\n          console.log('[Service Worker] API Fetch failed, falling back to cache:', err);\n          self.clients.matchAll().then(clients => {\n              clients.forEach(client => client.postMessage('offline'));\n          });\n          return caches.match(event.request);\n        })\n    );\n  } else {\n    // Default: network-only for other requests (e.g., third-party)\n    return;\n  }\n});\n\n// app.js (client-side - updated to listen for SW messages):\ndocument.getElementById('fetchData').addEventListener('click', async () => {\n    const apiOutput = document.getElementById('apiOutput');\n    apiOutput.textContent = 'Fetching data...';\n    try {\n        const response = await fetch('/api/data');\n        const data = await response.json();\n        apiOutput.textContent = JSON.stringify(data, null, 2);\n        document.getElementById('status').textContent = 'Online'; // Reset status if successful\n    } catch (error) {\n        apiOutput.textContent = 'Failed to fetch API data: ' + error.message;\n        document.getElementById('status').textContent = 'Offline (API fallback)';\n    }\n});\n\n// Listen for messages from the Service Worker\nif ('serviceWorker' in navigator) {\n    navigator.serviceWorker.addEventListener('message', event => {\n        if (event.data === 'offline') {\n            document.getElementById('status').textContent = 'Offline (Served from Cache)';\n        }\n    });\n}\n\n// Simulate an API endpoint (e.g., in a simple Node.js server or mock API)\n// const express = require('express');\n// const app = express();\n// app.get('/api/data', (req, res) => {\n//   setTimeout(() => {\n//     res.json({ message: 'Dynamic data from server', timestamp: new Date().toISOString() });\n//   }, 500);\n// });\n// app.listen(8080, () => console.log('Mock API listening on port 8080'));\n",
          "testCases": [
            "1. Initial Load (Online): Clear cache, start server. App shell loads from network, API fetches live data. Status: 'Online'.",
            "2. Offline Static Assets: Go offline (DevTools -> Application -> Service Workers -> Offline). Reload. App shell loads instantly from cache. Status: 'Offline (Served from Cache)' after SW message.",
            "3. Offline API Call: Stay offline. Click 'Fetch API Data'. API call should fail network-wise but return cached data if previously fetched successfully. Status: 'Offline (API fallback)'.",
            "4. Online API Fetch (After Offline): Go online. Click 'Fetch API Data'. New data should be fetched from network, cache updated. Status: 'Online'.",
            "5. Cache Cleanup: Change `CACHE_STATIC_NAME` or `CACHE_API_NAME` in `sw.js` (e.g., to `static-v2`). Reload the page twice. Check DevTools -> Application -> Cache Storage to ensure the old `v1` caches are removed by the `activate` event.",
            "6. Image Loading: Verify `image.png` loads correctly both online (initially) and offline (from cache)."
          ],
          "hints": [
            "Remember to use `event.waitUntil()` for asynchronous operations in install/activate events.",
            "The `response.clone()` method is crucial when you need to consume a `Response` body more than once (e.g., sending to browser and caching).",
            "For the 'network-first' strategy, wrap `fetch(event.request)` in a `try...catch` or `.then().catch()` block to handle network failures and fall back to `caches.match()`.",
            "To update the client-side UI based on Service Worker's behavior (like offline status), use `self.clients.matchAll().then(clients => clients.forEach(client => client.postMessage('message')))` in the SW and `navigator.serviceWorker.addEventListener('message', ...)` on the client.",
            "To simulate an API, you can either create a simple Node.js Express server or use a mock server library/tool."
          ],
          "tags": [
            "Service Worker",
            "Caching",
            "Offline First",
            "PWA",
            "Web Performance",
            "JavaScript",
            "Front-end"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "HTML",
            "CSS",
            "JavaScript Promises",
            "Fetch API"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Cache API",
            "Service Worker Lifecycle",
            "Network Strategies"
          ]
        },
        {
          "id": "task_cors_server_config",
          "title": "Configure CORS on a Node.js Express Server",
          "description": "\nCreate a simple Node.js Express server that correctly handles Cross-Origin Resource Sharing (CORS) for a frontend application.\n\n**Requirements:**\n1.  **Server Setup:** Create an Express.js server listening on port `8080`.\n2.  **CORS Middleware:** Implement a custom middleware or use the `cors` npm package to enable CORS.\n3.  **Specific Origin:** Configure the server to allow requests ONLY from `http://localhost:3000`.\n4.  **Allowed Methods:** Allow `GET`, `POST`, `PUT`, `DELETE`, and `OPTIONS` methods.\n5.  **Allowed Headers:** Allow `Content-Type` and `Authorization` headers.\n6.  **Preflight Handling:** Ensure `OPTIONS` requests (preflight) are handled correctly (respond with `200 OK`).\n7.  **Example Endpoints:** Create a `GET /data` endpoint and a `POST /submit` endpoint to test CORS functionality.\n",
          "difficulty": "medium",
          "startingCode": "// server.js\nconst express = require('express');\nconst app = express();\nconst PORT = 8080;\n\n// Middleware to parse JSON body\napp.use(express.json());\n\n// TODO: Implement CORS middleware here\n\n// Example GET route\napp.get('/data', (req, res) => {\n  res.json({ message: 'Data from server!', timestamp: new Date().toISOString() });\n});\n\n// Example POST route\napp.post('/submit', (req, res) => {\n  console.log('Received data:', req.body);\n  res.status(200).json({ message: 'Data received successfully!', yourData: req.body });\n});\n\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n});\n\n// Optional: client-side test in client.html (served by a separate server, e.g., on port 3000)\n/*\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>CORS Test Client</title>\n</head>\n<body>\n    <h1>CORS Test Client (Port 3000)</h1>\n    <button id=\"getData\">GET Data</button>\n    <button id=\"postData\">POST Data</button>\n    <pre id=\"output\"></pre>\n\n    <script>\n        const apiBaseUrl = 'http://localhost:8080';\n        const outputDiv = document.getElementById('output');\n\n        document.getElementById('getData').addEventListener('click', async () => {\n            outputDiv.textContent = 'Fetching GET data...';\n            try {\n                const response = await fetch(`${apiBaseUrl}/data`);\n                const data = await response.json();\n                outputDiv.textContent = JSON.stringify(data, null, 2);\n            } catch (error) {\n                outputDiv.textContent = 'Error fetching GET data: ' + error.message;\n                console.error(error);\n            }\n        });\n\n        document.getElementById('postData').addEventListener('click', async () => {\n            outputDiv.textContent = 'Posting data...';\n            try {\n                const response = await fetch(`${apiBaseUrl}/submit`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': 'Bearer some_token_123'\n                    },\n                    body: JSON.stringify({ name: 'Test User', value: 123 })\n                });\n                const data = await response.json();\n                outputDiv.textContent = JSON.stringify(data, null, 2);\n            } catch (error) {\n                outputDiv.textContent = 'Error posting data: ' + error.message;\n                console.error(error);\n            }\n        });\n    </script>\n</body>\n</html>\n*/\n",
          "solutionCode": "// server.js\nconst express = require('express');\nconst app = express();\nconst PORT = 8080;\n\n// Middleware to parse JSON body\napp.use(express.json());\n\n// Custom CORS Middleware\napp.use((req, res, next) => {\n  // Set the allowed origin\n  res.header('Access-Control-Allow-Origin', 'http://localhost:3000');\n  \n  // Set allowed HTTP methods\n  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n  \n  // Set allowed request headers (includes Content-Type and Authorization)\n  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n  \n  // Handle preflight requests\n  if (req.method === 'OPTIONS') {\n    // For preflight, immediately respond with 200 OK\n    return res.sendStatus(200);\n  }\n  \n  // Continue to the next middleware/route handler for actual requests\n  next();\n});\n\n// Example GET route\napp.get('/data', (req, res) => {\n  res.json({ message: 'Data from server!', timestamp: new Date().toISOString() });\n});\n\n// Example POST route\napp.post('/submit', (req, res) => {\n  console.log('Received data:', req.body);\n  res.status(200).json({ message: 'Data received successfully!', yourData: req.body });\n});\n\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n});\n\n// To run the client.html, you'd need another simple HTTP server.\n// For example, using 'serve' npm package: npm install -g serve\n// Then, navigate to your client.html directory and run: serve -p 3000\n",
          "testCases": [
            "1. Valid GET Request: Client (http://localhost:3000) makes a GET request to http://localhost:8080/data. Expect success.",
            "2. Valid POST Request: Client (http://localhost:3000) makes a POST request to http://localhost:8080/submit with `Content-Type: application/json` and `Authorization` header. Expect preflight OPTIONS request followed by successful POST.",
            "3. Invalid Origin: Attempt a request from a different origin (e.g., http://localhost:4000 or a file:// URL). Expect CORS error in browser console.",
            "4. Invalid Method: From http://localhost:3000, attempt a `PATCH` request (not explicitly allowed). Expect CORS error for method.",
            "5. Invalid Header: From http://localhost:3000, attempt a request with an unallowed custom header (e.g., `X-Custom-Header`). Expect CORS error for header."
          ],
          "hints": [
            "Remember that the `OPTIONS` request is a separate, preflight check and needs to be handled before the actual request.",
            "Ensure `Access-Control-Allow-Origin` exactly matches the client's origin, or use `*` for development (but not production).",
            "The `cors` npm package is a popular alternative for simpler CORS configuration, but implementing it manually helps understand the underlying headers.",
            "Use your browser's developer tools (Network tab) to inspect the request and response headers, especially the `Origin` and `Access-Control-*` headers."
          ],
          "tags": [
            "CORS",
            "Node.js",
            "Express.js",
            "Security",
            "HTTP",
            "Backend",
            "Frontend"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "Node.js Basics",
            "Express.js Fundamentals",
            "HTTP Headers"
          ],
          "complexity": 6,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Same-Origin Policy",
            "Preflight Request",
            "HTTP Methods",
            "Middleware"
          ]
        },
        {
          "id": "task_react_hoc_withlogger",
          "title": "Implement a Higher-Order Component for Logging",
          "description": "\nCreate a React Higher-Order Component (HOC) named `withLogger` that logs component lifecycle events (mount, unmount, update) to the console. Apply this HOC to a simple functional component.\n\n**Requirements:**\n1.  **`withLogger` HOC:** Define a function `withLogger` that takes a `WrappedComponent` as an argument and returns a new functional component.\n2.  **Lifecycle Logging:** Inside the returned component, use `useEffect` hooks to log when the `WrappedComponent`:\n    *   Mounts (e.g., \"[Component Name] mounted\")\n    *   Updates (e.g., \"[Component Name] updated with props: ...\") - only if relevant props change.\n    *   Unmounts (e.g., \"[Component Name] unmounted\")\n3.  **Display Name:** Ensure the returned HOC component has a descriptive `displayName` for easier debugging in React DevTools.\n4.  **Application:** Apply `withLogger` to a simple functional component that receives and displays some props (e.g., a counter or a user detail component).\n5.  **Testing:** Demonstrate the logging by rendering the enhanced component, updating its props, and unmounting it (e.g., conditionally rendering or navigating away).\n",
          "difficulty": "medium",
          "startingCode": "import React, { useEffect, useState } from 'react';\n\n// TODO: Define the withLogger HOC here\n\n\n// Example Wrapped Component\nfunction Counter({ initialValue, incrementBy }) {\n  const [count, setCount] = useState(initialValue);\n\n  const handleClick = () => {\n    setCount(prevCount => prevCount + incrementBy);\n  };\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={handleClick}>Increment</button>\n      <p>Increment By: {incrementBy}</p>\n    </div>\n  );\n}\n\n// TODO: Apply the HOC to the Counter component and export it\n// const EnhancedCounter = withLogger(Counter);\n// export default EnhancedCounter;\n\n// App.js (for testing):\n/*\nimport React, { useState } from 'react';\n// import EnhancedCounter from './EnhancedCounter'; // Assuming component is in EnhancedCounter.js\n\nfunction App() {\n  const [showCounter, setShowCounter] = useState(true);\n  const [incrementStep, setIncrementStep] = useState(1);\n\n  return (\n    <div>\n      <h1>HOC Logger Test</h1>\n      <button onClick={() => setIncrementStep(prev => prev + 1)}>Change Increment Step</button>\n      <button onClick={() => setShowCounter(!showCounter)}>Toggle Counter</button>\n      {showCounter && <EnhancedCounter initialValue={0} incrementBy={incrementStep} />}\n    </div>\n  );\n}\n\nexport default App;\n*/\n",
          "solutionCode": "import React, { useEffect, useState, useRef } from 'react';\n\n// Helper to get component's display name for HOC\nfunction getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n\n// Define the withLogger HOC\nfunction withLogger(WrappedComponent) {\n  const WithLoggerComponent = (props) => {\n    const initialRender = useRef(true);\n    const prevProps = useRef({});\n\n    // Log on Mount\n    useEffect(() => {\n      console.log(`[HOC Logger] ${getDisplayName(WrappedComponent)} mounted.`);\n      initialRender.current = false;\n\n      // Log on Unmount\n      return () => {\n        console.log(`[HOC Logger] ${getDisplayName(WrappedComponent)} unmounted.`);\n      };\n    }, []); // Empty dependency array means this runs once on mount and cleanup on unmount\n\n    // Log on Update (only if props change significantly)\n    useEffect(() => {\n      if (!initialRender.current) { // Prevent logging on initial mount as an update\n        const changedProps = Object.keys(props).filter(\n          (key) => props[key] !== prevProps.current[key]\n        );\n        if (changedProps.length > 0) {\n          console.log(\n            `[HOC Logger] ${getDisplayName(WrappedComponent)} updated. Changed props:`, \n            changedProps.reduce((acc, key) => ({ ...acc, [key]: props[key] }), {})\n          );\n        } else {\n          console.log(`[HOC Logger] ${getDisplayName(WrappedComponent)} updated (no prop changes).`);\n        }\n      }\n      prevProps.current = props;\n    }); // No dependency array: runs on every render after initial\n\n    return <WrappedComponent {...props} />;\n  };\n\n  WithLoggerComponent.displayName = `withLogger(${getDisplayName(WrappedComponent)})`;\n  return WithLoggerComponent;\n}\n\n// Example Wrapped Component\nfunction Counter({ initialValue, incrementBy }) {\n  const [count, setCount] = useState(initialValue);\n\n  const handleClick = () => {\n    setCount(prevCount => prevCount + incrementBy);\n  };\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={handleClick}>Increment</button>\n      <p>Increment By: {incrementBy}</p>\n    </div>\n  );\n}\n\n// Apply the HOC to the Counter component\nconst EnhancedCounter = withLogger(Counter);\nexport default EnhancedCounter;\n\n// App.js (for testing):\n/*\nimport React, { useState } from 'react';\nimport EnhancedCounter from './EnhancedCounter'; // Adjust path as needed\n\nfunction App() {\n  const [showCounter, setShowCounter] = useState(true);\n  const [incrementStep, setIncrementStep] = useState(1);\n\n  return (\n    <div>\n      <h1>HOC Logger Test</h1>\n      <button onClick={() => setIncrementStep(prev => prev + 1)}>Change Increment Step (Current: {incrementStep})</button>\n      <button onClick={() => setShowCounter(!showCounter)}>Toggle Counter (Current: {showCounter ? 'Visible' : 'Hidden'})</button>\n      {showCounter && <EnhancedCounter initialValue={0} incrementBy={incrementStep} />}\n    </div>\n  );\n}\n\nexport default App;\n*/\n",
          "testCases": [
            "1. Component Mount: Render `EnhancedCounter`. Expect a \"[Counter] mounted\" log in the console.",
            "2. Prop Update: Click 'Change Increment Step' button. Expect a \"[Counter] updated. Changed props: { incrementBy: X }\" log.",
            "3. Internal State Change (no prop change): Click 'Increment' button on the counter. The HOC should log an update, but ideally specify 'no prop changes' if only internal state caused a re-render of the wrapped component (as implemented in the solution).",
            "4. Component Unmount: Click 'Toggle Counter' to hide it. Expect a \"[Counter] unmounted\" log.",
            "5. Re-mount: Click 'Toggle Counter' again to show it. Expect a new \"[Counter] mounted\" log.",
            "6. DevTools Display Name: Inspect the component tree in React DevTools. The `EnhancedCounter` component should appear as `withLogger(Counter)`."
          ],
          "hints": [
            "Remember that `useEffect` with an empty dependency array (`[]`) runs only on mount and cleans up on unmount.",
            "For logging updates, an `useEffect` without a dependency array will run on every render. You might want to use `useRef` to store previous props and compare them to only log when actual props *change*.",
            "The `displayName` property is a static property on the component returned by the HOC, e.g., `WithLoggerComponent.displayName = `withLogger(${getDisplayName(WrappedComponent)})`;`",
            "To easily get the wrapped component's name for logging, you can define a helper function like `getDisplayName` as shown in the solution."
          ],
          "tags": [
            "React",
            "HOC",
            "Component Lifecycle",
            "Debugging",
            "JavaScript",
            "Front-end"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "React Functional Components",
            "React Hooks (useState, useEffect, useRef)",
            "JavaScript Closures"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Component Composition",
            "Debugging Tools",
            "Side Effects in React"
          ]
        },
        {
          "id": "task_react_hoc_withformvalidation",
          "title": "Build a `withFormValidation` HOC",
          "description": "\nDevelop a Higher-Order Component (HOC) called `withFormValidation` that adds basic form validation logic to any component that renders a form and handles its submission. The HOC should manage validation state and pass validation-related props to the wrapped component.\n\n**Requirements:**\n1.  **`withFormValidation` HOC:** Create an HOC that takes a `WrappedComponent` (expected to be a form component) and returns an enhanced component.\n2.  **Validation Logic:** The HOC should maintain validation errors (e.g., an object `{ fieldName: 'Error message' }`). For simplicity, assume two fields: `username` (required) and `email` (required, valid format).\n3.  **Passed Props:** The HOC should pass the following props to `WrappedComponent`:\n    *   `errors`: An object containing validation error messages.\n    *   `validateField`: A function `(fieldName, value)` to trigger validation for a specific field.\n    *   `validateForm`: A function `()` to trigger validation for the entire form and return `true` if valid, `false` otherwise.\n    *   `clearErrors`: A function `()` to clear all validation errors.\n4.  **Wrapped Component:** Create a simple `ContactForm` component that uses input fields for `username` and `email` and a submit button. It should display error messages using the `errors` prop and call `validateField` on blur, and `validateForm` on submit.\n5.  **State Management:** The `ContactForm` should manage its own input field values (e.g., using `useState`).\n6.  **Full Submission Flow:** When the form is submitted, `validateForm` should be called. If valid, log a success message; otherwise, log validation errors.\n",
          "difficulty": "hard",
          "startingCode": "import React, { useState } from 'react';\n\n// TODO: Implement the withFormValidation HOC here\n\n\n// ContactForm Component (to be wrapped by HOC)\nfunction ContactForm({ errors, validateField, validateForm, clearErrors }) {\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    validateField(name, value); // Validate on blur\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    clearErrors(); // Clear errors before re-validating whole form\n    const isValid = validateForm(); // Validate entire form\n    if (isValid) {\n      console.log('Form is valid! Submitting:', formData);\n      alert('Form submitted successfully!');\n      // In a real app, you'd send data to server here\n    } else {\n      console.log('Form has errors:', errors);\n      alert('Please fix the errors in the form.');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"username\">Username:</label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          name=\"username\"\n          value={formData.username}\n          onChange={handleChange}\n          onBlur={handleBlur}\n        />\n        {errors.username && <p style={{ color: 'red' }}>{errors.username}</p>}\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          onBlur={handleBlur}\n        />\n        {errors.email && <p style={{ color: 'red' }}>{errors.email}</p>}\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\n// TODO: Apply the HOC and export\n// const EnhancedContactForm = withFormValidation(ContactForm);\n// export default EnhancedContactForm;\n\n// App.js (for testing):\n/*\nimport React from 'react';\n// import EnhancedContactForm from './EnhancedContactForm'; // Adjust path\n\nfunction App() {\n  return (\n    <div>\n      <h1>Contact Form</h1>\n      <EnhancedContactForm />\n    </div>\n  );\n}\n\nexport default App;\n*/\n",
          "solutionCode": "import React, { useState } from 'react';\n\n// Helper to get component's display name for HOC\nfunction getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n\n// Implement the withFormValidation HOC\nfunction withFormValidation(WrappedComponent) {\n  const WithFormValidationComponent = (props) => {\n    const [errors, setErrors] = useState({});\n\n    const validateField = (fieldName, value) => {\n      let error = '';\n      switch (fieldName) {\n        case 'username':\n          if (!value) {\n            error = 'Username is required.';\n          }\n          break;\n        case 'email':\n          if (!value) {\n            error = 'Email is required.';\n          } else if (!/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/.test(value)) {\n            error = 'Invalid email format.';\n          }\n          break;\n        default:\n          break;\n      }\n      setErrors(prevErrors => ({\n        ...prevErrors,\n        [fieldName]: error,\n      }));\n      return !error; // Return true if no error, false otherwise\n    };\n\n    const validateForm = (formDataToCheck) => {\n      const newErrors = {};\n      let isValid = true;\n\n      // For simplicity, validate all fields that are expected to be in the form\n      // In a real app, formDataToCheck would be passed from the wrapped component.\n      // Here, we assume a simple structure or access values from context/props if needed.\n      // For this example, we'll re-validate based on a dummy structure or expected fields.\n      \n      // Re-validate based on fields we know the form has\n      if (!formDataToCheck.username) {\n        newErrors.username = 'Username is required.';\n        isValid = false;\n      }\n      if (!formDataToCheck.email) {\n        newErrors.email = 'Email is required.';\n        isValid = false;\n      } else if (!/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/.test(formDataToCheck.email)) {\n        newErrors.email = 'Invalid email format.';\n        isValid = false;\n      }\n\n      setErrors(newErrors);\n      return isValid;\n    };\n    \n    // Clear all errors\n    const clearErrors = () => {\n      setErrors({});\n    };\n\n    return (\n      <WrappedComponent\n        {...props}\n        errors={errors}\n        validateField={validateField}\n        validateForm={(data) => validateForm(data || props.formData)} // Pass data from wrapped component's state if available\n        clearErrors={clearErrors}\n      />\n    );\n  };\n\n  WithFormValidationComponent.displayName = `withFormValidation(${getDisplayName(WrappedComponent)})`;\n  return WithFormValidationComponent;\n}\n\n// ContactForm Component (to be wrapped by HOC)\nfunction ContactForm({ errors, validateField, validateForm, clearErrors }) {\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Optional: Validate on change too, or just on blur\n    // validateField(name, value);\n  };\n\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    validateField(name, value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    clearErrors(); // Clear errors before re-validating whole form\n    const isValid = validateForm(formData); // Pass current form data to HOC for full validation\n    if (isValid) {\n      console.log('Form is valid! Submitting:', formData);\n      alert('Form submitted successfully!');\n      // In a real app, you'd send data to server here\n    } else {\n      console.log('Form has errors:', errors);\n      alert('Please fix the errors in the form.');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label htmlFor=\"username\">Username:</label>\n        <input\n          type=\"text\"\n          id=\"username\"\n          name=\"username\"\n          value={formData.username}\n          onChange={handleChange}\n          onBlur={handleBlur}\n        />\n        {errors.username && <p style={{ color: 'red' }}>{errors.username}</p>}\n      </div>\n      <div>\n        <label htmlFor=\"email\">Email:</label>\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          value={formData.email}\n          onChange={handleChange}\n          onBlur={handleBlur}\n        />\n        {errors.email && <p style={{ color: 'red' }}>{errors.email}</p>}\n      </div>\n      <button type=\"submit\">Submit</button>\n    </form>\n  );\n}\n\n// Apply the HOC and export\nconst EnhancedContactForm = withFormValidation(ContactForm);\nexport default EnhancedContactForm;\n\n// App.js (for testing):\n/*\nimport React from 'react';\nimport EnhancedContactForm from './EnhancedContactForm'; // Adjust path\n\nfunction App() {\n  return (\n    <div>\n      <h1>Contact Form</h1>\n      <EnhancedContactForm />\n    </div>\n  );\n}\n\nexport default App;\n*/\n",
          "testCases": [
            "1. Initial Load: Form should display with no errors.",
            "2. Empty Submission: Click 'Submit' without entering any data. Expect error messages for both 'username' and 'email'.",
            "3. Individual Field Validation (Blur): Type something in 'username', then click outside. If left empty, expect 'Username is required.' error. If valid, error should clear.",
            "4. Invalid Email Format: Enter text like 'abc' into 'email' field and blur. Expect 'Invalid email format.' error.",
            "5. Correct Email Format: Enter a valid email (e.g., 'test@example.com') and blur. Error for email should clear.",
            "6. Valid Submission: Fill both fields correctly. Click 'Submit'. Expect a success alert and 'Form is valid!' in console.",
            "7. Errors Clear on Re-submit Attempt: If errors are present, try to submit again. Ensure old errors are cleared before new validation results are shown (e.g., by making a valid change and re-submitting)."
          ],
          "hints": [
            "The HOC should manage the `errors` state. The `validateField` and `validateForm` functions will modify this state.",
            "Remember to pass `formData` (the current state of the form fields from the `ContactForm` component) to the `validateForm` function in the HOC when submitting, so the HOC can access all field values for overall validation.",
            "For email validation, a simple regex like `/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/` can be used. (Note: for robust email validation, server-side validation is always best, but a client-side regex is fine for this task).",
            "Ensure `clearErrors` is called by the `ContactForm` before a full form submission to reset the error state.",
            "The `validateField` function in the HOC should update *only* the error for the specific field, without clearing other field errors."
          ],
          "tags": [
            "React",
            "HOC",
            "Form Validation",
            "State Management",
            "Code Reusability",
            "Frontend"
          ],
          "timeEstimate": 90,
          "prerequisites": [
            "React Functional Components",
            "React Hooks (useState)",
            "JavaScript Form Handling"
          ],
          "complexity": 8,
          "interviewRelevance": 8,
          "learningPath": "advanced",
          "relatedConcepts": [
            "Controlled Components",
            "Higher-Order Functions",
            "Input Handling",
            "Client-side Validation"
          ]
        }
      ]
    }
  },
  {
    "id": "6f16e5a4-298a-442c-bdad-381eb23e875d",
    "startLine": 17400,
    "endLine": 17499,
    "processedDate": "2025-06-17T15:57:30.364Z",
    "content": {
      "logicalBlockInfo": {
        "suggestedEndLine": -1
      },
      "theory": [
        {
          "id": "theory_react_purecomponent_memo",
          "title": "React.PureComponent and React.memo for Performance Optimization",
          "content": "React.PureComponent is a class component that provides a performance optimization by implementing a shallow comparison of props and state within its `shouldComponentUpdate` lifecycle method. This prevents unnecessary re-renders of the component when its props or state have not effectively changed.\n\nFor functional components, the equivalent optimization is achieved using `React.memo`.\n\n## Key Aspects of PureComponent/React.memo\n\n1.  **Automatic `shouldComponentUpdate` (Shallow Comparison)**:\n    *   `PureComponent` automatically implements `shouldComponentUpdate` and performs a shallow comparison of the new props and state with the previous ones.\n    *   `React.memo` is a Higher-Order Component (HOC) that memoizes a functional component. It re-renders the component only if its props have changed by a shallow comparison.\n    *   If the shallow comparison determines that props and state are identical, `shouldComponentUpdate` (or `React.memo`'s internal check) returns `false`, skipping the `render` method and thus preventing a re-render.\n\n2.  **Performance Optimization**:\n    *   The primary benefit is preventing unnecessary re-renders, especially in large component trees or when parent components frequently re-render but child components' props/state are stable.\n    *   This reduces the computational cost of rendering, leading to a smoother user experience.\n\n3.  **Limitations (Shallow Comparison)**:\n    *   **Complex Nested Objects/Arrays**: Since the comparison is shallow, changes within nested objects or arrays are *not* detected. If a prop is an object and its properties change (but the object reference itself remains the same), `PureComponent`/`React.memo` will not re-render. This can lead to bugs where the UI does not update.\n    *   **Function Props**: Functions passed as props will often cause re-renders if they are defined inline within the parent component's render method, as a new function reference is created on each parent render. To avoid this, functions should be memoized using `useCallback` in functional components or bound once in class components' constructors.\n\n## When to use them?\n*   When a component renders frequently.\n*   When the component's render output is the same given the same props and state.\n*   When the component's props and state are simple (primitive values, or objects/arrays whose references change when their content changes).\n\nAvoid using them if a component's render logic is very simple and re-rendering is cheap, or if you explicitly need a deep comparison or complex custom comparison logic (in which case you'd implement your own `shouldComponentUpdate` or pass a custom comparison function to `React.memo`).",
          "examples": [
            {
              "id": "example_purecomponent_1",
              "title": "UserProfile with PureComponent",
              "code": "import React, { PureComponent } from 'react';\n\nclass UserProfile extends PureComponent {\n  render() {\n    console.log('UserProfile (PureComponent) rendered');\n    const { name, email, role } = this.props;\n    \n    return (\n      <div className=\"user-profile\">\n        <h2>{name}</h2>\n        <p>Email: {email}</p>\n        <p>Role: {role}</p>\n      </div>\n    );\n  }\n}\n\n// Example Parent Component demonstrating usage\nclass App extends React.Component {\n  state = {\n    userName: 'John Doe',\n    userEmail: 'john.doe@example.com',\n    userRole: 'Developer',\n    count: 0\n  };\n\n  componentDidMount() {\n    setInterval(() => {\n      // This will cause App to re-render, but UserProfile will only re-render\n      // if its props (name, email, role) actually change (shallowly).\n      // If we just update 'count', UserProfile will not re-render.\n      this.setState(prevState => ({\n        count: prevState.count + 1\n      }));\n    }, 1000);\n  }\n\n  render() {\n    return (\n      <div>\n        <h1>App Counter: {this.state.count}</h1>\n        <UserProfile\n          name={this.state.userName}\n          email={this.state.userEmail}\n          role={this.state.userRole}\n        />\n      </div>\n    );\n  }\n}\n",
              "explanation": "This example demonstrates `PureComponent`. The `App` component's `count` state updates every second, causing `App` to re-render. However, because `UserProfile` is a `PureComponent` and its `name`, `email`, and `role` props are not changing, `UserProfile`'s `render` method is not called, preventing unnecessary re-renders. If `userName` were to change, `UserProfile` would re-render.",
              "language": "typescript"
            },
            {
              "id": "example_react_memo_1",
              "title": "UserProfile with React.memo",
              "code": "import React, { memo } from 'react';\n\n// Functional component\nconst UserProfileMemo = memo(function UserProfile({ name, email, role, preferences }) {\n  console.log('UserProfileMemo (React.memo) rendered');\n  return (\n    <div className=\"user-profile\">\n      <h2>{name}</h2>\n      <p>Email: {email}</p>\n      <p>Role: {role}</p>\n      <p>Preferences: {preferences.theme}</p>\n    </div>\n  );\n});\n\n// Example Parent Component demonstrating usage\nfunction AppMemo() {\n  const [count, setCount] = React.useState(0);\n  const [user, setUser] = React.useState({\n    name: 'Jane Doe',\n    email: 'jane.doe@example.com',\n    role: 'Designer'\n  });\n  const [preferences, setPreferences] = React.useState({ theme: 'dark', notifications: true });\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      // This causes AppMemo to re-render.\n      // UserProfileMemo will only re-render if 'user' or 'preferences' references change.\n      setCount(prevCount => prevCount + 1);\n\n      // Example: Changing a nested property without changing object reference\n      // This WILL NOT cause UserProfileMemo to re-render because of shallow comparison.\n      // setPreferences(prev => { \n      //   prev.notifications = !prev.notifications; \n      //   return prev; \n      // });\n\n      // Correct way to update nested object and trigger re-render with React.memo\n      // setPreferences(prev => ({ ...prev, notifications: !prev.notifications }));\n\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div>\n      <h1>App Memo Counter: {count}</h1>\n      <UserProfileMemo\n        name={user.name}\n        email={user.email}\n        role={user.role}\n        preferences={preferences}\n      />\n      <button onClick={() => setUser(prev => ({ ...prev, name: 'Jane Smith' }))}>Change Name</button>\n      <button onClick={() => setPreferences(prev => ({ ...prev, theme: prev.theme === 'dark' ? 'light' : 'dark' }))}>Toggle Theme</button>\n    </div>\n  );\n}",
              "explanation": "This example uses `React.memo` for a functional component. Similar to `PureComponent`, `UserProfileMemo` will only re-render if its `name`, `email`, `role`, or `preferences` props (by reference) change. It also highlights the limitation: if `preferences.notifications` is modified without creating a new `preferences` object, `UserProfileMemo` will not re-render because the shallow comparison sees the same object reference for `preferences`.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_purecomponent_1",
            "question_purecomponent_2",
            "question_purecomponent_3",
            "question_react_memo_1",
            "question_react_memo_2",
            "question_purecomponent_4"
          ],
          "relatedTasks": [
            "task_optimize_component_memo",
            "task_implement_loading_hoc"
          ],
          "tags": [
            "React",
            "Performance",
            "Optimization",
            "PureComponent",
            "React.memo",
            "shouldComponentUpdate",
            "Shallow Comparison",
            "HOC"
          ],
          "technology": "React",
          "prerequisites": [
            "react_components",
            "react_state_props",
            "react_lifecycle_methods",
            "react_hooks"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "requiredFor": [
            "advanced_react_optimization",
            "custom_hooks_patterns",
            "large_scale_react_apps"
          ]
        },
        {
          "id": "theory_redux_connect",
          "title": "Redux `connect` Function and State Management",
          "content": "The `connect` function from `react-redux` is a Higher-Order Component (HOC) that facilitates connecting React components to the Redux store. It acts as a bridge, allowing components to access state from the Redux store and dispatch actions without directly interacting with the store API (`store.getState()`, `store.dispatch()`, `store.subscribe()`).\n\nThis abstraction improves component reusability, testability, and adherence to the Redux unidirectional data flow.\n\n## Key Aspects of `connect`\n\n1.  **Core Functionality**:\n    *   **Subscription**: `connect` subscribes the wrapped component to the Redux store. When an action is dispatched and the store's state changes, `connect`'s internal logic re-evaluates `mapStateToProps` and `mapDispatchToProps`.\n    *   **Prop Injection**: It injects selected parts of the Redux state and action creators (or functions that dispatch actions) as props into the connected React component.\n    *   **Re-rendering**: It triggers a re-render of the connected component only when the data it's interested in (defined by `mapStateToProps`) has shallowly changed.\n\n2.  **Main Parameters**:\n    *   `mapStateToProps(state, ownProps)`: This function is used to select the parts of the Redux store's state that the component needs. It receives the entire Redux `state` as its first argument and the component's own props (`ownProps`) as the second. It should return an object where keys are prop names and values are the corresponding state slices.\n        *   *Return value*: An object with data props that will be merged into the component's props.\n        *   *Optimization*: If `mapStateToProps` returns the same object (shallowly equal) as the previous call, the component will not re-render.\n    *   `mapDispatchToProps(dispatch, ownProps)`: This function is used to bind action creators to the `dispatch` function, making them available as props to the component. It receives the Redux `dispatch` function as its first argument and `ownProps` as the second. It can return an object of functions (action creators wrapped in `dispatch`) or a function that returns such an object.\n        *   *Return value*: An object with function props that dispatch actions.\n        *   *Common patterns*: Passing an object of action creators directly to `connect` (e.g., `{ fetchUsers, deleteUser }`) is a common shorthand provided by `react-redux`, which internally wraps them with `dispatch`.\n\n3.  **Performance Optimization**:\n    *   `connect` performs a shallow equality check on the props returned by `mapStateToProps` to determine if a re-render is necessary. If the new state props are shallowly equal to the old ones, the component's `render` method is not called.\n    *   `connect` can also be configured with a `areStatesEqual` or `areOwnPropsEqual` (via the `mergeProps` or `options` arguments) for more fine-grained control over re-render logic.\n\n## How it integrates with React components:\n`connect` is a higher-order component. It takes two functions (`mapStateToProps`, `mapDispatchToProps`) and returns another function. This returned function then takes your React component and returns a new, 'connected' component.\n\n```javascript\nconnect(mapStateToProps, mapDispatchToProps)(YourComponent);\n```\n\n**Note**: While `connect` is fundamental to Redux in class components, `react-redux` also provides hooks (`useSelector`, `useDispatch`, `useStore`) for functional components, which are often preferred in modern React applications for their simplicity and flexibility. However, understanding `connect` remains crucial as many existing Redux applications use it.",
          "examples": [
            {
              "id": "example_redux_connect_1",
              "title": "Connecting UserList to Redux Store",
              "code": "import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\n\n// Dummy actions and reducer for demonstration\nconst initialState = {\n  users: [],\n  isLoading: false,\n  error: null\n};\n\nconst userReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'FETCH_USERS_START':\n      return { ...state, isLoading: true, error: null };\n    case 'FETCH_USERS_SUCCESS':\n      return { ...state, isLoading: false, users: action.payload };\n    case 'FETCH_USERS_FAILURE':\n      return { ...state, isLoading: false, error: action.payload };\n    case 'DELETE_USER_SUCCESS':\n      return { ...state, users: state.users.filter(user => user.id !== action.payload) };\n    default:\n      return state;\n  }\n};\n\nconst fetchUsers = () => async dispatch => {\n  dispatch({ type: 'FETCH_USERS_START' });\n  try {\n    // Simulate API call\n    const response = await new Promise(resolve => setTimeout(() => {\n      resolve([\n        { id: 1, name: 'Alice' },\n        { id: 2, name: 'Bob' },\n        { id: 3, name: 'Charlie' }\n      ]);\n    }, 1000));\n    dispatch({ type: 'FETCH_USERS_SUCCESS', payload: response });\n  } catch (error) {\n    dispatch({ type: 'FETCH_USERS_FAILURE', payload: error.message });\n  }\n};\n\nconst deleteUser = (id) => ({ type: 'DELETE_USER_SUCCESS', payload: id });\n\n\n// UserList component (dumb component, receives props from Redux)\nfunction UserList({ users, isLoading, error, fetchUsers, deleteUser }) {\n  useEffect(() => {\n    // Dispatch fetchUsers action when component mounts\n    fetchUsers();\n  }, [fetchUsers]); // fetchUsers is memoized by connect, so it's stable\n  \n  if (isLoading) {\n    return <div>Loading users...</div>;\n  }\n\n  if (error) {\n    return <div style={{ color: 'red' }}>Error: {error}</div>;\n  }\n\n  return (\n    <div>\n      <h2>User List</h2>\n      <ul>\n        {users.map(user => (\n          <li key={user.id}>\n            {user.name} \n            <button onClick={() => deleteUser(user.id)} style={{ marginLeft: '10px' }}>Delete</button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n// mapStateToProps: defines what state from Redux store the component needs as props\nconst mapStateToProps = state => ({\n  users: state.users,\n  isLoading: state.isLoading,\n  error: state.error\n});\n\n// mapDispatchToProps: defines what action creators the component can dispatch as props\n// Can be an object of action creators directly\nconst mapDispatchToProps = {\n  fetchUsers, \n  deleteUser\n};\n\n// Connect the UserList component to the Redux store\nconst ConnectedUserList = connect(mapStateToProps, mapDispatchToProps)(UserList);\n\n// For a full app, you would typically set up your store like this:\n// import { createStore, applyMiddleware } from 'redux';\n// import { thunk } from 'redux-thunk'; // If using async actions\n// const store = createStore(userReducer, applyMiddleware(thunk));\n// <Provider store={store}><ConnectedUserList /></Provider>\n\nexport default ConnectedUserList;\n",
              "explanation": "This example demonstrates how `connect` works. `mapStateToProps` maps `users`, `isLoading`, and `error` from the Redux state to props of `UserList`. `mapDispatchToProps` (provided as an object shorthand) binds `fetchUsers` and `deleteUser` action creators to `dispatch`, making them available as props. The `useEffect` hook in `UserList` calls `fetchUsers` on mount. The component then renders based on `isLoading` and the `users` array, showcasing data fetching and updates controlled by Redux.",
              "language": "typescript"
            }
          ],
          "relatedQuestions": [
            "question_redux_connect_1",
            "question_redux_connect_2",
            "question_redux_connect_3",
            "question_redux_connect_4",
            "question_redux_connect_5",
            "question_redux_connect_6"
          ],
          "relatedTasks": [
            "task_connect_component_to_redux",
            "task_create_redux_user_dashboard"
          ],
          "tags": [
            "Redux",
            "State Management",
            "connect",
            "Higher-Order Component",
            "mapStateToProps",
            "mapDispatchToProps",
            "React-Redux",
            "Data Flow"
          ],
          "technology": "React, Redux",
          "prerequisites": [
            "react_functional_components",
            "react_class_components",
            "redux_core_concepts",
            "redux_actions_reducers",
            "redux_store_setup"
          ],
          "complexity": 7,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "requiredFor": [
            "large_scale_state_management",
            "complex_data_flow_architectures",
            "enterprise_react_applications"
          ]
        }
      ],
      "questions": [
        {
          "id": "question_purecomponent_1",
          "topic": "React.PureComponent",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the primary benefit of using `React.PureComponent`?",
          "answer": "It optimizes performance by preventing unnecessary re-renders of class components.",
          "options": [],
          "analysisPoints": [
            "Focuses on performance.",
            "Specifically for class components.",
            "Mechanism is preventing re-renders."
          ],
          "keyConcepts": [
            "PureComponent",
            "Performance Optimization",
            "Re-rendering"
          ],
          "evaluationCriteria": [
            "Direct recall of core benefit"
          ],
          "example": "",
          "tags": [
            "React",
            "PureComponent",
            "Performance"
          ],
          "prerequisites": [
            "react_class_components"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_purecomponent_2",
          "topic": "React.PureComponent",
          "level": "medium",
          "type": "mcq",
          "question": "Which lifecycle method does `React.PureComponent` automatically implement to optimize rendering?",
          "answer": "`shouldComponentUpdate`",
          "options": [
            "`componentDidMount`",
            "`render`",
            "`shouldComponentUpdate`",
            "`componentDidUpdate`"
          ],
          "analysisPoints": [
            "Understanding of React lifecycle methods.",
            "Specific knowledge of PureComponent's internal mechanism.",
            "Distinguishing between methods that trigger or prevent rendering."
          ],
          "keyConcepts": [
            "PureComponent",
            "shouldComponentUpdate",
            "Lifecycle Methods",
            "Performance"
          ],
          "evaluationCriteria": [
            "Knowledge of React lifecycle.",
            "Understanding of PureComponent's optimization technique."
          ],
          "example": "PureComponent's optimization lies in its `shouldComponentUpdate` implementation, which performs a shallow comparison of props and state to decide if a re-render is necessary. If the comparison returns `false`, `render()` is skipped.",
          "tags": [
            "React",
            "PureComponent",
            "Lifecycle",
            "Optimization"
          ],
          "prerequisites": [
            "react_lifecycle_methods"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_purecomponent_3",
          "topic": "React.PureComponent",
          "level": "medium",
          "type": "open",
          "question": "Explain the 'shallow comparison' performed by `React.PureComponent` and `React.memo`, and provide a scenario where this limitation might lead to unexpected behavior.",
          "answer": "The 'shallow comparison' performed by `React.PureComponent` and `React.memo` means that they only compare the references of props and state values, not their deep contents. For primitive values (strings, numbers, booleans), this is equivalent to a value comparison. For non-primitive values like objects and arrays, only the memory address (reference) is checked.\n\n**Scenario for unexpected behavior:**\nConsider a `UserProfile` component using `React.memo` that receives a `user` object as a prop:\n```jsx\nconst UserProfile = React.memo(({ user }) => {\n  console.log('UserProfile rendered');\n  return (\n    <div>\n      <p>Name: {user.name}</p>\n      <p>Age: {user.age}</p>\n    </div>\n  );\n});\n\nfunction ParentComponent() {\n  const [currentUser, setCurrentUser] = React.useState({ name: 'Alice', age: 30 });\n\n  const updateAge = () => {\n    // INCORRECT: Mutates the existing object\n    currentUser.age = 31; \n    setCurrentUser(currentUser); // This will NOT cause UserProfile to re-render\n                               // because the 'currentUser' object reference hasn't changed.\n\n    // CORRECT: Creates a new object reference\n    // setCurrentUser(prevUser => ({ ...prevUser, age: prevUser.age + 1 }));\n  };\n\n  return (\n    <div>\n      <UserProfile user={currentUser} />\n      <button onClick={updateAge}>Update User Age (Problematic)</button>\n    </div>\n  );\n}\n```\nIn this scenario, if `updateAge` directly mutates `currentUser.age` and then passes the *same object reference* back to `setCurrentUser`, `React.memo` (or `PureComponent`) will see that the `user` prop's reference is unchanged and will not trigger a re-render for `UserProfile`. Consequently, the `UserProfile` component will continue to display the old age, even though the underlying data has been modified. The solution is to always create new object/array references when their content changes, typically using spread syntax (`{...obj, ...}`, `[...arr, ...]`).",
          "options": [],
          "analysisPoints": [
            "Clearly defines shallow comparison.",
            "Differentiates between primitive and non-primitive comparison.",
            "Provides a concrete, understandable code example of the limitation.",
            "Explains why the limitation occurs (reference vs. value).",
            "Suggests the correct way to handle such updates."
          ],
          "keyConcepts": [
            "Shallow Comparison",
            "PureComponent",
            "React.memo",
            "Immutability",
            "State Mutation",
            "Object Reference"
          ],
          "evaluationCriteria": [
            "Accuracy of shallow comparison definition.",
            "Ability to identify and explain a common pitfall.",
            "Provision of a relevant code example.",
            "Understanding of immutable updates in React."
          ],
          "example": "",
          "tags": [
            "React",
            "Performance",
            "Optimization",
            "Shallow Copy",
            "Immutability",
            "Debugging"
          ],
          "prerequisites": [
            "react_state_props",
            "javascript_object_references"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_react_memo_1",
          "topic": "React.memo",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the functional component equivalent of `React.PureComponent`?",
          "answer": "`React.memo`",
          "options": [],
          "analysisPoints": [
            "Direct recall of the equivalent for functional components."
          ],
          "keyConcepts": [
            "React.memo",
            "PureComponent",
            "Functional Components"
          ],
          "evaluationCriteria": [
            "Basic knowledge of React component types and optimization."
          ],
          "example": "",
          "tags": [
            "React",
            "React.memo",
            "Functional Components"
          ],
          "prerequisites": [
            "react_functional_components"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_react_memo_2",
          "topic": "React.memo",
          "level": "medium",
          "type": "mcq",
          "question": "Given the following functional component, how would you optimize `MyComponent` to prevent unnecessary re-renders if its props (`data` and `onClick`) are stable?",
          "answer": "Wrap `MyComponent` with `React.memo` and ensure `onClick` is memoized with `useCallback`.",
          "options": [
            "Wrap `MyComponent` with `React.PureComponent`.",
            "Add a `shouldComponentUpdate` method inside `MyComponent`.",
            "Wrap `MyComponent` with `React.memo` and ensure `onClick` is memoized with `useCallback`.",
            "No optimization is needed, React handles it automatically."
          ],
          "analysisPoints": [
            "Identifies `React.memo` for functional components.",
            "Recognizes the need for `useCallback` for function props to maintain reference stability.",
            "Distinguishes between class and functional component optimization methods.",
            "Correctly identifies that direct `shouldComponentUpdate` is not used in functional components."
          ],
          "keyConcepts": [
            "React.memo",
            "useCallback",
            "Functional Components",
            "Performance Optimization",
            "Prop Stability"
          ],
          "evaluationCriteria": [
            "Correct application of memoization for functional components.",
            "Understanding of stable function references.",
            "Differentiation between optimization strategies for different component types."
          ],
          "example": "```jsx\nimport React, { memo, useCallback } from 'react';\n\n// Original component\nconst MyComponent = ({ data, onClick }) => {\n  console.log('MyComponent rendered');\n  return (\n    <div onClick={onClick}>\n      Data: {data}\n    </div>\n  );\n};\n\n// Optimized component\nconst MemoizedMyComponent = memo(MyComponent);\n\n// Parent component usage\nfunction Parent() {\n  const [count, setCount] = React.useState(0);\n  const data = 'Some static data';\n\n  // Memoize the onClick handler to ensure its reference is stable\n  const handleClick = useCallback(() => {\n    console.log('Button clicked');\n  }, []); // Empty dependency array means the function reference is stable\n\n  React.useEffect(() => {\n    const interval = setInterval(() => setCount(prev => prev + 1), 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div>\n      <h1>Parent Count: {count}</h1>\n      {/* If data and handleClick references don't change, MemoizedMyComponent won't re-render */}\n      <MemoizedMyComponent data={data} onClick={handleClick} />\n    </div>\n  );\n}\n```\n",
          "tags": [
            "React",
            "React.memo",
            "useCallback",
            "Performance",
            "Optimization",
            "Functional Components"
          ],
          "prerequisites": [
            "react_hooks",
            "react_functional_components"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_purecomponent_4",
          "topic": "React PureComponent vs Component",
          "level": "hard",
          "type": "open",
          "question": "Under what specific conditions might `React.PureComponent` (or `React.memo`) lead to bugs or performance regressions instead of improvements? How can these issues be mitigated?",
          "answer": "`React.PureComponent` and `React.memo` perform shallow comparisons of props and state. While this is often an optimization, it can lead to bugs or performance regressions under specific conditions:\n\n1.  **Mutated Objects/Arrays as Props/State**: If an object or array prop/state is mutated directly (e.g., `this.state.items.push(newItem)`) instead of being updated immutably (e.g., `this.setState({ items: [...this.state.items, newItem] })`), `PureComponent` or `React.memo` will not detect the change because the reference remains the same. This leads to stale UI where the component doesn't re-render despite its data changing.\n    *   **Mitigation**: Always update state and props immutably. Use spread syntax (`...`), `Object.assign`, or immutable libraries like Immer.\n\n2.  **Unstable Function Props**: If functions are passed as props and are defined inline within the parent component's `render` method (or functional component body), a new function instance is created on every parent re-render. `PureComponent`/`React.memo` will see a new reference for the function prop, causing the child component to re-render unnecessarily, negating the optimization.\n    *   **Mitigation**: For class components, bind methods once in the constructor or use arrow functions as class properties. For functional components, use `useCallback` to memoize function definitions and ensure their references are stable across renders.\n\n3.  **Complex Data Structures Requiring Deep Comparison**: If a component frequently receives deeply nested objects or arrays where changes only occur deep within the structure, and a shallow comparison is insufficient, `PureComponent`/`React.memo` will fail to re-render when needed (bug) or might perform worse if you manually add a deep comparison (performance regression).\n    *   **Mitigation**: For specific cases requiring deep comparison, you can provide a custom comparison function to `React.memo` as a second argument (e.g., `React.memo(Component, (prevProps, nextProps) => deepEqual(prevProps, nextProps))`). However, deep comparisons can be computationally expensive and may offset the performance gain. Often, it's better to restructure state or normalize data to avoid deeply nested mutable objects.\n\n4.  **Overhead for Trivial Components**: For very small components with simple render logic that don't receive complex props and re-render infrequently, the overhead of `PureComponent`/`React.memo`'s shallow comparison might outweigh the benefits. In such cases, a regular `Component` or functional component is often more performant or equally performant with less complexity.\n    *   **Mitigation**: Profile your application (`React.Profiler`) to identify true performance bottlenecks. Don't prematurely optimize; apply `PureComponent`/`React.memo` only where profiling indicates a benefit.\n",
          "options": [],
          "analysisPoints": [
            "Comprehensive coverage of potential pitfalls.",
            "Clear distinction between bugs and performance regressions.",
            "Specific examples for each condition (mutation, unstable functions, deep data).",
            "Actionable mitigation strategies for each issue.",
            "Discussion of when not to use optimization."
          ],
          "keyConcepts": [
            "PureComponent",
            "React.memo",
            "Shallow Comparison",
            "Immutability",
            "Function References",
            "useCallback",
            "Deep Comparison",
            "Performance Regression",
            "Premature Optimization"
          ],
          "evaluationCriteria": [
            "Depth of understanding of `PureComponent` / `React.memo` mechanics.",
            "Ability to diagnose and articulate complex issues.",
            "Knowledge of best practices for state management and hooks.",
            "Awareness of performance profiling and optimization principles."
          ],
          "example": "",
          "tags": [
            "React",
            "Performance",
            "Optimization",
            "Debugging",
            "Best Practices",
            "Immutability",
            "Hooks"
          ],
          "prerequisites": [
            "react_performance_profiling",
            "react_hooks_advanced",
            "javascript_object_references"
          ],
          "complexity": 9,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_redux_connect_1",
          "topic": "Redux `connect`",
          "level": "easy",
          "type": "flashcard",
          "question": "What is the purpose of the `connect` function in `react-redux`?",
          "answer": "To connect a React component to the Redux store, allowing it to access state and dispatch actions.",
          "options": [],
          "analysisPoints": [
            "Identifies the role as a bridge.",
            "Mentions access to state.",
            "Mentions ability to dispatch actions."
          ],
          "keyConcepts": [
            "Redux Connect",
            "React-Redux",
            "Store Interaction"
          ],
          "evaluationCriteria": [
            "Basic understanding of `connect`'s role."
          ],
          "example": "",
          "tags": [
            "Redux",
            "connect",
            "React-Redux"
          ],
          "prerequisites": [
            "redux_introduction"
          ],
          "complexity": 3,
          "interviewFrequency": 7,
          "learningPath": "beginner"
        },
        {
          "id": "question_redux_connect_2",
          "topic": "Redux `connect`",
          "level": "medium",
          "type": "mcq",
          "question": "Which of the following best describes the role of `mapStateToProps` in the `connect` function?",
          "answer": "It's a function that selects data from the Redux store's state and maps it to the component's props.",
          "options": [
            "It's a function that defines actions to be dispatched by the component.",
            "It's a function that selects data from the Redux store's state and maps it to the component's props.",
            "It's an object containing action creators.",
            "It's a lifecycle method for fetching data from an API."
          ],
          "analysisPoints": [
            "Correctly identifies `mapStateToProps`'s purpose.",
            "Distinguishes it from `mapDispatchToProps`.",
            "Avoids common misconceptions (e.g., API fetching)."
          ],
          "keyConcepts": [
            "mapStateToProps",
            "Redux State",
            "Props",
            "connect"
          ],
          "evaluationCriteria": [
            "Accurate understanding of `mapStateToProps`.",
            "Ability to differentiate `mapStateToProps` from other Redux concepts."
          ],
          "example": "```typescript\n// Example mapStateToProps\nconst mapStateToProps = state => ({\n  // 'user' and 'cartItems' from Redux state become props of the component\n  currentUser: state.auth.user,\n  itemsInCart: state.cart.items.length\n});\n```",
          "tags": [
            "Redux",
            "connect",
            "mapStateToProps",
            "State Management"
          ],
          "prerequisites": [
            "redux_state_management"
          ],
          "complexity": 5,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_redux_connect_3",
          "topic": "Redux `connect`",
          "level": "medium",
          "type": "mcq",
          "question": "Consider the following `connect` usage:\n```jsx\nimport { connect } from 'react-redux';\nimport { addItem, removeItem } from './actions';\n\nfunction ShoppingCart({ items, total, addItem, removeItem }) {\n  // ... component logic\n}\n\nconst ConnectedShoppingCart = connect(\n  state => ({ items: state.cart.items, total: state.cart.total }),\n  { addItem, removeItem } // What is this second argument?\n)(ShoppingCart);\n```\nWhat does the second argument `{ addItem, removeItem }` represent in this `connect` call?",
          "answer": "An object shorthand for `mapDispatchToProps`, where action creators are automatically bound to `dispatch`.",
          "options": [
            "An object for defining component-specific state.",
            "An object shorthand for `mapDispatchToProps`, where action creators are automatically bound to `dispatch`.",
            "A configuration object for `connect` performance options.",
            "A list of selectors to be passed to `mapStateToProps`."
          ],
          "analysisPoints": [
            "Identifies the shorthand `mapDispatchToProps`.",
            "Understands that action creators are automatically bound.",
            "Distinguishes from other `connect` arguments or component state."
          ],
          "keyConcepts": [
            "mapDispatchToProps",
            "Action Creators",
            "Redux dispatch",
            "connect shorthand"
          ],
          "evaluationCriteria": [
            "Knowledge of `mapDispatchToProps` variations.",
            "Understanding of Redux action binding."
          ],
          "example": "When an object of action creators is passed as the second argument to `connect`, `react-redux` automatically wraps each action creator with `dispatch`. This means `addItem(payload)` inside the `ShoppingCart` component will automatically `dispatch(addItem(payload))`. It's equivalent to:\n```typescript\nconst mapDispatchToProps = dispatch => ({\n  addItem: (payload) => dispatch(addItem(payload)),\n  removeItem: (id) => dispatch(removeItem(id))\n});\n```",
          "tags": [
            "Redux",
            "connect",
            "mapDispatchToProps",
            "Action Creators",
            "Shorthand"
          ],
          "prerequisites": [
            "redux_actions",
            "redux_dispatch"
          ],
          "complexity": 6,
          "interviewFrequency": 8,
          "learningPath": "intermediate"
        },
        {
          "id": "question_redux_connect_4",
          "topic": "Redux `connect`",
          "level": "open",
          "type": "open",
          "question": "Describe the internal mechanism by which `connect` prevents unnecessary re-renders of the connected component. How does this relate to `mapStateToProps`?",
          "answer": "`connect` prevents unnecessary re-renders primarily through two mechanisms:\n\n1.  **Subscription and Selector Re-evaluation**: `connect` subscribes the wrapped component to the Redux store. When an action is dispatched and the store's state changes, `connect` re-runs `mapStateToProps` with the new state.\n\n2.  **Shallow Equality Check**: After `mapStateToProps` is re-evaluated, `connect` performs a shallow equality comparison between the *new object of props returned by `mapStateToProps`* and the *previous object of props returned by `mapStateToProps`*. If this shallow comparison determines that all properties in the returned object are strictly equal (`===`) to their previous values (meaning their references haven't changed), `connect` will deem that the component's relevant state hasn't changed. In this case, it will prevent the component from re-rendering by not updating its internal props, thus not triggering a React re-render cycle.\n\n**Relation to `mapStateToProps`:**\nThe efficiency of this mechanism heavily depends on `mapStateToProps`. If `mapStateToProps` always creates new object or array references (e.g., `return { data: [...state.data] }` even if `state.data` hasn't changed its content), the shallow comparison will always fail, causing unnecessary re-renders. Therefore, `mapStateToProps` should be written to only return new object/array references if their *contents* (or the data derived from them) have actually changed, or if you explicitly want a re-render. Memoized selectors (e.g., from `reselect`) are often used to optimize `mapStateToProps` to prevent creating new object references unnecessarily, ensuring that the shallow equality check in `connect` works effectively.",
          "options": [],
          "analysisPoints": [
            "Explains the subscription model.",
            "Details the shallow equality check mechanism.",
            "Highlights the role and importance of `mapStateToProps` in this process.",
            "Mentions the implication of non-memoized `mapStateToProps` and potential solutions (reselect)."
          ],
          "keyConcepts": [
            "Redux Connect",
            "Performance Optimization",
            "mapStateToProps",
            "Shallow Comparison",
            "Memoized Selectors",
            "Reselect",
            "Re-rendering"
          ],
          "evaluationCriteria": [
            "In-depth understanding of `connect`'s optimization.",
            "Ability to link `connect`'s behavior to `mapStateToProps` implementation.",
            "Knowledge of best practices for performance in Redux."
          ],
          "example": "",
          "tags": [
            "Redux",
            "connect",
            "Performance",
            "Optimization",
            "mapStateToProps",
            "Reselect"
          ],
          "prerequisites": [
            "redux_middleware",
            "redux_selectors"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_redux_connect_5",
          "topic": "Redux `connect` vs Hooks",
          "level": "hard",
          "type": "mcq",
          "question": "Which of the following is a key advantage of using `useSelector` and `useDispatch` hooks over the `connect` HOC for integrating functional components with Redux?",
          "answer": "Hooks often lead to simpler, more readable code and avoid the prop-drilling inherent in HOCs.",
          "options": [
            "`connect` is deprecated, so hooks are the only modern option.",
            "Hooks perform deep equality checks by default, unlike `connect`.",
            "Hooks always result in better performance than `connect`.",
            "Hooks often lead to simpler, more readable code and avoid the prop-drilling inherent in HOCs."
          ],
          "analysisPoints": [
            "Compares `connect` with hooks.",
            "Identifies a significant benefit of hooks (simplicity, avoiding HOC complexity).",
            "Correctly refutes common misconceptions (deprecation, default deep equality, automatic superior performance)."
          ],
          "keyConcepts": [
            "Redux Hooks",
            "useSelector",
            "useDispatch",
            "connect",
            "Higher-Order Components",
            "Code Readability",
            "Prop Drilling"
          ],
          "evaluationCriteria": [
            "Understanding of modern Redux integration.",
            "Ability to compare and contrast HOCs and hooks.",
            "Awareness of the trade-offs and benefits."
          ],
          "example": "While `connect` passes Redux state and dispatch functions as props, which can sometimes lead to 'prop drilling' issues or make components less straightforward to compose, hooks allow direct access to the store's state and dispatch within the component body. This often results in cleaner code, especially for components that only need a small slice of state or dispatch a few actions. For example:\n\n**With `connect`:**\n```jsx\nconst MyComponent = ({ user, signOut }) => { /* ... */ };\nexport default connect(state => ({ user: state.auth.user }), { signOut })(MyComponent);\n```\n\n**With Hooks:**\n```jsx\nimport { useSelector, useDispatch } from 'react-redux';\nimport { signOut } from './actions';\n\nconst MyComponent = () => {\n  const user = useSelector(state => state.auth.user);\n  const dispatch = useDispatch();\n\n  const handleSignOut = () => dispatch(signOut());\n\n  return ( /* ... */ );\n};\n```\nHooks generally simplify the component's signature and localizes Redux logic within the functional component.",
          "tags": [
            "Redux",
            "Hooks",
            "connect",
            "React",
            "Comparison",
            "Best Practices"
          ],
          "prerequisites": [
            "react_hooks",
            "redux_hooks"
          ],
          "complexity": 7,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        },
        {
          "id": "question_redux_connect_6",
          "topic": "Redux `connect`",
          "level": "code",
          "type": "code",
          "question": "You have a Redux store with a `products` slice containing an array of products and a `filter` string. Write the `mapStateToProps` and `mapDispatchToProps` functions for a `ProductList` component that displays filtered products and allows dispatching a `setFilter` action.\n\n**Redux State Structure:**\n```typescript\ninterface AppState {\n  products: {\n    list: Array<{ id: number; name: string; category: string; price: number; }>;\n    filter: string;\n  };\n}\n```\n\n**Action Creator:**\n```typescript\n// actions.ts\nconst setFilter = (filter: string) => ({\n  type: 'SET_PRODUCT_FILTER',\n  payload: filter,\n});\n```\n\n**Component Signature:**\n```typescript\ninterface ProductListProps {\n  filteredProducts: Array<{ id: number; name: string; category: string; price: number; }>;\n  setProductFilter: (filter: string) => void;\n}\n\n// function ProductList(props: ProductListProps) { /* ... */ }\n```\n\nProvide only the `mapStateToProps` and `mapDispatchToProps` implementations.",
          "answer": "```typescript\nimport { createSelector } from 'reselect'; // Recommended for derived state\nimport { setFilter } from './actions';\n\n// Selector to get products list and filter string from state\nconst getProductsList = (state) => state.products.list;\nconst getProductFilter = (state) => state.products.filter;\n\n// Memoized selector for filtered products\nconst getFilteredProducts = createSelector(\n  [getProductsList, getProductFilter],\n  (products, filter) => {\n    if (!filter) {\n      return products;\n    }\n    return products.filter(product =>\n      product.name.toLowerCase().includes(filter.toLowerCase()) ||\n      product.category.toLowerCase().includes(filter.toLowerCase())\n    );\n  }\n);\n\nconst mapStateToProps = (state) => ({\n  filteredProducts: getFilteredProducts(state),\n});\n\nconst mapDispatchToProps = {\n  setProductFilter: setFilter,\n};\n\n// To connect:\n// export default connect(mapStateToProps, mapDispatchToProps)(ProductList);\n```",
          "options": [],
          "analysisPoints": [
            "Correctly maps `filteredProducts` using `mapStateToProps`.",
            "Demonstrates a derived state calculation within `mapStateToProps` (or ideally, with reselect).",
            "Correctly maps `setProductFilter` using `mapDispatchToProps` (using the object shorthand).",
            "Adheres to the specified prop names.",
            "Includes `reselect` for robust derived state memoization, which is a best practice for `mapStateToProps`.",
            "Provides proper type annotation for interfaces."
          ],
          "keyConcepts": [
            "mapStateToProps",
            "mapDispatchToProps",
            "Redux State",
            "Derived State",
            "Selectors",
            "Reselect",
            "Action Creators"
          ],
          "evaluationCriteria": [
            "Correct implementation of `mapStateToProps` and `mapDispatchToProps`.",
            "Efficiency of `mapStateToProps` (use of selectors/reselect).",
            "Adherence to component prop interface.",
            "Understanding of Redux data flow."
          ],
          "example": "",
          "tags": [
            "Redux",
            "connect",
            "mapStateToProps",
            "mapDispatchToProps",
            "Coding Challenge",
            "Selectors",
            "Reselect"
          ],
          "prerequisites": [
            "redux_selectors",
            "redux_actions",
            "typescript_basics"
          ],
          "complexity": 8,
          "interviewFrequency": 9,
          "learningPath": "advanced"
        }
      ],
      "tasks": [
        {
          "id": "task_optimize_component_memo",
          "title": "Optimize a Product Card Component using React.memo",
          "description": "\nYou are given a `ProductCard` component that displays product details and a `ProductGrid` component that renders a list of these cards. The `ProductGrid` component has a counter that updates every second, causing the entire grid to re-render.\n\nYour task is to optimize the `ProductCard` component using `React.memo` to prevent it from re-rendering unnecessarily when the `ProductGrid`'s counter updates, as long as the `product` data and `onAddToCart` function passed to `ProductCard` remain stable.\n\n**Requirements:**\n1.  Apply `React.memo` to the `ProductCard` component.\n2.  Ensure that the `onAddToCart` function passed from `ProductGrid` to `ProductCard` does not cause unnecessary re-renders of `ProductCard`.\n3.  Verify the optimization by observing the console logs: `ProductCard rendered` should only appear once per card initially, and not when the `ProductGrid` counter updates.\n\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect } from 'react';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n}\n\ninterface ProductCardProps {\n  product: Product;\n  onAddToCart: (productId: number) => void;\n}\n\n// TODO: Optimize this component using React.memo\nconst ProductCard: React.FC<ProductCardProps> = ({ product, onAddToCart }) => {\n  console.log(`ProductCard ${product.name} rendered`);\n  return (\n    <div style={{ border: '1px solid #ccc', padding: '10px', margin: '10px', borderRadius: '5px' }}>\n      <h3>{product.name}</h3>\n      <p>{product.description}</p>\n      <p>Price: ${product.price.toFixed(2)}</p>\n      <button onClick={() => onAddToCart(product.id)}>Add to Cart</button>\n    </div>\n  );\n};\n\ninterface ProductGridProps {\n  products: Product[];\n}\n\nconst ProductGrid: React.FC<ProductGridProps> = ({ products }) => {\n  const [counter, setCounter] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCounter(prev => prev + 1);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleAddToCart = (productId: number) => {\n    console.log(`Adding product ${productId} to cart`);\n    // In a real app, this would dispatch an action or update context\n  };\n\n  console.log(`ProductGrid rendered, counter: ${counter}`);\n\n  return (\n    <div>\n      <h1>Product Grid (Counter: {counter})</h1>\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '20px' }}>\n        {products.map(product => (\n          <ProductCard key={product.id} product={product} onAddToCart={handleAddToCart} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// Usage example (in App.tsx or similar)\nconst initialProducts: Product[] = [\n  { id: 1, name: 'Laptop Pro', price: 1200, description: 'High performance laptop.' },\n  { id: 2, name: 'Wireless Mouse', price: 25, description: 'Ergonomic and precise.' },\n  { id: 3, name: 'Mechanical Keyboard', price: 100, description: 'Clicky and durable.' },\n];\n\nexport default function App() {\n  return <ProductGrid products={initialProducts} />;\n}\n",
          "solutionCode": "import React, { useState, useEffect, memo, useCallback } from 'react';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n}\n\ninterface ProductCardProps {\n  product: Product;\n  onAddToCart: (productId: number) => void;\n}\n\n// OPTIMIZED: Wrap ProductCard with React.memo\nconst ProductCard: React.FC<ProductCardProps> = memo(({ product, onAddToCart }) => {\n  console.log(`ProductCard ${product.name} rendered`); // This should only log once per card\n  return (\n    <div style={{ border: '1px solid #ccc', padding: '10px', margin: '10px', borderRadius: '5px' }}>\n      <h3>{product.name}</h3>\n      <p>{product.description}</p>\n      <p>Price: ${product.price.toFixed(2)}</p>\n      <button onClick={() => onAddToCart(product.id)}>Add to Cart</button>\n    </div>\n  );\n});\n\ninterface ProductGridProps {\n  products: Product[];\n}\n\nconst ProductGrid: React.FC<ProductGridProps> = ({ products }) => {\n  const [counter, setCounter] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCounter(prev => prev + 1);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // OPTIMIZED: Memoize handleAddToCart using useCallback\n  const handleAddToCart = useCallback((productId: number) => {\n    console.log(`Adding product ${productId} to cart`);\n    // In a real app, this would dispatch an action or update context\n  }, []); // Empty dependency array ensures the function reference is stable\n\n  console.log(`ProductGrid rendered, counter: ${counter}`);\n\n  return (\n    <div>\n      <h1>Product Grid (Counter: {counter})</h1>\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '20px' }}>\n        {products.map(product => (\n          <ProductCard key={product.id} product={product} onAddToCart={handleAddToCart} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nconst initialProducts: Product[] = [\n  { id: 1, name: 'Laptop Pro', price: 1200, description: 'High performance laptop.' },\n  { id: 2, name: 'Wireless Mouse', price: 25, description: 'Ergonomic and precise.' },\n  { id: 3, name: 'Mechanical Keyboard', price: 100, description: 'Clicky and durable.' },\n];\n\nexport default function App() {\n  return <ProductGrid products={initialProducts} />;\n}\n",
          "testCases": [
            "Initial render: All `ProductCard` components should render once.",
            "Counter update: When `ProductGrid`'s counter updates, `ProductCard` components should NOT re-render (their console logs should not appear again), assuming `product` and `onAddToCart` props remain stable by reference.",
            "Prop change: If a product's details were to change (e.g., price update triggering new product object reference), the relevant `ProductCard` should re-render."
          ],
          "hints": [
            "Remember that `React.memo` performs a shallow comparison on props.",
            "Functions defined directly inside a functional component are re-created on every render, which can break memoization.",
            "Consider which React Hook can help memoize a function definition."
          ],
          "tags": [
            "React",
            "Performance",
            "Optimization",
            "React.memo",
            "useCallback",
            "Functional Components"
          ],
          "timeEstimate": 30,
          "prerequisites": [
            "react_functional_components",
            "react_hooks_basics"
          ],
          "complexity": 6,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Shallow Comparison",
            "Memoization",
            "Prop Stability"
          ]
        },
        {
          "id": "task_implement_loading_hoc",
          "title": "Create a `withLoading` HOC and integrate it with a component",
          "description": "\nImplement a Higher-Order Component (HOC) named `withLoading` that enhances a given React component by displaying a 'Loading...' message when an `isLoading` prop is true. The HOC should pass through all other props to the wrapped component.\n\nThen, integrate this `withLoading` HOC with a `UserList` component that simulates data fetching.\n\n**Requirements:**\n1.  Create a functional HOC `withLoading` that takes a `WrappedComponent` as an argument.\n2.  Inside `withLoading`, return a new functional component that renders `Loading...` if its `isLoading` prop is `true`, otherwise renders the `WrappedComponent` with all passed props.\n3.  Implement a `UserList` component that uses React's `useState` for `users` and `isLoading` state, and `useEffect` to simulate an asynchronous data fetch.\n4.  Wrap `UserList` with `withLoading` to create `UserListWithLoading`.\n5.  Ensure that `UserListWithLoading` correctly displays 'Loading...' initially, then shows the user list after the simulated fetch completes.\n",
          "difficulty": "medium",
          "startingCode": "import React, { useState, useEffect } from 'react';\n\n// TODO: Implement the withLoading HOC here\n// const withLoading = (WrappedComponent) => { /* ... */ };\n\ninterface User {\n  id: number;\n  name: string;\n}\n\ninterface UserListProps {\n  users: User[];\n  isLoading?: boolean; // Prop provided by the HOC\n}\n\nconst UserList: React.FC<UserListProps> = ({ users }) => {\n  return (\n    <div>\n      <h2>Users</h2>\n      <ul>\n        {users.map(user => (\n          <li key={user.id}>{user.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\n// Main App Component\nexport default function App() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setUsers([\n        { id: 1, name: 'Alice' },\n        { id: 2, name: 'Bob' },\n        { id: 3, name: 'Charlie' }\n      ]);\n      setIsLoading(false);\n    };\n    \n    fetchData();\n  }, []);\n\n  // TODO: Use the withLoading HOC to enhance UserList\n  // const UserListWithLoading = withLoading(UserList);\n  // return <UserListWithLoading users={users} isLoading={isLoading} />;\n\n  // Currently, the App directly handles loading. Modify this to use the HOC.\n  if (isLoading) {\n    return <div>Loading...</div>; // This should be handled by HOC eventually\n  }\n  return <UserList users={users} />;\n}\n",
          "solutionCode": "import React, { useState, useEffect, ComponentType } from 'react';\n\n// HOC: withLoading\n// Takes a React component and returns a new component that handles loading state\nconst withLoading = <P extends { isLoading?: boolean }>(WrappedComponent: ComponentType<P>): React.FC<P> => {\n  const WithLoadingComponent: React.FC<P> = (props) => {\n    const { isLoading, ...otherProps } = props;\n\n    if (isLoading) {\n      return <div>Loading...</div>;\n    }\n\n    // Cast 'otherProps' to the type of the WrappedComponent's props minus isLoading\n    // This ensures type safety for the props passed to WrappedComponent\n    return <WrappedComponent {...(otherProps as P)} />;\n  };\n\n  WithLoadingComponent.displayName = `withLoading(${getDisplayName(WrappedComponent)})`;\n  return WithLoadingComponent;\n};\n\n// Helper to get display name for HOC\nfunction getDisplayName<P>(WrappedComponent: ComponentType<P>) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n}\n\ninterface User {\n  id: number;\n  name: string;\n}\n\ninterface UserListProps {\n  users: User[];\n  isLoading?: boolean; // This prop is consumed by the HOC, not directly by UserList\n}\n\nconst UserList: React.FC<UserListProps> = ({ users }) => {\n  console.log('UserList rendered'); // Will only render when not loading\n  return (\n    <div>\n      <h2>Users</h2>\n      <ul>\n        {users.map(user => (\n          <li key={user.id}>{user.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\n// Main App Component\nexport default function App() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      setUsers([\n        { id: 1, name: 'Alice' },\n        { id: 2, name: 'Bob' },\n        { id: 3, name: 'Charlie' }\n      ]);\n      setIsLoading(false);\n    };\n    \n    fetchData();\n  }, []);\n\n  // Use the withLoading HOC to enhance UserList\n  const UserListWithLoading = withLoading(UserList);\n\n  // Pass the necessary props including isLoading to the HOC-enhanced component\n  return <UserListWithLoading users={users} isLoading={isLoading} />;\n}\n",
          "testCases": [
            "Initial render: `UserListWithLoading` should display 'Loading...' message.",
            "After 2 seconds: The 'Loading...' message should disappear, and the actual `UserList` component with users should be displayed.",
            "Prop pass-through: Ensure all props (e.g., `users`) are correctly passed from the `App` component through the HOC to the `UserList` component."
          ],
          "hints": [
            "A Higher-Order Component (HOC) is a function that takes a component and returns a new component.",
            "The HOC should take `props` as an argument and destructure `isLoading` from it, passing the rest of the props.",
            "Make sure to correctly type the HOC to ensure prop types are inferred correctly for the wrapped component."
          ],
          "tags": [
            "React",
            "Higher-Order Component",
            "HOC",
            "Loading State",
            "Functional Components",
            "Reusability"
          ],
          "timeEstimate": 45,
          "prerequisites": [
            "react_functional_components",
            "react_hooks_basics",
            "typescript_generics_basics"
          ],
          "complexity": 7,
          "interviewRelevance": 8,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Component Composition",
            "Prop Spreading",
            "Conditional Rendering"
          ]
        },
        {
          "id": "task_create_redux_user_dashboard",
          "title": "Build a Redux Connected User Dashboard",
          "description": "\nDevelop a simple User Dashboard application using React and Redux, where a `UserDashboard` component connects to the Redux store to display user data and dispatch actions for adding and deleting users.\n\n**Redux Setup (Provided as context, no need to implement full store):**\nAssume you have a Redux store with the following state shape and corresponding action types:\n```typescript\n// Initial State\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\ninterface AppState {\n  users: User[];\n  lastUserId: number;\n}\n\n// Action Types\nconst ADD_USER = 'ADD_USER';\nconst DELETE_USER = 'DELETE_USER';\n\n// Action Creators\nconst addUser = (name: string, email: string) => ({\n  type: ADD_USER,\n  payload: { name, email },\n});\n\nconst deleteUser = (id: number) => ({\n  type: DELETE_USER,\n  payload: id,\n});\n\n// Reducer (Simplified)\nconst initialState: AppState = { users: [], lastUserId: 0 };\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_USER:\n      const newId = state.lastUserId + 1;\n      return { \n        ...state, \n        users: [...state.users, { id: newId, ...action.payload }],\n        lastUserId: newId\n      };\n    case DELETE_USER:\n      return { ...state, users: state.users.filter(user => user.id !== action.payload) };\n    default:\n      return state;\n  }\n};\n```\n\n**Your Task:**\n1.  Create a `UserDashboard` functional component.\n2.  Implement `mapStateToProps` to map the `users` array from the Redux state to a prop named `allUsers`.\n3.  Implement `mapDispatchToProps` to map the `addUser` and `deleteUser` action creators to props of the same name.\n4.  Connect `UserDashboard` to the Redux store using the `connect` HOC.\n5.  In the `UserDashboard` component, display the `allUsers` list.\n6.  Add an input form (for name and email) and a button to add new users using the `addUser` prop.\n7.  Add a 'Delete' button next to each user in the list to remove them using the `deleteUser` prop.\n\n**Note**: You don't need to set up the full Redux store (`createStore`, `Provider`) in your solution code, just the component and its `connect` implementation. Assume `Provider` wraps the `UserDashboard` component higher up in the component tree for testing.",
          "difficulty": "hard",
          "startingCode": "import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\n\n// Assume these are available from your Redux setup\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\ninterface AppState {\n  users: User[];\n  lastUserId: number;\n}\n\n// Action Creators (for context, no need to re-implement)\nconst ADD_USER = 'ADD_USER';\nconst DELETE_USER = 'DELETE_USER';\n\nconst addUser = (name: string, email: string) => ({\n  type: ADD_USER,\n  payload: { name, email },\n});\n\nconst deleteUser = (id: number) => ({\n  type: DELETE_USER,\n  payload: id,\n});\n\n// --- Start your implementation below --- //\n\ninterface UserDashboardProps {\n  // TODO: Add props mapped from Redux state and dispatch here\n  allUsers: User[]; // Example of prop from state\n  addUser: (name: string, email: string) => void; // Example of prop from dispatch\n  deleteUser: (id: number) => void;\n}\n\nconst UserDashboard: React.FC<UserDashboardProps> = ({ allUsers, addUser, deleteUser }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n\n  const handleAddUser = () => {\n    if (name && email) {\n      addUser(name, email);\n      setName('');\n      setEmail('');\n    }\n  };\n\n  return (\n    <div>\n      <h2>User Dashboard</h2>\n      <div>\n        <h3>Add New User</h3>\n        <input \n          type=\"text\" \n          placeholder=\"Name\" \n          value={name} \n          onChange={(e) => setName(e.target.value)} \n        />\n        <input \n          type=\"email\" \n          placeholder=\"Email\" \n          value={email} \n          onChange={(e) => setEmail(e.target.value)} \n          style={{ marginLeft: '10px' }}\n        />\n        <button onClick={handleAddUser} style={{ marginLeft: '10px' }}>Add User</button>\n      </div>\n\n      <h3>Current Users</h3>\n      {allUsers.length === 0 ? (\n        <p>No users yet. Add some!</p>\n      ) : (\n        <ul>\n          {allUsers.map(user => (\n            <li key={user.id}>\n              {user.name} ({user.email})\n              <button onClick={() => deleteUser(user.id)} style={{ marginLeft: '10px', color: 'red' }}>Delete</button>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\n// TODO: Implement mapStateToProps and mapDispatchToProps\nconst mapStateToProps = (state: AppState) => ({\n  allUsers: state.users,\n});\n\nconst mapDispatchToProps = {\n  addUser,\n  deleteUser,\n};\n\n// TODO: Connect the UserDashboard component\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDashboard);\n",
          "solutionCode": "import React, { useState } from 'react';\nimport { connect } from 'react-redux';\n\n// Assume these are available from your Redux setup\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\ninterface AppState {\n  users: User[];\n  lastUserId: number;\n}\n\n// Action Creators (for context, no need to re-implement)\nconst ADD_USER = 'ADD_USER';\nconst DELETE_USER = 'DELETE_USER';\n\nconst addUser = (name: string, email: string) => ({\n  type: ADD_USER,\n  payload: { name, email },\n});\n\nconst deleteUser = (id: number) => ({\n  type: DELETE_USER,\n  payload: id,\n});\n\n// --- Your implementation --- //\n\ninterface UserDashboardProps {\n  allUsers: User[];\n  addUser: (name: string, email: string) => void;\n  deleteUser: (id: number) => void;\n}\n\nconst UserDashboard: React.FC<UserDashboardProps> = ({ allUsers, addUser, deleteUser }) => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n\n  const handleAddUser = () => {\n    if (name.trim() && email.trim()) {\n      addUser(name, email);\n      setName('');\n      setEmail('');\n    } else {\n      alert('Name and Email cannot be empty!');\n    }\n  };\n\n  return (\n    <div>\n      <h2>User Dashboard</h2>\n      <div>\n        <h3>Add New User</h3>\n        <input \n          type=\"text\" \n          placeholder=\"Name\" \n          value={name} \n          onChange={(e) => setName(e.target.value)} \n        />\n        <input \n          type=\"email\" \n          placeholder=\"Email\" \n          value={email} \n          onChange={(e) => setEmail(e.target.value)} \n          style={{ marginLeft: '10px' }}\n        />\n        <button onClick={handleAddUser} style={{ marginLeft: '10px' }}>Add User</button>\n      </div>\n\n      <h3>Current Users</h3>\n      {allUsers.length === 0 ? (\n        <p>No users yet. Add some!</p>\n      ) : (\n        <ul>\n          {allUsers.map(user => (\n            <li key={user.id}>\n              {user.name} ({user.email})\n              <button onClick={() => deleteUser(user.id)} style={{ marginLeft: '10px', color: 'red' }}>Delete</button>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\n// mapStateToProps: Maps Redux state to component props\nconst mapStateToProps = (state: AppState) => ({\n  allUsers: state.users,\n});\n\n// mapDispatchToProps: Maps Redux action creators to component props\n// Using the object shorthand for dispatching actions\nconst mapDispatchToProps = {\n  addUser,\n  deleteUser,\n};\n\n// Connect the UserDashboard component to the Redux store\nexport default connect(mapStateToProps, mapDispatchToProps)(UserDashboard);\n\n// For a full application, you would set up your store and provider like this:\n/*\nimport { createStore, combineReducers } from 'redux';\nimport { Provider } from 'react-redux';\n\nconst rootReducer = combineReducers({\n  users: usersReducer // Assuming usersReducer handles the 'users' slice of state\n});\nconst store = createStore(rootReducer);\n\nexport function AppContainer() {\n  return (\n    <Provider store={store}>\n      <ConnectedUserDashboard />\n    </Provider>\n  );\n}\n*/\n",
          "testCases": [
            "Initial state: The dashboard should display 'No users yet. Add some!' and an empty list.",
            "Add user: Entering name/email and clicking 'Add User' should add a new user to the list, updating the UI. The input fields should clear.",
            "Delete user: Clicking 'Delete' next to a user should remove that user from the list, updating the UI.",
            "Empty inputs: Attempting to add a user with empty name/email should be handled gracefully (e.g., prevent adding, show alert)."
          ],
          "hints": [
            "Remember that `mapStateToProps` receives the entire Redux state.",
            "The `mapDispatchToProps` can be provided as an object directly when mapping action creators.",
            "Ensure your `UserDashboardProps` interface correctly reflects the props you expect from `connect`.",
            "You'll need to define `mapStateToProps` and `mapDispatchToProps` outside of the component and pass them to `connect`."
          ],
          "tags": [
            "Redux",
            "connect",
            "mapStateToProps",
            "mapDispatchToProps",
            "State Management",
            "Data Flow",
            "Forms",
            "CRUD"
          ],
          "timeEstimate": 60,
          "prerequisites": [
            "redux_core_concepts",
            "react_forms",
            "react_state_management"
          ],
          "complexity": 8,
          "interviewRelevance": 9,
          "learningPath": "intermediate",
          "relatedConcepts": [
            "Higher-Order Components",
            "Redux Actions",
            "Redux Reducers",
            "Unidirectional Data Flow"
          ]
        }
      ]
    }
  }
]